<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ruby: parse.y Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="../../files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>parse.y</h1><a href="../../d7/dc0/parse_8y.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/**********************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"></span>
<a name="l00003"></a>00003 <span class="comment">  parse.y -</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment">  $Author: naruse $</span>
<a name="l00006"></a>00006 <span class="comment">  created at: Fri May 28 18:02:42 JST 1993</span>
<a name="l00007"></a>00007 <span class="comment"></span>
<a name="l00008"></a>00008 <span class="comment">  Copyright (C) 1993-2007 Yukihiro Matsumoto</span>
<a name="l00009"></a>00009 <span class="comment"></span>
<a name="l00010"></a>00010 <span class="comment">**********************************************************************/</span>
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 %{
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="preprocessor">#define YYDEBUG 1</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span><span class="preprocessor">#define YYERROR_VERBOSE 1</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span><span class="preprocessor">#define YYSTACK_USE_ALLOCA 0</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;<a class="code" href="../../de/de6/ruby_2ruby_8h.html">ruby/ruby.h</a>&quot;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/d24/st_8h.html">ruby/st.h</a>&quot;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;<a class="code" href="../../d5/de3/encoding_8h.html">ruby/encoding.h</a>&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;<a class="code" href="../../db/dde/internal_8h.html">internal.h</a>&quot;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d77/node_8h.html">node.h</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="../../d4/d2b/parse_8h.html">parse.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="../../df/db9/id_8h.html">id.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/df8/regenc_8h.html">regenc.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;errno.h&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;ctype.h&gt;</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#define numberof(array) (int)(sizeof(array) / sizeof((array)[0]))</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span>
<a name="l00032"></a>00032 <span class="preprocessor">#define YYMALLOC(size)          rb_parser_malloc(parser, (size))</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#define YYREALLOC(ptr, size)    rb_parser_realloc(parser, (ptr), (size))</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor">#define YYCALLOC(nelem, size)   rb_parser_calloc(parser, (nelem), (size))</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor">#define YYFREE(ptr)             rb_parser_free(parser, (ptr))</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="preprocessor">#define malloc  YYMALLOC</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span><span class="preprocessor">#define realloc YYREALLOC</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span><span class="preprocessor">#define calloc  YYCALLOC</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span><span class="preprocessor">#define free    YYFREE</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span>
<a name="l00041"></a>00041 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <a class="code" href="../../d7/dc0/parse_8y.html#ad33897fa7fb56da938b08fb63e022a62">register_symid</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *, <span class="keywordtype">long</span>, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *);
<a name="l00043"></a>00043 <span class="preprocessor">#define REGISTER_SYMID(id, name) register_symid((id), (name), strlen(name), enc)</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="../../d8/dd1/id_8c.html">id.c</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#endif</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>
<a name="l00047"></a>00047 <span class="preprocessor">#define is_notop_id(id) ((id)&gt;tLAST_TOKEN)</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor">#define is_local_id(id) (is_notop_id(id)&amp;&amp;((id)&amp;ID_SCOPE_MASK)==ID_LOCAL)</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span><span class="preprocessor">#define is_global_id(id) (is_notop_id(id)&amp;&amp;((id)&amp;ID_SCOPE_MASK)==ID_GLOBAL)</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#define is_instance_id(id) (is_notop_id(id)&amp;&amp;((id)&amp;ID_SCOPE_MASK)==ID_INSTANCE)</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span><span class="preprocessor">#define is_attrset_id(id) (is_notop_id(id)&amp;&amp;((id)&amp;ID_SCOPE_MASK)==ID_ATTRSET)</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span><span class="preprocessor">#define is_const_id(id) (is_notop_id(id)&amp;&amp;((id)&amp;ID_SCOPE_MASK)==ID_CONST)</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span><span class="preprocessor">#define is_class_id(id) (is_notop_id(id)&amp;&amp;((id)&amp;ID_SCOPE_MASK)==ID_CLASS)</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span><span class="preprocessor">#define is_junk_id(id) (is_notop_id(id)&amp;&amp;((id)&amp;ID_SCOPE_MASK)==ID_JUNK)</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span>
<a name="l00056"></a>00056 <span class="preprocessor">#define is_asgn_or_id(id) ((is_notop_id(id)) &amp;&amp; \</span>
<a name="l00057"></a>00057 <span class="preprocessor">        (((id)&amp;ID_SCOPE_MASK) == ID_GLOBAL || \</span>
<a name="l00058"></a>00058 <span class="preprocessor">         ((id)&amp;ID_SCOPE_MASK) == ID_INSTANCE || \</span>
<a name="l00059"></a>00059 <span class="preprocessor">         ((id)&amp;ID_SCOPE_MASK) == ID_CLASS))</span>
<a name="l00060"></a>00060 <span class="preprocessor"></span>
<a name="l00061"></a>00061 <span class="keyword">enum</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389">lex_state_e</a> {
<a name="l00062"></a>00062     <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>,                   <span class="comment">/* ignore newline, +/- is a sign. */</span>
<a name="l00063"></a>00063     <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389abb6d8e9fea98441c3b5971c4e7d509ae">EXPR_END</a>,                   <span class="comment">/* newline significant, +/- is an operator. */</span>
<a name="l00064"></a>00064     <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ad1e711c09425cc55dd8982c6486d14cb">EXPR_ENDARG</a>,                <span class="comment">/* ditto, and unbound braces. */</span>
<a name="l00065"></a>00065     <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a6625ca72427336b58374fc438e51b225">EXPR_ENDFN</a>,                 <span class="comment">/* ditto, and unbound braces. */</span>
<a name="l00066"></a>00066     <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>,                   <span class="comment">/* newline significant, +/- is an operator. */</span>
<a name="l00067"></a>00067     <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aad207364dc60f12acc33ec7685fd7c84">EXPR_CMDARG</a>,                <span class="comment">/* newline significant, +/- is an operator. */</span>
<a name="l00068"></a>00068     <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a89dc74e00b82af2e66a4b8299ff7dfa2">EXPR_MID</a>,                   <span class="comment">/* newline significant, +/- is an operator. */</span>
<a name="l00069"></a>00069     <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>,                 <span class="comment">/* ignore newline, no reserved words. */</span>
<a name="l00070"></a>00070     <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>,                   <span class="comment">/* right after `.&apos; or `::&apos;, no reserved words. */</span>
<a name="l00071"></a>00071     <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a98a4a7774a64c9570a583444940f74d5">EXPR_CLASS</a>,                 <span class="comment">/* immediate after `class&apos;, no here document. */</span>
<a name="l00072"></a>00072     <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a26cd215d29270ab3dcfa7bf9bbb81193">EXPR_VALUE</a>,                 <span class="comment">/* alike EXPR_BEG but label is disallowed. */</span>
<a name="l00073"></a>00073     <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a32e8768c63b617c55daff045ca8ad488">EXPR_MAX_STATE</a>
<a name="l00074"></a>00074 };
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 <span class="keyword">typedef</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d5/d11/ripper_8c.html#ae6eb774b9546aae79b207c7bae8d7253">stack_type</a>;
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <span class="preprocessor"># define BITSTACK_PUSH(stack, n)        ((stack) = ((stack)&lt;&lt;1)|((n)&amp;1))</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span><span class="preprocessor"># define BITSTACK_POP(stack)    ((stack) = (stack) &gt;&gt; 1)</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span><span class="preprocessor"># define BITSTACK_LEXPOP(stack) ((stack) = ((stack) &gt;&gt; 1) | ((stack) &amp; 1))</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span><span class="preprocessor"># define BITSTACK_SET_P(stack)  ((stack)&amp;1)</span>
<a name="l00082"></a>00082 <span class="preprocessor"></span>
<a name="l00083"></a>00083 <span class="preprocessor">#define COND_PUSH(n)    BITSTACK_PUSH(cond_stack, (n))</span>
<a name="l00084"></a>00084 <span class="preprocessor"></span><span class="preprocessor">#define COND_POP()      BITSTACK_POP(cond_stack)</span>
<a name="l00085"></a>00085 <span class="preprocessor"></span><span class="preprocessor">#define COND_LEXPOP()   BITSTACK_LEXPOP(cond_stack)</span>
<a name="l00086"></a>00086 <span class="preprocessor"></span><span class="preprocessor">#define COND_P()        BITSTACK_SET_P(cond_stack)</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span>
<a name="l00088"></a>00088 <span class="preprocessor">#define CMDARG_PUSH(n)  BITSTACK_PUSH(cmdarg_stack, (n))</span>
<a name="l00089"></a>00089 <span class="preprocessor"></span><span class="preprocessor">#define CMDARG_POP()    BITSTACK_POP(cmdarg_stack)</span>
<a name="l00090"></a>00090 <span class="preprocessor"></span><span class="preprocessor">#define CMDARG_LEXPOP() BITSTACK_LEXPOP(cmdarg_stack)</span>
<a name="l00091"></a>00091 <span class="preprocessor"></span><span class="preprocessor">#define CMDARG_P()      BITSTACK_SET_P(cmdarg_stack)</span>
<a name="l00092"></a>00092 <span class="preprocessor"></span>
<a name="l00093"></a>00093 <span class="keyword">struct </span><a class="code" href="../../da/d3d/structvtable.html">vtable</a> {
<a name="l00094"></a>00094     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> *<a class="code" href="../../da/d3d/structvtable.html#a5308cc6c4700614b0ec2a74317a93f11">tbl</a>;
<a name="l00095"></a>00095     <span class="keywordtype">int</span> <a class="code" href="../../da/d3d/structvtable.html#a7fdcb9c83ee19c84d989b925043ad06d">pos</a>;
<a name="l00096"></a>00096     <span class="keywordtype">int</span> <a class="code" href="../../da/d3d/structvtable.html#a5e21ff3b8c0aaa63c0ae1d9454207ba2">capa</a>;
<a name="l00097"></a>00097     <span class="keyword">struct </span><a class="code" href="../../da/d3d/structvtable.html">vtable</a> *<a class="code" href="../../da/d3d/structvtable.html#a75a8b035d8c379d99af9a04c14f9414c">prev</a>;
<a name="l00098"></a>00098 };
<a name="l00099"></a>00099 
<a name="l00100"></a>00100 <span class="keyword">struct </span><a class="code" href="../../df/d34/structlocal__vars.html">local_vars</a> {
<a name="l00101"></a>00101     <span class="keyword">struct </span><a class="code" href="../../da/d3d/structvtable.html">vtable</a> *<a class="code" href="../../df/d34/structlocal__vars.html#ad1c48547f7cb37319c5fb8887d939e80">args</a>;
<a name="l00102"></a>00102     <span class="keyword">struct </span><a class="code" href="../../da/d3d/structvtable.html">vtable</a> *<a class="code" href="../../df/d34/structlocal__vars.html#a69f2a304610e6ff671c45b664ccf831a">vars</a>;
<a name="l00103"></a>00103     <span class="keyword">struct </span><a class="code" href="../../da/d3d/structvtable.html">vtable</a> *<a class="code" href="../../df/d34/structlocal__vars.html#ae2e9500109d251ab7fe794d16d72f071">used</a>;
<a name="l00104"></a>00104     <span class="keyword">struct </span><a class="code" href="../../df/d34/structlocal__vars.html">local_vars</a> *<a class="code" href="../../df/d34/structlocal__vars.html#a14c2a2f2db273cae73cc35b9dbcbad87">prev</a>;
<a name="l00105"></a>00105 };
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 <span class="preprocessor">#define DVARS_INHERIT ((void*)1)</span>
<a name="l00108"></a>00108 <span class="preprocessor"></span><span class="preprocessor">#define DVARS_TOPSCOPE NULL</span>
<a name="l00109"></a>00109 <span class="preprocessor"></span><span class="preprocessor">#define DVARS_SPECIAL_P(tbl) (!POINTER_P(tbl))</span>
<a name="l00110"></a>00110 <span class="preprocessor"></span><span class="preprocessor">#define POINTER_P(val) ((VALUE)(val) &amp; ~(VALUE)3)</span>
<a name="l00111"></a>00111 <span class="preprocessor"></span>
<a name="l00112"></a>00112 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00113"></a>00113 <a class="code" href="../../d5/d11/ripper_8c.html#ae4e8077b70dff93cf67cfcf5348620e3">vtable_size</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../da/d3d/structvtable.html">vtable</a> *tbl)
<a name="l00114"></a>00114 {
<a name="l00115"></a>00115     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7c25fd6a3d60bf66779311845566273b">POINTER_P</a>(tbl)) {
<a name="l00116"></a>00116         <span class="keywordflow">return</span> tbl-&gt;<a class="code" href="../../da/d3d/structvtable.html#a7fdcb9c83ee19c84d989b925043ad06d">pos</a>;
<a name="l00117"></a>00117     }
<a name="l00118"></a>00118     <span class="keywordflow">else</span> {
<a name="l00119"></a>00119         <span class="keywordflow">return</span> 0;
<a name="l00120"></a>00120     }
<a name="l00121"></a>00121 }
<a name="l00122"></a>00122 
<a name="l00123"></a>00123 <span class="preprocessor">#define VTBL_DEBUG 0</span>
<a name="l00124"></a>00124 <span class="preprocessor"></span>
<a name="l00125"></a>00125 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../da/d3d/structvtable.html">vtable</a> *
<a name="l00126"></a>00126 <a class="code" href="../../d5/d11/ripper_8c.html#a195d13114b3e77ed234b28e67f732dee">vtable_alloc</a>(<span class="keyword">struct</span> <a class="code" href="../../da/d3d/structvtable.html">vtable</a> *<a class="code" href="../../d7/dc0/parse_8y.html#a71f8b6ffdc0cc58ffd989c3162fb2bcf">prev</a>)
<a name="l00127"></a>00127 {
<a name="l00128"></a>00128     <span class="keyword">struct </span><a class="code" href="../../da/d3d/structvtable.html">vtable</a> *tbl = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#ac8df5a8a8961bd9e16be385fef28c2f2">ALLOC</a>(<span class="keyword">struct</span> <a class="code" href="../../da/d3d/structvtable.html">vtable</a>);
<a name="l00129"></a>00129     tbl-&gt;<a class="code" href="../../da/d3d/structvtable.html#a7fdcb9c83ee19c84d989b925043ad06d">pos</a> = 0;
<a name="l00130"></a>00130     tbl-&gt;<a class="code" href="../../da/d3d/structvtable.html#a5e21ff3b8c0aaa63c0ae1d9454207ba2">capa</a> = 8;
<a name="l00131"></a>00131     tbl-&gt;<a class="code" href="../../da/d3d/structvtable.html#a5308cc6c4700614b0ec2a74317a93f11">tbl</a> = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a79041aa2bc7439c11906a86f82a52eb6">ALLOC_N</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>, tbl-&gt;<a class="code" href="../../da/d3d/structvtable.html#a5e21ff3b8c0aaa63c0ae1d9454207ba2">capa</a>);
<a name="l00132"></a>00132     tbl-&gt;<a class="code" href="../../da/d3d/structvtable.html#a75a8b035d8c379d99af9a04c14f9414c">prev</a> = prev;
<a name="l00133"></a>00133     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a4b40c44e5268d2c88065f3ca963bfc5e">VTBL_DEBUG</a>) printf(<span class="stringliteral">&quot;vtable_alloc: %p\n&quot;</span>, (<span class="keywordtype">void</span> *)tbl);
<a name="l00134"></a>00134     <span class="keywordflow">return</span> tbl;
<a name="l00135"></a>00135 }
<a name="l00136"></a>00136 
<a name="l00137"></a>00137 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00138"></a>00138 <a class="code" href="../../d5/d11/ripper_8c.html#a85f6dab8d92797efec6922dbb6da9588">vtable_free</a>(<span class="keyword">struct</span> <a class="code" href="../../da/d3d/structvtable.html">vtable</a> *tbl)
<a name="l00139"></a>00139 {
<a name="l00140"></a>00140     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a4b40c44e5268d2c88065f3ca963bfc5e">VTBL_DEBUG</a>)printf(<span class="stringliteral">&quot;vtable_free: %p\n&quot;</span>, (<span class="keywordtype">void</span> *)tbl);
<a name="l00141"></a>00141     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7c25fd6a3d60bf66779311845566273b">POINTER_P</a>(tbl)) {
<a name="l00142"></a>00142         <span class="keywordflow">if</span> (tbl-&gt;<a class="code" href="../../da/d3d/structvtable.html#a5308cc6c4700614b0ec2a74317a93f11">tbl</a>) {
<a name="l00143"></a>00143             <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(tbl-&gt;<a class="code" href="../../da/d3d/structvtable.html#a5308cc6c4700614b0ec2a74317a93f11">tbl</a>);
<a name="l00144"></a>00144         }
<a name="l00145"></a>00145         <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(tbl);
<a name="l00146"></a>00146     }
<a name="l00147"></a>00147 }
<a name="l00148"></a>00148 
<a name="l00149"></a>00149 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00150"></a>00150 <a class="code" href="../../d5/d11/ripper_8c.html#ab173ab53e10567e11262a24587db4192">vtable_add</a>(<span class="keyword">struct</span> <a class="code" href="../../da/d3d/structvtable.html">vtable</a> *tbl, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l00151"></a>00151 {
<a name="l00152"></a>00152     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#a7c25fd6a3d60bf66779311845566273b">POINTER_P</a>(tbl)) {
<a name="l00153"></a>00153         <a class="code" href="../../db/dcc/error_8c.html#a2d5fb28e54f792e7341b2c45f52f3860">rb_bug</a>(<span class="stringliteral">&quot;vtable_add: vtable is not allocated (%p)&quot;</span>, (<span class="keywordtype">void</span> *)tbl);
<a name="l00154"></a>00154     }
<a name="l00155"></a>00155     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a4b40c44e5268d2c88065f3ca963bfc5e">VTBL_DEBUG</a>) printf(<span class="stringliteral">&quot;vtable_add: %p, %s\n&quot;</span>, (<span class="keywordtype">void</span> *)tbl, <a class="code" href="../../d5/d11/ripper_8c.html#a877bc58c495643fcf49dc64c44631e72">rb_id2name</a>(<span class="keywordtype">id</span>));
<a name="l00156"></a>00156 
<a name="l00157"></a>00157     <span class="keywordflow">if</span> (tbl-&gt;pos == tbl-&gt;capa) {
<a name="l00158"></a>00158         tbl-&gt;capa = tbl-&gt;capa * 2;
<a name="l00159"></a>00159         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a5160cad2d7d090e4d2e8803f1ba5ee3c">REALLOC_N</a>(tbl-&gt;tbl, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>, tbl-&gt;capa);
<a name="l00160"></a>00160     }
<a name="l00161"></a>00161     tbl-&gt;tbl[tbl-&gt;pos++] = id;
<a name="l00162"></a>00162 }
<a name="l00163"></a>00163 
<a name="l00164"></a>00164 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00165"></a>00165 <a class="code" href="../../d5/d11/ripper_8c.html#a64634944fc97b322eccc73273cbfe233">vtable_included</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../da/d3d/structvtable.html">vtable</a> * tbl, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l00166"></a>00166 {
<a name="l00167"></a>00167     <span class="keywordtype">int</span> i;
<a name="l00168"></a>00168 
<a name="l00169"></a>00169     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7c25fd6a3d60bf66779311845566273b">POINTER_P</a>(tbl)) {
<a name="l00170"></a>00170         <span class="keywordflow">for</span> (i = 0; i &lt; tbl-&gt;<a class="code" href="../../da/d3d/structvtable.html#a7fdcb9c83ee19c84d989b925043ad06d">pos</a>; i++) {
<a name="l00171"></a>00171             <span class="keywordflow">if</span> (tbl-&gt;<a class="code" href="../../da/d3d/structvtable.html#a5308cc6c4700614b0ec2a74317a93f11">tbl</a>[i] == <span class="keywordtype">id</span>) {
<a name="l00172"></a>00172                 <span class="keywordflow">return</span> i+1;
<a name="l00173"></a>00173             }
<a name="l00174"></a>00174         }
<a name="l00175"></a>00175     }
<a name="l00176"></a>00176     <span class="keywordflow">return</span> 0;
<a name="l00177"></a>00177 }
<a name="l00178"></a>00178 
<a name="l00179"></a>00179 
<a name="l00180"></a>00180 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l00181"></a>00181 <span class="preprocessor"></span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d6/d93/structtoken__info.html">token_info</a> {
<a name="l00182"></a>00182     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d6/d93/structtoken__info.html#af95eef2afcd8c1993495a88b87d55d7d">token</a>;
<a name="l00183"></a>00183     <span class="keywordtype">int</span> <a class="code" href="../../d6/d93/structtoken__info.html#ac624d67d697a07bdb99ec93d4ed9bbb5">linenum</a>;
<a name="l00184"></a>00184     <span class="keywordtype">int</span> <a class="code" href="../../d6/d93/structtoken__info.html#a75d462a86a3faf7ab0d9937ca835f70d">column</a>;
<a name="l00185"></a>00185     <span class="keywordtype">int</span> <a class="code" href="../../d6/d93/structtoken__info.html#ac7d073e92016c4a5efa1375bb64570da">nonspc</a>;
<a name="l00186"></a>00186     <span class="keyword">struct </span><a class="code" href="../../d6/d93/structtoken__info.html">token_info</a> *<a class="code" href="../../d6/d93/structtoken__info.html#aff0c214a160da224dad9c78d9d8d318e">next</a>;
<a name="l00187"></a>00187 } <a class="code" href="../../d6/d93/structtoken__info.html">token_info</a>;
<a name="l00188"></a>00188 <span class="preprocessor">#endif</span>
<a name="l00189"></a>00189 <span class="preprocessor"></span>
<a name="l00190"></a>00190 <span class="comment">/*</span>
<a name="l00191"></a>00191 <span class="comment">    Structure of Lexer Buffer:</span>
<a name="l00192"></a>00192 <span class="comment"></span>
<a name="l00193"></a>00193 <span class="comment"> lex_pbeg      tokp         lex_p        lex_pend</span>
<a name="l00194"></a>00194 <span class="comment">    |           |              |            |</span>
<a name="l00195"></a>00195 <span class="comment">    |-----------+--------------+------------|</span>
<a name="l00196"></a>00196 <span class="comment">                |&lt;------------&gt;|</span>
<a name="l00197"></a>00197 <span class="comment">                     token</span>
<a name="l00198"></a>00198 <span class="comment">*/</span>
<a name="l00199"></a>00199 <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> {
<a name="l00200"></a>00200     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#a8b43e9d07bed7d3b9d08eb21a8b0e206">is_ripper</a>;
<a name="l00201"></a>00201     NODE *<a class="code" href="../../d0/d64/structparser__params.html#a48ef67bb7e0d3e6a353ecaf1401b8125">heap</a>;
<a name="l00202"></a>00202 
<a name="l00203"></a>00203     <a class="code" href="../../d5/db1/union_y_y_s_t_y_p_e.html">YYSTYPE</a> *<a class="code" href="../../d0/d64/structparser__params.html#aa46eff75784402a4786ee089724ef427">parser_yylval</a>;
<a name="l00204"></a>00204     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d0/d64/structparser__params.html#a19fefb3d80f961d6da3692fb8c47515b">eofp</a>;
<a name="l00205"></a>00205 
<a name="l00206"></a>00206     NODE *<a class="code" href="../../d0/d64/structparser__params.html#aab4f03c9daa8934e4c6d269bff627c32">parser_lex_strterm</a>;
<a name="l00207"></a>00207     <span class="keyword">enum</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389">lex_state_e</a> <a class="code" href="../../d0/d64/structparser__params.html#a1f35e965395b4586f561d8998b08a94e">parser_lex_state</a>;
<a name="l00208"></a>00208     stack_type <a class="code" href="../../d0/d64/structparser__params.html#aa1e1b12df54fd101780944957c47550f">parser_cond_stack</a>;
<a name="l00209"></a>00209     stack_type <a class="code" href="../../d0/d64/structparser__params.html#a10ac33a2b479ad79b04e6f008d0d9281">parser_cmdarg_stack</a>;
<a name="l00210"></a>00210     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#a15057740318f02c3ab1f547200250a32">parser_class_nest</a>;
<a name="l00211"></a>00211     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#a8b37637cadbdc7f9ed84957151dbe00c">parser_paren_nest</a>;
<a name="l00212"></a>00212     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#ad0d1e67efbc75662659bdf15eba10c02">parser_lpar_beg</a>;
<a name="l00213"></a>00213     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#af32ebc7d2e033e4fa5837ee2349351e1">parser_in_single</a>;
<a name="l00214"></a>00214     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#aeea2a3bf10139449d201258cbd2a3663">parser_in_def</a>;
<a name="l00215"></a>00215     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#ad7c93e2375cb95ad7cfa7d53eed4ea83">parser_compile_for_eval</a>;
<a name="l00216"></a>00216     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d0/d64/structparser__params.html#a198f15d6ea4687f2f0f7d3a096f2a1d5">parser_cur_mid</a>;
<a name="l00217"></a>00217     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#a0d993ec7cc62501f4108588f82fc8376">parser_in_defined</a>;
<a name="l00218"></a>00218     <span class="keywordtype">char</span> *<a class="code" href="../../d0/d64/structparser__params.html#a16a071acf078bfff4d8e832ab7e14adf">parser_tokenbuf</a>;
<a name="l00219"></a>00219     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#adb4cd39f9b280a097250d4728c1ddfa2">parser_tokidx</a>;
<a name="l00220"></a>00220     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#a97c3fe0beee2d873379a739242eb8b34">parser_toksiz</a>;
<a name="l00221"></a>00221     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d0/d64/structparser__params.html#ab299eabdb020d4889bd357cb6688d35e">parser_lex_input</a>;
<a name="l00222"></a>00222     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d0/d64/structparser__params.html#a79dbe048656c470ca0c90d03028e8992">parser_lex_lastline</a>;
<a name="l00223"></a>00223     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d0/d64/structparser__params.html#a9a755c6a75f6fe835c43f7ed2e5c36b6">parser_lex_nextline</a>;
<a name="l00224"></a>00224     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d64/structparser__params.html#ae72a2e82c521a7ca1fd1804624b2fbab">parser_lex_pbeg</a>;
<a name="l00225"></a>00225     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d64/structparser__params.html#a0fd3cefbb60628f07052ba397fee0193">parser_lex_p</a>;
<a name="l00226"></a>00226     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d64/structparser__params.html#a243d9bc35db98ebd37872e4f0b238e45">parser_lex_pend</a>;
<a name="l00227"></a>00227     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#aa9dd0a300478f36bf1c9ab8635d76c6d">parser_heredoc_end</a>;
<a name="l00228"></a>00228     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#ae58ec9dad26d0b1071a696924a46b181">parser_command_start</a>;
<a name="l00229"></a>00229     NODE *<a class="code" href="../../d0/d64/structparser__params.html#a163eeb6cdc7427ab5a5cb00e3d475aa7">parser_deferred_nodes</a>;
<a name="l00230"></a>00230     <span class="keywordtype">long</span> <a class="code" href="../../d0/d64/structparser__params.html#ad01ee4c4b64fa48d5f471cfaa8231dee">parser_lex_gets_ptr</a>;
<a name="l00231"></a>00231     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> (*<a class="code" href="../../d0/d64/structparser__params.html#ac6081a8fb34f2662c83a12cae955e14c">parser_lex_gets</a>)(<span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>);
<a name="l00232"></a>00232     <span class="keyword">struct </span><a class="code" href="../../df/d34/structlocal__vars.html">local_vars</a> *<a class="code" href="../../d0/d64/structparser__params.html#a409d4488c9862b46906ec91400426262">parser_lvtbl</a>;
<a name="l00233"></a>00233     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#aa81de44706786628004a25850e3db594">parser_ruby__end__seen</a>;
<a name="l00234"></a>00234     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#a350850a9fb3c7141370fafec1b2d352e">line_count</a>;
<a name="l00235"></a>00235     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#a620d0d73556d934fc4a2b8fc39a40f94">has_shebang</a>;
<a name="l00236"></a>00236     <span class="keywordtype">char</span> *<a class="code" href="../../d0/d64/structparser__params.html#aca3dad79b534757f8f9c8af9f2e84ae3">parser_ruby_sourcefile</a>; <span class="comment">/* current source file */</span>
<a name="l00237"></a>00237     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#a5a213b9311bced75172045096b843702">parser_ruby_sourceline</a>; <span class="comment">/* current line no. */</span>
<a name="l00238"></a>00238     <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a>;
<a name="l00239"></a>00239     <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *<a class="code" href="../../d0/d64/structparser__params.html#acf16364d471dd00725a7168b1df139b6">utf8</a>;
<a name="l00240"></a>00240 
<a name="l00241"></a>00241     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#a1f7093b3280cd254b84a5f2fb9c9df23">parser_yydebug</a>;
<a name="l00242"></a>00242 
<a name="l00243"></a>00243 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l00244"></a>00244 <span class="preprocessor"></span>    <span class="comment">/* Ruby core only */</span>
<a name="l00245"></a>00245     NODE *<a class="code" href="../../d0/d64/structparser__params.html#a4ee841e20507c021a5548cfabc615f70">parser_eval_tree_begin</a>;
<a name="l00246"></a>00246     NODE *<a class="code" href="../../d0/d64/structparser__params.html#add8d51e370b49afb01f121f9df5e64ec">parser_eval_tree</a>;
<a name="l00247"></a>00247     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d0/d64/structparser__params.html#a558327fc6eb2ce2d464ae21f9d6bd140">debug_lines</a>;
<a name="l00248"></a>00248     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d0/d64/structparser__params.html#a4c8adb1df05baefcac759eaee982ccd3">coverage</a>;
<a name="l00249"></a>00249     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#a209b032c8adcfc1955157d18afbddcf0">nerr</a>;
<a name="l00250"></a>00250 
<a name="l00251"></a>00251     <span class="keywordtype">int</span> <a class="code" href="../../d0/d64/structparser__params.html#ad8d4e8dac64b2b8df97c394b621a47d5">parser_token_info_enabled</a>;
<a name="l00252"></a>00252     <a class="code" href="../../d6/d93/structtoken__info.html">token_info</a> *<a class="code" href="../../d0/d64/structparser__params.html#a7365e8e32d1c572d923805df3cd19fc1">parser_token_info</a>;
<a name="l00253"></a>00253 <span class="preprocessor">#else</span>
<a name="l00254"></a>00254 <span class="preprocessor"></span>    <span class="comment">/* Ripper only */</span>
<a name="l00255"></a>00255     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> parser_ruby_sourcefile_string;
<a name="l00256"></a>00256     <span class="keyword">const</span> <span class="keywordtype">char</span> *tokp;
<a name="l00257"></a>00257     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> delayed;
<a name="l00258"></a>00258     <span class="keywordtype">int</span> delayed_line;
<a name="l00259"></a>00259     <span class="keywordtype">int</span> delayed_col;
<a name="l00260"></a>00260 
<a name="l00261"></a>00261     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> value;
<a name="l00262"></a>00262     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d8/d90/nkf_8c.html#a5ea5ac7abf5cce39283e422add1067d5">result</a>;
<a name="l00263"></a>00263     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> parsing_thread;
<a name="l00264"></a>00264     <span class="keywordtype">int</span> toplevel_p;
<a name="l00265"></a>00265 <span class="preprocessor">#endif</span>
<a name="l00266"></a>00266 <span class="preprocessor"></span>};
<a name="l00267"></a>00267 
<a name="l00268"></a>00268 <span class="preprocessor">#define UTF8_ENC() (parser-&gt;utf8 ? parser-&gt;utf8 : \</span>
<a name="l00269"></a>00269 <span class="preprocessor">                    (parser-&gt;utf8 = rb_utf8_encoding()))</span>
<a name="l00270"></a>00270 <span class="preprocessor"></span><span class="preprocessor">#define STR_NEW(p,n) rb_enc_str_new((p),(n),parser-&gt;enc)</span>
<a name="l00271"></a>00271 <span class="preprocessor"></span><span class="preprocessor">#define STR_NEW0() rb_enc_str_new(0,0,parser-&gt;enc)</span>
<a name="l00272"></a>00272 <span class="preprocessor"></span><span class="preprocessor">#define STR_NEW2(p) rb_enc_str_new((p),strlen(p),parser-&gt;enc)</span>
<a name="l00273"></a>00273 <span class="preprocessor"></span><span class="preprocessor">#define STR_NEW3(p,n,e,func) parser_str_new((p),(n),(e),(func),parser-&gt;enc)</span>
<a name="l00274"></a>00274 <span class="preprocessor"></span><span class="preprocessor">#define ENC_SINGLE(cr) ((cr)==ENC_CODERANGE_7BIT)</span>
<a name="l00275"></a>00275 <span class="preprocessor"></span><span class="preprocessor">#define TOK_INTERN(mb) rb_intern3(tok(), toklen(), parser-&gt;enc)</span>
<a name="l00276"></a>00276 <span class="preprocessor"></span>
<a name="l00277"></a>00277 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dc0/parse_8y.html#a19246ad5eb2d00f7df643573511e3142">parser_yyerror</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <span class="keyword">const</span> <span class="keywordtype">char</span>*);
<a name="l00278"></a>00278 <span class="preprocessor">#define yyerror(msg) parser_yyerror(parser, (msg))</span>
<a name="l00279"></a>00279 <span class="preprocessor"></span>
<a name="l00280"></a>00280 <span class="preprocessor">#define YYLEX_PARAM parser</span>
<a name="l00281"></a>00281 <span class="preprocessor"></span>
<a name="l00282"></a>00282 <span class="preprocessor">#define lex_strterm             (parser-&gt;parser_lex_strterm)</span>
<a name="l00283"></a>00283 <span class="preprocessor"></span><span class="preprocessor">#define lex_state               (parser-&gt;parser_lex_state)</span>
<a name="l00284"></a>00284 <span class="preprocessor"></span><span class="preprocessor">#define cond_stack              (parser-&gt;parser_cond_stack)</span>
<a name="l00285"></a>00285 <span class="preprocessor"></span><span class="preprocessor">#define cmdarg_stack            (parser-&gt;parser_cmdarg_stack)</span>
<a name="l00286"></a>00286 <span class="preprocessor"></span><span class="preprocessor">#define class_nest              (parser-&gt;parser_class_nest)</span>
<a name="l00287"></a>00287 <span class="preprocessor"></span><span class="preprocessor">#define paren_nest              (parser-&gt;parser_paren_nest)</span>
<a name="l00288"></a>00288 <span class="preprocessor"></span><span class="preprocessor">#define lpar_beg                (parser-&gt;parser_lpar_beg)</span>
<a name="l00289"></a>00289 <span class="preprocessor"></span><span class="preprocessor">#define in_single               (parser-&gt;parser_in_single)</span>
<a name="l00290"></a>00290 <span class="preprocessor"></span><span class="preprocessor">#define in_def                  (parser-&gt;parser_in_def)</span>
<a name="l00291"></a>00291 <span class="preprocessor"></span><span class="preprocessor">#define compile_for_eval        (parser-&gt;parser_compile_for_eval)</span>
<a name="l00292"></a>00292 <span class="preprocessor"></span><span class="preprocessor">#define cur_mid                 (parser-&gt;parser_cur_mid)</span>
<a name="l00293"></a>00293 <span class="preprocessor"></span><span class="preprocessor">#define in_defined              (parser-&gt;parser_in_defined)</span>
<a name="l00294"></a>00294 <span class="preprocessor"></span><span class="preprocessor">#define tokenbuf                (parser-&gt;parser_tokenbuf)</span>
<a name="l00295"></a>00295 <span class="preprocessor"></span><span class="preprocessor">#define tokidx                  (parser-&gt;parser_tokidx)</span>
<a name="l00296"></a>00296 <span class="preprocessor"></span><span class="preprocessor">#define toksiz                  (parser-&gt;parser_toksiz)</span>
<a name="l00297"></a>00297 <span class="preprocessor"></span><span class="preprocessor">#define lex_input               (parser-&gt;parser_lex_input)</span>
<a name="l00298"></a>00298 <span class="preprocessor"></span><span class="preprocessor">#define lex_lastline            (parser-&gt;parser_lex_lastline)</span>
<a name="l00299"></a>00299 <span class="preprocessor"></span><span class="preprocessor">#define lex_nextline            (parser-&gt;parser_lex_nextline)</span>
<a name="l00300"></a>00300 <span class="preprocessor"></span><span class="preprocessor">#define lex_pbeg                (parser-&gt;parser_lex_pbeg)</span>
<a name="l00301"></a>00301 <span class="preprocessor"></span><span class="preprocessor">#define lex_p                   (parser-&gt;parser_lex_p)</span>
<a name="l00302"></a>00302 <span class="preprocessor"></span><span class="preprocessor">#define lex_pend                (parser-&gt;parser_lex_pend)</span>
<a name="l00303"></a>00303 <span class="preprocessor"></span><span class="preprocessor">#define heredoc_end             (parser-&gt;parser_heredoc_end)</span>
<a name="l00304"></a>00304 <span class="preprocessor"></span><span class="preprocessor">#define command_start           (parser-&gt;parser_command_start)</span>
<a name="l00305"></a>00305 <span class="preprocessor"></span><span class="preprocessor">#define deferred_nodes          (parser-&gt;parser_deferred_nodes)</span>
<a name="l00306"></a>00306 <span class="preprocessor"></span><span class="preprocessor">#define lex_gets_ptr            (parser-&gt;parser_lex_gets_ptr)</span>
<a name="l00307"></a>00307 <span class="preprocessor"></span><span class="preprocessor">#define lex_gets                (parser-&gt;parser_lex_gets)</span>
<a name="l00308"></a>00308 <span class="preprocessor"></span><span class="preprocessor">#define lvtbl                   (parser-&gt;parser_lvtbl)</span>
<a name="l00309"></a>00309 <span class="preprocessor"></span><span class="preprocessor">#define ruby__end__seen         (parser-&gt;parser_ruby__end__seen)</span>
<a name="l00310"></a>00310 <span class="preprocessor"></span><span class="preprocessor">#define ruby_sourceline         (parser-&gt;parser_ruby_sourceline)</span>
<a name="l00311"></a>00311 <span class="preprocessor"></span><span class="preprocessor">#define ruby_sourcefile         (parser-&gt;parser_ruby_sourcefile)</span>
<a name="l00312"></a>00312 <span class="preprocessor"></span><span class="preprocessor">#define current_enc             (parser-&gt;enc)</span>
<a name="l00313"></a>00313 <span class="preprocessor"></span><span class="preprocessor">#define yydebug                 (parser-&gt;parser_yydebug)</span>
<a name="l00314"></a>00314 <span class="preprocessor"></span><span class="preprocessor">#ifdef RIPPER</span>
<a name="l00315"></a>00315 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00316"></a>00316 <span class="preprocessor"></span><span class="preprocessor">#define ruby_eval_tree          (parser-&gt;parser_eval_tree)</span>
<a name="l00317"></a>00317 <span class="preprocessor"></span><span class="preprocessor">#define ruby_eval_tree_begin    (parser-&gt;parser_eval_tree_begin)</span>
<a name="l00318"></a>00318 <span class="preprocessor"></span><span class="preprocessor">#define ruby_debug_lines        (parser-&gt;debug_lines)</span>
<a name="l00319"></a>00319 <span class="preprocessor"></span><span class="preprocessor">#define ruby_coverage           (parser-&gt;coverage)</span>
<a name="l00320"></a>00320 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00321"></a>00321 <span class="preprocessor"></span>
<a name="l00322"></a>00322 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d3/d7f/gram_8c.html#a5611300548b2030d86b6ab9168132b88">yylex</a>(<span class="keywordtype">void</span>*, <span class="keywordtype">void</span>*);
<a name="l00323"></a>00323 
<a name="l00324"></a>00324 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l00325"></a>00325 <span class="preprocessor"></span><span class="preprocessor">#define yyparse ruby_yyparse</span>
<a name="l00326"></a>00326 <span class="preprocessor"></span>
<a name="l00327"></a>00327 <span class="keyword">static</span> NODE* <a class="code" href="../../d7/dc0/parse_8y.html#a1aa5bc58197c4b24634e776fa093137c">node_newnode</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *, <span class="keyword">enum</span> <a class="code" href="../../d1/d72/debug_8c.html#a3dae8bc7c708705be3a6e1688378868e">node_type</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>);
<a name="l00328"></a>00328 <span class="preprocessor">#define rb_node_newnode(type, a1, a2, a3) node_newnode(parser, (type), (a1), (a2), (a3))</span>
<a name="l00329"></a>00329 <span class="preprocessor"></span>
<a name="l00330"></a>00330 <span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a92915296d7f7b01b855bb1720fa57eb8">cond_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*);
<a name="l00331"></a>00331 <span class="preprocessor">#define cond(node) cond_gen(parser, (node))</span>
<a name="l00332"></a>00332 <span class="preprocessor"></span><span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a847a3fb910f00edbd237aa423f94bdb9">logop_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,<span class="keyword">enum</span> <a class="code" href="../../d1/d72/debug_8c.html#a3dae8bc7c708705be3a6e1688378868e">node_type</a>,NODE*,NODE*);
<a name="l00333"></a>00333 <span class="preprocessor">#define logop(type,node1,node2) logop_gen(parser, (type), (node1), (node2))</span>
<a name="l00334"></a>00334 <span class="preprocessor"></span>
<a name="l00335"></a>00335 <span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a6ad6bd94979e7cb3c497c20bcf5fbd86">newline_node</a>(NODE*);
<a name="l00336"></a>00336 <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>(NODE*,NODE*);
<a name="l00337"></a>00337 
<a name="l00338"></a>00338 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dc0/parse_8y.html#a180d8f7346d941624f1c808368cb7ae0">value_expr_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*);
<a name="l00339"></a>00339 <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d7/dc0/parse_8y.html#a038ce54673add5dd7f977891d930a1d0">void_expr_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*);
<a name="l00340"></a>00340 <span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#af6073dd45c01beeb98d4a07c13a581f8">remove_begin</a>(NODE*);
<a name="l00341"></a>00341 <span class="preprocessor">#define value_expr(node) value_expr_gen(parser, (node) = remove_begin(node))</span>
<a name="l00342"></a>00342 <span class="preprocessor"></span><span class="preprocessor">#define void_expr0(node) void_expr_gen(parser, (node))</span>
<a name="l00343"></a>00343 <span class="preprocessor"></span><span class="preprocessor">#define void_expr(node) void_expr0((node) = remove_begin(node))</span>
<a name="l00344"></a>00344 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d7/dc0/parse_8y.html#ae6c0cdb599962f345014a454d1465af0">void_stmts_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*);
<a name="l00345"></a>00345 <span class="preprocessor">#define void_stmts(node) void_stmts_gen(parser, (node))</span>
<a name="l00346"></a>00346 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d7/dc0/parse_8y.html#a50e6c67775b82211332ccb455ea74f11">reduce_nodes_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE**);
<a name="l00347"></a>00347 <span class="preprocessor">#define reduce_nodes(n) reduce_nodes_gen(parser,(n))</span>
<a name="l00348"></a>00348 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d7/dc0/parse_8y.html#abbe3cc7f4fa0ed344392d46899838cbe">block_dup_check_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*,NODE*);
<a name="l00349"></a>00349 <span class="preprocessor">#define block_dup_check(n1,n2) block_dup_check_gen(parser,(n1),(n2))</span>
<a name="l00350"></a>00350 <span class="preprocessor"></span>
<a name="l00351"></a>00351 <span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a7555d1e0de9ba368249e86283adb2e7f">block_append_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*,NODE*);
<a name="l00352"></a>00352 <span class="preprocessor">#define block_append(h,t) block_append_gen(parser,(h),(t))</span>
<a name="l00353"></a>00353 <span class="preprocessor"></span><span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a03b449bec1be892e44e479612e98ec0e">list_append_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*,NODE*);
<a name="l00354"></a>00354 <span class="preprocessor">#define list_append(l,i) list_append_gen(parser,(l),(i))</span>
<a name="l00355"></a>00355 <span class="preprocessor"></span><span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#ad9533c7bb654b3e2aeafd10f392ccfbd">list_concat_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*,NODE*);
<a name="l00356"></a>00356 <span class="preprocessor">#define list_concat(h,t) list_concat_gen(parser,(h),(t))</span>
<a name="l00357"></a>00357 <span class="preprocessor"></span><span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#aada179bb4d8bf3345d354d060fa9b606">arg_append_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*,NODE*);
<a name="l00358"></a>00358 <span class="preprocessor">#define arg_append(h,t) arg_append_gen(parser,(h),(t))</span>
<a name="l00359"></a>00359 <span class="preprocessor"></span><span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a9d9dd7ad262a2518251912a1e31e15a9">arg_concat_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*,NODE*);
<a name="l00360"></a>00360 <span class="preprocessor">#define arg_concat(h,t) arg_concat_gen(parser,(h),(t))</span>
<a name="l00361"></a>00361 <span class="preprocessor"></span><span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a11c15cdb93782ce6cbd36a3943f0741b">literal_concat_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*,NODE*);
<a name="l00362"></a>00362 <span class="preprocessor">#define literal_concat(h,t) literal_concat_gen(parser,(h),(t))</span>
<a name="l00363"></a>00363 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dc0/parse_8y.html#ac767d74bdd8f4a8a068329f007260dc2">literal_concat0</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>);
<a name="l00364"></a>00364 <span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a37b22b50bc0a6849e97389cdd76eb381">new_evstr_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*);
<a name="l00365"></a>00365 <span class="preprocessor">#define new_evstr(n) new_evstr_gen(parser,(n))</span>
<a name="l00366"></a>00366 <span class="preprocessor"></span><span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a7ea0dcd3c8f0ab84e739b8d9ddb7e311">evstr2dstr_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*);
<a name="l00367"></a>00367 <span class="preprocessor">#define evstr2dstr(n) evstr2dstr_gen(parser,(n))</span>
<a name="l00368"></a>00368 <span class="preprocessor"></span><span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#ac03fbbbe2d1f40883c0ed70f9fa0b517">splat_array</a>(NODE*);
<a name="l00369"></a>00369 
<a name="l00370"></a>00370 <span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a3b631e1178ed8844e220e592842951d7">call_bin_op_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>,NODE*);
<a name="l00371"></a>00371 <span class="preprocessor">#define call_bin_op(recv,id,arg1) call_bin_op_gen(parser, (recv),(id),(arg1))</span>
<a name="l00372"></a>00372 <span class="preprocessor"></span><span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#aff1d8ff9344d18f152fd8da63230c3c0">call_uni_op_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>);
<a name="l00373"></a>00373 <span class="preprocessor">#define call_uni_op(recv,id) call_uni_op_gen(parser, (recv),(id))</span>
<a name="l00374"></a>00374 <span class="preprocessor"></span>
<a name="l00375"></a>00375 <span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#aa4c5791dac1d5f6d9dc8a2c9df32d336">new_args_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*,NODE*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>,NODE*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>);
<a name="l00376"></a>00376 <span class="preprocessor">#define new_args(f,o,r,p,b) new_args_gen(parser, (f),(o),(r),(p),(b))</span>
<a name="l00377"></a>00377 <span class="preprocessor"></span>
<a name="l00378"></a>00378 <span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a31fcbde2b7aaecba1e43942d9e3535f4">negate_lit</a>(NODE*);
<a name="l00379"></a>00379 <span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#ad0abb47818e0bcfa9c008d6e7e4ddbfe">ret_args_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*);
<a name="l00380"></a>00380 <span class="preprocessor">#define ret_args(node) ret_args_gen(parser, (node))</span>
<a name="l00381"></a>00381 <span class="preprocessor"></span><span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a09e2a35ffd054287cd8a5f9e285975e6">arg_blk_pass</a>(NODE*,NODE*);
<a name="l00382"></a>00382 <span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#ae0479d8826aa662cc680ed75e657c5bf">new_yield_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*);
<a name="l00383"></a>00383 <span class="preprocessor">#define new_yield(node) new_yield_gen(parser, (node))</span>
<a name="l00384"></a>00384 <span class="preprocessor"></span>
<a name="l00385"></a>00385 <span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#ae826cbed2941c44e1e7454f97ded9680">gettable_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>);
<a name="l00386"></a>00386 <span class="preprocessor">#define gettable(id) gettable_gen(parser,(id))</span>
<a name="l00387"></a>00387 <span class="preprocessor"></span><span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a3ecc8032bfc631e1a47bd2f8b684d0fd">assignable_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>,NODE*);
<a name="l00388"></a>00388 <span class="preprocessor">#define assignable(id,node) assignable_gen(parser, (id), (node))</span>
<a name="l00389"></a>00389 <span class="preprocessor"></span>
<a name="l00390"></a>00390 <span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#ad422fa4d165940b01c7d581bc51387f9">aryset_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*,NODE*);
<a name="l00391"></a>00391 <span class="preprocessor">#define aryset(node1,node2) aryset_gen(parser, (node1), (node2))</span>
<a name="l00392"></a>00392 <span class="preprocessor"></span><span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#ad5028a630a8c232882afc99601ab8a2e">attrset_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>);
<a name="l00393"></a>00393 <span class="preprocessor">#define attrset(node,id) attrset_gen(parser, (node), (id))</span>
<a name="l00394"></a>00394 <span class="preprocessor"></span>
<a name="l00395"></a>00395 <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d7/dc0/parse_8y.html#a4380699b707ae09fa5a8b48da720deaf">rb_backref_error_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*);
<a name="l00396"></a>00396 <span class="preprocessor">#define rb_backref_error(n) rb_backref_error_gen(parser,(n))</span>
<a name="l00397"></a>00397 <span class="preprocessor"></span><span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#accf676c754e598aaeb80ff965c8a237c">node_assign_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*,NODE*);
<a name="l00398"></a>00398 <span class="preprocessor">#define node_assign(node1, node2) node_assign_gen(parser, (node1), (node2))</span>
<a name="l00399"></a>00399 <span class="preprocessor"></span>
<a name="l00400"></a>00400 <span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a93a652e00a5120d926bec0565bc77ade">match_op_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*,NODE*);
<a name="l00401"></a>00401 <span class="preprocessor">#define match_op(node1,node2) match_op_gen(parser, (node1), (node2))</span>
<a name="l00402"></a>00402 <span class="preprocessor"></span>
<a name="l00403"></a>00403 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>  *<a class="code" href="../../d7/dc0/parse_8y.html#aac5ec0f965181e06645e6dac601cee30">local_tbl_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*);
<a name="l00404"></a>00404 <span class="preprocessor">#define local_tbl() local_tbl_gen(parser)</span>
<a name="l00405"></a>00405 <span class="preprocessor"></span>
<a name="l00406"></a>00406 <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d7/dc0/parse_8y.html#ada4f67a980f0f983b65e40843f2cc7ed">fixup_nodes</a>(NODE **);
<a name="l00407"></a>00407 
<a name="l00408"></a>00408 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d7/dc0/parse_8y.html#a8ff489427b14f3edc12eec1fbf543b25">reg_compile_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <span class="keywordtype">int</span>);
<a name="l00409"></a>00409 <span class="preprocessor">#define reg_compile(str,options) reg_compile_gen(parser, (str), (options))</span>
<a name="l00410"></a>00410 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d7/dc0/parse_8y.html#ab600b10d5d1ecf82c70c220e4636cdd5">reg_fragment_setenc_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <span class="keywordtype">int</span>);
<a name="l00411"></a>00411 <span class="preprocessor">#define reg_fragment_setenc(str,options) reg_fragment_setenc_gen(parser, (str), (options))</span>
<a name="l00412"></a>00412 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dc0/parse_8y.html#a3d317218af7a2958583fbc829bb238b8">reg_fragment_check_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <span class="keywordtype">int</span>);
<a name="l00413"></a>00413 <span class="preprocessor">#define reg_fragment_check(str,options) reg_fragment_check_gen(parser, (str), (options))</span>
<a name="l00414"></a>00414 <span class="preprocessor"></span><span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a817a9ed63ee7f7d4dd67cac3b14dd600">reg_named_capture_assign_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>* parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d3/d09/ripper_8y.html#a91a8792a60d26aa3a547451afe30e002">regexp</a>, NODE *<a class="code" href="../../dd/d9f/date__parse_8c.html#aafe6a0803e756e59e5af70fdb2dcc912">match</a>);
<a name="l00415"></a>00415 <span class="preprocessor">#define reg_named_capture_assign(regexp,match) reg_named_capture_assign_gen(parser,(regexp),(match))</span>
<a name="l00416"></a>00416 <span class="preprocessor"></span>
<a name="l00417"></a>00417 <span class="preprocessor">#define get_id(id) (id)</span>
<a name="l00418"></a>00418 <span class="preprocessor"></span><span class="preprocessor">#define get_value(val) (val)</span>
<a name="l00419"></a>00419 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00420"></a>00420 <span class="preprocessor"></span><span class="preprocessor">#define remove_begin(node) (node)</span>
<a name="l00421"></a>00421 <span class="preprocessor"></span><span class="preprocessor">#define rb_dvar_defined(id) 0</span>
<a name="l00422"></a>00422 <span class="preprocessor"></span><span class="preprocessor">#define rb_local_defined(id) 0</span>
<a name="l00423"></a>00423 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> ripper_get_id(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>);
<a name="l00424"></a>00424 <span class="preprocessor">#define get_id(id) ripper_get_id(id)</span>
<a name="l00425"></a>00425 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> ripper_get_value(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>);
<a name="l00426"></a>00426 <span class="preprocessor">#define get_value(val) ripper_get_value(val)</span>
<a name="l00427"></a>00427 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d7/dc0/parse_8y.html#a3ecc8032bfc631e1a47bd2f8b684d0fd">assignable_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>);
<a name="l00428"></a>00428 <span class="preprocessor">#define assignable(lhs,node) assignable_gen(parser, (lhs))</span>
<a name="l00429"></a>00429 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span> id_is_var_gen(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>);
<a name="l00430"></a>00430 <span class="preprocessor">#define id_is_var(id) id_is_var_gen(parser, (id))</span>
<a name="l00431"></a>00431 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* !RIPPER */</span>
<a name="l00432"></a>00432 
<a name="l00433"></a>00433 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <a class="code" href="../../d7/dc0/parse_8y.html#ac4d9b95cf84b566ad31b75093615da57">formal_argument_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>);
<a name="l00434"></a>00434 <span class="preprocessor">#define formal_argument(id) formal_argument_gen(parser, (id))</span>
<a name="l00435"></a>00435 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <a class="code" href="../../d7/dc0/parse_8y.html#a97eaef3a4dc59309f546e492f2de87c1">shadowing_lvar_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>);
<a name="l00436"></a>00436 <span class="preprocessor">#define shadowing_lvar(name) shadowing_lvar_gen(parser, (name))</span>
<a name="l00437"></a>00437 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d7/dc0/parse_8y.html#aad4c0e6d58b287449763ba2d430a7f45">new_bv_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>);
<a name="l00438"></a>00438 <span class="preprocessor">#define new_bv(id) new_bv_gen(parser, (id))</span>
<a name="l00439"></a>00439 <span class="preprocessor"></span>
<a name="l00440"></a>00440 <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d7/dc0/parse_8y.html#a5f47a25385c00ba4a63f11987d0e6c11">local_push_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,<span class="keywordtype">int</span>);
<a name="l00441"></a>00441 <span class="preprocessor">#define local_push(top) local_push_gen(parser,(top))</span>
<a name="l00442"></a>00442 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d7/dc0/parse_8y.html#a0f658b4b6ca27634eda857e8f504b434">local_pop_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*);
<a name="l00443"></a>00443 <span class="preprocessor">#define local_pop() local_pop_gen(parser)</span>
<a name="l00444"></a>00444 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dc0/parse_8y.html#a77348ef72ae97d0a170314a2ede11d4f">local_var_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>);
<a name="l00445"></a>00445 <span class="preprocessor">#define local_var(id) local_var_gen(parser, (id));</span>
<a name="l00446"></a>00446 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dc0/parse_8y.html#a1cae35722d25ca2fbaa6d1d3ae268278">arg_var_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>);
<a name="l00447"></a>00447 <span class="preprocessor">#define arg_var(id) arg_var_gen(parser, (id))</span>
<a name="l00448"></a>00448 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="../../d7/dc0/parse_8y.html#a52d6e34fbd5d4d65ee2834bb2cdaadb0">local_id_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>);
<a name="l00449"></a>00449 <span class="preprocessor">#define local_id(id) local_id_gen(parser, (id))</span>
<a name="l00450"></a>00450 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>   <a class="code" href="../../d7/dc0/parse_8y.html#aa08eec83fc6f4c20259f8ec2ef1c4bb6">internal_id_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*);
<a name="l00451"></a>00451 <span class="preprocessor">#define internal_id() internal_id_gen(parser)</span>
<a name="l00452"></a>00452 <span class="preprocessor"></span>
<a name="l00453"></a>00453 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../da/d3d/structvtable.html">vtable</a> *<a class="code" href="../../d7/dc0/parse_8y.html#afa4bc33195de8cb9273daa0d6f019e5d">dyna_push_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *);
<a name="l00454"></a>00454 <span class="preprocessor">#define dyna_push() dyna_push_gen(parser)</span>
<a name="l00455"></a>00455 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d7/dc0/parse_8y.html#a9c508c4da50d6b7db80190e138b847e9">dyna_pop_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../da/d3d/structvtable.html">vtable</a> *);
<a name="l00456"></a>00456 <span class="preprocessor">#define dyna_pop(node) dyna_pop_gen(parser, (node))</span>
<a name="l00457"></a>00457 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dc0/parse_8y.html#a515b9ddc0272fe885f758e3593900949">dyna_in_block_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*);
<a name="l00458"></a>00458 <span class="preprocessor">#define dyna_in_block() dyna_in_block_gen(parser)</span>
<a name="l00459"></a>00459 <span class="preprocessor"></span><span class="preprocessor">#define dyna_var(id) local_var(id)</span>
<a name="l00460"></a>00460 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dc0/parse_8y.html#a4c4216234876b11b025189824abd1dac">dvar_defined_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>,<span class="keywordtype">int</span>);
<a name="l00461"></a>00461 <span class="preprocessor">#define dvar_defined(id) dvar_defined_gen(parser, (id), 0)</span>
<a name="l00462"></a>00462 <span class="preprocessor"></span><span class="preprocessor">#define dvar_defined_get(id) dvar_defined_gen(parser, (id), 1)</span>
<a name="l00463"></a>00463 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dc0/parse_8y.html#aa682c82a0583ececc5e2a7def56ec445">dvar_curr_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>);
<a name="l00464"></a>00464 <span class="preprocessor">#define dvar_curr(id) dvar_curr_gen(parser, (id))</span>
<a name="l00465"></a>00465 <span class="preprocessor"></span>
<a name="l00466"></a>00466 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dc0/parse_8y.html#ab681d822bfcbffcfcafaedf91e932eb1">lvar_defined_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>);
<a name="l00467"></a>00467 <span class="preprocessor">#define lvar_defined(id) lvar_defined_gen(parser, (id))</span>
<a name="l00468"></a>00468 <span class="preprocessor"></span>
<a name="l00469"></a>00469 <span class="preprocessor">#define RE_OPTION_ONCE (1&lt;&lt;16)</span>
<a name="l00470"></a>00470 <span class="preprocessor"></span><span class="preprocessor">#define RE_OPTION_ENCODING_SHIFT 8</span>
<a name="l00471"></a>00471 <span class="preprocessor"></span><span class="preprocessor">#define RE_OPTION_ENCODING(e) (((e)&amp;0xff)&lt;&lt;RE_OPTION_ENCODING_SHIFT)</span>
<a name="l00472"></a>00472 <span class="preprocessor"></span><span class="preprocessor">#define RE_OPTION_ENCODING_IDX(o) (((o)&gt;&gt;RE_OPTION_ENCODING_SHIFT)&amp;0xff)</span>
<a name="l00473"></a>00473 <span class="preprocessor"></span><span class="preprocessor">#define RE_OPTION_ENCODING_NONE(o) ((o)&amp;RE_OPTION_ARG_ENCODING_NONE)</span>
<a name="l00474"></a>00474 <span class="preprocessor"></span><span class="preprocessor">#define RE_OPTION_MASK  0xff</span>
<a name="l00475"></a>00475 <span class="preprocessor"></span><span class="preprocessor">#define RE_OPTION_ARG_ENCODING_NONE 32</span>
<a name="l00476"></a>00476 <span class="preprocessor"></span>
<a name="l00477"></a>00477 <span class="preprocessor">#define NODE_STRTERM NODE_ZARRAY        </span><span class="comment">/* nothing to gc */</span>
<a name="l00478"></a>00478 <span class="preprocessor">#define NODE_HEREDOC NODE_ARRAY         </span><span class="comment">/* 1, 3 to gc */</span>
<a name="l00479"></a>00479 <span class="preprocessor">#define SIGN_EXTEND(x,n) (((1&lt;&lt;(n)-1)^((x)&amp;~(~0&lt;&lt;(n))))-(1&lt;&lt;(n)-1))</span>
<a name="l00480"></a>00480 <span class="preprocessor"></span><span class="preprocessor">#define nd_func u1.id</span>
<a name="l00481"></a>00481 <span class="preprocessor"></span><span class="preprocessor">#if SIZEOF_SHORT == 2</span>
<a name="l00482"></a>00482 <span class="preprocessor"></span><span class="preprocessor">#define nd_term(node) ((signed short)(node)-&gt;u2.id)</span>
<a name="l00483"></a>00483 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00484"></a>00484 <span class="preprocessor"></span><span class="preprocessor">#define nd_term(node) SIGN_EXTEND((node)-&gt;u2.id, CHAR_BIT*2)</span>
<a name="l00485"></a>00485 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00486"></a>00486 <span class="preprocessor"></span><span class="preprocessor">#define nd_paren(node) (char)((node)-&gt;u2.id &gt;&gt; CHAR_BIT*2)</span>
<a name="l00487"></a>00487 <span class="preprocessor"></span><span class="preprocessor">#define nd_nest u3.cnt</span>
<a name="l00488"></a>00488 <span class="preprocessor"></span>
<a name="l00489"></a>00489 <span class="comment">/****** Ripper *******/</span>
<a name="l00490"></a>00490 
<a name="l00491"></a>00491 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l00492"></a>00492 <span class="preprocessor"></span><span class="preprocessor">#define RIPPER_VERSION &quot;0.1.0&quot;</span>
<a name="l00493"></a>00493 <span class="preprocessor"></span>
<a name="l00494"></a>00494 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/de4/eventids1_8c.html">eventids1.c</a>&quot;</span>
<a name="l00495"></a>00495 <span class="preprocessor">#include &quot;<a class="code" href="../../df/dea/eventids2_8c.html">eventids2.c</a>&quot;</span>
<a name="l00496"></a>00496 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> ripper_id_gets;
<a name="l00497"></a>00497 
<a name="l00498"></a>00498 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> ripper_dispatch0(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>);
<a name="l00499"></a>00499 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> ripper_dispatch1(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>);
<a name="l00500"></a>00500 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> ripper_dispatch2(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>);
<a name="l00501"></a>00501 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> ripper_dispatch3(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>);
<a name="l00502"></a>00502 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> ripper_dispatch4(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>);
<a name="l00503"></a>00503 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> ripper_dispatch5(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>,<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>);
<a name="l00504"></a>00504 
<a name="l00505"></a>00505 <span class="preprocessor">#define dispatch0(n)            ripper_dispatch0(parser, TOKEN_PASTE(ripper_id_, n))</span>
<a name="l00506"></a>00506 <span class="preprocessor"></span><span class="preprocessor">#define dispatch1(n,a)          ripper_dispatch1(parser, TOKEN_PASTE(ripper_id_, n), (a))</span>
<a name="l00507"></a>00507 <span class="preprocessor"></span><span class="preprocessor">#define dispatch2(n,a,b)        ripper_dispatch2(parser, TOKEN_PASTE(ripper_id_, n), (a), (b))</span>
<a name="l00508"></a>00508 <span class="preprocessor"></span><span class="preprocessor">#define dispatch3(n,a,b,c)      ripper_dispatch3(parser, TOKEN_PASTE(ripper_id_, n), (a), (b), (c))</span>
<a name="l00509"></a>00509 <span class="preprocessor"></span><span class="preprocessor">#define dispatch4(n,a,b,c,d)    ripper_dispatch4(parser, TOKEN_PASTE(ripper_id_, n), (a), (b), (c), (d))</span>
<a name="l00510"></a>00510 <span class="preprocessor"></span><span class="preprocessor">#define dispatch5(n,a,b,c,d,e)  ripper_dispatch5(parser, TOKEN_PASTE(ripper_id_, n), (a), (b), (c), (d), (e))</span>
<a name="l00511"></a>00511 <span class="preprocessor"></span>
<a name="l00512"></a>00512 <span class="preprocessor">#define yyparse ripper_yyparse</span>
<a name="l00513"></a>00513 <span class="preprocessor"></span>
<a name="l00514"></a>00514 <span class="preprocessor">#define ripper_intern(s) ID2SYM(rb_intern(s))</span>
<a name="l00515"></a>00515 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d3/d09/ripper_8y.html#a72cda847e61be0cba59c906a237bc4aa">ripper_id2sym</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>);
<a name="l00516"></a>00516 <span class="preprocessor">#ifdef __GNUC__</span>
<a name="l00517"></a>00517 <span class="preprocessor"></span><span class="preprocessor">#define ripper_id2sym(id) ((id) &lt; 256 &amp;&amp; rb_ispunct(id) ? \</span>
<a name="l00518"></a>00518 <span class="preprocessor">                           ID2SYM(id) : ripper_id2sym(id))</span>
<a name="l00519"></a>00519 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00520"></a>00520 <span class="preprocessor"></span>
<a name="l00521"></a>00521 <span class="preprocessor">#define arg_new() dispatch0(args_new)</span>
<a name="l00522"></a>00522 <span class="preprocessor"></span><span class="preprocessor">#define arg_add(l,a) dispatch2(args_add, (l), (a))</span>
<a name="l00523"></a>00523 <span class="preprocessor"></span><span class="preprocessor">#define arg_add_star(l,a) dispatch2(args_add_star, (l), (a))</span>
<a name="l00524"></a>00524 <span class="preprocessor"></span><span class="preprocessor">#define arg_add_block(l,b) dispatch2(args_add_block, (l), (b))</span>
<a name="l00525"></a>00525 <span class="preprocessor"></span><span class="preprocessor">#define arg_add_optblock(l,b) ((b)==Qundef? (l) : dispatch2(args_add_block, (l), (b)))</span>
<a name="l00526"></a>00526 <span class="preprocessor"></span><span class="preprocessor">#define bare_assoc(v) dispatch1(bare_assoc_hash, (v))</span>
<a name="l00527"></a>00527 <span class="preprocessor"></span><span class="preprocessor">#define arg_add_assocs(l,b) arg_add((l), bare_assoc(b))</span>
<a name="l00528"></a>00528 <span class="preprocessor"></span>
<a name="l00529"></a>00529 <span class="preprocessor">#define args2mrhs(a) dispatch1(mrhs_new_from_args, (a))</span>
<a name="l00530"></a>00530 <span class="preprocessor"></span><span class="preprocessor">#define mrhs_new() dispatch0(mrhs_new)</span>
<a name="l00531"></a>00531 <span class="preprocessor"></span><span class="preprocessor">#define mrhs_add(l,a) dispatch2(mrhs_add, (l), (a))</span>
<a name="l00532"></a>00532 <span class="preprocessor"></span><span class="preprocessor">#define mrhs_add_star(l,a) dispatch2(mrhs_add_star, (l), (a))</span>
<a name="l00533"></a>00533 <span class="preprocessor"></span>
<a name="l00534"></a>00534 <span class="preprocessor">#define mlhs_new() dispatch0(mlhs_new)</span>
<a name="l00535"></a>00535 <span class="preprocessor"></span><span class="preprocessor">#define mlhs_add(l,a) dispatch2(mlhs_add, (l), (a))</span>
<a name="l00536"></a>00536 <span class="preprocessor"></span><span class="preprocessor">#define mlhs_add_star(l,a) dispatch2(mlhs_add_star, (l), (a))</span>
<a name="l00537"></a>00537 <span class="preprocessor"></span>
<a name="l00538"></a>00538 <span class="preprocessor">#define params_new(pars, opts, rest, pars2, blk) \</span>
<a name="l00539"></a>00539 <span class="preprocessor">        dispatch5(params, (pars), (opts), (rest), (pars2), (blk))</span>
<a name="l00540"></a>00540 <span class="preprocessor"></span>
<a name="l00541"></a>00541 <span class="preprocessor">#define blockvar_new(p,v) dispatch2(block_var, (p), (v))</span>
<a name="l00542"></a>00542 <span class="preprocessor"></span><span class="preprocessor">#define blockvar_add_star(l,a) dispatch2(block_var_add_star, (l), (a))</span>
<a name="l00543"></a>00543 <span class="preprocessor"></span><span class="preprocessor">#define blockvar_add_block(l,a) dispatch2(block_var_add_block, (l), (a))</span>
<a name="l00544"></a>00544 <span class="preprocessor"></span>
<a name="l00545"></a>00545 <span class="preprocessor">#define method_optarg(m,a) ((a)==Qundef ? (m) : dispatch2(method_add_arg,(m),(a)))</span>
<a name="l00546"></a>00546 <span class="preprocessor"></span><span class="preprocessor">#define method_arg(m,a) dispatch2(method_add_arg,(m),(a))</span>
<a name="l00547"></a>00547 <span class="preprocessor"></span><span class="preprocessor">#define method_add_block(m,b) dispatch2(method_add_block, (m), (b))</span>
<a name="l00548"></a>00548 <span class="preprocessor"></span>
<a name="l00549"></a>00549 <span class="preprocessor">#define escape_Qundef(x) ((x)==Qundef ? Qnil : (x))</span>
<a name="l00550"></a>00550 <span class="preprocessor"></span>
<a name="l00551"></a>00551 <span class="preprocessor">#define FIXME 0</span>
<a name="l00552"></a>00552 <span class="preprocessor"></span>
<a name="l00553"></a>00553 <span class="preprocessor">#endif </span><span class="comment">/* RIPPER */</span>
<a name="l00554"></a>00554 
<a name="l00555"></a>00555 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l00556"></a>00556 <span class="preprocessor"></span><span class="preprocessor"># define ifndef_ripper(x) (x)</span>
<a name="l00557"></a>00557 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00558"></a>00558 <span class="preprocessor"></span><span class="preprocessor"># define ifndef_ripper(x)</span>
<a name="l00559"></a>00559 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00560"></a>00560 <span class="preprocessor"></span>
<a name="l00561"></a>00561 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l00562"></a>00562 <span class="preprocessor"></span><span class="preprocessor"># define rb_warn0(fmt)    rb_compile_warn(ruby_sourcefile, ruby_sourceline, (fmt))</span>
<a name="l00563"></a>00563 <span class="preprocessor"></span><span class="preprocessor"># define rb_warnI(fmt,a)  rb_compile_warn(ruby_sourcefile, ruby_sourceline, (fmt), (a))</span>
<a name="l00564"></a>00564 <span class="preprocessor"></span><span class="preprocessor"># define rb_warnS(fmt,a)  rb_compile_warn(ruby_sourcefile, ruby_sourceline, (fmt), (a))</span>
<a name="l00565"></a>00565 <span class="preprocessor"></span><span class="preprocessor"># define rb_warning0(fmt) rb_compile_warning(ruby_sourcefile, ruby_sourceline, (fmt))</span>
<a name="l00566"></a>00566 <span class="preprocessor"></span><span class="preprocessor"># define rb_warningS(fmt,a) rb_compile_warning(ruby_sourcefile, ruby_sourceline, (fmt), (a))</span>
<a name="l00567"></a>00567 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00568"></a>00568 <span class="preprocessor"></span><span class="preprocessor"># define rb_warn0(fmt)    ripper_warn0(parser, (fmt))</span>
<a name="l00569"></a>00569 <span class="preprocessor"></span><span class="preprocessor"># define rb_warnI(fmt,a)  ripper_warnI(parser, (fmt), (a))</span>
<a name="l00570"></a>00570 <span class="preprocessor"></span><span class="preprocessor"># define rb_warnS(fmt,a)  ripper_warnS(parser, (fmt), (a))</span>
<a name="l00571"></a>00571 <span class="preprocessor"></span><span class="preprocessor"># define rb_warning0(fmt) ripper_warning0(parser, (fmt))</span>
<a name="l00572"></a>00572 <span class="preprocessor"></span><span class="preprocessor"># define rb_warningS(fmt,a) ripper_warningS(parser, (fmt), (a))</span>
<a name="l00573"></a>00573 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> ripper_warn0(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <span class="keyword">const</span> <span class="keywordtype">char</span>*);
<a name="l00574"></a>00574 <span class="keyword">static</span> <span class="keywordtype">void</span> ripper_warnI(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <span class="keyword">const</span> <span class="keywordtype">char</span>*, <span class="keywordtype">int</span>);
<a name="l00575"></a>00575 <span class="preprocessor">#if 0</span>
<a name="l00576"></a>00576 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> ripper_warnS(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <span class="keyword">const</span> <span class="keywordtype">char</span>*, <span class="keyword">const</span> <span class="keywordtype">char</span>*);
<a name="l00577"></a>00577 <span class="preprocessor">#endif</span>
<a name="l00578"></a>00578 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> ripper_warning0(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <span class="keyword">const</span> <span class="keywordtype">char</span>*);
<a name="l00579"></a>00579 <span class="keyword">static</span> <span class="keywordtype">void</span> ripper_warningS(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <span class="keyword">const</span> <span class="keywordtype">char</span>*, <span class="keyword">const</span> <span class="keywordtype">char</span>*);
<a name="l00580"></a>00580 <span class="preprocessor">#endif</span>
<a name="l00581"></a>00581 <span class="preprocessor"></span>
<a name="l00582"></a>00582 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l00583"></a>00583 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> ripper_compile_error(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...);
<a name="l00584"></a>00584 <span class="preprocessor"># define rb_compile_error ripper_compile_error</span>
<a name="l00585"></a>00585 <span class="preprocessor"></span><span class="preprocessor"># define compile_error ripper_compile_error</span>
<a name="l00586"></a>00586 <span class="preprocessor"></span><span class="preprocessor"># define PARSER_ARG parser,</span>
<a name="l00587"></a>00587 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00588"></a>00588 <span class="preprocessor"></span><span class="preprocessor"># define rb_compile_error rb_compile_error_with_enc</span>
<a name="l00589"></a>00589 <span class="preprocessor"></span><span class="preprocessor"># define compile_error parser-&gt;nerr++,rb_compile_error_with_enc</span>
<a name="l00590"></a>00590 <span class="preprocessor"></span><span class="preprocessor"># define PARSER_ARG ruby_sourcefile, ruby_sourceline, current_enc,</span>
<a name="l00591"></a>00591 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00592"></a>00592 <span class="preprocessor"></span>
<a name="l00593"></a>00593 <span class="comment">/* Older versions of Yacc set YYMAXDEPTH to a very low value by default (150,</span>
<a name="l00594"></a>00594 <span class="comment">   for instance).  This is too low for Ruby to parse some files, such as</span>
<a name="l00595"></a>00595 <span class="comment">   date/format.rb, therefore bump the value up to at least Bison&apos;s default. */</span>
<a name="l00596"></a>00596 <span class="preprocessor">#ifdef OLD_YACC</span>
<a name="l00597"></a>00597 <span class="preprocessor"></span><span class="preprocessor">#ifndef YYMAXDEPTH</span>
<a name="l00598"></a>00598 <span class="preprocessor"></span><span class="preprocessor">#define YYMAXDEPTH 10000</span>
<a name="l00599"></a>00599 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00600"></a>00600 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00601"></a>00601 <span class="preprocessor"></span>
<a name="l00602"></a>00602 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l00603"></a>00603 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d11/ripper_8c.html#a975ebb4788e2066d838f862705f56b3e">token_info_push</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a>);
<a name="l00604"></a>00604 <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d5/d11/ripper_8c.html#af9b9f89b11a878abf5348343d9a77283">token_info_pop</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a>);
<a name="l00605"></a>00605 <span class="preprocessor">#define token_info_push(token) (RTEST(ruby_verbose) ? token_info_push(parser, (token)) : (void)0)</span>
<a name="l00606"></a>00606 <span class="preprocessor"></span><span class="preprocessor">#define token_info_pop(token) (RTEST(ruby_verbose) ? token_info_pop(parser, (token)) : (void)0)</span>
<a name="l00607"></a>00607 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00608"></a>00608 <span class="preprocessor"></span><span class="preprocessor">#define token_info_push(token) </span><span class="comment">/* nothing */</span>
<a name="l00609"></a>00609 <span class="preprocessor">#define token_info_pop(token) </span><span class="comment">/* nothing */</span>
<a name="l00610"></a>00610 <span class="preprocessor">#endif</span>
<a name="l00611"></a>00611 <span class="preprocessor"></span>%}
<a name="l00612"></a>00612 
<a name="l00613"></a>00613 %pure_parser
<a name="l00614"></a>00614 %<a class="code" href="../../df/d3e/psych_2parser_8c.html#a70c6639243d57479d2c9e7ea0380549f">parse</a>-param {<span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser}
<a name="l00615"></a>00615 
<a name="l00616"></a>00616 %<span class="keyword">union </span>{
<a name="l00617"></a>00617     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> val;
<a name="l00618"></a>00618     NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a0d7af8a92c4b0a07f71585584ef9634f">node</a>;
<a name="l00619"></a>00619     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> id;
<a name="l00620"></a>00620     <span class="keywordtype">int</span> num;
<a name="l00621"></a>00621     <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../da/d3d/structvtable.html">vtable</a> *vars;
<a name="l00622"></a>00622 }
<a name="l00623"></a>00623 
<a name="l00624"></a>00624 <span class="comment">/*%%%*/</span>
<a name="l00625"></a>00625 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a>
<a name="l00626"></a>00626 <span class="comment">/*%</span>
<a name="l00627"></a>00627 <span class="comment">%token &lt;val&gt;</span>
<a name="l00628"></a>00628 <span class="comment">%*/</span>
<a name="l00629"></a>00629         <a class="code" href="../../d5/d11/ripper_8c.html#aaad7597969d430a0cd28b7715943e784">keyword_class</a>
<a name="l00630"></a>00630         <a class="code" href="../../d5/d11/ripper_8c.html#a608cdee478d71d061a7fe4463717d923">keyword_module</a>
<a name="l00631"></a>00631         <a class="code" href="../../d5/d11/ripper_8c.html#ac5156e971018e2f1a80e8b638bf1ad83">keyword_def</a>
<a name="l00632"></a>00632         <a class="code" href="../../d5/d11/ripper_8c.html#a0738772680283d265974b4f744404b58">keyword_undef</a>
<a name="l00633"></a>00633         <a class="code" href="../../d5/d11/ripper_8c.html#a6068ed81f0c694c4874c0c90b398e198">keyword_begin</a>
<a name="l00634"></a>00634         <a class="code" href="../../d5/d11/ripper_8c.html#adb3283c05c39cb946a765e95edfe4b79">keyword_rescue</a>
<a name="l00635"></a>00635         <a class="code" href="../../d5/d11/ripper_8c.html#a2cc9838aaa31cc63122bedee8cec14ca">keyword_ensure</a>
<a name="l00636"></a>00636         <a class="code" href="../../d5/d11/ripper_8c.html#a3887eba1b6af6ce3835d41cf832b4fa1">keyword_end</a>
<a name="l00637"></a>00637         <a class="code" href="../../d5/d11/ripper_8c.html#a0f1bd4f847f3d2e6fbaa432d68793f24">keyword_if</a>
<a name="l00638"></a>00638         <a class="code" href="../../d5/d11/ripper_8c.html#aec71ecb43b9af0c21560c7ebc47ffc13">keyword_unless</a>
<a name="l00639"></a>00639         <a class="code" href="../../d5/d11/ripper_8c.html#af43191ca027b5b2d4efa8f4b3e878663">keyword_then</a>
<a name="l00640"></a>00640         <a class="code" href="../../d5/d11/ripper_8c.html#a4e72412ea5c9c9a39319fb0224a0a23b">keyword_elsif</a>
<a name="l00641"></a>00641         <a class="code" href="../../d5/d11/ripper_8c.html#ab9f440f375bc044468920cc3dc8f9b07">keyword_else</a>
<a name="l00642"></a>00642         <a class="code" href="../../d5/d11/ripper_8c.html#a05aac07545e64b6a0054e8901a38992f">keyword_case</a>
<a name="l00643"></a>00643         <a class="code" href="../../d5/d11/ripper_8c.html#a5b03b4dec3069e33b82fb88f1beb21c7">keyword_when</a>
<a name="l00644"></a>00644         <a class="code" href="../../d5/d11/ripper_8c.html#a51e8071a22ee8afe26d720c2ea129c89">keyword_while</a>
<a name="l00645"></a>00645         <a class="code" href="../../d5/d11/ripper_8c.html#a479b05419c8b27b3aaeeb728e39b3972">keyword_until</a>
<a name="l00646"></a>00646         <a class="code" href="../../d5/d11/ripper_8c.html#ad586477cf71406d625d53eae311bdf11">keyword_for</a>
<a name="l00647"></a>00647         <a class="code" href="../../d5/d11/ripper_8c.html#a3df7a0f57555b3aa2a155393d6b1c4dc">keyword_break</a>
<a name="l00648"></a>00648         <a class="code" href="../../d5/d11/ripper_8c.html#a6f1a9cbe32cbd55a1e29b0d066bc9b09">keyword_next</a>
<a name="l00649"></a>00649         <a class="code" href="../../d5/d11/ripper_8c.html#a208e0237b3ea51246b610d113ba0253e">keyword_redo</a>
<a name="l00650"></a>00650         <a class="code" href="../../d5/d11/ripper_8c.html#a8c2d03875c00212b36b822b056116426">keyword_retry</a>
<a name="l00651"></a>00651         <a class="code" href="../../d5/d11/ripper_8c.html#a24cfafd1c70ce74a7e26d8600e4618b6">keyword_in</a>
<a name="l00652"></a>00652         <a class="code" href="../../d5/d11/ripper_8c.html#af0eaec49b504972deb0631ab428cf7f0">keyword_do</a>
<a name="l00653"></a>00653         <a class="code" href="../../d5/d11/ripper_8c.html#a531ddac2ff71be80ea02f3cb575b0d82">keyword_do_cond</a>
<a name="l00654"></a>00654         <a class="code" href="../../d5/d11/ripper_8c.html#ac943360c0f2387c1797ba9b77537e915">keyword_do_block</a>
<a name="l00655"></a>00655         <a class="code" href="../../d5/d11/ripper_8c.html#a76b1eba4e233c955a6532d8de0c07b4b">keyword_do_LAMBDA</a>
<a name="l00656"></a>00656         <a class="code" href="../../d5/d11/ripper_8c.html#ab2da8a02f53da70f08f59bfcefb370d0">keyword_return</a>
<a name="l00657"></a>00657         <a class="code" href="../../d5/d11/ripper_8c.html#a23d86621a145239a20c9496993a87e1a">keyword_yield</a>
<a name="l00658"></a>00658         <a class="code" href="../../d5/d11/ripper_8c.html#aeb6f2f7f0aff1706e3fcb6b1777ee784">keyword_super</a>
<a name="l00659"></a>00659         <a class="code" href="../../d5/d11/ripper_8c.html#ab8442a74bd68773667e1d016e17a8f20">keyword_self</a>
<a name="l00660"></a>00660         <a class="code" href="../../d5/d11/ripper_8c.html#a97061c623fd2070a72366daa7cd8386d">keyword_nil</a>
<a name="l00661"></a>00661         <a class="code" href="../../d5/d11/ripper_8c.html#a4db6e341df3e5d2abf5887085e9c5f77">keyword_true</a>
<a name="l00662"></a>00662         <a class="code" href="../../d5/d11/ripper_8c.html#acabfb39849e96211b6441b971d4ea0a7">keyword_false</a>
<a name="l00663"></a>00663         <a class="code" href="../../d5/d11/ripper_8c.html#a4b2a7871e12bd91d4506c5a3904daee9">keyword_and</a>
<a name="l00664"></a>00664         <a class="code" href="../../d5/d11/ripper_8c.html#a0a3412db66a7bfe6e86a085ca4213f0a">keyword_or</a>
<a name="l00665"></a>00665         <a class="code" href="../../d5/d11/ripper_8c.html#aa7618608a8ca97b99b9b2760935869eb">keyword_not</a>
<a name="l00666"></a>00666         <a class="code" href="../../d5/d11/ripper_8c.html#a60d71c343a9b4aa799c67892d25dc12b">modifier_if</a>
<a name="l00667"></a>00667         <a class="code" href="../../d5/d11/ripper_8c.html#ac9823d8658cc0ef3ac7606852c84e5c8">modifier_unless</a>
<a name="l00668"></a>00668         <a class="code" href="../../d5/d11/ripper_8c.html#acc4558c7b26aa158e3db0c5677b74533">modifier_while</a>
<a name="l00669"></a>00669         <a class="code" href="../../d5/d11/ripper_8c.html#a977c1146deb5448df4d5b1138d7c742e">modifier_until</a>
<a name="l00670"></a>00670         <a class="code" href="../../d5/d11/ripper_8c.html#a68a67be66a4f843e42b55a28c9d3dcfa">modifier_rescue</a>
<a name="l00671"></a>00671         <a class="code" href="../../d5/d11/ripper_8c.html#ab516dc23f7932eee4a881bb364b0bd73">keyword_alias</a>
<a name="l00672"></a>00672         <a class="code" href="../../d5/d11/ripper_8c.html#afb1d7e76236b8c3c87f3a241263313a1">keyword_defined</a>
<a name="l00673"></a>00673         <a class="code" href="../../d5/d11/ripper_8c.html#ac4018498741336ff993f8dca4a489bb0">keyword_BEGIN</a>
<a name="l00674"></a>00674         <a class="code" href="../../d5/d11/ripper_8c.html#a301644f3b615b72fae2733620f7fd48c">keyword_END</a>
<a name="l00675"></a>00675         <a class="code" href="../../d5/d11/ripper_8c.html#a647bc6d3b4755012d0a547a771983690">keyword__LINE__</a>
<a name="l00676"></a>00676         <a class="code" href="../../d5/d11/ripper_8c.html#abc6d3baf1526f6522fb096804f3e6f3f">keyword__FILE__</a>
<a name="l00677"></a>00677         <a class="code" href="../../d5/d11/ripper_8c.html#ae3a907545a96704ee7c94870da496bf0">keyword__ENCODING__</a>
<a name="l00678"></a>00678 
<a name="l00679"></a>00679 %token &lt;id&gt;   <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a> <a class="code" href="../../d5/d11/ripper_8c.html#aea28d934fe4e93590bcea40f409e1a81">tFID</a> <a class="code" href="../../d5/d11/ripper_8c.html#a0669929a5e8525326e729ff51842ba9e">tGVAR</a> <a class="code" href="../../d5/d11/ripper_8c.html#a3587d04e5ad9d0a5f409cf15a1358127">tIVAR</a> <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a> <a class="code" href="../../d5/d11/ripper_8c.html#aaf70899e7dbbcf4d813cea481eb05592">tCVAR</a> <a class="code" href="../../d5/d11/ripper_8c.html#a32e4df1c891f4cb10654bac75cd44ebf">tLABEL</a>
<a name="l00680"></a>00680 %token &lt;node&gt; <a class="code" href="../../d5/d11/ripper_8c.html#acf30b0b06859a67ac40b3b5ade640bec">tINTEGER</a> <a class="code" href="../../d5/d11/ripper_8c.html#aefe8891831bd955c4672cc5423fdf7e8">tFLOAT</a> <a class="code" href="../../d5/d11/ripper_8c.html#a814fc15c6ef67f84fbe39e4e31e41041">tSTRING_CONTENT</a> <a class="code" href="../../d5/d11/ripper_8c.html#a34f5c56a3e2b501dafead39af9e1dd1c">tCHAR</a>
<a name="l00681"></a>00681 %token &lt;node&gt; <a class="code" href="../../d5/d11/ripper_8c.html#a0ac4af4d5877f883246a279da41cdd7a">tNTH_REF</a> <a class="code" href="../../d5/d11/ripper_8c.html#a2ff67775fb64c00948749c56837ef334">tBACK_REF</a>
<a name="l00682"></a>00682 %token &lt;num&gt;  <a class="code" href="../../d5/d11/ripper_8c.html#af2f874084a5f0c5ccf581641c92a9891">tREGEXP_END</a>
<a name="l00683"></a>00683 
<a name="l00684"></a>00684 %type &lt;node&gt; singleton strings <span class="keywordtype">string</span> <a class="code" href="../../d3/d09/ripper_8y.html#aed22ee33c00229e06e495e2a83c3e2f9">string1</a> <a class="code" href="../../d3/d09/ripper_8y.html#aa4c79e4aecba063c91be9014332dd797">xstring</a> <a class="code" href="../../d3/d09/ripper_8y.html#a91a8792a60d26aa3a547451afe30e002">regexp</a>
<a name="l00685"></a>00685 %type &lt;node&gt; string_contents xstring_contents regexp_contents string_content
<a name="l00686"></a>00686 %type &lt;node&gt; <a class="code" href="../../d3/d09/ripper_8y.html#a4a8f1bb42e94b457a13faac8c356b13a">words</a> <a class="code" href="../../d7/dc0/parse_8y.html#a9f7b98b2be9bd5c600c9aeacf97038e7">qwords</a> word_list qword_list word
<a name="l00687"></a>00687 %type &lt;node&gt; literal numeric <a class="code" href="../../d3/d09/ripper_8y.html#a40f756f6fdaad745b00b1b19e8bc9556">dsym</a> cpath
<a name="l00688"></a>00688 %type &lt;node&gt; top_compstmt top_stmts top_stmt
<a name="l00689"></a>00689 %type &lt;node&gt; bodystmt compstmt stmts stmt expr arg primary command command_call method_call
<a name="l00690"></a>00690 %type &lt;node&gt; expr_value arg_value primary_value
<a name="l00691"></a>00691 %type &lt;node&gt; if_tail opt_else case_body <a class="code" href="../../d7/dc0/parse_8y.html#a6a520c2087f1fd7ac16d02aced0e4f7f">cases</a> opt_rescue exc_list exc_var opt_ensure
<a name="l00692"></a>00692 %type &lt;node&gt; <a class="code" href="../../d3/d09/ripper_8y.html#a8187411843a6284ffb964ef3fb9fcab3">args</a> call_args opt_call_args
<a name="l00693"></a>00693 %type &lt;node&gt; paren_args opt_paren_args
<a name="l00694"></a>00694 %type &lt;node&gt; command_args aref_args opt_block_arg block_arg var_ref var_lhs
<a name="l00695"></a>00695 %type &lt;node&gt; command_asgn mrhs superclass block_call block_command
<a name="l00696"></a>00696 %type &lt;node&gt; <a class="code" href="../../d3/d09/ripper_8y.html#a656c4e2e5e1db08ef4ae0b1c6053e671">f_block_optarg</a> f_block_opt
<a name="l00697"></a>00697 %type &lt;node&gt; f_arglist f_args f_arg f_arg_item <a class="code" href="../../d7/dc0/parse_8y.html#ac6131a270341c0e17602e22a693e1733">f_optarg</a> f_marg <a class="code" href="../../d3/d09/ripper_8y.html#ad8c6fc99e12365fe282102d9dcd4df36">f_marg_list</a> f_margs
<a name="l00698"></a>00698 %type &lt;node&gt; assoc_list assocs assoc <a class="code" href="../../d3/d09/ripper_8y.html#ae9837234bd173ec68af7ed00c20242c9">undef_list</a> backref string_dvar <a class="code" href="../../d3/d09/ripper_8y.html#a42e6601c3437035f4f017afb4828cf7d">for_var</a>
<a name="l00699"></a>00699 %type &lt;node&gt; block_param opt_block_param block_param_def f_opt
<a name="l00700"></a>00700 %type &lt;node&gt; <a class="code" href="../../d3/d09/ripper_8y.html#a15e79be55a5c3a7de560fa1413cfeb18">bv_decls</a> opt_bv_decl <a class="code" href="../../d7/dc0/parse_8y.html#a61ddd7143020d0d74b03f3eaa5838062">bvar</a>
<a name="l00701"></a>00701 %type &lt;node&gt; lambda f_larglist lambda_body
<a name="l00702"></a>00702 %type &lt;node&gt; brace_block cmd_brace_block do_block <a class="code" href="../../d3/d09/ripper_8y.html#a73c3a889aca6f2648374f6f8331d13ea">lhs</a> <a class="code" href="../../d3/d09/ripper_8y.html#a2b9edf1e7cc4980ffa29e35e6186b170">none</a> fitem
<a name="l00703"></a>00703 %type &lt;node&gt; mlhs <a class="code" href="../../d3/d09/ripper_8y.html#ab5e34166701b27bbc94e866b2e9b3118">mlhs_head</a> <a class="code" href="../../d3/d09/ripper_8y.html#aab1e7b1c0eb4fb49ffdec0f948571836">mlhs_basic</a> mlhs_item mlhs_node <a class="code" href="../../d3/d09/ripper_8y.html#a0585a33a6fda5fcd5afdd353522e38b6">mlhs_post</a> <a class="code" href="../../d3/d09/ripper_8y.html#a68091c9cc26f9c90b4723c0488f5f17e">mlhs_inner</a>
<a name="l00704"></a>00704 %type &lt;id&gt;   fsym keyword_variable user_variable <a class="code" href="../../dd/dc0/date__core_8c.html#a8157485e687f56a6ae2f3ee0a8cb1580">sym</a> symbol operation operation2 operation3
<a name="l00705"></a>00705 %type &lt;id&gt;   cname fname op f_rest_arg f_block_arg opt_f_block_arg f_norm_arg f_bad_arg
<a name="l00706"></a>00706 <span class="comment">/*%%%*/</span>
<a name="l00707"></a>00707 <span class="comment">/*%</span>
<a name="l00708"></a>00708 <span class="comment">%type &lt;val&gt; program reswords then do dot_or_colon</span>
<a name="l00709"></a>00709 <span class="comment">%*/</span>
<a name="l00710"></a>00710 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a30c0584a6e12ebd260060a9b77159e90">tUPLUS</a>           <span class="comment">/* unary+ */</span>
<a name="l00711"></a>00711 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a2990cd3acbac56afa45019a045ddcd9e">tUMINUS</a>          <span class="comment">/* unary- */</span>
<a name="l00712"></a>00712 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a3637bfb7d8b8ae77f0dccb4841c70673">tPOW</a>             <span class="comment">/* ** */</span>
<a name="l00713"></a>00713 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#af5d97f1c301f97e35c69e5e21d698c8b">tCMP</a>             <span class="comment">/* &lt;=&gt; */</span>
<a name="l00714"></a>00714 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a6ea996f3ab75bd127d6326b180214c6f">tEQ</a>              <span class="comment">/* == */</span>
<a name="l00715"></a>00715 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#ac6db743a4f2e6f90976870022d8914a2">tEQQ</a>             <span class="comment">/* === */</span>
<a name="l00716"></a>00716 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#aa8f0fa309e4e39cda30f2116fb979320">tNEQ</a>             <span class="comment">/* != */</span>
<a name="l00717"></a>00717 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a285fd90a21df46bc9781328e0ac5d22e">tGEQ</a>             <span class="comment">/* &gt;= */</span>
<a name="l00718"></a>00718 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a4c271a73151d715c58bf15c8607054e0">tLEQ</a>             <span class="comment">/* &lt;= */</span>
<a name="l00719"></a>00719 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a65277f756450c2f9e7117faf2c01339a">tANDOP</a> <a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a>     <span class="comment">/* &amp;&amp; and || */</span>
<a name="l00720"></a>00720 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a6fba3b7a35b6a4abc5692d7bc6f7cc51">tMATCH</a> <a class="code" href="../../d5/d11/ripper_8c.html#a18a357e5edec5f1ff68c4bc4fc5d0c84">tNMATCH</a>   <span class="comment">/* =~ and !~ */</span>
<a name="l00721"></a>00721 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#ad6d247d3b76eb71841a20a06b7248d5c">tDOT2</a> <a class="code" href="../../d5/d11/ripper_8c.html#a3044adcc37f3f3a58ee0d58bc0b38b2f">tDOT3</a>      <span class="comment">/* .. and ... */</span>
<a name="l00722"></a>00722 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#ab052bc5e13a5bbe98406c4aec5a4deac">tAREF</a> <a class="code" href="../../d5/d11/ripper_8c.html#ad1b5f00e34caa7051eef00a36b40d232">tASET</a>      <span class="comment">/* [] and []= */</span>
<a name="l00723"></a>00723 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#aabd668249ab17583bb8ba7b0a15dc88a">tLSHFT</a> <a class="code" href="../../d5/d11/ripper_8c.html#a5d34fc3d8e54b552366d4e8941852610">tRSHFT</a>    <span class="comment">/* &lt;&lt; and &gt;&gt; */</span>
<a name="l00724"></a>00724 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a>          <span class="comment">/* :: */</span>
<a name="l00725"></a>00725 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a76d2c0533b6023921f54284bf058fa11">tCOLON3</a>          <span class="comment">/* :: at EXPR_BEG */</span>
<a name="l00726"></a>00726 %token &lt;id&gt; <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a>    <span class="comment">/* +=, -=  etc. */</span>
<a name="l00727"></a>00727 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a9df99a64c8253f03638b24327e2ff7b6">tASSOC</a>           <span class="comment">/* =&gt; */</span>
<a name="l00728"></a>00728 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a8d562a1eeeebb179b8571743d06dd937">tLPAREN</a>          <span class="comment">/* ( */</span>
<a name="l00729"></a>00729 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a02644b13da577555e023744bcc01df78">tLPAREN_ARG</a>      <span class="comment">/* ( */</span>
<a name="l00730"></a>00730 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#ab9be5a0e5f3ae493ccf6c76eeb3ffaab">tRPAREN</a>          <span class="comment">/* ) */</span>
<a name="l00731"></a>00731 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a8924ededc369aa7c8ff7605073acbd68">tLBRACK</a>          <span class="comment">/* [ */</span>
<a name="l00732"></a>00732 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a47ff76b749ae189a435ebe6ac97c6afa">tLBRACE</a>          <span class="comment">/* { */</span>
<a name="l00733"></a>00733 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a7f3819cfc3596eb9af8ff1a6276f6eea">tLBRACE_ARG</a>      <span class="comment">/* { */</span>
<a name="l00734"></a>00734 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a>            <span class="comment">/* * */</span>
<a name="l00735"></a>00735 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#ab96f3c142b77bb37684eb3e8968ce99f">tAMPER</a>           <span class="comment">/* &amp; */</span>
<a name="l00736"></a>00736 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a4e47dd239d0fcc7c52fdbcc1e1955ef5">tLAMBDA</a>          <span class="comment">/* -&gt; */</span>
<a name="l00737"></a>00737 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a4e2e6284f92622d77f0feb7152f57ec7">tSYMBEG</a> <a class="code" href="../../d5/d11/ripper_8c.html#ae8e25024ff03620afa83e2a3c9bceb7b">tSTRING_BEG</a> <a class="code" href="../../d5/d11/ripper_8c.html#a476bb0d5e59ee5787ecb5bfdf6aa64a0">tXSTRING_BEG</a> <a class="code" href="../../d5/d11/ripper_8c.html#ad71e45c5e7cc1afa50bed0b8e129d842">tREGEXP_BEG</a> <a class="code" href="../../d5/d11/ripper_8c.html#a0002f4a3fccb91ab71bc6fbdaf1999e3">tWORDS_BEG</a> <a class="code" href="../../d5/d11/ripper_8c.html#ad8bfebfd83a1461531056bbd1dcbea9b">tQWORDS_BEG</a>
<a name="l00738"></a>00738 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#a08b1f68dd11d289de72404e9e6a7ad20">tSTRING_DBEG</a> <a class="code" href="../../d5/d11/ripper_8c.html#aa7b2a41e57a277ba91ec5803e707148f">tSTRING_DVAR</a> <a class="code" href="../../d5/d11/ripper_8c.html#af4eeb9189245212ffd361ff11bcccdc0">tSTRING_END</a> <a class="code" href="../../d5/d11/ripper_8c.html#a0dac552aee08b749a8cc2627b458e825">tLAMBEG</a>
<a name="l00739"></a>00739 
<a name="l00740"></a>00740 <span class="comment">/*</span>
<a name="l00741"></a>00741 <span class="comment"> *      precedence table</span>
<a name="l00742"></a>00742 <span class="comment"> */</span>
<a name="l00743"></a>00743 
<a name="l00744"></a>00744 %nonassoc <a class="code" href="../../d5/d11/ripper_8c.html#a0e23c1110646d20ce82b8cd263941054">tLOWEST</a>
<a name="l00745"></a>00745 %nonassoc <a class="code" href="../../d5/d11/ripper_8c.html#a7f3819cfc3596eb9af8ff1a6276f6eea">tLBRACE_ARG</a>
<a name="l00746"></a>00746 
<a name="l00747"></a>00747 %nonassoc  <a class="code" href="../../d5/d11/ripper_8c.html#a60d71c343a9b4aa799c67892d25dc12b">modifier_if</a> <a class="code" href="../../d5/d11/ripper_8c.html#ac9823d8658cc0ef3ac7606852c84e5c8">modifier_unless</a> <a class="code" href="../../d5/d11/ripper_8c.html#acc4558c7b26aa158e3db0c5677b74533">modifier_while</a> <a class="code" href="../../d5/d11/ripper_8c.html#a977c1146deb5448df4d5b1138d7c742e">modifier_until</a>
<a name="l00748"></a>00748 %left  <a class="code" href="../../d5/d11/ripper_8c.html#a0a3412db66a7bfe6e86a085ca4213f0a">keyword_or</a> <a class="code" href="../../d5/d11/ripper_8c.html#a4b2a7871e12bd91d4506c5a3904daee9">keyword_and</a>
<a name="l00749"></a>00749 %right <a class="code" href="../../d5/d11/ripper_8c.html#aa7618608a8ca97b99b9b2760935869eb">keyword_not</a>
<a name="l00750"></a>00750 %nonassoc <a class="code" href="../../d5/d11/ripper_8c.html#afb1d7e76236b8c3c87f3a241263313a1">keyword_defined</a>
<a name="l00751"></a>00751 %right <span class="charliteral">&apos;=&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a>
<a name="l00752"></a>00752 %left <a class="code" href="../../d5/d11/ripper_8c.html#a68a67be66a4f843e42b55a28c9d3dcfa">modifier_rescue</a>
<a name="l00753"></a>00753 %right <span class="charliteral">&apos;?&apos;</span> <span class="charliteral">&apos;:&apos;</span>
<a name="l00754"></a>00754 %nonassoc <a class="code" href="../../d5/d11/ripper_8c.html#ad6d247d3b76eb71841a20a06b7248d5c">tDOT2</a> <a class="code" href="../../d5/d11/ripper_8c.html#a3044adcc37f3f3a58ee0d58bc0b38b2f">tDOT3</a>
<a name="l00755"></a>00755 %left  <a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a>
<a name="l00756"></a>00756 %left  <a class="code" href="../../d5/d11/ripper_8c.html#a65277f756450c2f9e7117faf2c01339a">tANDOP</a>
<a name="l00757"></a>00757 %nonassoc  <a class="code" href="../../d5/d11/ripper_8c.html#af5d97f1c301f97e35c69e5e21d698c8b">tCMP</a> <a class="code" href="../../d5/d11/ripper_8c.html#a6ea996f3ab75bd127d6326b180214c6f">tEQ</a> <a class="code" href="../../d5/d11/ripper_8c.html#ac6db743a4f2e6f90976870022d8914a2">tEQQ</a> <a class="code" href="../../d5/d11/ripper_8c.html#aa8f0fa309e4e39cda30f2116fb979320">tNEQ</a> <a class="code" href="../../d5/d11/ripper_8c.html#a6fba3b7a35b6a4abc5692d7bc6f7cc51">tMATCH</a> <a class="code" href="../../d5/d11/ripper_8c.html#a18a357e5edec5f1ff68c4bc4fc5d0c84">tNMATCH</a>
<a name="l00758"></a>00758 %left  <span class="charliteral">&apos;&gt;&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#a285fd90a21df46bc9781328e0ac5d22e">tGEQ</a> <span class="charliteral">&apos;&lt;&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#a4c271a73151d715c58bf15c8607054e0">tLEQ</a>
<a name="l00759"></a>00759 %left  <span class="charliteral">&apos;|&apos;</span> <span class="charliteral">&apos;^&apos;</span>
<a name="l00760"></a>00760 %left  <span class="charliteral">&apos;&amp;&apos;</span>
<a name="l00761"></a>00761 %left  <a class="code" href="../../d5/d11/ripper_8c.html#aabd668249ab17583bb8ba7b0a15dc88a">tLSHFT</a> <a class="code" href="../../d5/d11/ripper_8c.html#a5d34fc3d8e54b552366d4e8941852610">tRSHFT</a>
<a name="l00762"></a>00762 %left  <span class="charliteral">&apos;+&apos;</span> <span class="charliteral">&apos;-&apos;</span>
<a name="l00763"></a>00763 %left  <span class="charliteral">&apos;*&apos;</span> <span class="charliteral">&apos;/&apos;</span> <span class="charliteral">&apos;%&apos;</span>
<a name="l00764"></a>00764 %right <a class="code" href="../../d5/d11/ripper_8c.html#afb221f5d4ce1cd557eb695967604d276">tUMINUS_NUM</a> <a class="code" href="../../d5/d11/ripper_8c.html#a2990cd3acbac56afa45019a045ddcd9e">tUMINUS</a>
<a name="l00765"></a>00765 %right <a class="code" href="../../d5/d11/ripper_8c.html#a3637bfb7d8b8ae77f0dccb4841c70673">tPOW</a>
<a name="l00766"></a>00766 %right <span class="charliteral">&apos;!&apos;</span> <span class="charliteral">&apos;~&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#a30c0584a6e12ebd260060a9b77159e90">tUPLUS</a>
<a name="l00767"></a>00767 
<a name="l00768"></a>00768 %nonassoc <a class="code" href="../../d5/d11/ripper_8c.html#a1e1290863fe70cdab841ac04bd5746d7">idNULL</a>
<a name="l00769"></a>00769 %nonassoc <a class="code" href="../../d5/d11/ripper_8c.html#a84ba2db843c1f27f1e4aeecf30dec461">idRespond_to</a>
<a name="l00770"></a>00770 %nonassoc <a class="code" href="../../d5/d11/ripper_8c.html#aacff96767fb9dd322fbacf91bcc49020">idIFUNC</a>
<a name="l00771"></a>00771 %nonassoc <a class="code" href="../../d5/d11/ripper_8c.html#ad562bc991b3d8d48ceadbeeda82f599d">idCFUNC</a>
<a name="l00772"></a>00772 %nonassoc <a class="code" href="../../d5/d11/ripper_8c.html#a91996e87fe152b3c23ada91901134524">id_core_set_method_alias</a>
<a name="l00773"></a>00773 %nonassoc <a class="code" href="../../d5/d11/ripper_8c.html#a6a184f6f82c9e05dd16116cc18d1f8b9">id_core_set_variable_alias</a>
<a name="l00774"></a>00774 %nonassoc <a class="code" href="../../d5/d11/ripper_8c.html#ab9fb1a3c08f08c168d1512a170d0484c">id_core_undef_method</a>
<a name="l00775"></a>00775 %nonassoc <a class="code" href="../../d5/d11/ripper_8c.html#ac8053973c51f98505f40d32af7b95f5a">id_core_define_method</a>
<a name="l00776"></a>00776 %nonassoc <a class="code" href="../../d5/d11/ripper_8c.html#ab948c9eee8902650fc1c9e93e45ce936">id_core_define_singleton_method</a>
<a name="l00777"></a>00777 %nonassoc <a class="code" href="../../d5/d11/ripper_8c.html#abb0693b6ab8e95a8e1280ecbb8b9360b">id_core_set_postexe</a>
<a name="l00778"></a>00778 
<a name="l00779"></a>00779 %<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a> <a class="code" href="../../d5/d11/ripper_8c.html#aa04217e94ed963efd9ca7c22d36916d9">tLAST_TOKEN</a>
<a name="l00780"></a>00780 
<a name="l00781"></a>00781 %%
<a name="l00782"></a>00782 program         :  {
<a name="l00783"></a>00783                         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l00784"></a>00784                     <span class="comment">/*%%%*/</span>
<a name="l00785"></a>00785                         <a class="code" href="../../d5/d11/ripper_8c.html#ab63305c0543649ca488042de073fcffa">local_push</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a7a74d262442bc583dd17849c36ffc1a5">compile_for_eval</a> || <a class="code" href="../../d2/d47/compile_8c.html#a330cb719f3b4c6d45c3e34c6629b3ca4">rb_parse_in_main</a>());
<a name="l00786"></a>00786                     <span class="comment">/*%</span>
<a name="l00787"></a>00787 <span class="comment">                        local_push(0);</span>
<a name="l00788"></a>00788 <span class="comment">                    %*/</span>
<a name="l00789"></a>00789                     }
<a name="l00790"></a>00790                   top_compstmt
<a name="l00791"></a>00791                     {
<a name="l00792"></a>00792                     <span class="comment">/*%%%*/</span>
<a name="l00793"></a>00793                         <span class="keywordflow">if</span> ($2 &amp;&amp; !<a class="code" href="../../d5/d11/ripper_8c.html#a7a74d262442bc583dd17849c36ffc1a5">compile_for_eval</a>) {
<a name="l00794"></a>00794                             <span class="comment">/* last expression should not be void */</span>
<a name="l00795"></a>00795                             <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($2) != NODE_BLOCK) <a class="code" href="../../d5/d11/ripper_8c.html#a0afcb6fcfd2e93795ffb8e11ed2d7c41">void_expr</a>($2);
<a name="l00796"></a>00796                             <span class="keywordflow">else</span> {
<a name="l00797"></a>00797                                 NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a0d7af8a92c4b0a07f71585584ef9634f">node</a> = $2;
<a name="l00798"></a>00798                                 <span class="keywordflow">while</span> (node-&gt;nd_next) {
<a name="l00799"></a>00799                                     node = node-&gt;nd_next;
<a name="l00800"></a>00800                                 }
<a name="l00801"></a>00801                                 <a class="code" href="../../d5/d11/ripper_8c.html#a0afcb6fcfd2e93795ffb8e11ed2d7c41">void_expr</a>(node-&gt;nd_head);
<a name="l00802"></a>00802                             }
<a name="l00803"></a>00803                         }
<a name="l00804"></a>00804                         <a class="code" href="../../d5/d11/ripper_8c.html#a9b370d5e8d61dfdb75ff8fa6397d6e8c">ruby_eval_tree</a> = <a class="code" href="../../d3/d09/ripper_8y.html#ad0321dad4945e9cea9b0a5f0296e2505">NEW_SCOPE</a>(0, <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9b370d5e8d61dfdb75ff8fa6397d6e8c">ruby_eval_tree</a>, $2));
<a name="l00805"></a>00805                     <span class="comment">/*%</span>
<a name="l00806"></a>00806 <span class="comment">                        $$ = $2;</span>
<a name="l00807"></a>00807 <span class="comment">                        parser-&gt;result = dispatch1(program, $$);</span>
<a name="l00808"></a>00808 <span class="comment">                    %*/</span>
<a name="l00809"></a>00809                         <a class="code" href="../../d5/d11/ripper_8c.html#a5205a69edafa1f17af70b1f24c8f978f">local_pop</a>();
<a name="l00810"></a>00810                     }
<a name="l00811"></a>00811                 ;
<a name="l00812"></a>00812 
<a name="l00813"></a>00813 top_compstmt    : top_stmts opt_terms
<a name="l00814"></a>00814                     {
<a name="l00815"></a>00815                     <span class="comment">/*%%%*/</span>
<a name="l00816"></a>00816                         <a class="code" href="../../d5/d11/ripper_8c.html#af53d99e10d94d269d1daaf7e01977d33">void_stmts</a>($1);
<a name="l00817"></a>00817                         <a class="code" href="../../d7/dc0/parse_8y.html#ada4f67a980f0f983b65e40843f2cc7ed">fixup_nodes</a>(&amp;<a class="code" href="../../d5/d11/ripper_8c.html#a8e0101b90062ee6777e4039eefcd1e75">deferred_nodes</a>);
<a name="l00818"></a>00818                     <span class="comment">/*%</span>
<a name="l00819"></a>00819 <span class="comment">                    %*/</span>
<a name="l00820"></a>00820                         $$ = $1;
<a name="l00821"></a>00821                     }
<a name="l00822"></a>00822                 ;
<a name="l00823"></a>00823 
<a name="l00824"></a>00824 top_stmts       : <a class="code" href="../../d3/d09/ripper_8y.html#a2b9edf1e7cc4980ffa29e35e6186b170">none</a>
<a name="l00825"></a>00825                     {
<a name="l00826"></a>00826                     <span class="comment">/*%%%*/</span>
<a name="l00827"></a>00827                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l00828"></a>00828                     <span class="comment">/*%</span>
<a name="l00829"></a>00829 <span class="comment">                        $$ = dispatch2(stmts_add, dispatch0(stmts_new),</span>
<a name="l00830"></a>00830 <span class="comment">                                                  dispatch0(void_stmt));</span>
<a name="l00831"></a>00831 <span class="comment">                    %*/</span>
<a name="l00832"></a>00832                     }
<a name="l00833"></a>00833                 | top_stmt
<a name="l00834"></a>00834                     {
<a name="l00835"></a>00835                     <span class="comment">/*%%%*/</span>
<a name="l00836"></a>00836                         $$ = <a class="code" href="../../d7/dc0/parse_8y.html#a6ad6bd94979e7cb3c497c20bcf5fbd86">newline_node</a>($1);
<a name="l00837"></a>00837                     <span class="comment">/*%</span>
<a name="l00838"></a>00838 <span class="comment">                        $$ = dispatch2(stmts_add, dispatch0(stmts_new), $1);</span>
<a name="l00839"></a>00839 <span class="comment">                    %*/</span>
<a name="l00840"></a>00840                     }
<a name="l00841"></a>00841                 | top_stmts terms top_stmt
<a name="l00842"></a>00842                     {
<a name="l00843"></a>00843                     <span class="comment">/*%%%*/</span>
<a name="l00844"></a>00844                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>($1, <a class="code" href="../../d7/dc0/parse_8y.html#a6ad6bd94979e7cb3c497c20bcf5fbd86">newline_node</a>($3));
<a name="l00845"></a>00845                     <span class="comment">/*%</span>
<a name="l00846"></a>00846 <span class="comment">                        $$ = dispatch2(stmts_add, $1, $3);</span>
<a name="l00847"></a>00847 <span class="comment">                    %*/</span>
<a name="l00848"></a>00848                     }
<a name="l00849"></a>00849                 | error top_stmt
<a name="l00850"></a>00850                     {
<a name="l00851"></a>00851                         $$ = <a class="code" href="../../d7/dc0/parse_8y.html#af6073dd45c01beeb98d4a07c13a581f8">remove_begin</a>($2);
<a name="l00852"></a>00852                     }
<a name="l00853"></a>00853                 ;
<a name="l00854"></a>00854 
<a name="l00855"></a>00855 top_stmt        : stmt
<a name="l00856"></a>00856                 | <a class="code" href="../../d5/d11/ripper_8c.html#ac4018498741336ff993f8dca4a489bb0">keyword_BEGIN</a>
<a name="l00857"></a>00857                     {
<a name="l00858"></a>00858                         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab3563b12f00c4558b6e9528d1733a459">in_def</a> || <a class="code" href="../../d5/d11/ripper_8c.html#ae1504c640dc00b676c5f8573c87c00bf">in_single</a>) {
<a name="l00859"></a>00859                             <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;BEGIN in method&quot;</span>);
<a name="l00860"></a>00860                         }
<a name="l00861"></a>00861                     <span class="comment">/*%%%*/</span>
<a name="l00862"></a>00862                         <span class="comment">/* local_push(0); */</span>
<a name="l00863"></a>00863                     <span class="comment">/*%</span>
<a name="l00864"></a>00864 <span class="comment">                    %*/</span>
<a name="l00865"></a>00865                     }
<a name="l00866"></a>00866                   <span class="charliteral">&apos;{&apos;</span> top_compstmt <span class="charliteral">&apos;}&apos;</span>
<a name="l00867"></a>00867                     {
<a name="l00868"></a>00868                     <span class="comment">/*%%%*/</span>
<a name="l00869"></a>00869                         <a class="code" href="../../d5/d11/ripper_8c.html#a7c301e13ce3176f0157adffeafabcad7">ruby_eval_tree_begin</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a7c301e13ce3176f0157adffeafabcad7">ruby_eval_tree_begin</a>,
<a name="l00870"></a>00870                                                             $4);
<a name="l00871"></a>00871                         <span class="comment">/* NEW_PREEXE($4)); */</span>
<a name="l00872"></a>00872                         <span class="comment">/* local_pop(); */</span>
<a name="l00873"></a>00873                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l00874"></a>00874                     <span class="comment">/*%</span>
<a name="l00875"></a>00875 <span class="comment">                        $$ = dispatch1(BEGIN, $4);</span>
<a name="l00876"></a>00876 <span class="comment">                    %*/</span>
<a name="l00877"></a>00877                     }
<a name="l00878"></a>00878                 ;
<a name="l00879"></a>00879 
<a name="l00880"></a>00880 bodystmt        : compstmt
<a name="l00881"></a>00881                   opt_rescue
<a name="l00882"></a>00882                   opt_else
<a name="l00883"></a>00883                   opt_ensure
<a name="l00884"></a>00884                     {
<a name="l00885"></a>00885                     <span class="comment">/*%%%*/</span>
<a name="l00886"></a>00886                         $$ = $1;
<a name="l00887"></a>00887                         <span class="keywordflow">if</span> ($2) {
<a name="l00888"></a>00888                             $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a480b6549172fef5598a345a33ac43849">NEW_RESCUE</a>($1, $2, $3);
<a name="l00889"></a>00889                         }
<a name="l00890"></a>00890                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($3) {
<a name="l00891"></a>00891                             <a class="code" href="../../d5/d11/ripper_8c.html#aaec2ebc8880fc8c66c0d07ad3b0edb44">rb_warn0</a>(<span class="stringliteral">&quot;else without rescue is useless&quot;</span>);
<a name="l00892"></a>00892                             $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>($$, $3);
<a name="l00893"></a>00893                         }
<a name="l00894"></a>00894                         <span class="keywordflow">if</span> ($4) {
<a name="l00895"></a>00895                             <span class="keywordflow">if</span> ($$) {
<a name="l00896"></a>00896                                 $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a8b28dbb2dbbb5be3f93f3369de8a4ac2">NEW_ENSURE</a>($$, $4);
<a name="l00897"></a>00897                             }
<a name="l00898"></a>00898                             <span class="keywordflow">else</span> {
<a name="l00899"></a>00899                                 $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>($4, <a class="code" href="../../d3/d09/ripper_8y.html#a969f4dd65ae53a2ec90dbbb0420af61e">NEW_NIL</a>());
<a name="l00900"></a>00900                             }
<a name="l00901"></a>00901                         }
<a name="l00902"></a>00902                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l00903"></a>00903                     <span class="comment">/*%</span>
<a name="l00904"></a>00904 <span class="comment">                        $$ = dispatch4(bodystmt,</span>
<a name="l00905"></a>00905 <span class="comment">                                       escape_Qundef($1),</span>
<a name="l00906"></a>00906 <span class="comment">                                       escape_Qundef($2),</span>
<a name="l00907"></a>00907 <span class="comment">                                       escape_Qundef($3),</span>
<a name="l00908"></a>00908 <span class="comment">                                       escape_Qundef($4));</span>
<a name="l00909"></a>00909 <span class="comment">                    %*/</span>
<a name="l00910"></a>00910                     }
<a name="l00911"></a>00911                 ;
<a name="l00912"></a>00912 
<a name="l00913"></a>00913 compstmt        : stmts opt_terms
<a name="l00914"></a>00914                     {
<a name="l00915"></a>00915                     <span class="comment">/*%%%*/</span>
<a name="l00916"></a>00916                         <a class="code" href="../../d5/d11/ripper_8c.html#af53d99e10d94d269d1daaf7e01977d33">void_stmts</a>($1);
<a name="l00917"></a>00917                         <a class="code" href="../../d7/dc0/parse_8y.html#ada4f67a980f0f983b65e40843f2cc7ed">fixup_nodes</a>(&amp;<a class="code" href="../../d5/d11/ripper_8c.html#a8e0101b90062ee6777e4039eefcd1e75">deferred_nodes</a>);
<a name="l00918"></a>00918                     <span class="comment">/*%</span>
<a name="l00919"></a>00919 <span class="comment">                    %*/</span>
<a name="l00920"></a>00920                         $$ = $1;
<a name="l00921"></a>00921                     }
<a name="l00922"></a>00922                 ;
<a name="l00923"></a>00923 
<a name="l00924"></a>00924 stmts           : <a class="code" href="../../d3/d09/ripper_8y.html#a2b9edf1e7cc4980ffa29e35e6186b170">none</a>
<a name="l00925"></a>00925                     {
<a name="l00926"></a>00926                     <span class="comment">/*%%%*/</span>
<a name="l00927"></a>00927                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l00928"></a>00928                     <span class="comment">/*%</span>
<a name="l00929"></a>00929 <span class="comment">                        $$ = dispatch2(stmts_add, dispatch0(stmts_new),</span>
<a name="l00930"></a>00930 <span class="comment">                                                  dispatch0(void_stmt));</span>
<a name="l00931"></a>00931 <span class="comment">                    %*/</span>
<a name="l00932"></a>00932                     }
<a name="l00933"></a>00933                 | stmt
<a name="l00934"></a>00934                     {
<a name="l00935"></a>00935                     <span class="comment">/*%%%*/</span>
<a name="l00936"></a>00936                         $$ = <a class="code" href="../../d7/dc0/parse_8y.html#a6ad6bd94979e7cb3c497c20bcf5fbd86">newline_node</a>($1);
<a name="l00937"></a>00937                     <span class="comment">/*%</span>
<a name="l00938"></a>00938 <span class="comment">                        $$ = dispatch2(stmts_add, dispatch0(stmts_new), $1);</span>
<a name="l00939"></a>00939 <span class="comment">                    %*/</span>
<a name="l00940"></a>00940                     }
<a name="l00941"></a>00941                 | stmts terms stmt
<a name="l00942"></a>00942                     {
<a name="l00943"></a>00943                     <span class="comment">/*%%%*/</span>
<a name="l00944"></a>00944                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>($1, <a class="code" href="../../d7/dc0/parse_8y.html#a6ad6bd94979e7cb3c497c20bcf5fbd86">newline_node</a>($3));
<a name="l00945"></a>00945                     <span class="comment">/*%</span>
<a name="l00946"></a>00946 <span class="comment">                        $$ = dispatch2(stmts_add, $1, $3);</span>
<a name="l00947"></a>00947 <span class="comment">                    %*/</span>
<a name="l00948"></a>00948                     }
<a name="l00949"></a>00949                 | error stmt
<a name="l00950"></a>00950                     {
<a name="l00951"></a>00951                         $$ = <a class="code" href="../../d7/dc0/parse_8y.html#af6073dd45c01beeb98d4a07c13a581f8">remove_begin</a>($2);
<a name="l00952"></a>00952                     }
<a name="l00953"></a>00953                 ;
<a name="l00954"></a>00954 
<a name="l00955"></a>00955 stmt            : <a class="code" href="../../d5/d11/ripper_8c.html#ab516dc23f7932eee4a881bb364b0bd73">keyword_alias</a> fitem {<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>;} fitem
<a name="l00956"></a>00956                     {
<a name="l00957"></a>00957                     <span class="comment">/*%%%*/</span>
<a name="l00958"></a>00958                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a2f666a41c0a14ee99bf4602bd7cdc6ce">NEW_ALIAS</a>($2, $4);
<a name="l00959"></a>00959                     <span class="comment">/*%</span>
<a name="l00960"></a>00960 <span class="comment">                        $$ = dispatch2(alias, $2, $4);</span>
<a name="l00961"></a>00961 <span class="comment">                    %*/</span>
<a name="l00962"></a>00962                     }
<a name="l00963"></a>00963                 | <a class="code" href="../../d5/d11/ripper_8c.html#ab516dc23f7932eee4a881bb364b0bd73">keyword_alias</a> <a class="code" href="../../d5/d11/ripper_8c.html#a0669929a5e8525326e729ff51842ba9e">tGVAR</a> <a class="code" href="../../d5/d11/ripper_8c.html#a0669929a5e8525326e729ff51842ba9e">tGVAR</a>
<a name="l00964"></a>00964                     {
<a name="l00965"></a>00965                     <span class="comment">/*%%%*/</span>
<a name="l00966"></a>00966                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a46287ffb859955fbc4f1cdf7dc057a22">NEW_VALIAS</a>($2, $3);
<a name="l00967"></a>00967                     <span class="comment">/*%</span>
<a name="l00968"></a>00968 <span class="comment">                        $$ = dispatch2(var_alias, $2, $3);</span>
<a name="l00969"></a>00969 <span class="comment">                    %*/</span>
<a name="l00970"></a>00970                     }
<a name="l00971"></a>00971                 | <a class="code" href="../../d5/d11/ripper_8c.html#ab516dc23f7932eee4a881bb364b0bd73">keyword_alias</a> <a class="code" href="../../d5/d11/ripper_8c.html#a0669929a5e8525326e729ff51842ba9e">tGVAR</a> <a class="code" href="../../d5/d11/ripper_8c.html#a2ff67775fb64c00948749c56837ef334">tBACK_REF</a>
<a name="l00972"></a>00972                     {
<a name="l00973"></a>00973                     <span class="comment">/*%%%*/</span>
<a name="l00974"></a>00974                         <span class="keywordtype">char</span> <a class="code" href="../../d6/da0/nkf-utf8_2nkf_8c.html#ac37f17a60c8b5533aac4840c681f62b8">buf</a>[2];
<a name="l00975"></a>00975                         buf[0] = <span class="charliteral">&apos;$&apos;</span>;
<a name="l00976"></a>00976                         buf[1] = (char)$3-&gt;nd_nth;
<a name="l00977"></a>00977                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a46287ffb859955fbc4f1cdf7dc057a22">NEW_VALIAS</a>($2, <a class="code" href="../../d5/d11/ripper_8c.html#a06f1137a7428ccb3b70848762eab967e">rb_intern2</a>(buf, 2));
<a name="l00978"></a>00978                     <span class="comment">/*%</span>
<a name="l00979"></a>00979 <span class="comment">                        $$ = dispatch2(var_alias, $2, $3);</span>
<a name="l00980"></a>00980 <span class="comment">                    %*/</span>
<a name="l00981"></a>00981                     }
<a name="l00982"></a>00982                 | <a class="code" href="../../d5/d11/ripper_8c.html#ab516dc23f7932eee4a881bb364b0bd73">keyword_alias</a> <a class="code" href="../../d5/d11/ripper_8c.html#a0669929a5e8525326e729ff51842ba9e">tGVAR</a> <a class="code" href="../../d5/d11/ripper_8c.html#a0ac4af4d5877f883246a279da41cdd7a">tNTH_REF</a>
<a name="l00983"></a>00983                     {
<a name="l00984"></a>00984                     <span class="comment">/*%%%*/</span>
<a name="l00985"></a>00985                         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;can&apos;t make alias for the number variables&quot;</span>);
<a name="l00986"></a>00986                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l00987"></a>00987                     <span class="comment">/*%</span>
<a name="l00988"></a>00988 <span class="comment">                        $$ = dispatch2(var_alias, $2, $3);</span>
<a name="l00989"></a>00989 <span class="comment">                        $$ = dispatch1(alias_error, $$);</span>
<a name="l00990"></a>00990 <span class="comment">                    %*/</span>
<a name="l00991"></a>00991                     }
<a name="l00992"></a>00992                 | <a class="code" href="../../d5/d11/ripper_8c.html#a0738772680283d265974b4f744404b58">keyword_undef</a> <a class="code" href="../../d3/d09/ripper_8y.html#ae9837234bd173ec68af7ed00c20242c9">undef_list</a>
<a name="l00993"></a>00993                     {
<a name="l00994"></a>00994                     <span class="comment">/*%%%*/</span>
<a name="l00995"></a>00995                         $$ = $2;
<a name="l00996"></a>00996                     <span class="comment">/*%</span>
<a name="l00997"></a>00997 <span class="comment">                        $$ = dispatch1(undef, $2);</span>
<a name="l00998"></a>00998 <span class="comment">                    %*/</span>
<a name="l00999"></a>00999                     }
<a name="l01000"></a>01000                 | stmt <a class="code" href="../../d5/d11/ripper_8c.html#a60d71c343a9b4aa799c67892d25dc12b">modifier_if</a> expr_value
<a name="l01001"></a>01001                     {
<a name="l01002"></a>01002                     <span class="comment">/*%%%*/</span>
<a name="l01003"></a>01003                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a0e9ba36e1c5584b64a0bcfa5b66fcd8e">NEW_IF</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a>($3), <a class="code" href="../../d7/dc0/parse_8y.html#af6073dd45c01beeb98d4a07c13a581f8">remove_begin</a>($1), 0);
<a name="l01004"></a>01004                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $3);
<a name="l01005"></a>01005                     <span class="comment">/*%</span>
<a name="l01006"></a>01006 <span class="comment">                        $$ = dispatch2(if_mod, $3, $1);</span>
<a name="l01007"></a>01007 <span class="comment">                    %*/</span>
<a name="l01008"></a>01008                     }
<a name="l01009"></a>01009                 | stmt <a class="code" href="../../d5/d11/ripper_8c.html#ac9823d8658cc0ef3ac7606852c84e5c8">modifier_unless</a> expr_value
<a name="l01010"></a>01010                     {
<a name="l01011"></a>01011                     <span class="comment">/*%%%*/</span>
<a name="l01012"></a>01012                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a38b12ae1dd36af194b6328822949756c">NEW_UNLESS</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a>($3), <a class="code" href="../../d7/dc0/parse_8y.html#af6073dd45c01beeb98d4a07c13a581f8">remove_begin</a>($1), 0);
<a name="l01013"></a>01013                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $3);
<a name="l01014"></a>01014                     <span class="comment">/*%</span>
<a name="l01015"></a>01015 <span class="comment">                        $$ = dispatch2(unless_mod, $3, $1);</span>
<a name="l01016"></a>01016 <span class="comment">                    %*/</span>
<a name="l01017"></a>01017                     }
<a name="l01018"></a>01018                 | stmt <a class="code" href="../../d5/d11/ripper_8c.html#acc4558c7b26aa158e3db0c5677b74533">modifier_while</a> expr_value
<a name="l01019"></a>01019                     {
<a name="l01020"></a>01020                     <span class="comment">/*%%%*/</span>
<a name="l01021"></a>01021                         <span class="keywordflow">if</span> ($1 &amp;&amp; <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($1) == NODE_BEGIN) {
<a name="l01022"></a>01022                             $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a10be5c585568d23803cbe84a2106b48d">NEW_WHILE</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a>($3), $1-&gt;nd_body, 0);
<a name="l01023"></a>01023                         }
<a name="l01024"></a>01024                         <span class="keywordflow">else</span> {
<a name="l01025"></a>01025                             $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a10be5c585568d23803cbe84a2106b48d">NEW_WHILE</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a>($3), $1, 1);
<a name="l01026"></a>01026                         }
<a name="l01027"></a>01027                     <span class="comment">/*%</span>
<a name="l01028"></a>01028 <span class="comment">                        $$ = dispatch2(while_mod, $3, $1);</span>
<a name="l01029"></a>01029 <span class="comment">                    %*/</span>
<a name="l01030"></a>01030                     }
<a name="l01031"></a>01031                 | stmt <a class="code" href="../../d5/d11/ripper_8c.html#a977c1146deb5448df4d5b1138d7c742e">modifier_until</a> expr_value
<a name="l01032"></a>01032                     {
<a name="l01033"></a>01033                     <span class="comment">/*%%%*/</span>
<a name="l01034"></a>01034                         <span class="keywordflow">if</span> ($1 &amp;&amp; <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($1) == NODE_BEGIN) {
<a name="l01035"></a>01035                             $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a63a47e707cafd9c5d43db5f49f6b5a05">NEW_UNTIL</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a>($3), $1-&gt;nd_body, 0);
<a name="l01036"></a>01036                         }
<a name="l01037"></a>01037                         <span class="keywordflow">else</span> {
<a name="l01038"></a>01038                             $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a63a47e707cafd9c5d43db5f49f6b5a05">NEW_UNTIL</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a>($3), $1, 1);
<a name="l01039"></a>01039                         }
<a name="l01040"></a>01040                     <span class="comment">/*%</span>
<a name="l01041"></a>01041 <span class="comment">                        $$ = dispatch2(until_mod, $3, $1);</span>
<a name="l01042"></a>01042 <span class="comment">                    %*/</span>
<a name="l01043"></a>01043                     }
<a name="l01044"></a>01044                 | stmt <a class="code" href="../../d5/d11/ripper_8c.html#a68a67be66a4f843e42b55a28c9d3dcfa">modifier_rescue</a> stmt
<a name="l01045"></a>01045                     {
<a name="l01046"></a>01046                     <span class="comment">/*%%%*/</span>
<a name="l01047"></a>01047                         NODE *resq = <a class="code" href="../../d3/d09/ripper_8y.html#a3a24fa78d51a6d51a28bb911f51814c7">NEW_RESBODY</a>(0, <a class="code" href="../../d7/dc0/parse_8y.html#af6073dd45c01beeb98d4a07c13a581f8">remove_begin</a>($3), 0);
<a name="l01048"></a>01048                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a480b6549172fef5598a345a33ac43849">NEW_RESCUE</a>(<a class="code" href="../../d7/dc0/parse_8y.html#af6073dd45c01beeb98d4a07c13a581f8">remove_begin</a>($1), resq, 0);
<a name="l01049"></a>01049                     <span class="comment">/*%</span>
<a name="l01050"></a>01050 <span class="comment">                        $$ = dispatch2(rescue_mod, $1, $3);</span>
<a name="l01051"></a>01051 <span class="comment">                    %*/</span>
<a name="l01052"></a>01052                     }
<a name="l01053"></a>01053                 | <a class="code" href="../../d5/d11/ripper_8c.html#a301644f3b615b72fae2733620f7fd48c">keyword_END</a> <span class="charliteral">&apos;{&apos;</span> compstmt <span class="charliteral">&apos;}&apos;</span>
<a name="l01054"></a>01054                     {
<a name="l01055"></a>01055                         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab3563b12f00c4558b6e9528d1733a459">in_def</a> || <a class="code" href="../../d5/d11/ripper_8c.html#ae1504c640dc00b676c5f8573c87c00bf">in_single</a>) {
<a name="l01056"></a>01056                             <a class="code" href="../../d5/d11/ripper_8c.html#aaec2ebc8880fc8c66c0d07ad3b0edb44">rb_warn0</a>(<span class="stringliteral">&quot;END in method; use at_exit&quot;</span>);
<a name="l01057"></a>01057                         }
<a name="l01058"></a>01058                     <span class="comment">/*%%%*/</span>
<a name="l01059"></a>01059                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a24c3c8e3c8667402283da5602acc2f8e">NEW_POSTEXE</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a6fafbd1d8ed31805fc7574ae1f6c87c7">NEW_NODE</a>(
<a name="l01060"></a>01060                             NODE_SCOPE, 0 <span class="comment">/* tbl */</span>, $3 <span class="comment">/* body */</span>, 0 <span class="comment">/* args */</span>));
<a name="l01061"></a>01061                     <span class="comment">/*%</span>
<a name="l01062"></a>01062 <span class="comment">                        $$ = dispatch1(END, $3);</span>
<a name="l01063"></a>01063 <span class="comment">                    %*/</span>
<a name="l01064"></a>01064                     }
<a name="l01065"></a>01065                 | command_asgn
<a name="l01066"></a>01066                 | mlhs <span class="charliteral">&apos;=&apos;</span> command_call
<a name="l01067"></a>01067                     {
<a name="l01068"></a>01068                     <span class="comment">/*%%%*/</span>
<a name="l01069"></a>01069                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($3);
<a name="l01070"></a>01070                         $1-&gt;nd_value = $3;
<a name="l01071"></a>01071                         $$ = $1;
<a name="l01072"></a>01072                     <span class="comment">/*%</span>
<a name="l01073"></a>01073 <span class="comment">                        $$ = dispatch2(massign, $1, $3);</span>
<a name="l01074"></a>01074 <span class="comment">                    %*/</span>
<a name="l01075"></a>01075                     }
<a name="l01076"></a>01076                 | var_lhs <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a> command_call
<a name="l01077"></a>01077                     {
<a name="l01078"></a>01078                     <span class="comment">/*%%%*/</span>
<a name="l01079"></a>01079                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($3);
<a name="l01080"></a>01080                         <span class="keywordflow">if</span> ($1) {
<a name="l01081"></a>01081                             <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> vid = $1-&gt;nd_vid;
<a name="l01082"></a>01082                             <span class="keywordflow">if</span> ($2 == <a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a>) {
<a name="l01083"></a>01083                                 $1-&gt;nd_value = $3;
<a name="l01084"></a>01084                                 $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a0a7d54a25f0a34c9e070aeb22925319f">NEW_OP_ASGN_OR</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a8128fe58f108349b4cb7c1a208cb874b">gettable</a>(vid), $1);
<a name="l01085"></a>01085                                 <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#af89af618cda0d4da53d3c31a875e8031">is_asgn_or_id</a>(vid)) {
<a name="l01086"></a>01086                                     $$-&gt;nd_aid = vid;
<a name="l01087"></a>01087                                 }
<a name="l01088"></a>01088                             }
<a name="l01089"></a>01089                             <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($2 == <a class="code" href="../../d5/d11/ripper_8c.html#a65277f756450c2f9e7117faf2c01339a">tANDOP</a>) {
<a name="l01090"></a>01090                                 $1-&gt;nd_value = $3;
<a name="l01091"></a>01091                                 $$ = <a class="code" href="../../d3/d09/ripper_8y.html#afb14fd699da452a53d87c5b7d8648cf5">NEW_OP_ASGN_AND</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a8128fe58f108349b4cb7c1a208cb874b">gettable</a>(vid), $1);
<a name="l01092"></a>01092                             }
<a name="l01093"></a>01093                             <span class="keywordflow">else</span> {
<a name="l01094"></a>01094                                 $$ = $1;
<a name="l01095"></a>01095                                 $$-&gt;nd_value = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a8128fe58f108349b4cb7c1a208cb874b">gettable</a>(vid), $2, <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>($3));
<a name="l01096"></a>01096                             }
<a name="l01097"></a>01097                         }
<a name="l01098"></a>01098                         <span class="keywordflow">else</span> {
<a name="l01099"></a>01099                             $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l01100"></a>01100                         }
<a name="l01101"></a>01101                     <span class="comment">/*%</span>
<a name="l01102"></a>01102 <span class="comment">                        $$ = dispatch3(opassign, $1, $2, $3);</span>
<a name="l01103"></a>01103 <span class="comment">                    %*/</span>
<a name="l01104"></a>01104                     }
<a name="l01105"></a>01105                 | primary_value <span class="charliteral">&apos;[&apos;</span> opt_call_args rbracket <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a> command_call
<a name="l01106"></a>01106                     {
<a name="l01107"></a>01107                     <span class="comment">/*%%%*/</span>
<a name="l01108"></a>01108                         NODE *<a class="code" href="../../d3/d09/ripper_8y.html#a8187411843a6284ffb964ef3fb9fcab3">args</a>;
<a name="l01109"></a>01109 
<a name="l01110"></a>01110                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($6);
<a name="l01111"></a>01111                         <span class="keywordflow">if</span> (!$3) $3 = <a class="code" href="../../d3/d09/ripper_8y.html#a3d0f928629afd9bafaf3750a9df5ba86">NEW_ZARRAY</a>();
<a name="l01112"></a>01112                         args = <a class="code" href="../../d5/d11/ripper_8c.html#ae6c095551246969e88aaa53d80b6ddcd">arg_concat</a>($3, $6);
<a name="l01113"></a>01113                         <span class="keywordflow">if</span> ($5 == <a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a>) {
<a name="l01114"></a>01114                             $5 = 0;
<a name="l01115"></a>01115                         }
<a name="l01116"></a>01116                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($5 == <a class="code" href="../../d5/d11/ripper_8c.html#a65277f756450c2f9e7117faf2c01339a">tANDOP</a>) {
<a name="l01117"></a>01117                             $5 = 1;
<a name="l01118"></a>01118                         }
<a name="l01119"></a>01119                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#abb850758a59164edf0d3fbeb64114053">NEW_OP_ASGN1</a>($1, $5, args);
<a name="l01120"></a>01120                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l01121"></a>01121                     <span class="comment">/*%</span>
<a name="l01122"></a>01122 <span class="comment">                        $$ = dispatch2(aref_field, $1, escape_Qundef($3));</span>
<a name="l01123"></a>01123 <span class="comment">                        $$ = dispatch3(opassign, $$, $5, $6);</span>
<a name="l01124"></a>01124 <span class="comment">                    %*/</span>
<a name="l01125"></a>01125                     }
<a name="l01126"></a>01126                 | primary_value <span class="charliteral">&apos;.&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a> command_call
<a name="l01127"></a>01127                     {
<a name="l01128"></a>01128                     <span class="comment">/*%%%*/</span>
<a name="l01129"></a>01129                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($5);
<a name="l01130"></a>01130                         <span class="keywordflow">if</span> ($4 == <a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a>) {
<a name="l01131"></a>01131                             $4 = 0;
<a name="l01132"></a>01132                         }
<a name="l01133"></a>01133                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($4 == <a class="code" href="../../d5/d11/ripper_8c.html#a65277f756450c2f9e7117faf2c01339a">tANDOP</a>) {
<a name="l01134"></a>01134                             $4 = 1;
<a name="l01135"></a>01135                         }
<a name="l01136"></a>01136                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#aca83b7f7328b02ddf48c379136570d36">NEW_OP_ASGN2</a>($1, $3, $4, $5);
<a name="l01137"></a>01137                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l01138"></a>01138                     <span class="comment">/*%</span>
<a name="l01139"></a>01139 <span class="comment">                        $$ = dispatch3(field, $1, ripper_id2sym(&apos;.&apos;), $3);</span>
<a name="l01140"></a>01140 <span class="comment">                        $$ = dispatch3(opassign, $$, $4, $5);</span>
<a name="l01141"></a>01141 <span class="comment">                    %*/</span>
<a name="l01142"></a>01142                     }
<a name="l01143"></a>01143                 | primary_value <span class="charliteral">&apos;.&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a> command_call
<a name="l01144"></a>01144                     {
<a name="l01145"></a>01145                     <span class="comment">/*%%%*/</span>
<a name="l01146"></a>01146                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($5);
<a name="l01147"></a>01147                         <span class="keywordflow">if</span> ($4 == <a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a>) {
<a name="l01148"></a>01148                             $4 = 0;
<a name="l01149"></a>01149                         }
<a name="l01150"></a>01150                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($4 == <a class="code" href="../../d5/d11/ripper_8c.html#a65277f756450c2f9e7117faf2c01339a">tANDOP</a>) {
<a name="l01151"></a>01151                             $4 = 1;
<a name="l01152"></a>01152                         }
<a name="l01153"></a>01153                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#aca83b7f7328b02ddf48c379136570d36">NEW_OP_ASGN2</a>($1, $3, $4, $5);
<a name="l01154"></a>01154                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l01155"></a>01155                     <span class="comment">/*%</span>
<a name="l01156"></a>01156 <span class="comment">                        $$ = dispatch3(field, $1, ripper_id2sym(&apos;.&apos;), $3);</span>
<a name="l01157"></a>01157 <span class="comment">                        $$ = dispatch3(opassign, $$, $4, $5);</span>
<a name="l01158"></a>01158 <span class="comment">                    %*/</span>
<a name="l01159"></a>01159                     }
<a name="l01160"></a>01160                 | primary_value <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a> <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a> command_call
<a name="l01161"></a>01161                     {
<a name="l01162"></a>01162                     <span class="comment">/*%%%*/</span>
<a name="l01163"></a>01163                         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;constant re-assignment&quot;</span>);
<a name="l01164"></a>01164                         $$ = 0;
<a name="l01165"></a>01165                     <span class="comment">/*%</span>
<a name="l01166"></a>01166 <span class="comment">                        $$ = dispatch2(const_path_field, $1, $3);</span>
<a name="l01167"></a>01167 <span class="comment">                        $$ = dispatch3(opassign, $$, $4, $5);</span>
<a name="l01168"></a>01168 <span class="comment">                        $$ = dispatch1(assign_error, $$);</span>
<a name="l01169"></a>01169 <span class="comment">                    %*/</span>
<a name="l01170"></a>01170                     }
<a name="l01171"></a>01171                 | primary_value <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a> <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a> command_call
<a name="l01172"></a>01172                     {
<a name="l01173"></a>01173                     <span class="comment">/*%%%*/</span>
<a name="l01174"></a>01174                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($5);
<a name="l01175"></a>01175                         <span class="keywordflow">if</span> ($4 == <a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a>) {
<a name="l01176"></a>01176                             $4 = 0;
<a name="l01177"></a>01177                         }
<a name="l01178"></a>01178                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($4 == <a class="code" href="../../d5/d11/ripper_8c.html#a65277f756450c2f9e7117faf2c01339a">tANDOP</a>) {
<a name="l01179"></a>01179                             $4 = 1;
<a name="l01180"></a>01180                         }
<a name="l01181"></a>01181                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#aca83b7f7328b02ddf48c379136570d36">NEW_OP_ASGN2</a>($1, $3, $4, $5);
<a name="l01182"></a>01182                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l01183"></a>01183                     <span class="comment">/*%</span>
<a name="l01184"></a>01184 <span class="comment">                        $$ = dispatch3(field, $1, ripper_intern(&quot;::&quot;), $3);</span>
<a name="l01185"></a>01185 <span class="comment">                        $$ = dispatch3(opassign, $$, $4, $5);</span>
<a name="l01186"></a>01186 <span class="comment">                    %*/</span>
<a name="l01187"></a>01187                     }
<a name="l01188"></a>01188                 | backref <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a> command_call
<a name="l01189"></a>01189                     {
<a name="l01190"></a>01190                     <span class="comment">/*%%%*/</span>
<a name="l01191"></a>01191                         <a class="code" href="../../d5/d11/ripper_8c.html#afb08645c7019753dc3e43080a8ee63fd">rb_backref_error</a>($1);
<a name="l01192"></a>01192                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l01193"></a>01193                     <span class="comment">/*%</span>
<a name="l01194"></a>01194 <span class="comment">                        $$ = dispatch2(assign, dispatch1(var_field, $1), $3);</span>
<a name="l01195"></a>01195 <span class="comment">                        $$ = dispatch1(assign_error, $$);</span>
<a name="l01196"></a>01196 <span class="comment">                    %*/</span>
<a name="l01197"></a>01197                     }
<a name="l01198"></a>01198                 | <a class="code" href="../../d3/d09/ripper_8y.html#a73c3a889aca6f2648374f6f8331d13ea">lhs</a> <span class="charliteral">&apos;=&apos;</span> mrhs
<a name="l01199"></a>01199                     {
<a name="l01200"></a>01200                     <span class="comment">/*%%%*/</span>
<a name="l01201"></a>01201                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($3);
<a name="l01202"></a>01202                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a24425bcc46577a37c70057c22fe05b6f">node_assign</a>($1, $3);
<a name="l01203"></a>01203                     <span class="comment">/*%</span>
<a name="l01204"></a>01204 <span class="comment">                        $$ = dispatch2(assign, $1, $3);</span>
<a name="l01205"></a>01205 <span class="comment">                    %*/</span>
<a name="l01206"></a>01206                     }
<a name="l01207"></a>01207                 | mlhs <span class="charliteral">&apos;=&apos;</span> arg_value
<a name="l01208"></a>01208                     {
<a name="l01209"></a>01209                     <span class="comment">/*%%%*/</span>
<a name="l01210"></a>01210                         $1-&gt;nd_value = $3;
<a name="l01211"></a>01211                         $$ = $1;
<a name="l01212"></a>01212                     <span class="comment">/*%</span>
<a name="l01213"></a>01213 <span class="comment">                        $$ = dispatch2(massign, $1, $3);</span>
<a name="l01214"></a>01214 <span class="comment">                    %*/</span>
<a name="l01215"></a>01215                     }
<a name="l01216"></a>01216                 | mlhs <span class="charliteral">&apos;=&apos;</span> mrhs
<a name="l01217"></a>01217                     {
<a name="l01218"></a>01218                     <span class="comment">/*%%%*/</span>
<a name="l01219"></a>01219                         $1-&gt;nd_value = $3;
<a name="l01220"></a>01220                         $$ = $1;
<a name="l01221"></a>01221                     <span class="comment">/*%</span>
<a name="l01222"></a>01222 <span class="comment">                        $$ = dispatch2(massign, $1, $3);</span>
<a name="l01223"></a>01223 <span class="comment">                    %*/</span>
<a name="l01224"></a>01224                     }
<a name="l01225"></a>01225                 | expr
<a name="l01226"></a>01226                 ;
<a name="l01227"></a>01227 
<a name="l01228"></a>01228 command_asgn    : <a class="code" href="../../d3/d09/ripper_8y.html#a73c3a889aca6f2648374f6f8331d13ea">lhs</a> <span class="charliteral">&apos;=&apos;</span> command_call
<a name="l01229"></a>01229                     {
<a name="l01230"></a>01230                     <span class="comment">/*%%%*/</span>
<a name="l01231"></a>01231                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($3);
<a name="l01232"></a>01232                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a24425bcc46577a37c70057c22fe05b6f">node_assign</a>($1, $3);
<a name="l01233"></a>01233                     <span class="comment">/*%</span>
<a name="l01234"></a>01234 <span class="comment">                        $$ = dispatch2(assign, $1, $3);</span>
<a name="l01235"></a>01235 <span class="comment">                    %*/</span>
<a name="l01236"></a>01236                     }
<a name="l01237"></a>01237                 | <a class="code" href="../../d3/d09/ripper_8y.html#a73c3a889aca6f2648374f6f8331d13ea">lhs</a> <span class="charliteral">&apos;=&apos;</span> command_asgn
<a name="l01238"></a>01238                     {
<a name="l01239"></a>01239                     <span class="comment">/*%%%*/</span>
<a name="l01240"></a>01240                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($3);
<a name="l01241"></a>01241                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a24425bcc46577a37c70057c22fe05b6f">node_assign</a>($1, $3);
<a name="l01242"></a>01242                     <span class="comment">/*%</span>
<a name="l01243"></a>01243 <span class="comment">                        $$ = dispatch2(assign, $1, $3);</span>
<a name="l01244"></a>01244 <span class="comment">                    %*/</span>
<a name="l01245"></a>01245                     }
<a name="l01246"></a>01246                 ;
<a name="l01247"></a>01247 
<a name="l01248"></a>01248 
<a name="l01249"></a>01249 expr            : command_call
<a name="l01250"></a>01250                 | expr <a class="code" href="../../d5/d11/ripper_8c.html#a4b2a7871e12bd91d4506c5a3904daee9">keyword_and</a> expr
<a name="l01251"></a>01251                     {
<a name="l01252"></a>01252                     <span class="comment">/*%%%*/</span>
<a name="l01253"></a>01253                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a689edf560d6bc1a140826c56d48b3942">logop</a>(NODE_AND, $1, $3);
<a name="l01254"></a>01254                     <span class="comment">/*%</span>
<a name="l01255"></a>01255 <span class="comment">                        $$ = dispatch3(binary, $1, ripper_intern(&quot;and&quot;), $3);</span>
<a name="l01256"></a>01256 <span class="comment">                    %*/</span>
<a name="l01257"></a>01257                     }
<a name="l01258"></a>01258                 | expr <a class="code" href="../../d5/d11/ripper_8c.html#a0a3412db66a7bfe6e86a085ca4213f0a">keyword_or</a> expr
<a name="l01259"></a>01259                     {
<a name="l01260"></a>01260                     <span class="comment">/*%%%*/</span>
<a name="l01261"></a>01261                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a689edf560d6bc1a140826c56d48b3942">logop</a>(NODE_OR, $1, $3);
<a name="l01262"></a>01262                     <span class="comment">/*%</span>
<a name="l01263"></a>01263 <span class="comment">                        $$ = dispatch3(binary, $1, ripper_intern(&quot;or&quot;), $3);</span>
<a name="l01264"></a>01264 <span class="comment">                    %*/</span>
<a name="l01265"></a>01265                     }
<a name="l01266"></a>01266                 | <a class="code" href="../../d5/d11/ripper_8c.html#aa7618608a8ca97b99b9b2760935869eb">keyword_not</a> opt_nl expr
<a name="l01267"></a>01267                     {
<a name="l01268"></a>01268                     <span class="comment">/*%%%*/</span>
<a name="l01269"></a>01269                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#abe72bdc22477862fab6b777a9e921c7b">call_uni_op</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a>($3), <span class="charliteral">&apos;!&apos;</span>);
<a name="l01270"></a>01270                     <span class="comment">/*%</span>
<a name="l01271"></a>01271 <span class="comment">                        $$ = dispatch2(unary, ripper_intern(&quot;not&quot;), $3);</span>
<a name="l01272"></a>01272 <span class="comment">                    %*/</span>
<a name="l01273"></a>01273                     }
<a name="l01274"></a>01274                 | <span class="charliteral">&apos;!&apos;</span> command_call
<a name="l01275"></a>01275                     {
<a name="l01276"></a>01276                     <span class="comment">/*%%%*/</span>
<a name="l01277"></a>01277                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#abe72bdc22477862fab6b777a9e921c7b">call_uni_op</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a>($2), <span class="charliteral">&apos;!&apos;</span>);
<a name="l01278"></a>01278                     <span class="comment">/*%</span>
<a name="l01279"></a>01279 <span class="comment">                        $$ = dispatch2(unary, ripper_id2sym(&apos;!&apos;), $2);</span>
<a name="l01280"></a>01280 <span class="comment">                    %*/</span>
<a name="l01281"></a>01281                     }
<a name="l01282"></a>01282                 | arg
<a name="l01283"></a>01283                 ;
<a name="l01284"></a>01284 
<a name="l01285"></a>01285 expr_value      : expr
<a name="l01286"></a>01286                     {
<a name="l01287"></a>01287                     <span class="comment">/*%%%*/</span>
<a name="l01288"></a>01288                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($1);
<a name="l01289"></a>01289                         $$ = $1;
<a name="l01290"></a>01290                         <span class="keywordflow">if</span> (!$$) $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a969f4dd65ae53a2ec90dbbb0420af61e">NEW_NIL</a>();
<a name="l01291"></a>01291                     <span class="comment">/*%</span>
<a name="l01292"></a>01292 <span class="comment">                        $$ = $1;</span>
<a name="l01293"></a>01293 <span class="comment">                    %*/</span>
<a name="l01294"></a>01294                     }
<a name="l01295"></a>01295                 ;
<a name="l01296"></a>01296 
<a name="l01297"></a>01297 command_call    : command
<a name="l01298"></a>01298                 | block_command
<a name="l01299"></a>01299                 ;
<a name="l01300"></a>01300 
<a name="l01301"></a>01301 block_command   : block_call
<a name="l01302"></a>01302                 | block_call <span class="charliteral">&apos;.&apos;</span> operation2 command_args
<a name="l01303"></a>01303                     {
<a name="l01304"></a>01304                     <span class="comment">/*%%%*/</span>
<a name="l01305"></a>01305                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>($1, $3, $4);
<a name="l01306"></a>01306                     <span class="comment">/*%</span>
<a name="l01307"></a>01307 <span class="comment">                        $$ = dispatch3(call, $1, ripper_id2sym(&apos;.&apos;), $3);</span>
<a name="l01308"></a>01308 <span class="comment">                        $$ = method_arg($$, $4);</span>
<a name="l01309"></a>01309 <span class="comment">                    %*/</span>
<a name="l01310"></a>01310                     }
<a name="l01311"></a>01311                 | block_call <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a> operation2 command_args
<a name="l01312"></a>01312                     {
<a name="l01313"></a>01313                     <span class="comment">/*%%%*/</span>
<a name="l01314"></a>01314                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>($1, $3, $4);
<a name="l01315"></a>01315                     <span class="comment">/*%</span>
<a name="l01316"></a>01316 <span class="comment">                        $$ = dispatch3(call, $1, ripper_intern(&quot;::&quot;), $3);</span>
<a name="l01317"></a>01317 <span class="comment">                        $$ = method_arg($$, $4);</span>
<a name="l01318"></a>01318 <span class="comment">                    %*/</span>
<a name="l01319"></a>01319                     }
<a name="l01320"></a>01320                 ;
<a name="l01321"></a>01321 
<a name="l01322"></a>01322 cmd_brace_block : <a class="code" href="../../d5/d11/ripper_8c.html#a7f3819cfc3596eb9af8ff1a6276f6eea">tLBRACE_ARG</a>
<a name="l01323"></a>01323                     {
<a name="l01324"></a>01324                         $&lt;vars&gt;1 = <a class="code" href="../../d5/d11/ripper_8c.html#ab76822e9189a6d2d8bb806c34f9ac6b9">dyna_push</a>();
<a name="l01325"></a>01325                     <span class="comment">/*%%%*/</span>
<a name="l01326"></a>01326                         $&lt;num&gt;$ = <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>;
<a name="l01327"></a>01327                     <span class="comment">/*%</span>
<a name="l01328"></a>01328 <span class="comment">                    %*/</span>
<a name="l01329"></a>01329                     }
<a name="l01330"></a>01330                   opt_block_param
<a name="l01331"></a>01331                   compstmt
<a name="l01332"></a>01332                   <span class="charliteral">&apos;}&apos;</span>
<a name="l01333"></a>01333                     {
<a name="l01334"></a>01334                     <span class="comment">/*%%%*/</span>
<a name="l01335"></a>01335                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a60cef03d789abc5bf6c5a6c8ab65428c">NEW_ITER</a>($3,$4);
<a name="l01336"></a>01336                         <a class="code" href="../../d3/d09/ripper_8y.html#ac821dfc4ca1d4673db9669205be97f85">nd_set_line</a>($$, $&lt;num&gt;2);
<a name="l01337"></a>01337                     <span class="comment">/*%</span>
<a name="l01338"></a>01338 <span class="comment">                        $$ = dispatch2(brace_block, escape_Qundef($3), $4);</span>
<a name="l01339"></a>01339 <span class="comment">                    %*/</span>
<a name="l01340"></a>01340                         <a class="code" href="../../d5/d11/ripper_8c.html#abfd779fd3800c7f33c9036ae80612115">dyna_pop</a>($&lt;vars&gt;1);
<a name="l01341"></a>01341                     }
<a name="l01342"></a>01342                 ;
<a name="l01343"></a>01343 
<a name="l01344"></a>01344 command         : operation command_args       %prec <a class="code" href="../../d5/d11/ripper_8c.html#a0e23c1110646d20ce82b8cd263941054">tLOWEST</a>
<a name="l01345"></a>01345                     {
<a name="l01346"></a>01346                     <span class="comment">/*%%%*/</span>
<a name="l01347"></a>01347                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#ab2c9a6c46cf2371d4268127604a2997c">NEW_FCALL</a>($1, $2);
<a name="l01348"></a>01348                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $2);
<a name="l01349"></a>01349                     <span class="comment">/*%</span>
<a name="l01350"></a>01350 <span class="comment">                        $$ = dispatch2(command, $1, $2);</span>
<a name="l01351"></a>01351 <span class="comment">                    %*/</span>
<a name="l01352"></a>01352                     }
<a name="l01353"></a>01353                 | operation command_args cmd_brace_block
<a name="l01354"></a>01354                     {
<a name="l01355"></a>01355                     <span class="comment">/*%%%*/</span>
<a name="l01356"></a>01356                         <a class="code" href="../../d5/d11/ripper_8c.html#a437c8ac82de682de2075a396512f16e0">block_dup_check</a>($2,$3);
<a name="l01357"></a>01357                         $3-&gt;nd_iter = <a class="code" href="../../d3/d09/ripper_8y.html#ab2c9a6c46cf2371d4268127604a2997c">NEW_FCALL</a>($1, $2);
<a name="l01358"></a>01358                         $$ = $3;
<a name="l01359"></a>01359                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $2);
<a name="l01360"></a>01360                     <span class="comment">/*%</span>
<a name="l01361"></a>01361 <span class="comment">                        $$ = dispatch2(command, $1, $2);</span>
<a name="l01362"></a>01362 <span class="comment">                        $$ = method_add_block($$, $3);</span>
<a name="l01363"></a>01363 <span class="comment">                    %*/</span>
<a name="l01364"></a>01364                     }
<a name="l01365"></a>01365                 | primary_value <span class="charliteral">&apos;.&apos;</span> operation2 command_args     %prec <a class="code" href="../../d5/d11/ripper_8c.html#a0e23c1110646d20ce82b8cd263941054">tLOWEST</a>
<a name="l01366"></a>01366                     {
<a name="l01367"></a>01367                     <span class="comment">/*%%%*/</span>
<a name="l01368"></a>01368                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>($1, $3, $4);
<a name="l01369"></a>01369                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l01370"></a>01370                     <span class="comment">/*%</span>
<a name="l01371"></a>01371 <span class="comment">                        $$ = dispatch4(command_call, $1, ripper_id2sym(&apos;.&apos;), $3, $4);</span>
<a name="l01372"></a>01372 <span class="comment">                    %*/</span>
<a name="l01373"></a>01373                     }
<a name="l01374"></a>01374                 | primary_value <span class="charliteral">&apos;.&apos;</span> operation2 command_args cmd_brace_block
<a name="l01375"></a>01375                     {
<a name="l01376"></a>01376                     <span class="comment">/*%%%*/</span>
<a name="l01377"></a>01377                         <a class="code" href="../../d5/d11/ripper_8c.html#a437c8ac82de682de2075a396512f16e0">block_dup_check</a>($4,$5);
<a name="l01378"></a>01378                         $5-&gt;nd_iter = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>($1, $3, $4);
<a name="l01379"></a>01379                         $$ = $5;
<a name="l01380"></a>01380                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l01381"></a>01381                     <span class="comment">/*%</span>
<a name="l01382"></a>01382 <span class="comment">                        $$ = dispatch4(command_call, $1, ripper_id2sym(&apos;.&apos;), $3, $4);</span>
<a name="l01383"></a>01383 <span class="comment">                        $$ = method_add_block($$, $5);</span>
<a name="l01384"></a>01384 <span class="comment">                    %*/</span>
<a name="l01385"></a>01385                    }
<a name="l01386"></a>01386                 | primary_value <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a> operation2 command_args %prec <a class="code" href="../../d5/d11/ripper_8c.html#a0e23c1110646d20ce82b8cd263941054">tLOWEST</a>
<a name="l01387"></a>01387                     {
<a name="l01388"></a>01388                     <span class="comment">/*%%%*/</span>
<a name="l01389"></a>01389                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>($1, $3, $4);
<a name="l01390"></a>01390                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l01391"></a>01391                     <span class="comment">/*%</span>
<a name="l01392"></a>01392 <span class="comment">                        $$ = dispatch4(command_call, $1, ripper_intern(&quot;::&quot;), $3, $4);</span>
<a name="l01393"></a>01393 <span class="comment">                    %*/</span>
<a name="l01394"></a>01394                     }
<a name="l01395"></a>01395                 | primary_value <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a> operation2 command_args cmd_brace_block
<a name="l01396"></a>01396                     {
<a name="l01397"></a>01397                     <span class="comment">/*%%%*/</span>
<a name="l01398"></a>01398                         <a class="code" href="../../d5/d11/ripper_8c.html#a437c8ac82de682de2075a396512f16e0">block_dup_check</a>($4,$5);
<a name="l01399"></a>01399                         $5-&gt;nd_iter = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>($1, $3, $4);
<a name="l01400"></a>01400                         $$ = $5;
<a name="l01401"></a>01401                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l01402"></a>01402                     <span class="comment">/*%</span>
<a name="l01403"></a>01403 <span class="comment">                        $$ = dispatch4(command_call, $1, ripper_intern(&quot;::&quot;), $3, $4);</span>
<a name="l01404"></a>01404 <span class="comment">                        $$ = method_add_block($$, $5);</span>
<a name="l01405"></a>01405 <span class="comment">                    %*/</span>
<a name="l01406"></a>01406                    }
<a name="l01407"></a>01407                 | <a class="code" href="../../d5/d11/ripper_8c.html#aeb6f2f7f0aff1706e3fcb6b1777ee784">keyword_super</a> command_args
<a name="l01408"></a>01408                     {
<a name="l01409"></a>01409                     <span class="comment">/*%%%*/</span>
<a name="l01410"></a>01410                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a8d18610c4e6d95d2792d4d8416922c7e">NEW_SUPER</a>($2);
<a name="l01411"></a>01411                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $2);
<a name="l01412"></a>01412                     <span class="comment">/*%</span>
<a name="l01413"></a>01413 <span class="comment">                        $$ = dispatch1(super, $2);</span>
<a name="l01414"></a>01414 <span class="comment">                    %*/</span>
<a name="l01415"></a>01415                     }
<a name="l01416"></a>01416                 | <a class="code" href="../../d5/d11/ripper_8c.html#a23d86621a145239a20c9496993a87e1a">keyword_yield</a> command_args
<a name="l01417"></a>01417                     {
<a name="l01418"></a>01418                     <span class="comment">/*%%%*/</span>
<a name="l01419"></a>01419                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ab68ad814e43aeadb75b46055678657b7">new_yield</a>($2);
<a name="l01420"></a>01420                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $2);
<a name="l01421"></a>01421                     <span class="comment">/*%</span>
<a name="l01422"></a>01422 <span class="comment">                        $$ = dispatch1(yield, $2);</span>
<a name="l01423"></a>01423 <span class="comment">                    %*/</span>
<a name="l01424"></a>01424                     }
<a name="l01425"></a>01425                 | <a class="code" href="../../d5/d11/ripper_8c.html#ab2da8a02f53da70f08f59bfcefb370d0">keyword_return</a> call_args
<a name="l01426"></a>01426                     {
<a name="l01427"></a>01427                     <span class="comment">/*%%%*/</span>
<a name="l01428"></a>01428                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a8248068d560005b8d3311ae3bd74c5ac">NEW_RETURN</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ad0b05fcba6be8f90d0d2d99bb9ec0b4c">ret_args</a>($2));
<a name="l01429"></a>01429                     <span class="comment">/*%</span>
<a name="l01430"></a>01430 <span class="comment">                        $$ = dispatch1(return, $2);</span>
<a name="l01431"></a>01431 <span class="comment">                    %*/</span>
<a name="l01432"></a>01432                     }
<a name="l01433"></a>01433                 | <a class="code" href="../../d5/d11/ripper_8c.html#a3df7a0f57555b3aa2a155393d6b1c4dc">keyword_break</a> call_args
<a name="l01434"></a>01434                     {
<a name="l01435"></a>01435                     <span class="comment">/*%%%*/</span>
<a name="l01436"></a>01436                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a075c02a442f1209b215efc4201c04552">NEW_BREAK</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ad0b05fcba6be8f90d0d2d99bb9ec0b4c">ret_args</a>($2));
<a name="l01437"></a>01437                     <span class="comment">/*%</span>
<a name="l01438"></a>01438 <span class="comment">                        $$ = dispatch1(break, $2);</span>
<a name="l01439"></a>01439 <span class="comment">                    %*/</span>
<a name="l01440"></a>01440                     }
<a name="l01441"></a>01441                 | <a class="code" href="../../d5/d11/ripper_8c.html#a6f1a9cbe32cbd55a1e29b0d066bc9b09">keyword_next</a> call_args
<a name="l01442"></a>01442                     {
<a name="l01443"></a>01443                     <span class="comment">/*%%%*/</span>
<a name="l01444"></a>01444                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a58f7f093662561660bdd3c5aa492b329">NEW_NEXT</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ad0b05fcba6be8f90d0d2d99bb9ec0b4c">ret_args</a>($2));
<a name="l01445"></a>01445                     <span class="comment">/*%</span>
<a name="l01446"></a>01446 <span class="comment">                        $$ = dispatch1(next, $2);</span>
<a name="l01447"></a>01447 <span class="comment">                    %*/</span>
<a name="l01448"></a>01448                     }
<a name="l01449"></a>01449                 ;
<a name="l01450"></a>01450 
<a name="l01451"></a>01451 mlhs            : <a class="code" href="../../d3/d09/ripper_8y.html#aab1e7b1c0eb4fb49ffdec0f948571836">mlhs_basic</a>
<a name="l01452"></a>01452                 | <a class="code" href="../../d5/d11/ripper_8c.html#a8d562a1eeeebb179b8571743d06dd937">tLPAREN</a> <a class="code" href="../../d3/d09/ripper_8y.html#a68091c9cc26f9c90b4723c0488f5f17e">mlhs_inner</a> rparen
<a name="l01453"></a>01453                     {
<a name="l01454"></a>01454                     <span class="comment">/*%%%*/</span>
<a name="l01455"></a>01455                         $$ = $2;
<a name="l01456"></a>01456                     <span class="comment">/*%</span>
<a name="l01457"></a>01457 <span class="comment">                        $$ = dispatch1(mlhs_paren, $2);</span>
<a name="l01458"></a>01458 <span class="comment">                    %*/</span>
<a name="l01459"></a>01459                     }
<a name="l01460"></a>01460                 ;
<a name="l01461"></a>01461 
<a name="l01462"></a>01462 <a class="code" href="../../d3/d09/ripper_8y.html#a68091c9cc26f9c90b4723c0488f5f17e">mlhs_inner</a>      : <a class="code" href="../../d3/d09/ripper_8y.html#aab1e7b1c0eb4fb49ffdec0f948571836">mlhs_basic</a>
<a name="l01463"></a>01463                 | <a class="code" href="../../d5/d11/ripper_8c.html#a8d562a1eeeebb179b8571743d06dd937">tLPAREN</a> <a class="code" href="../../d3/d09/ripper_8y.html#a68091c9cc26f9c90b4723c0488f5f17e">mlhs_inner</a> rparen
<a name="l01464"></a>01464                     {
<a name="l01465"></a>01465                     <span class="comment">/*%%%*/</span>
<a name="l01466"></a>01466                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>($2), 0);
<a name="l01467"></a>01467                     <span class="comment">/*%</span>
<a name="l01468"></a>01468 <span class="comment">                        $$ = dispatch1(mlhs_paren, $2);</span>
<a name="l01469"></a>01469 <span class="comment">                    %*/</span>
<a name="l01470"></a>01470                     }
<a name="l01471"></a>01471                 ;
<a name="l01472"></a>01472 
<a name="l01473"></a>01473 <a class="code" href="../../d3/d09/ripper_8y.html#aab1e7b1c0eb4fb49ffdec0f948571836">mlhs_basic</a>      : <a class="code" href="../../d3/d09/ripper_8y.html#ab5e34166701b27bbc94e866b2e9b3118">mlhs_head</a>
<a name="l01474"></a>01474                     {
<a name="l01475"></a>01475                     <span class="comment">/*%%%*/</span>
<a name="l01476"></a>01476                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>($1, 0);
<a name="l01477"></a>01477                     <span class="comment">/*%</span>
<a name="l01478"></a>01478 <span class="comment">                        $$ = $1;</span>
<a name="l01479"></a>01479 <span class="comment">                    %*/</span>
<a name="l01480"></a>01480                     }
<a name="l01481"></a>01481                 | <a class="code" href="../../d3/d09/ripper_8y.html#ab5e34166701b27bbc94e866b2e9b3118">mlhs_head</a> mlhs_item
<a name="l01482"></a>01482                     {
<a name="l01483"></a>01483                     <span class="comment">/*%%%*/</span>
<a name="l01484"></a>01484                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>($1,$2), 0);
<a name="l01485"></a>01485                     <span class="comment">/*%</span>
<a name="l01486"></a>01486 <span class="comment">                        $$ = mlhs_add($1, $2);</span>
<a name="l01487"></a>01487 <span class="comment">                    %*/</span>
<a name="l01488"></a>01488                     }
<a name="l01489"></a>01489                 | <a class="code" href="../../d3/d09/ripper_8y.html#ab5e34166701b27bbc94e866b2e9b3118">mlhs_head</a> <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a> mlhs_node
<a name="l01490"></a>01490                     {
<a name="l01491"></a>01491                     <span class="comment">/*%%%*/</span>
<a name="l01492"></a>01492                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>($1, $3);
<a name="l01493"></a>01493                     <span class="comment">/*%</span>
<a name="l01494"></a>01494 <span class="comment">                        $$ = mlhs_add_star($1, $3);</span>
<a name="l01495"></a>01495 <span class="comment">                    %*/</span>
<a name="l01496"></a>01496                     }
<a name="l01497"></a>01497                 | <a class="code" href="../../d3/d09/ripper_8y.html#ab5e34166701b27bbc94e866b2e9b3118">mlhs_head</a> <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a> mlhs_node <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d3/d09/ripper_8y.html#a0585a33a6fda5fcd5afdd353522e38b6">mlhs_post</a>
<a name="l01498"></a>01498                     {
<a name="l01499"></a>01499                     <span class="comment">/*%%%*/</span>
<a name="l01500"></a>01500                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>($1, <a class="code" href="../../d3/d09/ripper_8y.html#ab003942ed14f77fbd6933dafaa16e956">NEW_POSTARG</a>($3,$5));
<a name="l01501"></a>01501                     <span class="comment">/*%</span>
<a name="l01502"></a>01502 <span class="comment">                        $1 = mlhs_add_star($1, $3);</span>
<a name="l01503"></a>01503 <span class="comment">                        $$ = mlhs_add($1, $5);</span>
<a name="l01504"></a>01504 <span class="comment">                    %*/</span>
<a name="l01505"></a>01505                     }
<a name="l01506"></a>01506                 | <a class="code" href="../../d3/d09/ripper_8y.html#ab5e34166701b27bbc94e866b2e9b3118">mlhs_head</a> <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a>
<a name="l01507"></a>01507                     {
<a name="l01508"></a>01508                     <span class="comment">/*%%%*/</span>
<a name="l01509"></a>01509                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>($1, -1);
<a name="l01510"></a>01510                     <span class="comment">/*%</span>
<a name="l01511"></a>01511 <span class="comment">                        $$ = mlhs_add_star($1, Qnil);</span>
<a name="l01512"></a>01512 <span class="comment">                    %*/</span>
<a name="l01513"></a>01513                     }
<a name="l01514"></a>01514                 | <a class="code" href="../../d3/d09/ripper_8y.html#ab5e34166701b27bbc94e866b2e9b3118">mlhs_head</a> <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a> <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d3/d09/ripper_8y.html#a0585a33a6fda5fcd5afdd353522e38b6">mlhs_post</a>
<a name="l01515"></a>01515                     {
<a name="l01516"></a>01516                     <span class="comment">/*%%%*/</span>
<a name="l01517"></a>01517                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>($1, <a class="code" href="../../d3/d09/ripper_8y.html#ab003942ed14f77fbd6933dafaa16e956">NEW_POSTARG</a>(-1, $4));
<a name="l01518"></a>01518                     <span class="comment">/*%</span>
<a name="l01519"></a>01519 <span class="comment">                        $1 = mlhs_add_star($1, Qnil);</span>
<a name="l01520"></a>01520 <span class="comment">                        $$ = mlhs_add($1, $4);</span>
<a name="l01521"></a>01521 <span class="comment">                    %*/</span>
<a name="l01522"></a>01522                     }
<a name="l01523"></a>01523                 | <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a> mlhs_node
<a name="l01524"></a>01524                     {
<a name="l01525"></a>01525                     <span class="comment">/*%%%*/</span>
<a name="l01526"></a>01526                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>(0, $2);
<a name="l01527"></a>01527                     <span class="comment">/*%</span>
<a name="l01528"></a>01528 <span class="comment">                        $$ = mlhs_add_star(mlhs_new(), $2);</span>
<a name="l01529"></a>01529 <span class="comment">                    %*/</span>
<a name="l01530"></a>01530                     }
<a name="l01531"></a>01531                 | <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a> mlhs_node <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d3/d09/ripper_8y.html#a0585a33a6fda5fcd5afdd353522e38b6">mlhs_post</a>
<a name="l01532"></a>01532                     {
<a name="l01533"></a>01533                     <span class="comment">/*%%%*/</span>
<a name="l01534"></a>01534                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>(0, <a class="code" href="../../d3/d09/ripper_8y.html#ab003942ed14f77fbd6933dafaa16e956">NEW_POSTARG</a>($2,$4));
<a name="l01535"></a>01535                     <span class="comment">/*%</span>
<a name="l01536"></a>01536 <span class="comment">                        $2 = mlhs_add_star(mlhs_new(), $2);</span>
<a name="l01537"></a>01537 <span class="comment">                        $$ = mlhs_add($2, $4);</span>
<a name="l01538"></a>01538 <span class="comment">                    %*/</span>
<a name="l01539"></a>01539                     }
<a name="l01540"></a>01540                 | <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a>
<a name="l01541"></a>01541                     {
<a name="l01542"></a>01542                     <span class="comment">/*%%%*/</span>
<a name="l01543"></a>01543                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>(0, -1);
<a name="l01544"></a>01544                     <span class="comment">/*%</span>
<a name="l01545"></a>01545 <span class="comment">                        $$ = mlhs_add_star(mlhs_new(), Qnil);</span>
<a name="l01546"></a>01546 <span class="comment">                    %*/</span>
<a name="l01547"></a>01547                     }
<a name="l01548"></a>01548                 | <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a> <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d3/d09/ripper_8y.html#a0585a33a6fda5fcd5afdd353522e38b6">mlhs_post</a>
<a name="l01549"></a>01549                     {
<a name="l01550"></a>01550                     <span class="comment">/*%%%*/</span>
<a name="l01551"></a>01551                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>(0, <a class="code" href="../../d3/d09/ripper_8y.html#ab003942ed14f77fbd6933dafaa16e956">NEW_POSTARG</a>(-1, $3));
<a name="l01552"></a>01552                     <span class="comment">/*%</span>
<a name="l01553"></a>01553 <span class="comment">                        $$ = mlhs_add_star(mlhs_new(), Qnil);</span>
<a name="l01554"></a>01554 <span class="comment">                        $$ = mlhs_add($$, $3);</span>
<a name="l01555"></a>01555 <span class="comment">                    %*/</span>
<a name="l01556"></a>01556                     }
<a name="l01557"></a>01557                 ;
<a name="l01558"></a>01558 
<a name="l01559"></a>01559 mlhs_item       : mlhs_node
<a name="l01560"></a>01560                 | <a class="code" href="../../d5/d11/ripper_8c.html#a8d562a1eeeebb179b8571743d06dd937">tLPAREN</a> <a class="code" href="../../d3/d09/ripper_8y.html#a68091c9cc26f9c90b4723c0488f5f17e">mlhs_inner</a> rparen
<a name="l01561"></a>01561                     {
<a name="l01562"></a>01562                     <span class="comment">/*%%%*/</span>
<a name="l01563"></a>01563                         $$ = $2;
<a name="l01564"></a>01564                     <span class="comment">/*%</span>
<a name="l01565"></a>01565 <span class="comment">                        $$ = dispatch1(mlhs_paren, $2);</span>
<a name="l01566"></a>01566 <span class="comment">                    %*/</span>
<a name="l01567"></a>01567                     }
<a name="l01568"></a>01568                 ;
<a name="l01569"></a>01569 
<a name="l01570"></a>01570 <a class="code" href="../../d3/d09/ripper_8y.html#ab5e34166701b27bbc94e866b2e9b3118">mlhs_head</a>       : mlhs_item <span class="charliteral">&apos;,&apos;</span>
<a name="l01571"></a>01571                     {
<a name="l01572"></a>01572                     <span class="comment">/*%%%*/</span>
<a name="l01573"></a>01573                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>($1);
<a name="l01574"></a>01574                     <span class="comment">/*%</span>
<a name="l01575"></a>01575 <span class="comment">                        $$ = mlhs_add(mlhs_new(), $1);</span>
<a name="l01576"></a>01576 <span class="comment">                    %*/</span>
<a name="l01577"></a>01577                     }
<a name="l01578"></a>01578                 | <a class="code" href="../../d3/d09/ripper_8y.html#ab5e34166701b27bbc94e866b2e9b3118">mlhs_head</a> mlhs_item <span class="charliteral">&apos;,&apos;</span>
<a name="l01579"></a>01579                     {
<a name="l01580"></a>01580                     <span class="comment">/*%%%*/</span>
<a name="l01581"></a>01581                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>($1, $2);
<a name="l01582"></a>01582                     <span class="comment">/*%</span>
<a name="l01583"></a>01583 <span class="comment">                        $$ = mlhs_add($1, $2);</span>
<a name="l01584"></a>01584 <span class="comment">                    %*/</span>
<a name="l01585"></a>01585                     }
<a name="l01586"></a>01586                 ;
<a name="l01587"></a>01587 
<a name="l01588"></a>01588 <a class="code" href="../../d3/d09/ripper_8y.html#a0585a33a6fda5fcd5afdd353522e38b6">mlhs_post</a>       : mlhs_item
<a name="l01589"></a>01589                     {
<a name="l01590"></a>01590                     <span class="comment">/*%%%*/</span>
<a name="l01591"></a>01591                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>($1);
<a name="l01592"></a>01592                     <span class="comment">/*%</span>
<a name="l01593"></a>01593 <span class="comment">                        $$ = mlhs_add(mlhs_new(), $1);</span>
<a name="l01594"></a>01594 <span class="comment">                    %*/</span>
<a name="l01595"></a>01595                     }
<a name="l01596"></a>01596                 | <a class="code" href="../../d3/d09/ripper_8y.html#a0585a33a6fda5fcd5afdd353522e38b6">mlhs_post</a> <span class="charliteral">&apos;,&apos;</span> mlhs_item
<a name="l01597"></a>01597                     {
<a name="l01598"></a>01598                     <span class="comment">/*%%%*/</span>
<a name="l01599"></a>01599                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>($1, $3);
<a name="l01600"></a>01600                     <span class="comment">/*%</span>
<a name="l01601"></a>01601 <span class="comment">                        $$ = mlhs_add($1, $3);</span>
<a name="l01602"></a>01602 <span class="comment">                    %*/</span>
<a name="l01603"></a>01603                     }
<a name="l01604"></a>01604                 ;
<a name="l01605"></a>01605 
<a name="l01606"></a>01606 mlhs_node       : user_variable
<a name="l01607"></a>01607                     {
<a name="l01608"></a>01608                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a5cb1df5a7a381c93bd1b53c64194c804">assignable</a>($1, 0);
<a name="l01609"></a>01609                     }
<a name="l01610"></a>01610                 | keyword_variable
<a name="l01611"></a>01611                     {
<a name="l01612"></a>01612                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a5cb1df5a7a381c93bd1b53c64194c804">assignable</a>($1, 0);
<a name="l01613"></a>01613                     }
<a name="l01614"></a>01614                 | primary_value <span class="charliteral">&apos;[&apos;</span> opt_call_args rbracket
<a name="l01615"></a>01615                     {
<a name="l01616"></a>01616                     <span class="comment">/*%%%*/</span>
<a name="l01617"></a>01617                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a04dc959318a4396bf4b904455ef1a634">aryset</a>($1, $3);
<a name="l01618"></a>01618                     <span class="comment">/*%</span>
<a name="l01619"></a>01619 <span class="comment">                        $$ = dispatch2(aref_field, $1, escape_Qundef($3));</span>
<a name="l01620"></a>01620 <span class="comment">                    %*/</span>
<a name="l01621"></a>01621                     }
<a name="l01622"></a>01622                 | primary_value <span class="charliteral">&apos;.&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a>
<a name="l01623"></a>01623                     {
<a name="l01624"></a>01624                     <span class="comment">/*%%%*/</span>
<a name="l01625"></a>01625                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#aa5e454b247def6f31a324173f9934719">attrset</a>($1, $3);
<a name="l01626"></a>01626                     <span class="comment">/*%</span>
<a name="l01627"></a>01627 <span class="comment">                        $$ = dispatch3(field, $1, ripper_id2sym(&apos;.&apos;), $3);</span>
<a name="l01628"></a>01628 <span class="comment">                    %*/</span>
<a name="l01629"></a>01629                     }
<a name="l01630"></a>01630                 | primary_value <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a> <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a>
<a name="l01631"></a>01631                     {
<a name="l01632"></a>01632                     <span class="comment">/*%%%*/</span>
<a name="l01633"></a>01633                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#aa5e454b247def6f31a324173f9934719">attrset</a>($1, $3);
<a name="l01634"></a>01634                     <span class="comment">/*%</span>
<a name="l01635"></a>01635 <span class="comment">                        $$ = dispatch2(const_path_field, $1, $3);</span>
<a name="l01636"></a>01636 <span class="comment">                    %*/</span>
<a name="l01637"></a>01637                     }
<a name="l01638"></a>01638                 | primary_value <span class="charliteral">&apos;.&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a>
<a name="l01639"></a>01639                     {
<a name="l01640"></a>01640                     <span class="comment">/*%%%*/</span>
<a name="l01641"></a>01641                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#aa5e454b247def6f31a324173f9934719">attrset</a>($1, $3);
<a name="l01642"></a>01642                     <span class="comment">/*%</span>
<a name="l01643"></a>01643 <span class="comment">                        $$ = dispatch3(field, $1, ripper_id2sym(&apos;.&apos;), $3);</span>
<a name="l01644"></a>01644 <span class="comment">                    %*/</span>
<a name="l01645"></a>01645                     }
<a name="l01646"></a>01646                 | primary_value <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a> <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a>
<a name="l01647"></a>01647                     {
<a name="l01648"></a>01648                     <span class="comment">/*%%%*/</span>
<a name="l01649"></a>01649                         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab3563b12f00c4558b6e9528d1733a459">in_def</a> || <a class="code" href="../../d5/d11/ripper_8c.html#ae1504c640dc00b676c5f8573c87c00bf">in_single</a>)
<a name="l01650"></a>01650                             <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;dynamic constant assignment&quot;</span>);
<a name="l01651"></a>01651                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a9b6fdcbe7b8e7cadd9f3051de760bfb7">NEW_CDECL</a>(0, 0, <a class="code" href="../../d3/d09/ripper_8y.html#a109b95bb64b197f905c1c1daa2ec996b">NEW_COLON2</a>($1, $3));
<a name="l01652"></a>01652                     <span class="comment">/*%</span>
<a name="l01653"></a>01653 <span class="comment">                        if (in_def || in_single)</span>
<a name="l01654"></a>01654 <span class="comment">                            yyerror(&quot;dynamic constant assignment&quot;);</span>
<a name="l01655"></a>01655 <span class="comment">                        $$ = dispatch2(const_path_field, $1, $3);</span>
<a name="l01656"></a>01656 <span class="comment">                    %*/</span>
<a name="l01657"></a>01657                     }
<a name="l01658"></a>01658                 | <a class="code" href="../../d5/d11/ripper_8c.html#a76d2c0533b6023921f54284bf058fa11">tCOLON3</a> <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a>
<a name="l01659"></a>01659                     {
<a name="l01660"></a>01660                     <span class="comment">/*%%%*/</span>
<a name="l01661"></a>01661                         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab3563b12f00c4558b6e9528d1733a459">in_def</a> || <a class="code" href="../../d5/d11/ripper_8c.html#ae1504c640dc00b676c5f8573c87c00bf">in_single</a>)
<a name="l01662"></a>01662                             <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;dynamic constant assignment&quot;</span>);
<a name="l01663"></a>01663                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a9b6fdcbe7b8e7cadd9f3051de760bfb7">NEW_CDECL</a>(0, 0, <a class="code" href="../../d3/d09/ripper_8y.html#a27482ec92482376d5ed688c4794a436c">NEW_COLON3</a>($2));
<a name="l01664"></a>01664                     <span class="comment">/*%</span>
<a name="l01665"></a>01665 <span class="comment">                        $$ = dispatch1(top_const_field, $2);</span>
<a name="l01666"></a>01666 <span class="comment">                    %*/</span>
<a name="l01667"></a>01667                     }
<a name="l01668"></a>01668                 | backref
<a name="l01669"></a>01669                     {
<a name="l01670"></a>01670                     <span class="comment">/*%%%*/</span>
<a name="l01671"></a>01671                         <a class="code" href="../../d5/d11/ripper_8c.html#afb08645c7019753dc3e43080a8ee63fd">rb_backref_error</a>($1);
<a name="l01672"></a>01672                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l01673"></a>01673                     <span class="comment">/*%</span>
<a name="l01674"></a>01674 <span class="comment">                        $$ = dispatch1(var_field, $1);</span>
<a name="l01675"></a>01675 <span class="comment">                        $$ = dispatch1(assign_error, $$);</span>
<a name="l01676"></a>01676 <span class="comment">                    %*/</span>
<a name="l01677"></a>01677                     }
<a name="l01678"></a>01678                 ;
<a name="l01679"></a>01679 
<a name="l01680"></a>01680 <a class="code" href="../../d3/d09/ripper_8y.html#a73c3a889aca6f2648374f6f8331d13ea">lhs</a>             : user_variable
<a name="l01681"></a>01681                     {
<a name="l01682"></a>01682                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a5cb1df5a7a381c93bd1b53c64194c804">assignable</a>($1, 0);
<a name="l01683"></a>01683                     <span class="comment">/*%%%*/</span>
<a name="l01684"></a>01684                         <span class="keywordflow">if</span> (!$$) $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l01685"></a>01685                     <span class="comment">/*%</span>
<a name="l01686"></a>01686 <span class="comment">                        $$ = dispatch1(var_field, $$);</span>
<a name="l01687"></a>01687 <span class="comment">                    %*/</span>
<a name="l01688"></a>01688                     }
<a name="l01689"></a>01689                 | keyword_variable
<a name="l01690"></a>01690                     {
<a name="l01691"></a>01691                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a5cb1df5a7a381c93bd1b53c64194c804">assignable</a>($1, 0);
<a name="l01692"></a>01692                     <span class="comment">/*%%%*/</span>
<a name="l01693"></a>01693                         <span class="keywordflow">if</span> (!$$) $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l01694"></a>01694                     <span class="comment">/*%</span>
<a name="l01695"></a>01695 <span class="comment">                        $$ = dispatch1(var_field, $$);</span>
<a name="l01696"></a>01696 <span class="comment">                    %*/</span>
<a name="l01697"></a>01697                     }
<a name="l01698"></a>01698                 | primary_value <span class="charliteral">&apos;[&apos;</span> opt_call_args rbracket
<a name="l01699"></a>01699                     {
<a name="l01700"></a>01700                     <span class="comment">/*%%%*/</span>
<a name="l01701"></a>01701                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a04dc959318a4396bf4b904455ef1a634">aryset</a>($1, $3);
<a name="l01702"></a>01702                     <span class="comment">/*%</span>
<a name="l01703"></a>01703 <span class="comment">                        $$ = dispatch2(aref_field, $1, escape_Qundef($3));</span>
<a name="l01704"></a>01704 <span class="comment">                    %*/</span>
<a name="l01705"></a>01705                     }
<a name="l01706"></a>01706                 | primary_value <span class="charliteral">&apos;.&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a>
<a name="l01707"></a>01707                     {
<a name="l01708"></a>01708                     <span class="comment">/*%%%*/</span>
<a name="l01709"></a>01709                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#aa5e454b247def6f31a324173f9934719">attrset</a>($1, $3);
<a name="l01710"></a>01710                     <span class="comment">/*%</span>
<a name="l01711"></a>01711 <span class="comment">                        $$ = dispatch3(field, $1, ripper_id2sym(&apos;.&apos;), $3);</span>
<a name="l01712"></a>01712 <span class="comment">                    %*/</span>
<a name="l01713"></a>01713                     }
<a name="l01714"></a>01714                 | primary_value <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a> <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a>
<a name="l01715"></a>01715                     {
<a name="l01716"></a>01716                     <span class="comment">/*%%%*/</span>
<a name="l01717"></a>01717                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#aa5e454b247def6f31a324173f9934719">attrset</a>($1, $3);
<a name="l01718"></a>01718                     <span class="comment">/*%</span>
<a name="l01719"></a>01719 <span class="comment">                        $$ = dispatch3(field, $1, ripper_intern(&quot;::&quot;), $3);</span>
<a name="l01720"></a>01720 <span class="comment">                    %*/</span>
<a name="l01721"></a>01721                     }
<a name="l01722"></a>01722                 | primary_value <span class="charliteral">&apos;.&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a>
<a name="l01723"></a>01723                     {
<a name="l01724"></a>01724                     <span class="comment">/*%%%*/</span>
<a name="l01725"></a>01725                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#aa5e454b247def6f31a324173f9934719">attrset</a>($1, $3);
<a name="l01726"></a>01726                     <span class="comment">/*%</span>
<a name="l01727"></a>01727 <span class="comment">                        $$ = dispatch3(field, $1, ripper_id2sym(&apos;.&apos;), $3);</span>
<a name="l01728"></a>01728 <span class="comment">                    %*/</span>
<a name="l01729"></a>01729                     }
<a name="l01730"></a>01730                 | primary_value <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a> <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a>
<a name="l01731"></a>01731                     {
<a name="l01732"></a>01732                     <span class="comment">/*%%%*/</span>
<a name="l01733"></a>01733                         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab3563b12f00c4558b6e9528d1733a459">in_def</a> || <a class="code" href="../../d5/d11/ripper_8c.html#ae1504c640dc00b676c5f8573c87c00bf">in_single</a>)
<a name="l01734"></a>01734                             <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;dynamic constant assignment&quot;</span>);
<a name="l01735"></a>01735                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a9b6fdcbe7b8e7cadd9f3051de760bfb7">NEW_CDECL</a>(0, 0, <a class="code" href="../../d3/d09/ripper_8y.html#a109b95bb64b197f905c1c1daa2ec996b">NEW_COLON2</a>($1, $3));
<a name="l01736"></a>01736                     <span class="comment">/*%</span>
<a name="l01737"></a>01737 <span class="comment">                        $$ = dispatch2(const_path_field, $1, $3);</span>
<a name="l01738"></a>01738 <span class="comment">                        if (in_def || in_single) {</span>
<a name="l01739"></a>01739 <span class="comment">                            $$ = dispatch1(assign_error, $$);</span>
<a name="l01740"></a>01740 <span class="comment">                        }</span>
<a name="l01741"></a>01741 <span class="comment">                    %*/</span>
<a name="l01742"></a>01742                     }
<a name="l01743"></a>01743                 | <a class="code" href="../../d5/d11/ripper_8c.html#a76d2c0533b6023921f54284bf058fa11">tCOLON3</a> <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a>
<a name="l01744"></a>01744                     {
<a name="l01745"></a>01745                     <span class="comment">/*%%%*/</span>
<a name="l01746"></a>01746                         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab3563b12f00c4558b6e9528d1733a459">in_def</a> || <a class="code" href="../../d5/d11/ripper_8c.html#ae1504c640dc00b676c5f8573c87c00bf">in_single</a>)
<a name="l01747"></a>01747                             <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;dynamic constant assignment&quot;</span>);
<a name="l01748"></a>01748                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a9b6fdcbe7b8e7cadd9f3051de760bfb7">NEW_CDECL</a>(0, 0, <a class="code" href="../../d3/d09/ripper_8y.html#a27482ec92482376d5ed688c4794a436c">NEW_COLON3</a>($2));
<a name="l01749"></a>01749                     <span class="comment">/*%</span>
<a name="l01750"></a>01750 <span class="comment">                        $$ = dispatch1(top_const_field, $2);</span>
<a name="l01751"></a>01751 <span class="comment">                        if (in_def || in_single) {</span>
<a name="l01752"></a>01752 <span class="comment">                            $$ = dispatch1(assign_error, $$);</span>
<a name="l01753"></a>01753 <span class="comment">                        }</span>
<a name="l01754"></a>01754 <span class="comment">                    %*/</span>
<a name="l01755"></a>01755                     }
<a name="l01756"></a>01756                 | backref
<a name="l01757"></a>01757                     {
<a name="l01758"></a>01758                     <span class="comment">/*%%%*/</span>
<a name="l01759"></a>01759                         <a class="code" href="../../d5/d11/ripper_8c.html#afb08645c7019753dc3e43080a8ee63fd">rb_backref_error</a>($1);
<a name="l01760"></a>01760                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l01761"></a>01761                     <span class="comment">/*%</span>
<a name="l01762"></a>01762 <span class="comment">                        $$ = dispatch1(assign_error, $1);</span>
<a name="l01763"></a>01763 <span class="comment">                    %*/</span>
<a name="l01764"></a>01764                     }
<a name="l01765"></a>01765                 ;
<a name="l01766"></a>01766 
<a name="l01767"></a>01767 cname           : <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a>
<a name="l01768"></a>01768                     {
<a name="l01769"></a>01769                     <span class="comment">/*%%%*/</span>
<a name="l01770"></a>01770                         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;class/module name must be CONSTANT&quot;</span>);
<a name="l01771"></a>01771                     <span class="comment">/*%</span>
<a name="l01772"></a>01772 <span class="comment">                        $$ = dispatch1(class_name_error, $1);</span>
<a name="l01773"></a>01773 <span class="comment">                    %*/</span>
<a name="l01774"></a>01774                     }
<a name="l01775"></a>01775                 | <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a>
<a name="l01776"></a>01776                 ;
<a name="l01777"></a>01777 
<a name="l01778"></a>01778 cpath           : <a class="code" href="../../d5/d11/ripper_8c.html#a76d2c0533b6023921f54284bf058fa11">tCOLON3</a> cname
<a name="l01779"></a>01779                     {
<a name="l01780"></a>01780                     <span class="comment">/*%%%*/</span>
<a name="l01781"></a>01781                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a27482ec92482376d5ed688c4794a436c">NEW_COLON3</a>($2);
<a name="l01782"></a>01782                     <span class="comment">/*%</span>
<a name="l01783"></a>01783 <span class="comment">                        $$ = dispatch1(top_const_ref, $2);</span>
<a name="l01784"></a>01784 <span class="comment">                    %*/</span>
<a name="l01785"></a>01785                     }
<a name="l01786"></a>01786                 | cname
<a name="l01787"></a>01787                     {
<a name="l01788"></a>01788                     <span class="comment">/*%%%*/</span>
<a name="l01789"></a>01789                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a109b95bb64b197f905c1c1daa2ec996b">NEW_COLON2</a>(0, $$);
<a name="l01790"></a>01790                     <span class="comment">/*%</span>
<a name="l01791"></a>01791 <span class="comment">                        $$ = dispatch1(const_ref, $1);</span>
<a name="l01792"></a>01792 <span class="comment">                    %*/</span>
<a name="l01793"></a>01793                     }
<a name="l01794"></a>01794                 | primary_value <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a> cname
<a name="l01795"></a>01795                     {
<a name="l01796"></a>01796                     <span class="comment">/*%%%*/</span>
<a name="l01797"></a>01797                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a109b95bb64b197f905c1c1daa2ec996b">NEW_COLON2</a>($1, $3);
<a name="l01798"></a>01798                     <span class="comment">/*%</span>
<a name="l01799"></a>01799 <span class="comment">                        $$ = dispatch2(const_path_ref, $1, $3);</span>
<a name="l01800"></a>01800 <span class="comment">                    %*/</span>
<a name="l01801"></a>01801                     }
<a name="l01802"></a>01802                 ;
<a name="l01803"></a>01803 
<a name="l01804"></a>01804 fname           : <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a>
<a name="l01805"></a>01805                 | <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a>
<a name="l01806"></a>01806                 | <a class="code" href="../../d5/d11/ripper_8c.html#aea28d934fe4e93590bcea40f409e1a81">tFID</a>
<a name="l01807"></a>01807                 | op
<a name="l01808"></a>01808                     {
<a name="l01809"></a>01809                         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a6625ca72427336b58374fc438e51b225">EXPR_ENDFN</a>;
<a name="l01810"></a>01810                         $$ = $1;
<a name="l01811"></a>01811                     }
<a name="l01812"></a>01812                 | reswords
<a name="l01813"></a>01813                     {
<a name="l01814"></a>01814                         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a6625ca72427336b58374fc438e51b225">EXPR_ENDFN</a>;
<a name="l01815"></a>01815                     <span class="comment">/*%%%*/</span>
<a name="l01816"></a>01816                         $$ = $&lt;<span class="keywordtype">id</span>&gt;1;
<a name="l01817"></a>01817                     <span class="comment">/*%</span>
<a name="l01818"></a>01818 <span class="comment">                        $$ = $1;</span>
<a name="l01819"></a>01819 <span class="comment">                    %*/</span>
<a name="l01820"></a>01820                     }
<a name="l01821"></a>01821                 ;
<a name="l01822"></a>01822 
<a name="l01823"></a>01823 fsym            : fname
<a name="l01824"></a>01824                 | symbol
<a name="l01825"></a>01825                 ;
<a name="l01826"></a>01826 
<a name="l01827"></a>01827 fitem           : fsym
<a name="l01828"></a>01828                     {
<a name="l01829"></a>01829                     <span class="comment">/*%%%*/</span>
<a name="l01830"></a>01830                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a0b35b94b9b2bf20d34efc1616be83916">NEW_LIT</a>(<a class="code" href="../../dc/d0c/cparse_8c.html#a48bfb6519a45249fb2ec0193ea3b6e1c">ID2SYM</a>($1));
<a name="l01831"></a>01831                     <span class="comment">/*%</span>
<a name="l01832"></a>01832 <span class="comment">                        $$ = dispatch1(symbol_literal, $1);</span>
<a name="l01833"></a>01833 <span class="comment">                    %*/</span>
<a name="l01834"></a>01834                     }
<a name="l01835"></a>01835                 | <a class="code" href="../../d3/d09/ripper_8y.html#a40f756f6fdaad745b00b1b19e8bc9556">dsym</a>
<a name="l01836"></a>01836                 ;
<a name="l01837"></a>01837 
<a name="l01838"></a>01838 <a class="code" href="../../d3/d09/ripper_8y.html#ae9837234bd173ec68af7ed00c20242c9">undef_list</a>      : fitem
<a name="l01839"></a>01839                     {
<a name="l01840"></a>01840                     <span class="comment">/*%%%*/</span>
<a name="l01841"></a>01841                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#aa661df3df3a3be219ed1573c2273f99a">NEW_UNDEF</a>($1);
<a name="l01842"></a>01842                     <span class="comment">/*%</span>
<a name="l01843"></a>01843 <span class="comment">                        $$ = rb_ary_new3(1, $1);</span>
<a name="l01844"></a>01844 <span class="comment">                    %*/</span>
<a name="l01845"></a>01845                     }
<a name="l01846"></a>01846                 | <a class="code" href="../../d3/d09/ripper_8y.html#ae9837234bd173ec68af7ed00c20242c9">undef_list</a> <span class="charliteral">&apos;,&apos;</span> {<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>;} fitem
<a name="l01847"></a>01847                     {
<a name="l01848"></a>01848                     <span class="comment">/*%%%*/</span>
<a name="l01849"></a>01849                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>($1, <a class="code" href="../../d3/d09/ripper_8y.html#aa661df3df3a3be219ed1573c2273f99a">NEW_UNDEF</a>($4));
<a name="l01850"></a>01850                     <span class="comment">/*%</span>
<a name="l01851"></a>01851 <span class="comment">                        rb_ary_push($1, $4);</span>
<a name="l01852"></a>01852 <span class="comment">                    %*/</span>
<a name="l01853"></a>01853                     }
<a name="l01854"></a>01854                 ;
<a name="l01855"></a>01855 
<a name="l01856"></a>01856 op              : <span class="charliteral">&apos;|&apos;</span>           { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <span class="charliteral">&apos;|&apos;</span>); }
<a name="l01857"></a>01857                 | <span class="charliteral">&apos;^&apos;</span>           { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <span class="charliteral">&apos;^&apos;</span>); }
<a name="l01858"></a>01858                 | <span class="charliteral">&apos;&amp;&apos;</span>           { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <span class="charliteral">&apos;&amp;&apos;</span>); }
<a name="l01859"></a>01859                 | <a class="code" href="../../d5/d11/ripper_8c.html#af5d97f1c301f97e35c69e5e21d698c8b">tCMP</a>          { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#af5d97f1c301f97e35c69e5e21d698c8b">tCMP</a>); }
<a name="l01860"></a>01860                 | <a class="code" href="../../d5/d11/ripper_8c.html#a6ea996f3ab75bd127d6326b180214c6f">tEQ</a>           { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#a6ea996f3ab75bd127d6326b180214c6f">tEQ</a>); }
<a name="l01861"></a>01861                 | <a class="code" href="../../d5/d11/ripper_8c.html#ac6db743a4f2e6f90976870022d8914a2">tEQQ</a>          { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#ac6db743a4f2e6f90976870022d8914a2">tEQQ</a>); }
<a name="l01862"></a>01862                 | <a class="code" href="../../d5/d11/ripper_8c.html#a6fba3b7a35b6a4abc5692d7bc6f7cc51">tMATCH</a>        { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#a6fba3b7a35b6a4abc5692d7bc6f7cc51">tMATCH</a>); }
<a name="l01863"></a>01863                 | <a class="code" href="../../d5/d11/ripper_8c.html#a18a357e5edec5f1ff68c4bc4fc5d0c84">tNMATCH</a>       { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#a18a357e5edec5f1ff68c4bc4fc5d0c84">tNMATCH</a>); }
<a name="l01864"></a>01864                 | <span class="charliteral">&apos;&gt;&apos;</span>           { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <span class="charliteral">&apos;&gt;&apos;</span>); }
<a name="l01865"></a>01865                 | <a class="code" href="../../d5/d11/ripper_8c.html#a285fd90a21df46bc9781328e0ac5d22e">tGEQ</a>          { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#a285fd90a21df46bc9781328e0ac5d22e">tGEQ</a>); }
<a name="l01866"></a>01866                 | <span class="charliteral">&apos;&lt;&apos;</span>           { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <span class="charliteral">&apos;&lt;&apos;</span>); }
<a name="l01867"></a>01867                 | <a class="code" href="../../d5/d11/ripper_8c.html#a4c271a73151d715c58bf15c8607054e0">tLEQ</a>          { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#a4c271a73151d715c58bf15c8607054e0">tLEQ</a>); }
<a name="l01868"></a>01868                 | <a class="code" href="../../d5/d11/ripper_8c.html#aa8f0fa309e4e39cda30f2116fb979320">tNEQ</a>          { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#aa8f0fa309e4e39cda30f2116fb979320">tNEQ</a>); }
<a name="l01869"></a>01869                 | <a class="code" href="../../d5/d11/ripper_8c.html#aabd668249ab17583bb8ba7b0a15dc88a">tLSHFT</a>        { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#aabd668249ab17583bb8ba7b0a15dc88a">tLSHFT</a>); }
<a name="l01870"></a>01870                 | <a class="code" href="../../d5/d11/ripper_8c.html#a5d34fc3d8e54b552366d4e8941852610">tRSHFT</a>        { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#a5d34fc3d8e54b552366d4e8941852610">tRSHFT</a>); }
<a name="l01871"></a>01871                 | <span class="charliteral">&apos;+&apos;</span>           { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <span class="charliteral">&apos;+&apos;</span>); }
<a name="l01872"></a>01872                 | <span class="charliteral">&apos;-&apos;</span>           { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <span class="charliteral">&apos;-&apos;</span>); }
<a name="l01873"></a>01873                 | <span class="charliteral">&apos;*&apos;</span>           { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <span class="charliteral">&apos;*&apos;</span>); }
<a name="l01874"></a>01874                 | <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a>         { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <span class="charliteral">&apos;*&apos;</span>); }
<a name="l01875"></a>01875                 | <span class="charliteral">&apos;/&apos;</span>           { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <span class="charliteral">&apos;/&apos;</span>); }
<a name="l01876"></a>01876                 | <span class="charliteral">&apos;%&apos;</span>           { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <span class="charliteral">&apos;%&apos;</span>); }
<a name="l01877"></a>01877                 | <a class="code" href="../../d5/d11/ripper_8c.html#a3637bfb7d8b8ae77f0dccb4841c70673">tPOW</a>          { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#a3637bfb7d8b8ae77f0dccb4841c70673">tPOW</a>); }
<a name="l01878"></a>01878                 | <span class="charliteral">&apos;!&apos;</span>           { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <span class="charliteral">&apos;!&apos;</span>); }
<a name="l01879"></a>01879                 | <span class="charliteral">&apos;~&apos;</span>           { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <span class="charliteral">&apos;~&apos;</span>); }
<a name="l01880"></a>01880                 | <a class="code" href="../../d5/d11/ripper_8c.html#a30c0584a6e12ebd260060a9b77159e90">tUPLUS</a>        { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#a30c0584a6e12ebd260060a9b77159e90">tUPLUS</a>); }
<a name="l01881"></a>01881                 | <a class="code" href="../../d5/d11/ripper_8c.html#a2990cd3acbac56afa45019a045ddcd9e">tUMINUS</a>       { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#a2990cd3acbac56afa45019a045ddcd9e">tUMINUS</a>); }
<a name="l01882"></a>01882                 | <a class="code" href="../../d5/d11/ripper_8c.html#ab052bc5e13a5bbe98406c4aec5a4deac">tAREF</a>         { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#ab052bc5e13a5bbe98406c4aec5a4deac">tAREF</a>); }
<a name="l01883"></a>01883                 | <a class="code" href="../../d5/d11/ripper_8c.html#ad1b5f00e34caa7051eef00a36b40d232">tASET</a>         { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#ad1b5f00e34caa7051eef00a36b40d232">tASET</a>); }
<a name="l01884"></a>01884                 | <span class="charliteral">&apos;`&apos;</span>           { <a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <span class="charliteral">&apos;`&apos;</span>); }
<a name="l01885"></a>01885                 ;
<a name="l01886"></a>01886 
<a name="l01887"></a>01887 reswords        : <a class="code" href="../../d5/d11/ripper_8c.html#a647bc6d3b4755012d0a547a771983690">keyword__LINE__</a> | <a class="code" href="../../d5/d11/ripper_8c.html#abc6d3baf1526f6522fb096804f3e6f3f">keyword__FILE__</a> | <a class="code" href="../../d5/d11/ripper_8c.html#ae3a907545a96704ee7c94870da496bf0">keyword__ENCODING__</a>
<a name="l01888"></a>01888                 | <a class="code" href="../../d5/d11/ripper_8c.html#ac4018498741336ff993f8dca4a489bb0">keyword_BEGIN</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a301644f3b615b72fae2733620f7fd48c">keyword_END</a>
<a name="l01889"></a>01889                 | <a class="code" href="../../d5/d11/ripper_8c.html#ab516dc23f7932eee4a881bb364b0bd73">keyword_alias</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a4b2a7871e12bd91d4506c5a3904daee9">keyword_and</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a6068ed81f0c694c4874c0c90b398e198">keyword_begin</a>
<a name="l01890"></a>01890                 | <a class="code" href="../../d5/d11/ripper_8c.html#a3df7a0f57555b3aa2a155393d6b1c4dc">keyword_break</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a05aac07545e64b6a0054e8901a38992f">keyword_case</a> | <a class="code" href="../../d5/d11/ripper_8c.html#aaad7597969d430a0cd28b7715943e784">keyword_class</a> | <a class="code" href="../../d5/d11/ripper_8c.html#ac5156e971018e2f1a80e8b638bf1ad83">keyword_def</a>
<a name="l01891"></a>01891                 | <a class="code" href="../../d5/d11/ripper_8c.html#afb1d7e76236b8c3c87f3a241263313a1">keyword_defined</a> | <a class="code" href="../../d5/d11/ripper_8c.html#af0eaec49b504972deb0631ab428cf7f0">keyword_do</a> | <a class="code" href="../../d5/d11/ripper_8c.html#ab9f440f375bc044468920cc3dc8f9b07">keyword_else</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a4e72412ea5c9c9a39319fb0224a0a23b">keyword_elsif</a>
<a name="l01892"></a>01892                 | <a class="code" href="../../d5/d11/ripper_8c.html#a3887eba1b6af6ce3835d41cf832b4fa1">keyword_end</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a2cc9838aaa31cc63122bedee8cec14ca">keyword_ensure</a> | <a class="code" href="../../d5/d11/ripper_8c.html#acabfb39849e96211b6441b971d4ea0a7">keyword_false</a>
<a name="l01893"></a>01893                 | <a class="code" href="../../d5/d11/ripper_8c.html#ad586477cf71406d625d53eae311bdf11">keyword_for</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a24cfafd1c70ce74a7e26d8600e4618b6">keyword_in</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a608cdee478d71d061a7fe4463717d923">keyword_module</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a6f1a9cbe32cbd55a1e29b0d066bc9b09">keyword_next</a>
<a name="l01894"></a>01894                 | <a class="code" href="../../d5/d11/ripper_8c.html#a97061c623fd2070a72366daa7cd8386d">keyword_nil</a> | <a class="code" href="../../d5/d11/ripper_8c.html#aa7618608a8ca97b99b9b2760935869eb">keyword_not</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a0a3412db66a7bfe6e86a085ca4213f0a">keyword_or</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a208e0237b3ea51246b610d113ba0253e">keyword_redo</a>
<a name="l01895"></a>01895                 | <a class="code" href="../../d5/d11/ripper_8c.html#adb3283c05c39cb946a765e95edfe4b79">keyword_rescue</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a8c2d03875c00212b36b822b056116426">keyword_retry</a> | <a class="code" href="../../d5/d11/ripper_8c.html#ab2da8a02f53da70f08f59bfcefb370d0">keyword_return</a> | <a class="code" href="../../d5/d11/ripper_8c.html#ab8442a74bd68773667e1d016e17a8f20">keyword_self</a>
<a name="l01896"></a>01896                 | <a class="code" href="../../d5/d11/ripper_8c.html#aeb6f2f7f0aff1706e3fcb6b1777ee784">keyword_super</a> | <a class="code" href="../../d5/d11/ripper_8c.html#af43191ca027b5b2d4efa8f4b3e878663">keyword_then</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a4db6e341df3e5d2abf5887085e9c5f77">keyword_true</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a0738772680283d265974b4f744404b58">keyword_undef</a>
<a name="l01897"></a>01897                 | <a class="code" href="../../d5/d11/ripper_8c.html#a5b03b4dec3069e33b82fb88f1beb21c7">keyword_when</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a23d86621a145239a20c9496993a87e1a">keyword_yield</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a0f1bd4f847f3d2e6fbaa432d68793f24">keyword_if</a> | <a class="code" href="../../d5/d11/ripper_8c.html#aec71ecb43b9af0c21560c7ebc47ffc13">keyword_unless</a>
<a name="l01898"></a>01898                 | <a class="code" href="../../d5/d11/ripper_8c.html#a51e8071a22ee8afe26d720c2ea129c89">keyword_while</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a479b05419c8b27b3aaeeb728e39b3972">keyword_until</a>
<a name="l01899"></a>01899                 ;
<a name="l01900"></a>01900 
<a name="l01901"></a>01901 arg             : <a class="code" href="../../d3/d09/ripper_8y.html#a73c3a889aca6f2648374f6f8331d13ea">lhs</a> <span class="charliteral">&apos;=&apos;</span> arg
<a name="l01902"></a>01902                     {
<a name="l01903"></a>01903                     <span class="comment">/*%%%*/</span>
<a name="l01904"></a>01904                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($3);
<a name="l01905"></a>01905                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a24425bcc46577a37c70057c22fe05b6f">node_assign</a>($1, $3);
<a name="l01906"></a>01906                     <span class="comment">/*%</span>
<a name="l01907"></a>01907 <span class="comment">                        $$ = dispatch2(assign, $1, $3);</span>
<a name="l01908"></a>01908 <span class="comment">                    %*/</span>
<a name="l01909"></a>01909                     }
<a name="l01910"></a>01910                 | <a class="code" href="../../d3/d09/ripper_8y.html#a73c3a889aca6f2648374f6f8331d13ea">lhs</a> <span class="charliteral">&apos;=&apos;</span> arg <a class="code" href="../../d5/d11/ripper_8c.html#a68a67be66a4f843e42b55a28c9d3dcfa">modifier_rescue</a> arg
<a name="l01911"></a>01911                     {
<a name="l01912"></a>01912                     <span class="comment">/*%%%*/</span>
<a name="l01913"></a>01913                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($3);
<a name="l01914"></a>01914                         $3 = <a class="code" href="../../d3/d09/ripper_8y.html#a480b6549172fef5598a345a33ac43849">NEW_RESCUE</a>($3, <a class="code" href="../../d3/d09/ripper_8y.html#a3a24fa78d51a6d51a28bb911f51814c7">NEW_RESBODY</a>(0,$5,0), 0);
<a name="l01915"></a>01915                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a24425bcc46577a37c70057c22fe05b6f">node_assign</a>($1, $3);
<a name="l01916"></a>01916                     <span class="comment">/*%</span>
<a name="l01917"></a>01917 <span class="comment">                        $$ = dispatch2(assign, $1, dispatch2(rescue_mod, $3, $5));</span>
<a name="l01918"></a>01918 <span class="comment">                    %*/</span>
<a name="l01919"></a>01919                     }
<a name="l01920"></a>01920                 | var_lhs <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a> arg
<a name="l01921"></a>01921                     {
<a name="l01922"></a>01922                     <span class="comment">/*%%%*/</span>
<a name="l01923"></a>01923                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($3);
<a name="l01924"></a>01924                         <span class="keywordflow">if</span> ($1) {
<a name="l01925"></a>01925                             <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> vid = $1-&gt;nd_vid;
<a name="l01926"></a>01926                             <span class="keywordflow">if</span> ($2 == <a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a>) {
<a name="l01927"></a>01927                                 $1-&gt;nd_value = $3;
<a name="l01928"></a>01928                                 $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a0a7d54a25f0a34c9e070aeb22925319f">NEW_OP_ASGN_OR</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a8128fe58f108349b4cb7c1a208cb874b">gettable</a>(vid), $1);
<a name="l01929"></a>01929                                 <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#af89af618cda0d4da53d3c31a875e8031">is_asgn_or_id</a>(vid)) {
<a name="l01930"></a>01930                                     $$-&gt;nd_aid = vid;
<a name="l01931"></a>01931                                 }
<a name="l01932"></a>01932                             }
<a name="l01933"></a>01933                             <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($2 == <a class="code" href="../../d5/d11/ripper_8c.html#a65277f756450c2f9e7117faf2c01339a">tANDOP</a>) {
<a name="l01934"></a>01934                                 $1-&gt;nd_value = $3;
<a name="l01935"></a>01935                                 $$ = <a class="code" href="../../d3/d09/ripper_8y.html#afb14fd699da452a53d87c5b7d8648cf5">NEW_OP_ASGN_AND</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a8128fe58f108349b4cb7c1a208cb874b">gettable</a>(vid), $1);
<a name="l01936"></a>01936                             }
<a name="l01937"></a>01937                             <span class="keywordflow">else</span> {
<a name="l01938"></a>01938                                 $$ = $1;
<a name="l01939"></a>01939                                 $$-&gt;nd_value = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a8128fe58f108349b4cb7c1a208cb874b">gettable</a>(vid), $2, <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>($3));
<a name="l01940"></a>01940                             }
<a name="l01941"></a>01941                         }
<a name="l01942"></a>01942                         <span class="keywordflow">else</span> {
<a name="l01943"></a>01943                             $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l01944"></a>01944                         }
<a name="l01945"></a>01945                     <span class="comment">/*%</span>
<a name="l01946"></a>01946 <span class="comment">                        $$ = dispatch3(opassign, $1, $2, $3);</span>
<a name="l01947"></a>01947 <span class="comment">                    %*/</span>
<a name="l01948"></a>01948                     }
<a name="l01949"></a>01949                 | var_lhs <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a> arg <a class="code" href="../../d5/d11/ripper_8c.html#a68a67be66a4f843e42b55a28c9d3dcfa">modifier_rescue</a> arg
<a name="l01950"></a>01950                     {
<a name="l01951"></a>01951                     <span class="comment">/*%%%*/</span>
<a name="l01952"></a>01952                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($3);
<a name="l01953"></a>01953                         $3 = <a class="code" href="../../d3/d09/ripper_8y.html#a480b6549172fef5598a345a33ac43849">NEW_RESCUE</a>($3, <a class="code" href="../../d3/d09/ripper_8y.html#a3a24fa78d51a6d51a28bb911f51814c7">NEW_RESBODY</a>(0,$5,0), 0);
<a name="l01954"></a>01954                         <span class="keywordflow">if</span> ($1) {
<a name="l01955"></a>01955                             <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> vid = $1-&gt;nd_vid;
<a name="l01956"></a>01956                             <span class="keywordflow">if</span> ($2 == <a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a>) {
<a name="l01957"></a>01957                                 $1-&gt;nd_value = $3;
<a name="l01958"></a>01958                                 $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a0a7d54a25f0a34c9e070aeb22925319f">NEW_OP_ASGN_OR</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a8128fe58f108349b4cb7c1a208cb874b">gettable</a>(vid), $1);
<a name="l01959"></a>01959                                 <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#af89af618cda0d4da53d3c31a875e8031">is_asgn_or_id</a>(vid)) {
<a name="l01960"></a>01960                                     $$-&gt;nd_aid = vid;
<a name="l01961"></a>01961                                 }
<a name="l01962"></a>01962                             }
<a name="l01963"></a>01963                             <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($2 == <a class="code" href="../../d5/d11/ripper_8c.html#a65277f756450c2f9e7117faf2c01339a">tANDOP</a>) {
<a name="l01964"></a>01964                                 $1-&gt;nd_value = $3;
<a name="l01965"></a>01965                                 $$ = <a class="code" href="../../d3/d09/ripper_8y.html#afb14fd699da452a53d87c5b7d8648cf5">NEW_OP_ASGN_AND</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a8128fe58f108349b4cb7c1a208cb874b">gettable</a>(vid), $1);
<a name="l01966"></a>01966                             }
<a name="l01967"></a>01967                             <span class="keywordflow">else</span> {
<a name="l01968"></a>01968                                 $$ = $1;
<a name="l01969"></a>01969                                 $$-&gt;nd_value = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a8128fe58f108349b4cb7c1a208cb874b">gettable</a>(vid), $2, <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>($3));
<a name="l01970"></a>01970                             }
<a name="l01971"></a>01971                         }
<a name="l01972"></a>01972                         <span class="keywordflow">else</span> {
<a name="l01973"></a>01973                             $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l01974"></a>01974                         }
<a name="l01975"></a>01975                     <span class="comment">/*%</span>
<a name="l01976"></a>01976 <span class="comment">                        $3 = dispatch2(rescue_mod, $3, $5);</span>
<a name="l01977"></a>01977 <span class="comment">                        $$ = dispatch3(opassign, $1, $2, $3);</span>
<a name="l01978"></a>01978 <span class="comment">                    %*/</span>
<a name="l01979"></a>01979                     }
<a name="l01980"></a>01980                 | primary_value <span class="charliteral">&apos;[&apos;</span> opt_call_args rbracket <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a> arg
<a name="l01981"></a>01981                     {
<a name="l01982"></a>01982                     <span class="comment">/*%%%*/</span>
<a name="l01983"></a>01983                         NODE *args;
<a name="l01984"></a>01984 
<a name="l01985"></a>01985                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($6);
<a name="l01986"></a>01986                         <span class="keywordflow">if</span> (!$3) $3 = <a class="code" href="../../d3/d09/ripper_8y.html#a3d0f928629afd9bafaf3750a9df5ba86">NEW_ZARRAY</a>();
<a name="l01987"></a>01987                         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($3) == NODE_BLOCK_PASS) {
<a name="l01988"></a>01988                             args = <a class="code" href="../../d3/d09/ripper_8y.html#ac115448deb3e894336e6d380cd9aa0f4">NEW_ARGSCAT</a>($3, $6);
<a name="l01989"></a>01989                         }
<a name="l01990"></a>01990                         <span class="keywordflow">else</span> {
<a name="l01991"></a>01991                             args = <a class="code" href="../../d5/d11/ripper_8c.html#ae6c095551246969e88aaa53d80b6ddcd">arg_concat</a>($3, $6);
<a name="l01992"></a>01992                         }
<a name="l01993"></a>01993                         <span class="keywordflow">if</span> ($5 == <a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a>) {
<a name="l01994"></a>01994                             $5 = 0;
<a name="l01995"></a>01995                         }
<a name="l01996"></a>01996                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($5 == <a class="code" href="../../d5/d11/ripper_8c.html#a65277f756450c2f9e7117faf2c01339a">tANDOP</a>) {
<a name="l01997"></a>01997                             $5 = 1;
<a name="l01998"></a>01998                         }
<a name="l01999"></a>01999                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#abb850758a59164edf0d3fbeb64114053">NEW_OP_ASGN1</a>($1, $5, args);
<a name="l02000"></a>02000                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l02001"></a>02001                     <span class="comment">/*%</span>
<a name="l02002"></a>02002 <span class="comment">                        $1 = dispatch2(aref_field, $1, escape_Qundef($3));</span>
<a name="l02003"></a>02003 <span class="comment">                        $$ = dispatch3(opassign, $1, $5, $6);</span>
<a name="l02004"></a>02004 <span class="comment">                    %*/</span>
<a name="l02005"></a>02005                     }
<a name="l02006"></a>02006                 | primary_value <span class="charliteral">&apos;.&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a> arg
<a name="l02007"></a>02007                     {
<a name="l02008"></a>02008                     <span class="comment">/*%%%*/</span>
<a name="l02009"></a>02009                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($5);
<a name="l02010"></a>02010                         <span class="keywordflow">if</span> ($4 == <a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a>) {
<a name="l02011"></a>02011                             $4 = 0;
<a name="l02012"></a>02012                         }
<a name="l02013"></a>02013                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($4 == <a class="code" href="../../d5/d11/ripper_8c.html#a65277f756450c2f9e7117faf2c01339a">tANDOP</a>) {
<a name="l02014"></a>02014                             $4 = 1;
<a name="l02015"></a>02015                         }
<a name="l02016"></a>02016                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#aca83b7f7328b02ddf48c379136570d36">NEW_OP_ASGN2</a>($1, $3, $4, $5);
<a name="l02017"></a>02017                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l02018"></a>02018                     <span class="comment">/*%</span>
<a name="l02019"></a>02019 <span class="comment">                        $1 = dispatch3(field, $1, ripper_id2sym(&apos;.&apos;), $3);</span>
<a name="l02020"></a>02020 <span class="comment">                        $$ = dispatch3(opassign, $1, $4, $5);</span>
<a name="l02021"></a>02021 <span class="comment">                    %*/</span>
<a name="l02022"></a>02022                     }
<a name="l02023"></a>02023                 | primary_value <span class="charliteral">&apos;.&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a> arg
<a name="l02024"></a>02024                     {
<a name="l02025"></a>02025                     <span class="comment">/*%%%*/</span>
<a name="l02026"></a>02026                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($5);
<a name="l02027"></a>02027                         <span class="keywordflow">if</span> ($4 == <a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a>) {
<a name="l02028"></a>02028                             $4 = 0;
<a name="l02029"></a>02029                         }
<a name="l02030"></a>02030                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($4 == <a class="code" href="../../d5/d11/ripper_8c.html#a65277f756450c2f9e7117faf2c01339a">tANDOP</a>) {
<a name="l02031"></a>02031                             $4 = 1;
<a name="l02032"></a>02032                         }
<a name="l02033"></a>02033                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#aca83b7f7328b02ddf48c379136570d36">NEW_OP_ASGN2</a>($1, $3, $4, $5);
<a name="l02034"></a>02034                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l02035"></a>02035                     <span class="comment">/*%</span>
<a name="l02036"></a>02036 <span class="comment">                        $1 = dispatch3(field, $1, ripper_id2sym(&apos;.&apos;), $3);</span>
<a name="l02037"></a>02037 <span class="comment">                        $$ = dispatch3(opassign, $1, $4, $5);</span>
<a name="l02038"></a>02038 <span class="comment">                    %*/</span>
<a name="l02039"></a>02039                     }
<a name="l02040"></a>02040                 | primary_value <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a> <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a> arg
<a name="l02041"></a>02041                     {
<a name="l02042"></a>02042                     <span class="comment">/*%%%*/</span>
<a name="l02043"></a>02043                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($5);
<a name="l02044"></a>02044                         <span class="keywordflow">if</span> ($4 == <a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a>) {
<a name="l02045"></a>02045                             $4 = 0;
<a name="l02046"></a>02046                         }
<a name="l02047"></a>02047                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($4 == <a class="code" href="../../d5/d11/ripper_8c.html#a65277f756450c2f9e7117faf2c01339a">tANDOP</a>) {
<a name="l02048"></a>02048                             $4 = 1;
<a name="l02049"></a>02049                         }
<a name="l02050"></a>02050                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#aca83b7f7328b02ddf48c379136570d36">NEW_OP_ASGN2</a>($1, $3, $4, $5);
<a name="l02051"></a>02051                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l02052"></a>02052                     <span class="comment">/*%</span>
<a name="l02053"></a>02053 <span class="comment">                        $1 = dispatch3(field, $1, ripper_intern(&quot;::&quot;), $3);</span>
<a name="l02054"></a>02054 <span class="comment">                        $$ = dispatch3(opassign, $1, $4, $5);</span>
<a name="l02055"></a>02055 <span class="comment">                    %*/</span>
<a name="l02056"></a>02056                     }
<a name="l02057"></a>02057                 | primary_value <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a> <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a> arg
<a name="l02058"></a>02058                     {
<a name="l02059"></a>02059                     <span class="comment">/*%%%*/</span>
<a name="l02060"></a>02060                         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;constant re-assignment&quot;</span>);
<a name="l02061"></a>02061                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l02062"></a>02062                     <span class="comment">/*%</span>
<a name="l02063"></a>02063 <span class="comment">                        $$ = dispatch2(const_path_field, $1, $3);</span>
<a name="l02064"></a>02064 <span class="comment">                        $$ = dispatch3(opassign, $$, $4, $5);</span>
<a name="l02065"></a>02065 <span class="comment">                        $$ = dispatch1(assign_error, $$);</span>
<a name="l02066"></a>02066 <span class="comment">                    %*/</span>
<a name="l02067"></a>02067                     }
<a name="l02068"></a>02068                 | <a class="code" href="../../d5/d11/ripper_8c.html#a76d2c0533b6023921f54284bf058fa11">tCOLON3</a> <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a> arg
<a name="l02069"></a>02069                     {
<a name="l02070"></a>02070                     <span class="comment">/*%%%*/</span>
<a name="l02071"></a>02071                         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;constant re-assignment&quot;</span>);
<a name="l02072"></a>02072                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l02073"></a>02073                     <span class="comment">/*%</span>
<a name="l02074"></a>02074 <span class="comment">                        $$ = dispatch1(top_const_field, $2);</span>
<a name="l02075"></a>02075 <span class="comment">                        $$ = dispatch3(opassign, $$, $3, $4);</span>
<a name="l02076"></a>02076 <span class="comment">                        $$ = dispatch1(assign_error, $$);</span>
<a name="l02077"></a>02077 <span class="comment">                    %*/</span>
<a name="l02078"></a>02078                     }
<a name="l02079"></a>02079                 | backref <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a> arg
<a name="l02080"></a>02080                     {
<a name="l02081"></a>02081                     <span class="comment">/*%%%*/</span>
<a name="l02082"></a>02082                         <a class="code" href="../../d5/d11/ripper_8c.html#afb08645c7019753dc3e43080a8ee63fd">rb_backref_error</a>($1);
<a name="l02083"></a>02083                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l02084"></a>02084                     <span class="comment">/*%</span>
<a name="l02085"></a>02085 <span class="comment">                        $$ = dispatch1(var_field, $1);</span>
<a name="l02086"></a>02086 <span class="comment">                        $$ = dispatch3(opassign, $$, $2, $3);</span>
<a name="l02087"></a>02087 <span class="comment">                        $$ = dispatch1(assign_error, $$);</span>
<a name="l02088"></a>02088 <span class="comment">                    %*/</span>
<a name="l02089"></a>02089                     }
<a name="l02090"></a>02090                 | arg <a class="code" href="../../d5/d11/ripper_8c.html#ad6d247d3b76eb71841a20a06b7248d5c">tDOT2</a> arg
<a name="l02091"></a>02091                     {
<a name="l02092"></a>02092                     <span class="comment">/*%%%*/</span>
<a name="l02093"></a>02093                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($1);
<a name="l02094"></a>02094                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($3);
<a name="l02095"></a>02095                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a674c3521a6afadf6bcb1724ae53b4e5b">NEW_DOT2</a>($1, $3);
<a name="l02096"></a>02096                         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($1) == NODE_LIT &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#acf2fcf97dcf9c7c35452730eb3e2aeb2">FIXNUM_P</a>($1-&gt;nd_lit) &amp;&amp;
<a name="l02097"></a>02097                             <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($3) == NODE_LIT &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#acf2fcf97dcf9c7c35452730eb3e2aeb2">FIXNUM_P</a>($3-&gt;nd_lit)) {
<a name="l02098"></a>02098                             <a class="code" href="../../d5/d11/ripper_8c.html#a8e0101b90062ee6777e4039eefcd1e75">deferred_nodes</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a8e0101b90062ee6777e4039eefcd1e75">deferred_nodes</a>, $$);
<a name="l02099"></a>02099                         }
<a name="l02100"></a>02100                     <span class="comment">/*%</span>
<a name="l02101"></a>02101 <span class="comment">                        $$ = dispatch2(dot2, $1, $3);</span>
<a name="l02102"></a>02102 <span class="comment">                    %*/</span>
<a name="l02103"></a>02103                     }
<a name="l02104"></a>02104                 | arg <a class="code" href="../../d5/d11/ripper_8c.html#a3044adcc37f3f3a58ee0d58bc0b38b2f">tDOT3</a> arg
<a name="l02105"></a>02105                     {
<a name="l02106"></a>02106                     <span class="comment">/*%%%*/</span>
<a name="l02107"></a>02107                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($1);
<a name="l02108"></a>02108                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($3);
<a name="l02109"></a>02109                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#aff0c2a0745dc92507ee004fdae74af07">NEW_DOT3</a>($1, $3);
<a name="l02110"></a>02110                         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($1) == NODE_LIT &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#acf2fcf97dcf9c7c35452730eb3e2aeb2">FIXNUM_P</a>($1-&gt;nd_lit) &amp;&amp;
<a name="l02111"></a>02111                             <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($3) == NODE_LIT &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#acf2fcf97dcf9c7c35452730eb3e2aeb2">FIXNUM_P</a>($3-&gt;nd_lit)) {
<a name="l02112"></a>02112                             <a class="code" href="../../d5/d11/ripper_8c.html#a8e0101b90062ee6777e4039eefcd1e75">deferred_nodes</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a8e0101b90062ee6777e4039eefcd1e75">deferred_nodes</a>, $$);
<a name="l02113"></a>02113                         }
<a name="l02114"></a>02114                     <span class="comment">/*%</span>
<a name="l02115"></a>02115 <span class="comment">                        $$ = dispatch2(dot3, $1, $3);</span>
<a name="l02116"></a>02116 <span class="comment">                    %*/</span>
<a name="l02117"></a>02117                     }
<a name="l02118"></a>02118                 | arg <span class="charliteral">&apos;+&apos;</span> arg
<a name="l02119"></a>02119                     {
<a name="l02120"></a>02120                     <span class="comment">/*%%%*/</span>
<a name="l02121"></a>02121                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <span class="charliteral">&apos;+&apos;</span>, $3);
<a name="l02122"></a>02122                     <span class="comment">/*%</span>
<a name="l02123"></a>02123 <span class="comment">                        $$ = dispatch3(binary, $1, ID2SYM(&apos;+&apos;), $3);</span>
<a name="l02124"></a>02124 <span class="comment">                    %*/</span>
<a name="l02125"></a>02125                     }
<a name="l02126"></a>02126                 | arg <span class="charliteral">&apos;-&apos;</span> arg
<a name="l02127"></a>02127                     {
<a name="l02128"></a>02128                     <span class="comment">/*%%%*/</span>
<a name="l02129"></a>02129                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <span class="charliteral">&apos;-&apos;</span>, $3);
<a name="l02130"></a>02130                     <span class="comment">/*%</span>
<a name="l02131"></a>02131 <span class="comment">                        $$ = dispatch3(binary, $1, ID2SYM(&apos;-&apos;), $3);</span>
<a name="l02132"></a>02132 <span class="comment">                    %*/</span>
<a name="l02133"></a>02133                     }
<a name="l02134"></a>02134                 | arg <span class="charliteral">&apos;*&apos;</span> arg
<a name="l02135"></a>02135                     {
<a name="l02136"></a>02136                     <span class="comment">/*%%%*/</span>
<a name="l02137"></a>02137                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <span class="charliteral">&apos;*&apos;</span>, $3);
<a name="l02138"></a>02138                     <span class="comment">/*%</span>
<a name="l02139"></a>02139 <span class="comment">                        $$ = dispatch3(binary, $1, ID2SYM(&apos;*&apos;), $3);</span>
<a name="l02140"></a>02140 <span class="comment">                    %*/</span>
<a name="l02141"></a>02141                     }
<a name="l02142"></a>02142                 | arg <span class="charliteral">&apos;/&apos;</span> arg
<a name="l02143"></a>02143                     {
<a name="l02144"></a>02144                     <span class="comment">/*%%%*/</span>
<a name="l02145"></a>02145                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <span class="charliteral">&apos;/&apos;</span>, $3);
<a name="l02146"></a>02146                     <span class="comment">/*%</span>
<a name="l02147"></a>02147 <span class="comment">                        $$ = dispatch3(binary, $1, ID2SYM(&apos;/&apos;), $3);</span>
<a name="l02148"></a>02148 <span class="comment">                    %*/</span>
<a name="l02149"></a>02149                     }
<a name="l02150"></a>02150                 | arg <span class="charliteral">&apos;%&apos;</span> arg
<a name="l02151"></a>02151                     {
<a name="l02152"></a>02152                     <span class="comment">/*%%%*/</span>
<a name="l02153"></a>02153                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <span class="charliteral">&apos;%&apos;</span>, $3);
<a name="l02154"></a>02154                     <span class="comment">/*%</span>
<a name="l02155"></a>02155 <span class="comment">                        $$ = dispatch3(binary, $1, ID2SYM(&apos;%&apos;), $3);</span>
<a name="l02156"></a>02156 <span class="comment">                    %*/</span>
<a name="l02157"></a>02157                     }
<a name="l02158"></a>02158                 | arg <a class="code" href="../../d5/d11/ripper_8c.html#a3637bfb7d8b8ae77f0dccb4841c70673">tPOW</a> arg
<a name="l02159"></a>02159                     {
<a name="l02160"></a>02160                     <span class="comment">/*%%%*/</span>
<a name="l02161"></a>02161                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <a class="code" href="../../d5/d11/ripper_8c.html#a3637bfb7d8b8ae77f0dccb4841c70673">tPOW</a>, $3);
<a name="l02162"></a>02162                     <span class="comment">/*%</span>
<a name="l02163"></a>02163 <span class="comment">                        $$ = dispatch3(binary, $1, ripper_intern(&quot;**&quot;), $3);</span>
<a name="l02164"></a>02164 <span class="comment">                    %*/</span>
<a name="l02165"></a>02165                     }
<a name="l02166"></a>02166                 | <a class="code" href="../../d5/d11/ripper_8c.html#afb221f5d4ce1cd557eb695967604d276">tUMINUS_NUM</a> <a class="code" href="../../d5/d11/ripper_8c.html#acf30b0b06859a67ac40b3b5ade640bec">tINTEGER</a> <a class="code" href="../../d5/d11/ripper_8c.html#a3637bfb7d8b8ae77f0dccb4841c70673">tPOW</a> arg
<a name="l02167"></a>02167                     {
<a name="l02168"></a>02168                     <span class="comment">/*%%%*/</span>
<a name="l02169"></a>02169                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($2, <a class="code" href="../../d5/d11/ripper_8c.html#a3637bfb7d8b8ae77f0dccb4841c70673">tPOW</a>, $4), <a class="code" href="../../d5/d11/ripper_8c.html#a2990cd3acbac56afa45019a045ddcd9e">tUMINUS</a>, 0);
<a name="l02170"></a>02170                     <span class="comment">/*%</span>
<a name="l02171"></a>02171 <span class="comment">                        $$ = dispatch3(binary, $2, ripper_intern(&quot;**&quot;), $4);</span>
<a name="l02172"></a>02172 <span class="comment">                        $$ = dispatch2(unary, ripper_intern(&quot;-@&quot;), $$);</span>
<a name="l02173"></a>02173 <span class="comment">                    %*/</span>
<a name="l02174"></a>02174                     }
<a name="l02175"></a>02175                 | <a class="code" href="../../d5/d11/ripper_8c.html#afb221f5d4ce1cd557eb695967604d276">tUMINUS_NUM</a> <a class="code" href="../../d5/d11/ripper_8c.html#aefe8891831bd955c4672cc5423fdf7e8">tFLOAT</a> <a class="code" href="../../d5/d11/ripper_8c.html#a3637bfb7d8b8ae77f0dccb4841c70673">tPOW</a> arg
<a name="l02176"></a>02176                     {
<a name="l02177"></a>02177                     <span class="comment">/*%%%*/</span>
<a name="l02178"></a>02178                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($2, <a class="code" href="../../d5/d11/ripper_8c.html#a3637bfb7d8b8ae77f0dccb4841c70673">tPOW</a>, $4), <a class="code" href="../../d5/d11/ripper_8c.html#a2990cd3acbac56afa45019a045ddcd9e">tUMINUS</a>, 0);
<a name="l02179"></a>02179                     <span class="comment">/*%</span>
<a name="l02180"></a>02180 <span class="comment">                        $$ = dispatch3(binary, $2, ripper_intern(&quot;**&quot;), $4);</span>
<a name="l02181"></a>02181 <span class="comment">                        $$ = dispatch2(unary, ripper_intern(&quot;-@&quot;), $$);</span>
<a name="l02182"></a>02182 <span class="comment">                    %*/</span>
<a name="l02183"></a>02183                     }
<a name="l02184"></a>02184                 | <a class="code" href="../../d5/d11/ripper_8c.html#a30c0584a6e12ebd260060a9b77159e90">tUPLUS</a> arg
<a name="l02185"></a>02185                     {
<a name="l02186"></a>02186                     <span class="comment">/*%%%*/</span>
<a name="l02187"></a>02187                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#abe72bdc22477862fab6b777a9e921c7b">call_uni_op</a>($2, <a class="code" href="../../d5/d11/ripper_8c.html#a30c0584a6e12ebd260060a9b77159e90">tUPLUS</a>);
<a name="l02188"></a>02188                     <span class="comment">/*%</span>
<a name="l02189"></a>02189 <span class="comment">                        $$ = dispatch2(unary, ripper_intern(&quot;+@&quot;), $2);</span>
<a name="l02190"></a>02190 <span class="comment">                    %*/</span>
<a name="l02191"></a>02191                     }
<a name="l02192"></a>02192                 | <a class="code" href="../../d5/d11/ripper_8c.html#a2990cd3acbac56afa45019a045ddcd9e">tUMINUS</a> arg
<a name="l02193"></a>02193                     {
<a name="l02194"></a>02194                     <span class="comment">/*%%%*/</span>
<a name="l02195"></a>02195                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#abe72bdc22477862fab6b777a9e921c7b">call_uni_op</a>($2, <a class="code" href="../../d5/d11/ripper_8c.html#a2990cd3acbac56afa45019a045ddcd9e">tUMINUS</a>);
<a name="l02196"></a>02196                     <span class="comment">/*%</span>
<a name="l02197"></a>02197 <span class="comment">                        $$ = dispatch2(unary, ripper_intern(&quot;-@&quot;), $2);</span>
<a name="l02198"></a>02198 <span class="comment">                    %*/</span>
<a name="l02199"></a>02199                     }
<a name="l02200"></a>02200                 | arg <span class="charliteral">&apos;|&apos;</span> arg
<a name="l02201"></a>02201                     {
<a name="l02202"></a>02202                     <span class="comment">/*%%%*/</span>
<a name="l02203"></a>02203                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <span class="charliteral">&apos;|&apos;</span>, $3);
<a name="l02204"></a>02204                     <span class="comment">/*%</span>
<a name="l02205"></a>02205 <span class="comment">                        $$ = dispatch3(binary, $1, ID2SYM(&apos;|&apos;), $3);</span>
<a name="l02206"></a>02206 <span class="comment">                    %*/</span>
<a name="l02207"></a>02207                     }
<a name="l02208"></a>02208                 | arg <span class="charliteral">&apos;^&apos;</span> arg
<a name="l02209"></a>02209                     {
<a name="l02210"></a>02210                     <span class="comment">/*%%%*/</span>
<a name="l02211"></a>02211                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <span class="charliteral">&apos;^&apos;</span>, $3);
<a name="l02212"></a>02212                     <span class="comment">/*%</span>
<a name="l02213"></a>02213 <span class="comment">                        $$ = dispatch3(binary, $1, ID2SYM(&apos;^&apos;), $3);</span>
<a name="l02214"></a>02214 <span class="comment">                    %*/</span>
<a name="l02215"></a>02215                     }
<a name="l02216"></a>02216                 | arg <span class="charliteral">&apos;&amp;&apos;</span> arg
<a name="l02217"></a>02217                     {
<a name="l02218"></a>02218                     <span class="comment">/*%%%*/</span>
<a name="l02219"></a>02219                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <span class="charliteral">&apos;&amp;&apos;</span>, $3);
<a name="l02220"></a>02220                     <span class="comment">/*%</span>
<a name="l02221"></a>02221 <span class="comment">                        $$ = dispatch3(binary, $1, ID2SYM(&apos;&amp;&apos;), $3);</span>
<a name="l02222"></a>02222 <span class="comment">                    %*/</span>
<a name="l02223"></a>02223                     }
<a name="l02224"></a>02224                 | arg <a class="code" href="../../d5/d11/ripper_8c.html#af5d97f1c301f97e35c69e5e21d698c8b">tCMP</a> arg
<a name="l02225"></a>02225                     {
<a name="l02226"></a>02226                     <span class="comment">/*%%%*/</span>
<a name="l02227"></a>02227                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <a class="code" href="../../d5/d11/ripper_8c.html#af5d97f1c301f97e35c69e5e21d698c8b">tCMP</a>, $3);
<a name="l02228"></a>02228                     <span class="comment">/*%</span>
<a name="l02229"></a>02229 <span class="comment">                        $$ = dispatch3(binary, $1, ripper_intern(&quot;&lt;=&gt;&quot;), $3);</span>
<a name="l02230"></a>02230 <span class="comment">                    %*/</span>
<a name="l02231"></a>02231                     }
<a name="l02232"></a>02232                 | arg <span class="charliteral">&apos;&gt;&apos;</span> arg
<a name="l02233"></a>02233                     {
<a name="l02234"></a>02234                     <span class="comment">/*%%%*/</span>
<a name="l02235"></a>02235                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <span class="charliteral">&apos;&gt;&apos;</span>, $3);
<a name="l02236"></a>02236                     <span class="comment">/*%</span>
<a name="l02237"></a>02237 <span class="comment">                        $$ = dispatch3(binary, $1, ID2SYM(&apos;&gt;&apos;), $3);</span>
<a name="l02238"></a>02238 <span class="comment">                    %*/</span>
<a name="l02239"></a>02239                     }
<a name="l02240"></a>02240                 | arg <a class="code" href="../../d5/d11/ripper_8c.html#a285fd90a21df46bc9781328e0ac5d22e">tGEQ</a> arg
<a name="l02241"></a>02241                     {
<a name="l02242"></a>02242                     <span class="comment">/*%%%*/</span>
<a name="l02243"></a>02243                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <a class="code" href="../../d5/d11/ripper_8c.html#a285fd90a21df46bc9781328e0ac5d22e">tGEQ</a>, $3);
<a name="l02244"></a>02244                     <span class="comment">/*%</span>
<a name="l02245"></a>02245 <span class="comment">                        $$ = dispatch3(binary, $1, ripper_intern(&quot;&gt;=&quot;), $3);</span>
<a name="l02246"></a>02246 <span class="comment">                    %*/</span>
<a name="l02247"></a>02247                     }
<a name="l02248"></a>02248                 | arg <span class="charliteral">&apos;&lt;&apos;</span> arg
<a name="l02249"></a>02249                     {
<a name="l02250"></a>02250                     <span class="comment">/*%%%*/</span>
<a name="l02251"></a>02251                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <span class="charliteral">&apos;&lt;&apos;</span>, $3);
<a name="l02252"></a>02252                     <span class="comment">/*%</span>
<a name="l02253"></a>02253 <span class="comment">                        $$ = dispatch3(binary, $1, ID2SYM(&apos;&lt;&apos;), $3);</span>
<a name="l02254"></a>02254 <span class="comment">                    %*/</span>
<a name="l02255"></a>02255                     }
<a name="l02256"></a>02256                 | arg <a class="code" href="../../d5/d11/ripper_8c.html#a4c271a73151d715c58bf15c8607054e0">tLEQ</a> arg
<a name="l02257"></a>02257                     {
<a name="l02258"></a>02258                     <span class="comment">/*%%%*/</span>
<a name="l02259"></a>02259                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <a class="code" href="../../d5/d11/ripper_8c.html#a4c271a73151d715c58bf15c8607054e0">tLEQ</a>, $3);
<a name="l02260"></a>02260                     <span class="comment">/*%</span>
<a name="l02261"></a>02261 <span class="comment">                        $$ = dispatch3(binary, $1, ripper_intern(&quot;&lt;=&quot;), $3);</span>
<a name="l02262"></a>02262 <span class="comment">                    %*/</span>
<a name="l02263"></a>02263                     }
<a name="l02264"></a>02264                 | arg <a class="code" href="../../d5/d11/ripper_8c.html#a6ea996f3ab75bd127d6326b180214c6f">tEQ</a> arg
<a name="l02265"></a>02265                     {
<a name="l02266"></a>02266                     <span class="comment">/*%%%*/</span>
<a name="l02267"></a>02267                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <a class="code" href="../../d5/d11/ripper_8c.html#a6ea996f3ab75bd127d6326b180214c6f">tEQ</a>, $3);
<a name="l02268"></a>02268                     <span class="comment">/*%</span>
<a name="l02269"></a>02269 <span class="comment">                        $$ = dispatch3(binary, $1, ripper_intern(&quot;==&quot;), $3);</span>
<a name="l02270"></a>02270 <span class="comment">                    %*/</span>
<a name="l02271"></a>02271                     }
<a name="l02272"></a>02272                 | arg <a class="code" href="../../d5/d11/ripper_8c.html#ac6db743a4f2e6f90976870022d8914a2">tEQQ</a> arg
<a name="l02273"></a>02273                     {
<a name="l02274"></a>02274                     <span class="comment">/*%%%*/</span>
<a name="l02275"></a>02275                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <a class="code" href="../../d5/d11/ripper_8c.html#ac6db743a4f2e6f90976870022d8914a2">tEQQ</a>, $3);
<a name="l02276"></a>02276                     <span class="comment">/*%</span>
<a name="l02277"></a>02277 <span class="comment">                        $$ = dispatch3(binary, $1, ripper_intern(&quot;===&quot;), $3);</span>
<a name="l02278"></a>02278 <span class="comment">                    %*/</span>
<a name="l02279"></a>02279                     }
<a name="l02280"></a>02280                 | arg <a class="code" href="../../d5/d11/ripper_8c.html#aa8f0fa309e4e39cda30f2116fb979320">tNEQ</a> arg
<a name="l02281"></a>02281                     {
<a name="l02282"></a>02282                     <span class="comment">/*%%%*/</span>
<a name="l02283"></a>02283                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <a class="code" href="../../d5/d11/ripper_8c.html#aa8f0fa309e4e39cda30f2116fb979320">tNEQ</a>, $3);
<a name="l02284"></a>02284                     <span class="comment">/*%</span>
<a name="l02285"></a>02285 <span class="comment">                        $$ = dispatch3(binary, $1, ripper_intern(&quot;!=&quot;), $3);</span>
<a name="l02286"></a>02286 <span class="comment">                    %*/</span>
<a name="l02287"></a>02287                     }
<a name="l02288"></a>02288                 | arg <a class="code" href="../../d5/d11/ripper_8c.html#a6fba3b7a35b6a4abc5692d7bc6f7cc51">tMATCH</a> arg
<a name="l02289"></a>02289                     {
<a name="l02290"></a>02290                     <span class="comment">/*%%%*/</span>
<a name="l02291"></a>02291                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a305eafa2cdc5ff3f853b558083697a2e">match_op</a>($1, $3);
<a name="l02292"></a>02292                         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($1) == NODE_LIT &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a394faf7191f18552a20cb17ce14226f0">TYPE</a>($1-&gt;nd_lit) == <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afd5c1e36d171ecc04514332e8dcf6388">T_REGEXP</a>) {
<a name="l02293"></a>02293                             $$ = <a class="code" href="../../d5/d11/ripper_8c.html#aa83f8f8839f89ddf518cdd5e9b6c1a34">reg_named_capture_assign</a>($1-&gt;nd_lit, $$);
<a name="l02294"></a>02294                         }
<a name="l02295"></a>02295                     <span class="comment">/*%</span>
<a name="l02296"></a>02296 <span class="comment">                        $$ = dispatch3(binary, $1, ripper_intern(&quot;=~&quot;), $3);</span>
<a name="l02297"></a>02297 <span class="comment">                    %*/</span>
<a name="l02298"></a>02298                     }
<a name="l02299"></a>02299                 | arg <a class="code" href="../../d5/d11/ripper_8c.html#a18a357e5edec5f1ff68c4bc4fc5d0c84">tNMATCH</a> arg
<a name="l02300"></a>02300                     {
<a name="l02301"></a>02301                     <span class="comment">/*%%%*/</span>
<a name="l02302"></a>02302                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <a class="code" href="../../d5/d11/ripper_8c.html#a18a357e5edec5f1ff68c4bc4fc5d0c84">tNMATCH</a>, $3);
<a name="l02303"></a>02303                     <span class="comment">/*%</span>
<a name="l02304"></a>02304 <span class="comment">                        $$ = dispatch3(binary, $1, ripper_intern(&quot;!~&quot;), $3);</span>
<a name="l02305"></a>02305 <span class="comment">                    %*/</span>
<a name="l02306"></a>02306                     }
<a name="l02307"></a>02307                 | <span class="charliteral">&apos;!&apos;</span> arg
<a name="l02308"></a>02308                     {
<a name="l02309"></a>02309                     <span class="comment">/*%%%*/</span>
<a name="l02310"></a>02310                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#abe72bdc22477862fab6b777a9e921c7b">call_uni_op</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a>($2), <span class="charliteral">&apos;!&apos;</span>);
<a name="l02311"></a>02311                     <span class="comment">/*%</span>
<a name="l02312"></a>02312 <span class="comment">                        $$ = dispatch2(unary, ID2SYM(&apos;!&apos;), $2);</span>
<a name="l02313"></a>02313 <span class="comment">                    %*/</span>
<a name="l02314"></a>02314                     }
<a name="l02315"></a>02315                 | <span class="charliteral">&apos;~&apos;</span> arg
<a name="l02316"></a>02316                     {
<a name="l02317"></a>02317                     <span class="comment">/*%%%*/</span>
<a name="l02318"></a>02318                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#abe72bdc22477862fab6b777a9e921c7b">call_uni_op</a>($2, <span class="charliteral">&apos;~&apos;</span>);
<a name="l02319"></a>02319                     <span class="comment">/*%</span>
<a name="l02320"></a>02320 <span class="comment">                        $$ = dispatch2(unary, ID2SYM(&apos;~&apos;), $2);</span>
<a name="l02321"></a>02321 <span class="comment">                    %*/</span>
<a name="l02322"></a>02322                     }
<a name="l02323"></a>02323                 | arg <a class="code" href="../../d5/d11/ripper_8c.html#aabd668249ab17583bb8ba7b0a15dc88a">tLSHFT</a> arg
<a name="l02324"></a>02324                     {
<a name="l02325"></a>02325                     <span class="comment">/*%%%*/</span>
<a name="l02326"></a>02326                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <a class="code" href="../../d5/d11/ripper_8c.html#aabd668249ab17583bb8ba7b0a15dc88a">tLSHFT</a>, $3);
<a name="l02327"></a>02327                     <span class="comment">/*%</span>
<a name="l02328"></a>02328 <span class="comment">                        $$ = dispatch3(binary, $1, ripper_intern(&quot;&lt;&lt;&quot;), $3);</span>
<a name="l02329"></a>02329 <span class="comment">                    %*/</span>
<a name="l02330"></a>02330                     }
<a name="l02331"></a>02331                 | arg <a class="code" href="../../d5/d11/ripper_8c.html#a5d34fc3d8e54b552366d4e8941852610">tRSHFT</a> arg
<a name="l02332"></a>02332                     {
<a name="l02333"></a>02333                     <span class="comment">/*%%%*/</span>
<a name="l02334"></a>02334                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8fd6db818a49f5f6a547d2e29e72910b">call_bin_op</a>($1, <a class="code" href="../../d5/d11/ripper_8c.html#a5d34fc3d8e54b552366d4e8941852610">tRSHFT</a>, $3);
<a name="l02335"></a>02335                     <span class="comment">/*%</span>
<a name="l02336"></a>02336 <span class="comment">                        $$ = dispatch3(binary, $1, ripper_intern(&quot;&gt;&gt;&quot;), $3);</span>
<a name="l02337"></a>02337 <span class="comment">                    %*/</span>
<a name="l02338"></a>02338                     }
<a name="l02339"></a>02339                 | arg <a class="code" href="../../d5/d11/ripper_8c.html#a65277f756450c2f9e7117faf2c01339a">tANDOP</a> arg
<a name="l02340"></a>02340                     {
<a name="l02341"></a>02341                     <span class="comment">/*%%%*/</span>
<a name="l02342"></a>02342                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a689edf560d6bc1a140826c56d48b3942">logop</a>(NODE_AND, $1, $3);
<a name="l02343"></a>02343                     <span class="comment">/*%</span>
<a name="l02344"></a>02344 <span class="comment">                        $$ = dispatch3(binary, $1, ripper_intern(&quot;&amp;&amp;&quot;), $3);</span>
<a name="l02345"></a>02345 <span class="comment">                    %*/</span>
<a name="l02346"></a>02346                     }
<a name="l02347"></a>02347                 | arg <a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a> arg
<a name="l02348"></a>02348                     {
<a name="l02349"></a>02349                     <span class="comment">/*%%%*/</span>
<a name="l02350"></a>02350                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a689edf560d6bc1a140826c56d48b3942">logop</a>(NODE_OR, $1, $3);
<a name="l02351"></a>02351                     <span class="comment">/*%</span>
<a name="l02352"></a>02352 <span class="comment">                        $$ = dispatch3(binary, $1, ripper_intern(&quot;||&quot;), $3);</span>
<a name="l02353"></a>02353 <span class="comment">                    %*/</span>
<a name="l02354"></a>02354                     }
<a name="l02355"></a>02355                 | <a class="code" href="../../d5/d11/ripper_8c.html#afb1d7e76236b8c3c87f3a241263313a1">keyword_defined</a> opt_nl {<a class="code" href="../../d5/d11/ripper_8c.html#a5f6a6fc9368d9a6eeb27c3c1d24d0e04">in_defined</a> = 1;} arg
<a name="l02356"></a>02356                     {
<a name="l02357"></a>02357                     <span class="comment">/*%%%*/</span>
<a name="l02358"></a>02358                         <a class="code" href="../../d5/d11/ripper_8c.html#a5f6a6fc9368d9a6eeb27c3c1d24d0e04">in_defined</a> = 0;
<a name="l02359"></a>02359                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a04094a051d2341654d9b16a1d646998e">NEW_DEFINED</a>($4);
<a name="l02360"></a>02360                     <span class="comment">/*%</span>
<a name="l02361"></a>02361 <span class="comment">                        in_defined = 0;</span>
<a name="l02362"></a>02362 <span class="comment">                        $$ = dispatch1(defined, $4);</span>
<a name="l02363"></a>02363 <span class="comment">                    %*/</span>
<a name="l02364"></a>02364                     }
<a name="l02365"></a>02365                 | arg <span class="charliteral">&apos;?&apos;</span> arg opt_nl <span class="charliteral">&apos;:&apos;</span> arg
<a name="l02366"></a>02366                     {
<a name="l02367"></a>02367                     <span class="comment">/*%%%*/</span>
<a name="l02368"></a>02368                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($1);
<a name="l02369"></a>02369                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a0e9ba36e1c5584b64a0bcfa5b66fcd8e">NEW_IF</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a>($1), $3, $6);
<a name="l02370"></a>02370                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l02371"></a>02371                     <span class="comment">/*%</span>
<a name="l02372"></a>02372 <span class="comment">                        $$ = dispatch3(ifop, $1, $3, $6);</span>
<a name="l02373"></a>02373 <span class="comment">                    %*/</span>
<a name="l02374"></a>02374                     }
<a name="l02375"></a>02375                 | primary
<a name="l02376"></a>02376                     {
<a name="l02377"></a>02377                         $$ = $1;
<a name="l02378"></a>02378                     }
<a name="l02379"></a>02379                 ;
<a name="l02380"></a>02380 
<a name="l02381"></a>02381 arg_value       : arg
<a name="l02382"></a>02382                     {
<a name="l02383"></a>02383                     <span class="comment">/*%%%*/</span>
<a name="l02384"></a>02384                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($1);
<a name="l02385"></a>02385                         $$ = $1;
<a name="l02386"></a>02386                         <span class="keywordflow">if</span> (!$$) $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a969f4dd65ae53a2ec90dbbb0420af61e">NEW_NIL</a>();
<a name="l02387"></a>02387                     <span class="comment">/*%</span>
<a name="l02388"></a>02388 <span class="comment">                        $$ = $1;</span>
<a name="l02389"></a>02389 <span class="comment">                    %*/</span>
<a name="l02390"></a>02390                     }
<a name="l02391"></a>02391                 ;
<a name="l02392"></a>02392 
<a name="l02393"></a>02393 aref_args       : <a class="code" href="../../d3/d09/ripper_8y.html#a2b9edf1e7cc4980ffa29e35e6186b170">none</a>
<a name="l02394"></a>02394                 | args trailer
<a name="l02395"></a>02395                     {
<a name="l02396"></a>02396                         $$ = $1;
<a name="l02397"></a>02397                     }
<a name="l02398"></a>02398                 | args <span class="charliteral">&apos;,&apos;</span> assocs trailer
<a name="l02399"></a>02399                     {
<a name="l02400"></a>02400                     <span class="comment">/*%%%*/</span>
<a name="l02401"></a>02401                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a96fe1c847b1abdd71e89dcf3504debce">arg_append</a>($1, <a class="code" href="../../d3/d09/ripper_8y.html#a4200cab94849f33b40039be68076fd95">NEW_HASH</a>($3));
<a name="l02402"></a>02402                     <span class="comment">/*%</span>
<a name="l02403"></a>02403 <span class="comment">                        $$ = arg_add_assocs($1, $3);</span>
<a name="l02404"></a>02404 <span class="comment">                    %*/</span>
<a name="l02405"></a>02405                     }
<a name="l02406"></a>02406                 | assocs trailer
<a name="l02407"></a>02407                     {
<a name="l02408"></a>02408                     <span class="comment">/*%%%*/</span>
<a name="l02409"></a>02409                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a4200cab94849f33b40039be68076fd95">NEW_HASH</a>($1));
<a name="l02410"></a>02410                     <span class="comment">/*%</span>
<a name="l02411"></a>02411 <span class="comment">                        $$ = arg_add_assocs(arg_new(), $1);</span>
<a name="l02412"></a>02412 <span class="comment">                    %*/</span>
<a name="l02413"></a>02413                     }
<a name="l02414"></a>02414                 ;
<a name="l02415"></a>02415 
<a name="l02416"></a>02416 paren_args      : <span class="charliteral">&apos;(&apos;</span> opt_call_args rparen
<a name="l02417"></a>02417                     {
<a name="l02418"></a>02418                     <span class="comment">/*%%%*/</span>
<a name="l02419"></a>02419                         $$ = $2;
<a name="l02420"></a>02420                     <span class="comment">/*%</span>
<a name="l02421"></a>02421 <span class="comment">                        $$ = dispatch1(arg_paren, escape_Qundef($2));</span>
<a name="l02422"></a>02422 <span class="comment">                    %*/</span>
<a name="l02423"></a>02423                     }
<a name="l02424"></a>02424                 ;
<a name="l02425"></a>02425 
<a name="l02426"></a>02426 opt_paren_args  : <a class="code" href="../../d3/d09/ripper_8y.html#a2b9edf1e7cc4980ffa29e35e6186b170">none</a>
<a name="l02427"></a>02427                 | paren_args
<a name="l02428"></a>02428                 ;
<a name="l02429"></a>02429 
<a name="l02430"></a>02430 opt_call_args   : <a class="code" href="../../d3/d09/ripper_8y.html#a2b9edf1e7cc4980ffa29e35e6186b170">none</a>
<a name="l02431"></a>02431                 | call_args
<a name="l02432"></a>02432                 | args <span class="charliteral">&apos;,&apos;</span>
<a name="l02433"></a>02433                     {
<a name="l02434"></a>02434                       $$ = $1;
<a name="l02435"></a>02435                     }
<a name="l02436"></a>02436                 | args <span class="charliteral">&apos;,&apos;</span> assocs <span class="charliteral">&apos;,&apos;</span>
<a name="l02437"></a>02437                     {
<a name="l02438"></a>02438                     <span class="comment">/*%%%*/</span>
<a name="l02439"></a>02439                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a96fe1c847b1abdd71e89dcf3504debce">arg_append</a>($1, <a class="code" href="../../d3/d09/ripper_8y.html#a4200cab94849f33b40039be68076fd95">NEW_HASH</a>($3));
<a name="l02440"></a>02440                     <span class="comment">/*%</span>
<a name="l02441"></a>02441 <span class="comment">                        $$ = arg_add_assocs($1, $3);</span>
<a name="l02442"></a>02442 <span class="comment">                    %*/</span>
<a name="l02443"></a>02443                     }
<a name="l02444"></a>02444                 | assocs <span class="charliteral">&apos;,&apos;</span>
<a name="l02445"></a>02445                     {
<a name="l02446"></a>02446                     <span class="comment">/*%%%*/</span>
<a name="l02447"></a>02447                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a4200cab94849f33b40039be68076fd95">NEW_HASH</a>($1));
<a name="l02448"></a>02448                     <span class="comment">/*%</span>
<a name="l02449"></a>02449 <span class="comment">                        $$ = arg_add_assocs(arg_new(), $1);</span>
<a name="l02450"></a>02450 <span class="comment">                    %*/</span>
<a name="l02451"></a>02451                     }
<a name="l02452"></a>02452                 ;
<a name="l02453"></a>02453 
<a name="l02454"></a>02454 call_args       : command
<a name="l02455"></a>02455                     {
<a name="l02456"></a>02456                     <span class="comment">/*%%%*/</span>
<a name="l02457"></a>02457                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($1);
<a name="l02458"></a>02458                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>($1);
<a name="l02459"></a>02459                     <span class="comment">/*%</span>
<a name="l02460"></a>02460 <span class="comment">                        $$ = arg_add(arg_new(), $1);</span>
<a name="l02461"></a>02461 <span class="comment">                    %*/</span>
<a name="l02462"></a>02462                     }
<a name="l02463"></a>02463                 | args opt_block_arg
<a name="l02464"></a>02464                     {
<a name="l02465"></a>02465                     <span class="comment">/*%%%*/</span>
<a name="l02466"></a>02466                         $$ = <a class="code" href="../../d7/dc0/parse_8y.html#a09e2a35ffd054287cd8a5f9e285975e6">arg_blk_pass</a>($1, $2);
<a name="l02467"></a>02467                     <span class="comment">/*%</span>
<a name="l02468"></a>02468 <span class="comment">                        $$ = arg_add_optblock($1, $2);</span>
<a name="l02469"></a>02469 <span class="comment">                    %*/</span>
<a name="l02470"></a>02470                     }
<a name="l02471"></a>02471                 | assocs opt_block_arg
<a name="l02472"></a>02472                     {
<a name="l02473"></a>02473                     <span class="comment">/*%%%*/</span>
<a name="l02474"></a>02474                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a4200cab94849f33b40039be68076fd95">NEW_HASH</a>($1));
<a name="l02475"></a>02475                         $$ = <a class="code" href="../../d7/dc0/parse_8y.html#a09e2a35ffd054287cd8a5f9e285975e6">arg_blk_pass</a>($$, $2);
<a name="l02476"></a>02476                     <span class="comment">/*%</span>
<a name="l02477"></a>02477 <span class="comment">                        $$ = arg_add_assocs(arg_new(), $1);</span>
<a name="l02478"></a>02478 <span class="comment">                        $$ = arg_add_optblock($$, $2);</span>
<a name="l02479"></a>02479 <span class="comment">                    %*/</span>
<a name="l02480"></a>02480                     }
<a name="l02481"></a>02481                 | args <span class="charliteral">&apos;,&apos;</span> assocs opt_block_arg
<a name="l02482"></a>02482                     {
<a name="l02483"></a>02483                     <span class="comment">/*%%%*/</span>
<a name="l02484"></a>02484                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a96fe1c847b1abdd71e89dcf3504debce">arg_append</a>($1, <a class="code" href="../../d3/d09/ripper_8y.html#a4200cab94849f33b40039be68076fd95">NEW_HASH</a>($3));
<a name="l02485"></a>02485                         $$ = <a class="code" href="../../d7/dc0/parse_8y.html#a09e2a35ffd054287cd8a5f9e285975e6">arg_blk_pass</a>($$, $4);
<a name="l02486"></a>02486                     <span class="comment">/*%</span>
<a name="l02487"></a>02487 <span class="comment">                        $$ = arg_add_optblock(arg_add_assocs($1, $3), $4);</span>
<a name="l02488"></a>02488 <span class="comment">                    %*/</span>
<a name="l02489"></a>02489                     }
<a name="l02490"></a>02490                 | block_arg
<a name="l02491"></a>02491                     <span class="comment">/*%c%*/</span>
<a name="l02492"></a>02492                     <span class="comment">/*%c</span>
<a name="l02493"></a>02493 <span class="comment">                    {</span>
<a name="l02494"></a>02494 <span class="comment">                        $$ = arg_add_block(arg_new(), $1);</span>
<a name="l02495"></a>02495 <span class="comment">                    }</span>
<a name="l02496"></a>02496 <span class="comment">                    %*/</span>
<a name="l02497"></a>02497                 ;
<a name="l02498"></a>02498 
<a name="l02499"></a>02499 command_args    :  {
<a name="l02500"></a>02500                         $&lt;val&gt;$ = <a class="code" href="../../d5/d11/ripper_8c.html#a2615da12fd7e3eda7681658c40b08e64">cmdarg_stack</a>;
<a name="l02501"></a>02501                         <a class="code" href="../../d5/d11/ripper_8c.html#abbb50c4060580ef708e0c96692509b42">CMDARG_PUSH</a>(1);
<a name="l02502"></a>02502                     }
<a name="l02503"></a>02503                   call_args
<a name="l02504"></a>02504                     {
<a name="l02505"></a>02505                         <span class="comment">/* CMDARG_POP() */</span>
<a name="l02506"></a>02506                         <a class="code" href="../../d5/d11/ripper_8c.html#a2615da12fd7e3eda7681658c40b08e64">cmdarg_stack</a> = $&lt;val&gt;1;
<a name="l02507"></a>02507                         $$ = $2;
<a name="l02508"></a>02508                     }
<a name="l02509"></a>02509                 ;
<a name="l02510"></a>02510 
<a name="l02511"></a>02511 block_arg       : <a class="code" href="../../d5/d11/ripper_8c.html#ab96f3c142b77bb37684eb3e8968ce99f">tAMPER</a> arg_value
<a name="l02512"></a>02512                     {
<a name="l02513"></a>02513                     <span class="comment">/*%%%*/</span>
<a name="l02514"></a>02514                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a322af61bffc5962fd3d31ad2fda1caea">NEW_BLOCK_PASS</a>($2);
<a name="l02515"></a>02515                     <span class="comment">/*%</span>
<a name="l02516"></a>02516 <span class="comment">                        $$ = $2;</span>
<a name="l02517"></a>02517 <span class="comment">                    %*/</span>
<a name="l02518"></a>02518                     }
<a name="l02519"></a>02519                 ;
<a name="l02520"></a>02520 
<a name="l02521"></a>02521 opt_block_arg   : <span class="charliteral">&apos;,&apos;</span> block_arg
<a name="l02522"></a>02522                     {
<a name="l02523"></a>02523                         $$ = $2;
<a name="l02524"></a>02524                     }
<a name="l02525"></a>02525                 | <a class="code" href="../../d3/d09/ripper_8y.html#a2b9edf1e7cc4980ffa29e35e6186b170">none</a>
<a name="l02526"></a>02526                     {
<a name="l02527"></a>02527                         $$ = 0;
<a name="l02528"></a>02528                     }
<a name="l02529"></a>02529                 ;
<a name="l02530"></a>02530 
<a name="l02531"></a>02531 args            : arg_value
<a name="l02532"></a>02532                     {
<a name="l02533"></a>02533                     <span class="comment">/*%%%*/</span>
<a name="l02534"></a>02534                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>($1);
<a name="l02535"></a>02535                     <span class="comment">/*%</span>
<a name="l02536"></a>02536 <span class="comment">                        $$ = arg_add(arg_new(), $1);</span>
<a name="l02537"></a>02537 <span class="comment">                    %*/</span>
<a name="l02538"></a>02538                     }
<a name="l02539"></a>02539                 | <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a> arg_value
<a name="l02540"></a>02540                     {
<a name="l02541"></a>02541                     <span class="comment">/*%%%*/</span>
<a name="l02542"></a>02542                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a62c19da24c2e3f16209d63ec2a8282c7">NEW_SPLAT</a>($2);
<a name="l02543"></a>02543                     <span class="comment">/*%</span>
<a name="l02544"></a>02544 <span class="comment">                        $$ = arg_add_star(arg_new(), $2);</span>
<a name="l02545"></a>02545 <span class="comment">                    %*/</span>
<a name="l02546"></a>02546                     }
<a name="l02547"></a>02547                 | args <span class="charliteral">&apos;,&apos;</span> arg_value
<a name="l02548"></a>02548                     {
<a name="l02549"></a>02549                     <span class="comment">/*%%%*/</span>
<a name="l02550"></a>02550                         NODE *n1;
<a name="l02551"></a>02551                         <span class="keywordflow">if</span> ((n1 = <a class="code" href="../../d7/dc0/parse_8y.html#ac03fbbbe2d1f40883c0ed70f9fa0b517">splat_array</a>($1)) != 0) {
<a name="l02552"></a>02552                             $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>(n1, $3);
<a name="l02553"></a>02553                         }
<a name="l02554"></a>02554                         <span class="keywordflow">else</span> {
<a name="l02555"></a>02555                             $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a96fe1c847b1abdd71e89dcf3504debce">arg_append</a>($1, $3);
<a name="l02556"></a>02556                         }
<a name="l02557"></a>02557                     <span class="comment">/*%</span>
<a name="l02558"></a>02558 <span class="comment">                        $$ = arg_add($1, $3);</span>
<a name="l02559"></a>02559 <span class="comment">                    %*/</span>
<a name="l02560"></a>02560                     }
<a name="l02561"></a>02561                 | args <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a> arg_value
<a name="l02562"></a>02562                     {
<a name="l02563"></a>02563                     <span class="comment">/*%%%*/</span>
<a name="l02564"></a>02564                         NODE *n1;
<a name="l02565"></a>02565                         <span class="keywordflow">if</span> ((<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($4) == NODE_ARRAY) &amp;&amp; (n1 = <a class="code" href="../../d7/dc0/parse_8y.html#ac03fbbbe2d1f40883c0ed70f9fa0b517">splat_array</a>($1)) != 0) {
<a name="l02566"></a>02566                             $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a95704859ba0b4e6cd52503bad1e2620f">list_concat</a>(n1, $4);
<a name="l02567"></a>02567                         }
<a name="l02568"></a>02568                         <span class="keywordflow">else</span> {
<a name="l02569"></a>02569                             $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae6c095551246969e88aaa53d80b6ddcd">arg_concat</a>($1, $4);
<a name="l02570"></a>02570                         }
<a name="l02571"></a>02571                     <span class="comment">/*%</span>
<a name="l02572"></a>02572 <span class="comment">                        $$ = arg_add_star($1, $4);</span>
<a name="l02573"></a>02573 <span class="comment">                    %*/</span>
<a name="l02574"></a>02574                     }
<a name="l02575"></a>02575                 ;
<a name="l02576"></a>02576 
<a name="l02577"></a>02577 mrhs            : args <span class="charliteral">&apos;,&apos;</span> arg_value
<a name="l02578"></a>02578                     {
<a name="l02579"></a>02579                     <span class="comment">/*%%%*/</span>
<a name="l02580"></a>02580                         NODE *n1;
<a name="l02581"></a>02581                         <span class="keywordflow">if</span> ((n1 = <a class="code" href="../../d7/dc0/parse_8y.html#ac03fbbbe2d1f40883c0ed70f9fa0b517">splat_array</a>($1)) != 0) {
<a name="l02582"></a>02582                             $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>(n1, $3);
<a name="l02583"></a>02583                         }
<a name="l02584"></a>02584                         <span class="keywordflow">else</span> {
<a name="l02585"></a>02585                             $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a96fe1c847b1abdd71e89dcf3504debce">arg_append</a>($1, $3);
<a name="l02586"></a><a class="code" href="../../d7/dc0/parse_8y.html#a1b3d00c017c8bf7d4f9e26ead985b7a7">02586</a>                         }
<a name="l02587"></a>02587                     <span class="comment">/*%</span>
<a name="l02588"></a>02588 <span class="comment">                        $$ = mrhs_add(args2mrhs($1), $3);</span>
<a name="l02589"></a>02589 <span class="comment">                    %*/</span>
<a name="l02590"></a>02590                     }
<a name="l02591"></a>02591                 | args <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a> arg_value
<a name="l02592"></a><a class="code" href="../../d7/dc0/parse_8y.html#a98165a3b414586db3e891b44aa1eed3f">02592</a>                     {
<a name="l02593"></a>02593                     <span class="comment">/*%%%*/</span>
<a name="l02594"></a>02594                         NODE *n1;
<a name="l02595"></a><a class="code" href="../../d7/dc0/parse_8y.html#a6b3690b8c77f04eaeb974cfec480b6bb">02595</a>                         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($4) == NODE_ARRAY &amp;&amp;
<a name="l02596"></a>02596                             (n1 = <a class="code" href="../../d7/dc0/parse_8y.html#ac03fbbbe2d1f40883c0ed70f9fa0b517">splat_array</a>($1)) != 0) {
<a name="l02597"></a>02597                             $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a95704859ba0b4e6cd52503bad1e2620f">list_concat</a>(n1, $4);
<a name="l02598"></a>02598                         }
<a name="l02599"></a>02599                         <span class="keywordflow">else</span> {
<a name="l02600"></a>02600                             $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae6c095551246969e88aaa53d80b6ddcd">arg_concat</a>($1, $4);
<a name="l02601"></a>02601                         }
<a name="l02602"></a>02602                     <span class="comment">/*%</span>
<a name="l02603"></a>02603 <span class="comment">                        $$ = mrhs_add_star(args2mrhs($1), $4);</span>
<a name="l02604"></a>02604 <span class="comment">                    %*/</span>
<a name="l02605"></a>02605                     }
<a name="l02606"></a>02606                 | <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a> arg_value
<a name="l02607"></a>02607                     {
<a name="l02608"></a>02608                     <span class="comment">/*%%%*/</span>
<a name="l02609"></a>02609                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a62c19da24c2e3f16209d63ec2a8282c7">NEW_SPLAT</a>($2);
<a name="l02610"></a>02610                     <span class="comment">/*%</span>
<a name="l02611"></a>02611 <span class="comment">                        $$ = mrhs_add_star(mrhs_new(), $2);</span>
<a name="l02612"></a>02612 <span class="comment">                    %*/</span>
<a name="l02613"></a>02613                     }
<a name="l02614"></a>02614                 ;
<a name="l02615"></a>02615 
<a name="l02616"></a>02616 primary         : literal
<a name="l02617"></a>02617                 | strings
<a name="l02618"></a>02618                 | <a class="code" href="../../d3/d09/ripper_8y.html#aa4c79e4aecba063c91be9014332dd797">xstring</a>
<a name="l02619"></a>02619                 | <a class="code" href="../../d3/d09/ripper_8y.html#a91a8792a60d26aa3a547451afe30e002">regexp</a>
<a name="l02620"></a>02620                 | <a class="code" href="../../d3/d09/ripper_8y.html#a4a8f1bb42e94b457a13faac8c356b13a">words</a>
<a name="l02621"></a>02621                 | <a class="code" href="../../d7/dc0/parse_8y.html#a9f7b98b2be9bd5c600c9aeacf97038e7">qwords</a>
<a name="l02622"></a>02622                 | var_ref
<a name="l02623"></a>02623                 | backref
<a name="l02624"></a>02624                 | <a class="code" href="../../d5/d11/ripper_8c.html#aea28d934fe4e93590bcea40f409e1a81">tFID</a>
<a name="l02625"></a>02625                     {
<a name="l02626"></a>02626                     <span class="comment">/*%%%*/</span>
<a name="l02627"></a>02627                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#ab2c9a6c46cf2371d4268127604a2997c">NEW_FCALL</a>($1, 0);
<a name="l02628"></a><a class="code" href="../../d7/dc0/parse_8y.html#a7bfdc65c70f73fb2638c4d70047bd932">02628</a>                     <span class="comment">/*%</span>
<a name="l02629"></a>02629 <span class="comment">                        $$ = method_arg(dispatch1(fcall, $1), arg_new());</span>
<a name="l02630"></a>02630 <span class="comment">                    %*/</span>
<a name="l02631"></a>02631                     }
<a name="l02632"></a>02632                 | k_begin
<a name="l02633"></a>02633                     {
<a name="l02634"></a>02634                     <span class="comment">/*%%%*/</span>
<a name="l02635"></a>02635                         $&lt;num&gt;$ = <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>;
<a name="l02636"></a>02636                     <span class="comment">/*%</span>
<a name="l02637"></a>02637 <span class="comment">                    %*/</span>
<a name="l02638"></a>02638                     }
<a name="l02639"></a>02639                   bodystmt
<a name="l02640"></a>02640                   <a class="code" href="../../d7/dc0/parse_8y.html#af8f1bc61d0e71c5c18405c4323df58cd">k_end</a>
<a name="l02641"></a>02641                     {
<a name="l02642"></a>02642                     <span class="comment">/*%%%*/</span>
<a name="l02643"></a>02643                         <span class="keywordflow">if</span> ($3 == NULL) {
<a name="l02644"></a>02644                             $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a969f4dd65ae53a2ec90dbbb0420af61e">NEW_NIL</a>();
<a name="l02645"></a>02645                         }
<a name="l02646"></a>02646                         <span class="keywordflow">else</span> {
<a name="l02647"></a>02647                             <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($3) == NODE_RESCUE ||
<a name="l02648"></a>02648                                 <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($3) == NODE_ENSURE)
<a name="l02649"></a>02649                                 <a class="code" href="../../d3/d09/ripper_8y.html#ac821dfc4ca1d4673db9669205be97f85">nd_set_line</a>($3, $&lt;num&gt;2);
<a name="l02650"></a>02650                             $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>($3);
<a name="l02651"></a>02651                         }
<a name="l02652"></a>02652                         <a class="code" href="../../d3/d09/ripper_8y.html#ac821dfc4ca1d4673db9669205be97f85">nd_set_line</a>($$, $&lt;num&gt;2);
<a name="l02653"></a><a class="code" href="../../d7/dc0/parse_8y.html#a21f39e260a52139e57b168c8ae834926">02653</a>                     <span class="comment">/*%</span>
<a name="l02654"></a>02654 <span class="comment">                        $$ = dispatch1(begin, $3);</span>
<a name="l02655"></a>02655 <span class="comment">                    %*/</span>
<a name="l02656"></a>02656                     }
<a name="l02657"></a>02657                 | <a class="code" href="../../d5/d11/ripper_8c.html#a02644b13da577555e023744bcc01df78">tLPAREN_ARG</a> expr {<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ad1e711c09425cc55dd8982c6486d14cb">EXPR_ENDARG</a>;} rparen
<a name="l02658"></a>02658                     {
<a name="l02659"></a>02659                         <a class="code" href="../../d5/d11/ripper_8c.html#ac3f01cfa65c2c0a61a6f83b556b892f3">rb_warning0</a>(<span class="stringliteral">&quot;(...) interpreted as grouped expression&quot;</span>);
<a name="l02660"></a>02660                     <span class="comment">/*%%%*/</span>
<a name="l02661"></a>02661                         $$ = $2;
<a name="l02662"></a>02662                     <span class="comment">/*%</span>
<a name="l02663"></a>02663 <span class="comment">                        $$ = dispatch1(paren, $2);</span>
<a name="l02664"></a>02664 <span class="comment">                    %*/</span>
<a name="l02665"></a>02665                     }
<a name="l02666"></a>02666                 | <a class="code" href="../../d5/d11/ripper_8c.html#a8d562a1eeeebb179b8571743d06dd937">tLPAREN</a> compstmt <span class="charliteral">&apos;)&apos;</span>
<a name="l02667"></a>02667                     {
<a name="l02668"></a>02668                     <span class="comment">/*%%%*/</span>
<a name="l02669"></a><a class="code" href="../../d7/dc0/parse_8y.html#a2ac1143ac343c79cbfa448e30d74fa1c">02669</a>                         $$ = $2;
<a name="l02670"></a>02670                     <span class="comment">/*%</span>
<a name="l02671"></a>02671 <span class="comment">                        $$ = dispatch1(paren, $2);</span>
<a name="l02672"></a>02672 <span class="comment">                    %*/</span>
<a name="l02673"></a>02673                     }
<a name="l02674"></a>02674                 | primary_value <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a> <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a>
<a name="l02675"></a>02675                     {
<a name="l02676"></a>02676                     <span class="comment">/*%%%*/</span>
<a name="l02677"></a>02677                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a109b95bb64b197f905c1c1daa2ec996b">NEW_COLON2</a>($1, $3);
<a name="l02678"></a>02678                     <span class="comment">/*%</span>
<a name="l02679"></a>02679 <span class="comment">                        $$ = dispatch2(const_path_ref, $1, $3);</span>
<a name="l02680"></a>02680 <span class="comment">                    %*/</span>
<a name="l02681"></a>02681                     }
<a name="l02682"></a>02682                 | <a class="code" href="../../d5/d11/ripper_8c.html#a76d2c0533b6023921f54284bf058fa11">tCOLON3</a> <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a>
<a name="l02683"></a>02683                     {
<a name="l02684"></a>02684                     <span class="comment">/*%%%*/</span>
<a name="l02685"></a>02685                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a27482ec92482376d5ed688c4794a436c">NEW_COLON3</a>($2);
<a name="l02686"></a><a class="code" href="../../d7/dc0/parse_8y.html#a894a3ad3cfafeac39fdccabbe051b8d8">02686</a>                     <span class="comment">/*%</span>
<a name="l02687"></a>02687 <span class="comment">                        $$ = dispatch1(top_const_ref, $2);</span>
<a name="l02688"></a>02688 <span class="comment">                    %*/</span>
<a name="l02689"></a>02689                     }
<a name="l02690"></a>02690                 | <a class="code" href="../../d5/d11/ripper_8c.html#a8924ededc369aa7c8ff7605073acbd68">tLBRACK</a> aref_args <span class="charliteral">&apos;]&apos;</span>
<a name="l02691"></a>02691                     {
<a name="l02692"></a>02692                     <span class="comment">/*%%%*/</span>
<a name="l02693"></a>02693                         <span class="keywordflow">if</span> ($2 == 0) {
<a name="l02694"></a>02694                             $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a3d0f928629afd9bafaf3750a9df5ba86">NEW_ZARRAY</a>(); <span class="comment">/* zero length array*/</span>
<a name="l02695"></a><a class="code" href="../../d7/dc0/parse_8y.html#ab90ab022d7dbe70bb1ef1536150364f9">02695</a>                         }
<a name="l02696"></a>02696                         <span class="keywordflow">else</span> {
<a name="l02697"></a>02697                             $$ = $2;
<a name="l02698"></a>02698                         }
<a name="l02699"></a>02699                     <span class="comment">/*%</span>
<a name="l02700"></a>02700 <span class="comment">                        $$ = dispatch1(array, escape_Qundef($2));</span>
<a name="l02701"></a>02701 <span class="comment">                    %*/</span>
<a name="l02702"></a>02702                     }
<a name="l02703"></a>02703                 | <a class="code" href="../../d5/d11/ripper_8c.html#a47ff76b749ae189a435ebe6ac97c6afa">tLBRACE</a> assoc_list <span class="charliteral">&apos;}&apos;</span>
<a name="l02704"></a>02704                     {
<a name="l02705"></a>02705                     <span class="comment">/*%%%*/</span>
<a name="l02706"></a>02706                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a4200cab94849f33b40039be68076fd95">NEW_HASH</a>($2);
<a name="l02707"></a>02707                     <span class="comment">/*%</span>
<a name="l02708"></a>02708 <span class="comment">                        $$ = dispatch1(hash, escape_Qundef($2));</span>
<a name="l02709"></a>02709 <span class="comment">                    %*/</span>
<a name="l02710"></a>02710                     }
<a name="l02711"></a>02711                 | <a class="code" href="../../d5/d11/ripper_8c.html#ab2da8a02f53da70f08f59bfcefb370d0">keyword_return</a>
<a name="l02712"></a>02712                     {
<a name="l02713"></a>02713                     <span class="comment">/*%%%*/</span>
<a name="l02714"></a>02714                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a8248068d560005b8d3311ae3bd74c5ac">NEW_RETURN</a>(0);
<a name="l02715"></a>02715                     <span class="comment">/*%</span>
<a name="l02716"></a>02716 <span class="comment">                        $$ = dispatch0(return0);</span>
<a name="l02717"></a>02717 <span class="comment">                    %*/</span>
<a name="l02718"></a>02718                     }
<a name="l02719"></a>02719                 | <a class="code" href="../../d5/d11/ripper_8c.html#a23d86621a145239a20c9496993a87e1a">keyword_yield</a> <span class="charliteral">&apos;(&apos;</span> call_args rparen
<a name="l02720"></a>02720                     {
<a name="l02721"></a>02721                     <span class="comment">/*%%%*/</span>
<a name="l02722"></a>02722                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ab68ad814e43aeadb75b46055678657b7">new_yield</a>($3);
<a name="l02723"></a>02723                     <span class="comment">/*%</span>
<a name="l02724"></a>02724 <span class="comment">                        $$ = dispatch1(yield, dispatch1(paren, $3));</span>
<a name="l02725"></a>02725 <span class="comment">                    %*/</span>
<a name="l02726"></a>02726                     }
<a name="l02727"></a>02727                 | <a class="code" href="../../d5/d11/ripper_8c.html#a23d86621a145239a20c9496993a87e1a">keyword_yield</a> <span class="charliteral">&apos;(&apos;</span> rparen
<a name="l02728"></a><a class="code" href="../../d7/dc0/parse_8y.html#a15d355d35abb4f5715f9cc327e50402f">02728</a>                     {
<a name="l02729"></a>02729                     <span class="comment">/*%%%*/</span>
<a name="l02730"></a>02730                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a7796bc2b7ee4d35c0839cdc721200861">NEW_YIELD</a>(0, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aba0717d2689eb68797421a02ab9295c6">Qfalse</a>);
<a name="l02731"></a>02731                     <span class="comment">/*%</span>
<a name="l02732"></a>02732 <span class="comment">                        $$ = dispatch1(yield, dispatch1(paren, arg_new()));</span>
<a name="l02733"></a>02733 <span class="comment">                    %*/</span>
<a name="l02734"></a>02734                     }
<a name="l02735"></a>02735                 | <a class="code" href="../../d5/d11/ripper_8c.html#a23d86621a145239a20c9496993a87e1a">keyword_yield</a>
<a name="l02736"></a>02736                     {
<a name="l02737"></a>02737                     <span class="comment">/*%%%*/</span>
<a name="l02738"></a>02738                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a7796bc2b7ee4d35c0839cdc721200861">NEW_YIELD</a>(0, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aba0717d2689eb68797421a02ab9295c6">Qfalse</a>);
<a name="l02739"></a>02739                     <span class="comment">/*%</span>
<a name="l02740"></a>02740 <span class="comment">                        $$ = dispatch0(yield0);</span>
<a name="l02741"></a>02741 <span class="comment">                    %*/</span>
<a name="l02742"></a>02742                     }
<a name="l02743"></a>02743                 | <a class="code" href="../../d5/d11/ripper_8c.html#afb1d7e76236b8c3c87f3a241263313a1">keyword_defined</a> opt_nl <span class="charliteral">&apos;(&apos;</span> {<a class="code" href="../../d5/d11/ripper_8c.html#a5f6a6fc9368d9a6eeb27c3c1d24d0e04">in_defined</a> = 1;} expr rparen
<a name="l02744"></a>02744                     {
<a name="l02745"></a>02745                     <span class="comment">/*%%%*/</span>
<a name="l02746"></a>02746                         <a class="code" href="../../d5/d11/ripper_8c.html#a5f6a6fc9368d9a6eeb27c3c1d24d0e04">in_defined</a> = 0;
<a name="l02747"></a>02747                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a04094a051d2341654d9b16a1d646998e">NEW_DEFINED</a>($5);
<a name="l02748"></a>02748                     <span class="comment">/*%</span>
<a name="l02749"></a>02749 <span class="comment">                        in_defined = 0;</span>
<a name="l02750"></a>02750 <span class="comment">                        $$ = dispatch1(defined, $5);</span>
<a name="l02751"></a>02751 <span class="comment">                    %*/</span>
<a name="l02752"></a>02752                     }
<a name="l02753"></a>02753                 | <a class="code" href="../../d5/d11/ripper_8c.html#aa7618608a8ca97b99b9b2760935869eb">keyword_not</a> <span class="charliteral">&apos;(&apos;</span> expr rparen
<a name="l02754"></a>02754                     {
<a name="l02755"></a>02755                     <span class="comment">/*%%%*/</span>
<a name="l02756"></a>02756                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#abe72bdc22477862fab6b777a9e921c7b">call_uni_op</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a>($3), <span class="charliteral">&apos;!&apos;</span>);
<a name="l02757"></a>02757                     <span class="comment">/*%</span>
<a name="l02758"></a>02758 <span class="comment">                        $$ = dispatch2(unary, ripper_intern(&quot;not&quot;), $3);</span>
<a name="l02759"></a>02759 <span class="comment">                    %*/</span>
<a name="l02760"></a>02760                     }
<a name="l02761"></a>02761                 | <a class="code" href="../../d5/d11/ripper_8c.html#aa7618608a8ca97b99b9b2760935869eb">keyword_not</a> <span class="charliteral">&apos;(&apos;</span> rparen
<a name="l02762"></a>02762                     {
<a name="l02763"></a>02763                     <span class="comment">/*%%%*/</span>
<a name="l02764"></a>02764                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#abe72bdc22477862fab6b777a9e921c7b">call_uni_op</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a969f4dd65ae53a2ec90dbbb0420af61e">NEW_NIL</a>()), <span class="charliteral">&apos;!&apos;</span>);
<a name="l02765"></a>02765                     <span class="comment">/*%</span>
<a name="l02766"></a>02766 <span class="comment">                        $$ = dispatch2(unary, ripper_intern(&quot;not&quot;), Qnil);</span>
<a name="l02767"></a>02767 <span class="comment">                    %*/</span>
<a name="l02768"></a>02768                     }
<a name="l02769"></a>02769                 | operation brace_block
<a name="l02770"></a>02770                     {
<a name="l02771"></a>02771                     <span class="comment">/*%%%*/</span>
<a name="l02772"></a>02772                         $2-&gt;nd_iter = <a class="code" href="../../d3/d09/ripper_8y.html#ab2c9a6c46cf2371d4268127604a2997c">NEW_FCALL</a>($1, 0);
<a name="l02773"></a>02773                         $$ = $2;
<a name="l02774"></a>02774                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($2-&gt;nd_iter, $2);
<a name="l02775"></a>02775                     <span class="comment">/*%</span>
<a name="l02776"></a>02776 <span class="comment">                        $$ = method_arg(dispatch1(fcall, $1), arg_new());</span>
<a name="l02777"></a>02777 <span class="comment">                        $$ = method_add_block($$, $2);</span>
<a name="l02778"></a>02778 <span class="comment">                    %*/</span>
<a name="l02779"></a>02779                     }
<a name="l02780"></a>02780                 | method_call
<a name="l02781"></a>02781                 | method_call brace_block
<a name="l02782"></a>02782                     {
<a name="l02783"></a>02783                     <span class="comment">/*%%%*/</span>
<a name="l02784"></a>02784                         <a class="code" href="../../d5/d11/ripper_8c.html#a437c8ac82de682de2075a396512f16e0">block_dup_check</a>($1-&gt;nd_args, $2);
<a name="l02785"></a>02785                         $2-&gt;nd_iter = $1;
<a name="l02786"></a>02786                         $$ = $2;
<a name="l02787"></a>02787                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l02788"></a>02788                     <span class="comment">/*%</span>
<a name="l02789"></a>02789 <span class="comment">                        $$ = method_add_block($1, $2);</span>
<a name="l02790"></a>02790 <span class="comment">                    %*/</span>
<a name="l02791"></a>02791                     }
<a name="l02792"></a>02792                 | <a class="code" href="../../d5/d11/ripper_8c.html#a4e47dd239d0fcc7c52fdbcc1e1955ef5">tLAMBDA</a> lambda
<a name="l02793"></a>02793                     {
<a name="l02794"></a>02794                         $$ = $2;
<a name="l02795"></a>02795                     }
<a name="l02796"></a>02796                 | k_if expr_value then
<a name="l02797"></a>02797                   compstmt
<a name="l02798"></a>02798                   if_tail
<a name="l02799"></a>02799                   <a class="code" href="../../d7/dc0/parse_8y.html#af8f1bc61d0e71c5c18405c4323df58cd">k_end</a>
<a name="l02800"></a>02800                     {
<a name="l02801"></a>02801                     <span class="comment">/*%%%*/</span>
<a name="l02802"></a>02802                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a0e9ba36e1c5584b64a0bcfa5b66fcd8e">NEW_IF</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a>($2), $4, $5);
<a name="l02803"></a>02803                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $2);
<a name="l02804"></a>02804                     <span class="comment">/*%</span>
<a name="l02805"></a>02805 <span class="comment">                        $$ = dispatch3(if, $2, $4, escape_Qundef($5));</span>
<a name="l02806"></a>02806 <span class="comment">                    %*/</span>
<a name="l02807"></a>02807                     }
<a name="l02808"></a>02808                 | k_unless expr_value then
<a name="l02809"></a>02809                   compstmt
<a name="l02810"></a>02810                   opt_else
<a name="l02811"></a>02811                   <a class="code" href="../../d7/dc0/parse_8y.html#af8f1bc61d0e71c5c18405c4323df58cd">k_end</a>
<a name="l02812"></a>02812                     {
<a name="l02813"></a>02813                     <span class="comment">/*%%%*/</span>
<a name="l02814"></a>02814                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a38b12ae1dd36af194b6328822949756c">NEW_UNLESS</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a>($2), $4, $5);
<a name="l02815"></a>02815                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $2);
<a name="l02816"></a>02816                     <span class="comment">/*%</span>
<a name="l02817"></a>02817 <span class="comment">                        $$ = dispatch3(unless, $2, $4, escape_Qundef($5));</span>
<a name="l02818"></a>02818 <span class="comment">                    %*/</span>
<a name="l02819"></a>02819                     }
<a name="l02820"></a>02820                 | k_while {<a class="code" href="../../d5/d11/ripper_8c.html#adc05d33a1a8b13c91b4ec628df477f76">COND_PUSH</a>(1);} expr_value <span class="keywordflow">do</span> {<a class="code" href="../../d5/d11/ripper_8c.html#a95d06f6d6719f8d7d24b40d545015c82">COND_POP</a>();}
<a name="l02821"></a>02821                   compstmt
<a name="l02822"></a>02822                   <a class="code" href="../../d7/dc0/parse_8y.html#af8f1bc61d0e71c5c18405c4323df58cd">k_end</a>
<a name="l02823"></a>02823                     {
<a name="l02824"></a>02824                     <span class="comment">/*%%%*/</span>
<a name="l02825"></a>02825                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a10be5c585568d23803cbe84a2106b48d">NEW_WHILE</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a>($3), $6, 1);
<a name="l02826"></a>02826                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $3);
<a name="l02827"></a>02827                     <span class="comment">/*%</span>
<a name="l02828"></a>02828 <span class="comment">                        $$ = dispatch2(while, $3, $6);</span>
<a name="l02829"></a>02829 <span class="comment">                    %*/</span>
<a name="l02830"></a>02830                     }
<a name="l02831"></a>02831                 | k_until {<a class="code" href="../../d5/d11/ripper_8c.html#adc05d33a1a8b13c91b4ec628df477f76">COND_PUSH</a>(1);} expr_value <span class="keywordflow">do</span> {<a class="code" href="../../d5/d11/ripper_8c.html#a95d06f6d6719f8d7d24b40d545015c82">COND_POP</a>();}
<a name="l02832"></a>02832                   compstmt
<a name="l02833"></a>02833                   <a class="code" href="../../d7/dc0/parse_8y.html#af8f1bc61d0e71c5c18405c4323df58cd">k_end</a>
<a name="l02834"></a>02834                     {
<a name="l02835"></a>02835                     <span class="comment">/*%%%*/</span>
<a name="l02836"></a>02836                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a63a47e707cafd9c5d43db5f49f6b5a05">NEW_UNTIL</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a>($3), $6, 1);
<a name="l02837"></a>02837                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $3);
<a name="l02838"></a>02838                     <span class="comment">/*%</span>
<a name="l02839"></a>02839 <span class="comment">                        $$ = dispatch2(until, $3, $6);</span>
<a name="l02840"></a>02840 <span class="comment">                    %*/</span>
<a name="l02841"></a>02841                     }
<a name="l02842"></a>02842                 | k_case expr_value opt_terms
<a name="l02843"></a>02843                   case_body
<a name="l02844"></a>02844                   <a class="code" href="../../d7/dc0/parse_8y.html#af8f1bc61d0e71c5c18405c4323df58cd">k_end</a>
<a name="l02845"></a>02845                     {
<a name="l02846"></a>02846                     <span class="comment">/*%%%*/</span>
<a name="l02847"></a>02847                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#ae9c97d06f87ba41d26c402ed65477795">NEW_CASE</a>($2, $4);
<a name="l02848"></a>02848                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $2);
<a name="l02849"></a>02849                     <span class="comment">/*%</span>
<a name="l02850"></a>02850 <span class="comment">                        $$ = dispatch2(case, $2, $4);</span>
<a name="l02851"></a>02851 <span class="comment">                    %*/</span>
<a name="l02852"></a>02852                     }
<a name="l02853"></a>02853                 | k_case opt_terms case_body <a class="code" href="../../d7/dc0/parse_8y.html#af8f1bc61d0e71c5c18405c4323df58cd">k_end</a>
<a name="l02854"></a>02854                     {
<a name="l02855"></a>02855                     <span class="comment">/*%%%*/</span>
<a name="l02856"></a>02856                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#ae9c97d06f87ba41d26c402ed65477795">NEW_CASE</a>(0, $3);
<a name="l02857"></a>02857                     <span class="comment">/*%</span>
<a name="l02858"></a>02858 <span class="comment">                        $$ = dispatch2(case, Qnil, $3);</span>
<a name="l02859"></a>02859 <span class="comment">                    %*/</span>
<a name="l02860"></a>02860                     }
<a name="l02861"></a>02861                 | k_for <a class="code" href="../../d3/d09/ripper_8y.html#a42e6601c3437035f4f017afb4828cf7d">for_var</a> <a class="code" href="../../d5/d11/ripper_8c.html#a24cfafd1c70ce74a7e26d8600e4618b6">keyword_in</a>
<a name="l02862"></a>02862                   {<a class="code" href="../../d5/d11/ripper_8c.html#adc05d33a1a8b13c91b4ec628df477f76">COND_PUSH</a>(1);}
<a name="l02863"></a>02863                   expr_value <span class="keywordflow">do</span>
<a name="l02864"></a>02864                   {<a class="code" href="../../d5/d11/ripper_8c.html#a95d06f6d6719f8d7d24b40d545015c82">COND_POP</a>();}
<a name="l02865"></a>02865                   compstmt
<a name="l02866"></a>02866                   <a class="code" href="../../d7/dc0/parse_8y.html#af8f1bc61d0e71c5c18405c4323df58cd">k_end</a>
<a name="l02867"></a>02867                     {
<a name="l02868"></a>02868                     <span class="comment">/*%%%*/</span>
<a name="l02869"></a>02869                         <span class="comment">/*</span>
<a name="l02870"></a>02870 <span class="comment">                         *  for a, b, c in e</span>
<a name="l02871"></a>02871 <span class="comment">                         *  #=&gt;</span>
<a name="l02872"></a>02872 <span class="comment">                         *  e.each{|*x| a, b, c = x</span>
<a name="l02873"></a>02873 <span class="comment">                         *</span>
<a name="l02874"></a>02874 <span class="comment">                         *  for a in e</span>
<a name="l02875"></a>02875 <span class="comment">                         *  #=&gt;</span>
<a name="l02876"></a>02876 <span class="comment">                         *  e.each{|x| a, = x}</span>
<a name="l02877"></a>02877 <span class="comment">                         */</span>
<a name="l02878"></a>02878                         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span> = <a class="code" href="../../d5/d11/ripper_8c.html#a2f9c8dd7d76e9cd4654816e5b9cc47f4">internal_id</a>();
<a name="l02879"></a>02879                         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> *tbl = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a79041aa2bc7439c11906a86f82a52eb6">ALLOC_N</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>, 2);
<a name="l02880"></a>02880                         NODE *m = <a class="code" href="../../d3/d09/ripper_8y.html#a244cf7c1439ba603ebd6c13f3e5dc98d">NEW_ARGS_AUX</a>(0, 0);
<a name="l02881"></a>02881                         NODE *args, *scope;
<a name="l02882"></a>02882 
<a name="l02883"></a>02883                         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($2) == NODE_MASGN) {
<a name="l02884"></a>02884                             <span class="comment">/* if args.length == 1 &amp;&amp; args[0].kind_of?(Array)</span>
<a name="l02885"></a>02885 <span class="comment">                             *   args = args[0]</span>
<a name="l02886"></a>02886 <span class="comment">                             * end</span>
<a name="l02887"></a>02887 <span class="comment">                             */</span>
<a name="l02888"></a>02888                             NODE *<a class="code" href="../../d9/d89/isinf_8c.html#a94762b8530d28b85e67db02b97f3ee37">one</a> = <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a0b35b94b9b2bf20d34efc1616be83916">NEW_LIT</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#ac55fae7f748afd3fc2533d0d7d06cf5a">INT2FIX</a>(1)));
<a name="l02889"></a>02889                             NODE *<a class="code" href="../../d9/d89/isinf_8c.html#a5bc81aade6dcbcbdb6984e9b1a42e836">zero</a> = <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a0b35b94b9b2bf20d34efc1616be83916">NEW_LIT</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#ac55fae7f748afd3fc2533d0d7d06cf5a">INT2FIX</a>(0)));
<a name="l02890"></a>02890                             m-&gt;nd_next = <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>(
<a name="l02891"></a>02891                                 <a class="code" href="../../d3/d09/ripper_8y.html#a0e9ba36e1c5584b64a0bcfa5b66fcd8e">NEW_IF</a>(
<a name="l02892"></a>02892                                     <a class="code" href="../../d3/d09/ripper_8y.html#a6fafbd1d8ed31805fc7574ae1f6c87c7">NEW_NODE</a>(NODE_AND,
<a name="l02893"></a>02893                                              <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a9765952595e2f9c55b2b998ab6597678">NEW_DVAR</a>(<span class="keywordtype">id</span>), <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;length&quot;</span>), 0),
<a name="l02894"></a>02894                                                       <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;==&quot;</span>), one),
<a name="l02895"></a>02895                                              <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a9765952595e2f9c55b2b998ab6597678">NEW_DVAR</a>(<span class="keywordtype">id</span>), <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;[]&quot;</span>), zero),
<a name="l02896"></a>02896                                                       <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;kind_of?&quot;</span>), <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a0b35b94b9b2bf20d34efc1616be83916">NEW_LIT</a>(<a class="code" href="../../dc/dcc/array_8c.html#a2ae422f2c99d019bdfe5b12008c82b90">rb_cArray</a>))),
<a name="l02897"></a>02897                                              0),
<a name="l02898"></a>02898                                     <a class="code" href="../../d3/d09/ripper_8y.html#a61417c7b2923e2ca34f6ce6b3806ef91">NEW_DASGN_CURR</a>(<span class="keywordtype">id</span>,
<a name="l02899"></a>02899                                                    <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a9765952595e2f9c55b2b998ab6597678">NEW_DVAR</a>(<span class="keywordtype">id</span>), <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;[]&quot;</span>), zero)),
<a name="l02900"></a>02900                                     0),
<a name="l02901"></a>02901                                 <a class="code" href="../../d5/d11/ripper_8c.html#a24425bcc46577a37c70057c22fe05b6f">node_assign</a>($2, <a class="code" href="../../d3/d09/ripper_8y.html#a9765952595e2f9c55b2b998ab6597678">NEW_DVAR</a>(<span class="keywordtype">id</span>)));
<a name="l02902"></a>02902 
<a name="l02903"></a>02903                             args = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(m, 0, <span class="keywordtype">id</span>, 0, 0);
<a name="l02904"></a>02904                         }
<a name="l02905"></a>02905                         <span class="keywordflow">else</span> {
<a name="l02906"></a>02906                             <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($2) == NODE_LASGN ||
<a name="l02907"></a>02907                                 <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($2) == NODE_DASGN ||
<a name="l02908"></a>02908                                 <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($2) == NODE_DASGN_CURR) {
<a name="l02909"></a>02909                                 $2-&gt;nd_value = <a class="code" href="../../d3/d09/ripper_8y.html#a9765952595e2f9c55b2b998ab6597678">NEW_DVAR</a>(<span class="keywordtype">id</span>);
<a name="l02910"></a>02910                                 m-&gt;nd_plen = 1;
<a name="l02911"></a>02911                                 m-&gt;nd_next = $2;
<a name="l02912"></a>02912                                 args = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(m, 0, 0, 0, 0);
<a name="l02913"></a>02913                             }
<a name="l02914"></a>02914                             <span class="keywordflow">else</span> {
<a name="l02915"></a>02915                                 m-&gt;nd_next = <a class="code" href="../../d5/d11/ripper_8c.html#a24425bcc46577a37c70057c22fe05b6f">node_assign</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>($2), 0), <a class="code" href="../../d3/d09/ripper_8y.html#a9765952595e2f9c55b2b998ab6597678">NEW_DVAR</a>(<span class="keywordtype">id</span>));
<a name="l02916"></a>02916                                 args = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(m, 0, <span class="keywordtype">id</span>, 0, 0);
<a name="l02917"></a>02917                             }
<a name="l02918"></a>02918                         }
<a name="l02919"></a>02919                         scope = <a class="code" href="../../d3/d09/ripper_8y.html#a6fafbd1d8ed31805fc7574ae1f6c87c7">NEW_NODE</a>(NODE_SCOPE, tbl, $8, args);
<a name="l02920"></a>02920                         tbl[0] = 1; tbl[1] = id;
<a name="l02921"></a>02921                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a4ed14287683b94e26f7670f14bc17652">NEW_FOR</a>(0, $5, scope);
<a name="l02922"></a>02922                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $2);
<a name="l02923"></a>02923                     <span class="comment">/*%</span>
<a name="l02924"></a>02924 <span class="comment">                        $$ = dispatch3(for, $2, $5, $8);</span>
<a name="l02925"></a>02925 <span class="comment">                    %*/</span>
<a name="l02926"></a>02926                     }
<a name="l02927"></a>02927                 | k_class cpath superclass
<a name="l02928"></a>02928                     {
<a name="l02929"></a>02929                         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab3563b12f00c4558b6e9528d1733a459">in_def</a> || <a class="code" href="../../d5/d11/ripper_8c.html#ae1504c640dc00b676c5f8573c87c00bf">in_single</a>)
<a name="l02930"></a>02930                             <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;class definition in method body&quot;</span>);
<a name="l02931"></a>02931                         <a class="code" href="../../d5/d11/ripper_8c.html#ab63305c0543649ca488042de073fcffa">local_push</a>(0);
<a name="l02932"></a>02932                     <span class="comment">/*%%%*/</span>
<a name="l02933"></a>02933                         $&lt;num&gt;$ = <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>;
<a name="l02934"></a>02934                     <span class="comment">/*%</span>
<a name="l02935"></a>02935 <span class="comment">                    %*/</span>
<a name="l02936"></a>02936                     }
<a name="l02937"></a>02937                   bodystmt
<a name="l02938"></a>02938                   <a class="code" href="../../d7/dc0/parse_8y.html#af8f1bc61d0e71c5c18405c4323df58cd">k_end</a>
<a name="l02939"></a>02939                     {
<a name="l02940"></a>02940                     <span class="comment">/*%%%*/</span>
<a name="l02941"></a>02941                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a1b654907586b146afcc483b7baea6849">NEW_CLASS</a>($2, $5, $3);
<a name="l02942"></a>02942                         <a class="code" href="../../d3/d09/ripper_8y.html#ac821dfc4ca1d4673db9669205be97f85">nd_set_line</a>($$, $&lt;num&gt;4);
<a name="l02943"></a>02943                     <span class="comment">/*%</span>
<a name="l02944"></a>02944 <span class="comment">                        $$ = dispatch3(class, $2, $3, $5);</span>
<a name="l02945"></a>02945 <span class="comment">                    %*/</span>
<a name="l02946"></a>02946                         <a class="code" href="../../d5/d11/ripper_8c.html#a5205a69edafa1f17af70b1f24c8f978f">local_pop</a>();
<a name="l02947"></a>02947                     }
<a name="l02948"></a>02948                 | k_class <a class="code" href="../../d5/d11/ripper_8c.html#aabd668249ab17583bb8ba7b0a15dc88a">tLSHFT</a> expr
<a name="l02949"></a>02949                     {
<a name="l02950"></a>02950                         $&lt;num&gt;$ = <a class="code" href="../../d5/d11/ripper_8c.html#ab3563b12f00c4558b6e9528d1733a459">in_def</a>;
<a name="l02951"></a>02951                         <a class="code" href="../../d5/d11/ripper_8c.html#ab3563b12f00c4558b6e9528d1733a459">in_def</a> = 0;
<a name="l02952"></a>02952                     }
<a name="l02953"></a>02953                   <a class="code" href="../../d3/d09/ripper_8y.html#a0c940d9e4ce4cfee55d7ccf714a1303d">term</a>
<a name="l02954"></a>02954                     {
<a name="l02955"></a>02955                         $&lt;num&gt;$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae1504c640dc00b676c5f8573c87c00bf">in_single</a>;
<a name="l02956"></a>02956                         <a class="code" href="../../d5/d11/ripper_8c.html#ae1504c640dc00b676c5f8573c87c00bf">in_single</a> = 0;
<a name="l02957"></a>02957                         <a class="code" href="../../d5/d11/ripper_8c.html#ab63305c0543649ca488042de073fcffa">local_push</a>(0);
<a name="l02958"></a>02958                     }
<a name="l02959"></a>02959                   bodystmt
<a name="l02960"></a>02960                   <a class="code" href="../../d7/dc0/parse_8y.html#af8f1bc61d0e71c5c18405c4323df58cd">k_end</a>
<a name="l02961"></a>02961                     {
<a name="l02962"></a>02962                     <span class="comment">/*%%%*/</span>
<a name="l02963"></a>02963                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#aa1918e1a957779560524c226bb518f80">NEW_SCLASS</a>($3, $7);
<a name="l02964"></a>02964                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $3);
<a name="l02965"></a>02965                     <span class="comment">/*%</span>
<a name="l02966"></a>02966 <span class="comment">                        $$ = dispatch2(sclass, $3, $7);</span>
<a name="l02967"></a>02967 <span class="comment">                    %*/</span>
<a name="l02968"></a>02968                         <a class="code" href="../../d5/d11/ripper_8c.html#a5205a69edafa1f17af70b1f24c8f978f">local_pop</a>();
<a name="l02969"></a>02969                         <a class="code" href="../../d5/d11/ripper_8c.html#ab3563b12f00c4558b6e9528d1733a459">in_def</a> = $&lt;num&gt;4;
<a name="l02970"></a>02970                         <a class="code" href="../../d5/d11/ripper_8c.html#ae1504c640dc00b676c5f8573c87c00bf">in_single</a> = $&lt;num&gt;6;
<a name="l02971"></a>02971                     }
<a name="l02972"></a>02972                 | k_module cpath
<a name="l02973"></a>02973                     {
<a name="l02974"></a>02974                         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab3563b12f00c4558b6e9528d1733a459">in_def</a> || <a class="code" href="../../d5/d11/ripper_8c.html#ae1504c640dc00b676c5f8573c87c00bf">in_single</a>)
<a name="l02975"></a>02975                             <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;module definition in method body&quot;</span>);
<a name="l02976"></a>02976                         <a class="code" href="../../d5/d11/ripper_8c.html#ab63305c0543649ca488042de073fcffa">local_push</a>(0);
<a name="l02977"></a>02977                     <span class="comment">/*%%%*/</span>
<a name="l02978"></a>02978                         $&lt;num&gt;$ = <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>;
<a name="l02979"></a>02979                     <span class="comment">/*%</span>
<a name="l02980"></a>02980 <span class="comment">                    %*/</span>
<a name="l02981"></a>02981                     }
<a name="l02982"></a>02982                   bodystmt
<a name="l02983"></a>02983                   <a class="code" href="../../d7/dc0/parse_8y.html#af8f1bc61d0e71c5c18405c4323df58cd">k_end</a>
<a name="l02984"></a>02984                     {
<a name="l02985"></a>02985                     <span class="comment">/*%%%*/</span>
<a name="l02986"></a>02986                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#aeb6107cd1f97031d33e730981ac63a29">NEW_MODULE</a>($2, $4);
<a name="l02987"></a>02987                         <a class="code" href="../../d3/d09/ripper_8y.html#ac821dfc4ca1d4673db9669205be97f85">nd_set_line</a>($$, $&lt;num&gt;3);
<a name="l02988"></a>02988                     <span class="comment">/*%</span>
<a name="l02989"></a>02989 <span class="comment">                        $$ = dispatch2(module, $2, $4);</span>
<a name="l02990"></a>02990 <span class="comment">                    %*/</span>
<a name="l02991"></a>02991                         <a class="code" href="../../d5/d11/ripper_8c.html#a5205a69edafa1f17af70b1f24c8f978f">local_pop</a>();
<a name="l02992"></a>02992                     }
<a name="l02993"></a>02993                 | k_def fname
<a name="l02994"></a>02994                     {
<a name="l02995"></a>02995                         $&lt;<span class="keywordtype">id</span>&gt;$ = <a class="code" href="../../d5/d11/ripper_8c.html#affb3666680f8481889c32b3b95421b8a">cur_mid</a>;
<a name="l02996"></a>02996                         <a class="code" href="../../d5/d11/ripper_8c.html#affb3666680f8481889c32b3b95421b8a">cur_mid</a> = $2;
<a name="l02997"></a>02997                         <a class="code" href="../../d5/d11/ripper_8c.html#ab3563b12f00c4558b6e9528d1733a459">in_def</a>++;
<a name="l02998"></a>02998                         <a class="code" href="../../d5/d11/ripper_8c.html#ab63305c0543649ca488042de073fcffa">local_push</a>(0);
<a name="l02999"></a>02999                     }
<a name="l03000"></a>03000                   f_arglist
<a name="l03001"></a><a class="code" href="../../d7/dc0/parse_8y.html#a9967308e1f0c756ca9212fe543bce4be">03001</a>                   bodystmt
<a name="l03002"></a>03002                   <a class="code" href="../../d7/dc0/parse_8y.html#af8f1bc61d0e71c5c18405c4323df58cd">k_end</a>
<a name="l03003"></a>03003                     {
<a name="l03004"></a>03004                     <span class="comment">/*%%%*/</span>
<a name="l03005"></a>03005                         NODE *body = <a class="code" href="../../d7/dc0/parse_8y.html#af6073dd45c01beeb98d4a07c13a581f8">remove_begin</a>($5);
<a name="l03006"></a>03006                         <a class="code" href="../../d5/d11/ripper_8c.html#aa052265d09c78b6e94e9ae4f6d05ad91">reduce_nodes</a>(&amp;body);
<a name="l03007"></a>03007                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#aad30ed1388f132823d5270751583d6f5">NEW_DEFN</a>($2, $4, body, <a class="code" href="../../db/d0a/method_8h.html#a1e54ff32a6191e40451e1523c61ca439a155818970b18d63d59c83d22bc61803d">NOEX_PRIVATE</a>);
<a name="l03008"></a>03008                         <a class="code" href="../../d3/d09/ripper_8y.html#ac821dfc4ca1d4673db9669205be97f85">nd_set_line</a>($$, $&lt;num&gt;1);
<a name="l03009"></a>03009                     <span class="comment">/*%</span>
<a name="l03010"></a>03010 <span class="comment">                        $$ = dispatch3(def, $2, $4, $5);</span>
<a name="l03011"></a>03011 <span class="comment">                    %*/</span>
<a name="l03012"></a><a class="code" href="../../d7/dc0/parse_8y.html#a204f446339af7929852f44df41484be5">03012</a>                         <a class="code" href="../../d5/d11/ripper_8c.html#a5205a69edafa1f17af70b1f24c8f978f">local_pop</a>();
<a name="l03013"></a>03013                         <a class="code" href="../../d5/d11/ripper_8c.html#ab3563b12f00c4558b6e9528d1733a459">in_def</a>--;
<a name="l03014"></a>03014                         <a class="code" href="../../d5/d11/ripper_8c.html#affb3666680f8481889c32b3b95421b8a">cur_mid</a> = $&lt;<span class="keywordtype">id</span>&gt;3;
<a name="l03015"></a>03015                     }
<a name="l03016"></a>03016                 | k_def singleton dot_or_colon {<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>;} fname
<a name="l03017"></a>03017                     {
<a name="l03018"></a>03018                         <a class="code" href="../../d5/d11/ripper_8c.html#ae1504c640dc00b676c5f8573c87c00bf">in_single</a>++;
<a name="l03019"></a>03019                         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a6625ca72427336b58374fc438e51b225">EXPR_ENDFN</a>; <span class="comment">/* force for args */</span>
<a name="l03020"></a>03020                         <a class="code" href="../../d5/d11/ripper_8c.html#ab63305c0543649ca488042de073fcffa">local_push</a>(0);
<a name="l03021"></a>03021                     }
<a name="l03022"></a>03022                   f_arglist
<a name="l03023"></a>03023                   bodystmt
<a name="l03024"></a>03024                   <a class="code" href="../../d7/dc0/parse_8y.html#af8f1bc61d0e71c5c18405c4323df58cd">k_end</a>
<a name="l03025"></a>03025                     {
<a name="l03026"></a>03026                     <span class="comment">/*%%%*/</span>
<a name="l03027"></a>03027                         NODE *body = <a class="code" href="../../d7/dc0/parse_8y.html#af6073dd45c01beeb98d4a07c13a581f8">remove_begin</a>($8);
<a name="l03028"></a><a class="code" href="../../d7/dc0/parse_8y.html#a683750ec95f749698103c995f0721a49">03028</a>                         <a class="code" href="../../d5/d11/ripper_8c.html#aa052265d09c78b6e94e9ae4f6d05ad91">reduce_nodes</a>(&amp;body);
<a name="l03029"></a>03029                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a02352557d4df0ff04115ab63c340531c">NEW_DEFS</a>($2, $5, $7, body);
<a name="l03030"></a>03030                         <a class="code" href="../../d3/d09/ripper_8y.html#ac821dfc4ca1d4673db9669205be97f85">nd_set_line</a>($$, $&lt;num&gt;1);
<a name="l03031"></a>03031                     <span class="comment">/*%</span>
<a name="l03032"></a>03032 <span class="comment">                        $$ = dispatch5(defs, $2, $3, $5, $7, $8);</span>
<a name="l03033"></a>03033 <span class="comment">                    %*/</span>
<a name="l03034"></a>03034                         <a class="code" href="../../d5/d11/ripper_8c.html#a5205a69edafa1f17af70b1f24c8f978f">local_pop</a>();
<a name="l03035"></a>03035                         <a class="code" href="../../d5/d11/ripper_8c.html#ae1504c640dc00b676c5f8573c87c00bf">in_single</a>--;
<a name="l03036"></a>03036                     }
<a name="l03037"></a>03037                 | <a class="code" href="../../d5/d11/ripper_8c.html#a3df7a0f57555b3aa2a155393d6b1c4dc">keyword_break</a>
<a name="l03038"></a>03038                     {
<a name="l03039"></a>03039                     <span class="comment">/*%%%*/</span>
<a name="l03040"></a>03040                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a075c02a442f1209b215efc4201c04552">NEW_BREAK</a>(0);
<a name="l03041"></a>03041                     <span class="comment">/*%</span>
<a name="l03042"></a>03042 <span class="comment">                        $$ = dispatch1(break, arg_new());</span>
<a name="l03043"></a>03043 <span class="comment">                    %*/</span>
<a name="l03044"></a>03044                     }
<a name="l03045"></a>03045                 | <a class="code" href="../../d5/d11/ripper_8c.html#a6f1a9cbe32cbd55a1e29b0d066bc9b09">keyword_next</a>
<a name="l03046"></a>03046                     {
<a name="l03047"></a>03047                     <span class="comment">/*%%%*/</span>
<a name="l03048"></a>03048                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a58f7f093662561660bdd3c5aa492b329">NEW_NEXT</a>(0);
<a name="l03049"></a>03049                     <span class="comment">/*%</span>
<a name="l03050"></a>03050 <span class="comment">                        $$ = dispatch1(next, arg_new());</span>
<a name="l03051"></a>03051 <span class="comment">                    %*/</span>
<a name="l03052"></a>03052                     }
<a name="l03053"></a>03053                 | <a class="code" href="../../d5/d11/ripper_8c.html#a208e0237b3ea51246b610d113ba0253e">keyword_redo</a>
<a name="l03054"></a>03054                     {
<a name="l03055"></a>03055                     <span class="comment">/*%%%*/</span>
<a name="l03056"></a>03056                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#ac1c02c2df831d47d0d510aba0ef8a698">NEW_REDO</a>();
<a name="l03057"></a>03057                     <span class="comment">/*%</span>
<a name="l03058"></a>03058 <span class="comment">                        $$ = dispatch0(redo);</span>
<a name="l03059"></a>03059 <span class="comment">                    %*/</span>
<a name="l03060"></a>03060                     }
<a name="l03061"></a>03061                 | <a class="code" href="../../d5/d11/ripper_8c.html#a8c2d03875c00212b36b822b056116426">keyword_retry</a>
<a name="l03062"></a>03062                     {
<a name="l03063"></a>03063                     <span class="comment">/*%%%*/</span>
<a name="l03064"></a>03064                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#adb65df1391aaa7d35cae89e77fb4d6b4">NEW_RETRY</a>();
<a name="l03065"></a>03065                     <span class="comment">/*%</span>
<a name="l03066"></a>03066 <span class="comment">                        $$ = dispatch0(retry);</span>
<a name="l03067"></a>03067 <span class="comment">                    %*/</span>
<a name="l03068"></a>03068                     }
<a name="l03069"></a>03069                 ;
<a name="l03070"></a><a class="code" href="../../d7/dc0/parse_8y.html#aee6b90f877ca038502321357882fcb38">03070</a> 
<a name="l03071"></a>03071 primary_value   : primary
<a name="l03072"></a>03072                     {
<a name="l03073"></a>03073                     <span class="comment">/*%%%*/</span>
<a name="l03074"></a>03074                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($1);
<a name="l03075"></a>03075                         $$ = $1;
<a name="l03076"></a>03076                         <span class="keywordflow">if</span> (!$$) $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a969f4dd65ae53a2ec90dbbb0420af61e">NEW_NIL</a>();
<a name="l03077"></a>03077                     <span class="comment">/*%</span>
<a name="l03078"></a>03078 <span class="comment">                        $$ = $1;</span>
<a name="l03079"></a>03079 <span class="comment">                    %*/</span>
<a name="l03080"></a><a class="code" href="../../d7/dc0/parse_8y.html#ac01f0b083791807aff828021e0827da0">03080</a>                     }
<a name="l03081"></a>03081                 ;
<a name="l03082"></a>03082 
<a name="l03083"></a>03083 k_begin         : <a class="code" href="../../d5/d11/ripper_8c.html#a6068ed81f0c694c4874c0c90b398e198">keyword_begin</a>
<a name="l03084"></a>03084                     {
<a name="l03085"></a>03085                         <a class="code" href="../../d5/d11/ripper_8c.html#a975ebb4788e2066d838f862705f56b3e">token_info_push</a>(<span class="stringliteral">&quot;begin&quot;</span>);
<a name="l03086"></a>03086                     }
<a name="l03087"></a>03087                 ;
<a name="l03088"></a>03088 
<a name="l03089"></a>03089 k_if            : <a class="code" href="../../d5/d11/ripper_8c.html#a0f1bd4f847f3d2e6fbaa432d68793f24">keyword_if</a>
<a name="l03090"></a>03090                     {
<a name="l03091"></a>03091                         <a class="code" href="../../d5/d11/ripper_8c.html#a975ebb4788e2066d838f862705f56b3e">token_info_push</a>(<span class="stringliteral">&quot;if&quot;</span>);
<a name="l03092"></a>03092                     }
<a name="l03093"></a>03093                 ;
<a name="l03094"></a>03094 
<a name="l03095"></a>03095 k_unless        : <a class="code" href="../../d5/d11/ripper_8c.html#aec71ecb43b9af0c21560c7ebc47ffc13">keyword_unless</a>
<a name="l03096"></a>03096                     {
<a name="l03097"></a>03097                         <a class="code" href="../../d5/d11/ripper_8c.html#a975ebb4788e2066d838f862705f56b3e">token_info_push</a>(<span class="stringliteral">&quot;unless&quot;</span>);
<a name="l03098"></a>03098                     }
<a name="l03099"></a>03099                 ;
<a name="l03100"></a>03100 
<a name="l03101"></a><a class="code" href="../../d7/dc0/parse_8y.html#af6bea98906eb924c89753c2312de79e4">03101</a> k_while         : <a class="code" href="../../d5/d11/ripper_8c.html#a51e8071a22ee8afe26d720c2ea129c89">keyword_while</a>
<a name="l03102"></a>03102                     {
<a name="l03103"></a>03103                         <a class="code" href="../../d5/d11/ripper_8c.html#a975ebb4788e2066d838f862705f56b3e">token_info_push</a>(<span class="stringliteral">&quot;while&quot;</span>);
<a name="l03104"></a>03104                     }
<a name="l03105"></a>03105                 ;
<a name="l03106"></a>03106 
<a name="l03107"></a>03107 k_until         : <a class="code" href="../../d5/d11/ripper_8c.html#a479b05419c8b27b3aaeeb728e39b3972">keyword_until</a>
<a name="l03108"></a>03108                     {
<a name="l03109"></a>03109                         <a class="code" href="../../d5/d11/ripper_8c.html#a975ebb4788e2066d838f862705f56b3e">token_info_push</a>(<span class="stringliteral">&quot;until&quot;</span>);
<a name="l03110"></a>03110                     }
<a name="l03111"></a>03111                 ;
<a name="l03112"></a>03112 
<a name="l03113"></a>03113 k_case          : <a class="code" href="../../d5/d11/ripper_8c.html#a05aac07545e64b6a0054e8901a38992f">keyword_case</a>
<a name="l03114"></a>03114                     {
<a name="l03115"></a>03115                         <a class="code" href="../../d5/d11/ripper_8c.html#a975ebb4788e2066d838f862705f56b3e">token_info_push</a>(<span class="stringliteral">&quot;case&quot;</span>);
<a name="l03116"></a>03116                     }
<a name="l03117"></a>03117                 ;
<a name="l03118"></a>03118 
<a name="l03119"></a>03119 k_for           : <a class="code" href="../../d5/d11/ripper_8c.html#ad586477cf71406d625d53eae311bdf11">keyword_for</a>
<a name="l03120"></a>03120                     {
<a name="l03121"></a>03121                         <a class="code" href="../../d5/d11/ripper_8c.html#a975ebb4788e2066d838f862705f56b3e">token_info_push</a>(<span class="stringliteral">&quot;for&quot;</span>);
<a name="l03122"></a>03122                     }
<a name="l03123"></a>03123                 ;
<a name="l03124"></a>03124 
<a name="l03125"></a>03125 k_class         : <a class="code" href="../../d5/d11/ripper_8c.html#aaad7597969d430a0cd28b7715943e784">keyword_class</a>
<a name="l03126"></a>03126                     {
<a name="l03127"></a>03127                         <a class="code" href="../../d5/d11/ripper_8c.html#a975ebb4788e2066d838f862705f56b3e">token_info_push</a>(<span class="stringliteral">&quot;class&quot;</span>);
<a name="l03128"></a>03128                     }
<a name="l03129"></a>03129                 ;
<a name="l03130"></a>03130 
<a name="l03131"></a>03131 k_module        : <a class="code" href="../../d5/d11/ripper_8c.html#a608cdee478d71d061a7fe4463717d923">keyword_module</a>
<a name="l03132"></a>03132                     {
<a name="l03133"></a>03133                         <a class="code" href="../../d5/d11/ripper_8c.html#a975ebb4788e2066d838f862705f56b3e">token_info_push</a>(<span class="stringliteral">&quot;module&quot;</span>);
<a name="l03134"></a>03134                     }
<a name="l03135"></a>03135                 ;
<a name="l03136"></a>03136 
<a name="l03137"></a>03137 k_def           : <a class="code" href="../../d5/d11/ripper_8c.html#ac5156e971018e2f1a80e8b638bf1ad83">keyword_def</a>
<a name="l03138"></a>03138                     {
<a name="l03139"></a>03139                         <a class="code" href="../../d5/d11/ripper_8c.html#a975ebb4788e2066d838f862705f56b3e">token_info_push</a>(<span class="stringliteral">&quot;def&quot;</span>);
<a name="l03140"></a>03140                     <span class="comment">/*%%%*/</span>
<a name="l03141"></a>03141                         $&lt;num&gt;$ = <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>;
<a name="l03142"></a>03142                     <span class="comment">/*%</span>
<a name="l03143"></a>03143 <span class="comment">                    %*/</span>
<a name="l03144"></a>03144                     }
<a name="l03145"></a>03145                 ;
<a name="l03146"></a>03146 
<a name="l03147"></a>03147 <a class="code" href="../../d7/dc0/parse_8y.html#af8f1bc61d0e71c5c18405c4323df58cd">k_end</a>           : <a class="code" href="../../d5/d11/ripper_8c.html#a3887eba1b6af6ce3835d41cf832b4fa1">keyword_end</a>
<a name="l03148"></a>03148                     {
<a name="l03149"></a>03149                         <a class="code" href="../../d5/d11/ripper_8c.html#af9b9f89b11a878abf5348343d9a77283">token_info_pop</a>(<span class="stringliteral">&quot;end&quot;</span>);
<a name="l03150"></a>03150                     }
<a name="l03151"></a>03151                 ;
<a name="l03152"></a>03152 
<a name="l03153"></a>03153 then            : <a class="code" href="../../d3/d09/ripper_8y.html#a0c940d9e4ce4cfee55d7ccf714a1303d">term</a>
<a name="l03154"></a>03154                     <span class="comment">/*%c%*/</span>
<a name="l03155"></a>03155                     <span class="comment">/*%c</span>
<a name="l03156"></a>03156 <span class="comment">                    { $$ = Qnil; }</span>
<a name="l03157"></a>03157 <span class="comment">                    %*/</span>
<a name="l03158"></a>03158                 | <a class="code" href="../../d5/d11/ripper_8c.html#af43191ca027b5b2d4efa8f4b3e878663">keyword_then</a>
<a name="l03159"></a>03159                 | <a class="code" href="../../d3/d09/ripper_8y.html#a0c940d9e4ce4cfee55d7ccf714a1303d">term</a> <a class="code" href="../../d5/d11/ripper_8c.html#af43191ca027b5b2d4efa8f4b3e878663">keyword_then</a>
<a name="l03160"></a>03160                     <span class="comment">/*%c%*/</span>
<a name="l03161"></a>03161                     <span class="comment">/*%c</span>
<a name="l03162"></a>03162 <span class="comment">                    { $$ = $2; }</span>
<a name="l03163"></a>03163 <span class="comment">                    %*/</span>
<a name="l03164"></a>03164                 ;
<a name="l03165"></a>03165 
<a name="l03166"></a>03166 <span class="keywordflow">do</span>              : <a class="code" href="../../d3/d09/ripper_8y.html#a0c940d9e4ce4cfee55d7ccf714a1303d">term</a>
<a name="l03167"></a>03167                     <span class="comment">/*%c%*/</span>
<a name="l03168"></a>03168                     <span class="comment">/*%c</span>
<a name="l03169"></a>03169 <span class="comment">                    { $$ = Qnil; }</span>
<a name="l03170"></a>03170 <span class="comment">                    %*/</span>
<a name="l03171"></a>03171                 | <a class="code" href="../../d5/d11/ripper_8c.html#a531ddac2ff71be80ea02f3cb575b0d82">keyword_do_cond</a>
<a name="l03172"></a>03172                 ;
<a name="l03173"></a>03173 
<a name="l03174"></a>03174 if_tail         : opt_else
<a name="l03175"></a>03175                 | <a class="code" href="../../d5/d11/ripper_8c.html#a4e72412ea5c9c9a39319fb0224a0a23b">keyword_elsif</a> expr_value then
<a name="l03176"></a>03176                   compstmt
<a name="l03177"></a>03177                   if_tail
<a name="l03178"></a>03178                     {
<a name="l03179"></a>03179                     <span class="comment">/*%%%*/</span>
<a name="l03180"></a>03180                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a0e9ba36e1c5584b64a0bcfa5b66fcd8e">NEW_IF</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a>($2), $4, $5);
<a name="l03181"></a>03181                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $2);
<a name="l03182"></a>03182                     <span class="comment">/*%</span>
<a name="l03183"></a>03183 <span class="comment">                        $$ = dispatch3(elsif, $2, $4, escape_Qundef($5));</span>
<a name="l03184"></a>03184 <span class="comment">                    %*/</span>
<a name="l03185"></a>03185                     }
<a name="l03186"></a>03186                 ;
<a name="l03187"></a>03187 
<a name="l03188"></a>03188 opt_else        : <a class="code" href="../../d3/d09/ripper_8y.html#a2b9edf1e7cc4980ffa29e35e6186b170">none</a>
<a name="l03189"></a>03189                 | <a class="code" href="../../d5/d11/ripper_8c.html#ab9f440f375bc044468920cc3dc8f9b07">keyword_else</a> compstmt
<a name="l03190"></a>03190                     {
<a name="l03191"></a>03191                     <span class="comment">/*%%%*/</span>
<a name="l03192"></a>03192                         $$ = $2;
<a name="l03193"></a>03193                     <span class="comment">/*%</span>
<a name="l03194"></a>03194 <span class="comment">                        $$ = dispatch1(else, $2);</span>
<a name="l03195"></a>03195 <span class="comment">                    %*/</span>
<a name="l03196"></a>03196                     }
<a name="l03197"></a>03197                 ;
<a name="l03198"></a>03198 
<a name="l03199"></a>03199 <a class="code" href="../../d3/d09/ripper_8y.html#a42e6601c3437035f4f017afb4828cf7d">for_var</a>         : <a class="code" href="../../d3/d09/ripper_8y.html#a73c3a889aca6f2648374f6f8331d13ea">lhs</a>
<a name="l03200"></a>03200                 | mlhs
<a name="l03201"></a>03201                 ;
<a name="l03202"></a>03202 
<a name="l03203"></a>03203 f_marg          : f_norm_arg
<a name="l03204"></a>03204                     {
<a name="l03205"></a>03205                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a5cb1df5a7a381c93bd1b53c64194c804">assignable</a>($1, 0);
<a name="l03206"></a>03206                     <span class="comment">/*%%%*/</span>
<a name="l03207"></a>03207                     <span class="comment">/*%</span>
<a name="l03208"></a>03208 <span class="comment">                        $$ = dispatch1(mlhs_paren, $$);</span>
<a name="l03209"></a>03209 <span class="comment">                    %*/</span>
<a name="l03210"></a>03210                     }
<a name="l03211"></a>03211                 | <a class="code" href="../../d5/d11/ripper_8c.html#a8d562a1eeeebb179b8571743d06dd937">tLPAREN</a> f_margs rparen
<a name="l03212"></a>03212                     {
<a name="l03213"></a>03213                     <span class="comment">/*%%%*/</span>
<a name="l03214"></a>03214                         $$ = $2;
<a name="l03215"></a>03215                     <span class="comment">/*%</span>
<a name="l03216"></a>03216 <span class="comment">                        $$ = dispatch1(mlhs_paren, $2);</span>
<a name="l03217"></a>03217 <span class="comment">                    %*/</span>
<a name="l03218"></a>03218                     }
<a name="l03219"></a>03219                 ;
<a name="l03220"></a>03220 
<a name="l03221"></a>03221 <a class="code" href="../../d3/d09/ripper_8y.html#ad8c6fc99e12365fe282102d9dcd4df36">f_marg_list</a>     : f_marg
<a name="l03222"></a>03222                     {
<a name="l03223"></a>03223                     <span class="comment">/*%%%*/</span>
<a name="l03224"></a><a class="code" href="../../d7/dc0/parse_8y.html#ab755e1c91368ad8be5a009243f3eb92e">03224</a>                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>($1);
<a name="l03225"></a>03225                     <span class="comment">/*%</span>
<a name="l03226"></a>03226 <span class="comment">                        $$ = mlhs_add(mlhs_new(), $1);</span>
<a name="l03227"></a>03227 <span class="comment">                    %*/</span>
<a name="l03228"></a>03228                     }
<a name="l03229"></a>03229                 | <a class="code" href="../../d3/d09/ripper_8y.html#ad8c6fc99e12365fe282102d9dcd4df36">f_marg_list</a> <span class="charliteral">&apos;,&apos;</span> f_marg
<a name="l03230"></a>03230                     {
<a name="l03231"></a>03231                     <span class="comment">/*%%%*/</span>
<a name="l03232"></a>03232                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>($1, $3);
<a name="l03233"></a>03233                     <span class="comment">/*%</span>
<a name="l03234"></a>03234 <span class="comment">                        $$ = mlhs_add($1, $3);</span>
<a name="l03235"></a><a class="code" href="../../d7/dc0/parse_8y.html#a78154281138b6054e503b0b60b520923">03235</a> <span class="comment">                    %*/</span>
<a name="l03236"></a>03236                     }
<a name="l03237"></a>03237                 ;
<a name="l03238"></a>03238 
<a name="l03239"></a>03239 f_margs         : <a class="code" href="../../d3/d09/ripper_8y.html#ad8c6fc99e12365fe282102d9dcd4df36">f_marg_list</a>
<a name="l03240"></a>03240                     {
<a name="l03241"></a>03241                     <span class="comment">/*%%%*/</span>
<a name="l03242"></a>03242                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>($1, 0);
<a name="l03243"></a>03243                     <span class="comment">/*%</span>
<a name="l03244"></a>03244 <span class="comment">                        $$ = $1;</span>
<a name="l03245"></a>03245 <span class="comment">                    %*/</span>
<a name="l03246"></a>03246                     }
<a name="l03247"></a>03247                 | <a class="code" href="../../d3/d09/ripper_8y.html#ad8c6fc99e12365fe282102d9dcd4df36">f_marg_list</a> <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a> f_norm_arg
<a name="l03248"></a>03248                     {
<a name="l03249"></a>03249                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a5cb1df5a7a381c93bd1b53c64194c804">assignable</a>($4, 0);
<a name="l03250"></a>03250                     <span class="comment">/*%%%*/</span>
<a name="l03251"></a>03251                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>($1, $$);
<a name="l03252"></a>03252                     <span class="comment">/*%</span>
<a name="l03253"></a>03253 <span class="comment">                        $$ = mlhs_add_star($1, $$);</span>
<a name="l03254"></a>03254 <span class="comment">                    %*/</span>
<a name="l03255"></a>03255                     }
<a name="l03256"></a>03256                 | <a class="code" href="../../d3/d09/ripper_8y.html#ad8c6fc99e12365fe282102d9dcd4df36">f_marg_list</a> <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a> f_norm_arg <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d3/d09/ripper_8y.html#ad8c6fc99e12365fe282102d9dcd4df36">f_marg_list</a>
<a name="l03257"></a>03257                     {
<a name="l03258"></a>03258                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a5cb1df5a7a381c93bd1b53c64194c804">assignable</a>($4, 0);
<a name="l03259"></a>03259                     <span class="comment">/*%%%*/</span>
<a name="l03260"></a>03260                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>($1, <a class="code" href="../../d3/d09/ripper_8y.html#ab003942ed14f77fbd6933dafaa16e956">NEW_POSTARG</a>($$, $6));
<a name="l03261"></a>03261                     <span class="comment">/*%</span>
<a name="l03262"></a>03262 <span class="comment">                        $$ = mlhs_add_star($1, $$);</span>
<a name="l03263"></a>03263 <span class="comment">                    %*/</span>
<a name="l03264"></a>03264                     }
<a name="l03265"></a>03265                 | <a class="code" href="../../d3/d09/ripper_8y.html#ad8c6fc99e12365fe282102d9dcd4df36">f_marg_list</a> <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a>
<a name="l03266"></a>03266                     {
<a name="l03267"></a>03267                     <span class="comment">/*%%%*/</span>
<a name="l03268"></a>03268                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>($1, -1);
<a name="l03269"></a>03269                     <span class="comment">/*%</span>
<a name="l03270"></a>03270 <span class="comment">                        $$ = mlhs_add_star($1, Qnil);</span>
<a name="l03271"></a>03271 <span class="comment">                    %*/</span>
<a name="l03272"></a>03272                     }
<a name="l03273"></a>03273                 | <a class="code" href="../../d3/d09/ripper_8y.html#ad8c6fc99e12365fe282102d9dcd4df36">f_marg_list</a> <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a> <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d3/d09/ripper_8y.html#ad8c6fc99e12365fe282102d9dcd4df36">f_marg_list</a>
<a name="l03274"></a>03274                     {
<a name="l03275"></a>03275                     <span class="comment">/*%%%*/</span>
<a name="l03276"></a>03276                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>($1, <a class="code" href="../../d3/d09/ripper_8y.html#ab003942ed14f77fbd6933dafaa16e956">NEW_POSTARG</a>(-1, $5));
<a name="l03277"></a>03277                     <span class="comment">/*%</span>
<a name="l03278"></a>03278 <span class="comment">                        $$ = mlhs_add_star($1, $5);</span>
<a name="l03279"></a>03279 <span class="comment">                    %*/</span>
<a name="l03280"></a>03280                     }
<a name="l03281"></a>03281                 | <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a> f_norm_arg
<a name="l03282"></a>03282                     {
<a name="l03283"></a>03283                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a5cb1df5a7a381c93bd1b53c64194c804">assignable</a>($2, 0);
<a name="l03284"></a>03284                     <span class="comment">/*%%%*/</span>
<a name="l03285"></a>03285                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>(0, $$);
<a name="l03286"></a>03286                     <span class="comment">/*%</span>
<a name="l03287"></a>03287 <span class="comment">                        $$ = mlhs_add_star(mlhs_new(), $$);</span>
<a name="l03288"></a>03288 <span class="comment">                    %*/</span>
<a name="l03289"></a>03289                     }
<a name="l03290"></a>03290                 | <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a> f_norm_arg <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d3/d09/ripper_8y.html#ad8c6fc99e12365fe282102d9dcd4df36">f_marg_list</a>
<a name="l03291"></a>03291                     {
<a name="l03292"></a>03292                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a5cb1df5a7a381c93bd1b53c64194c804">assignable</a>($2, 0);
<a name="l03293"></a>03293                     <span class="comment">/*%%%*/</span>
<a name="l03294"></a>03294                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>(0, <a class="code" href="../../d3/d09/ripper_8y.html#ab003942ed14f77fbd6933dafaa16e956">NEW_POSTARG</a>($$, $4));
<a name="l03295"></a>03295                     <span class="comment">/*%</span>
<a name="l03296"></a>03296 <span class="comment">                      #if 0</span>
<a name="l03297"></a>03297 <span class="comment">                      TODO: Check me</span>
<a name="l03298"></a>03298 <span class="comment">                      #endif</span>
<a name="l03299"></a>03299 <span class="comment">                        $$ = mlhs_add_star($$, $4);</span>
<a name="l03300"></a>03300 <span class="comment">                    %*/</span>
<a name="l03301"></a>03301                     }
<a name="l03302"></a>03302                 | <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a>
<a name="l03303"></a>03303                     {
<a name="l03304"></a>03304                     <span class="comment">/*%%%*/</span>
<a name="l03305"></a>03305                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>(0, -1);
<a name="l03306"></a>03306                     <span class="comment">/*%</span>
<a name="l03307"></a>03307 <span class="comment">                        $$ = mlhs_add_star(mlhs_new(), Qnil);</span>
<a name="l03308"></a>03308 <span class="comment">                    %*/</span>
<a name="l03309"></a>03309                     }
<a name="l03310"></a>03310                 | <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a> <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d3/d09/ripper_8y.html#ad8c6fc99e12365fe282102d9dcd4df36">f_marg_list</a>
<a name="l03311"></a>03311                     {
<a name="l03312"></a>03312                     <span class="comment">/*%%%*/</span>
<a name="l03313"></a>03313                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a405af79add930f989078c09b9405e69e">NEW_MASGN</a>(0, <a class="code" href="../../d3/d09/ripper_8y.html#ab003942ed14f77fbd6933dafaa16e956">NEW_POSTARG</a>(-1, $3));
<a name="l03314"></a>03314                     <span class="comment">/*%</span>
<a name="l03315"></a>03315 <span class="comment">                        $$ = mlhs_add_star(mlhs_new(), Qnil);</span>
<a name="l03316"></a>03316 <span class="comment">                    %*/</span>
<a name="l03317"></a>03317                     }
<a name="l03318"></a>03318                 ;
<a name="l03319"></a>03319 
<a name="l03320"></a>03320 block_param     : f_arg <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d3/d09/ripper_8y.html#a656c4e2e5e1db08ef4ae0b1c6053e671">f_block_optarg</a> <span class="charliteral">&apos;,&apos;</span> f_rest_arg opt_f_block_arg
<a name="l03321"></a>03321                     {
<a name="l03322"></a>03322                     <span class="comment">/*%%%*/</span>
<a name="l03323"></a>03323                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>($1, $3, $5, 0, $6);
<a name="l03324"></a>03324                     <span class="comment">/*%</span>
<a name="l03325"></a>03325 <span class="comment">                        $$ = params_new($1, $3, $5, Qnil, escape_Qundef($6));</span>
<a name="l03326"></a>03326 <span class="comment">                    %*/</span>
<a name="l03327"></a>03327                     }
<a name="l03328"></a>03328                 | f_arg <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d3/d09/ripper_8y.html#a656c4e2e5e1db08ef4ae0b1c6053e671">f_block_optarg</a> <span class="charliteral">&apos;,&apos;</span> f_rest_arg <span class="charliteral">&apos;,&apos;</span> f_arg opt_f_block_arg
<a name="l03329"></a>03329                     {
<a name="l03330"></a>03330                     <span class="comment">/*%%%*/</span>
<a name="l03331"></a>03331                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>($1, $3, $5, $7, $8);
<a name="l03332"></a>03332                     <span class="comment">/*%</span>
<a name="l03333"></a>03333 <span class="comment">                        $$ = params_new($1, $3, $5, $7, escape_Qundef($8));</span>
<a name="l03334"></a>03334 <span class="comment">                    %*/</span>
<a name="l03335"></a>03335                     }
<a name="l03336"></a>03336                 | f_arg <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d3/d09/ripper_8y.html#a656c4e2e5e1db08ef4ae0b1c6053e671">f_block_optarg</a> opt_f_block_arg
<a name="l03337"></a>03337                     {
<a name="l03338"></a>03338                     <span class="comment">/*%%%*/</span>
<a name="l03339"></a>03339                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>($1, $3, 0, 0, $4);
<a name="l03340"></a>03340                     <span class="comment">/*%</span>
<a name="l03341"></a>03341 <span class="comment">                        $$ = params_new($1, $3, Qnil, Qnil, escape_Qundef($4));</span>
<a name="l03342"></a>03342 <span class="comment">                    %*/</span>
<a name="l03343"></a><a class="code" href="../../d7/dc0/parse_8y.html#a2e197f156e331a0a692df79ff237139b">03343</a>                     }
<a name="l03344"></a>03344                 | f_arg <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d3/d09/ripper_8y.html#a656c4e2e5e1db08ef4ae0b1c6053e671">f_block_optarg</a> <span class="charliteral">&apos;,&apos;</span> f_arg opt_f_block_arg
<a name="l03345"></a>03345                     {
<a name="l03346"></a>03346                     <span class="comment">/*%%%*/</span>
<a name="l03347"></a>03347                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>($1, $3, 0, $5, $6);
<a name="l03348"></a>03348                     <span class="comment">/*%</span>
<a name="l03349"></a>03349 <span class="comment">                        $$ = params_new($1, $3, Qnil, $5, escape_Qundef($6));</span>
<a name="l03350"></a>03350 <span class="comment">                    %*/</span>
<a name="l03351"></a>03351                     }
<a name="l03352"></a>03352                 | f_arg <span class="charliteral">&apos;,&apos;</span> f_rest_arg opt_f_block_arg
<a name="l03353"></a>03353                     {
<a name="l03354"></a>03354                     <span class="comment">/*%%%*/</span>
<a name="l03355"></a>03355                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>($1, 0, $3, 0, $4);
<a name="l03356"></a>03356                     <span class="comment">/*%</span>
<a name="l03357"></a>03357 <span class="comment">                        $$ = params_new($1, Qnil, $3, Qnil, escape_Qundef($4));</span>
<a name="l03358"></a>03358 <span class="comment">                    %*/</span>
<a name="l03359"></a>03359                     }
<a name="l03360"></a>03360                 | f_arg <span class="charliteral">&apos;,&apos;</span>
<a name="l03361"></a>03361                     {
<a name="l03362"></a>03362                     <span class="comment">/*%%%*/</span>
<a name="l03363"></a>03363                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>($1, 0, 1, 0, 0);
<a name="l03364"></a>03364                     <span class="comment">/*%</span>
<a name="l03365"></a>03365 <span class="comment">                        $$ = params_new($1, Qnil, Qnil, Qnil, Qnil);</span>
<a name="l03366"></a>03366 <span class="comment">                        dispatch1(excessed_comma, $$);</span>
<a name="l03367"></a>03367 <span class="comment">                    %*/</span>
<a name="l03368"></a>03368                     }
<a name="l03369"></a>03369                 | f_arg <span class="charliteral">&apos;,&apos;</span> f_rest_arg <span class="charliteral">&apos;,&apos;</span> f_arg opt_f_block_arg
<a name="l03370"></a>03370                     {
<a name="l03371"></a><a class="code" href="../../d7/dc0/parse_8y.html#ac8389d30ce91ba604b06787c3f3bb3a0">03371</a>                     <span class="comment">/*%%%*/</span>
<a name="l03372"></a>03372                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>($1, 0, $3, $5, $6);
<a name="l03373"></a>03373                     <span class="comment">/*%</span>
<a name="l03374"></a>03374 <span class="comment">                        $$ = params_new($1, Qnil, $3, $5, escape_Qundef($6));</span>
<a name="l03375"></a>03375 <span class="comment">                    %*/</span>
<a name="l03376"></a>03376                     }
<a name="l03377"></a>03377                 | f_arg opt_f_block_arg
<a name="l03378"></a>03378                     {
<a name="l03379"></a>03379                     <span class="comment">/*%%%*/</span>
<a name="l03380"></a>03380                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>($1, 0, 0, 0, $2);
<a name="l03381"></a>03381                     <span class="comment">/*%</span>
<a name="l03382"></a>03382 <span class="comment">                        $$ = params_new($1, Qnil,Qnil, Qnil, escape_Qundef($2));</span>
<a name="l03383"></a>03383 <span class="comment">                    %*/</span>
<a name="l03384"></a>03384                     }
<a name="l03385"></a>03385                 | <a class="code" href="../../d3/d09/ripper_8y.html#a656c4e2e5e1db08ef4ae0b1c6053e671">f_block_optarg</a> <span class="charliteral">&apos;,&apos;</span> f_rest_arg opt_f_block_arg
<a name="l03386"></a>03386                     {
<a name="l03387"></a>03387                     <span class="comment">/*%%%*/</span>
<a name="l03388"></a>03388                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(0, $1, $3, 0, $4);
<a name="l03389"></a>03389                     <span class="comment">/*%</span>
<a name="l03390"></a>03390 <span class="comment">                        $$ = params_new(Qnil, $1, $3, Qnil, escape_Qundef($4));</span>
<a name="l03391"></a>03391 <span class="comment">                    %*/</span>
<a name="l03392"></a>03392                     }
<a name="l03393"></a>03393                 | <a class="code" href="../../d3/d09/ripper_8y.html#a656c4e2e5e1db08ef4ae0b1c6053e671">f_block_optarg</a> <span class="charliteral">&apos;,&apos;</span> f_rest_arg <span class="charliteral">&apos;,&apos;</span> f_arg opt_f_block_arg
<a name="l03394"></a>03394                     {
<a name="l03395"></a>03395                     <span class="comment">/*%%%*/</span>
<a name="l03396"></a>03396                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(0, $1, $3, $5, $6);
<a name="l03397"></a>03397                     <span class="comment">/*%</span>
<a name="l03398"></a>03398 <span class="comment">                        $$ = params_new(Qnil, $1, $3, $5, escape_Qundef($6));</span>
<a name="l03399"></a>03399 <span class="comment">                    %*/</span>
<a name="l03400"></a>03400                     }
<a name="l03401"></a>03401                 | <a class="code" href="../../d3/d09/ripper_8y.html#a656c4e2e5e1db08ef4ae0b1c6053e671">f_block_optarg</a> opt_f_block_arg
<a name="l03402"></a>03402                     {
<a name="l03403"></a>03403                     <span class="comment">/*%%%*/</span>
<a name="l03404"></a>03404                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(0, $1, 0, 0, $2);
<a name="l03405"></a>03405                     <span class="comment">/*%</span>
<a name="l03406"></a>03406 <span class="comment">                        $$ = params_new(Qnil, $1, Qnil, Qnil,escape_Qundef($2));</span>
<a name="l03407"></a>03407 <span class="comment">                    %*/</span>
<a name="l03408"></a>03408                     }
<a name="l03409"></a>03409                 | <a class="code" href="../../d3/d09/ripper_8y.html#a656c4e2e5e1db08ef4ae0b1c6053e671">f_block_optarg</a> <span class="charliteral">&apos;,&apos;</span> f_arg opt_f_block_arg
<a name="l03410"></a>03410                     {
<a name="l03411"></a>03411                     <span class="comment">/*%%%*/</span>
<a name="l03412"></a>03412                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(0, $1, 0, $3, $4);
<a name="l03413"></a>03413                     <span class="comment">/*%</span>
<a name="l03414"></a>03414 <span class="comment">                        $$ = params_new(Qnil, $1, Qnil, $3, escape_Qundef($4));</span>
<a name="l03415"></a>03415 <span class="comment">                    %*/</span>
<a name="l03416"></a>03416                     }
<a name="l03417"></a>03417                 | f_rest_arg opt_f_block_arg
<a name="l03418"></a>03418                     {
<a name="l03419"></a>03419                     <span class="comment">/*%%%*/</span>
<a name="l03420"></a>03420                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(0, 0, $1, 0, $2);
<a name="l03421"></a>03421                     <span class="comment">/*%</span>
<a name="l03422"></a>03422 <span class="comment">                        $$ = params_new(Qnil, Qnil, $1, Qnil, escape_Qundef($2));</span>
<a name="l03423"></a>03423 <span class="comment">                    %*/</span>
<a name="l03424"></a>03424                     }
<a name="l03425"></a>03425                 | f_rest_arg <span class="charliteral">&apos;,&apos;</span> f_arg opt_f_block_arg
<a name="l03426"></a>03426                     {
<a name="l03427"></a>03427                     <span class="comment">/*%%%*/</span>
<a name="l03428"></a>03428                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(0, 0, $1, $3, $4);
<a name="l03429"></a>03429                     <span class="comment">/*%</span>
<a name="l03430"></a>03430 <span class="comment">                        $$ = params_new(Qnil, Qnil, $1, $3, escape_Qundef($4));</span>
<a name="l03431"></a>03431 <span class="comment">                    %*/</span>
<a name="l03432"></a>03432                     }
<a name="l03433"></a>03433                 | f_block_arg
<a name="l03434"></a>03434                     {
<a name="l03435"></a>03435                     <span class="comment">/*%%%*/</span>
<a name="l03436"></a>03436                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(0, 0, 0, 0, $1);
<a name="l03437"></a>03437                     <span class="comment">/*%</span>
<a name="l03438"></a>03438 <span class="comment">                        $$ = params_new(Qnil, Qnil, Qnil, Qnil, $1);</span>
<a name="l03439"></a>03439 <span class="comment">                    %*/</span>
<a name="l03440"></a>03440                     }
<a name="l03441"></a>03441                 ;
<a name="l03442"></a>03442 
<a name="l03443"></a>03443 opt_block_param : <a class="code" href="../../d3/d09/ripper_8y.html#a2b9edf1e7cc4980ffa29e35e6186b170">none</a>
<a name="l03444"></a>03444                 | block_param_def
<a name="l03445"></a>03445                     {
<a name="l03446"></a>03446                         <a class="code" href="../../d5/d11/ripper_8c.html#a302ec49a8c1c02e0dbaa5b4362263e40">command_start</a> = <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l03447"></a>03447                     }
<a name="l03448"></a>03448                 ;
<a name="l03449"></a>03449 
<a name="l03450"></a>03450 block_param_def : <span class="charliteral">&apos;|&apos;</span> opt_bv_decl <span class="charliteral">&apos;|&apos;</span>
<a name="l03451"></a>03451                     {
<a name="l03452"></a>03452                     <span class="comment">/*%%%*/</span>
<a name="l03453"></a>03453                         $$ = 0;
<a name="l03454"></a>03454                     <span class="comment">/*%</span>
<a name="l03455"></a>03455 <span class="comment">                        $$ = blockvar_new(params_new(Qnil,Qnil,Qnil,Qnil,Qnil),</span>
<a name="l03456"></a>03456 <span class="comment">                                          escape_Qundef($2));</span>
<a name="l03457"></a>03457 <span class="comment">                    %*/</span>
<a name="l03458"></a>03458                     }
<a name="l03459"></a>03459                 | <a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a>
<a name="l03460"></a>03460                     {
<a name="l03461"></a>03461                     <span class="comment">/*%%%*/</span>
<a name="l03462"></a>03462                         $$ = 0;
<a name="l03463"></a>03463                     <span class="comment">/*%</span>
<a name="l03464"></a>03464 <span class="comment">                        $$ = blockvar_new(params_new(Qnil,Qnil,Qnil,Qnil,Qnil),</span>
<a name="l03465"></a>03465 <span class="comment">                                          Qnil);</span>
<a name="l03466"></a>03466 <span class="comment">                    %*/</span>
<a name="l03467"></a>03467                     }
<a name="l03468"></a>03468                 | <span class="charliteral">&apos;|&apos;</span> block_param opt_bv_decl <span class="charliteral">&apos;|&apos;</span>
<a name="l03469"></a>03469                     {
<a name="l03470"></a>03470                     <span class="comment">/*%%%*/</span>
<a name="l03471"></a>03471                         $$ = $2;
<a name="l03472"></a>03472                     <span class="comment">/*%</span>
<a name="l03473"></a>03473 <span class="comment">                        $$ = blockvar_new(escape_Qundef($2), escape_Qundef($3));</span>
<a name="l03474"></a>03474 <span class="comment">                    %*/</span>
<a name="l03475"></a>03475                     }
<a name="l03476"></a>03476                 ;
<a name="l03477"></a>03477 
<a name="l03478"></a>03478 
<a name="l03479"></a>03479 opt_bv_decl     : <a class="code" href="../../d3/d09/ripper_8y.html#a2b9edf1e7cc4980ffa29e35e6186b170">none</a>
<a name="l03480"></a>03480                 | <span class="charliteral">&apos;;&apos;</span> <a class="code" href="../../d3/d09/ripper_8y.html#a15e79be55a5c3a7de560fa1413cfeb18">bv_decls</a>
<a name="l03481"></a>03481                     {
<a name="l03482"></a>03482                     <span class="comment">/*%%%*/</span>
<a name="l03483"></a>03483                         $$ = 0;
<a name="l03484"></a>03484                     <span class="comment">/*%</span>
<a name="l03485"></a>03485 <span class="comment">                        $$ = $2;</span>
<a name="l03486"></a>03486 <span class="comment">                    %*/</span>
<a name="l03487"></a>03487                     }
<a name="l03488"></a>03488                 ;
<a name="l03489"></a>03489 
<a name="l03490"></a>03490 <a class="code" href="../../d3/d09/ripper_8y.html#a15e79be55a5c3a7de560fa1413cfeb18">bv_decls</a>        : <a class="code" href="../../d7/dc0/parse_8y.html#a61ddd7143020d0d74b03f3eaa5838062">bvar</a>
<a name="l03491"></a>03491                     <span class="comment">/*%c%*/</span>
<a name="l03492"></a>03492                     <span class="comment">/*%c</span>
<a name="l03493"></a>03493 <span class="comment">                    {</span>
<a name="l03494"></a>03494 <span class="comment">                        $$ = rb_ary_new3(1, $1);</span>
<a name="l03495"></a>03495 <span class="comment">                    }</span>
<a name="l03496"></a>03496 <span class="comment">                    %*/</span>
<a name="l03497"></a>03497                 | <a class="code" href="../../d3/d09/ripper_8y.html#a15e79be55a5c3a7de560fa1413cfeb18">bv_decls</a> <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d7/dc0/parse_8y.html#a61ddd7143020d0d74b03f3eaa5838062">bvar</a>
<a name="l03498"></a>03498                     <span class="comment">/*%c%*/</span>
<a name="l03499"></a>03499                     <span class="comment">/*%c</span>
<a name="l03500"></a>03500 <span class="comment">                    {</span>
<a name="l03501"></a>03501 <span class="comment">                        rb_ary_push($$, $3);</span>
<a name="l03502"></a>03502 <span class="comment">                    }</span>
<a name="l03503"></a>03503 <span class="comment">                    %*/</span>
<a name="l03504"></a>03504                 ;
<a name="l03505"></a>03505 
<a name="l03506"></a>03506 bvar            : <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a>
<a name="l03507"></a>03507                     {
<a name="l03508"></a>03508                         <a class="code" href="../../d5/d11/ripper_8c.html#ac58bf3482faa55ed3af22c3878c35feb">new_bv</a>(<a class="code" href="../../d5/d11/ripper_8c.html#addeeb969b789536e6d64fb25622be06a">get_id</a>($1));
<a name="l03509"></a>03509                     <span class="comment">/*%%%*/</span>
<a name="l03510"></a>03510                     <span class="comment">/*%</span>
<a name="l03511"></a>03511 <span class="comment">                        $$ = get_value($1);</span>
<a name="l03512"></a>03512 <span class="comment">                    %*/</span>
<a name="l03513"></a>03513                     }
<a name="l03514"></a>03514                 | f_bad_arg
<a name="l03515"></a>03515                     {
<a name="l03516"></a>03516                         $$ = 0;
<a name="l03517"></a>03517                     }
<a name="l03518"></a>03518                 ;
<a name="l03519"></a>03519 
<a name="l03520"></a>03520 lambda          :   {
<a name="l03521"></a>03521                         $&lt;vars&gt;$ = <a class="code" href="../../d5/d11/ripper_8c.html#ab76822e9189a6d2d8bb806c34f9ac6b9">dyna_push</a>();
<a name="l03522"></a>03522                     }
<a name="l03523"></a>03523                     {
<a name="l03524"></a>03524                         $&lt;num&gt;$ = <a class="code" href="../../d5/d11/ripper_8c.html#a107615bfe2fe869c09b6c4a3bd8db8ec">lpar_beg</a>;
<a name="l03525"></a>03525                         <a class="code" href="../../d5/d11/ripper_8c.html#a107615bfe2fe869c09b6c4a3bd8db8ec">lpar_beg</a> = ++<a class="code" href="../../d5/d11/ripper_8c.html#aba595207d91c2ea297a6d72686e3d421">paren_nest</a>;
<a name="l03526"></a>03526                     }
<a name="l03527"></a>03527                   f_larglist
<a name="l03528"></a>03528                   lambda_body
<a name="l03529"></a>03529                     {
<a name="l03530"></a>03530                         <a class="code" href="../../d5/d11/ripper_8c.html#a107615bfe2fe869c09b6c4a3bd8db8ec">lpar_beg</a> = $&lt;num&gt;2;
<a name="l03531"></a>03531                     <span class="comment">/*%%%*/</span>
<a name="l03532"></a>03532                         $$ = $3;
<a name="l03533"></a>03533                         $$-&gt;nd_body = <a class="code" href="../../d3/d09/ripper_8y.html#ad0321dad4945e9cea9b0a5f0296e2505">NEW_SCOPE</a>($3-&gt;nd_head, $4);
<a name="l03534"></a>03534                     <span class="comment">/*%</span>
<a name="l03535"></a>03535 <span class="comment">                        $$ = dispatch2(lambda, $3, $4);</span>
<a name="l03536"></a>03536 <span class="comment">                    %*/</span>
<a name="l03537"></a>03537                         <a class="code" href="../../d5/d11/ripper_8c.html#abfd779fd3800c7f33c9036ae80612115">dyna_pop</a>($&lt;vars&gt;1);
<a name="l03538"></a>03538                     }
<a name="l03539"></a>03539                 ;
<a name="l03540"></a><a class="code" href="../../d7/dc0/parse_8y.html#a569472f65e618897a4406d714d85a2e1">03540</a> 
<a name="l03541"></a>03541 f_larglist      : <span class="charliteral">&apos;(&apos;</span> f_args opt_bv_decl rparen
<a name="l03542"></a>03542                     {
<a name="l03543"></a>03543                     <span class="comment">/*%%%*/</span>
<a name="l03544"></a>03544                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a25698181d12a4a3bfbcd03ef7fe38462">NEW_LAMBDA</a>($2);
<a name="l03545"></a>03545                     <span class="comment">/*%</span>
<a name="l03546"></a>03546 <span class="comment">                        $$ = dispatch1(paren, $2);</span>
<a name="l03547"></a>03547 <span class="comment">                    %*/</span>
<a name="l03548"></a>03548                     }
<a name="l03549"></a>03549                 | f_args
<a name="l03550"></a>03550                     {
<a name="l03551"></a><a class="code" href="../../d7/dc0/parse_8y.html#aba2fdcd982997201d7c7811eba209d8f">03551</a>                     <span class="comment">/*%%%*/</span>
<a name="l03552"></a>03552                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a25698181d12a4a3bfbcd03ef7fe38462">NEW_LAMBDA</a>($1);
<a name="l03553"></a>03553                     <span class="comment">/*%</span>
<a name="l03554"></a>03554 <span class="comment">                        $$ = $1;</span>
<a name="l03555"></a>03555 <span class="comment">                    %*/</span>
<a name="l03556"></a><a class="code" href="../../d7/dc0/parse_8y.html#a29af84a4388129be7c41d18543480adf">03556</a>                     }
<a name="l03557"></a>03557                 ;
<a name="l03558"></a>03558 
<a name="l03559"></a>03559 lambda_body     : <a class="code" href="../../d5/d11/ripper_8c.html#a0dac552aee08b749a8cc2627b458e825">tLAMBEG</a> compstmt <span class="charliteral">&apos;}&apos;</span>
<a name="l03560"></a>03560                     {
<a name="l03561"></a>03561                         $$ = $2;
<a name="l03562"></a>03562                     }
<a name="l03563"></a>03563                 | <a class="code" href="../../d5/d11/ripper_8c.html#a76b1eba4e233c955a6532d8de0c07b4b">keyword_do_LAMBDA</a> compstmt <a class="code" href="../../d5/d11/ripper_8c.html#a3887eba1b6af6ce3835d41cf832b4fa1">keyword_end</a>
<a name="l03564"></a>03564                     {
<a name="l03565"></a>03565                         $$ = $2;
<a name="l03566"></a>03566                     }
<a name="l03567"></a>03567                 ;
<a name="l03568"></a>03568 
<a name="l03569"></a>03569 do_block        : <a class="code" href="../../d5/d11/ripper_8c.html#ac943360c0f2387c1797ba9b77537e915">keyword_do_block</a>
<a name="l03570"></a>03570                     {
<a name="l03571"></a>03571                         $&lt;vars&gt;1 = <a class="code" href="../../d5/d11/ripper_8c.html#ab76822e9189a6d2d8bb806c34f9ac6b9">dyna_push</a>();
<a name="l03572"></a>03572                     <span class="comment">/*%%%*/</span>
<a name="l03573"></a>03573                         $&lt;num&gt;$ = <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>;
<a name="l03574"></a>03574                     <span class="comment">/*% %*/</span>
<a name="l03575"></a>03575                     }
<a name="l03576"></a>03576                   opt_block_param
<a name="l03577"></a><a class="code" href="../../d7/dc0/parse_8y.html#ab4b59caf60fcca967319c3fe53c1d8ea">03577</a>                   compstmt
<a name="l03578"></a>03578                   <a class="code" href="../../d5/d11/ripper_8c.html#a3887eba1b6af6ce3835d41cf832b4fa1">keyword_end</a>
<a name="l03579"></a>03579                     {
<a name="l03580"></a>03580                     <span class="comment">/*%%%*/</span>
<a name="l03581"></a>03581                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a60cef03d789abc5bf6c5a6c8ab65428c">NEW_ITER</a>($3,$4);
<a name="l03582"></a>03582                         <a class="code" href="../../d3/d09/ripper_8y.html#ac821dfc4ca1d4673db9669205be97f85">nd_set_line</a>($$, $&lt;num&gt;2);
<a name="l03583"></a>03583                     <span class="comment">/*%</span>
<a name="l03584"></a>03584 <span class="comment">                        $$ = dispatch2(do_block, escape_Qundef($3), $4);</span>
<a name="l03585"></a><a class="code" href="../../d7/dc0/parse_8y.html#ac78a52275bceb21861c63ebad9703282">03585</a> <span class="comment">                    %*/</span>
<a name="l03586"></a>03586                         <a class="code" href="../../d5/d11/ripper_8c.html#abfd779fd3800c7f33c9036ae80612115">dyna_pop</a>($&lt;vars&gt;1);
<a name="l03587"></a>03587                     }
<a name="l03588"></a>03588                 ;
<a name="l03589"></a>03589 
<a name="l03590"></a>03590 block_call      : command do_block
<a name="l03591"></a>03591                     {
<a name="l03592"></a>03592                     <span class="comment">/*%%%*/</span>
<a name="l03593"></a>03593                         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($1) == NODE_YIELD) {
<a name="l03594"></a>03594                             <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;block given to yield&quot;</span>);
<a name="l03595"></a>03595                         }
<a name="l03596"></a>03596                         <span class="keywordflow">else</span> {
<a name="l03597"></a>03597                             <a class="code" href="../../d5/d11/ripper_8c.html#a437c8ac82de682de2075a396512f16e0">block_dup_check</a>($1-&gt;nd_args, $2);
<a name="l03598"></a>03598                         }
<a name="l03599"></a>03599                         $2-&gt;nd_iter = $1;
<a name="l03600"></a>03600                         $$ = $2;
<a name="l03601"></a>03601                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l03602"></a>03602                     <span class="comment">/*%</span>
<a name="l03603"></a>03603 <span class="comment">                        $$ = method_add_block($1, $2);</span>
<a name="l03604"></a>03604 <span class="comment">                    %*/</span>
<a name="l03605"></a><a class="code" href="../../d7/dc0/parse_8y.html#a7c47d969291ab76337e4beda357dd9a0">03605</a>                     }
<a name="l03606"></a>03606                 | block_call <span class="charliteral">&apos;.&apos;</span> operation2 opt_paren_args
<a name="l03607"></a>03607                     {
<a name="l03608"></a>03608                     <span class="comment">/*%%%*/</span>
<a name="l03609"></a>03609                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>($1, $3, $4);
<a name="l03610"></a>03610                     <span class="comment">/*%</span>
<a name="l03611"></a><a class="code" href="../../d7/dc0/parse_8y.html#a158ce97b66ee23d5d6a425e95dbf110b">03611</a> <span class="comment">                        $$ = dispatch3(call, $1, ripper_id2sym(&apos;.&apos;), $3);</span>
<a name="l03612"></a>03612 <span class="comment">                        $$ = method_optarg($$, $4);</span>
<a name="l03613"></a>03613 <span class="comment">                    %*/</span>
<a name="l03614"></a>03614                     }
<a name="l03615"></a>03615                 | block_call <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a> operation2 opt_paren_args
<a name="l03616"></a><a class="code" href="../../d7/dc0/parse_8y.html#ad9916999db8b69a3d42457ebd1db49e2">03616</a>                     {
<a name="l03617"></a>03617                     <span class="comment">/*%%%*/</span>
<a name="l03618"></a>03618                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>($1, $3, $4);
<a name="l03619"></a>03619                     <span class="comment">/*%</span>
<a name="l03620"></a>03620 <span class="comment">                        $$ = dispatch3(call, $1, ripper_intern(&quot;::&quot;), $3);</span>
<a name="l03621"></a><a class="code" href="../../d7/dc0/parse_8y.html#ad59742559d4e803b0610282f5f16dc95">03621</a> <span class="comment">                        $$ = method_optarg($$, $4);</span>
<a name="l03622"></a>03622 <span class="comment">                    %*/</span>
<a name="l03623"></a>03623                     }
<a name="l03624"></a>03624                 ;
<a name="l03625"></a>03625 
<a name="l03626"></a>03626 method_call     : operation paren_args
<a name="l03627"></a>03627                     {
<a name="l03628"></a>03628                     <span class="comment">/*%%%*/</span>
<a name="l03629"></a>03629                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#ab2c9a6c46cf2371d4268127604a2997c">NEW_FCALL</a>($1, $2);
<a name="l03630"></a>03630                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $2);
<a name="l03631"></a>03631                     <span class="comment">/*%</span>
<a name="l03632"></a>03632 <span class="comment">                        $$ = method_arg(dispatch1(fcall, $1), $2);</span>
<a name="l03633"></a>03633 <span class="comment">                    %*/</span>
<a name="l03634"></a>03634                     }
<a name="l03635"></a>03635                 | primary_value <span class="charliteral">&apos;.&apos;</span> operation2 opt_paren_args
<a name="l03636"></a>03636                     {
<a name="l03637"></a>03637                     <span class="comment">/*%%%*/</span>
<a name="l03638"></a>03638                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>($1, $3, $4);
<a name="l03639"></a>03639                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l03640"></a>03640                     <span class="comment">/*%</span>
<a name="l03641"></a>03641 <span class="comment">                        $$ = dispatch3(call, $1, ripper_id2sym(&apos;.&apos;), $3);</span>
<a name="l03642"></a>03642 <span class="comment">                        $$ = method_optarg($$, $4);</span>
<a name="l03643"></a>03643 <span class="comment">                    %*/</span>
<a name="l03644"></a>03644                     }
<a name="l03645"></a>03645                 | primary_value <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a> operation2 paren_args
<a name="l03646"></a>03646                     {
<a name="l03647"></a>03647                     <span class="comment">/*%%%*/</span>
<a name="l03648"></a>03648                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>($1, $3, $4);
<a name="l03649"></a>03649                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l03650"></a>03650                     <span class="comment">/*%</span>
<a name="l03651"></a>03651 <span class="comment">                        $$ = dispatch3(call, $1, ripper_id2sym(&apos;.&apos;), $3);</span>
<a name="l03652"></a>03652 <span class="comment">                        $$ = method_optarg($$, $4);</span>
<a name="l03653"></a>03653 <span class="comment">                    %*/</span>
<a name="l03654"></a>03654                     }
<a name="l03655"></a>03655                 | primary_value <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a> operation3
<a name="l03656"></a>03656                     {
<a name="l03657"></a>03657                     <span class="comment">/*%%%*/</span>
<a name="l03658"></a>03658                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>($1, $3, 0);
<a name="l03659"></a>03659                     <span class="comment">/*%</span>
<a name="l03660"></a><a class="code" href="../../d7/dc0/parse_8y.html#a5cf030da227d5d10b848d30510e1ba4e">03660</a> <span class="comment">                        $$ = dispatch3(call, $1, ripper_intern(&quot;::&quot;), $3);</span>
<a name="l03661"></a>03661 <span class="comment">                    %*/</span>
<a name="l03662"></a>03662                     }
<a name="l03663"></a>03663                 | primary_value <span class="charliteral">&apos;.&apos;</span> paren_args
<a name="l03664"></a>03664                     {
<a name="l03665"></a>03665                     <span class="comment">/*%%%*/</span>
<a name="l03666"></a>03666                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>($1, <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;call&quot;</span>), $3);
<a name="l03667"></a>03667                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l03668"></a>03668                     <span class="comment">/*%</span>
<a name="l03669"></a>03669 <span class="comment">                        $$ = dispatch3(call, $1, ripper_id2sym(&apos;.&apos;),</span>
<a name="l03670"></a>03670 <span class="comment">                                       ripper_intern(&quot;call&quot;));</span>
<a name="l03671"></a>03671 <span class="comment">                        $$ = method_optarg($$, $3);</span>
<a name="l03672"></a>03672 <span class="comment">                    %*/</span>
<a name="l03673"></a>03673                     }
<a name="l03674"></a>03674                 | primary_value <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a> paren_args
<a name="l03675"></a>03675                     {
<a name="l03676"></a>03676                     <span class="comment">/*%%%*/</span>
<a name="l03677"></a>03677                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>($1, <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;call&quot;</span>), $3);
<a name="l03678"></a>03678                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l03679"></a><a class="code" href="../../d7/dc0/parse_8y.html#a6635d572ef1e86c6205b42ea00d68c66">03679</a>                     <span class="comment">/*%</span>
<a name="l03680"></a>03680 <span class="comment">                        $$ = dispatch3(call, $1, ripper_intern(&quot;::&quot;),</span>
<a name="l03681"></a>03681 <span class="comment">                                       ripper_intern(&quot;call&quot;));</span>
<a name="l03682"></a>03682 <span class="comment">                        $$ = method_optarg($$, $3);</span>
<a name="l03683"></a>03683 <span class="comment">                    %*/</span>
<a name="l03684"></a>03684                     }
<a name="l03685"></a>03685                 | <a class="code" href="../../d5/d11/ripper_8c.html#aeb6f2f7f0aff1706e3fcb6b1777ee784">keyword_super</a> paren_args
<a name="l03686"></a>03686                     {
<a name="l03687"></a>03687                     <span class="comment">/*%%%*/</span>
<a name="l03688"></a>03688                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a8d18610c4e6d95d2792d4d8416922c7e">NEW_SUPER</a>($2);
<a name="l03689"></a>03689                     <span class="comment">/*%</span>
<a name="l03690"></a>03690 <span class="comment">                        $$ = dispatch1(super, $2);</span>
<a name="l03691"></a>03691 <span class="comment">                    %*/</span>
<a name="l03692"></a>03692                     }
<a name="l03693"></a>03693                 | <a class="code" href="../../d5/d11/ripper_8c.html#aeb6f2f7f0aff1706e3fcb6b1777ee784">keyword_super</a>
<a name="l03694"></a>03694                     {
<a name="l03695"></a>03695                     <span class="comment">/*%%%*/</span>
<a name="l03696"></a>03696                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#ab3ab66050936d47322ee10c294c40fec">NEW_ZSUPER</a>();
<a name="l03697"></a>03697                     <span class="comment">/*%</span>
<a name="l03698"></a>03698 <span class="comment">                        $$ = dispatch0(zsuper);</span>
<a name="l03699"></a>03699 <span class="comment">                    %*/</span>
<a name="l03700"></a>03700                     }
<a name="l03701"></a>03701                 | primary_value <span class="charliteral">&apos;[&apos;</span> opt_call_args rbracket
<a name="l03702"></a>03702                     {
<a name="l03703"></a>03703                     <span class="comment">/*%%%*/</span>
<a name="l03704"></a>03704                         <span class="keywordflow">if</span> ($1 &amp;&amp; <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($1) == NODE_SELF)
<a name="l03705"></a>03705                             $$ = <a class="code" href="../../d3/d09/ripper_8y.html#ab2c9a6c46cf2371d4268127604a2997c">NEW_FCALL</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ab052bc5e13a5bbe98406c4aec5a4deac">tAREF</a>, $3);
<a name="l03706"></a>03706                         <span class="keywordflow">else</span>
<a name="l03707"></a>03707                             $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>($1, <a class="code" href="../../d5/d11/ripper_8c.html#ab052bc5e13a5bbe98406c4aec5a4deac">tAREF</a>, $3);
<a name="l03708"></a>03708                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $1);
<a name="l03709"></a>03709                     <span class="comment">/*%</span>
<a name="l03710"></a>03710 <span class="comment">                        $$ = dispatch2(aref, $1, escape_Qundef($3));</span>
<a name="l03711"></a>03711 <span class="comment">                    %*/</span>
<a name="l03712"></a>03712                     }
<a name="l03713"></a>03713                 ;
<a name="l03714"></a>03714 
<a name="l03715"></a>03715 brace_block     : <span class="charliteral">&apos;{&apos;</span>
<a name="l03716"></a>03716                     {
<a name="l03717"></a>03717                         $&lt;vars&gt;1 = <a class="code" href="../../d5/d11/ripper_8c.html#ab76822e9189a6d2d8bb806c34f9ac6b9">dyna_push</a>();
<a name="l03718"></a>03718                     <span class="comment">/*%%%*/</span>
<a name="l03719"></a>03719                         $&lt;num&gt;$ = <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>;
<a name="l03720"></a>03720                     <span class="comment">/*%</span>
<a name="l03721"></a>03721 <span class="comment">                    %*/</span>
<a name="l03722"></a>03722                     }
<a name="l03723"></a>03723                   opt_block_param
<a name="l03724"></a>03724                   compstmt <span class="charliteral">&apos;}&apos;</span>
<a name="l03725"></a>03725                     {
<a name="l03726"></a>03726                     <span class="comment">/*%%%*/</span>
<a name="l03727"></a>03727                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a60cef03d789abc5bf6c5a6c8ab65428c">NEW_ITER</a>($3,$4);
<a name="l03728"></a>03728                         <a class="code" href="../../d3/d09/ripper_8y.html#ac821dfc4ca1d4673db9669205be97f85">nd_set_line</a>($$, $&lt;num&gt;2);
<a name="l03729"></a>03729                     <span class="comment">/*%</span>
<a name="l03730"></a>03730 <span class="comment">                        $$ = dispatch2(brace_block, escape_Qundef($3), $4);</span>
<a name="l03731"></a>03731 <span class="comment">                    %*/</span>
<a name="l03732"></a>03732                         <a class="code" href="../../d5/d11/ripper_8c.html#abfd779fd3800c7f33c9036ae80612115">dyna_pop</a>($&lt;vars&gt;1);
<a name="l03733"></a>03733                     }
<a name="l03734"></a>03734                 | <a class="code" href="../../d5/d11/ripper_8c.html#af0eaec49b504972deb0631ab428cf7f0">keyword_do</a>
<a name="l03735"></a>03735                     {
<a name="l03736"></a>03736                         $&lt;vars&gt;1 = <a class="code" href="../../d5/d11/ripper_8c.html#ab76822e9189a6d2d8bb806c34f9ac6b9">dyna_push</a>();
<a name="l03737"></a>03737                     <span class="comment">/*%%%*/</span>
<a name="l03738"></a>03738                         $&lt;num&gt;$ = <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>;
<a name="l03739"></a>03739                     <span class="comment">/*%</span>
<a name="l03740"></a>03740 <span class="comment">                    %*/</span>
<a name="l03741"></a>03741                     }
<a name="l03742"></a>03742                   opt_block_param
<a name="l03743"></a>03743                   compstmt <a class="code" href="../../d5/d11/ripper_8c.html#a3887eba1b6af6ce3835d41cf832b4fa1">keyword_end</a>
<a name="l03744"></a>03744                     {
<a name="l03745"></a>03745                     <span class="comment">/*%%%*/</span>
<a name="l03746"></a>03746                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a60cef03d789abc5bf6c5a6c8ab65428c">NEW_ITER</a>($3,$4);
<a name="l03747"></a>03747                         <a class="code" href="../../d3/d09/ripper_8y.html#ac821dfc4ca1d4673db9669205be97f85">nd_set_line</a>($$, $&lt;num&gt;2);
<a name="l03748"></a>03748                     <span class="comment">/*%</span>
<a name="l03749"></a>03749 <span class="comment">                        $$ = dispatch2(do_block, escape_Qundef($3), $4);</span>
<a name="l03750"></a>03750 <span class="comment">                    %*/</span>
<a name="l03751"></a>03751                         <a class="code" href="../../d5/d11/ripper_8c.html#abfd779fd3800c7f33c9036ae80612115">dyna_pop</a>($&lt;vars&gt;1);
<a name="l03752"></a>03752                     }
<a name="l03753"></a>03753                 ;
<a name="l03754"></a>03754 
<a name="l03755"></a>03755 case_body       : <a class="code" href="../../d5/d11/ripper_8c.html#a5b03b4dec3069e33b82fb88f1beb21c7">keyword_when</a> args then
<a name="l03756"></a>03756                   compstmt
<a name="l03757"></a>03757                   <a class="code" href="../../d7/dc0/parse_8y.html#a6a520c2087f1fd7ac16d02aced0e4f7f">cases</a>
<a name="l03758"></a>03758                     {
<a name="l03759"></a>03759                     <span class="comment">/*%%%*/</span>
<a name="l03760"></a>03760                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a79b20aee08828f19c0fedc8e1aaafb75">NEW_WHEN</a>($2, $4, $5);
<a name="l03761"></a>03761                     <span class="comment">/*%</span>
<a name="l03762"></a>03762 <span class="comment">                        $$ = dispatch3(when, $2, $4, escape_Qundef($5));</span>
<a name="l03763"></a>03763 <span class="comment">                    %*/</span>
<a name="l03764"></a>03764                     }
<a name="l03765"></a>03765                 ;
<a name="l03766"></a>03766 
<a name="l03767"></a>03767 <a class="code" href="../../d7/dc0/parse_8y.html#a6a520c2087f1fd7ac16d02aced0e4f7f">cases</a>           : opt_else
<a name="l03768"></a>03768                 | case_body
<a name="l03769"></a>03769                 ;
<a name="l03770"></a>03770 
<a name="l03771"></a>03771 opt_rescue      : <a class="code" href="../../d5/d11/ripper_8c.html#adb3283c05c39cb946a765e95edfe4b79">keyword_rescue</a> exc_list exc_var then
<a name="l03772"></a>03772                   compstmt
<a name="l03773"></a>03773                   opt_rescue
<a name="l03774"></a>03774                     {
<a name="l03775"></a>03775                     <span class="comment">/*%%%*/</span>
<a name="l03776"></a>03776                         <span class="keywordflow">if</span> ($3) {
<a name="l03777"></a>03777                             $3 = <a class="code" href="../../d5/d11/ripper_8c.html#a24425bcc46577a37c70057c22fe05b6f">node_assign</a>($3, <a class="code" href="../../d3/d09/ripper_8y.html#a3ec1c38fe8a09bb404384cdd7f89dc32">NEW_ERRINFO</a>());
<a name="l03778"></a>03778                             $5 = <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>($3, $5);
<a name="l03779"></a>03779                         }
<a name="l03780"></a>03780                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a3a24fa78d51a6d51a28bb911f51814c7">NEW_RESBODY</a>($2, $5, $6);
<a name="l03781"></a>03781                         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>($$, $2?$2:$5);
<a name="l03782"></a>03782                     <span class="comment">/*%</span>
<a name="l03783"></a>03783 <span class="comment">                        $$ = dispatch4(rescue,</span>
<a name="l03784"></a>03784 <span class="comment">                                       escape_Qundef($2),</span>
<a name="l03785"></a>03785 <span class="comment">                                       escape_Qundef($3),</span>
<a name="l03786"></a>03786 <span class="comment">                                       escape_Qundef($5),</span>
<a name="l03787"></a>03787 <span class="comment">                                       escape_Qundef($6));</span>
<a name="l03788"></a>03788 <span class="comment">                    %*/</span>
<a name="l03789"></a>03789                     }
<a name="l03790"></a>03790                 | <a class="code" href="../../d3/d09/ripper_8y.html#a2b9edf1e7cc4980ffa29e35e6186b170">none</a>
<a name="l03791"></a>03791                 ;
<a name="l03792"></a>03792 
<a name="l03793"></a>03793 exc_list        : arg_value
<a name="l03794"></a>03794                     {
<a name="l03795"></a>03795                     <span class="comment">/*%%%*/</span>
<a name="l03796"></a>03796                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>($1);
<a name="l03797"></a>03797                     <span class="comment">/*%</span>
<a name="l03798"></a>03798 <span class="comment">                        $$ = rb_ary_new3(1, $1);</span>
<a name="l03799"></a>03799 <span class="comment">                    %*/</span>
<a name="l03800"></a>03800                     }
<a name="l03801"></a>03801                 | mrhs
<a name="l03802"></a>03802                     {
<a name="l03803"></a>03803                     <span class="comment">/*%%%*/</span>
<a name="l03804"></a>03804                         <span class="keywordflow">if</span> (!($$ = <a class="code" href="../../d7/dc0/parse_8y.html#ac03fbbbe2d1f40883c0ed70f9fa0b517">splat_array</a>($1))) $$ = $1;
<a name="l03805"></a>03805                     <span class="comment">/*%</span>
<a name="l03806"></a>03806 <span class="comment">                        $$ = $1;</span>
<a name="l03807"></a>03807 <span class="comment">                    %*/</span>
<a name="l03808"></a>03808                     }
<a name="l03809"></a>03809                 | <a class="code" href="../../d3/d09/ripper_8y.html#a2b9edf1e7cc4980ffa29e35e6186b170">none</a>
<a name="l03810"></a>03810                 ;
<a name="l03811"></a>03811 
<a name="l03812"></a>03812 exc_var         : <a class="code" href="../../d5/d11/ripper_8c.html#a9df99a64c8253f03638b24327e2ff7b6">tASSOC</a> <a class="code" href="../../d3/d09/ripper_8y.html#a73c3a889aca6f2648374f6f8331d13ea">lhs</a>
<a name="l03813"></a>03813                     {
<a name="l03814"></a>03814                         $$ = $2;
<a name="l03815"></a>03815                     }
<a name="l03816"></a>03816                 | <a class="code" href="../../d3/d09/ripper_8y.html#a2b9edf1e7cc4980ffa29e35e6186b170">none</a>
<a name="l03817"></a>03817                 ;
<a name="l03818"></a>03818 
<a name="l03819"></a>03819 opt_ensure      : <a class="code" href="../../d5/d11/ripper_8c.html#a2cc9838aaa31cc63122bedee8cec14ca">keyword_ensure</a> compstmt
<a name="l03820"></a>03820                     {
<a name="l03821"></a>03821                     <span class="comment">/*%%%*/</span>
<a name="l03822"></a>03822                         $$ = $2;
<a name="l03823"></a>03823                     <span class="comment">/*%</span>
<a name="l03824"></a>03824 <span class="comment">                        $$ = dispatch1(ensure, $2);</span>
<a name="l03825"></a>03825 <span class="comment">                    %*/</span>
<a name="l03826"></a>03826                     }
<a name="l03827"></a>03827                 | <a class="code" href="../../d3/d09/ripper_8y.html#a2b9edf1e7cc4980ffa29e35e6186b170">none</a>
<a name="l03828"></a>03828                 ;
<a name="l03829"></a>03829 
<a name="l03830"></a>03830 literal         : numeric
<a name="l03831"></a>03831                 | symbol
<a name="l03832"></a>03832                     {
<a name="l03833"></a>03833                     <span class="comment">/*%%%*/</span>
<a name="l03834"></a>03834                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a0b35b94b9b2bf20d34efc1616be83916">NEW_LIT</a>(<a class="code" href="../../dc/d0c/cparse_8c.html#a48bfb6519a45249fb2ec0193ea3b6e1c">ID2SYM</a>($1));
<a name="l03835"></a>03835                     <span class="comment">/*%</span>
<a name="l03836"></a>03836 <span class="comment">                        $$ = dispatch1(symbol_literal, $1);</span>
<a name="l03837"></a>03837 <span class="comment">                    %*/</span>
<a name="l03838"></a>03838                     }
<a name="l03839"></a>03839                 | <a class="code" href="../../d3/d09/ripper_8y.html#a40f756f6fdaad745b00b1b19e8bc9556">dsym</a>
<a name="l03840"></a>03840                 ;
<a name="l03841"></a>03841 
<a name="l03842"></a>03842 strings         : <span class="keywordtype">string</span>
<a name="l03843"></a>03843                     {
<a name="l03844"></a>03844                     <span class="comment">/*%%%*/</span>
<a name="l03845"></a>03845                         NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a0d7af8a92c4b0a07f71585584ef9634f">node</a> = $1;
<a name="l03846"></a>03846                         <span class="keywordflow">if</span> (!node) {
<a name="l03847"></a>03847                             node = <a class="code" href="../../d3/d09/ripper_8y.html#a67754e89cb5fe173e2ba7c6bc1d82649">NEW_STR</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aec72cdf8444b31ad141093b4649173d5">STR_NEW0</a>());
<a name="l03848"></a>03848                         }
<a name="l03849"></a>03849                         <span class="keywordflow">else</span> {
<a name="l03850"></a>03850                             node = <a class="code" href="../../d5/d11/ripper_8c.html#a57d25cfbfc6a3ef658aef3b0bae7b5f5">evstr2dstr</a>(node);
<a name="l03851"></a>03851                         }
<a name="l03852"></a>03852                         $$ = node;
<a name="l03853"></a>03853                     <span class="comment">/*%</span>
<a name="l03854"></a>03854 <span class="comment">                        $$ = $1;</span>
<a name="l03855"></a>03855 <span class="comment">                    %*/</span>
<a name="l03856"></a>03856                     }
<a name="l03857"></a>03857                 ;
<a name="l03858"></a>03858 
<a name="l03859"></a>03859 <span class="keywordtype">string</span>          : <a class="code" href="../../d5/d11/ripper_8c.html#a34f5c56a3e2b501dafead39af9e1dd1c">tCHAR</a>
<a name="l03860"></a>03860                 | <a class="code" href="../../d3/d09/ripper_8y.html#aed22ee33c00229e06e495e2a83c3e2f9">string1</a>
<a name="l03861"></a>03861                 | <span class="keywordtype">string</span> <a class="code" href="../../d3/d09/ripper_8y.html#aed22ee33c00229e06e495e2a83c3e2f9">string1</a>
<a name="l03862"></a>03862                     {
<a name="l03863"></a>03863                     <span class="comment">/*%%%*/</span>
<a name="l03864"></a>03864                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a63bd439da1e274fb654579f471c3eed5">literal_concat</a>($1, $2);
<a name="l03865"></a>03865                     <span class="comment">/*%</span>
<a name="l03866"></a>03866 <span class="comment">                        $$ = dispatch2(string_concat, $1, $2);</span>
<a name="l03867"></a>03867 <span class="comment">                    %*/</span>
<a name="l03868"></a>03868                     }
<a name="l03869"></a>03869                 ;
<a name="l03870"></a>03870 
<a name="l03871"></a>03871 <a class="code" href="../../d3/d09/ripper_8y.html#aed22ee33c00229e06e495e2a83c3e2f9">string1</a>         : <a class="code" href="../../d5/d11/ripper_8c.html#ae8e25024ff03620afa83e2a3c9bceb7b">tSTRING_BEG</a> string_contents <a class="code" href="../../d5/d11/ripper_8c.html#af4eeb9189245212ffd361ff11bcccdc0">tSTRING_END</a>
<a name="l03872"></a>03872                     {
<a name="l03873"></a>03873                     <span class="comment">/*%%%*/</span>
<a name="l03874"></a>03874                         $$ = $2;
<a name="l03875"></a>03875                     <span class="comment">/*%</span>
<a name="l03876"></a>03876 <span class="comment">                        $$ = dispatch1(string_literal, $2);</span>
<a name="l03877"></a>03877 <span class="comment">                    %*/</span>
<a name="l03878"></a>03878                     }
<a name="l03879"></a>03879                 ;
<a name="l03880"></a>03880 
<a name="l03881"></a>03881 <a class="code" href="../../d3/d09/ripper_8y.html#aa4c79e4aecba063c91be9014332dd797">xstring</a>         : <a class="code" href="../../d5/d11/ripper_8c.html#a476bb0d5e59ee5787ecb5bfdf6aa64a0">tXSTRING_BEG</a> xstring_contents <a class="code" href="../../d5/d11/ripper_8c.html#af4eeb9189245212ffd361ff11bcccdc0">tSTRING_END</a>
<a name="l03882"></a>03882                     {
<a name="l03883"></a>03883                     <span class="comment">/*%%%*/</span>
<a name="l03884"></a>03884                         NODE *node = $2;
<a name="l03885"></a>03885                         <span class="keywordflow">if</span> (!node) {
<a name="l03886"></a>03886                             node = <a class="code" href="../../d3/d09/ripper_8y.html#a9eb30ced1fb74550d260c22790ac541b">NEW_XSTR</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aec72cdf8444b31ad141093b4649173d5">STR_NEW0</a>());
<a name="l03887"></a>03887                         }
<a name="l03888"></a>03888                         <span class="keywordflow">else</span> {
<a name="l03889"></a>03889                             <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node)) {
<a name="l03890"></a>03890                               <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aac55f53b58d8cbef84a61f2d744e7643">NODE_STR</a>:
<a name="l03891"></a>03891                                 <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>(node, NODE_XSTR);
<a name="l03892"></a>03892                                 <span class="keywordflow">break</span>;
<a name="l03893"></a>03893                               <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a6487236f9718bcfe094a657cb0efd498">NODE_DSTR</a>:
<a name="l03894"></a>03894                                 <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>(node, NODE_DXSTR);
<a name="l03895"></a>03895                                 <span class="keywordflow">break</span>;
<a name="l03896"></a>03896                               <span class="keywordflow">default</span>:
<a name="l03897"></a>03897                                 node = <a class="code" href="../../d3/d09/ripper_8y.html#a6fafbd1d8ed31805fc7574ae1f6c87c7">NEW_NODE</a>(NODE_DXSTR, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>, 1, <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(node));
<a name="l03898"></a>03898                                 <span class="keywordflow">break</span>;
<a name="l03899"></a>03899                             }
<a name="l03900"></a>03900                         }
<a name="l03901"></a>03901                         $$ = node;
<a name="l03902"></a>03902                     <span class="comment">/*%</span>
<a name="l03903"></a>03903 <span class="comment">                        $$ = dispatch1(xstring_literal, $2);</span>
<a name="l03904"></a>03904 <span class="comment">                    %*/</span>
<a name="l03905"></a>03905                     }
<a name="l03906"></a>03906                 ;
<a name="l03907"></a>03907 
<a name="l03908"></a>03908 <a class="code" href="../../d3/d09/ripper_8y.html#a91a8792a60d26aa3a547451afe30e002">regexp</a>          : <a class="code" href="../../d5/d11/ripper_8c.html#ad71e45c5e7cc1afa50bed0b8e129d842">tREGEXP_BEG</a> regexp_contents <a class="code" href="../../d5/d11/ripper_8c.html#af2f874084a5f0c5ccf581641c92a9891">tREGEXP_END</a>
<a name="l03909"></a>03909                     {
<a name="l03910"></a>03910                     <span class="comment">/*%%%*/</span>
<a name="l03911"></a>03911                         <span class="keywordtype">int</span> <a class="code" href="../../d6/da0/nkf-utf8_2nkf_8c.html#ad2d8a938168dc85041b2bac532a7cf75">options</a> = $3;
<a name="l03912"></a>03912                         NODE *node = $2;
<a name="l03913"></a>03913                         NODE *<a class="code" href="../../d5/db5/encoding_8c.html#a05f70dacbe595d27364e1e014efb0c8e">list</a>, *prev;
<a name="l03914"></a>03914                         <span class="keywordflow">if</span> (!node) {
<a name="l03915"></a>03915                             node = <a class="code" href="../../d3/d09/ripper_8y.html#a0b35b94b9b2bf20d34efc1616be83916">NEW_LIT</a>(<a class="code" href="../../d5/d11/ripper_8c.html#acf3b91fb0d487a06b44dcbf974f3ef40">reg_compile</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aec72cdf8444b31ad141093b4649173d5">STR_NEW0</a>(), options));
<a name="l03916"></a>03916                         }
<a name="l03917"></a>03917                         <span class="keywordflow">else</span> <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node)) {
<a name="l03918"></a>03918                           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aac55f53b58d8cbef84a61f2d744e7643">NODE_STR</a>:
<a name="l03919"></a>03919                             {
<a name="l03920"></a>03920                                 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> src = node-&gt;nd_lit;
<a name="l03921"></a>03921                                 <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>(node, NODE_LIT);
<a name="l03922"></a>03922                                 node-&gt;nd_lit = <a class="code" href="../../d5/d11/ripper_8c.html#acf3b91fb0d487a06b44dcbf974f3ef40">reg_compile</a>(src, options);
<a name="l03923"></a>03923                             }
<a name="l03924"></a>03924                             <span class="keywordflow">break</span>;
<a name="l03925"></a>03925                           <span class="keywordflow">default</span>:
<a name="l03926"></a>03926                             node = <a class="code" href="../../d3/d09/ripper_8y.html#a6fafbd1d8ed31805fc7574ae1f6c87c7">NEW_NODE</a>(NODE_DSTR, <a class="code" href="../../d5/d11/ripper_8c.html#aec72cdf8444b31ad141093b4649173d5">STR_NEW0</a>(), 1, <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(node));
<a name="l03927"></a>03927                           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a6487236f9718bcfe094a657cb0efd498">NODE_DSTR</a>:
<a name="l03928"></a>03928                             <span class="keywordflow">if</span> (options &amp; <a class="code" href="../../d5/d11/ripper_8c.html#a8e390b7c6efe1a57a0677e419d09822a">RE_OPTION_ONCE</a>) {
<a name="l03929"></a>03929                                 <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>(node, NODE_DREGX_ONCE);
<a name="l03930"></a>03930                             }
<a name="l03931"></a>03931                             <span class="keywordflow">else</span> {
<a name="l03932"></a>03932                                 <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>(node, NODE_DREGX);
<a name="l03933"></a>03933                             }
<a name="l03934"></a>03934                             node-&gt;nd_cflag = options &amp; <a class="code" href="../../d5/d11/ripper_8c.html#a376f612c82347134f923dd54d6e4b04c">RE_OPTION_MASK</a>;
<a name="l03935"></a>03935                             <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(node-&gt;nd_lit)) <a class="code" href="../../d5/d11/ripper_8c.html#a587d133f5df06ee1a9f855f9d397c69d">reg_fragment_check</a>(node-&gt;nd_lit, options);
<a name="l03936"></a>03936                             <span class="keywordflow">for</span> (list = (prev = node)-&gt;nd_next; list; list = list-&gt;nd_next) {
<a name="l03937"></a>03937                                 <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(list-&gt;nd_head) == NODE_STR) {
<a name="l03938"></a>03938                                     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> tail = list-&gt;nd_head-&gt;nd_lit;
<a name="l03939"></a>03939                                     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a587d133f5df06ee1a9f855f9d397c69d">reg_fragment_check</a>(tail, options) &amp;&amp; prev &amp;&amp; !<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(prev-&gt;nd_lit)) {
<a name="l03940"></a>03940                                         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> lit = prev == node ? prev-&gt;nd_lit : prev-&gt;nd_head-&gt;nd_lit;
<a name="l03941"></a>03941                                         <span class="keywordflow">if</span> (!<a class="code" href="../../d7/dc0/parse_8y.html#ac767d74bdd8f4a8a068329f007260dc2">literal_concat0</a>(parser, lit, tail)) {
<a name="l03942"></a>03942                                             node = 0;
<a name="l03943"></a>03943                                             <span class="keywordflow">break</span>;
<a name="l03944"></a>03944                                         }
<a name="l03945"></a>03945                                         <a class="code" href="../../db/d2e/intern_8h.html#a0a133856edb99f69eae3cb5a9e275ac9">rb_str_resize</a>(tail, 0);
<a name="l03946"></a>03946                                         prev-&gt;nd_next = list-&gt;nd_next;
<a name="l03947"></a>03947                                         <a class="code" href="../../d8/d16/gc_8c.html#a53016811c87ff4c3ea839c9e85a9a9a4">rb_gc_force_recycle</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)list-&gt;nd_head);
<a name="l03948"></a>03948                                         <a class="code" href="../../d8/d16/gc_8c.html#a53016811c87ff4c3ea839c9e85a9a9a4">rb_gc_force_recycle</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)list);
<a name="l03949"></a>03949                                         list = prev;
<a name="l03950"></a>03950                                     }
<a name="l03951"></a>03951                                     <span class="keywordflow">else</span> {
<a name="l03952"></a>03952                                         prev = list;
<a name="l03953"></a>03953                                     }
<a name="l03954"></a>03954                                 }
<a name="l03955"></a>03955                                 <span class="keywordflow">else</span> {
<a name="l03956"></a>03956                                     prev = 0;
<a name="l03957"></a>03957                                 }
<a name="l03958"></a>03958                             }
<a name="l03959"></a>03959                             <span class="keywordflow">if</span> (!node-&gt;nd_next) {
<a name="l03960"></a>03960                                 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> src = node-&gt;nd_lit;
<a name="l03961"></a>03961                                 <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>(node, NODE_LIT);
<a name="l03962"></a>03962                                 node-&gt;nd_lit = <a class="code" href="../../d5/d11/ripper_8c.html#acf3b91fb0d487a06b44dcbf974f3ef40">reg_compile</a>(src, options);
<a name="l03963"></a>03963                             }
<a name="l03964"></a>03964                             <span class="keywordflow">break</span>;
<a name="l03965"></a>03965                         }
<a name="l03966"></a>03966                         $$ = node;
<a name="l03967"></a>03967                     <span class="comment">/*%</span>
<a name="l03968"></a>03968 <span class="comment">                        $$ = dispatch2(regexp_literal, $2, $3);</span>
<a name="l03969"></a>03969 <span class="comment">                    %*/</span>
<a name="l03970"></a>03970                     }
<a name="l03971"></a>03971                 ;
<a name="l03972"></a>03972 
<a name="l03973"></a>03973 <a class="code" href="../../d3/d09/ripper_8y.html#a4a8f1bb42e94b457a13faac8c356b13a">words</a>           : <a class="code" href="../../d5/d11/ripper_8c.html#a0002f4a3fccb91ab71bc6fbdaf1999e3">tWORDS_BEG</a> <span class="charliteral">&apos; &apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#af4eeb9189245212ffd361ff11bcccdc0">tSTRING_END</a>
<a name="l03974"></a>03974                     {
<a name="l03975"></a>03975                     <span class="comment">/*%%%*/</span>
<a name="l03976"></a>03976                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a3d0f928629afd9bafaf3750a9df5ba86">NEW_ZARRAY</a>();
<a name="l03977"></a>03977                     <span class="comment">/*%</span>
<a name="l03978"></a>03978 <span class="comment">                        $$ = dispatch0(words_new);</span>
<a name="l03979"></a>03979 <span class="comment">                        $$ = dispatch1(array, $$);</span>
<a name="l03980"></a>03980 <span class="comment">                    %*/</span>
<a name="l03981"></a>03981                     }
<a name="l03982"></a>03982                 | <a class="code" href="../../d5/d11/ripper_8c.html#a0002f4a3fccb91ab71bc6fbdaf1999e3">tWORDS_BEG</a> word_list <a class="code" href="../../d5/d11/ripper_8c.html#af4eeb9189245212ffd361ff11bcccdc0">tSTRING_END</a>
<a name="l03983"></a>03983                     {
<a name="l03984"></a>03984                     <span class="comment">/*%%%*/</span>
<a name="l03985"></a>03985                         $$ = $2;
<a name="l03986"></a>03986                     <span class="comment">/*%</span>
<a name="l03987"></a>03987 <span class="comment">                        $$ = dispatch1(array, $2);</span>
<a name="l03988"></a>03988 <span class="comment">                    %*/</span>
<a name="l03989"></a>03989                     }
<a name="l03990"></a>03990                 ;
<a name="l03991"></a>03991 
<a name="l03992"></a>03992 word_list       : <span class="comment">/* none */</span>
<a name="l03993"></a>03993                     {
<a name="l03994"></a>03994                     <span class="comment">/*%%%*/</span>
<a name="l03995"></a>03995                         $$ = 0;
<a name="l03996"></a>03996                     <span class="comment">/*%</span>
<a name="l03997"></a>03997 <span class="comment">                        $$ = dispatch0(words_new);</span>
<a name="l03998"></a>03998 <span class="comment">                    %*/</span>
<a name="l03999"></a>03999                     }
<a name="l04000"></a>04000                 | word_list word <span class="charliteral">&apos; &apos;</span>
<a name="l04001"></a>04001                     {
<a name="l04002"></a>04002                     <span class="comment">/*%%%*/</span>
<a name="l04003"></a>04003                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>($1, <a class="code" href="../../d5/d11/ripper_8c.html#a57d25cfbfc6a3ef658aef3b0bae7b5f5">evstr2dstr</a>($2));
<a name="l04004"></a>04004                     <span class="comment">/*%</span>
<a name="l04005"></a>04005 <span class="comment">                        $$ = dispatch2(words_add, $1, $2);</span>
<a name="l04006"></a>04006 <span class="comment">                    %*/</span>
<a name="l04007"></a>04007                     }
<a name="l04008"></a>04008                 ;
<a name="l04009"></a>04009 
<a name="l04010"></a>04010 word            : string_content
<a name="l04011"></a>04011                     <span class="comment">/*%c%*/</span>
<a name="l04012"></a>04012                     <span class="comment">/*%c</span>
<a name="l04013"></a>04013 <span class="comment">                    {</span>
<a name="l04014"></a>04014 <span class="comment">                        $$ = dispatch0(word_new);</span>
<a name="l04015"></a>04015 <span class="comment">                        $$ = dispatch2(word_add, $$, $1);</span>
<a name="l04016"></a>04016 <span class="comment">                    }</span>
<a name="l04017"></a>04017 <span class="comment">                    %*/</span>
<a name="l04018"></a>04018                 | word string_content
<a name="l04019"></a>04019                     {
<a name="l04020"></a>04020                     <span class="comment">/*%%%*/</span>
<a name="l04021"></a>04021                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a63bd439da1e274fb654579f471c3eed5">literal_concat</a>($1, $2);
<a name="l04022"></a>04022                     <span class="comment">/*%</span>
<a name="l04023"></a>04023 <span class="comment">                        $$ = dispatch2(word_add, $1, $2);</span>
<a name="l04024"></a>04024 <span class="comment">                    %*/</span>
<a name="l04025"></a>04025                     }
<a name="l04026"></a>04026                 ;
<a name="l04027"></a>04027 
<a name="l04028"></a>04028 <a class="code" href="../../d7/dc0/parse_8y.html#a9f7b98b2be9bd5c600c9aeacf97038e7">qwords</a>          : <a class="code" href="../../d5/d11/ripper_8c.html#ad8bfebfd83a1461531056bbd1dcbea9b">tQWORDS_BEG</a> <span class="charliteral">&apos; &apos;</span> <a class="code" href="../../d5/d11/ripper_8c.html#af4eeb9189245212ffd361ff11bcccdc0">tSTRING_END</a>
<a name="l04029"></a>04029                     {
<a name="l04030"></a>04030                     <span class="comment">/*%%%*/</span>
<a name="l04031"></a>04031                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a3d0f928629afd9bafaf3750a9df5ba86">NEW_ZARRAY</a>();
<a name="l04032"></a>04032                     <span class="comment">/*%</span>
<a name="l04033"></a>04033 <span class="comment">                        $$ = dispatch0(qwords_new);</span>
<a name="l04034"></a>04034 <span class="comment">                        $$ = dispatch1(array, $$);</span>
<a name="l04035"></a>04035 <span class="comment">                    %*/</span>
<a name="l04036"></a>04036                     }
<a name="l04037"></a>04037                 | <a class="code" href="../../d5/d11/ripper_8c.html#ad8bfebfd83a1461531056bbd1dcbea9b">tQWORDS_BEG</a> qword_list <a class="code" href="../../d5/d11/ripper_8c.html#af4eeb9189245212ffd361ff11bcccdc0">tSTRING_END</a>
<a name="l04038"></a>04038                     {
<a name="l04039"></a>04039                     <span class="comment">/*%%%*/</span>
<a name="l04040"></a>04040                         $$ = $2;
<a name="l04041"></a>04041                     <span class="comment">/*%</span>
<a name="l04042"></a>04042 <span class="comment">                        $$ = dispatch1(array, $2);</span>
<a name="l04043"></a>04043 <span class="comment">                    %*/</span>
<a name="l04044"></a>04044                     }
<a name="l04045"></a>04045                 ;
<a name="l04046"></a>04046 
<a name="l04047"></a>04047 qword_list      : <span class="comment">/* none */</span>
<a name="l04048"></a>04048                     {
<a name="l04049"></a>04049                     <span class="comment">/*%%%*/</span>
<a name="l04050"></a>04050                         $$ = 0;
<a name="l04051"></a>04051                     <span class="comment">/*%</span>
<a name="l04052"></a>04052 <span class="comment">                        $$ = dispatch0(qwords_new);</span>
<a name="l04053"></a>04053 <span class="comment">                    %*/</span>
<a name="l04054"></a>04054                     }
<a name="l04055"></a>04055                 | qword_list <a class="code" href="../../d5/d11/ripper_8c.html#a814fc15c6ef67f84fbe39e4e31e41041">tSTRING_CONTENT</a> <span class="charliteral">&apos; &apos;</span>
<a name="l04056"></a>04056                     {
<a name="l04057"></a>04057                     <span class="comment">/*%%%*/</span>
<a name="l04058"></a>04058                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>($1, $2);
<a name="l04059"></a>04059                     <span class="comment">/*%</span>
<a name="l04060"></a>04060 <span class="comment">                        $$ = dispatch2(qwords_add, $1, $2);</span>
<a name="l04061"></a>04061 <span class="comment">                    %*/</span>
<a name="l04062"></a>04062                     }
<a name="l04063"></a>04063                 ;
<a name="l04064"></a>04064 
<a name="l04065"></a>04065 string_contents : <span class="comment">/* none */</span>
<a name="l04066"></a>04066                     {
<a name="l04067"></a>04067                     <span class="comment">/*%%%*/</span>
<a name="l04068"></a>04068                         $$ = 0;
<a name="l04069"></a>04069                     <span class="comment">/*%</span>
<a name="l04070"></a>04070 <span class="comment">                        $$ = dispatch0(string_content);</span>
<a name="l04071"></a>04071 <span class="comment">                    %*/</span>
<a name="l04072"></a>04072                     }
<a name="l04073"></a>04073                 | string_contents string_content
<a name="l04074"></a>04074                     {
<a name="l04075"></a>04075                     <span class="comment">/*%%%*/</span>
<a name="l04076"></a>04076                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a63bd439da1e274fb654579f471c3eed5">literal_concat</a>($1, $2);
<a name="l04077"></a>04077                     <span class="comment">/*%</span>
<a name="l04078"></a>04078 <span class="comment">                        $$ = dispatch2(string_add, $1, $2);</span>
<a name="l04079"></a>04079 <span class="comment">                    %*/</span>
<a name="l04080"></a>04080                     }
<a name="l04081"></a>04081                 ;
<a name="l04082"></a>04082 
<a name="l04083"></a>04083 xstring_contents: <span class="comment">/* none */</span>
<a name="l04084"></a>04084                     {
<a name="l04085"></a>04085                     <span class="comment">/*%%%*/</span>
<a name="l04086"></a>04086                         $$ = 0;
<a name="l04087"></a>04087                     <span class="comment">/*%</span>
<a name="l04088"></a>04088 <span class="comment">                        $$ = dispatch0(xstring_new);</span>
<a name="l04089"></a>04089 <span class="comment">                    %*/</span>
<a name="l04090"></a>04090                     }
<a name="l04091"></a>04091                 | xstring_contents string_content
<a name="l04092"></a>04092                     {
<a name="l04093"></a>04093                     <span class="comment">/*%%%*/</span>
<a name="l04094"></a>04094                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a63bd439da1e274fb654579f471c3eed5">literal_concat</a>($1, $2);
<a name="l04095"></a>04095                     <span class="comment">/*%</span>
<a name="l04096"></a>04096 <span class="comment">                        $$ = dispatch2(xstring_add, $1, $2);</span>
<a name="l04097"></a>04097 <span class="comment">                    %*/</span>
<a name="l04098"></a>04098                     }
<a name="l04099"></a>04099                 ;
<a name="l04100"></a>04100 
<a name="l04101"></a>04101 regexp_contents: <span class="comment">/* none */</span>
<a name="l04102"></a>04102                     {
<a name="l04103"></a>04103                     <span class="comment">/*%%%*/</span>
<a name="l04104"></a>04104                         $$ = 0;
<a name="l04105"></a>04105                     <span class="comment">/*%</span>
<a name="l04106"></a>04106 <span class="comment">                        $$ = dispatch0(regexp_new);</span>
<a name="l04107"></a>04107 <span class="comment">                    %*/</span>
<a name="l04108"></a>04108                     }
<a name="l04109"></a>04109                 | regexp_contents string_content
<a name="l04110"></a>04110                     {
<a name="l04111"></a>04111                     <span class="comment">/*%%%*/</span>
<a name="l04112"></a>04112                         NODE *head = $1, *tail = $2;
<a name="l04113"></a>04113                         <span class="keywordflow">if</span> (!head) {
<a name="l04114"></a>04114                             $$ = tail;
<a name="l04115"></a>04115                         }
<a name="l04116"></a>04116                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!tail) {
<a name="l04117"></a>04117                             $$ = head;
<a name="l04118"></a>04118                         }
<a name="l04119"></a>04119                         <span class="keywordflow">else</span> {
<a name="l04120"></a>04120                             <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(head)) {
<a name="l04121"></a>04121                               <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aac55f53b58d8cbef84a61f2d744e7643">NODE_STR</a>:
<a name="l04122"></a>04122                                 <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>(head, NODE_DSTR);
<a name="l04123"></a>04123                                 <span class="keywordflow">break</span>;
<a name="l04124"></a>04124                               <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a6487236f9718bcfe094a657cb0efd498">NODE_DSTR</a>:
<a name="l04125"></a>04125                                 <span class="keywordflow">break</span>;
<a name="l04126"></a>04126                               <span class="keywordflow">default</span>:
<a name="l04127"></a>04127                                 head = <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a4095910e406092a35a8cbf1d1f541026">NEW_DSTR</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>), head);
<a name="l04128"></a>04128                                 <span class="keywordflow">break</span>;
<a name="l04129"></a>04129                             }
<a name="l04130"></a>04130                             $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>(head, tail);
<a name="l04131"></a>04131                         }
<a name="l04132"></a>04132                     <span class="comment">/*%</span>
<a name="l04133"></a>04133 <span class="comment">                        $$ = dispatch2(regexp_add, $1, $2);</span>
<a name="l04134"></a>04134 <span class="comment">                    %*/</span>
<a name="l04135"></a>04135                     }
<a name="l04136"></a>04136                 ;
<a name="l04137"></a>04137 
<a name="l04138"></a>04138 string_content  : <a class="code" href="../../d5/d11/ripper_8c.html#a814fc15c6ef67f84fbe39e4e31e41041">tSTRING_CONTENT</a>
<a name="l04139"></a>04139                 | <a class="code" href="../../d5/d11/ripper_8c.html#aa7b2a41e57a277ba91ec5803e707148f">tSTRING_DVAR</a>
<a name="l04140"></a>04140                     {
<a name="l04141"></a>04141                         $&lt;node&gt;$ = <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a>;
<a name="l04142"></a>04142                         <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = 0;
<a name="l04143"></a>04143                         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l04144"></a>04144                     }
<a name="l04145"></a>04145                   string_dvar
<a name="l04146"></a>04146                     {
<a name="l04147"></a>04147                     <span class="comment">/*%%%*/</span>
<a name="l04148"></a>04148                         <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = $&lt;node&gt;2;
<a name="l04149"></a>04149                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a042696698b24c9047266cc611786cd90">NEW_EVSTR</a>($3);
<a name="l04150"></a>04150                     <span class="comment">/*%</span>
<a name="l04151"></a>04151 <span class="comment">                        lex_strterm = $&lt;node&gt;2;</span>
<a name="l04152"></a>04152 <span class="comment">                        $$ = dispatch1(string_dvar, $3);</span>
<a name="l04153"></a>04153 <span class="comment">                    %*/</span>
<a name="l04154"></a>04154                     }
<a name="l04155"></a>04155                 | <a class="code" href="../../d5/d11/ripper_8c.html#a08b1f68dd11d289de72404e9e6a7ad20">tSTRING_DBEG</a>
<a name="l04156"></a>04156                     {
<a name="l04157"></a>04157                         $&lt;val&gt;1 = <a class="code" href="../../d5/d11/ripper_8c.html#acb18a3415f1b7150b3114dbc92beaf66">cond_stack</a>;
<a name="l04158"></a>04158                         $&lt;val&gt;$ = <a class="code" href="../../d5/d11/ripper_8c.html#a2615da12fd7e3eda7681658c40b08e64">cmdarg_stack</a>;
<a name="l04159"></a><a class="code" href="../../d7/dc0/parse_8y.html#a757ceb346fe997f65c533c414820327a">04159</a>                         <a class="code" href="../../d5/d11/ripper_8c.html#acb18a3415f1b7150b3114dbc92beaf66">cond_stack</a> = 0;
<a name="l04160"></a>04160                         <a class="code" href="../../d5/d11/ripper_8c.html#a2615da12fd7e3eda7681658c40b08e64">cmdarg_stack</a> = 0;
<a name="l04161"></a>04161                     }
<a name="l04162"></a>04162                     {
<a name="l04163"></a>04163                         $&lt;node&gt;$ = <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a>;
<a name="l04164"></a>04164                         <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = 0;
<a name="l04165"></a>04165                         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l04166"></a><a class="code" href="../../d7/dc0/parse_8y.html#ae3e4b077e55c044779f2a71b0fa3038c">04166</a>                     }
<a name="l04167"></a>04167                   compstmt <span class="charliteral">&apos;}&apos;</span>
<a name="l04168"></a>04168                     {
<a name="l04169"></a>04169                         <a class="code" href="../../d5/d11/ripper_8c.html#acb18a3415f1b7150b3114dbc92beaf66">cond_stack</a> = $&lt;val&gt;1;
<a name="l04170"></a>04170                         <a class="code" href="../../d5/d11/ripper_8c.html#a2615da12fd7e3eda7681658c40b08e64">cmdarg_stack</a> = $&lt;val&gt;2;
<a name="l04171"></a>04171                         <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = $&lt;node&gt;3;
<a name="l04172"></a>04172                     <span class="comment">/*%%%*/</span>
<a name="l04173"></a><a class="code" href="../../d7/dc0/parse_8y.html#a8187411843a6284ffb964ef3fb9fcab3">04173</a>                         <span class="keywordflow">if</span> ($4) $4-&gt;flags &amp;= ~<a class="code" href="../../d3/d09/ripper_8y.html#aca499ed79c89ddea66b38e191e5aa2e3">NODE_FL_NEWLINE</a>;
<a name="l04174"></a>04174                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a9789cafd3cbf39a4ee619a21ee92a6ed">new_evstr</a>($4);
<a name="l04175"></a>04175                     <span class="comment">/*%</span>
<a name="l04176"></a>04176 <span class="comment">                        $$ = dispatch1(string_embexpr, $4);</span>
<a name="l04177"></a>04177 <span class="comment">                    %*/</span>
<a name="l04178"></a>04178                     }
<a name="l04179"></a>04179                 ;
<a name="l04180"></a>04180 
<a name="l04181"></a>04181 string_dvar     : <a class="code" href="../../d5/d11/ripper_8c.html#a0669929a5e8525326e729ff51842ba9e">tGVAR</a>
<a name="l04182"></a>04182                     {
<a name="l04183"></a>04183                     <span class="comment">/*%%%*/</span>
<a name="l04184"></a>04184                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#acb0de9b56aa284db22328a4a53f23f32">NEW_GVAR</a>($1);
<a name="l04185"></a>04185                     <span class="comment">/*%</span>
<a name="l04186"></a>04186 <span class="comment">                        $$ = dispatch1(var_ref, $1);</span>
<a name="l04187"></a>04187 <span class="comment">                    %*/</span>
<a name="l04188"></a>04188                     }
<a name="l04189"></a>04189                 | <a class="code" href="../../d5/d11/ripper_8c.html#a3587d04e5ad9d0a5f409cf15a1358127">tIVAR</a>
<a name="l04190"></a>04190                     {
<a name="l04191"></a>04191                     <span class="comment">/*%%%*/</span>
<a name="l04192"></a>04192                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a59c2d27bbdf39e56b78eb76c0f65dcbe">NEW_IVAR</a>($1);
<a name="l04193"></a>04193                     <span class="comment">/*%</span>
<a name="l04194"></a>04194 <span class="comment">                        $$ = dispatch1(var_ref, $1);</span>
<a name="l04195"></a>04195 <span class="comment">                    %*/</span>
<a name="l04196"></a>04196                     }
<a name="l04197"></a>04197                 | <a class="code" href="../../d5/d11/ripper_8c.html#aaf70899e7dbbcf4d813cea481eb05592">tCVAR</a>
<a name="l04198"></a>04198                     {
<a name="l04199"></a><a class="code" href="../../d7/dc0/parse_8y.html#a1d89bfb0c7e79def74ebb5e8fa41d661">04199</a>                     <span class="comment">/*%%%*/</span>
<a name="l04200"></a>04200                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#ae2919e37a640ffec55e59cd7a7ba08fd">NEW_CVAR</a>($1);
<a name="l04201"></a>04201                     <span class="comment">/*%</span>
<a name="l04202"></a>04202 <span class="comment">                        $$ = dispatch1(var_ref, $1);</span>
<a name="l04203"></a>04203 <span class="comment">                    %*/</span>
<a name="l04204"></a>04204                     }
<a name="l04205"></a>04205                 | backref
<a name="l04206"></a>04206                 ;
<a name="l04207"></a><a class="code" href="../../d7/dc0/parse_8y.html#ad508851740dbcd4768da1dd9c86317b1">04207</a> 
<a name="l04208"></a>04208 symbol          : <a class="code" href="../../d5/d11/ripper_8c.html#a4e2e6284f92622d77f0feb7152f57ec7">tSYMBEG</a> <a class="code" href="../../dd/dc0/date__core_8c.html#a8157485e687f56a6ae2f3ee0a8cb1580">sym</a>
<a name="l04209"></a>04209                     {
<a name="l04210"></a>04210                         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389abb6d8e9fea98441c3b5971c4e7d509ae">EXPR_END</a>;
<a name="l04211"></a>04211                     <span class="comment">/*%%%*/</span>
<a name="l04212"></a>04212                         $$ = $2;
<a name="l04213"></a>04213                     <span class="comment">/*%</span>
<a name="l04214"></a>04214 <span class="comment">                        $$ = dispatch1(symbol, $2);</span>
<a name="l04215"></a>04215 <span class="comment">                    %*/</span>
<a name="l04216"></a>04216                     }
<a name="l04217"></a>04217                 ;
<a name="l04218"></a>04218 
<a name="l04219"></a>04219 <a class="code" href="../../dd/dc0/date__core_8c.html#a8157485e687f56a6ae2f3ee0a8cb1580">sym</a>             : fname
<a name="l04220"></a>04220                 | <a class="code" href="../../d5/d11/ripper_8c.html#a3587d04e5ad9d0a5f409cf15a1358127">tIVAR</a>
<a name="l04221"></a>04221                 | <a class="code" href="../../d5/d11/ripper_8c.html#a0669929a5e8525326e729ff51842ba9e">tGVAR</a>
<a name="l04222"></a>04222                 | <a class="code" href="../../d5/d11/ripper_8c.html#aaf70899e7dbbcf4d813cea481eb05592">tCVAR</a>
<a name="l04223"></a>04223                 ;
<a name="l04224"></a>04224 
<a name="l04225"></a>04225 <a class="code" href="../../d3/d09/ripper_8y.html#a40f756f6fdaad745b00b1b19e8bc9556">dsym</a>            : <a class="code" href="../../d5/d11/ripper_8c.html#a4e2e6284f92622d77f0feb7152f57ec7">tSYMBEG</a> xstring_contents <a class="code" href="../../d5/d11/ripper_8c.html#af4eeb9189245212ffd361ff11bcccdc0">tSTRING_END</a>
<a name="l04226"></a>04226                     {
<a name="l04227"></a>04227                         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389abb6d8e9fea98441c3b5971c4e7d509ae">EXPR_END</a>;
<a name="l04228"></a>04228                     <span class="comment">/*%%%*/</span>
<a name="l04229"></a>04229                         <span class="keywordflow">if</span> (!($$ = $2)) {
<a name="l04230"></a>04230                             $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a0b35b94b9b2bf20d34efc1616be83916">NEW_LIT</a>(<a class="code" href="../../dc/d0c/cparse_8c.html#a48bfb6519a45249fb2ec0193ea3b6e1c">ID2SYM</a>(<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;&quot;</span>)));
<a name="l04231"></a>04231                         }
<a name="l04232"></a>04232                         <span class="keywordflow">else</span> {
<a name="l04233"></a><a class="code" href="../../d7/dc0/parse_8y.html#ac1a249057a114b8954442b99d0bc8b79">04233</a>                             <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> lit;
<a name="l04234"></a>04234 
<a name="l04235"></a>04235                             <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($$)) {
<a name="l04236"></a>04236                               <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a6487236f9718bcfe094a657cb0efd498">NODE_DSTR</a>:
<a name="l04237"></a>04237                                 <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>($$, <a class="code" href="../../d3/d09/ripper_8y.html#ab102222ffbe5118d93d37b103876fc44">NODE_DSYM</a>);
<a name="l04238"></a>04238                                 <span class="keywordflow">break</span>;
<a name="l04239"></a>04239                               <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aac55f53b58d8cbef84a61f2d744e7643">NODE_STR</a>:
<a name="l04240"></a>04240                                 lit = $$-&gt;nd_lit;
<a name="l04241"></a>04241                                 $$-&gt;nd_lit = <a class="code" href="../../dc/d0c/cparse_8c.html#a48bfb6519a45249fb2ec0193ea3b6e1c">ID2SYM</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aebb6b3345ade11073c43fd418ec67b87">rb_intern_str</a>(lit));
<a name="l04242"></a>04242                                 <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>($$, <a class="code" href="../../d3/d09/ripper_8y.html#af19d1c1d9f26c7b19546967449e887f6">NODE_LIT</a>);
<a name="l04243"></a>04243                                 <span class="keywordflow">break</span>;
<a name="l04244"></a>04244                               <span class="keywordflow">default</span>:
<a name="l04245"></a>04245                                 $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a6fafbd1d8ed31805fc7574ae1f6c87c7">NEW_NODE</a>(<a class="code" href="../../d3/d09/ripper_8y.html#ab102222ffbe5118d93d37b103876fc44">NODE_DSYM</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>, 1, <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>($$));
<a name="l04246"></a>04246                                 <span class="keywordflow">break</span>;
<a name="l04247"></a>04247                             }
<a name="l04248"></a>04248                         }
<a name="l04249"></a>04249                     <span class="comment">/*%</span>
<a name="l04250"></a>04250 <span class="comment">                        $$ = dispatch1(dyna_symbol, $2);</span>
<a name="l04251"></a>04251 <span class="comment">                    %*/</span>
<a name="l04252"></a>04252                     }
<a name="l04253"></a>04253                 ;
<a name="l04254"></a>04254 
<a name="l04255"></a>04255 numeric         : <a class="code" href="../../d5/d11/ripper_8c.html#acf30b0b06859a67ac40b3b5ade640bec">tINTEGER</a>
<a name="l04256"></a>04256                 | <a class="code" href="../../d5/d11/ripper_8c.html#aefe8891831bd955c4672cc5423fdf7e8">tFLOAT</a>
<a name="l04257"></a>04257                 | <a class="code" href="../../d5/d11/ripper_8c.html#afb221f5d4ce1cd557eb695967604d276">tUMINUS_NUM</a> <a class="code" href="../../d5/d11/ripper_8c.html#acf30b0b06859a67ac40b3b5ade640bec">tINTEGER</a>         %prec <a class="code" href="../../d5/d11/ripper_8c.html#a0e23c1110646d20ce82b8cd263941054">tLOWEST</a>
<a name="l04258"></a>04258                     {
<a name="l04259"></a>04259                     <span class="comment">/*%%%*/</span>
<a name="l04260"></a>04260                         $$ = <a class="code" href="../../d7/dc0/parse_8y.html#a31fcbde2b7aaecba1e43942d9e3535f4">negate_lit</a>($2);
<a name="l04261"></a>04261                     <span class="comment">/*%</span>
<a name="l04262"></a>04262 <span class="comment">                        $$ = dispatch2(unary, ripper_intern(&quot;-@&quot;), $2);</span>
<a name="l04263"></a>04263 <span class="comment">                    %*/</span>
<a name="l04264"></a>04264                     }
<a name="l04265"></a>04265                 | <a class="code" href="../../d5/d11/ripper_8c.html#afb221f5d4ce1cd557eb695967604d276">tUMINUS_NUM</a> <a class="code" href="../../d5/d11/ripper_8c.html#aefe8891831bd955c4672cc5423fdf7e8">tFLOAT</a>           %prec <a class="code" href="../../d5/d11/ripper_8c.html#a0e23c1110646d20ce82b8cd263941054">tLOWEST</a>
<a name="l04266"></a>04266                     {
<a name="l04267"></a>04267                     <span class="comment">/*%%%*/</span>
<a name="l04268"></a>04268                         $$ = <a class="code" href="../../d7/dc0/parse_8y.html#a31fcbde2b7aaecba1e43942d9e3535f4">negate_lit</a>($2);
<a name="l04269"></a>04269                     <span class="comment">/*%</span>
<a name="l04270"></a>04270 <span class="comment">                        $$ = dispatch2(unary, ripper_intern(&quot;-@&quot;), $2);</span>
<a name="l04271"></a>04271 <span class="comment">                    %*/</span>
<a name="l04272"></a>04272                     }
<a name="l04273"></a>04273                 ;
<a name="l04274"></a>04274 
<a name="l04275"></a>04275 user_variable   : <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a>
<a name="l04276"></a>04276                 | <a class="code" href="../../d5/d11/ripper_8c.html#a3587d04e5ad9d0a5f409cf15a1358127">tIVAR</a>
<a name="l04277"></a>04277                 | <a class="code" href="../../d5/d11/ripper_8c.html#a0669929a5e8525326e729ff51842ba9e">tGVAR</a>
<a name="l04278"></a>04278                 | <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a>
<a name="l04279"></a>04279                 | <a class="code" href="../../d5/d11/ripper_8c.html#aaf70899e7dbbcf4d813cea481eb05592">tCVAR</a>
<a name="l04280"></a>04280                 ;
<a name="l04281"></a>04281 
<a name="l04282"></a>04282 keyword_variable: <a class="code" href="../../d5/d11/ripper_8c.html#a97061c623fd2070a72366daa7cd8386d">keyword_nil</a> {<a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#a97061c623fd2070a72366daa7cd8386d">keyword_nil</a>);}
<a name="l04283"></a>04283                 | <a class="code" href="../../d5/d11/ripper_8c.html#ab8442a74bd68773667e1d016e17a8f20">keyword_self</a> {<a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#ab8442a74bd68773667e1d016e17a8f20">keyword_self</a>);}
<a name="l04284"></a><a class="code" href="../../d7/dc0/parse_8y.html#a7032d79390e4f95099548ed8b69ad16f">04284</a>                 | <a class="code" href="../../d5/d11/ripper_8c.html#a4db6e341df3e5d2abf5887085e9c5f77">keyword_true</a> {<a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#a4db6e341df3e5d2abf5887085e9c5f77">keyword_true</a>);}
<a name="l04285"></a>04285                 | <a class="code" href="../../d5/d11/ripper_8c.html#acabfb39849e96211b6441b971d4ea0a7">keyword_false</a> {<a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#acabfb39849e96211b6441b971d4ea0a7">keyword_false</a>);}
<a name="l04286"></a>04286                 | <a class="code" href="../../d5/d11/ripper_8c.html#abc6d3baf1526f6522fb096804f3e6f3f">keyword__FILE__</a> {<a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#abc6d3baf1526f6522fb096804f3e6f3f">keyword__FILE__</a>);}
<a name="l04287"></a>04287                 | <a class="code" href="../../d5/d11/ripper_8c.html#a647bc6d3b4755012d0a547a771983690">keyword__LINE__</a> {<a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#a647bc6d3b4755012d0a547a771983690">keyword__LINE__</a>);}
<a name="l04288"></a>04288                 | <a class="code" href="../../d5/d11/ripper_8c.html#ae3a907545a96704ee7c94870da496bf0">keyword__ENCODING__</a> {<a class="code" href="../../d5/d11/ripper_8c.html#aba24060521d2fa3df2cd7a928412e105">ifndef_ripper</a>($$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae3a907545a96704ee7c94870da496bf0">keyword__ENCODING__</a>);}
<a name="l04289"></a>04289                 ;
<a name="l04290"></a>04290 
<a name="l04291"></a>04291 var_ref         : user_variable
<a name="l04292"></a>04292                     {
<a name="l04293"></a>04293                     <span class="comment">/*%%%*/</span>
<a name="l04294"></a><a class="code" href="../../d7/dc0/parse_8y.html#adc5e339f86820b88a4ff8312bb8a47da">04294</a>                         <span class="keywordflow">if</span> (!($$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8128fe58f108349b4cb7c1a208cb874b">gettable</a>($1))) $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l04295"></a>04295                     <span class="comment">/*%</span>
<a name="l04296"></a>04296 <span class="comment">                        if (id_is_var(get_id($1))) {</span>
<a name="l04297"></a>04297 <span class="comment">                            $$ = dispatch1(var_ref, $1);</span>
<a name="l04298"></a>04298 <span class="comment">                        }</span>
<a name="l04299"></a>04299 <span class="comment">                        else {</span>
<a name="l04300"></a>04300 <span class="comment">                            $$ = dispatch1(vcall, $1);</span>
<a name="l04301"></a>04301 <span class="comment">                        }</span>
<a name="l04302"></a>04302 <span class="comment">                    %*/</span>
<a name="l04303"></a>04303                     }
<a name="l04304"></a>04304                 | keyword_variable
<a name="l04305"></a>04305                     {
<a name="l04306"></a>04306                     <span class="comment">/*%%%*/</span>
<a name="l04307"></a>04307                         <span class="keywordflow">if</span> (!($$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8128fe58f108349b4cb7c1a208cb874b">gettable</a>($1))) $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l04308"></a>04308                     <span class="comment">/*%</span>
<a name="l04309"></a>04309 <span class="comment">                        $$ = dispatch1(var_ref, $1);</span>
<a name="l04310"></a>04310 <span class="comment">                    %*/</span>
<a name="l04311"></a>04311                     }
<a name="l04312"></a>04312                 ;
<a name="l04313"></a>04313 
<a name="l04314"></a>04314 var_lhs         : user_variable
<a name="l04315"></a>04315                     {
<a name="l04316"></a>04316                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a5cb1df5a7a381c93bd1b53c64194c804">assignable</a>($1, 0);
<a name="l04317"></a>04317                     <span class="comment">/*%%%*/</span>
<a name="l04318"></a>04318                     <span class="comment">/*%</span>
<a name="l04319"></a>04319 <span class="comment">                        $$ = dispatch1(var_field, $$);</span>
<a name="l04320"></a>04320 <span class="comment">                    %*/</span>
<a name="l04321"></a>04321                     }
<a name="l04322"></a>04322                 | keyword_variable
<a name="l04323"></a>04323                     {
<a name="l04324"></a>04324                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a5cb1df5a7a381c93bd1b53c64194c804">assignable</a>($1, 0);
<a name="l04325"></a>04325                     <span class="comment">/*%%%*/</span>
<a name="l04326"></a>04326                     <span class="comment">/*%</span>
<a name="l04327"></a>04327 <span class="comment">                        $$ = dispatch1(var_field, $$);</span>
<a name="l04328"></a>04328 <span class="comment">                    %*/</span>
<a name="l04329"></a>04329                     }
<a name="l04330"></a>04330                 ;
<a name="l04331"></a>04331 
<a name="l04332"></a>04332 backref         : <a class="code" href="../../d5/d11/ripper_8c.html#a0ac4af4d5877f883246a279da41cdd7a">tNTH_REF</a>
<a name="l04333"></a>04333                 | <a class="code" href="../../d5/d11/ripper_8c.html#a2ff67775fb64c00948749c56837ef334">tBACK_REF</a>
<a name="l04334"></a>04334                 ;
<a name="l04335"></a>04335 
<a name="l04336"></a>04336 superclass      : <a class="code" href="../../d3/d09/ripper_8y.html#a0c940d9e4ce4cfee55d7ccf714a1303d">term</a>
<a name="l04337"></a>04337                     {
<a name="l04338"></a>04338                     <span class="comment">/*%%%*/</span>
<a name="l04339"></a>04339                         $$ = 0;
<a name="l04340"></a>04340                     <span class="comment">/*%</span>
<a name="l04341"></a>04341 <span class="comment">                        $$ = Qnil;</span>
<a name="l04342"></a>04342 <span class="comment">                    %*/</span>
<a name="l04343"></a>04343                     }
<a name="l04344"></a>04344                 | <span class="charliteral">&apos;&lt;&apos;</span>
<a name="l04345"></a>04345                     {
<a name="l04346"></a>04346                         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l04347"></a>04347                     }
<a name="l04348"></a>04348                   expr_value <a class="code" href="../../d3/d09/ripper_8y.html#a0c940d9e4ce4cfee55d7ccf714a1303d">term</a>
<a name="l04349"></a>04349                     {
<a name="l04350"></a><a class="code" href="../../d7/dc0/parse_8y.html#a099e84c4f52718bcb14c73cfee58bd73">04350</a>                         $$ = $3;
<a name="l04351"></a>04351                     }
<a name="l04352"></a>04352                 | error <a class="code" href="../../d3/d09/ripper_8y.html#a0c940d9e4ce4cfee55d7ccf714a1303d">term</a>
<a name="l04353"></a>04353                     {
<a name="l04354"></a>04354                     <span class="comment">/*%%%*/</span>
<a name="l04355"></a>04355                         <a class="code" href="../../d5/d11/ripper_8c.html#a20bf055e53dc4fd5afddfd752a4d1adb">yyerrok</a>;
<a name="l04356"></a>04356                         $$ = 0;
<a name="l04357"></a>04357                     <span class="comment">/*%</span>
<a name="l04358"></a>04358 <span class="comment">                        yyerrok;</span>
<a name="l04359"></a>04359 <span class="comment">                        $$ = Qnil;</span>
<a name="l04360"></a>04360 <span class="comment">                    %*/</span>
<a name="l04361"></a>04361                     }
<a name="l04362"></a>04362                 ;
<a name="l04363"></a>04363 
<a name="l04364"></a>04364 f_arglist       : <span class="charliteral">&apos;(&apos;</span> f_args rparen
<a name="l04365"></a>04365                     {
<a name="l04366"></a>04366                     <span class="comment">/*%%%*/</span>
<a name="l04367"></a>04367                         $$ = $2;
<a name="l04368"></a>04368                     <span class="comment">/*%</span>
<a name="l04369"></a>04369 <span class="comment">                        $$ = dispatch1(paren, $2);</span>
<a name="l04370"></a>04370 <span class="comment">                    %*/</span>
<a name="l04371"></a>04371                         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l04372"></a>04372                         <a class="code" href="../../d5/d11/ripper_8c.html#a302ec49a8c1c02e0dbaa5b4362263e40">command_start</a> = <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l04373"></a>04373                     }
<a name="l04374"></a>04374                 | f_args <a class="code" href="../../d3/d09/ripper_8y.html#a0c940d9e4ce4cfee55d7ccf714a1303d">term</a>
<a name="l04375"></a>04375                     {
<a name="l04376"></a>04376                         $$ = $1;
<a name="l04377"></a>04377                         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l04378"></a>04378                         <a class="code" href="../../d5/d11/ripper_8c.html#a302ec49a8c1c02e0dbaa5b4362263e40">command_start</a> = <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l04379"></a>04379                     }
<a name="l04380"></a>04380                 ;
<a name="l04381"></a>04381 
<a name="l04382"></a>04382 f_args          : f_arg <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d7/dc0/parse_8y.html#ac6131a270341c0e17602e22a693e1733">f_optarg</a> <span class="charliteral">&apos;,&apos;</span> f_rest_arg opt_f_block_arg
<a name="l04383"></a>04383                     {
<a name="l04384"></a>04384                     <span class="comment">/*%%%*/</span>
<a name="l04385"></a>04385                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>($1, $3, $5, 0, $6);
<a name="l04386"></a>04386                     <span class="comment">/*%</span>
<a name="l04387"></a>04387 <span class="comment">                        $$ = params_new($1, $3, $5, Qnil, escape_Qundef($6));</span>
<a name="l04388"></a>04388 <span class="comment">                    %*/</span>
<a name="l04389"></a>04389                     }
<a name="l04390"></a>04390                 | f_arg <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d7/dc0/parse_8y.html#ac6131a270341c0e17602e22a693e1733">f_optarg</a> <span class="charliteral">&apos;,&apos;</span> f_rest_arg <span class="charliteral">&apos;,&apos;</span> f_arg opt_f_block_arg
<a name="l04391"></a>04391                     {
<a name="l04392"></a>04392                     <span class="comment">/*%%%*/</span>
<a name="l04393"></a>04393                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>($1, $3, $5, $7, $8);
<a name="l04394"></a>04394                     <span class="comment">/*%</span>
<a name="l04395"></a>04395 <span class="comment">                        $$ = params_new($1, $3, $5, $7, escape_Qundef($8));</span>
<a name="l04396"></a>04396 <span class="comment">                    %*/</span>
<a name="l04397"></a>04397                     }
<a name="l04398"></a>04398                 | f_arg <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d7/dc0/parse_8y.html#ac6131a270341c0e17602e22a693e1733">f_optarg</a> opt_f_block_arg
<a name="l04399"></a>04399                     {
<a name="l04400"></a>04400                     <span class="comment">/*%%%*/</span>
<a name="l04401"></a>04401                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>($1, $3, 0, 0, $4);
<a name="l04402"></a>04402                     <span class="comment">/*%</span>
<a name="l04403"></a>04403 <span class="comment">                        $$ = params_new($1, $3, Qnil, Qnil, escape_Qundef($4));</span>
<a name="l04404"></a>04404 <span class="comment">                    %*/</span>
<a name="l04405"></a>04405                     }
<a name="l04406"></a>04406                 | f_arg <span class="charliteral">&apos;,&apos;</span> <a class="code" href="../../d7/dc0/parse_8y.html#ac6131a270341c0e17602e22a693e1733">f_optarg</a> <span class="charliteral">&apos;,&apos;</span> f_arg opt_f_block_arg
<a name="l04407"></a>04407                     {
<a name="l04408"></a>04408                     <span class="comment">/*%%%*/</span>
<a name="l04409"></a>04409                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>($1, $3, 0, $5, $6);
<a name="l04410"></a>04410                     <span class="comment">/*%</span>
<a name="l04411"></a>04411 <span class="comment">                        $$ = params_new($1, $3, Qnil, $5, escape_Qundef($6));</span>
<a name="l04412"></a>04412 <span class="comment">                    %*/</span>
<a name="l04413"></a>04413                     }
<a name="l04414"></a>04414                 | f_arg <span class="charliteral">&apos;,&apos;</span> f_rest_arg opt_f_block_arg
<a name="l04415"></a>04415                     {
<a name="l04416"></a>04416                     <span class="comment">/*%%%*/</span>
<a name="l04417"></a>04417                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>($1, 0, $3, 0, $4);
<a name="l04418"></a>04418                     <span class="comment">/*%</span>
<a name="l04419"></a>04419 <span class="comment">                        $$ = params_new($1, Qnil, $3, Qnil, escape_Qundef($4));</span>
<a name="l04420"></a>04420 <span class="comment">                    %*/</span>
<a name="l04421"></a>04421                     }
<a name="l04422"></a>04422                 | f_arg <span class="charliteral">&apos;,&apos;</span> f_rest_arg <span class="charliteral">&apos;,&apos;</span> f_arg opt_f_block_arg
<a name="l04423"></a>04423                     {
<a name="l04424"></a>04424                     <span class="comment">/*%%%*/</span>
<a name="l04425"></a>04425                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>($1, 0, $3, $5, $6);
<a name="l04426"></a>04426                     <span class="comment">/*%</span>
<a name="l04427"></a>04427 <span class="comment">                        $$ = params_new($1, Qnil, $3, $5, escape_Qundef($6));</span>
<a name="l04428"></a>04428 <span class="comment">                    %*/</span>
<a name="l04429"></a>04429                     }
<a name="l04430"></a>04430                 | f_arg opt_f_block_arg
<a name="l04431"></a>04431                     {
<a name="l04432"></a>04432                     <span class="comment">/*%%%*/</span>
<a name="l04433"></a>04433                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>($1, 0, 0, 0, $2);
<a name="l04434"></a>04434                     <span class="comment">/*%</span>
<a name="l04435"></a>04435 <span class="comment">                        $$ = params_new($1, Qnil, Qnil, Qnil,escape_Qundef($2));</span>
<a name="l04436"></a>04436 <span class="comment">                    %*/</span>
<a name="l04437"></a>04437                     }
<a name="l04438"></a>04438                 | <a class="code" href="../../d7/dc0/parse_8y.html#ac6131a270341c0e17602e22a693e1733">f_optarg</a> <span class="charliteral">&apos;,&apos;</span> f_rest_arg opt_f_block_arg
<a name="l04439"></a>04439                     {
<a name="l04440"></a>04440                     <span class="comment">/*%%%*/</span>
<a name="l04441"></a>04441                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(0, $1, $3, 0, $4);
<a name="l04442"></a>04442                     <span class="comment">/*%</span>
<a name="l04443"></a>04443 <span class="comment">                        $$ = params_new(Qnil, $1, $3, Qnil, escape_Qundef($4));</span>
<a name="l04444"></a>04444 <span class="comment">                    %*/</span>
<a name="l04445"></a>04445                     }
<a name="l04446"></a>04446                 | <a class="code" href="../../d7/dc0/parse_8y.html#ac6131a270341c0e17602e22a693e1733">f_optarg</a> <span class="charliteral">&apos;,&apos;</span> f_rest_arg <span class="charliteral">&apos;,&apos;</span> f_arg opt_f_block_arg
<a name="l04447"></a>04447                     {
<a name="l04448"></a>04448                     <span class="comment">/*%%%*/</span>
<a name="l04449"></a>04449                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(0, $1, $3, $5, $6);
<a name="l04450"></a>04450                     <span class="comment">/*%</span>
<a name="l04451"></a>04451 <span class="comment">                        $$ = params_new(Qnil, $1, $3, $5, escape_Qundef($6));</span>
<a name="l04452"></a>04452 <span class="comment">                    %*/</span>
<a name="l04453"></a>04453                     }
<a name="l04454"></a>04454                 | <a class="code" href="../../d7/dc0/parse_8y.html#ac6131a270341c0e17602e22a693e1733">f_optarg</a> opt_f_block_arg
<a name="l04455"></a>04455                     {
<a name="l04456"></a>04456                     <span class="comment">/*%%%*/</span>
<a name="l04457"></a>04457                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(0, $1, 0, 0, $2);
<a name="l04458"></a>04458                     <span class="comment">/*%</span>
<a name="l04459"></a>04459 <span class="comment">                        $$ = params_new(Qnil, $1, Qnil, Qnil,escape_Qundef($2));</span>
<a name="l04460"></a>04460 <span class="comment">                    %*/</span>
<a name="l04461"></a>04461                     }
<a name="l04462"></a>04462                 | <a class="code" href="../../d7/dc0/parse_8y.html#ac6131a270341c0e17602e22a693e1733">f_optarg</a> <span class="charliteral">&apos;,&apos;</span> f_arg opt_f_block_arg
<a name="l04463"></a>04463                     {
<a name="l04464"></a>04464                     <span class="comment">/*%%%*/</span>
<a name="l04465"></a>04465                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(0, $1, 0, $3, $4);
<a name="l04466"></a>04466                     <span class="comment">/*%</span>
<a name="l04467"></a>04467 <span class="comment">                        $$ = params_new(Qnil, $1, Qnil, $3, escape_Qundef($4));</span>
<a name="l04468"></a>04468 <span class="comment">                    %*/</span>
<a name="l04469"></a>04469                     }
<a name="l04470"></a>04470                 | f_rest_arg opt_f_block_arg
<a name="l04471"></a>04471                     {
<a name="l04472"></a>04472                     <span class="comment">/*%%%*/</span>
<a name="l04473"></a>04473                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(0, 0, $1, 0, $2);
<a name="l04474"></a>04474                     <span class="comment">/*%</span>
<a name="l04475"></a>04475 <span class="comment">                        $$ = params_new(Qnil, Qnil, $1, Qnil,escape_Qundef($2));</span>
<a name="l04476"></a>04476 <span class="comment">                    %*/</span>
<a name="l04477"></a>04477                     }
<a name="l04478"></a>04478                 | f_rest_arg <span class="charliteral">&apos;,&apos;</span> f_arg opt_f_block_arg
<a name="l04479"></a>04479                     {
<a name="l04480"></a>04480                     <span class="comment">/*%%%*/</span>
<a name="l04481"></a>04481                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(0, 0, $1, $3, $4);
<a name="l04482"></a>04482                     <span class="comment">/*%</span>
<a name="l04483"></a>04483 <span class="comment">                        $$ = params_new(Qnil, Qnil, $1, $3, escape_Qundef($4));</span>
<a name="l04484"></a>04484 <span class="comment">                    %*/</span>
<a name="l04485"></a>04485                     }
<a name="l04486"></a>04486                 | f_block_arg
<a name="l04487"></a>04487                     {
<a name="l04488"></a>04488                     <span class="comment">/*%%%*/</span>
<a name="l04489"></a>04489                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(0, 0, 0, 0, $1);
<a name="l04490"></a>04490                     <span class="comment">/*%</span>
<a name="l04491"></a>04491 <span class="comment">                        $$ = params_new(Qnil, Qnil, Qnil, Qnil, $1);</span>
<a name="l04492"></a>04492 <span class="comment">                    %*/</span>
<a name="l04493"></a>04493                     }
<a name="l04494"></a>04494                 | <span class="comment">/* none */</span>
<a name="l04495"></a>04495                     {
<a name="l04496"></a>04496                     <span class="comment">/*%%%*/</span>
<a name="l04497"></a>04497                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#ae56b892d2f2a4f48008c8dccdab6e281">new_args</a>(0, 0, 0, 0, 0);
<a name="l04498"></a>04498                     <span class="comment">/*%</span>
<a name="l04499"></a>04499 <span class="comment">                        $$ = params_new(Qnil, Qnil, Qnil, Qnil, Qnil);</span>
<a name="l04500"></a>04500 <span class="comment">                    %*/</span>
<a name="l04501"></a>04501                     }
<a name="l04502"></a>04502                 ;
<a name="l04503"></a>04503 
<a name="l04504"></a>04504 f_bad_arg       : <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a>
<a name="l04505"></a>04505                     {
<a name="l04506"></a>04506                     <span class="comment">/*%%%*/</span>
<a name="l04507"></a>04507                         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;formal argument cannot be a constant&quot;</span>);
<a name="l04508"></a>04508                         $$ = 0;
<a name="l04509"></a>04509                     <span class="comment">/*%</span>
<a name="l04510"></a>04510 <span class="comment">                        $$ = dispatch1(param_error, $1);</span>
<a name="l04511"></a>04511 <span class="comment">                    %*/</span>
<a name="l04512"></a>04512                     }
<a name="l04513"></a>04513                 | <a class="code" href="../../d5/d11/ripper_8c.html#a3587d04e5ad9d0a5f409cf15a1358127">tIVAR</a>
<a name="l04514"></a>04514                     {
<a name="l04515"></a>04515                     <span class="comment">/*%%%*/</span>
<a name="l04516"></a>04516                         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;formal argument cannot be an instance variable&quot;</span>);
<a name="l04517"></a>04517                         $$ = 0;
<a name="l04518"></a>04518                     <span class="comment">/*%</span>
<a name="l04519"></a>04519 <span class="comment">                        $$ = dispatch1(param_error, $1);</span>
<a name="l04520"></a>04520 <span class="comment">                    %*/</span>
<a name="l04521"></a>04521                     }
<a name="l04522"></a>04522                 | <a class="code" href="../../d5/d11/ripper_8c.html#a0669929a5e8525326e729ff51842ba9e">tGVAR</a>
<a name="l04523"></a>04523                     {
<a name="l04524"></a>04524                     <span class="comment">/*%%%*/</span>
<a name="l04525"></a>04525                         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;formal argument cannot be a global variable&quot;</span>);
<a name="l04526"></a>04526                         $$ = 0;
<a name="l04527"></a>04527                     <span class="comment">/*%</span>
<a name="l04528"></a>04528 <span class="comment">                        $$ = dispatch1(param_error, $1);</span>
<a name="l04529"></a>04529 <span class="comment">                    %*/</span>
<a name="l04530"></a>04530                     }
<a name="l04531"></a>04531                 | <a class="code" href="../../d5/d11/ripper_8c.html#aaf70899e7dbbcf4d813cea481eb05592">tCVAR</a>
<a name="l04532"></a>04532                     {
<a name="l04533"></a>04533                     <span class="comment">/*%%%*/</span>
<a name="l04534"></a>04534                         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;formal argument cannot be a class variable&quot;</span>);
<a name="l04535"></a>04535                         $$ = 0;
<a name="l04536"></a>04536                     <span class="comment">/*%</span>
<a name="l04537"></a>04537 <span class="comment">                        $$ = dispatch1(param_error, $1);</span>
<a name="l04538"></a>04538 <span class="comment">                    %*/</span>
<a name="l04539"></a>04539                     }
<a name="l04540"></a>04540                 ;
<a name="l04541"></a>04541 
<a name="l04542"></a>04542 f_norm_arg      : f_bad_arg
<a name="l04543"></a>04543                 | <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a>
<a name="l04544"></a>04544                     {
<a name="l04545"></a>04545                         <a class="code" href="../../d5/d11/ripper_8c.html#adb64cded893f33e4934bc576df4e3fd6">formal_argument</a>(<a class="code" href="../../d5/d11/ripper_8c.html#addeeb969b789536e6d64fb25622be06a">get_id</a>($1));
<a name="l04546"></a>04546                         $$ = $1;
<a name="l04547"></a>04547                     }
<a name="l04548"></a>04548                 ;
<a name="l04549"></a>04549 
<a name="l04550"></a>04550 f_arg_item      : f_norm_arg
<a name="l04551"></a>04551                     {
<a name="l04552"></a>04552                         <a class="code" href="../../d5/d11/ripper_8c.html#add1e9344471cbb8e25216e5aaebeafd4">arg_var</a>(<a class="code" href="../../d5/d11/ripper_8c.html#addeeb969b789536e6d64fb25622be06a">get_id</a>($1));
<a name="l04553"></a>04553                     <span class="comment">/*%%%*/</span>
<a name="l04554"></a>04554                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a244cf7c1439ba603ebd6c13f3e5dc98d">NEW_ARGS_AUX</a>($1, 1);
<a name="l04555"></a>04555                     <span class="comment">/*%</span>
<a name="l04556"></a>04556 <span class="comment">                        $$ = get_value($1);</span>
<a name="l04557"></a>04557 <span class="comment">                    %*/</span>
<a name="l04558"></a>04558                     }
<a name="l04559"></a>04559                 | <a class="code" href="../../d5/d11/ripper_8c.html#a8d562a1eeeebb179b8571743d06dd937">tLPAREN</a> f_margs rparen
<a name="l04560"></a>04560                     {
<a name="l04561"></a>04561                         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> tid = <a class="code" href="../../d5/d11/ripper_8c.html#a2f9c8dd7d76e9cd4654816e5b9cc47f4">internal_id</a>();
<a name="l04562"></a>04562                         <a class="code" href="../../d5/d11/ripper_8c.html#add1e9344471cbb8e25216e5aaebeafd4">arg_var</a>(tid);
<a name="l04563"></a>04563                     <span class="comment">/*%%%*/</span>
<a name="l04564"></a>04564                         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab9196c3ae4712811a17ea70e52cd9cff">dyna_in_block</a>()) {
<a name="l04565"></a>04565                             $2-&gt;nd_value = <a class="code" href="../../d3/d09/ripper_8y.html#a9765952595e2f9c55b2b998ab6597678">NEW_DVAR</a>(tid);
<a name="l04566"></a>04566                         }
<a name="l04567"></a>04567                         <span class="keywordflow">else</span> {
<a name="l04568"></a>04568                             $2-&gt;nd_value = <a class="code" href="../../d3/d09/ripper_8y.html#ad06291df482a642882a6a52e01435687">NEW_LVAR</a>(tid);
<a name="l04569"></a>04569                         }
<a name="l04570"></a>04570                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a244cf7c1439ba603ebd6c13f3e5dc98d">NEW_ARGS_AUX</a>(tid, 1);
<a name="l04571"></a>04571                         $$-&gt;nd_next = $2;
<a name="l04572"></a>04572                     <span class="comment">/*%</span>
<a name="l04573"></a>04573 <span class="comment">                        $$ = dispatch1(mlhs_paren, $2);</span>
<a name="l04574"></a>04574 <span class="comment">                    %*/</span>
<a name="l04575"></a>04575                     }
<a name="l04576"></a>04576                 ;
<a name="l04577"></a>04577 
<a name="l04578"></a>04578 f_arg           : f_arg_item
<a name="l04579"></a>04579                     <span class="comment">/*%c%*/</span>
<a name="l04580"></a>04580                     <span class="comment">/*%c</span>
<a name="l04581"></a>04581 <span class="comment">                    {</span>
<a name="l04582"></a>04582 <span class="comment">                        $$ = rb_ary_new3(1, $1);</span>
<a name="l04583"></a>04583 <span class="comment">                    }</span>
<a name="l04584"></a>04584 <span class="comment">                    c%*/</span>
<a name="l04585"></a>04585                 | f_arg <span class="charliteral">&apos;,&apos;</span> f_arg_item
<a name="l04586"></a>04586                     {
<a name="l04587"></a>04587                     <span class="comment">/*%%%*/</span>
<a name="l04588"></a>04588                         $$ = $1;
<a name="l04589"></a>04589                         $$-&gt;nd_plen++;
<a name="l04590"></a>04590                         $$-&gt;nd_next = <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>($$-&gt;nd_next, $3-&gt;nd_next);
<a name="l04591"></a>04591                         <a class="code" href="../../d8/d16/gc_8c.html#a53016811c87ff4c3ea839c9e85a9a9a4">rb_gc_force_recycle</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)$3);
<a name="l04592"></a>04592                     <span class="comment">/*%</span>
<a name="l04593"></a>04593 <span class="comment">                        $$ = rb_ary_push($1, $3);</span>
<a name="l04594"></a>04594 <span class="comment">                    %*/</span>
<a name="l04595"></a>04595                     }
<a name="l04596"></a>04596                 ;
<a name="l04597"></a>04597 
<a name="l04598"></a>04598 f_opt           : <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a> <span class="charliteral">&apos;=&apos;</span> arg_value
<a name="l04599"></a>04599                     {
<a name="l04600"></a>04600                         <a class="code" href="../../d5/d11/ripper_8c.html#add1e9344471cbb8e25216e5aaebeafd4">arg_var</a>(<a class="code" href="../../d5/d11/ripper_8c.html#adb64cded893f33e4934bc576df4e3fd6">formal_argument</a>(<a class="code" href="../../d5/d11/ripper_8c.html#addeeb969b789536e6d64fb25622be06a">get_id</a>($1)));
<a name="l04601"></a>04601                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a5cb1df5a7a381c93bd1b53c64194c804">assignable</a>($1, $3);
<a name="l04602"></a>04602                     <span class="comment">/*%%%*/</span>
<a name="l04603"></a>04603                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a095a47b01d8819140725d0d2e39886c8">NEW_OPT_ARG</a>(0, $$);
<a name="l04604"></a>04604                     <span class="comment">/*%</span>
<a name="l04605"></a>04605 <span class="comment">                        $$ = rb_assoc_new($$, $3);</span>
<a name="l04606"></a>04606 <span class="comment">                    %*/</span>
<a name="l04607"></a>04607                     }
<a name="l04608"></a>04608                 ;
<a name="l04609"></a>04609 
<a name="l04610"></a>04610 f_block_opt     : <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a> <span class="charliteral">&apos;=&apos;</span> primary_value
<a name="l04611"></a>04611                     {
<a name="l04612"></a>04612                         <a class="code" href="../../d5/d11/ripper_8c.html#add1e9344471cbb8e25216e5aaebeafd4">arg_var</a>(<a class="code" href="../../d5/d11/ripper_8c.html#adb64cded893f33e4934bc576df4e3fd6">formal_argument</a>(<a class="code" href="../../d5/d11/ripper_8c.html#addeeb969b789536e6d64fb25622be06a">get_id</a>($1)));
<a name="l04613"></a>04613                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a5cb1df5a7a381c93bd1b53c64194c804">assignable</a>($1, $3);
<a name="l04614"></a>04614                     <span class="comment">/*%%%*/</span>
<a name="l04615"></a>04615                         $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a095a47b01d8819140725d0d2e39886c8">NEW_OPT_ARG</a>(0, $$);
<a name="l04616"></a>04616                     <span class="comment">/*%</span>
<a name="l04617"></a>04617 <span class="comment">                        $$ = rb_assoc_new($$, $3);</span>
<a name="l04618"></a>04618 <span class="comment">                    %*/</span>
<a name="l04619"></a>04619                     }
<a name="l04620"></a>04620                 ;
<a name="l04621"></a>04621 
<a name="l04622"></a>04622 <a class="code" href="../../d3/d09/ripper_8y.html#a656c4e2e5e1db08ef4ae0b1c6053e671">f_block_optarg</a>  : f_block_opt
<a name="l04623"></a>04623                     {
<a name="l04624"></a>04624                     <span class="comment">/*%%%*/</span>
<a name="l04625"></a>04625                         $$ = $1;
<a name="l04626"></a>04626                     <span class="comment">/*%</span>
<a name="l04627"></a>04627 <span class="comment">                        $$ = rb_ary_new3(1, $1);</span>
<a name="l04628"></a>04628 <span class="comment">                    %*/</span>
<a name="l04629"></a>04629                     }
<a name="l04630"></a>04630                 | <a class="code" href="../../d3/d09/ripper_8y.html#a656c4e2e5e1db08ef4ae0b1c6053e671">f_block_optarg</a> <span class="charliteral">&apos;,&apos;</span> f_block_opt
<a name="l04631"></a>04631                     {
<a name="l04632"></a>04632                     <span class="comment">/*%%%*/</span>
<a name="l04633"></a>04633                         NODE *opts = $1;
<a name="l04634"></a>04634 
<a name="l04635"></a>04635                         <span class="keywordflow">while</span> (opts-&gt;nd_next) {
<a name="l04636"></a>04636                             opts = opts-&gt;nd_next;
<a name="l04637"></a>04637                         }
<a name="l04638"></a>04638                         opts-&gt;nd_next = $3;
<a name="l04639"></a>04639                         $$ = $1;
<a name="l04640"></a>04640                     <span class="comment">/*%</span>
<a name="l04641"></a>04641 <span class="comment">                        $$ = rb_ary_push($1, $3);</span>
<a name="l04642"></a>04642 <span class="comment">                    %*/</span>
<a name="l04643"></a>04643                     }
<a name="l04644"></a>04644                 ;
<a name="l04645"></a>04645 
<a name="l04646"></a>04646 <a class="code" href="../../d7/dc0/parse_8y.html#ac6131a270341c0e17602e22a693e1733">f_optarg</a>        : f_opt
<a name="l04647"></a>04647                     {
<a name="l04648"></a>04648                     <span class="comment">/*%%%*/</span>
<a name="l04649"></a>04649                         $$ = $1;
<a name="l04650"></a>04650                     <span class="comment">/*%</span>
<a name="l04651"></a>04651 <span class="comment">                        $$ = rb_ary_new3(1, $1);</span>
<a name="l04652"></a>04652 <span class="comment">                    %*/</span>
<a name="l04653"></a>04653                     }
<a name="l04654"></a>04654                 | <a class="code" href="../../d7/dc0/parse_8y.html#ac6131a270341c0e17602e22a693e1733">f_optarg</a> <span class="charliteral">&apos;,&apos;</span> f_opt
<a name="l04655"></a>04655                     {
<a name="l04656"></a>04656                     <span class="comment">/*%%%*/</span>
<a name="l04657"></a>04657                         NODE *opts = $1;
<a name="l04658"></a>04658 
<a name="l04659"></a>04659                         <span class="keywordflow">while</span> (opts-&gt;nd_next) {
<a name="l04660"></a>04660                             opts = opts-&gt;nd_next;
<a name="l04661"></a>04661                         }
<a name="l04662"></a>04662                         opts-&gt;nd_next = $3;
<a name="l04663"></a>04663                         $$ = $1;
<a name="l04664"></a>04664                     <span class="comment">/*%</span>
<a name="l04665"></a>04665 <span class="comment">                        $$ = rb_ary_push($1, $3);</span>
<a name="l04666"></a>04666 <span class="comment">                    %*/</span>
<a name="l04667"></a>04667                     }
<a name="l04668"></a>04668                 ;
<a name="l04669"></a>04669 
<a name="l04670"></a>04670 restarg_mark    : <span class="charliteral">&apos;*&apos;</span>
<a name="l04671"></a>04671                 | <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a>
<a name="l04672"></a>04672                 ;
<a name="l04673"></a>04673 
<a name="l04674"></a>04674 f_rest_arg      : restarg_mark <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a>
<a name="l04675"></a>04675                     {
<a name="l04676"></a>04676                     <span class="comment">/*%%%*/</span>
<a name="l04677"></a>04677                         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#abe05eb6b7b2f2f735012a349f49c4c69">is_local_id</a>($2))
<a name="l04678"></a>04678                             <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;rest argument must be local variable&quot;</span>);
<a name="l04679"></a>04679                     <span class="comment">/*% %*/</span>
<a name="l04680"></a>04680                         <a class="code" href="../../d5/d11/ripper_8c.html#add1e9344471cbb8e25216e5aaebeafd4">arg_var</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aed3d1812d3f35fac1d14859bcffb89f7">shadowing_lvar</a>(<a class="code" href="../../d5/d11/ripper_8c.html#addeeb969b789536e6d64fb25622be06a">get_id</a>($2)));
<a name="l04681"></a>04681                     <span class="comment">/*%%%*/</span>
<a name="l04682"></a>04682                         $$ = $2;
<a name="l04683"></a>04683                     <span class="comment">/*%</span>
<a name="l04684"></a>04684 <span class="comment">                        $$ = dispatch1(rest_param, $2);</span>
<a name="l04685"></a>04685 <span class="comment">                    %*/</span>
<a name="l04686"></a>04686                     }
<a name="l04687"></a>04687                 | restarg_mark
<a name="l04688"></a>04688                     {
<a name="l04689"></a>04689                     <span class="comment">/*%%%*/</span>
<a name="l04690"></a>04690                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a2f9c8dd7d76e9cd4654816e5b9cc47f4">internal_id</a>();
<a name="l04691"></a>04691                         <a class="code" href="../../d5/d11/ripper_8c.html#add1e9344471cbb8e25216e5aaebeafd4">arg_var</a>($$);
<a name="l04692"></a>04692                     <span class="comment">/*%</span>
<a name="l04693"></a>04693 <span class="comment">                        $$ = dispatch1(rest_param, Qnil);</span>
<a name="l04694"></a>04694 <span class="comment">                    %*/</span>
<a name="l04695"></a>04695                     }
<a name="l04696"></a>04696                 ;
<a name="l04697"></a>04697 
<a name="l04698"></a>04698 blkarg_mark     : <span class="charliteral">&apos;&amp;&apos;</span>
<a name="l04699"></a>04699                 | <a class="code" href="../../d5/d11/ripper_8c.html#ab96f3c142b77bb37684eb3e8968ce99f">tAMPER</a>
<a name="l04700"></a>04700                 ;
<a name="l04701"></a>04701 
<a name="l04702"></a>04702 f_block_arg     : blkarg_mark <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a>
<a name="l04703"></a>04703                     {
<a name="l04704"></a>04704                     <span class="comment">/*%%%*/</span>
<a name="l04705"></a>04705                         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#abe05eb6b7b2f2f735012a349f49c4c69">is_local_id</a>($2))
<a name="l04706"></a>04706                             <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;block argument must be local variable&quot;</span>);
<a name="l04707"></a>04707                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#ab9196c3ae4712811a17ea70e52cd9cff">dyna_in_block</a>() &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#a6e7b58aa0005e28573b05e2ea1d3b3bf">local_id</a>($2))
<a name="l04708"></a>04708                             <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;duplicated block argument name&quot;</span>);
<a name="l04709"></a>04709                     <span class="comment">/*% %*/</span>
<a name="l04710"></a>04710                         <a class="code" href="../../d5/d11/ripper_8c.html#add1e9344471cbb8e25216e5aaebeafd4">arg_var</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aed3d1812d3f35fac1d14859bcffb89f7">shadowing_lvar</a>(<a class="code" href="../../d5/d11/ripper_8c.html#addeeb969b789536e6d64fb25622be06a">get_id</a>($2)));
<a name="l04711"></a>04711                     <span class="comment">/*%%%*/</span>
<a name="l04712"></a>04712                         $$ = $2;
<a name="l04713"></a>04713                     <span class="comment">/*%</span>
<a name="l04714"></a>04714 <span class="comment">                        $$ = dispatch1(blockarg, $2);</span>
<a name="l04715"></a>04715 <span class="comment">                    %*/</span>
<a name="l04716"></a>04716                     }
<a name="l04717"></a>04717                 ;
<a name="l04718"></a>04718 
<a name="l04719"></a>04719 opt_f_block_arg : <span class="charliteral">&apos;,&apos;</span> f_block_arg
<a name="l04720"></a>04720                     {
<a name="l04721"></a>04721                         $$ = $2;
<a name="l04722"></a>04722                     }
<a name="l04723"></a>04723                 | <a class="code" href="../../d3/d09/ripper_8y.html#a2b9edf1e7cc4980ffa29e35e6186b170">none</a>
<a name="l04724"></a>04724                     {
<a name="l04725"></a>04725                     <span class="comment">/*%%%*/</span>
<a name="l04726"></a>04726                         $$ = 0;
<a name="l04727"></a>04727                     <span class="comment">/*%</span>
<a name="l04728"></a>04728 <span class="comment">                        $$ = Qundef;</span>
<a name="l04729"></a>04729 <span class="comment">                    %*/</span>
<a name="l04730"></a>04730                     }
<a name="l04731"></a>04731                 ;
<a name="l04732"></a>04732 
<a name="l04733"></a>04733 singleton       : var_ref
<a name="l04734"></a>04734                     {
<a name="l04735"></a>04735                     <span class="comment">/*%%%*/</span>
<a name="l04736"></a>04736                         <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($1);
<a name="l04737"></a>04737                         $$ = $1;
<a name="l04738"></a>04738                         <span class="keywordflow">if</span> (!$$) $$ = <a class="code" href="../../d3/d09/ripper_8y.html#a969f4dd65ae53a2ec90dbbb0420af61e">NEW_NIL</a>();
<a name="l04739"></a>04739                     <span class="comment">/*%</span>
<a name="l04740"></a>04740 <span class="comment">                        $$ = $1;</span>
<a name="l04741"></a>04741 <span class="comment">                    %*/</span>
<a name="l04742"></a>04742                     }
<a name="l04743"></a>04743                 | <span class="charliteral">&apos;(&apos;</span> {<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;} expr rparen
<a name="l04744"></a>04744                     {
<a name="l04745"></a>04745                     <span class="comment">/*%%%*/</span>
<a name="l04746"></a>04746                         <span class="keywordflow">if</span> ($3 == 0) {
<a name="l04747"></a>04747                             <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;can&apos;t define singleton method for ().&quot;</span>);
<a name="l04748"></a>04748                         }
<a name="l04749"></a>04749                         <span class="keywordflow">else</span> {
<a name="l04750"></a>04750                             <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>($3)) {
<a name="l04751"></a>04751                               <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aac55f53b58d8cbef84a61f2d744e7643">NODE_STR</a>:
<a name="l04752"></a>04752                               <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a6487236f9718bcfe094a657cb0efd498">NODE_DSTR</a>:
<a name="l04753"></a>04753                               <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a4850c3a60b6471d48bbb7b574cc3c3ca">NODE_XSTR</a>:
<a name="l04754"></a>04754                               <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ac175ada0354ab81202c744d1db266a85">NODE_DXSTR</a>:
<a name="l04755"></a>04755                               <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a12aabedfc8eee47d21349ce818f3e60c">NODE_DREGX</a>:
<a name="l04756"></a>04756                               <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#af19d1c1d9f26c7b19546967449e887f6">NODE_LIT</a>:
<a name="l04757"></a>04757                               <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a490d1fc6f7f9e81a1815e9b1c3080d94">NODE_ARRAY</a>:
<a name="l04758"></a>04758                               <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#acb7153a88fb24c846bd6751ca2fa9316">NODE_ZARRAY</a>:
<a name="l04759"></a>04759                                 <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;can&apos;t define singleton method for literals&quot;</span>);
<a name="l04760"></a>04760                               <span class="keywordflow">default</span>:
<a name="l04761"></a>04761                                 <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>($3);
<a name="l04762"></a>04762                                 <span class="keywordflow">break</span>;
<a name="l04763"></a>04763                             }
<a name="l04764"></a>04764                         }
<a name="l04765"></a>04765                         $$ = $3;
<a name="l04766"></a>04766                     <span class="comment">/*%</span>
<a name="l04767"></a>04767 <span class="comment">                        $$ = dispatch1(paren, $3);</span>
<a name="l04768"></a>04768 <span class="comment">                    %*/</span>
<a name="l04769"></a>04769                     }
<a name="l04770"></a>04770                 ;
<a name="l04771"></a>04771 
<a name="l04772"></a>04772 assoc_list      : <a class="code" href="../../d3/d09/ripper_8y.html#a2b9edf1e7cc4980ffa29e35e6186b170">none</a>
<a name="l04773"></a>04773                 | assocs trailer
<a name="l04774"></a>04774                     {
<a name="l04775"></a>04775                     <span class="comment">/*%%%*/</span>
<a name="l04776"></a>04776                         $$ = $1;
<a name="l04777"></a>04777                     <span class="comment">/*%</span>
<a name="l04778"></a>04778 <span class="comment">                        $$ = dispatch1(assoclist_from_args, $1);</span>
<a name="l04779"></a>04779 <span class="comment">                    %*/</span>
<a name="l04780"></a>04780                     }
<a name="l04781"></a>04781                 ;
<a name="l04782"></a>04782 
<a name="l04783"></a>04783 assocs          : assoc
<a name="l04784"></a>04784                     <span class="comment">/*%c%*/</span>
<a name="l04785"></a>04785                     <span class="comment">/*%c</span>
<a name="l04786"></a>04786 <span class="comment">                    {</span>
<a name="l04787"></a>04787 <span class="comment">                        $$ = rb_ary_new3(1, $1);</span>
<a name="l04788"></a>04788 <span class="comment">                    }</span>
<a name="l04789"></a>04789 <span class="comment">                    %*/</span>
<a name="l04790"></a>04790                 | assocs <span class="charliteral">&apos;,&apos;</span> assoc
<a name="l04791"></a>04791                     {
<a name="l04792"></a>04792                     <span class="comment">/*%%%*/</span>
<a name="l04793"></a>04793                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a95704859ba0b4e6cd52503bad1e2620f">list_concat</a>($1, $3);
<a name="l04794"></a>04794                     <span class="comment">/*%</span>
<a name="l04795"></a>04795 <span class="comment">                        $$ = rb_ary_push($1, $3);</span>
<a name="l04796"></a>04796 <span class="comment">                    %*/</span>
<a name="l04797"></a>04797                     }
<a name="l04798"></a>04798                 ;
<a name="l04799"></a>04799 
<a name="l04800"></a>04800 assoc           : arg_value <a class="code" href="../../d5/d11/ripper_8c.html#a9df99a64c8253f03638b24327e2ff7b6">tASSOC</a> arg_value
<a name="l04801"></a>04801                     {
<a name="l04802"></a>04802                     <span class="comment">/*%%%*/</span>
<a name="l04803"></a>04803                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>($1), $3);
<a name="l04804"></a>04804                     <span class="comment">/*%</span>
<a name="l04805"></a>04805 <span class="comment">                        $$ = dispatch2(assoc_new, $1, $3);</span>
<a name="l04806"></a>04806 <span class="comment">                    %*/</span>
<a name="l04807"></a>04807                     }
<a name="l04808"></a>04808                 | <a class="code" href="../../d5/d11/ripper_8c.html#a32e4df1c891f4cb10654bac75cd44ebf">tLABEL</a> arg_value
<a name="l04809"></a>04809                     {
<a name="l04810"></a>04810                     <span class="comment">/*%%%*/</span>
<a name="l04811"></a>04811                         $$ = <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a0b35b94b9b2bf20d34efc1616be83916">NEW_LIT</a>(<a class="code" href="../../dc/d0c/cparse_8c.html#a48bfb6519a45249fb2ec0193ea3b6e1c">ID2SYM</a>($1))), $2);
<a name="l04812"></a>04812                     <span class="comment">/*%</span>
<a name="l04813"></a>04813 <span class="comment">                        $$ = dispatch2(assoc_new, $1, $2);</span>
<a name="l04814"></a>04814 <span class="comment">                    %*/</span>
<a name="l04815"></a>04815                     }
<a name="l04816"></a>04816                 ;
<a name="l04817"></a>04817 
<a name="l04818"></a>04818 operation       : <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a>
<a name="l04819"></a>04819                 | <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a>
<a name="l04820"></a>04820                 | <a class="code" href="../../d5/d11/ripper_8c.html#aea28d934fe4e93590bcea40f409e1a81">tFID</a>
<a name="l04821"></a>04821                 ;
<a name="l04822"></a>04822 
<a name="l04823"></a>04823 operation2      : <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a>
<a name="l04824"></a>04824                 | <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a>
<a name="l04825"></a>04825                 | <a class="code" href="../../d5/d11/ripper_8c.html#aea28d934fe4e93590bcea40f409e1a81">tFID</a>
<a name="l04826"></a>04826                 | op
<a name="l04827"></a>04827                 ;
<a name="l04828"></a>04828 
<a name="l04829"></a>04829 operation3      : <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a>
<a name="l04830"></a>04830                 | <a class="code" href="../../d5/d11/ripper_8c.html#aea28d934fe4e93590bcea40f409e1a81">tFID</a>
<a name="l04831"></a>04831                 | op
<a name="l04832"></a>04832                 ;
<a name="l04833"></a>04833 
<a name="l04834"></a>04834 dot_or_colon    : <span class="charliteral">&apos;.&apos;</span>
<a name="l04835"></a>04835                     <span class="comment">/*%c%*/</span>
<a name="l04836"></a>04836                     <span class="comment">/*%c</span>
<a name="l04837"></a>04837 <span class="comment">                    { $$ = $&lt;val&gt;1; }</span>
<a name="l04838"></a>04838 <span class="comment">                    %*/</span>
<a name="l04839"></a>04839                 | <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a>
<a name="l04840"></a>04840                     <span class="comment">/*%c%*/</span>
<a name="l04841"></a>04841                     <span class="comment">/*%c</span>
<a name="l04842"></a>04842 <span class="comment">                    { $$ = $&lt;val&gt;1; }</span>
<a name="l04843"></a>04843 <span class="comment">                    %*/</span>
<a name="l04844"></a>04844                 ;
<a name="l04845"></a>04845 
<a name="l04846"></a>04846 opt_terms       : <span class="comment">/* none */</span>
<a name="l04847"></a>04847                 | terms
<a name="l04848"></a>04848                 ;
<a name="l04849"></a>04849 
<a name="l04850"></a>04850 opt_nl          : <span class="comment">/* none */</span>
<a name="l04851"></a>04851                 | <span class="charliteral">&apos;\n&apos;</span>
<a name="l04852"></a>04852                 ;
<a name="l04853"></a>04853 
<a name="l04854"></a>04854 rparen          : opt_nl <span class="charliteral">&apos;)&apos;</span>
<a name="l04855"></a>04855                 ;
<a name="l04856"></a><a class="code" href="../../d7/dc0/parse_8y.html#a1c275a5208fbb6ab09027373bb429561">04856</a> 
<a name="l04857"></a>04857 rbracket        : opt_nl <span class="charliteral">&apos;]&apos;</span>
<a name="l04858"></a>04858                 ;
<a name="l04859"></a>04859 
<a name="l04860"></a>04860 trailer         : <span class="comment">/* none */</span>
<a name="l04861"></a>04861                 | <span class="charliteral">&apos;\n&apos;</span>
<a name="l04862"></a><a class="code" href="../../d7/dc0/parse_8y.html#af4a69567f7ba20eeadc56f688d5f3998">04862</a>                 | <span class="charliteral">&apos;,&apos;</span>
<a name="l04863"></a>04863                 ;
<a name="l04864"></a>04864 
<a name="l04865"></a>04865 <a class="code" href="../../d3/d09/ripper_8y.html#a0c940d9e4ce4cfee55d7ccf714a1303d">term</a>            : <span class="charliteral">&apos;;&apos;</span> {<a class="code" href="../../d5/d11/ripper_8c.html#a20bf055e53dc4fd5afddfd752a4d1adb">yyerrok</a>;}
<a name="l04866"></a>04866                 | <span class="charliteral">&apos;\n&apos;</span>
<a name="l04867"></a>04867                 ;
<a name="l04868"></a><a class="code" href="../../d7/dc0/parse_8y.html#af51bed5d3f6e79a3dc74a1bb09e33cc3">04868</a> 
<a name="l04869"></a>04869 terms           : <a class="code" href="../../d3/d09/ripper_8y.html#a0c940d9e4ce4cfee55d7ccf714a1303d">term</a>
<a name="l04870"></a>04870                 | terms <span class="charliteral">&apos;;&apos;</span> {<a class="code" href="../../d5/d11/ripper_8c.html#a20bf055e53dc4fd5afddfd752a4d1adb">yyerrok</a>;}
<a name="l04871"></a>04871                 ;
<a name="l04872"></a>04872 
<a name="l04873"></a>04873 <a class="code" href="../../d3/d09/ripper_8y.html#a2b9edf1e7cc4980ffa29e35e6186b170">none</a>            : <span class="comment">/* none */</span>
<a name="l04874"></a><a class="code" href="../../d7/dc0/parse_8y.html#a7d3602223551c4a5cb022345941d1770">04874</a>                     {
<a name="l04875"></a>04875                     <span class="comment">/*%%%*/</span>
<a name="l04876"></a>04876                         $$ = 0;
<a name="l04877"></a>04877                     <span class="comment">/*%</span>
<a name="l04878"></a>04878 <span class="comment">                        $$ = Qundef;</span>
<a name="l04879"></a>04879 <span class="comment">                    %*/</span>
<a name="l04880"></a><a class="code" href="../../d7/dc0/parse_8y.html#adc28884f566d1b0102597f2d4110b6c4">04880</a>                     }
<a name="l04881"></a>04881                 ;
<a name="l04882"></a>04882 %%
<a name="l04883"></a>04883 <span class="preprocessor"># undef parser</span>
<a name="l04884"></a>04884 <span class="preprocessor"></span><span class="preprocessor"># undef yylex</span>
<a name="l04885"></a>04885 <span class="preprocessor"></span><span class="preprocessor"># undef yylval</span>
<a name="l04886"></a><a class="code" href="../../d7/dc0/parse_8y.html#aa558465b82c237c46bf14d22246c8708">04886</a> <span class="preprocessor"></span><span class="preprocessor"># define yylval  (*((YYSTYPE*)(parser-&gt;parser_yylval)))</span>
<a name="l04887"></a>04887 <span class="preprocessor"></span>
<a name="l04888"></a>04888 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dc0/parse_8y.html#ab312572aebd9d4f8bdb8ebb10756f520">parser_regx_options</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*);
<a name="l04889"></a>04889 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dc0/parse_8y.html#a8906e75085b9659c52e26e7bd75cce24">parser_tokadd_string</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>,<span class="keywordtype">int</span>,<span class="keywordtype">long</span>*,<a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a>**);
<a name="l04890"></a>04890 <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d7/dc0/parse_8y.html#ad79f377a2a23447dab44352536d359f0">parser_tokaddmbc</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keywordtype">int</span> c, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc);
<a name="l04891"></a>04891 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dc0/parse_8y.html#a95eefa198e352cdc0a60b0675abc3deb">parser_parse_string</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*);
<a name="l04892"></a><a class="code" href="../../d7/dc0/parse_8y.html#ad9f418e87f2b68a263780b38469debda">04892</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/dc0/parse_8y.html#a888dc8bb6e309b2827feb1720ef952a4">parser_here_document</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*);
<a name="l04893"></a>04893 
<a name="l04894"></a>04894 
<a name="l04895"></a>04895 <span class="preprocessor"># define nextc()                   parser_nextc(parser)</span>
<a name="l04896"></a>04896 <span class="preprocessor"></span><span class="preprocessor"># define pushback(c)               parser_pushback(parser, (c))</span>
<a name="l04897"></a>04897 <span class="preprocessor"></span><span class="preprocessor"># define newtok()                  parser_newtok(parser)</span>
<a name="l04898"></a><a class="code" href="../../d7/dc0/parse_8y.html#a8d3e08ba4a68d24ee75c1e4524480cf7">04898</a> <span class="preprocessor"></span><span class="preprocessor"># define tokspace(n)               parser_tokspace(parser, (n))</span>
<a name="l04899"></a>04899 <span class="preprocessor"></span><span class="preprocessor"># define tokadd(c)                 parser_tokadd(parser, (c))</span>
<a name="l04900"></a>04900 <span class="preprocessor"></span><span class="preprocessor"># define tok_hex(numlen)           parser_tok_hex(parser, (numlen))</span>
<a name="l04901"></a>04901 <span class="preprocessor"></span><span class="preprocessor"># define read_escape(flags,e)      parser_read_escape(parser, (flags), (e))</span>
<a name="l04902"></a>04902 <span class="preprocessor"></span><span class="preprocessor"># define tokadd_escape(e)          parser_tokadd_escape(parser, (e))</span>
<a name="l04903"></a>04903 <span class="preprocessor"></span><span class="preprocessor"># define regx_options()            parser_regx_options(parser)</span>
<a name="l04904"></a><a class="code" href="../../d7/dc0/parse_8y.html#a1ac9c5a24673ff16818f1a12a51818bf">04904</a> <span class="preprocessor"></span><span class="preprocessor"># define tokadd_string(f,t,p,n,e)  parser_tokadd_string(parser,(f),(t),(p),(n),(e))</span>
<a name="l04905"></a>04905 <span class="preprocessor"></span><span class="preprocessor"># define parse_string(n)           parser_parse_string(parser,(n))</span>
<a name="l04906"></a>04906 <span class="preprocessor"></span><span class="preprocessor"># define tokaddmbc(c, enc)         parser_tokaddmbc(parser, (c), (enc))</span>
<a name="l04907"></a>04907 <span class="preprocessor"></span><span class="preprocessor"># define here_document(n)          parser_here_document(parser,(n))</span>
<a name="l04908"></a>04908 <span class="preprocessor"></span><span class="preprocessor"># define heredoc_identifier()      parser_heredoc_identifier(parser)</span>
<a name="l04909"></a>04909 <span class="preprocessor"></span><span class="preprocessor"># define heredoc_restore(n)        parser_heredoc_restore(parser,(n))</span>
<a name="l04910"></a><a class="code" href="../../d7/dc0/parse_8y.html#a2c3fb8b8c2d46222072feaf260c1cf6d">04910</a> <span class="preprocessor"></span><span class="preprocessor"># define whole_match_p(e,l,i)      parser_whole_match_p(parser,(e),(l),(i))</span>
<a name="l04911"></a>04911 <span class="preprocessor"></span>
<a name="l04912"></a>04912 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l04913"></a>04913 <span class="preprocessor"></span><span class="preprocessor"># define set_yylval_str(x) (yylval.node = NEW_STR(x))</span>
<a name="l04914"></a>04914 <span class="preprocessor"></span><span class="preprocessor"># define set_yylval_num(x) (yylval.num = (x))</span>
<a name="l04915"></a>04915 <span class="preprocessor"></span><span class="preprocessor"># define set_yylval_id(x)  (yylval.id = (x))</span>
<a name="l04916"></a><a class="code" href="../../d7/dc0/parse_8y.html#af8f1bc61d0e71c5c18405c4323df58cd">04916</a> <span class="preprocessor"></span><span class="preprocessor"># define set_yylval_name(x)  (yylval.id = (x))</span>
<a name="l04917"></a>04917 <span class="preprocessor"></span><span class="preprocessor"># define set_yylval_literal(x) (yylval.node = NEW_LIT(x))</span>
<a name="l04918"></a>04918 <span class="preprocessor"></span><span class="preprocessor"># define set_yylval_node(x) (yylval.node = (x))</span>
<a name="l04919"></a>04919 <span class="preprocessor"></span><span class="preprocessor"># define yylval_id() (yylval.id)</span>
<a name="l04920"></a>04920 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l04921"></a>04921 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l04922"></a>04922 ripper_yylval_id(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> x)
<a name="l04923"></a>04923 {
<a name="l04924"></a>04924     <span class="keywordflow">return</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)<a class="code" href="../../d3/d09/ripper_8y.html#aade5c8f9eecd06dfb046e1bf7e0a15cd">NEW_LASGN</a>(x, <a class="code" href="../../dc/d0c/cparse_8c.html#a48bfb6519a45249fb2ec0193ea3b6e1c">ID2SYM</a>(x));
<a name="l04925"></a>04925 }
<a name="l04926"></a><a class="code" href="../../d7/dc0/parse_8y.html#a2d3fe570b77a3b6d751a34f1d1c026a9">04926</a> <span class="preprocessor"># define set_yylval_str(x) (void)(x)</span>
<a name="l04927"></a>04927 <span class="preprocessor"></span><span class="preprocessor"># define set_yylval_num(x) (void)(x)</span>
<a name="l04928"></a>04928 <span class="preprocessor"></span><span class="preprocessor"># define set_yylval_id(x)  (void)(x)</span>
<a name="l04929"></a>04929 <span class="preprocessor"></span><span class="preprocessor"># define set_yylval_name(x) (void)(yylval.val = ripper_yylval_id(x))</span>
<a name="l04930"></a>04930 <span class="preprocessor"></span><span class="preprocessor"># define set_yylval_literal(x) (void)(x)</span>
<a name="l04931"></a>04931 <span class="preprocessor"></span><span class="preprocessor"># define set_yylval_node(x) (void)(x)</span>
<a name="l04932"></a>04932 <span class="preprocessor"></span><span class="preprocessor"># define yylval_id() yylval.id</span>
<a name="l04933"></a>04933 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l04934"></a>04934 <span class="preprocessor"></span>
<a name="l04935"></a>04935 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l04936"></a>04936 <span class="preprocessor"></span><span class="preprocessor">#define ripper_flush(p) (void)(p)</span>
<a name="l04937"></a>04937 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l04938"></a>04938 <span class="preprocessor"></span><span class="preprocessor">#define ripper_flush(p) ((p)-&gt;tokp = (p)-&gt;parser_lex_p)</span>
<a name="l04939"></a>04939 <span class="preprocessor"></span>
<a name="l04940"></a>04940 <span class="preprocessor">#define yylval_rval (*(RB_TYPE_P(yylval.val, T_NODE) ? &amp;yylval.node-&gt;nd_rval : &amp;yylval.val))</span>
<a name="l04941"></a>04941 <span class="preprocessor"></span>
<a name="l04942"></a>04942 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l04943"></a>04943 ripper_has_scan_event(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l04944"></a>04944 {
<a name="l04945"></a>04945 
<a name="l04946"></a>04946     <span class="keywordflow">if</span> (lex_p &lt; parser-&gt;tokp) <a class="code" href="../../db/dcc/error_8c.html#a0f771a2840561f1838169b3d7d4616f3">rb_raise</a>(<a class="code" href="../../db/dcc/error_8c.html#a95ad3953d535707e2cf2b1d837f5e253">rb_eRuntimeError</a>, <span class="stringliteral">&quot;lex_p &lt; tokp&quot;</span>);
<a name="l04947"></a><a class="code" href="../../d7/dc0/parse_8y.html#a8e16cb460f499f93e2f3067613d3e651">04947</a>     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> &gt; parser-&gt;tokp;
<a name="l04948"></a>04948 }
<a name="l04949"></a>04949 
<a name="l04950"></a>04950 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l04951"></a>04951 ripper_scan_event_val(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keywordtype">int</span> t)
<a name="l04952"></a>04952 {
<a name="l04953"></a>04953     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str = <a class="code" href="../../d5/d11/ripper_8c.html#ae76175555ef695f3c4d083e1e680588c">STR_NEW</a>(parser-&gt;tokp, <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> - parser-&gt;tokp);
<a name="l04954"></a>04954     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> rval = ripper_dispatch1(parser, <a class="code" href="../../df/dea/eventids2_8c.html#abd5e7dc03896c094fd92985964773695">ripper_token2eventid</a>(t), str);
<a name="l04955"></a><a class="code" href="../../d7/dc0/parse_8y.html#ab4e68323b20cfad0c7a11702cb5a70dd">04955</a>     <a class="code" href="../../d5/d11/ripper_8c.html#acf3bf78187c7dfbba241b27d1110b531">ripper_flush</a>(parser);
<a name="l04956"></a>04956     <span class="keywordflow">return</span> rval;
<a name="l04957"></a>04957 }
<a name="l04958"></a>04958 
<a name="l04959"></a>04959 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04960"></a>04960 ripper_dispatch_scan_event(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keywordtype">int</span> t)
<a name="l04961"></a><a class="code" href="../../d7/dc0/parse_8y.html#abeb24fc53769f7552344e3b7ab4d63c4">04961</a> {
<a name="l04962"></a>04962     <span class="keywordflow">if</span> (!ripper_has_scan_event(parser)) <span class="keywordflow">return</span>;
<a name="l04963"></a>04963     yylval_rval = ripper_scan_event_val(parser, t);
<a name="l04964"></a>04964 }
<a name="l04965"></a>04965 
<a name="l04966"></a>04966 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04967"></a>04967 ripper_dispatch_ignored_scan_event(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keywordtype">int</span> t)
<a name="l04968"></a>04968 {
<a name="l04969"></a>04969     <span class="keywordflow">if</span> (!ripper_has_scan_event(parser)) <span class="keywordflow">return</span>;
<a name="l04970"></a>04970     (void)ripper_scan_event_val(parser, t);
<a name="l04971"></a>04971 }
<a name="l04972"></a><a class="code" href="../../d7/dc0/parse_8y.html#a7e21505c62dc8be9a91ecc76bb74aa86">04972</a> 
<a name="l04973"></a>04973 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04974"></a>04974 ripper_dispatch_delayed_token(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keywordtype">int</span> t)
<a name="l04975"></a>04975 {
<a name="l04976"></a>04976     <span class="keywordtype">int</span> saved_line = <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>;
<a name="l04977"></a>04977     <span class="keyword">const</span> <span class="keywordtype">char</span> *saved_tokp = parser-&gt;tokp;
<a name="l04978"></a>04978 
<a name="l04979"></a>04979     <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a> = parser-&gt;delayed_line;
<a name="l04980"></a><a class="code" href="../../d7/dc0/parse_8y.html#a02d63245413c3a046a91fe595eae756b">04980</a>     parser-&gt;tokp = <a class="code" href="../../d5/d11/ripper_8c.html#a8008dcfc6e95106d2ff2ddf9068aff5b">lex_pbeg</a> + parser-&gt;delayed_col;
<a name="l04981"></a>04981     yylval_rval = ripper_dispatch1(parser, <a class="code" href="../../df/dea/eventids2_8c.html#abd5e7dc03896c094fd92985964773695">ripper_token2eventid</a>(t), parser-&gt;delayed);
<a name="l04982"></a>04982     parser-&gt;delayed = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>;
<a name="l04983"></a>04983     <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a> = saved_line;
<a name="l04984"></a>04984     parser-&gt;tokp = saved_tokp;
<a name="l04985"></a>04985 }
<a name="l04986"></a>04986 <span class="preprocessor">#endif </span><span class="comment">/* RIPPER */</span>
<a name="l04987"></a>04987 
<a name="l04988"></a>04988 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d21/regex_8h.html">ruby/regex.h</a>&quot;</span>
<a name="l04989"></a>04989 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/d3c/util_8h.html">ruby/util.h</a>&quot;</span>
<a name="l04990"></a>04990 
<a name="l04991"></a>04991 <span class="comment">/* We remove any previous definition of `SIGN_EXTEND_CHAR&apos;,</span>
<a name="l04992"></a>04992 <span class="comment">   since ours (we hope) works properly with all combinations of</span>
<a name="l04993"></a>04993 <span class="comment">   machines, compilers, `char&apos; and `unsigned char&apos; argument types.</span>
<a name="l04994"></a>04994 <span class="comment">   (Per Bothner suggested the basic approach.)  */</span>
<a name="l04995"></a>04995 <span class="preprocessor">#undef SIGN_EXTEND_CHAR</span>
<a name="l04996"></a>04996 <span class="preprocessor"></span><span class="preprocessor">#if __STDC__</span>
<a name="l04997"></a>04997 <span class="preprocessor"></span><span class="preprocessor"># define SIGN_EXTEND_CHAR(c) ((signed char)(c))</span>
<a name="l04998"></a>04998 <span class="preprocessor"></span><span class="preprocessor">#else  </span><span class="comment">/* not __STDC__ */</span>
<a name="l04999"></a>04999 <span class="comment">/* As in Harbison and Steele.  */</span>
<a name="l05000"></a>05000 <span class="preprocessor"># define SIGN_EXTEND_CHAR(c) ((((unsigned char)(c)) ^ 128) - 128)</span>
<a name="l05001"></a>05001 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l05002"></a>05002 <span class="preprocessor"></span>
<a name="l05003"></a>05003 <span class="preprocessor">#define parser_encoding_name()  (parser-&gt;enc-&gt;name)</span>
<a name="l05004"></a><a class="code" href="../../d7/dc0/parse_8y.html#ad8c6fc99e12365fe282102d9dcd4df36">05004</a> <span class="preprocessor"></span><span class="preprocessor">#define parser_mbclen()  mbclen((lex_p-1),lex_pend,parser-&gt;enc)</span>
<a name="l05005"></a>05005 <span class="preprocessor"></span><span class="preprocessor">#define parser_precise_mbclen()  rb_enc_precise_mbclen((lex_p-1),lex_pend,parser-&gt;enc)</span>
<a name="l05006"></a>05006 <span class="preprocessor"></span><span class="preprocessor">#define is_identchar(p,e,enc) (rb_enc_isalnum(*(p),(enc)) || (*(p)) == &apos;_&apos; || !ISASCII(*(p)))</span>
<a name="l05007"></a>05007 <span class="preprocessor"></span><span class="preprocessor">#define parser_is_identchar() (!parser-&gt;eofp &amp;&amp; is_identchar((lex_p-1),lex_pend,parser-&gt;enc))</span>
<a name="l05008"></a>05008 <span class="preprocessor"></span>
<a name="l05009"></a>05009 <span class="preprocessor">#define parser_isascii() ISASCII(*(lex_p-1))</span>
<a name="l05010"></a>05010 <span class="preprocessor"></span>
<a name="l05011"></a>05011 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l05012"></a>05012 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l05013"></a>05013 <a class="code" href="../../d7/dc0/parse_8y.html#ad17b98e320d948c047e2649400d87ce1">token_info_get_column</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a>)
<a name="l05014"></a>05014 {
<a name="l05015"></a>05015     <span class="keywordtype">int</span> column = 1;
<a name="l05016"></a>05016     <span class="keyword">const</span> <span class="keywordtype">char</span> *p, *pend = <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> - <a class="code" href="../../d6/d7b/strchr_8c.html#a219836f542ce53545052bed5353820ca">strlen</a>(token);
<a name="l05017"></a>05017     <span class="keywordflow">for</span> (p = <a class="code" href="../../d5/d11/ripper_8c.html#a8008dcfc6e95106d2ff2ddf9068aff5b">lex_pbeg</a>; p &lt; pend; p++) {
<a name="l05018"></a>05018         <span class="keywordflow">if</span> (*p == <span class="charliteral">&apos;\t&apos;</span>) {
<a name="l05019"></a>05019             column = (((column - 1) / 8) + 1) * 8;
<a name="l05020"></a>05020         }
<a name="l05021"></a>05021         column++;
<a name="l05022"></a>05022     }
<a name="l05023"></a>05023     <span class="keywordflow">return</span> column;
<a name="l05024"></a>05024 }
<a name="l05025"></a>05025 
<a name="l05026"></a>05026 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l05027"></a>05027 <a class="code" href="../../d7/dc0/parse_8y.html#afafe3348aa336380fba0589ea7e4c50b">token_info_has_nonspaces</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d11/ripper_8c.html#a762077f24f1e3564cc3b863ceafccf9b">token</a>)
<a name="l05028"></a>05028 {
<a name="l05029"></a>05029     <span class="keyword">const</span> <span class="keywordtype">char</span> *p, *pend = <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> - <a class="code" href="../../d6/d7b/strchr_8c.html#a219836f542ce53545052bed5353820ca">strlen</a>(token);
<a name="l05030"></a>05030     <span class="keywordflow">for</span> (p = <a class="code" href="../../d5/d11/ripper_8c.html#a8008dcfc6e95106d2ff2ddf9068aff5b">lex_pbeg</a>; p &lt; pend; p++) {
<a name="l05031"></a>05031         <span class="keywordflow">if</span> (*p != <span class="charliteral">&apos; &apos;</span> &amp;&amp; *p != <span class="charliteral">&apos;\t&apos;</span>) {
<a name="l05032"></a>05032             <span class="keywordflow">return</span> 1;
<a name="l05033"></a>05033         }
<a name="l05034"></a>05034     }
<a name="l05035"></a>05035     <span class="keywordflow">return</span> 0;
<a name="l05036"></a>05036 }
<a name="l05037"></a>05037 
<a name="l05038"></a>05038 <span class="preprocessor">#undef token_info_push</span>
<a name="l05039"></a>05039 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l05040"></a>05040 <a class="code" href="../../d5/d11/ripper_8c.html#a975ebb4788e2066d838f862705f56b3e">token_info_push</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *token)
<a name="l05041"></a>05041 {
<a name="l05042"></a>05042     <a class="code" href="../../d6/d93/structtoken__info.html">token_info</a> *ptinfo;
<a name="l05043"></a>05043 
<a name="l05044"></a>05044     <span class="keywordflow">if</span> (!parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#ad8d4e8dac64b2b8df97c394b621a47d5">parser_token_info_enabled</a>) <span class="keywordflow">return</span>;
<a name="l05045"></a>05045     ptinfo = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#ac8df5a8a8961bd9e16be385fef28c2f2">ALLOC</a>(<a class="code" href="../../d6/d93/structtoken__info.html">token_info</a>);
<a name="l05046"></a>05046     ptinfo-&gt;<a class="code" href="../../d6/d93/structtoken__info.html#af95eef2afcd8c1993495a88b87d55d7d">token</a> = token;
<a name="l05047"></a>05047     ptinfo-&gt;<a class="code" href="../../d6/d93/structtoken__info.html#ac624d67d697a07bdb99ec93d4ed9bbb5">linenum</a> = <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>;
<a name="l05048"></a>05048     ptinfo-&gt;<a class="code" href="../../d6/d93/structtoken__info.html#a75d462a86a3faf7ab0d9937ca835f70d">column</a> = <a class="code" href="../../d7/dc0/parse_8y.html#ad17b98e320d948c047e2649400d87ce1">token_info_get_column</a>(parser, token);
<a name="l05049"></a>05049     ptinfo-&gt;<a class="code" href="../../d6/d93/structtoken__info.html#ac7d073e92016c4a5efa1375bb64570da">nonspc</a> = <a class="code" href="../../d7/dc0/parse_8y.html#afafe3348aa336380fba0589ea7e4c50b">token_info_has_nonspaces</a>(parser, token);
<a name="l05050"></a>05050     ptinfo-&gt;<a class="code" href="../../d6/d93/structtoken__info.html#aff0c214a160da224dad9c78d9d8d318e">next</a> = parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a7365e8e32d1c572d923805df3cd19fc1">parser_token_info</a>;
<a name="l05051"></a>05051 
<a name="l05052"></a>05052     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a7365e8e32d1c572d923805df3cd19fc1">parser_token_info</a> = ptinfo;
<a name="l05053"></a>05053 }
<a name="l05054"></a>05054 
<a name="l05055"></a>05055 <span class="preprocessor">#undef token_info_pop</span>
<a name="l05056"></a>05056 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l05057"></a>05057 <a class="code" href="../../d5/d11/ripper_8c.html#af9b9f89b11a878abf5348343d9a77283">token_info_pop</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *token)
<a name="l05058"></a>05058 {
<a name="l05059"></a>05059     <span class="keywordtype">int</span> linenum;
<a name="l05060"></a>05060     <a class="code" href="../../d6/d93/structtoken__info.html">token_info</a> *ptinfo = parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a7365e8e32d1c572d923805df3cd19fc1">parser_token_info</a>;
<a name="l05061"></a>05061 
<a name="l05062"></a>05062     <span class="keywordflow">if</span> (!ptinfo) <span class="keywordflow">return</span>;
<a name="l05063"></a>05063     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a7365e8e32d1c572d923805df3cd19fc1">parser_token_info</a> = ptinfo-&gt;<a class="code" href="../../d6/d93/structtoken__info.html#aff0c214a160da224dad9c78d9d8d318e">next</a>;
<a name="l05064"></a>05064     <span class="keywordflow">if</span> (<a class="code" href="../../d7/dc0/parse_8y.html#ad17b98e320d948c047e2649400d87ce1">token_info_get_column</a>(parser, token) == ptinfo-&gt;<a class="code" href="../../d6/d93/structtoken__info.html#a75d462a86a3faf7ab0d9937ca835f70d">column</a>) { <span class="comment">/* OK */</span>
<a name="l05065"></a>05065         <span class="keywordflow">goto</span> finish;
<a name="l05066"></a>05066     }
<a name="l05067"></a>05067     linenum = <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>;
<a name="l05068"></a>05068     <span class="keywordflow">if</span> (linenum == ptinfo-&gt;<a class="code" href="../../d6/d93/structtoken__info.html#ac624d67d697a07bdb99ec93d4ed9bbb5">linenum</a>) { <span class="comment">/* SKIP */</span>
<a name="l05069"></a>05069         <span class="keywordflow">goto</span> finish;
<a name="l05070"></a>05070     }
<a name="l05071"></a>05071     <span class="keywordflow">if</span> (<a class="code" href="../../d7/dc0/parse_8y.html#afafe3348aa336380fba0589ea7e4c50b">token_info_has_nonspaces</a>(parser, token) || ptinfo-&gt;<a class="code" href="../../d6/d93/structtoken__info.html#ac7d073e92016c4a5efa1375bb64570da">nonspc</a>) { <span class="comment">/* SKIP */</span>
<a name="l05072"></a>05072         <span class="keywordflow">goto</span> finish;
<a name="l05073"></a>05073     }
<a name="l05074"></a>05074     <span class="keywordflow">if</span> (parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#ad8d4e8dac64b2b8df97c394b621a47d5">parser_token_info_enabled</a>) {
<a name="l05075"></a>05075         <a class="code" href="../../db/dcc/error_8c.html#a146caf541551298053f23e384ce4ce2a">rb_compile_warn</a>(<a class="code" href="../../d2/d47/compile_8c.html#aca52b28c4504720708a4fab8675dc407">ruby_sourcefile</a>, linenum,
<a name="l05076"></a>05076                         <span class="stringliteral">&quot;mismatched indentations at &apos;%s&apos; with &apos;%s&apos; at %d&quot;</span>,
<a name="l05077"></a>05077                         token, ptinfo-&gt;<a class="code" href="../../d6/d93/structtoken__info.html#af95eef2afcd8c1993495a88b87d55d7d">token</a>, ptinfo-&gt;<a class="code" href="../../d6/d93/structtoken__info.html#ac624d67d697a07bdb99ec93d4ed9bbb5">linenum</a>);
<a name="l05078"></a>05078     }
<a name="l05079"></a>05079 
<a name="l05080"></a>05080   finish:
<a name="l05081"></a>05081     <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(ptinfo);
<a name="l05082"></a>05082 }
<a name="l05083"></a>05083 <span class="preprocessor">#endif  </span><span class="comment">/* RIPPER */</span>
<a name="l05084"></a>05084 
<a name="l05085"></a>05085 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l05086"></a>05086 <a class="code" href="../../d7/dc0/parse_8y.html#a19246ad5eb2d00f7df643573511e3142">parser_yyerror</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d04/strerror_8c.html#ae4f3f55be5de649fd367081b9d1b4b0c">msg</a>)
<a name="l05087"></a>05087 {
<a name="l05088"></a>05088 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l05089"></a>05089 <span class="preprocessor"></span>    <span class="keyword">const</span> <span class="keywordtype">int</span> max_line_margin = 30;
<a name="l05090"></a>05090     <span class="keyword">const</span> <span class="keywordtype">char</span> *p, *pe;
<a name="l05091"></a>05091     <span class="keywordtype">char</span> *buf;
<a name="l05092"></a>05092     <span class="keywordtype">long</span> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l05093"></a>05093     <span class="keywordtype">int</span> i;
<a name="l05094"></a>05094 
<a name="l05095"></a>05095     <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;%s&quot;</span>, msg);
<a name="l05096"></a>05096     p = <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>;
<a name="l05097"></a>05097     <span class="keywordflow">while</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a8008dcfc6e95106d2ff2ddf9068aff5b">lex_pbeg</a> &lt;= p) {
<a name="l05098"></a>05098         <span class="keywordflow">if</span> (*p == <span class="charliteral">&apos;\n&apos;</span>) <span class="keywordflow">break</span>;
<a name="l05099"></a>05099         p--;
<a name="l05100"></a>05100     }
<a name="l05101"></a>05101     p++;
<a name="l05102"></a>05102 
<a name="l05103"></a>05103     pe = <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>;
<a name="l05104"></a>05104     <span class="keywordflow">while</span> (pe &lt; <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a>) {
<a name="l05105"></a>05105         <span class="keywordflow">if</span> (*pe == <span class="charliteral">&apos;\n&apos;</span>) <span class="keywordflow">break</span>;
<a name="l05106"></a>05106         pe++;
<a name="l05107"></a>05107     }
<a name="l05108"></a>05108 
<a name="l05109"></a>05109     len = pe - p;
<a name="l05110"></a>05110     <span class="keywordflow">if</span> (len &gt; 4) {
<a name="l05111"></a>05111         <span class="keywordtype">char</span> *p2;
<a name="l05112"></a>05112         <span class="keyword">const</span> <span class="keywordtype">char</span> *pre = <span class="stringliteral">&quot;&quot;</span>, *post = <span class="stringliteral">&quot;&quot;</span>;
<a name="l05113"></a>05113 
<a name="l05114"></a>05114         <span class="keywordflow">if</span> (len &gt; max_line_margin * 2 + 10) {
<a name="l05115"></a>05115             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> - p &gt; max_line_margin) {
<a name="l05116"></a>05116                 p = <a class="code" href="../../d5/de3/encoding_8h.html#a48a3264058189cf218f8e9dad6513c54">rb_enc_prev_char</a>(p, <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> - max_line_margin, pe, <a class="code" href="../../d5/db5/encoding_8c.html#ac21ed764f3b39453b6a848dd64a19585">rb_enc_get</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ada3e2d92f1cfb779d4ec3be8cf58c76b">lex_lastline</a>));
<a name="l05117"></a>05117                 pre = <span class="stringliteral">&quot;...&quot;</span>;
<a name="l05118"></a>05118             }
<a name="l05119"></a>05119             <span class="keywordflow">if</span> (pe - <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> &gt; max_line_margin) {
<a name="l05120"></a>05120                 pe = <a class="code" href="../../d5/de3/encoding_8h.html#a48a3264058189cf218f8e9dad6513c54">rb_enc_prev_char</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>, <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> + max_line_margin, pe, <a class="code" href="../../d5/db5/encoding_8c.html#ac21ed764f3b39453b6a848dd64a19585">rb_enc_get</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ada3e2d92f1cfb779d4ec3be8cf58c76b">lex_lastline</a>));
<a name="l05121"></a>05121                 post = <span class="stringliteral">&quot;...&quot;</span>;
<a name="l05122"></a>05122             }
<a name="l05123"></a>05123             len = pe - p;
<a name="l05124"></a>05124         }
<a name="l05125"></a>05125         buf = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a1408f4b967485afd869990b67e766ceb">ALLOCA_N</a>(<span class="keywordtype">char</span>, len+2);
<a name="l05126"></a>05126         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a04ab67335215e8362c63ed27ae2d1c40">MEMCPY</a>(buf, p, <span class="keywordtype">char</span>, len);
<a name="l05127"></a>05127         buf[len] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l05128"></a>05128         <a class="code" href="../../db/dcc/error_8c.html#ad55c5953c1fed63a3ce7812b48ab5056">rb_compile_error_append</a>(<span class="stringliteral">&quot;%s%s%s&quot;</span>, pre, buf, post);
<a name="l05129"></a>05129 
<a name="l05130"></a>05130         i = (int)(<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> - p);
<a name="l05131"></a>05131         p2 = buf; pe = buf + len;
<a name="l05132"></a>05132 
<a name="l05133"></a>05133         <span class="keywordflow">while</span> (p2 &lt; pe) {
<a name="l05134"></a>05134             <span class="keywordflow">if</span> (*p2 != <span class="charliteral">&apos;\t&apos;</span>) *p2 = <span class="charliteral">&apos; &apos;</span>;
<a name="l05135"></a>05135             p2++;
<a name="l05136"></a>05136         }
<a name="l05137"></a>05137         buf[i] = <span class="charliteral">&apos;^&apos;</span>;
<a name="l05138"></a>05138         buf[i+1] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l05139"></a>05139         <a class="code" href="../../db/dcc/error_8c.html#ad55c5953c1fed63a3ce7812b48ab5056">rb_compile_error_append</a>(<span class="stringliteral">&quot;%s%s&quot;</span>, pre, buf);
<a name="l05140"></a>05140     }
<a name="l05141"></a>05141 <span class="preprocessor">#else</span>
<a name="l05142"></a>05142 <span class="preprocessor"></span>    dispatch1(parse_error, <a class="code" href="../../d5/d11/ripper_8c.html#a774f72da4a84c6fe41cf3dc05952646c">STR_NEW2</a>(msg));
<a name="l05143"></a>05143 <span class="preprocessor">#endif </span><span class="comment">/* !RIPPER */</span>
<a name="l05144"></a>05144     <span class="keywordflow">return</span> 0;
<a name="l05145"></a>05145 }
<a name="l05146"></a>05146 
<a name="l05147"></a>05147 <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d7/dc0/parse_8y.html#afed0ba1d93197b631db7bbc854de24a8">parser_prepare</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser);
<a name="l05148"></a>05148 
<a name="l05149"></a>05149 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l05150"></a>05150 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l05151"></a>05151 <a class="code" href="../../d7/dc0/parse_8y.html#ac4a8140bd2878a83d6df2f5293c98eed">debug_lines</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *f)
<a name="l05152"></a>05152 {
<a name="l05153"></a>05153     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> script_lines;
<a name="l05154"></a>05154     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aa50b9d5bc665eb5545f6857c89232161">CONST_ID</a>(script_lines, <span class="stringliteral">&quot;SCRIPT_LINES__&quot;</span>);
<a name="l05155"></a>05155     <span class="keywordflow">if</span> (<a class="code" href="../../db/d2e/intern_8h.html#a6aa5b85eacf47a565659b4e32594f388">rb_const_defined_at</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a57c96ead3ef230b4838e65fe037c346e">rb_cObject</a>, script_lines)) {
<a name="l05156"></a>05156         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d3/deb/lex_8c.html#a5541f85ce416df233cce93949f0eeeca">hash</a> = <a class="code" href="../../db/d2e/intern_8h.html#a8265931c0ae8ab5c2e40702295049439">rb_const_get_at</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a57c96ead3ef230b4838e65fe037c346e">rb_cObject</a>, script_lines);
<a name="l05157"></a>05157         <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a394faf7191f18552a20cb17ce14226f0">TYPE</a>(hash) == <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8357e81bbb60cb41b0a292a90653a5e5">T_HASH</a>) {
<a name="l05158"></a>05158             <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> fname = <a class="code" href="../../d5/de3/encoding_8h.html#aeb5f105fc82d8495f29cf03e563bff6b">rb_external_str_new_with_enc</a>(f, <a class="code" href="../../d6/d7b/strchr_8c.html#a219836f542ce53545052bed5353820ca">strlen</a>(f), <a class="code" href="../../d5/db5/encoding_8c.html#af99b5328ff8c5511cbccd48fc0fe82bc">rb_filesystem_encoding</a>());
<a name="l05159"></a>05159             <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> lines = <a class="code" href="../../dc/dcc/array_8c.html#a9518114fd36cb4ef4656ec1dc63348c9">rb_ary_new</a>();
<a name="l05160"></a>05160             <a class="code" href="../../d1/d04/hash_8c.html#ac477edf136d86a33bc06d1fbea67bb9a">rb_hash_aset</a>(hash, fname, lines);
<a name="l05161"></a>05161             <span class="keywordflow">return</span> lines;
<a name="l05162"></a>05162         }
<a name="l05163"></a>05163     }
<a name="l05164"></a>05164     <span class="keywordflow">return</span> 0;
<a name="l05165"></a>05165 }
<a name="l05166"></a>05166 
<a name="l05167"></a>05167 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l05168"></a>05168 <a class="code" href="../../d7/dc0/parse_8y.html#a33bc9954a8770b25c15d1f51c58f3867">coverage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *f, <span class="keywordtype">int</span> n)
<a name="l05169"></a>05169 {
<a name="l05170"></a>05170     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> coverages = <a class="code" href="../../d3/de7/thread_8c.html#a07f418cdbb9ed1a05c44d91d2a07d2eb">rb_get_coverages</a>();
<a name="l05171"></a>05171     <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a117741045763c090b26e30a85bd0e0a6">RTEST</a>(coverages) &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a1d4c05021aacd8cab989ff60f95ebe2d">RBASIC</a>(coverages)-&gt;klass == 0) {
<a name="l05172"></a>05172         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> fname = <a class="code" href="../../d5/de3/encoding_8h.html#aeb5f105fc82d8495f29cf03e563bff6b">rb_external_str_new_with_enc</a>(f, <a class="code" href="../../d6/d7b/strchr_8c.html#a219836f542ce53545052bed5353820ca">strlen</a>(f), <a class="code" href="../../d5/db5/encoding_8c.html#af99b5328ff8c5511cbccd48fc0fe82bc">rb_filesystem_encoding</a>());
<a name="l05173"></a>05173         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> lines = <a class="code" href="../../dc/dcc/array_8c.html#a43a7bd246935ab63c233b4ae34d61d75">rb_ary_new2</a>(n);
<a name="l05174"></a>05174         <span class="keywordtype">int</span> i;
<a name="l05175"></a>05175         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a1d4c05021aacd8cab989ff60f95ebe2d">RBASIC</a>(lines)-&gt;klass = 0;
<a name="l05176"></a>05176         <span class="keywordflow">for</span> (i = 0; i &lt; n; i++) <a class="code" href="../../d8/df4/generator_8h.html#abb794fe2d7c73eea87e7ba2273939a8e">RARRAY_PTR</a>(lines)[i] = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>;
<a name="l05177"></a>05177         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a6ad4b459637de1ab73940dff465b63ea">RARRAY</a>(lines)-&gt;as.heap.len = n;
<a name="l05178"></a>05178         <a class="code" href="../../d1/d04/hash_8c.html#ac477edf136d86a33bc06d1fbea67bb9a">rb_hash_aset</a>(coverages, fname, lines);
<a name="l05179"></a>05179         <span class="keywordflow">return</span> lines;
<a name="l05180"></a>05180     }
<a name="l05181"></a>05181     <span class="keywordflow">return</span> 0;
<a name="l05182"></a>05182 }
<a name="l05183"></a>05183 
<a name="l05184"></a>05184 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l05185"></a>05185 <a class="code" href="../../d7/dc0/parse_8y.html#aa2d9d34b302b849f923743d4b4be53dc">e_option_supplied</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l05186"></a>05186 {
<a name="l05187"></a>05187     <span class="keywordflow">return</span> strcmp(<a class="code" href="../../d2/d47/compile_8c.html#aca52b28c4504720708a4fab8675dc407">ruby_sourcefile</a>, <span class="stringliteral">&quot;-e&quot;</span>) == 0;
<a name="l05188"></a>05188 }
<a name="l05189"></a>05189 
<a name="l05190"></a>05190 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l05191"></a>05191 <a class="code" href="../../d7/dc0/parse_8y.html#a7f2ac42d971e00443f67fb34261abc00">yycompile0</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> arg, <span class="keywordtype">int</span> tracing)
<a name="l05192"></a>05192 {
<a name="l05193"></a>05193     <span class="keywordtype">int</span> n;
<a name="l05194"></a>05194     NODE *tree;
<a name="l05195"></a>05195     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser = (<span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *)arg;
<a name="l05196"></a>05196 
<a name="l05197"></a>05197     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#a7a74d262442bc583dd17849c36ffc1a5">compile_for_eval</a> &amp;&amp; <a class="code" href="../../d5/d9d/tcltklib_8c.html#a6f520624fabb8332dc98fd223491bf8d">rb_safe_level</a>() == 0) {
<a name="l05198"></a>05198         <a class="code" href="../../d5/d11/ripper_8c.html#a1b64f0549f6ce6da6ea51f2da2c69ca7">ruby_debug_lines</a> = <a class="code" href="../../d7/dc0/parse_8y.html#ac4a8140bd2878a83d6df2f5293c98eed">debug_lines</a>(<a class="code" href="../../d2/d47/compile_8c.html#aca52b28c4504720708a4fab8675dc407">ruby_sourcefile</a>);
<a name="l05199"></a>05199         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a1b64f0549f6ce6da6ea51f2da2c69ca7">ruby_debug_lines</a> &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a> &gt; 0) {
<a name="l05200"></a>05200             <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str = <a class="code" href="../../d5/d11/ripper_8c.html#aec72cdf8444b31ad141093b4649173d5">STR_NEW0</a>();
<a name="l05201"></a>05201             n = <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>;
<a name="l05202"></a>05202             <span class="keywordflow">do</span> {
<a name="l05203"></a>05203                 <a class="code" href="../../dc/dcc/array_8c.html#a59d553a8cd781364b8bcb0deae25cca2">rb_ary_push</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a1b64f0549f6ce6da6ea51f2da2c69ca7">ruby_debug_lines</a>, str);
<a name="l05204"></a>05204             } <span class="keywordflow">while</span> (--n);
<a name="l05205"></a>05205         }
<a name="l05206"></a>05206 
<a name="l05207"></a>05207         <span class="keywordflow">if</span> (!<a class="code" href="../../d7/dc0/parse_8y.html#aa2d9d34b302b849f923743d4b4be53dc">e_option_supplied</a>(parser)) {
<a name="l05208"></a>05208             <a class="code" href="../../d5/d11/ripper_8c.html#aa7f5636005d6e4d6c5e03ccbad141d93">ruby_coverage</a> = <a class="code" href="../../d7/dc0/parse_8y.html#a33bc9954a8770b25c15d1f51c58f3867">coverage</a>(<a class="code" href="../../d2/d47/compile_8c.html#aca52b28c4504720708a4fab8675dc407">ruby_sourcefile</a>, <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>);
<a name="l05209"></a>05209         }
<a name="l05210"></a>05210     }
<a name="l05211"></a>05211 
<a name="l05212"></a>05212     <a class="code" href="../../d7/dc0/parse_8y.html#afed0ba1d93197b631db7bbc854de24a8">parser_prepare</a>(parser);
<a name="l05213"></a>05213     <a class="code" href="../../d5/d11/ripper_8c.html#a8e0101b90062ee6777e4039eefcd1e75">deferred_nodes</a> = 0;
<a name="l05214"></a>05214 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l05215"></a>05215 <span class="preprocessor"></span>    parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#ad8d4e8dac64b2b8df97c394b621a47d5">parser_token_info_enabled</a> = !<a class="code" href="../../d5/d11/ripper_8c.html#a7a74d262442bc583dd17849c36ffc1a5">compile_for_eval</a> &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a117741045763c090b26e30a85bd0e0a6">RTEST</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a56087d5316e4c73027105c023006cb15">ruby_verbose</a>);
<a name="l05216"></a>05216 <span class="preprocessor">#endif</span>
<a name="l05217"></a>05217 <span class="preprocessor"></span>    n = <a class="code" href="../../d5/d11/ripper_8c.html#a7482716c0f7d5bc8387ad56daa3a9fde">yyparse</a>((<span class="keywordtype">void</span>*)parser);
<a name="l05218"></a>05218     <a class="code" href="../../d5/d11/ripper_8c.html#a1b64f0549f6ce6da6ea51f2da2c69ca7">ruby_debug_lines</a> = 0;
<a name="l05219"></a>05219     <a class="code" href="../../d5/d11/ripper_8c.html#aa7f5636005d6e4d6c5e03ccbad141d93">ruby_coverage</a> = 0;
<a name="l05220"></a>05220     <a class="code" href="../../d5/d11/ripper_8c.html#a7a74d262442bc583dd17849c36ffc1a5">compile_for_eval</a> = 0;
<a name="l05221"></a>05221 
<a name="l05222"></a>05222     <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = 0;
<a name="l05223"></a><a class="code" href="../../d7/dc0/parse_8y.html#a539010fefc1b89a6340da263036ab333">05223</a>     <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a8008dcfc6e95106d2ff2ddf9068aff5b">lex_pbeg</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a> = 0;
<a name="l05224"></a>05224     <a class="code" href="../../d5/d11/ripper_8c.html#ada3e2d92f1cfb779d4ec3be8cf58c76b">lex_lastline</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a390839b1224bcabe4141b01d94595111">lex_nextline</a> = 0;
<a name="l05225"></a>05225     <span class="keywordflow">if</span> (parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a209b032c8adcfc1955157d18afbddcf0">nerr</a>) {
<a name="l05226"></a>05226         <span class="keywordflow">return</span> 0;
<a name="l05227"></a>05227     }
<a name="l05228"></a>05228     tree = <a class="code" href="../../d5/d11/ripper_8c.html#a9b370d5e8d61dfdb75ff8fa6397d6e8c">ruby_eval_tree</a>;
<a name="l05229"></a>05229     <span class="keywordflow">if</span> (!tree) {
<a name="l05230"></a>05230         tree = <a class="code" href="../../d3/d09/ripper_8y.html#a969f4dd65ae53a2ec90dbbb0420af61e">NEW_NIL</a>();
<a name="l05231"></a>05231     }
<a name="l05232"></a>05232     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7c301e13ce3176f0157adffeafabcad7">ruby_eval_tree_begin</a>) {
<a name="l05233"></a>05233         tree-&gt;nd_body = <a class="code" href="../../d3/d09/ripper_8y.html#acb85e15bc33fde8a817d792d10eeea86">NEW_PRELUDE</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a7c301e13ce3176f0157adffeafabcad7">ruby_eval_tree_begin</a>, tree-&gt;nd_body);
<a name="l05234"></a>05234     }
<a name="l05235"></a>05235     <span class="keywordflow">return</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)tree;
<a name="l05236"></a>05236 }
<a name="l05237"></a>05237 
<a name="l05238"></a>05238 <span class="keyword">static</span> NODE*
<a name="l05239"></a>05239 <a class="code" href="../../d7/dc0/parse_8y.html#a491e36f465bcc626156202db04978cd7">yycompile</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *f, <span class="keywordtype">int</span> line)
<a name="l05240"></a>05240 {
<a name="l05241"></a>05241     <a class="code" href="../../d2/d47/compile_8c.html#aca52b28c4504720708a4fab8675dc407">ruby_sourcefile</a> = <a class="code" href="../../d8/d3c/util_8h.html#a29a29bcdf6e0d7cc6808f6253e4b0a7f">ruby_strdup</a>(f);
<a name="l05242"></a>05242     <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a> = line - 1;
<a name="l05243"></a>05243     <span class="keywordflow">return</span> (NODE *)<a class="code" href="../../d3/de7/thread_8c.html#ac933531e269aff3ae5894001d51eadbb">ruby_suppress_tracing</a>(<a class="code" href="../../d7/dc0/parse_8y.html#a7f2ac42d971e00443f67fb34261abc00">yycompile0</a>, (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)parser, <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l05244"></a>05244 }
<a name="l05245"></a>05245 <span class="preprocessor">#endif </span><span class="comment">/* !RIPPER */</span>
<a name="l05246"></a>05246 
<a name="l05247"></a>05247 <span class="keyword">static</span> <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *
<a name="l05248"></a>05248 <a class="code" href="../../d7/dc0/parse_8y.html#a637ce9985953c7f271fd38a9820128e0">must_be_ascii_compatible</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> s)
<a name="l05249"></a>05249 {
<a name="l05250"></a>05250     <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a> = <a class="code" href="../../d5/db5/encoding_8c.html#ac21ed764f3b39453b6a848dd64a19585">rb_enc_get</a>(s);
<a name="l05251"></a><a class="code" href="../../d7/dc0/parse_8y.html#a2f1fb53b210f144b0af547516e407b59">05251</a>     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/de3/encoding_8h.html#a8b18a09a3055d3006c6d5baeaa6e7c72">rb_enc_asciicompat</a>(enc)) {
<a name="l05252"></a>05252         <a class="code" href="../../db/dcc/error_8c.html#a0f771a2840561f1838169b3d7d4616f3">rb_raise</a>(<a class="code" href="../../db/dcc/error_8c.html#ab5e2a9fec766c75176fbb262bfe6a596">rb_eArgError</a>, <span class="stringliteral">&quot;invalid source encoding&quot;</span>);
<a name="l05253"></a>05253     }
<a name="l05254"></a>05254     <span class="keywordflow">return</span> enc;
<a name="l05255"></a>05255 }
<a name="l05256"></a>05256 
<a name="l05257"></a>05257 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l05258"></a>05258 <a class="code" href="../../d7/dc0/parse_8y.html#a0be85261168125d878ba6089b9ebaf0a">lex_get_str</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> s)
<a name="l05259"></a>05259 {
<a name="l05260"></a>05260     <span class="keywordtype">char</span> *beg, *end, *pend;
<a name="l05261"></a>05261     <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc = <a class="code" href="../../d7/dc0/parse_8y.html#a637ce9985953c7f271fd38a9820128e0">must_be_ascii_compatible</a>(s);
<a name="l05262"></a>05262 
<a name="l05263"></a><a class="code" href="../../d7/dc0/parse_8y.html#a61ddd7143020d0d74b03f3eaa5838062">05263</a>     beg = <a class="code" href="../../d8/df4/generator_8h.html#aa0c7097c0d82c8372072fbab5a604e39">RSTRING_PTR</a>(s);
<a name="l05264"></a>05264     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#acce7759edc4a7b3ab2ae93e5e4823775">lex_gets_ptr</a>) {
<a name="l05265"></a>05265         <span class="keywordflow">if</span> (<a class="code" href="../../d8/df4/generator_8h.html#a1661e63c26c5cbeef7217d05b0f33942">RSTRING_LEN</a>(s) == <a class="code" href="../../d5/d11/ripper_8c.html#acce7759edc4a7b3ab2ae93e5e4823775">lex_gets_ptr</a>) <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>;
<a name="l05266"></a>05266         beg += <a class="code" href="../../d5/d11/ripper_8c.html#acce7759edc4a7b3ab2ae93e5e4823775">lex_gets_ptr</a>;
<a name="l05267"></a>05267     }
<a name="l05268"></a>05268     pend = <a class="code" href="../../d8/df4/generator_8h.html#aa0c7097c0d82c8372072fbab5a604e39">RSTRING_PTR</a>(s) + <a class="code" href="../../d8/df4/generator_8h.html#a1661e63c26c5cbeef7217d05b0f33942">RSTRING_LEN</a>(s);
<a name="l05269"></a>05269     end = beg;
<a name="l05270"></a>05270     <span class="keywordflow">while</span> (end &lt; pend) {
<a name="l05271"></a>05271         <span class="keywordflow">if</span> (*end++ == <span class="charliteral">&apos;\n&apos;</span>) <span class="keywordflow">break</span>;
<a name="l05272"></a>05272     }
<a name="l05273"></a>05273     <a class="code" href="../../d5/d11/ripper_8c.html#acce7759edc4a7b3ab2ae93e5e4823775">lex_gets_ptr</a> = end - <a class="code" href="../../d8/df4/generator_8h.html#aa0c7097c0d82c8372072fbab5a604e39">RSTRING_PTR</a>(s);
<a name="l05274"></a>05274     <span class="keywordflow">return</span> <a class="code" href="../../d5/de3/encoding_8h.html#a6707b730597e0e614213beb11670aca2">rb_enc_str_new</a>(beg, end - beg, enc);
<a name="l05275"></a>05275 }
<a name="l05276"></a>05276 
<a name="l05277"></a>05277 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l05278"></a>05278 <a class="code" href="../../d7/dc0/parse_8y.html#a0afda89714e6300ba4f718241579488e">lex_getline</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l05279"></a>05279 {
<a name="l05280"></a>05280     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> line = (*parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#ac6081a8fb34f2662c83a12cae955e14c">parser_lex_gets</a>)(parser, parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#ab299eabdb020d4889bd357cb6688d35e">parser_lex_input</a>);
<a name="l05281"></a>05281     <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(line)) <span class="keywordflow">return</span> line;
<a name="l05282"></a>05282     <a class="code" href="../../d7/dc0/parse_8y.html#a637ce9985953c7f271fd38a9820128e0">must_be_ascii_compatible</a>(line);
<a name="l05283"></a><a class="code" href="../../d7/dc0/parse_8y.html#a5b27980f8a87fb9fc78ec3e1268ba2a2">05283</a> <span class="preprocessor">#ifndef RIPPER</span>
<a name="l05284"></a>05284 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a1b64f0549f6ce6da6ea51f2da2c69ca7">ruby_debug_lines</a>) {
<a name="l05285"></a>05285         <a class="code" href="../../d5/db5/encoding_8c.html#a150a6e3ac22ac3be8f8c2ccc74a28e7b">rb_enc_associate</a>(line, parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a>);
<a name="l05286"></a>05286         <a class="code" href="../../dc/dcc/array_8c.html#a59d553a8cd781364b8bcb0deae25cca2">rb_ary_push</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a1b64f0549f6ce6da6ea51f2da2c69ca7">ruby_debug_lines</a>, line);
<a name="l05287"></a>05287     }
<a name="l05288"></a>05288     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#aa7f5636005d6e4d6c5e03ccbad141d93">ruby_coverage</a>) {
<a name="l05289"></a>05289         <a class="code" href="../../dc/dcc/array_8c.html#a59d553a8cd781364b8bcb0deae25cca2">rb_ary_push</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aa7f5636005d6e4d6c5e03ccbad141d93">ruby_coverage</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>);
<a name="l05290"></a>05290     }
<a name="l05291"></a>05291 <span class="preprocessor">#endif</span>
<a name="l05292"></a>05292 <span class="preprocessor"></span>    <span class="keywordflow">return</span> line;
<a name="l05293"></a><a class="code" href="../../d7/dc0/parse_8y.html#a53dcfc7015f83bec0c829e866cf4cc23">05293</a> }
<a name="l05294"></a>05294 
<a name="l05295"></a>05295 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l05296"></a>05296 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="../../d7/de2/structrb__data__type__struct.html">rb_data_type_t</a> <a class="code" href="../../d7/dc0/parse_8y.html#af36ef20882377523249710431e5e571a">parser_data_type</a>;
<a name="l05297"></a>05297 <span class="preprocessor">#else</span>
<a name="l05298"></a>05298 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d7/de2/structrb__data__type__struct.html">rb_data_type_t</a> parser_data_type;
<a name="l05299"></a>05299 
<a name="l05300"></a>05300 <span class="keyword">static</span> NODE*
<a name="l05301"></a>05301 <a class="code" href="../../d7/dc0/parse_8y.html#a94a3192b464cd7ad7e89603015bd0e23">parser_compile_string</a>(<span class="keyword">volatile</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> vparser, <span class="keyword">const</span> <span class="keywordtype">char</span> *f, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> s, <span class="keywordtype">int</span> line)
<a name="l05302"></a>05302 {
<a name="l05303"></a>05303     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser;
<a name="l05304"></a>05304     NODE *node;
<a name="l05305"></a>05305     <span class="keyword">volatile</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> tmp;
<a name="l05306"></a>05306 
<a name="l05307"></a>05307     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8dce6624396c492cdd1af3a4c5871556">TypedData_Get_Struct</a>(vparser, <span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, &amp;parser_data_type, parser);
<a name="l05308"></a>05308     <a class="code" href="../../d5/d11/ripper_8c.html#a8d6296e293cd49cb48e610b4c9a0ca67">lex_gets</a> = <a class="code" href="../../d7/dc0/parse_8y.html#a0be85261168125d878ba6089b9ebaf0a">lex_get_str</a>;
<a name="l05309"></a>05309     <a class="code" href="../../d5/d11/ripper_8c.html#acce7759edc4a7b3ab2ae93e5e4823775">lex_gets_ptr</a> = 0;
<a name="l05310"></a>05310     <a class="code" href="../../d5/d11/ripper_8c.html#a53558af48929beac951e9a45273e051a">lex_input</a> = s;
<a name="l05311"></a>05311     <a class="code" href="../../d5/d11/ripper_8c.html#a8008dcfc6e95106d2ff2ddf9068aff5b">lex_pbeg</a> = <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a> = 0;
<a name="l05312"></a>05312     <a class="code" href="../../d5/d11/ripper_8c.html#a7a74d262442bc583dd17849c36ffc1a5">compile_for_eval</a> = <a class="code" href="../../d2/d47/compile_8c.html#afd0e8dc10524cd155afbbe700fbfdf19">rb_parse_in_eval</a>();
<a name="l05313"></a>05313 
<a name="l05314"></a><a class="code" href="../../d7/dc0/parse_8y.html#a0896ac9b449b5d011939c6ed6e8ef48e">05314</a>     node = <a class="code" href="../../d7/dc0/parse_8y.html#a491e36f465bcc626156202db04978cd7">yycompile</a>(parser, f, line);
<a name="l05315"></a>05315     tmp = vparser; <span class="comment">/* prohibit tail call optimization */</span>
<a name="l05316"></a>05316 
<a name="l05317"></a>05317     <span class="keywordflow">return</span> node;
<a name="l05318"></a>05318 }
<a name="l05319"></a>05319 
<a name="l05320"></a>05320 NODE*
<a name="l05321"></a>05321 <a class="code" href="../../d5/d11/ripper_8c.html#a413b97b3122fa93eff53181a1f92d07e">rb_compile_string</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *f, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> s, <span class="keywordtype">int</span> line)
<a name="l05322"></a>05322 {
<a name="l05323"></a>05323     <a class="code" href="../../d7/dc0/parse_8y.html#a637ce9985953c7f271fd38a9820128e0">must_be_ascii_compatible</a>(s);
<a name="l05324"></a>05324     <span class="keywordflow">return</span> <a class="code" href="../../d7/dc0/parse_8y.html#a94a3192b464cd7ad7e89603015bd0e23">parser_compile_string</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a175a11311538e1c0c3bc41c96a6a8aaf">rb_parser_new</a>(), f, s, line);
<a name="l05325"></a>05325 }
<a name="l05326"></a>05326 
<a name="l05327"></a>05327 NODE*
<a name="l05328"></a>05328 <a class="code" href="../../d5/d11/ripper_8c.html#a7412884de7525393ed236f51925b4c66">rb_parser_compile_string</a>(<span class="keyword">volatile</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> vparser, <span class="keyword">const</span> <span class="keywordtype">char</span> *f, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> s, <span class="keywordtype">int</span> line)
<a name="l05329"></a>05329 {
<a name="l05330"></a>05330     <a class="code" href="../../d7/dc0/parse_8y.html#a637ce9985953c7f271fd38a9820128e0">must_be_ascii_compatible</a>(s);
<a name="l05331"></a>05331     <span class="keywordflow">return</span> <a class="code" href="../../d7/dc0/parse_8y.html#a94a3192b464cd7ad7e89603015bd0e23">parser_compile_string</a>(vparser, f, s, line);
<a name="l05332"></a><a class="code" href="../../d7/dc0/parse_8y.html#a5be79a4129d0321fdfc3adf4402eb8e4">05332</a> }
<a name="l05333"></a>05333 
<a name="l05334"></a>05334 NODE*
<a name="l05335"></a>05335 <a class="code" href="../../d5/d11/ripper_8c.html#a2cad62b3d9f04b9a9bfec854862ab1e5">rb_compile_cstr</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *f, <span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">int</span> len, <span class="keywordtype">int</span> line)
<a name="l05336"></a>05336 {
<a name="l05337"></a>05337     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str = <a class="code" href="../../db/d2e/intern_8h.html#a48b2b873adb8b6a04254bd631c4b03c5">rb_str_new</a>(s, len);
<a name="l05338"></a>05338     <span class="keywordflow">return</span> <a class="code" href="../../d7/dc0/parse_8y.html#a94a3192b464cd7ad7e89603015bd0e23">parser_compile_string</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a175a11311538e1c0c3bc41c96a6a8aaf">rb_parser_new</a>(), f, str, line);
<a name="l05339"></a>05339 }
<a name="l05340"></a>05340 
<a name="l05341"></a>05341 NODE*
<a name="l05342"></a><a class="code" href="../../d7/dc0/parse_8y.html#a1562fef3956e88ffbe725bb37e5d5532">05342</a> <a class="code" href="../../d5/d11/ripper_8c.html#ad5076c78de9f86393ee2d6a27f050990">rb_parser_compile_cstr</a>(<span class="keyword">volatile</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> vparser, <span class="keyword">const</span> <span class="keywordtype">char</span> *f, <span class="keyword">const</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">int</span> len, <span class="keywordtype">int</span> line)
<a name="l05343"></a>05343 {
<a name="l05344"></a>05344     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str = <a class="code" href="../../db/d2e/intern_8h.html#a48b2b873adb8b6a04254bd631c4b03c5">rb_str_new</a>(s, len);
<a name="l05345"></a>05345     <span class="keywordflow">return</span> <a class="code" href="../../d7/dc0/parse_8y.html#a94a3192b464cd7ad7e89603015bd0e23">parser_compile_string</a>(vparser, f, str, line);
<a name="l05346"></a>05346 }
<a name="l05347"></a>05347 
<a name="l05348"></a><a class="code" href="../../d7/dc0/parse_8y.html#a89bebacc73f4731fe3ce8af61559783e">05348</a> <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l05349"></a>05349 <a class="code" href="../../d7/dc0/parse_8y.html#a63a661069db8c201e1ee61db9723625b">lex_io_gets</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> io)
<a name="l05350"></a>05350 {
<a name="l05351"></a>05351     <span class="keywordflow">return</span> <a class="code" href="../../db/d2e/intern_8h.html#a4f0d1bd3c88e8f31ee0b41afce9e94fb">rb_io_gets</a>(io);
<a name="l05352"></a>05352 }
<a name="l05353"></a>05353 
<a name="l05354"></a>05354 NODE*
<a name="l05355"></a>05355 <a class="code" href="../../d5/d11/ripper_8c.html#a525197fc5b5152ea5760a98a7e594986">rb_compile_file</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *f, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> file, <span class="keywordtype">int</span> start)
<a name="l05356"></a>05356 {
<a name="l05357"></a>05357     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">volatile</span> vparser = <a class="code" href="../../d5/d11/ripper_8c.html#a175a11311538e1c0c3bc41c96a6a8aaf">rb_parser_new</a>();
<a name="l05358"></a>05358 
<a name="l05359"></a>05359     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a7368a8916f449d63c1bb090bca14dcd5">rb_parser_compile_file</a>(vparser, f, file, start);
<a name="l05360"></a>05360 }
<a name="l05361"></a>05361 
<a name="l05362"></a>05362 NODE*
<a name="l05363"></a>05363 <a class="code" href="../../d5/d11/ripper_8c.html#a7368a8916f449d63c1bb090bca14dcd5">rb_parser_compile_file</a>(<span class="keyword">volatile</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> vparser, <span class="keyword">const</span> <span class="keywordtype">char</span> *f, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> file, <span class="keywordtype">int</span> start)
<a name="l05364"></a>05364 {
<a name="l05365"></a>05365     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser;
<a name="l05366"></a>05366     <span class="keyword">volatile</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> tmp;
<a name="l05367"></a>05367     NODE *node;
<a name="l05368"></a>05368 
<a name="l05369"></a>05369     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8dce6624396c492cdd1af3a4c5871556">TypedData_Get_Struct</a>(vparser, <span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, &amp;parser_data_type, parser);
<a name="l05370"></a>05370     <a class="code" href="../../d5/d11/ripper_8c.html#a8d6296e293cd49cb48e610b4c9a0ca67">lex_gets</a> = <a class="code" href="../../d7/dc0/parse_8y.html#a63a661069db8c201e1ee61db9723625b">lex_io_gets</a>;
<a name="l05371"></a>05371     <a class="code" href="../../d5/d11/ripper_8c.html#a53558af48929beac951e9a45273e051a">lex_input</a> = file;
<a name="l05372"></a>05372     <a class="code" href="../../d5/d11/ripper_8c.html#a8008dcfc6e95106d2ff2ddf9068aff5b">lex_pbeg</a> = <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a> = 0;
<a name="l05373"></a>05373     <a class="code" href="../../d5/d11/ripper_8c.html#a7a74d262442bc583dd17849c36ffc1a5">compile_for_eval</a> = <a class="code" href="../../d2/d47/compile_8c.html#afd0e8dc10524cd155afbbe700fbfdf19">rb_parse_in_eval</a>();
<a name="l05374"></a>05374 
<a name="l05375"></a>05375     node = <a class="code" href="../../d7/dc0/parse_8y.html#a491e36f465bcc626156202db04978cd7">yycompile</a>(parser, f, start);
<a name="l05376"></a>05376     tmp = vparser; <span class="comment">/* prohibit tail call optimization */</span>
<a name="l05377"></a>05377 
<a name="l05378"></a>05378     <span class="keywordflow">return</span> node;
<a name="l05379"></a>05379 }
<a name="l05380"></a>05380 <span class="preprocessor">#endif  </span><span class="comment">/* !RIPPER */</span>
<a name="l05381"></a>05381 
<a name="l05382"></a>05382 <span class="preprocessor">#define STR_FUNC_ESCAPE 0x01</span>
<a name="l05383"></a>05383 <span class="preprocessor"></span><span class="preprocessor">#define STR_FUNC_EXPAND 0x02</span>
<a name="l05384"></a>05384 <span class="preprocessor"></span><span class="preprocessor">#define STR_FUNC_REGEXP 0x04</span>
<a name="l05385"></a>05385 <span class="preprocessor"></span><span class="preprocessor">#define STR_FUNC_QWORDS 0x08</span>
<a name="l05386"></a>05386 <span class="preprocessor"></span><span class="preprocessor">#define STR_FUNC_SYMBOL 0x10</span>
<a name="l05387"></a>05387 <span class="preprocessor"></span><span class="preprocessor">#define STR_FUNC_INDENT 0x20</span>
<a name="l05388"></a>05388 <span class="preprocessor"></span>
<a name="l05389"></a>05389 <span class="keyword">enum</span> <a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25">string_type</a> {
<a name="l05390"></a>05390     <a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25aaf6a1bae38eadb504993e21689e6e390">str_squote</a> = (0),
<a name="l05391"></a>05391     <a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25a7f4c3b93bf426276864f9bc8dc29a867">str_dquote</a> = (<a class="code" href="../../d5/d11/ripper_8c.html#aefdd60ff387e322710ff80f16bedbeaa">STR_FUNC_EXPAND</a>),
<a name="l05392"></a>05392     <a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25a7dd48ff6d3edd0dd7b4495292f22e6f0">str_xquote</a> = (<a class="code" href="../../d5/d11/ripper_8c.html#aefdd60ff387e322710ff80f16bedbeaa">STR_FUNC_EXPAND</a>),
<a name="l05393"></a>05393     <a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25aa9bfa1dfaca876d4661889a3e02796b3">str_regexp</a> = (<a class="code" href="../../d5/d11/ripper_8c.html#ad832f161067673ac6dfca392c45d77e7">STR_FUNC_REGEXP</a>|<a class="code" href="../../d5/d11/ripper_8c.html#ab423d80af75c48750f2a236fced421b8">STR_FUNC_ESCAPE</a>|<a class="code" href="../../d5/d11/ripper_8c.html#aefdd60ff387e322710ff80f16bedbeaa">STR_FUNC_EXPAND</a>),
<a name="l05394"></a>05394     <a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25ad032e3dd7874d9cba5349b3eea31ee2a">str_sword</a>  = (<a class="code" href="../../d5/d11/ripper_8c.html#a1e43ae61ca7f1925ca9e34f9ffbabfc2">STR_FUNC_QWORDS</a>),
<a name="l05395"></a>05395     <a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25a354b632ef49ad1cfb317d270a13552a4">str_dword</a>  = (<a class="code" href="../../d5/d11/ripper_8c.html#a1e43ae61ca7f1925ca9e34f9ffbabfc2">STR_FUNC_QWORDS</a>|<a class="code" href="../../d5/d11/ripper_8c.html#aefdd60ff387e322710ff80f16bedbeaa">STR_FUNC_EXPAND</a>),
<a name="l05396"></a>05396     <a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25a47b35c63e588adb3027d930eb4a31d40">str_ssym</a>   = (<a class="code" href="../../d5/d11/ripper_8c.html#abb3433e9d5d8bb54d1731c2379ee48ff">STR_FUNC_SYMBOL</a>),
<a name="l05397"></a>05397     <a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25a17e717b9057d218529b4b14f4ec6fdb9">str_dsym</a>   = (<a class="code" href="../../d5/d11/ripper_8c.html#abb3433e9d5d8bb54d1731c2379ee48ff">STR_FUNC_SYMBOL</a>|<a class="code" href="../../d5/d11/ripper_8c.html#aefdd60ff387e322710ff80f16bedbeaa">STR_FUNC_EXPAND</a>)
<a name="l05398"></a>05398 };
<a name="l05399"></a><a class="code" href="../../d7/dc0/parse_8y.html#a551074e2f66665e8861b0a8197dc5c59">05399</a> 
<a name="l05400"></a>05400 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l05401"></a>05401 <a class="code" href="../../d7/dc0/parse_8y.html#ae01a84cc3a8d426834ccf42614c3e297">parser_str_new</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *p, <span class="keywordtype">long</span> n, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc, <span class="keywordtype">int</span> <a class="code" href="../../dc/dd1/ossl__ssl_8c.html#a131c09b7f9c9a0b52e6f79f651cfd574">func</a>, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc0)
<a name="l05402"></a>05402 {
<a name="l05403"></a>05403     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str;
<a name="l05404"></a>05404 
<a name="l05405"></a>05405     str = <a class="code" href="../../d5/de3/encoding_8h.html#a6707b730597e0e614213beb11670aca2">rb_enc_str_new</a>(p, n, enc);
<a name="l05406"></a>05406     <span class="keywordflow">if</span> (!(func &amp; <a class="code" href="../../d5/d11/ripper_8c.html#ad832f161067673ac6dfca392c45d77e7">STR_FUNC_REGEXP</a>) &amp;&amp; <a class="code" href="../../d5/de3/encoding_8h.html#a8b18a09a3055d3006c6d5baeaa6e7c72">rb_enc_asciicompat</a>(enc)) {
<a name="l05407"></a>05407         <span class="keywordflow">if</span> (<a class="code" href="../../d5/de3/encoding_8h.html#a5282c41e11a68fe310f45c9a326ae2b8">rb_enc_str_coderange</a>(str) == <a class="code" href="../../d5/de3/encoding_8h.html#a0a0e73a2d98205044e1ad19432502c5b">ENC_CODERANGE_7BIT</a>) {
<a name="l05408"></a>05408         }
<a name="l05409"></a>05409         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (enc0 == <a class="code" href="../../d5/db5/encoding_8c.html#a1e215012f16414c044f6a212973c95a8">rb_usascii_encoding</a>() &amp;&amp; enc != <a class="code" href="../../d5/db5/encoding_8c.html#a893004271cf8c790ca40c4712261aa8c">rb_utf8_encoding</a>()) {
<a name="l05410"></a>05410             <a class="code" href="../../d5/db5/encoding_8c.html#a150a6e3ac22ac3be8f8c2ccc74a28e7b">rb_enc_associate</a>(str, <a class="code" href="../../d5/db5/encoding_8c.html#a767d777810f0d48add93857b52057262">rb_ascii8bit_encoding</a>());
<a name="l05411"></a>05411         }
<a name="l05412"></a>05412     }
<a name="l05413"></a>05413 
<a name="l05414"></a>05414     <span class="keywordflow">return</span> str;
<a name="l05415"></a>05415 }
<a name="l05416"></a>05416 
<a name="l05417"></a>05417 <span class="preprocessor">#define lex_goto_eol(parser) ((parser)-&gt;parser_lex_p = (parser)-&gt;parser_lex_pend)</span>
<a name="l05418"></a>05418 <span class="preprocessor"></span><span class="preprocessor">#define lex_eol_p() (lex_p &gt;= lex_pend)</span>
<a name="l05419"></a>05419 <span class="preprocessor"></span><span class="preprocessor">#define peek(c) peek_n((c), 0)</span>
<a name="l05420"></a>05420 <span class="preprocessor"></span><span class="preprocessor">#define peek_n(c,n) (lex_p+(n) &lt; lex_pend &amp;&amp; (c) == (unsigned char)lex_p[n])</span>
<a name="l05421"></a>05421 <span class="preprocessor"></span>
<a name="l05422"></a>05422 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l05423"></a>05423 <a class="code" href="../../d7/dc0/parse_8y.html#a2cdddde331fd21fa42c89690aa7844ff">parser_nextc</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l05424"></a>05424 {
<a name="l05425"></a>05425     <span class="keywordtype">int</span> c;
<a name="l05426"></a>05426 
<a name="l05427"></a>05427     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a>) {
<a name="l05428"></a>05428         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> v = <a class="code" href="../../d5/d11/ripper_8c.html#a390839b1224bcabe4141b01d94595111">lex_nextline</a>;
<a name="l05429"></a>05429         <a class="code" href="../../d5/d11/ripper_8c.html#a390839b1224bcabe4141b01d94595111">lex_nextline</a> = 0;
<a name="l05430"></a>05430         <span class="keywordflow">if</span> (!v) {
<a name="l05431"></a>05431             <span class="keywordflow">if</span> (parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a19fefb3d80f961d6da3692fb8c47515b">eofp</a>)
<a name="l05432"></a>05432                 <span class="keywordflow">return</span> -1;
<a name="l05433"></a>05433 
<a name="l05434"></a>05434             <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#a53558af48929beac951e9a45273e051a">lex_input</a> || <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(v = <a class="code" href="../../d7/dc0/parse_8y.html#a0afda89714e6300ba4f718241579488e">lex_getline</a>(parser))) {
<a name="l05435"></a>05435                 parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a19fefb3d80f961d6da3692fb8c47515b">eofp</a> = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aacea3516b33941ce8149098e223a7466">Qtrue</a>;
<a name="l05436"></a>05436                 <a class="code" href="../../d5/d11/ripper_8c.html#a78b87c7a31c73f4d182e2af460d4f009">lex_goto_eol</a>(parser);
<a name="l05437"></a>05437                 <span class="keywordflow">return</span> -1;
<a name="l05438"></a>05438             }
<a name="l05439"></a>05439         }
<a name="l05440"></a>05440         {
<a name="l05441"></a>05441 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l05442"></a>05442 <span class="preprocessor"></span>            <span class="keywordflow">if</span> (parser-&gt;tokp &lt; <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a>) {
<a name="l05443"></a>05443                 <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(parser-&gt;delayed)) {
<a name="l05444"></a>05444                     parser-&gt;delayed = <a class="code" href="../../db/d2e/intern_8h.html#a65dee742ae2daaab92ac8974cb2fbff2">rb_str_buf_new</a>(1024);
<a name="l05445"></a>05445                     <a class="code" href="../../d5/db5/encoding_8c.html#a150a6e3ac22ac3be8f8c2ccc74a28e7b">rb_enc_associate</a>(parser-&gt;delayed, parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a>);
<a name="l05446"></a>05446                     <a class="code" href="../../db/d2e/intern_8h.html#a4dff49e6d9aa925fd94fc5100b3c399b">rb_str_buf_cat</a>(parser-&gt;delayed,
<a name="l05447"></a>05447                                    parser-&gt;tokp, <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a> - parser-&gt;tokp);
<a name="l05448"></a>05448                     parser-&gt;delayed_line = <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>;
<a name="l05449"></a>05449                     parser-&gt;delayed_col = (int)(parser-&gt;tokp - <a class="code" href="../../d5/d11/ripper_8c.html#a8008dcfc6e95106d2ff2ddf9068aff5b">lex_pbeg</a>);
<a name="l05450"></a>05450                 }
<a name="l05451"></a>05451                 <span class="keywordflow">else</span> {
<a name="l05452"></a>05452                     <a class="code" href="../../db/d2e/intern_8h.html#a4dff49e6d9aa925fd94fc5100b3c399b">rb_str_buf_cat</a>(parser-&gt;delayed,
<a name="l05453"></a>05453                                    parser-&gt;tokp, <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a> - parser-&gt;tokp);
<a name="l05454"></a>05454                 }
<a name="l05455"></a>05455             }
<a name="l05456"></a>05456 <span class="preprocessor">#endif</span>
<a name="l05457"></a>05457 <span class="preprocessor"></span>            <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ac30c8380d57795e0f0d7f0e68bd9f6b3">heredoc_end</a> &gt; 0) {
<a name="l05458"></a>05458                 <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a> = <a class="code" href="../../d5/d11/ripper_8c.html#ac30c8380d57795e0f0d7f0e68bd9f6b3">heredoc_end</a>;
<a name="l05459"></a>05459                 <a class="code" href="../../d5/d11/ripper_8c.html#ac30c8380d57795e0f0d7f0e68bd9f6b3">heredoc_end</a> = 0;
<a name="l05460"></a>05460             }
<a name="l05461"></a>05461             <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>++;
<a name="l05462"></a>05462             parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a350850a9fb3c7141370fafec1b2d352e">line_count</a>++;
<a name="l05463"></a>05463             <a class="code" href="../../d5/d11/ripper_8c.html#a8008dcfc6e95106d2ff2ddf9068aff5b">lex_pbeg</a> = <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> = <a class="code" href="../../d8/df4/generator_8h.html#aa0c7097c0d82c8372072fbab5a604e39">RSTRING_PTR</a>(v);
<a name="l05464"></a>05464             <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a> = <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> + <a class="code" href="../../d8/df4/generator_8h.html#a1661e63c26c5cbeef7217d05b0f33942">RSTRING_LEN</a>(v);
<a name="l05465"></a>05465             <a class="code" href="../../d5/d11/ripper_8c.html#acf3bf78187c7dfbba241b27d1110b531">ripper_flush</a>(parser);
<a name="l05466"></a>05466             <a class="code" href="../../d5/d11/ripper_8c.html#ada3e2d92f1cfb779d4ec3be8cf58c76b">lex_lastline</a> = v;
<a name="l05467"></a>05467         }
<a name="l05468"></a>05468     }
<a name="l05469"></a>05469     c = (<span class="keywordtype">unsigned</span> char)*<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>++;
<a name="l05470"></a>05470     <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;\r&apos;</span> &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#aa2f8bef78fbbbce2cc6e7fd364a365be">peek</a>(<span class="charliteral">&apos;\n&apos;</span>)) {
<a name="l05471"></a>05471         <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>++;
<a name="l05472"></a>05472         c = <span class="charliteral">&apos;\n&apos;</span>;
<a name="l05473"></a>05473     }
<a name="l05474"></a>05474 
<a name="l05475"></a>05475     <span class="keywordflow">return</span> c;
<a name="l05476"></a>05476 }
<a name="l05477"></a>05477 
<a name="l05478"></a>05478 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l05479"></a>05479 <a class="code" href="../../d7/dc0/parse_8y.html#abf1eaa7681b3ca909844f53f3064a2ec">parser_pushback</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keywordtype">int</span> c)
<a name="l05480"></a>05480 {
<a name="l05481"></a>05481     <span class="keywordflow">if</span> (c == -1) <span class="keywordflow">return</span>;
<a name="l05482"></a>05482     <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>--;
<a name="l05483"></a>05483     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> &gt; <a class="code" href="../../d5/d11/ripper_8c.html#a8008dcfc6e95106d2ff2ddf9068aff5b">lex_pbeg</a> &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>[0] == <span class="charliteral">&apos;\n&apos;</span> &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>[-1] == <span class="charliteral">&apos;\r&apos;</span>) {
<a name="l05484"></a>05484         <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>--;
<a name="l05485"></a>05485     }
<a name="l05486"></a>05486 }
<a name="l05487"></a>05487 
<a name="l05488"></a><a class="code" href="../../d7/dc0/parse_8y.html#a9f3d555fce5f3d7aea60997fa65a34f9">05488</a> <span class="preprocessor">#define was_bol() (lex_p == lex_pbeg + 1)</span>
<a name="l05489"></a>05489 <span class="preprocessor"></span>
<a name="l05490"></a>05490 <span class="preprocessor">#define tokfix() (tokenbuf[tokidx]=&apos;\0&apos;)</span>
<a name="l05491"></a>05491 <span class="preprocessor"></span><span class="preprocessor">#define tok() tokenbuf</span>
<a name="l05492"></a>05492 <span class="preprocessor"></span><span class="preprocessor">#define toklen() tokidx</span>
<a name="l05493"></a>05493 <span class="preprocessor"></span><span class="preprocessor">#define toklast() (tokidx&gt;0?tokenbuf[tokidx-1]:0)</span>
<a name="l05494"></a><a class="code" href="../../d7/dc0/parse_8y.html#a6a520c2087f1fd7ac16d02aced0e4f7f">05494</a> <span class="preprocessor"></span>
<a name="l05495"></a>05495 <span class="keyword">static</span> <span class="keywordtype">char</span>*
<a name="l05496"></a>05496 <a class="code" href="../../d7/dc0/parse_8y.html#a5bf31317da0ef7282dedbda8246e9aca">parser_newtok</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l05497"></a>05497 {
<a name="l05498"></a>05498     <a class="code" href="../../d5/d11/ripper_8c.html#a5c08826e166598d221e18905683c3524">tokidx</a> = 0;
<a name="l05499"></a>05499     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#aad54a49f05fafe90be98ca0fe39cc80c">tokenbuf</a>) {
<a name="l05500"></a>05500         <a class="code" href="../../d5/d11/ripper_8c.html#a2089f1da45d11a47c122b65dc1eaf9fb">toksiz</a> = 60;
<a name="l05501"></a>05501         <a class="code" href="../../d5/d11/ripper_8c.html#aad54a49f05fafe90be98ca0fe39cc80c">tokenbuf</a> = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a79041aa2bc7439c11906a86f82a52eb6">ALLOC_N</a>(<span class="keywordtype">char</span>, 60);
<a name="l05502"></a>05502     }
<a name="l05503"></a>05503     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a2089f1da45d11a47c122b65dc1eaf9fb">toksiz</a> &gt; 4096) {
<a name="l05504"></a>05504         <a class="code" href="../../d5/d11/ripper_8c.html#a2089f1da45d11a47c122b65dc1eaf9fb">toksiz</a> = 60;
<a name="l05505"></a>05505         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a5160cad2d7d090e4d2e8803f1ba5ee3c">REALLOC_N</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aad54a49f05fafe90be98ca0fe39cc80c">tokenbuf</a>, <span class="keywordtype">char</span>, 60);
<a name="l05506"></a>05506     }
<a name="l05507"></a>05507     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#aad54a49f05fafe90be98ca0fe39cc80c">tokenbuf</a>;
<a name="l05508"></a>05508 }
<a name="l05509"></a>05509 
<a name="l05510"></a>05510 <span class="keyword">static</span> <span class="keywordtype">char</span> *
<a name="l05511"></a>05511 <a class="code" href="../../d7/dc0/parse_8y.html#ab831e47151b420de51e0f8270db92d1b">parser_tokspace</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keywordtype">int</span> n)
<a name="l05512"></a>05512 {
<a name="l05513"></a>05513     <a class="code" href="../../d5/d11/ripper_8c.html#a5c08826e166598d221e18905683c3524">tokidx</a> += n;
<a name="l05514"></a>05514 
<a name="l05515"></a>05515     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a5c08826e166598d221e18905683c3524">tokidx</a> &gt;= <a class="code" href="../../d5/d11/ripper_8c.html#a2089f1da45d11a47c122b65dc1eaf9fb">toksiz</a>) {
<a name="l05516"></a>05516         <span class="keywordflow">do</span> {<a class="code" href="../../d5/d11/ripper_8c.html#a2089f1da45d11a47c122b65dc1eaf9fb">toksiz</a> *= 2;} <span class="keywordflow">while</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a2089f1da45d11a47c122b65dc1eaf9fb">toksiz</a> &lt; <a class="code" href="../../d5/d11/ripper_8c.html#a5c08826e166598d221e18905683c3524">tokidx</a>);
<a name="l05517"></a>05517         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a5160cad2d7d090e4d2e8803f1ba5ee3c">REALLOC_N</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aad54a49f05fafe90be98ca0fe39cc80c">tokenbuf</a>, <span class="keywordtype">char</span>, <a class="code" href="../../d5/d11/ripper_8c.html#a2089f1da45d11a47c122b65dc1eaf9fb">toksiz</a>);
<a name="l05518"></a>05518     }
<a name="l05519"></a>05519     <span class="keywordflow">return</span> &amp;<a class="code" href="../../d5/d11/ripper_8c.html#aad54a49f05fafe90be98ca0fe39cc80c">tokenbuf</a>[<a class="code" href="../../d5/d11/ripper_8c.html#a5c08826e166598d221e18905683c3524">tokidx</a>-n];
<a name="l05520"></a>05520 }
<a name="l05521"></a>05521 
<a name="l05522"></a>05522 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l05523"></a>05523 <a class="code" href="../../d7/dc0/parse_8y.html#adba953be2ada60fb6f1a4e210385ab6f">parser_tokadd</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keywordtype">int</span> c)
<a name="l05524"></a>05524 {
<a name="l05525"></a>05525     <a class="code" href="../../d5/d11/ripper_8c.html#aad54a49f05fafe90be98ca0fe39cc80c">tokenbuf</a>[<a class="code" href="../../d5/d11/ripper_8c.html#a5c08826e166598d221e18905683c3524">tokidx</a>++] = (char)c;
<a name="l05526"></a>05526     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a5c08826e166598d221e18905683c3524">tokidx</a> &gt;= <a class="code" href="../../d5/d11/ripper_8c.html#a2089f1da45d11a47c122b65dc1eaf9fb">toksiz</a>) {
<a name="l05527"></a>05527         <a class="code" href="../../d5/d11/ripper_8c.html#a2089f1da45d11a47c122b65dc1eaf9fb">toksiz</a> *= 2;
<a name="l05528"></a>05528         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a5160cad2d7d090e4d2e8803f1ba5ee3c">REALLOC_N</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aad54a49f05fafe90be98ca0fe39cc80c">tokenbuf</a>, <span class="keywordtype">char</span>, <a class="code" href="../../d5/d11/ripper_8c.html#a2089f1da45d11a47c122b65dc1eaf9fb">toksiz</a>);
<a name="l05529"></a>05529     }
<a name="l05530"></a>05530 }
<a name="l05531"></a>05531 
<a name="l05532"></a>05532 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l05533"></a>05533 <a class="code" href="../../d7/dc0/parse_8y.html#a8eab06aeb181228b855d138fc07d0bf2">parser_tok_hex</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keywordtype">size_t</span> *numlen)
<a name="l05534"></a>05534 {
<a name="l05535"></a>05535     <span class="keywordtype">int</span> c;
<a name="l05536"></a>05536 
<a name="l05537"></a>05537     c = <a class="code" href="../../d8/d3c/util_8h.html#abcdee8986759d1b02072d01ab9462213">scan_hex</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>, 2, numlen);
<a name="l05538"></a>05538     <span class="keywordflow">if</span> (!*numlen) {
<a name="l05539"></a>05539         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;invalid hex escape&quot;</span>);
<a name="l05540"></a>05540         <span class="keywordflow">return</span> 0;
<a name="l05541"></a>05541     }
<a name="l05542"></a>05542     <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> += *numlen;
<a name="l05543"></a>05543     <span class="keywordflow">return</span> c;
<a name="l05544"></a>05544 }
<a name="l05545"></a>05545 
<a name="l05546"></a>05546 <span class="preprocessor">#define tokcopy(n) memcpy(tokspace(n), lex_p - (n), (n))</span>
<a name="l05547"></a>05547 <span class="preprocessor"></span>
<a name="l05548"></a>05548 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l05549"></a>05549 <a class="code" href="../../d7/dc0/parse_8y.html#aaa9a4cf453cefcd2ac75a38c7779e93a">parser_tokadd_utf8</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> **encp,
<a name="l05550"></a>05550                    <span class="keywordtype">int</span> string_literal, <span class="keywordtype">int</span> symbol_literal, <span class="keywordtype">int</span> regexp_literal)
<a name="l05551"></a>05551 {
<a name="l05552"></a><a class="code" href="../../d7/dc0/parse_8y.html#af9257ff71dbc0cd8c0598e9128c94ffd">05552</a>     <span class="comment">/*</span>
<a name="l05553"></a>05553 <span class="comment">     * If string_literal is true, then we allow multiple codepoints</span>
<a name="l05554"></a>05554 <span class="comment">     * in \u{}, and add the codepoints to the current token.</span>
<a name="l05555"></a>05555 <span class="comment">     * Otherwise we&apos;re parsing a character literal and return a single</span>
<a name="l05556"></a>05556 <span class="comment">     * codepoint without adding it</span>
<a name="l05557"></a>05557 <span class="comment">     */</span>
<a name="l05558"></a>05558 
<a name="l05559"></a>05559     <span class="keywordtype">int</span> codepoint;
<a name="l05560"></a>05560     <span class="keywordtype">size_t</span> numlen;
<a name="l05561"></a>05561 
<a name="l05562"></a>05562     <span class="keywordflow">if</span> (regexp_literal) { <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;\\&apos;</span>); <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;u&apos;</span>); }
<a name="l05563"></a>05563 
<a name="l05564"></a>05564     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#aa2f8bef78fbbbce2cc6e7fd364a365be">peek</a>(<span class="charliteral">&apos;{&apos;</span>)) {  <span class="comment">/* handle \u{...} form */</span>
<a name="l05565"></a>05565         <span class="keywordflow">do</span> {
<a name="l05566"></a><a class="code" href="../../d7/dc0/parse_8y.html#ac2a0def81c56bd669d9bc6d9a247c6e3">05566</a>             <span class="keywordflow">if</span> (regexp_literal) { <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(*<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>); }
<a name="l05567"></a>05567             <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l05568"></a>05568             codepoint = <a class="code" href="../../d8/d3c/util_8h.html#abcdee8986759d1b02072d01ab9462213">scan_hex</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>, 6, &amp;numlen);
<a name="l05569"></a>05569             <span class="keywordflow">if</span> (numlen == 0)  {
<a name="l05570"></a>05570                 <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;invalid Unicode escape&quot;</span>);
<a name="l05571"></a><a class="code" href="../../d7/dc0/parse_8y.html#ae5affcbf9c777bc7b399492310f24e7e">05571</a>                 <span class="keywordflow">return</span> 0;
<a name="l05572"></a>05572             }
<a name="l05573"></a>05573             <span class="keywordflow">if</span> (codepoint &gt; 0x10ffff) {
<a name="l05574"></a>05574                 <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;invalid Unicode codepoint (too large)&quot;</span>);
<a name="l05575"></a>05575                 <span class="keywordflow">return</span> 0;
<a name="l05576"></a>05576             }
<a name="l05577"></a>05577             <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> += numlen;
<a name="l05578"></a>05578             <span class="keywordflow">if</span> (regexp_literal) {
<a name="l05579"></a>05579                 <a class="code" href="../../d5/d11/ripper_8c.html#a3ec6329b8e5cfbee9a64cf3107046130">tokcopy</a>((<span class="keywordtype">int</span>)numlen);
<a name="l05580"></a>05580             }
<a name="l05581"></a>05581             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (codepoint &gt;= 0x80) {
<a name="l05582"></a>05582                 *encp = <a class="code" href="../../d5/d11/ripper_8c.html#a54fdc2a541385be6e404ff12c5a4404b">UTF8_ENC</a>();
<a name="l05583"></a>05583                 <span class="keywordflow">if</span> (string_literal) <a class="code" href="../../d5/d11/ripper_8c.html#a0b81155c789c321756eabfef906ab16b">tokaddmbc</a>(codepoint, *encp);
<a name="l05584"></a>05584             }
<a name="l05585"></a><a class="code" href="../../d7/dc0/parse_8y.html#a07ba221681602572070e272542eca75e">05585</a>             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (string_literal) {
<a name="l05586"></a>05586                 <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(codepoint);
<a name="l05587"></a>05587             }
<a name="l05588"></a>05588         } <span class="keywordflow">while</span> (string_literal &amp;&amp; (<a class="code" href="../../d5/d11/ripper_8c.html#aa2f8bef78fbbbce2cc6e7fd364a365be">peek</a>(<span class="charliteral">&apos; &apos;</span>) || <a class="code" href="../../d5/d11/ripper_8c.html#aa2f8bef78fbbbce2cc6e7fd364a365be">peek</a>(<span class="charliteral">&apos;\t&apos;</span>)));
<a name="l05589"></a>05589 
<a name="l05590"></a>05590         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#aa2f8bef78fbbbce2cc6e7fd364a365be">peek</a>(<span class="charliteral">&apos;}&apos;</span>)) {
<a name="l05591"></a>05591             <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;unterminated Unicode escape&quot;</span>);
<a name="l05592"></a>05592             <span class="keywordflow">return</span> 0;
<a name="l05593"></a>05593         }
<a name="l05594"></a>05594 
<a name="l05595"></a>05595         <span class="keywordflow">if</span> (regexp_literal) { <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;}&apos;</span>); }
<a name="l05596"></a>05596         <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l05597"></a><a class="code" href="../../d7/dc0/parse_8y.html#ac7e10b9a1b505e80fe3f2fc7e56f72b5">05597</a>     }
<a name="l05598"></a>05598     <span class="keywordflow">else</span> {                      <span class="comment">/* handle \uxxxx form */</span>
<a name="l05599"></a>05599         codepoint = <a class="code" href="../../d8/d3c/util_8h.html#abcdee8986759d1b02072d01ab9462213">scan_hex</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>, 4, &amp;numlen);
<a name="l05600"></a>05600         <span class="keywordflow">if</span> (numlen &lt; 4) {
<a name="l05601"></a>05601             <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;invalid Unicode escape&quot;</span>);
<a name="l05602"></a>05602             <span class="keywordflow">return</span> 0;
<a name="l05603"></a>05603         }
<a name="l05604"></a>05604         <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> += 4;
<a name="l05605"></a>05605         <span class="keywordflow">if</span> (regexp_literal) {
<a name="l05606"></a>05606             <a class="code" href="../../d5/d11/ripper_8c.html#a3ec6329b8e5cfbee9a64cf3107046130">tokcopy</a>(4);
<a name="l05607"></a>05607         }
<a name="l05608"></a>05608         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (codepoint &gt;= 0x80) {
<a name="l05609"></a><a class="code" href="../../d7/dc0/parse_8y.html#abe34c55766320b12809a6e454711fb55">05609</a>             *encp = <a class="code" href="../../d5/d11/ripper_8c.html#a54fdc2a541385be6e404ff12c5a4404b">UTF8_ENC</a>();
<a name="l05610"></a>05610             <span class="keywordflow">if</span> (string_literal) <a class="code" href="../../d5/d11/ripper_8c.html#a0b81155c789c321756eabfef906ab16b">tokaddmbc</a>(codepoint, *encp);
<a name="l05611"></a>05611         }
<a name="l05612"></a>05612         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (string_literal) {
<a name="l05613"></a>05613             <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(codepoint);
<a name="l05614"></a>05614         }
<a name="l05615"></a>05615     }
<a name="l05616"></a>05616 
<a name="l05617"></a>05617     <span class="keywordflow">return</span> codepoint;
<a name="l05618"></a>05618 }
<a name="l05619"></a>05619 
<a name="l05620"></a><a class="code" href="../../d7/dc0/parse_8y.html#a3fa006fcbdddd5d29ce35d72e4f86e84">05620</a> <span class="preprocessor">#define ESCAPE_CONTROL 1</span>
<a name="l05621"></a>05621 <span class="preprocessor"></span><span class="preprocessor">#define ESCAPE_META    2</span>
<a name="l05622"></a>05622 <span class="preprocessor"></span>
<a name="l05623"></a>05623 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l05624"></a>05624 <a class="code" href="../../d7/dc0/parse_8y.html#a00e1405a2365cacaf2e2e4e83638da3f">parser_read_escape</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keywordtype">int</span> flags,
<a name="l05625"></a>05625                    <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> **encp)
<a name="l05626"></a>05626 {
<a name="l05627"></a><a class="code" href="../../d7/dc0/parse_8y.html#aed22ee33c00229e06e495e2a83c3e2f9">05627</a>     <span class="keywordtype">int</span> c;
<a name="l05628"></a>05628     <span class="keywordtype">size_t</span> numlen;
<a name="l05629"></a>05629 
<a name="l05630"></a>05630     <span class="keywordflow">switch</span> (c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) {
<a name="l05631"></a>05631       <span class="keywordflow">case</span> <span class="charliteral">&apos;\\&apos;</span>:        <span class="comment">/* Backslash */</span>
<a name="l05632"></a>05632         <span class="keywordflow">return</span> c;
<a name="l05633"></a>05633 
<a name="l05634"></a>05634       <span class="keywordflow">case</span> <span class="charliteral">&apos;n&apos;</span>: <span class="comment">/* newline */</span>
<a name="l05635"></a>05635         <span class="keywordflow">return</span> <span class="charliteral">&apos;\n&apos;</span>;
<a name="l05636"></a>05636 
<a name="l05637"></a>05637       <span class="keywordflow">case</span> <span class="charliteral">&apos;t&apos;</span>: <span class="comment">/* horizontal tab */</span>
<a name="l05638"></a>05638         <span class="keywordflow">return</span> <span class="charliteral">&apos;\t&apos;</span>;
<a name="l05639"></a>05639 
<a name="l05640"></a>05640       <span class="keywordflow">case</span> <span class="charliteral">&apos;r&apos;</span>: <span class="comment">/* carriage-return */</span>
<a name="l05641"></a>05641         <span class="keywordflow">return</span> <span class="charliteral">&apos;\r&apos;</span>;
<a name="l05642"></a>05642 
<a name="l05643"></a>05643       <span class="keywordflow">case</span> <span class="charliteral">&apos;f&apos;</span>: <span class="comment">/* form-feed */</span>
<a name="l05644"></a>05644         <span class="keywordflow">return</span> <span class="charliteral">&apos;\f&apos;</span>;
<a name="l05645"></a>05645 
<a name="l05646"></a>05646       <span class="keywordflow">case</span> <span class="charliteral">&apos;v&apos;</span>: <span class="comment">/* vertical tab */</span>
<a name="l05647"></a>05647         <span class="keywordflow">return</span> <span class="stringliteral">&apos;\13&apos;</span>;
<a name="l05648"></a>05648 
<a name="l05649"></a>05649       <span class="keywordflow">case</span> <span class="charliteral">&apos;a&apos;</span>: <span class="comment">/* alarm(bell) */</span>
<a name="l05650"></a>05650         <span class="keywordflow">return</span> <span class="charliteral">&apos;\007&apos;</span>;
<a name="l05651"></a>05651 
<a name="l05652"></a>05652       <span class="keywordflow">case</span> <span class="charliteral">&apos;e&apos;</span>: <span class="comment">/* escape */</span>
<a name="l05653"></a>05653         <span class="keywordflow">return</span> 033;
<a name="l05654"></a><a class="code" href="../../d7/dc0/parse_8y.html#aa12ee6ff49fed4c42b01edd8591d9e7e">05654</a> 
<a name="l05655"></a>05655       <span class="keywordflow">case</span> <span class="charliteral">&apos;0&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;1&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;2&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;3&apos;</span>: <span class="comment">/* octal constant */</span>
<a name="l05656"></a>05656       <span class="keywordflow">case</span> <span class="charliteral">&apos;4&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;5&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;6&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;7&apos;</span>:
<a name="l05657"></a>05657         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l05658"></a>05658         c = <a class="code" href="../../d8/d3c/util_8h.html#ae67d4c595940aae807ac889adf3428a1">scan_oct</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>, 3, &amp;numlen);
<a name="l05659"></a>05659         <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> += numlen;
<a name="l05660"></a>05660         <span class="keywordflow">return</span> c;
<a name="l05661"></a>05661 
<a name="l05662"></a>05662       <span class="keywordflow">case</span> <span class="charliteral">&apos;x&apos;</span>: <span class="comment">/* hex constant */</span>
<a name="l05663"></a>05663         c = <a class="code" href="../../d5/d11/ripper_8c.html#a0ef2d3af9b4d83add8e5489cfc3988d5">tok_hex</a>(&amp;numlen);
<a name="l05664"></a>05664         <span class="keywordflow">if</span> (numlen == 0) <span class="keywordflow">return</span> 0;
<a name="l05665"></a>05665         <span class="keywordflow">return</span> c;
<a name="l05666"></a>05666 
<a name="l05667"></a>05667       <span class="keywordflow">case</span> <span class="charliteral">&apos;b&apos;</span>: <span class="comment">/* backspace */</span>
<a name="l05668"></a>05668         <span class="keywordflow">return</span> <span class="charliteral">&apos;\010&apos;</span>;
<a name="l05669"></a>05669 
<a name="l05670"></a>05670       <span class="keywordflow">case</span> <span class="charliteral">&apos;s&apos;</span>: <span class="comment">/* space */</span>
<a name="l05671"></a>05671         <span class="keywordflow">return</span> <span class="charliteral">&apos; &apos;</span>;
<a name="l05672"></a>05672 
<a name="l05673"></a>05673       <span class="keywordflow">case</span> <span class="charliteral">&apos;M&apos;</span>:
<a name="l05674"></a>05674         <span class="keywordflow">if</span> (flags &amp; <a class="code" href="../../d5/d11/ripper_8c.html#acadd53369f5b5a20ff0b255e42cd7efc">ESCAPE_META</a>) <span class="keywordflow">goto</span> eof;
<a name="l05675"></a>05675         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) != <span class="charliteral">&apos;-&apos;</span>) {
<a name="l05676"></a><a class="code" href="../../d7/dc0/parse_8y.html#a367ec4ca6236a0afecad70f579a331c4">05676</a>             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l05677"></a>05677             <span class="keywordflow">goto</span> eof;
<a name="l05678"></a>05678         }
<a name="l05679"></a>05679         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;\\&apos;</span>) {
<a name="l05680"></a>05680             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#aa2f8bef78fbbbce2cc6e7fd364a365be">peek</a>(<span class="charliteral">&apos;u&apos;</span>)) <span class="keywordflow">goto</span> eof;
<a name="l05681"></a>05681             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a7b134e9bb5a5ab60833db1649abb92fb">read_escape</a>(flags|ESCAPE_META, encp) | 0x80;
<a name="l05682"></a>05682         }
<a name="l05683"></a>05683         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c == -1 || !<a class="code" href="../../de/de6/ruby_2ruby_8h.html#af96ff81718c3c27b342b5958fac6cb7e">ISASCII</a>(c)) <span class="keywordflow">goto</span> eof;
<a name="l05684"></a>05684         <span class="keywordflow">else</span> {
<a name="l05685"></a>05685             <span class="keywordflow">return</span> ((c &amp; 0xff) | 0x80);
<a name="l05686"></a>05686         }
<a name="l05687"></a><a class="code" href="../../d7/dc0/parse_8y.html#a0d7af8a92c4b0a07f71585584ef9634f">05687</a> 
<a name="l05688"></a><a class="code" href="../../d7/dc0/parse_8y.html#a71f8b6ffdc0cc58ffd989c3162fb2bcf">05688</a>       <span class="keywordflow">case</span> <span class="charliteral">&apos;C&apos;</span>:
<a name="l05689"></a><a class="code" href="../../d7/dc0/parse_8y.html#a5a006690edcc596a15c35451b3801764">05689</a>         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) != <span class="charliteral">&apos;-&apos;</span>) {
<a name="l05690"></a>05690             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l05691"></a>05691             <span class="keywordflow">goto</span> eof;
<a name="l05692"></a><a class="code" href="../../d7/dc0/parse_8y.html#a08e8655523da0ee5577db4eb12c8f101">05692</a>         }
<a name="l05693"></a>05693       <span class="keywordflow">case</span> <span class="charliteral">&apos;c&apos;</span>:
<a name="l05694"></a>05694         <span class="keywordflow">if</span> (flags &amp; <a class="code" href="../../d5/d11/ripper_8c.html#a39d5d8136e6acbd8dfb9d6a16537166c">ESCAPE_CONTROL</a>) <span class="keywordflow">goto</span> eof;
<a name="l05695"></a>05695         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>())== <span class="charliteral">&apos;\\&apos;</span>) {
<a name="l05696"></a>05696             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#aa2f8bef78fbbbce2cc6e7fd364a365be">peek</a>(<span class="charliteral">&apos;u&apos;</span>)) <span class="keywordflow">goto</span> eof;
<a name="l05697"></a>05697             c = <a class="code" href="../../d5/d11/ripper_8c.html#a7b134e9bb5a5ab60833db1649abb92fb">read_escape</a>(flags|ESCAPE_CONTROL, encp);
<a name="l05698"></a>05698         }
<a name="l05699"></a>05699         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;?&apos;</span>)
<a name="l05700"></a>05700             <span class="keywordflow">return</span> 0177;
<a name="l05701"></a>05701         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c == -1 || !<a class="code" href="../../de/de6/ruby_2ruby_8h.html#af96ff81718c3c27b342b5958fac6cb7e">ISASCII</a>(c)) <span class="keywordflow">goto</span> eof;
<a name="l05702"></a>05702         <span class="keywordflow">return</span> c &amp; 0x9f;
<a name="l05703"></a>05703 
<a name="l05704"></a>05704       eof:
<a name="l05705"></a>05705       <span class="keywordflow">case</span> -1:
<a name="l05706"></a>05706         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;Invalid escape character syntax&quot;</span>);
<a name="l05707"></a>05707         <span class="keywordflow">return</span> <span class="charliteral">&apos;\0&apos;</span>;
<a name="l05708"></a>05708 
<a name="l05709"></a>05709       <span class="keywordflow">default</span>:
<a name="l05710"></a>05710         <span class="keywordflow">return</span> c;
<a name="l05711"></a>05711     }
<a name="l05712"></a>05712 }
<a name="l05713"></a>05713 
<a name="l05714"></a>05714 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l05715"></a>05715 <a class="code" href="../../d7/dc0/parse_8y.html#ad79f377a2a23447dab44352536d359f0">parser_tokaddmbc</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keywordtype">int</span> c, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc)
<a name="l05716"></a>05716 {
<a name="l05717"></a>05717     <span class="keywordtype">int</span> len = <a class="code" href="../../d5/db5/encoding_8c.html#ae47c32c86d8d7d18127c9a1b2eb8c325">rb_enc_codelen</a>(c, enc);
<a name="l05718"></a>05718     <a class="code" href="../../d5/de3/encoding_8h.html#a243639504d867c0a638be91db2d19db1">rb_enc_mbcput</a>(c, <a class="code" href="../../d5/d11/ripper_8c.html#a668cfea151c63e845fa1c2931e2a39ea">tokspace</a>(len), enc);
<a name="l05719"></a>05719 }
<a name="l05720"></a>05720 
<a name="l05721"></a>05721 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l05722"></a>05722 <a class="code" href="../../d7/dc0/parse_8y.html#a2b5d0ac0bc3a491bf38a37cc914484ea">parser_tokadd_escape</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> **encp)
<a name="l05723"></a>05723 {
<a name="l05724"></a>05724     <span class="keywordtype">int</span> c;
<a name="l05725"></a>05725     <span class="keywordtype">int</span> flags = 0;
<a name="l05726"></a>05726     <span class="keywordtype">size_t</span> numlen;
<a name="l05727"></a>05727 
<a name="l05728"></a>05728   first:
<a name="l05729"></a>05729     <span class="keywordflow">switch</span> (c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) {
<a name="l05730"></a>05730       <span class="keywordflow">case</span> <span class="charliteral">&apos;\n&apos;</span>:
<a name="l05731"></a>05731         <span class="keywordflow">return</span> 0;               <span class="comment">/* just ignore */</span>
<a name="l05732"></a>05732 
<a name="l05733"></a>05733       <span class="keywordflow">case</span> <span class="charliteral">&apos;0&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;1&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;2&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;3&apos;</span>: <span class="comment">/* octal constant */</span>
<a name="l05734"></a>05734       <span class="keywordflow">case</span> <span class="charliteral">&apos;4&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;5&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;6&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;7&apos;</span>:
<a name="l05735"></a>05735         {
<a name="l05736"></a>05736             <a class="code" href="../../d8/d3c/util_8h.html#a0a6004b00f3619b4486822f120e9adcb">ruby_scan_oct</a>(--<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>, 3, &amp;numlen);
<a name="l05737"></a>05737             <span class="keywordflow">if</span> (numlen == 0) <span class="keywordflow">goto</span> eof;
<a name="l05738"></a>05738             <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> += numlen;
<a name="l05739"></a>05739             <a class="code" href="../../d5/d11/ripper_8c.html#a3ec6329b8e5cfbee9a64cf3107046130">tokcopy</a>((<span class="keywordtype">int</span>)numlen + 1);
<a name="l05740"></a>05740         }
<a name="l05741"></a><a class="code" href="../../d7/dc0/parse_8y.html#a1e14a696180d36c0fc8d1cc0f4547381">05741</a>         <span class="keywordflow">return</span> 0;
<a name="l05742"></a>05742 
<a name="l05743"></a>05743       <span class="keywordflow">case</span> <span class="charliteral">&apos;x&apos;</span>: <span class="comment">/* hex constant */</span>
<a name="l05744"></a>05744         {
<a name="l05745"></a>05745             <a class="code" href="../../d5/d11/ripper_8c.html#a0ef2d3af9b4d83add8e5489cfc3988d5">tok_hex</a>(&amp;numlen);
<a name="l05746"></a>05746             <span class="keywordflow">if</span> (numlen == 0) <span class="keywordflow">return</span> -1;
<a name="l05747"></a>05747             <a class="code" href="../../d5/d11/ripper_8c.html#a3ec6329b8e5cfbee9a64cf3107046130">tokcopy</a>((<span class="keywordtype">int</span>)numlen + 2);
<a name="l05748"></a>05748         }
<a name="l05749"></a>05749         <span class="keywordflow">return</span> 0;
<a name="l05750"></a>05750 
<a name="l05751"></a>05751       <span class="keywordflow">case</span> <span class="charliteral">&apos;M&apos;</span>:
<a name="l05752"></a>05752         <span class="keywordflow">if</span> (flags &amp; ESCAPE_META) <span class="keywordflow">goto</span> eof;
<a name="l05753"></a>05753         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) != <span class="charliteral">&apos;-&apos;</span>) {
<a name="l05754"></a>05754             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l05755"></a>05755             <span class="keywordflow">goto</span> eof;
<a name="l05756"></a>05756         }
<a name="l05757"></a>05757         <a class="code" href="../../d5/d11/ripper_8c.html#a3ec6329b8e5cfbee9a64cf3107046130">tokcopy</a>(3);
<a name="l05758"></a>05758         flags |= ESCAPE_META;
<a name="l05759"></a>05759         <span class="keywordflow">goto</span> escaped;
<a name="l05760"></a>05760 
<a name="l05761"></a>05761       <span class="keywordflow">case</span> <span class="charliteral">&apos;C&apos;</span>:
<a name="l05762"></a>05762         <span class="keywordflow">if</span> (flags &amp; ESCAPE_CONTROL) <span class="keywordflow">goto</span> eof;
<a name="l05763"></a>05763         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) != <span class="charliteral">&apos;-&apos;</span>) {
<a name="l05764"></a>05764             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l05765"></a><a class="code" href="../../d7/dc0/parse_8y.html#a9cf42c81b8c1ae439bfc5c76c4832cd5">05765</a>             <span class="keywordflow">goto</span> eof;
<a name="l05766"></a>05766         }
<a name="l05767"></a>05767         <a class="code" href="../../d5/d11/ripper_8c.html#a3ec6329b8e5cfbee9a64cf3107046130">tokcopy</a>(3);
<a name="l05768"></a>05768         <span class="keywordflow">goto</span> escaped;
<a name="l05769"></a>05769 
<a name="l05770"></a>05770       <span class="keywordflow">case</span> <span class="charliteral">&apos;c&apos;</span>:
<a name="l05771"></a>05771         <span class="keywordflow">if</span> (flags &amp; ESCAPE_CONTROL) <span class="keywordflow">goto</span> eof;
<a name="l05772"></a>05772         <a class="code" href="../../d5/d11/ripper_8c.html#a3ec6329b8e5cfbee9a64cf3107046130">tokcopy</a>(2);
<a name="l05773"></a>05773         flags |= ESCAPE_CONTROL;
<a name="l05774"></a>05774       escaped:
<a name="l05775"></a>05775         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;\\&apos;</span>) {
<a name="l05776"></a>05776             <span class="keywordflow">goto</span> first;
<a name="l05777"></a>05777         }
<a name="l05778"></a>05778         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c == -1) <span class="keywordflow">goto</span> eof;
<a name="l05779"></a>05779         <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l05780"></a>05780         <span class="keywordflow">return</span> 0;
<a name="l05781"></a>05781 
<a name="l05782"></a>05782       eof:
<a name="l05783"></a><a class="code" href="../../d7/dc0/parse_8y.html#a9f7b98b2be9bd5c600c9aeacf97038e7">05783</a>       <span class="keywordflow">case</span> -1:
<a name="l05784"></a>05784         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;Invalid escape character syntax&quot;</span>);
<a name="l05785"></a>05785         <span class="keywordflow">return</span> -1;
<a name="l05786"></a>05786 
<a name="l05787"></a>05787       <span class="keywordflow">default</span>:
<a name="l05788"></a>05788         <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;\\&apos;</span>);
<a name="l05789"></a>05789         <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l05790"></a>05790     }
<a name="l05791"></a>05791     <span class="keywordflow">return</span> 0;
<a name="l05792"></a>05792 }
<a name="l05793"></a>05793 
<a name="l05794"></a>05794 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l05795"></a>05795 <a class="code" href="../../d7/dc0/parse_8y.html#ab312572aebd9d4f8bdb8ebb10756f520">parser_regx_options</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l05796"></a>05796 {
<a name="l05797"></a>05797     <span class="keywordtype">int</span> kcode = 0;
<a name="l05798"></a>05798     <span class="keywordtype">int</span> kopt = 0;
<a name="l05799"></a>05799     <span class="keywordtype">int</span> options = 0;
<a name="l05800"></a>05800     <span class="keywordtype">int</span> c, opt, kc;
<a name="l05801"></a>05801 
<a name="l05802"></a>05802     <a class="code" href="../../d5/d11/ripper_8c.html#acf4744d9ea857f9df3d1d89e056b20b0">newtok</a>();
<a name="l05803"></a>05803     <span class="keywordflow">while</span> (c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>(), <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afe0bf9496b5e0ecf253fb86072ee7ecf">ISALPHA</a>(c)) {
<a name="l05804"></a>05804         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;o&apos;</span>) {
<a name="l05805"></a>05805             options |= RE_OPTION_ONCE;
<a name="l05806"></a>05806         }
<a name="l05807"></a>05807         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/de3/encoding_8h.html#a999a688744447acf7be194e642468cd3">rb_char_to_option_kcode</a>(c, &amp;opt, &amp;kc)) {
<a name="l05808"></a>05808             <span class="keywordflow">if</span> (kc &gt;= 0) {
<a name="l05809"></a>05809                 <span class="keywordflow">if</span> (kc != <a class="code" href="../../d5/db5/encoding_8c.html#a4a5d866d19763996332e622208d71e9f">rb_ascii8bit_encindex</a>()) kcode = c;
<a name="l05810"></a>05810                 kopt = opt;
<a name="l05811"></a>05811             }
<a name="l05812"></a>05812             <span class="keywordflow">else</span> {
<a name="l05813"></a>05813                 options |= opt;
<a name="l05814"></a>05814             }
<a name="l05815"></a>05815         }
<a name="l05816"></a>05816         <span class="keywordflow">else</span> {
<a name="l05817"></a>05817             <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l05818"></a>05818         }
<a name="l05819"></a>05819     }
<a name="l05820"></a><a class="code" href="../../d7/dc0/parse_8y.html#a88be59aea34c03bdffdfc880a9e072d9">05820</a>     options |= kopt;
<a name="l05821"></a>05821     <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l05822"></a>05822     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a69cc32ebd541279dcf93b82393380233">toklen</a>()) {
<a name="l05823"></a>05823         <a class="code" href="../../d5/d11/ripper_8c.html#a4cb8635c421d3ada48f4c1a5ecfe6997">tokfix</a>();
<a name="l05824"></a>05824         <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;unknown regexp option%s - %s&quot;</span>,
<a name="l05825"></a>05825                       <a class="code" href="../../d5/d11/ripper_8c.html#a69cc32ebd541279dcf93b82393380233">toklen</a>() &gt; 1 ? <span class="stringliteral">&quot;s&quot;</span> : <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>());
<a name="l05826"></a>05826     }
<a name="l05827"></a>05827     <span class="keywordflow">return</span> options | <a class="code" href="../../d5/d11/ripper_8c.html#a017671f5017e78dc4d0c92a6f61ab859">RE_OPTION_ENCODING</a>(kcode);
<a name="l05828"></a>05828 }
<a name="l05829"></a>05829 
<a name="l05830"></a>05830 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l05831"></a>05831 <a class="code" href="../../d7/dc0/parse_8y.html#a520b5c6e4d2cdbdd764de2a4a0782570">dispose_string</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str)
<a name="l05832"></a>05832 {
<a name="l05833"></a>05833     <span class="comment">/* TODO: should use another API? */</span>
<a name="l05834"></a>05834     <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a1d4c05021aacd8cab989ff60f95ebe2d">RBASIC</a>(str)-&gt;flags &amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a38c3130e65fdd7e20a3e3cb2d0f54299">RSTRING_NOEMBED</a>)
<a name="l05835"></a>05835         <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(<a class="code" href="../../d8/df4/generator_8h.html#aa0c7097c0d82c8372072fbab5a604e39">RSTRING_PTR</a>(str));
<a name="l05836"></a>05836     <a class="code" href="../../d8/d16/gc_8c.html#a53016811c87ff4c3ea839c9e85a9a9a4">rb_gc_force_recycle</a>(str);
<a name="l05837"></a>05837 }
<a name="l05838"></a><a class="code" href="../../d7/dc0/parse_8y.html#ad8d53f55c03b9e2b4c99fe4cba9da58f">05838</a> 
<a name="l05839"></a>05839 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l05840"></a>05840 <a class="code" href="../../d7/dc0/parse_8y.html#a50fd547bcb35e9f2943638d66299c8a8">parser_tokadd_mbchar</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keywordtype">int</span> c)
<a name="l05841"></a>05841 {
<a name="l05842"></a>05842     <span class="keywordtype">int</span> len = <a class="code" href="../../d5/d11/ripper_8c.html#a99a53301fa04e6eb1b2f15cf11c63bb5">parser_precise_mbclen</a>();
<a name="l05843"></a>05843     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/de3/encoding_8h.html#ac3dcc15c5ed42d6590e1c1f91b74165c">MBCLEN_CHARFOUND_P</a>(len)) {
<a name="l05844"></a>05844         <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;invalid multibyte char (%s)&quot;</span>, <a class="code" href="../../d5/d11/ripper_8c.html#aa72172bec2f824525eb35bc05d102e55">parser_encoding_name</a>());
<a name="l05845"></a>05845         <span class="keywordflow">return</span> -1;
<a name="l05846"></a>05846     }
<a name="l05847"></a>05847     <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l05848"></a>05848     <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> += --len;
<a name="l05849"></a>05849     <span class="keywordflow">if</span> (len &gt; 0) <a class="code" href="../../d5/d11/ripper_8c.html#a3ec6329b8e5cfbee9a64cf3107046130">tokcopy</a>(len);
<a name="l05850"></a>05850     <span class="keywordflow">return</span> c;
<a name="l05851"></a>05851 }
<a name="l05852"></a>05852 
<a name="l05853"></a>05853 <span class="preprocessor">#define tokadd_mbchar(c) parser_tokadd_mbchar(parser, (c))</span>
<a name="l05854"></a>05854 <span class="preprocessor"></span>
<a name="l05855"></a>05855 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l05856"></a><a class="code" href="../../d7/dc0/parse_8y.html#aa40bd95d9da649c0167e4f8dceb828d0">05856</a> <a class="code" href="../../d7/dc0/parse_8y.html#a8906e75085b9659c52e26e7bd75cce24">parser_tokadd_string</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser,
<a name="l05857"></a>05857                      <span class="keywordtype">int</span> <a class="code" href="../../dc/dd1/ossl__ssl_8c.html#a131c09b7f9c9a0b52e6f79f651cfd574">func</a>, <span class="keywordtype">int</span> <a class="code" href="../../d3/d09/ripper_8y.html#a0c940d9e4ce4cfee55d7ccf714a1303d">term</a>, <span class="keywordtype">int</span> paren, <span class="keywordtype">long</span> *nest,
<a name="l05858"></a>05858                      <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> **encp)
<a name="l05859"></a>05859 {
<a name="l05860"></a>05860     <span class="keywordtype">int</span> c;
<a name="l05861"></a>05861     <span class="keywordtype">int</span> has_nonascii = 0;
<a name="l05862"></a>05862     <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc = *encp;
<a name="l05863"></a>05863     <span class="keywordtype">char</span> *errbuf = 0;
<a name="l05864"></a>05864     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> mixed_msg[] = <span class="stringliteral">&quot;%s mixed within %s source&quot;</span>;
<a name="l05865"></a>05865 
<a name="l05866"></a>05866 <span class="preprocessor">#define mixed_error(enc1, enc2) if (!errbuf) {  \</span>
<a name="l05867"></a>05867 <span class="preprocessor">        size_t len = sizeof(mixed_msg) - 4;     \</span>
<a name="l05868"></a>05868 <span class="preprocessor">        len += strlen(rb_enc_name(enc1));       \</span>
<a name="l05869"></a>05869 <span class="preprocessor">        len += strlen(rb_enc_name(enc2));       \</span>
<a name="l05870"></a>05870 <span class="preprocessor">        errbuf = ALLOCA_N(char, len);           \</span>
<a name="l05871"></a>05871 <span class="preprocessor">        snprintf(errbuf, len, mixed_msg,        \</span>
<a name="l05872"></a>05872 <span class="preprocessor">                 rb_enc_name(enc1),             \</span>
<a name="l05873"></a>05873 <span class="preprocessor">                 rb_enc_name(enc2));            \</span>
<a name="l05874"></a><a class="code" href="../../d7/dc0/parse_8y.html#a92d63d0bb25c90837667d3e3d3a82362">05874</a> <span class="preprocessor">        yyerror(errbuf);                        \</span>
<a name="l05875"></a>05875 <span class="preprocessor">    }</span>
<a name="l05876"></a>05876 <span class="preprocessor"></span><span class="preprocessor">#define mixed_escape(beg, enc1, enc2) do {      \</span>
<a name="l05877"></a>05877 <span class="preprocessor">        const char *pos = lex_p;                \</span>
<a name="l05878"></a>05878 <span class="preprocessor">        lex_p = (beg);                          \</span>
<a name="l05879"></a>05879 <span class="preprocessor">        mixed_error((enc1), (enc2));            \</span>
<a name="l05880"></a>05880 <span class="preprocessor">        lex_p = pos;                            \</span>
<a name="l05881"></a>05881 <span class="preprocessor">    } while (0)</span>
<a name="l05882"></a>05882 <span class="preprocessor"></span>
<a name="l05883"></a>05883     <span class="keywordflow">while</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) != -1) {
<a name="l05884"></a>05884         <span class="keywordflow">if</span> (paren &amp;&amp; c == paren) {
<a name="l05885"></a>05885             ++*nest;
<a name="l05886"></a>05886         }
<a name="l05887"></a>05887         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c == term) {
<a name="l05888"></a>05888             <span class="keywordflow">if</span> (!nest || !*nest) {
<a name="l05889"></a>05889                 <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l05890"></a>05890                 <span class="keywordflow">break</span>;
<a name="l05891"></a>05891             }
<a name="l05892"></a>05892             --*nest;
<a name="l05893"></a>05893         }
<a name="l05894"></a>05894         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((func &amp; <a class="code" href="../../d5/d11/ripper_8c.html#aefdd60ff387e322710ff80f16bedbeaa">STR_FUNC_EXPAND</a>) &amp;&amp; c == <span class="charliteral">&apos;#&apos;</span> &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> &lt; <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a>) {
<a name="l05895"></a>05895             <span class="keywordtype">int</span> c2 = *<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>;
<a name="l05896"></a>05896             <span class="keywordflow">if</span> (c2 == <span class="charliteral">&apos;$&apos;</span> || c2 == <span class="charliteral">&apos;@&apos;</span> || c2 == <span class="charliteral">&apos;{&apos;</span>) {
<a name="l05897"></a>05897                 <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l05898"></a>05898                 <span class="keywordflow">break</span>;
<a name="l05899"></a>05899             }
<a name="l05900"></a>05900         }
<a name="l05901"></a>05901         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;\\&apos;</span>) {
<a name="l05902"></a>05902             <span class="keyword">const</span> <span class="keywordtype">char</span> *beg = <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> - 1;
<a name="l05903"></a>05903             c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l05904"></a>05904             <span class="keywordflow">switch</span> (c) {
<a name="l05905"></a>05905               <span class="keywordflow">case</span> <span class="charliteral">&apos;\n&apos;</span>:
<a name="l05906"></a>05906                 <span class="keywordflow">if</span> (func &amp; <a class="code" href="../../d5/d11/ripper_8c.html#a1e43ae61ca7f1925ca9e34f9ffbabfc2">STR_FUNC_QWORDS</a>) <span class="keywordflow">break</span>;
<a name="l05907"></a>05907                 <span class="keywordflow">if</span> (func &amp; STR_FUNC_EXPAND) <span class="keywordflow">continue</span>;
<a name="l05908"></a>05908                 <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;\\&apos;</span>);
<a name="l05909"></a>05909                 <span class="keywordflow">break</span>;
<a name="l05910"></a>05910 
<a name="l05911"></a><a class="code" href="../../d7/dc0/parse_8y.html#afd27df195b5f0ee55348bca8ff1bb162">05911</a>               <span class="keywordflow">case</span> <span class="charliteral">&apos;\\&apos;</span>:
<a name="l05912"></a>05912                 <span class="keywordflow">if</span> (func &amp; <a class="code" href="../../d5/d11/ripper_8c.html#ab423d80af75c48750f2a236fced421b8">STR_FUNC_ESCAPE</a>) <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l05913"></a>05913                 <span class="keywordflow">break</span>;
<a name="l05914"></a>05914 
<a name="l05915"></a>05915               <span class="keywordflow">case</span> <span class="charliteral">&apos;u&apos;</span>:
<a name="l05916"></a>05916                 <span class="keywordflow">if</span> ((func &amp; STR_FUNC_EXPAND) == 0) {
<a name="l05917"></a><a class="code" href="../../d7/dc0/parse_8y.html#a9f793ce799cc66249aff5c6d9850c2d8">05917</a>                     <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;\\&apos;</span>);
<a name="l05918"></a><a class="code" href="../../d7/dc0/parse_8y.html#a233c00adc0fbd15ab3fa8d4fb2ea8458">05918</a>                     <span class="keywordflow">break</span>;
<a name="l05919"></a>05919                 }
<a name="l05920"></a>05920                 <a class="code" href="../../d7/dc0/parse_8y.html#aaa9a4cf453cefcd2ac75a38c7779e93a">parser_tokadd_utf8</a>(parser, &amp;enc, 1,
<a name="l05921"></a>05921                                    func &amp; <a class="code" href="../../d5/d11/ripper_8c.html#abb3433e9d5d8bb54d1731c2379ee48ff">STR_FUNC_SYMBOL</a>,
<a name="l05922"></a>05922                                    func &amp; <a class="code" href="../../d5/d11/ripper_8c.html#ad832f161067673ac6dfca392c45d77e7">STR_FUNC_REGEXP</a>);
<a name="l05923"></a>05923                 <span class="keywordflow">if</span> (has_nonascii &amp;&amp; enc != *encp) {
<a name="l05924"></a>05924                     <a class="code" href="../../d5/d11/ripper_8c.html#a94a7dcbbcdffe8f841c2a42d30b30bf3">mixed_escape</a>(beg, enc, *encp);
<a name="l05925"></a>05925                 }
<a name="l05926"></a>05926                 <span class="keywordflow">continue</span>;
<a name="l05927"></a>05927 
<a name="l05928"></a>05928               <span class="keywordflow">default</span>:
<a name="l05929"></a>05929                 <span class="keywordflow">if</span> (c == -1) <span class="keywordflow">return</span> -1;
<a name="l05930"></a>05930                 <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#af96ff81718c3c27b342b5958fac6cb7e">ISASCII</a>(c)) {
<a name="l05931"></a>05931                     <span class="keywordflow">if</span> ((func &amp; STR_FUNC_EXPAND) == 0) <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;\\&apos;</span>);
<a name="l05932"></a>05932                     <span class="keywordflow">goto</span> non_ascii;
<a name="l05933"></a>05933                 }
<a name="l05934"></a>05934                 <span class="keywordflow">if</span> (func &amp; <a class="code" href="../../d5/d11/ripper_8c.html#ad832f161067673ac6dfca392c45d77e7">STR_FUNC_REGEXP</a>) {
<a name="l05935"></a>05935                     <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l05936"></a>05936                     <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#a4c4eeed212616499da05689f1ef72141">tokadd_escape</a>(&amp;enc)) &lt; 0)
<a name="l05937"></a>05937                         <span class="keywordflow">return</span> -1;
<a name="l05938"></a>05938                     <span class="keywordflow">if</span> (has_nonascii &amp;&amp; enc != *encp) {
<a name="l05939"></a>05939                         <a class="code" href="../../d5/d11/ripper_8c.html#a94a7dcbbcdffe8f841c2a42d30b30bf3">mixed_escape</a>(beg, enc, *encp);
<a name="l05940"></a>05940                     }
<a name="l05941"></a>05941                     <span class="keywordflow">continue</span>;
<a name="l05942"></a>05942                 }
<a name="l05943"></a>05943                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (func &amp; STR_FUNC_EXPAND) {
<a name="l05944"></a>05944                     <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l05945"></a>05945                     <span class="keywordflow">if</span> (func &amp; STR_FUNC_ESCAPE) <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;\\&apos;</span>);
<a name="l05946"></a>05946                     c = <a class="code" href="../../d5/d11/ripper_8c.html#a7b134e9bb5a5ab60833db1649abb92fb">read_escape</a>(0, &amp;enc);
<a name="l05947"></a>05947                 }
<a name="l05948"></a>05948                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((func &amp; STR_FUNC_QWORDS) &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(c)) {
<a name="l05949"></a>05949                     <span class="comment">/* ignore backslashed spaces in %w */</span>
<a name="l05950"></a>05950                 }
<a name="l05951"></a>05951                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c != term &amp;&amp; !(paren &amp;&amp; c == paren)) {
<a name="l05952"></a>05952                     <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;\\&apos;</span>);
<a name="l05953"></a>05953                     <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l05954"></a><a class="code" href="../../d7/dc0/parse_8y.html#a11cebd75ac44cd82f2747299dbe5e0da">05954</a>                     <span class="keywordflow">continue</span>;
<a name="l05955"></a>05955                 }
<a name="l05956"></a>05956             }
<a name="l05957"></a>05957         }
<a name="l05958"></a>05958         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#a78fd981b3a747e74ed4e19a19777f5c5">parser_isascii</a>()) {
<a name="l05959"></a>05959           non_ascii:
<a name="l05960"></a>05960             has_nonascii = 1;
<a name="l05961"></a>05961             <span class="keywordflow">if</span> (enc != *encp) {
<a name="l05962"></a>05962                 <a class="code" href="../../d5/d11/ripper_8c.html#ae2b66869a3d660de080f56222a322d63">mixed_error</a>(enc, *encp);
<a name="l05963"></a>05963                 <span class="keywordflow">continue</span>;
<a name="l05964"></a>05964             }
<a name="l05965"></a>05965             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a9e54e692f310530a4cb22d98adbb4e91">tokadd_mbchar</a>(c) == -1) <span class="keywordflow">return</span> -1;
<a name="l05966"></a>05966             <span class="keywordflow">continue</span>;
<a name="l05967"></a>05967         }
<a name="l05968"></a>05968         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((func &amp; STR_FUNC_QWORDS) &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(c)) {
<a name="l05969"></a>05969             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l05970"></a>05970             <span class="keywordflow">break</span>;
<a name="l05971"></a>05971         }
<a name="l05972"></a>05972         <span class="keywordflow">if</span> (c &amp; 0x80) {
<a name="l05973"></a>05973             has_nonascii = 1;
<a name="l05974"></a>05974             <span class="keywordflow">if</span> (enc != *encp) {
<a name="l05975"></a>05975                 <a class="code" href="../../d5/d11/ripper_8c.html#ae2b66869a3d660de080f56222a322d63">mixed_error</a>(enc, *encp);
<a name="l05976"></a>05976                 <span class="keywordflow">continue</span>;
<a name="l05977"></a>05977             }
<a name="l05978"></a>05978         }
<a name="l05979"></a>05979         <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l05980"></a>05980     }
<a name="l05981"></a><a class="code" href="../../d7/dc0/parse_8y.html#a8eaa82801267fb251b5f4c477fa42a38">05981</a>     *encp = enc;
<a name="l05982"></a>05982     <span class="keywordflow">return</span> c;
<a name="l05983"></a>05983 }
<a name="l05984"></a>05984 
<a name="l05985"></a>05985 <span class="preprocessor">#define NEW_STRTERM(func, term, paren) \</span>
<a name="l05986"></a>05986 <span class="preprocessor">        rb_node_newnode(NODE_STRTERM, (func), (term) | ((paren) &lt;&lt; (CHAR_BIT * 2)), 0)</span>
<a name="l05987"></a><a class="code" href="../../d7/dc0/parse_8y.html#ad442476de37a7b75c64d409719110bf5">05987</a> <span class="preprocessor"></span>
<a name="l05988"></a>05988 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l05989"></a>05989 <a class="code" href="../../d7/dc0/parse_8y.html#a95eefa198e352cdc0a60b0675abc3deb">parser_parse_string</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *quote)
<a name="l05990"></a>05990 {
<a name="l05991"></a>05991     <span class="keywordtype">int</span> func = (int)quote-&gt;nd_func;
<a name="l05992"></a>05992     <span class="keywordtype">int</span> term = <a class="code" href="../../d5/d11/ripper_8c.html#ae450a4ce7efb0f99c8697370fda5e872">nd_term</a>(quote);
<a name="l05993"></a>05993     <span class="keywordtype">int</span> paren = <a class="code" href="../../d5/d11/ripper_8c.html#aae0553ae3d8cc5fe3078e1db7b54c8bb">nd_paren</a>(quote);
<a name="l05994"></a>05994     <span class="keywordtype">int</span> c, space = 0;
<a name="l05995"></a>05995     <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc = parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a>;
<a name="l05996"></a>05996 
<a name="l05997"></a>05997     <span class="keywordflow">if</span> (func == -1) <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#af4eeb9189245212ffd361ff11bcccdc0">tSTRING_END</a>;
<a name="l05998"></a>05998     c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l05999"></a>05999     <span class="keywordflow">if</span> ((func &amp; STR_FUNC_QWORDS) &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(c)) {
<a name="l06000"></a>06000         <span class="keywordflow">do</span> {c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();} <span class="keywordflow">while</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(c));
<a name="l06001"></a>06001         space = 1;
<a name="l06002"></a><a class="code" href="../../d7/dc0/parse_8y.html#ade76591c5e3d39a7afa857a9933be68b">06002</a>     }
<a name="l06003"></a>06003     <span class="keywordflow">if</span> (c == term &amp;&amp; !quote-&gt;nd_nest) {
<a name="l06004"></a><a class="code" href="../../d7/dc0/parse_8y.html#a53a818e4acf7f5d2e515a43c10d22d81">06004</a>         <span class="keywordflow">if</span> (func &amp; STR_FUNC_QWORDS) {
<a name="l06005"></a>06005             quote-&gt;nd_func = -1;
<a name="l06006"></a>06006             <span class="keywordflow">return</span> <span class="charliteral">&apos; &apos;</span>;
<a name="l06007"></a>06007         }
<a name="l06008"></a>06008         <span class="keywordflow">if</span> (!(func &amp; STR_FUNC_REGEXP)) <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#af4eeb9189245212ffd361ff11bcccdc0">tSTRING_END</a>;
<a name="l06009"></a>06009         <a class="code" href="../../d5/d11/ripper_8c.html#a9ab46f60487a699cf912d90d402a734c">set_yylval_num</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a90b1befe6592f9326ede9fe677f6907c">regx_options</a>());
<a name="l06010"></a>06010         <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#af2f874084a5f0c5ccf581641c92a9891">tREGEXP_END</a>;
<a name="l06011"></a>06011     }
<a name="l06012"></a>06012     <span class="keywordflow">if</span> (space) {
<a name="l06013"></a>06013         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06014"></a>06014         <span class="keywordflow">return</span> <span class="charliteral">&apos; &apos;</span>;
<a name="l06015"></a>06015     }
<a name="l06016"></a>06016     <a class="code" href="../../d5/d11/ripper_8c.html#acf4744d9ea857f9df3d1d89e056b20b0">newtok</a>();
<a name="l06017"></a>06017     <span class="keywordflow">if</span> ((func &amp; STR_FUNC_EXPAND) &amp;&amp; c == <span class="charliteral">&apos;#&apos;</span>) {
<a name="l06018"></a>06018         <span class="keywordflow">switch</span> (c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) {
<a name="l06019"></a>06019           <span class="keywordflow">case</span> <span class="charliteral">&apos;$&apos;</span>:
<a name="l06020"></a>06020           <span class="keywordflow">case</span> <span class="charliteral">&apos;@&apos;</span>:
<a name="l06021"></a>06021             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06022"></a>06022             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#aa7b2a41e57a277ba91ec5803e707148f">tSTRING_DVAR</a>;
<a name="l06023"></a>06023           <span class="keywordflow">case</span> <span class="charliteral">&apos;{&apos;</span>:
<a name="l06024"></a>06024             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a08b1f68dd11d289de72404e9e6a7ad20">tSTRING_DBEG</a>;
<a name="l06025"></a>06025         }
<a name="l06026"></a>06026         <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;#&apos;</span>);
<a name="l06027"></a>06027     }
<a name="l06028"></a><a class="code" href="../../d7/dc0/parse_8y.html#a4d7c568e360d6b2dab19c7e7d7298514">06028</a>     <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06029"></a>06029     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#aed9075c666a973d19aeaaed7a1dfc5d4">tokadd_string</a>(func, term, paren, &amp;quote-&gt;nd_nest,
<a name="l06030"></a>06030                       &amp;enc) == -1) {
<a name="l06031"></a>06031         <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a> = <a class="code" href="../../d3/d09/ripper_8y.html#a532b1472e32368b65ce9351c1abc2c02">nd_line</a>(quote);
<a name="l06032"></a>06032         <span class="keywordflow">if</span> (func &amp; STR_FUNC_REGEXP) {
<a name="l06033"></a>06033             <span class="keywordflow">if</span> (parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a19fefb3d80f961d6da3692fb8c47515b">eofp</a>)
<a name="l06034"></a>06034                 <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;unterminated regexp meets end of file&quot;</span>);
<a name="l06035"></a>06035             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#af2f874084a5f0c5ccf581641c92a9891">tREGEXP_END</a>;
<a name="l06036"></a>06036         }
<a name="l06037"></a>06037         <span class="keywordflow">else</span> {
<a name="l06038"></a>06038             <span class="keywordflow">if</span> (parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a19fefb3d80f961d6da3692fb8c47515b">eofp</a>)
<a name="l06039"></a>06039                 <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;unterminated string meets end of file&quot;</span>);
<a name="l06040"></a>06040             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#af4eeb9189245212ffd361ff11bcccdc0">tSTRING_END</a>;
<a name="l06041"></a>06041         }
<a name="l06042"></a>06042     }
<a name="l06043"></a>06043 
<a name="l06044"></a>06044     <a class="code" href="../../d5/d11/ripper_8c.html#a4cb8635c421d3ada48f4c1a5ecfe6997">tokfix</a>();
<a name="l06045"></a>06045     <a class="code" href="../../d5/d11/ripper_8c.html#a63339b3dcfb84e6213fb0c9f8aba2c64">set_yylval_str</a>(<a class="code" href="../../d5/d11/ripper_8c.html#af3d71032dc2e6d8f81d50a3c8df7cfe7">STR_NEW3</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>(), <a class="code" href="../../d5/d11/ripper_8c.html#a69cc32ebd541279dcf93b82393380233">toklen</a>(), enc, func));
<a name="l06046"></a>06046 
<a name="l06047"></a>06047 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l06048"></a><a class="code" href="../../d7/dc0/parse_8y.html#a896759f759fee7bdbc8b6824e01f5e59">06048</a> <span class="preprocessor"></span>    <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(parser-&gt;delayed)) {
<a name="l06049"></a>06049         ptrdiff_t len = <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> - parser-&gt;tokp;
<a name="l06050"></a>06050         <span class="keywordflow">if</span> (len &gt; 0) {
<a name="l06051"></a>06051             <a class="code" href="../../d5/de3/encoding_8h.html#a850cba00e6c7c1137d5224d4348c7fca">rb_enc_str_buf_cat</a>(parser-&gt;delayed, parser-&gt;tokp, len, enc);
<a name="l06052"></a>06052         }
<a name="l06053"></a>06053         ripper_dispatch_delayed_token(parser, <a class="code" href="../../d5/d11/ripper_8c.html#a814fc15c6ef67f84fbe39e4e31e41041">tSTRING_CONTENT</a>);
<a name="l06054"></a>06054         parser-&gt;tokp = <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>;
<a name="l06055"></a>06055     }
<a name="l06056"></a>06056 <span class="preprocessor">#endif</span>
<a name="l06057"></a><a class="code" href="../../d7/dc0/parse_8y.html#a84f52499afd94033b4c919bf9456eede">06057</a> <span class="preprocessor"></span>
<a name="l06058"></a>06058     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a814fc15c6ef67f84fbe39e4e31e41041">tSTRING_CONTENT</a>;
<a name="l06059"></a>06059 }
<a name="l06060"></a>06060 
<a name="l06061"></a>06061 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l06062"></a>06062 <a class="code" href="../../d7/dc0/parse_8y.html#adae5f13519c5ed85ea6c1f142d2cd03a">parser_heredoc_identifier</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l06063"></a>06063 {
<a name="l06064"></a><a class="code" href="../../d7/dc0/parse_8y.html#a32f0af24418a87879206f39f0309795a">06064</a>     <span class="keywordtype">int</span> c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>(), term, func = 0;
<a name="l06065"></a>06065     <span class="keywordtype">long</span> len;
<a name="l06066"></a>06066 
<a name="l06067"></a>06067     <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;-&apos;</span>) {
<a name="l06068"></a>06068         c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l06069"></a>06069         func = <a class="code" href="../../d5/d11/ripper_8c.html#ac7122d1bf4bfda474051b50d5c0357a7">STR_FUNC_INDENT</a>;
<a name="l06070"></a>06070     }
<a name="l06071"></a>06071     <span class="keywordflow">switch</span> (c) {
<a name="l06072"></a>06072       <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>:
<a name="l06073"></a>06073         func |= <a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25aaf6a1bae38eadb504993e21689e6e390">str_squote</a>; <span class="keywordflow">goto</span> quoted;
<a name="l06074"></a>06074       <span class="keywordflow">case</span> <span class="charliteral">&apos;&quot;&apos;</span>:
<a name="l06075"></a>06075         func |= <a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25a7f4c3b93bf426276864f9bc8dc29a867">str_dquote</a>; <span class="keywordflow">goto</span> quoted;
<a name="l06076"></a>06076       <span class="keywordflow">case</span> <span class="charliteral">&apos;`&apos;</span>:
<a name="l06077"></a>06077         func |= <a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25a7dd48ff6d3edd0dd7b4495292f22e6f0">str_xquote</a>;
<a name="l06078"></a>06078       quoted:
<a name="l06079"></a>06079         <a class="code" href="../../d5/d11/ripper_8c.html#acf4744d9ea857f9df3d1d89e056b20b0">newtok</a>();
<a name="l06080"></a>06080         <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(func);
<a name="l06081"></a>06081         term = c;
<a name="l06082"></a>06082         <span class="keywordflow">while</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) != -1 &amp;&amp; c != term) {
<a name="l06083"></a>06083             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a9e54e692f310530a4cb22d98adbb4e91">tokadd_mbchar</a>(c) == -1) <span class="keywordflow">return</span> 0;
<a name="l06084"></a>06084         }
<a name="l06085"></a>06085         <span class="keywordflow">if</span> (c == -1) {
<a name="l06086"></a>06086             <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;unterminated here document identifier&quot;</span>);
<a name="l06087"></a><a class="code" href="../../d7/dc0/parse_8y.html#a69cfcf676231717c5413bfd2c53be088">06087</a>             <span class="keywordflow">return</span> 0;
<a name="l06088"></a>06088         }
<a name="l06089"></a>06089         <span class="keywordflow">break</span>;
<a name="l06090"></a>06090 
<a name="l06091"></a>06091       <span class="keywordflow">default</span>:
<a name="l06092"></a>06092         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#a054410a01d650b035ea8f1f263c48aa8">parser_is_identchar</a>()) {
<a name="l06093"></a>06093             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06094"></a>06094             <span class="keywordflow">if</span> (func &amp; <a class="code" href="../../d5/d11/ripper_8c.html#ac7122d1bf4bfda474051b50d5c0357a7">STR_FUNC_INDENT</a>) {
<a name="l06095"></a>06095                 <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(<span class="charliteral">&apos;-&apos;</span>);
<a name="l06096"></a>06096             }
<a name="l06097"></a>06097             <span class="keywordflow">return</span> 0;
<a name="l06098"></a>06098         }
<a name="l06099"></a>06099         <a class="code" href="../../d5/d11/ripper_8c.html#acf4744d9ea857f9df3d1d89e056b20b0">newtok</a>();
<a name="l06100"></a>06100         term = <span class="charliteral">&apos;&quot;&apos;</span>;
<a name="l06101"></a>06101         <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(func |= <a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25a7f4c3b93bf426276864f9bc8dc29a867">str_dquote</a>);
<a name="l06102"></a>06102         <span class="keywordflow">do</span> {
<a name="l06103"></a>06103             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a9e54e692f310530a4cb22d98adbb4e91">tokadd_mbchar</a>(c) == -1) <span class="keywordflow">return</span> 0;
<a name="l06104"></a>06104         } <span class="keywordflow">while</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) != -1 &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#a054410a01d650b035ea8f1f263c48aa8">parser_is_identchar</a>());
<a name="l06105"></a>06105         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06106"></a>06106         <span class="keywordflow">break</span>;
<a name="l06107"></a>06107     }
<a name="l06108"></a>06108 
<a name="l06109"></a>06109     <a class="code" href="../../d5/d11/ripper_8c.html#a4cb8635c421d3ada48f4c1a5ecfe6997">tokfix</a>();
<a name="l06110"></a>06110 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l06111"></a>06111 <span class="preprocessor"></span>    ripper_dispatch_scan_event(parser, <a class="code" href="../../df/dea/eventids2_8c.html#a0e6ab036244077476f643edbaa4d520d">tHEREDOC_BEG</a>);
<a name="l06112"></a>06112 <span class="preprocessor">#endif</span>
<a name="l06113"></a>06113 <span class="preprocessor"></span>    len = <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> - <a class="code" href="../../d5/d11/ripper_8c.html#a8008dcfc6e95106d2ff2ddf9068aff5b">lex_pbeg</a>;
<a name="l06114"></a><a class="code" href="../../d7/dc0/parse_8y.html#ab7f71239bed57303a041221eb50fc4be">06114</a>     <a class="code" href="../../d5/d11/ripper_8c.html#a78b87c7a31c73f4d182e2af460d4f009">lex_goto_eol</a>(parser);
<a name="l06115"></a>06115     <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = <a class="code" href="../../d5/d11/ripper_8c.html#aa6e8d7f44de147b7e48991c2e9f3f3d4">rb_node_newnode</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a60ff266c9c51812eadf38c736e230689">NODE_HEREDOC</a>,
<a name="l06116"></a>06116                                   <a class="code" href="../../d5/d11/ripper_8c.html#ae76175555ef695f3c4d083e1e680588c">STR_NEW</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>(), <a class="code" href="../../d5/d11/ripper_8c.html#a69cc32ebd541279dcf93b82393380233">toklen</a>()),     <span class="comment">/* nd_lit */</span>
<a name="l06117"></a>06117                                   len,                          <span class="comment">/* nd_nth */</span>
<a name="l06118"></a>06118                                   <a class="code" href="../../d5/d11/ripper_8c.html#ada3e2d92f1cfb779d4ec3be8cf58c76b">lex_lastline</a>);                <span class="comment">/* nd_orig */</span>
<a name="l06119"></a>06119     <a class="code" href="../../d3/d09/ripper_8y.html#ac821dfc4ca1d4673db9669205be97f85">nd_set_line</a>(<a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a>, <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>);
<a name="l06120"></a>06120     <a class="code" href="../../d5/d11/ripper_8c.html#acf3bf78187c7dfbba241b27d1110b531">ripper_flush</a>(parser);
<a name="l06121"></a>06121     <span class="keywordflow">return</span> term == <span class="charliteral">&apos;`&apos;</span> ? <a class="code" href="../../d5/d11/ripper_8c.html#a476bb0d5e59ee5787ecb5bfdf6aa64a0">tXSTRING_BEG</a> : <a class="code" href="../../d5/d11/ripper_8c.html#ae8e25024ff03620afa83e2a3c9bceb7b">tSTRING_BEG</a>;
<a name="l06122"></a>06122 }
<a name="l06123"></a>06123 
<a name="l06124"></a>06124 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l06125"></a>06125 <a class="code" href="../../d7/dc0/parse_8y.html#a66716d038636a42bcf15c9762d3b05a5">parser_heredoc_restore</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *here)
<a name="l06126"></a>06126 {
<a name="l06127"></a>06127     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> line;
<a name="l06128"></a>06128 
<a name="l06129"></a>06129     line = here-&gt;nd_orig;
<a name="l06130"></a>06130     <a class="code" href="../../d5/d11/ripper_8c.html#ada3e2d92f1cfb779d4ec3be8cf58c76b">lex_lastline</a> = line;
<a name="l06131"></a>06131     lex_pbeg = <a class="code" href="../../d8/df4/generator_8h.html#aa0c7097c0d82c8372072fbab5a604e39">RSTRING_PTR</a>(line);
<a name="l06132"></a>06132     <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a> = lex_pbeg + <a class="code" href="../../d8/df4/generator_8h.html#a1661e63c26c5cbeef7217d05b0f33942">RSTRING_LEN</a>(line);
<a name="l06133"></a>06133     <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> = lex_pbeg + here-&gt;nd_nth;
<a name="l06134"></a>06134     <a class="code" href="../../d5/d11/ripper_8c.html#ac30c8380d57795e0f0d7f0e68bd9f6b3">heredoc_end</a> = <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>;
<a name="l06135"></a>06135     <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a> = <a class="code" href="../../d3/d09/ripper_8y.html#a532b1472e32368b65ce9351c1abc2c02">nd_line</a>(here);
<a name="l06136"></a>06136     <a class="code" href="../../d7/dc0/parse_8y.html#a520b5c6e4d2cdbdd764de2a4a0782570">dispose_string</a>(here-&gt;nd_lit);
<a name="l06137"></a>06137     <a class="code" href="../../d8/d16/gc_8c.html#a53016811c87ff4c3ea839c9e85a9a9a4">rb_gc_force_recycle</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)here);
<a name="l06138"></a>06138     <a class="code" href="../../d5/d11/ripper_8c.html#acf3bf78187c7dfbba241b27d1110b531">ripper_flush</a>(parser);
<a name="l06139"></a>06139 }
<a name="l06140"></a>06140 
<a name="l06141"></a>06141 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l06142"></a>06142 <a class="code" href="../../d7/dc0/parse_8y.html#a24b14900b405d5a403c8fea7c8e97d4e">parser_whole_match_p</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser,
<a name="l06143"></a>06143     <span class="keyword">const</span> <span class="keywordtype">char</span> *eos, <span class="keywordtype">long</span> len, <span class="keywordtype">int</span> indent)
<a name="l06144"></a>06144 {
<a name="l06145"></a>06145     <span class="keyword">const</span> <span class="keywordtype">char</span> *p = lex_pbeg;
<a name="l06146"></a>06146     <span class="keywordtype">long</span> n;
<a name="l06147"></a>06147 
<a name="l06148"></a>06148     <span class="keywordflow">if</span> (indent) {
<a name="l06149"></a>06149         <span class="keywordflow">while</span> (*p &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(*p)) p++;
<a name="l06150"></a>06150     }
<a name="l06151"></a>06151     n = <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a> - (p + len);
<a name="l06152"></a>06152     <span class="keywordflow">if</span> (n &lt; 0 || (n &gt; 0 &amp;&amp; p[len] != <span class="charliteral">&apos;\n&apos;</span> &amp;&amp; p[len] != <span class="charliteral">&apos;\r&apos;</span>)) <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l06153"></a>06153     <span class="keywordflow">return</span> strncmp(eos, p, len) == 0;
<a name="l06154"></a>06154 }
<a name="l06155"></a>06155 
<a name="l06156"></a>06156 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l06157"></a>06157 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l06158"></a>06158 ripper_dispatch_heredoc_end(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l06159"></a>06159 {
<a name="l06160"></a>06160     <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(parser-&gt;delayed))
<a name="l06161"></a>06161         ripper_dispatch_delayed_token(parser, <a class="code" href="../../d5/d11/ripper_8c.html#a814fc15c6ef67f84fbe39e4e31e41041">tSTRING_CONTENT</a>);
<a name="l06162"></a>06162     <a class="code" href="../../d5/d11/ripper_8c.html#a78b87c7a31c73f4d182e2af460d4f009">lex_goto_eol</a>(parser);
<a name="l06163"></a>06163     ripper_dispatch_ignored_scan_event(parser, <a class="code" href="../../df/dea/eventids2_8c.html#a8e9ad5bd18bc1a3ef154667a65941d5e">tHEREDOC_END</a>);
<a name="l06164"></a>06164 }
<a name="l06165"></a>06165 
<a name="l06166"></a>06166 <span class="preprocessor">#define dispatch_heredoc_end() ripper_dispatch_heredoc_end(parser)</span>
<a name="l06167"></a>06167 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l06168"></a>06168 <span class="preprocessor"></span><span class="preprocessor">#define dispatch_heredoc_end() ((void)0)</span>
<a name="l06169"></a>06169 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l06170"></a>06170 <span class="preprocessor"></span>
<a name="l06171"></a>06171 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l06172"></a>06172 <a class="code" href="../../d7/dc0/parse_8y.html#a888dc8bb6e309b2827feb1720ef952a4">parser_here_document</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *here)
<a name="l06173"></a>06173 {
<a name="l06174"></a>06174     <span class="keywordtype">int</span> c, func, indent = 0;
<a name="l06175"></a>06175     <span class="keyword">const</span> <span class="keywordtype">char</span> *eos, *p, *pend;
<a name="l06176"></a>06176     <span class="keywordtype">long</span> len;
<a name="l06177"></a>06177     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str = 0;
<a name="l06178"></a>06178     <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc = parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a>;
<a name="l06179"></a>06179 
<a name="l06180"></a>06180     eos = <a class="code" href="../../d8/df4/generator_8h.html#aa0c7097c0d82c8372072fbab5a604e39">RSTRING_PTR</a>(here-&gt;nd_lit);
<a name="l06181"></a>06181     len = <a class="code" href="../../d8/df4/generator_8h.html#a1661e63c26c5cbeef7217d05b0f33942">RSTRING_LEN</a>(here-&gt;nd_lit) - 1;
<a name="l06182"></a>06182     indent = (func = *eos++) &amp; <a class="code" href="../../d5/d11/ripper_8c.html#ac7122d1bf4bfda474051b50d5c0357a7">STR_FUNC_INDENT</a>;
<a name="l06183"></a>06183 
<a name="l06184"></a>06184     <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == -1) {
<a name="l06185"></a>06185       error:
<a name="l06186"></a>06186         <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;can&apos;t find string \&quot;%s\&quot; anywhere before EOF&quot;</span>, eos);
<a name="l06187"></a>06187 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l06188"></a>06188 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(parser-&gt;delayed)) {
<a name="l06189"></a>06189             ripper_dispatch_scan_event(parser, <a class="code" href="../../d5/d11/ripper_8c.html#a814fc15c6ef67f84fbe39e4e31e41041">tSTRING_CONTENT</a>);
<a name="l06190"></a>06190         }
<a name="l06191"></a>06191         <span class="keywordflow">else</span> {
<a name="l06192"></a>06192             <span class="keywordflow">if</span> (str ||
<a name="l06193"></a>06193                 ((len = <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> - parser-&gt;tokp) &gt; 0 &amp;&amp;
<a name="l06194"></a>06194                  (str = <a class="code" href="../../d5/d11/ripper_8c.html#af3d71032dc2e6d8f81d50a3c8df7cfe7">STR_NEW3</a>(parser-&gt;tokp, len, enc, func), 1))) {
<a name="l06195"></a>06195                 <a class="code" href="../../db/d2e/intern_8h.html#ab592dcd9e193dea76fb0ff58b5d907e4">rb_str_append</a>(parser-&gt;delayed, str);
<a name="l06196"></a>06196             }
<a name="l06197"></a>06197             ripper_dispatch_delayed_token(parser, <a class="code" href="../../d5/d11/ripper_8c.html#a814fc15c6ef67f84fbe39e4e31e41041">tSTRING_CONTENT</a>);
<a name="l06198"></a>06198         }
<a name="l06199"></a>06199         <a class="code" href="../../d5/d11/ripper_8c.html#a78b87c7a31c73f4d182e2af460d4f009">lex_goto_eol</a>(parser);
<a name="l06200"></a>06200 <span class="preprocessor">#endif</span>
<a name="l06201"></a>06201 <span class="preprocessor"></span>      restore:
<a name="l06202"></a>06202         <a class="code" href="../../d5/d11/ripper_8c.html#a29027bf440885f2de4462e41b9a969d4">heredoc_restore</a>(<a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a>);
<a name="l06203"></a>06203         <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = 0;
<a name="l06204"></a>06204         <span class="keywordflow">return</span> 0;
<a name="l06205"></a>06205     }
<a name="l06206"></a>06206     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab6ab5791e2b786131b7170981969eb69">was_bol</a>() &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#adcf02626de924b0ed8c7a5927a443c21">whole_match_p</a>(eos, len, indent)) {
<a name="l06207"></a>06207         <a class="code" href="../../d5/d11/ripper_8c.html#a2f659649d0e9161d89ce9d80dff2043a">dispatch_heredoc_end</a>();
<a name="l06208"></a>06208         <a class="code" href="../../d5/d11/ripper_8c.html#a29027bf440885f2de4462e41b9a969d4">heredoc_restore</a>(<a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a>);
<a name="l06209"></a>06209         <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#af4eeb9189245212ffd361ff11bcccdc0">tSTRING_END</a>;
<a name="l06210"></a>06210     }
<a name="l06211"></a>06211 
<a name="l06212"></a>06212     <span class="keywordflow">if</span> (!(func &amp; STR_FUNC_EXPAND)) {
<a name="l06213"></a>06213         <span class="keywordflow">do</span> {
<a name="l06214"></a>06214             p = <a class="code" href="../../d8/df4/generator_8h.html#aa0c7097c0d82c8372072fbab5a604e39">RSTRING_PTR</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ada3e2d92f1cfb779d4ec3be8cf58c76b">lex_lastline</a>);
<a name="l06215"></a>06215             pend = <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a>;
<a name="l06216"></a>06216             <span class="keywordflow">if</span> (pend &gt; p) {
<a name="l06217"></a>06217                 <span class="keywordflow">switch</span> (pend[-1]) {
<a name="l06218"></a>06218                   <span class="keywordflow">case</span> <span class="charliteral">&apos;\n&apos;</span>:
<a name="l06219"></a>06219                     <span class="keywordflow">if</span> (--pend == p || pend[-1] != <span class="charliteral">&apos;\r&apos;</span>) {
<a name="l06220"></a>06220                         pend++;
<a name="l06221"></a>06221                         <span class="keywordflow">break</span>;
<a name="l06222"></a>06222                     }
<a name="l06223"></a>06223                   <span class="keywordflow">case</span> <span class="charliteral">&apos;\r&apos;</span>:
<a name="l06224"></a>06224                     --pend;
<a name="l06225"></a>06225                 }
<a name="l06226"></a>06226             }
<a name="l06227"></a>06227             <span class="keywordflow">if</span> (str)
<a name="l06228"></a>06228                 <a class="code" href="../../db/d2e/intern_8h.html#a4e3e3ccf959b5db6c125a68e1e1db0a3">rb_str_cat</a>(str, p, pend - p);
<a name="l06229"></a>06229             <span class="keywordflow">else</span>
<a name="l06230"></a>06230                 str = <a class="code" href="../../d5/d11/ripper_8c.html#ae76175555ef695f3c4d083e1e680588c">STR_NEW</a>(p, pend - p);
<a name="l06231"></a>06231             <span class="keywordflow">if</span> (pend &lt; <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a>) <a class="code" href="../../db/d2e/intern_8h.html#a4e3e3ccf959b5db6c125a68e1e1db0a3">rb_str_cat</a>(str, <span class="stringliteral">&quot;\n&quot;</span>, 1);
<a name="l06232"></a>06232             <a class="code" href="../../d5/d11/ripper_8c.html#a78b87c7a31c73f4d182e2af460d4f009">lex_goto_eol</a>(parser);
<a name="l06233"></a>06233             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>() == -1) {
<a name="l06234"></a>06234                 <span class="keywordflow">if</span> (str) <a class="code" href="../../d7/dc0/parse_8y.html#a520b5c6e4d2cdbdd764de2a4a0782570">dispose_string</a>(str);
<a name="l06235"></a>06235                 <span class="keywordflow">goto</span> error;
<a name="l06236"></a>06236             }
<a name="l06237"></a>06237         } <span class="keywordflow">while</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#adcf02626de924b0ed8c7a5927a443c21">whole_match_p</a>(eos, len, indent));
<a name="l06238"></a>06238     }
<a name="l06239"></a>06239     <span class="keywordflow">else</span> {
<a name="l06240"></a>06240         <span class="comment">/*      int mb = ENC_CODERANGE_7BIT, *mbp = &amp;mb;*/</span>
<a name="l06241"></a>06241         <a class="code" href="../../d5/d11/ripper_8c.html#acf4744d9ea857f9df3d1d89e056b20b0">newtok</a>();
<a name="l06242"></a>06242         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;#&apos;</span>) {
<a name="l06243"></a>06243             <span class="keywordflow">switch</span> (c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) {
<a name="l06244"></a>06244               <span class="keywordflow">case</span> <span class="charliteral">&apos;$&apos;</span>:
<a name="l06245"></a>06245               <span class="keywordflow">case</span> <span class="charliteral">&apos;@&apos;</span>:
<a name="l06246"></a>06246                 <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06247"></a>06247                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#aa7b2a41e57a277ba91ec5803e707148f">tSTRING_DVAR</a>;
<a name="l06248"></a>06248               <span class="keywordflow">case</span> <span class="charliteral">&apos;{&apos;</span>:
<a name="l06249"></a>06249                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a08b1f68dd11d289de72404e9e6a7ad20">tSTRING_DBEG</a>;
<a name="l06250"></a>06250             }
<a name="l06251"></a>06251             <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;#&apos;</span>);
<a name="l06252"></a>06252         }
<a name="l06253"></a>06253         <span class="keywordflow">do</span> {
<a name="l06254"></a>06254             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06255"></a>06255             <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aed9075c666a973d19aeaaed7a1dfc5d4">tokadd_string</a>(func, <span class="charliteral">&apos;\n&apos;</span>, 0, NULL, &amp;enc)) == -1) {
<a name="l06256"></a>06256                 <span class="keywordflow">if</span> (parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a19fefb3d80f961d6da3692fb8c47515b">eofp</a>) <span class="keywordflow">goto</span> error;
<a name="l06257"></a>06257                 <span class="keywordflow">goto</span> restore;
<a name="l06258"></a>06258             }
<a name="l06259"></a>06259             <span class="keywordflow">if</span> (c != <span class="charliteral">&apos;\n&apos;</span>) {
<a name="l06260"></a>06260                 <a class="code" href="../../d5/d11/ripper_8c.html#a63339b3dcfb84e6213fb0c9f8aba2c64">set_yylval_str</a>(<a class="code" href="../../d5/d11/ripper_8c.html#af3d71032dc2e6d8f81d50a3c8df7cfe7">STR_NEW3</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>(), <a class="code" href="../../d5/d11/ripper_8c.html#a69cc32ebd541279dcf93b82393380233">toklen</a>(), enc, func));
<a name="l06261"></a>06261                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a814fc15c6ef67f84fbe39e4e31e41041">tSTRING_CONTENT</a>;
<a name="l06262"></a>06262             }
<a name="l06263"></a>06263             <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>());
<a name="l06264"></a>06264             <span class="comment">/*      if (mbp &amp;&amp; mb == ENC_CODERANGE_UNKNOWN) mbp = 0;*/</span>
<a name="l06265"></a>06265             <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == -1) <span class="keywordflow">goto</span> error;
<a name="l06266"></a>06266         } <span class="keywordflow">while</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#adcf02626de924b0ed8c7a5927a443c21">whole_match_p</a>(eos, len, indent));
<a name="l06267"></a>06267         str = <a class="code" href="../../d5/d11/ripper_8c.html#af3d71032dc2e6d8f81d50a3c8df7cfe7">STR_NEW3</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>(), <a class="code" href="../../d5/d11/ripper_8c.html#a69cc32ebd541279dcf93b82393380233">toklen</a>(), enc, func);
<a name="l06268"></a>06268     }
<a name="l06269"></a>06269     <a class="code" href="../../d5/d11/ripper_8c.html#a2f659649d0e9161d89ce9d80dff2043a">dispatch_heredoc_end</a>();
<a name="l06270"></a>06270     <a class="code" href="../../d5/d11/ripper_8c.html#a29027bf440885f2de4462e41b9a969d4">heredoc_restore</a>(<a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a>);
<a name="l06271"></a>06271     <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2e577b512d22c4741a1f905721487a42">NEW_STRTERM</a>(-1, 0, 0);
<a name="l06272"></a>06272     <a class="code" href="../../d5/d11/ripper_8c.html#a63339b3dcfb84e6213fb0c9f8aba2c64">set_yylval_str</a>(str);
<a name="l06273"></a>06273     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a814fc15c6ef67f84fbe39e4e31e41041">tSTRING_CONTENT</a>;
<a name="l06274"></a>06274 }
<a name="l06275"></a>06275 
<a name="l06276"></a>06276 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/deb/lex_8c.html">lex.c</a>&quot;</span>
<a name="l06277"></a>06277 
<a name="l06278"></a>06278 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l06279"></a>06279 <a class="code" href="../../d7/dc0/parse_8y.html#a0e98666d3d500be1f1457a46c8e5764c">arg_ambiguous_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l06280"></a>06280 {
<a name="l06281"></a>06281 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l06282"></a>06282 <span class="preprocessor"></span>    <a class="code" href="../../d5/d11/ripper_8c.html#ac3f01cfa65c2c0a61a6f83b556b892f3">rb_warning0</a>(<span class="stringliteral">&quot;ambiguous first argument; put parentheses or even spaces&quot;</span>);
<a name="l06283"></a>06283 <span class="preprocessor">#else</span>
<a name="l06284"></a>06284 <span class="preprocessor"></span>    <a class="code" href="../../d3/d09/ripper_8y.html#a334ef06352abb50a85b8ae48c9b50d2f">dispatch0</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3c5a49f7f344bf7d4894a02ea49538d7">arg_ambiguous</a>);
<a name="l06285"></a>06285 <span class="preprocessor">#endif</span>
<a name="l06286"></a>06286 <span class="preprocessor"></span>}
<a name="l06287"></a>06287 <span class="preprocessor">#define arg_ambiguous() (arg_ambiguous_gen(parser), 1)</span>
<a name="l06288"></a>06288 <span class="preprocessor"></span>
<a name="l06289"></a>06289 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>
<a name="l06290"></a>06290 <a class="code" href="../../d7/dc0/parse_8y.html#ac4d9b95cf84b566ad31b75093615da57">formal_argument_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <a class="code" href="../../d3/d09/ripper_8y.html#a73c3a889aca6f2648374f6f8331d13ea">lhs</a>)
<a name="l06291"></a>06291 {
<a name="l06292"></a>06292 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l06293"></a>06293 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#abe05eb6b7b2f2f735012a349f49c4c69">is_local_id</a>(lhs))
<a name="l06294"></a>06294         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;formal argument must be local variable&quot;</span>);
<a name="l06295"></a>06295 <span class="preprocessor">#endif</span>
<a name="l06296"></a>06296 <span class="preprocessor"></span>    <a class="code" href="../../d5/d11/ripper_8c.html#aed3d1812d3f35fac1d14859bcffb89f7">shadowing_lvar</a>(lhs);
<a name="l06297"></a>06297     <span class="keywordflow">return</span> lhs;
<a name="l06298"></a>06298 }
<a name="l06299"></a>06299 
<a name="l06300"></a>06300 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l06301"></a>06301 <a class="code" href="../../d7/dc0/parse_8y.html#ab681d822bfcbffcfcafaedf91e932eb1">lvar_defined_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l06302"></a>06302 {
<a name="l06303"></a>06303     <span class="keywordflow">return</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab9196c3ae4712811a17ea70e52cd9cff">dyna_in_block</a>() &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#ace7891011c83acd673c27d6b643e0f85">dvar_defined_get</a>(<span class="keywordtype">id</span>)) || <a class="code" href="../../d5/d11/ripper_8c.html#a6e7b58aa0005e28573b05e2ea1d3b3bf">local_id</a>(<span class="keywordtype">id</span>);
<a name="l06304"></a>06304 }
<a name="l06305"></a>06305 
<a name="l06306"></a>06306 <span class="comment">/* emacsen -*- hack */</span>
<a name="l06307"></a>06307 <span class="keyword">static</span> <span class="keywordtype">long</span>
<a name="l06308"></a>06308 <a class="code" href="../../d7/dc0/parse_8y.html#a5ef8f6dfb2d66a30d03278efd7c13b5c">parser_encode_length</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d6/da0/nkf-utf8_2nkf_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="keywordtype">long</span> len)
<a name="l06309"></a>06309 {
<a name="l06310"></a>06310     <span class="keywordtype">long</span> nlen;
<a name="l06311"></a>06311 
<a name="l06312"></a>06312     <span class="keywordflow">if</span> (len &gt; 5 &amp;&amp; name[nlen = len - 5] == <span class="charliteral">&apos;-&apos;</span>) {
<a name="l06313"></a>06313         <span class="keywordflow">if</span> (<a class="code" href="../../db/d2e/intern_8h.html#aa3102c4ed2cc3c2d065fca404972c52d">rb_memcicmp</a>(name + nlen + 1, <span class="stringliteral">&quot;unix&quot;</span>, 4) == 0)
<a name="l06314"></a>06314             <span class="keywordflow">return</span> nlen;
<a name="l06315"></a>06315     }
<a name="l06316"></a>06316     <span class="keywordflow">if</span> (len &gt; 4 &amp;&amp; name[nlen = len - 4] == <span class="charliteral">&apos;-&apos;</span>) {
<a name="l06317"></a>06317         <span class="keywordflow">if</span> (<a class="code" href="../../db/d2e/intern_8h.html#aa3102c4ed2cc3c2d065fca404972c52d">rb_memcicmp</a>(name + nlen + 1, <span class="stringliteral">&quot;dos&quot;</span>, 3) == 0)
<a name="l06318"></a>06318             <span class="keywordflow">return</span> nlen;
<a name="l06319"></a>06319         <span class="keywordflow">if</span> (<a class="code" href="../../db/d2e/intern_8h.html#aa3102c4ed2cc3c2d065fca404972c52d">rb_memcicmp</a>(name + nlen + 1, <span class="stringliteral">&quot;mac&quot;</span>, 3) == 0 &amp;&amp;
<a name="l06320"></a>06320             !(len == 8 &amp;&amp; <a class="code" href="../../db/d2e/intern_8h.html#aa3102c4ed2cc3c2d065fca404972c52d">rb_memcicmp</a>(name, <span class="stringliteral">&quot;utf8-mac&quot;</span>, len) == 0))
<a name="l06321"></a>06321             <span class="comment">/* exclude UTF8-MAC because the encoding named &quot;UTF8&quot; doesn&apos;t exist in Ruby */</span>
<a name="l06322"></a>06322             <span class="keywordflow">return</span> nlen;
<a name="l06323"></a>06323     }
<a name="l06324"></a>06324     <span class="keywordflow">return</span> len;
<a name="l06325"></a>06325 }
<a name="l06326"></a>06326 
<a name="l06327"></a>06327 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l06328"></a>06328 <a class="code" href="../../d7/dc0/parse_8y.html#a52fd85030a5897245bf08ea733f141fe">parser_set_encode</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *name)
<a name="l06329"></a>06329 {
<a name="l06330"></a>06330     <span class="keywordtype">int</span> idx = <a class="code" href="../../d5/db5/encoding_8c.html#adeb5f5b97ea43528a55d717add8f64c5">rb_enc_find_index</a>(name);
<a name="l06331"></a>06331     <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc;
<a name="l06332"></a>06332     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> excargs[3];
<a name="l06333"></a>06333 
<a name="l06334"></a>06334     <span class="keywordflow">if</span> (idx &lt; 0) {
<a name="l06335"></a>06335         excargs[1] = <a class="code" href="../../d9/d2d/sprintf_8c.html#a05c34a91ab36c6a463c861df47808fae">rb_sprintf</a>(<span class="stringliteral">&quot;unknown encoding name: %s&quot;</span>, name);
<a name="l06336"></a>06336       error:
<a name="l06337"></a>06337         excargs[0] = <a class="code" href="../../db/dcc/error_8c.html#ab5e2a9fec766c75176fbb262bfe6a596">rb_eArgError</a>;
<a name="l06338"></a>06338         excargs[2] = <a class="code" href="../../db/d2e/intern_8h.html#af0aa399e9d58b72afe77901446157a04">rb_make_backtrace</a>();
<a name="l06339"></a>06339         <a class="code" href="../../dc/dcc/array_8c.html#a82b90e872bc91ed8b5ca1ff94b4c6c9d">rb_ary_unshift</a>(excargs[2], <a class="code" href="../../d9/d2d/sprintf_8c.html#a05c34a91ab36c6a463c861df47808fae">rb_sprintf</a>(<span class="stringliteral">&quot;%s:%d&quot;</span>, <a class="code" href="../../d2/d47/compile_8c.html#aca52b28c4504720708a4fab8675dc407">ruby_sourcefile</a>, <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>));
<a name="l06340"></a><a class="code" href="../../d7/dc0/parse_8y.html#a31ca39b2daf53f3ff4344795db983f6e">06340</a>         <a class="code" href="../../d3/d57/eval_8c.html#a237939d28c83950b84fb6a45ccca53a0">rb_exc_raise</a>(<a class="code" href="../../d3/d57/eval_8c.html#ad34672a68a00c2f8b30502646b9d4ee0">rb_make_exception</a>(3, excargs));
<a name="l06341"></a>06341     }
<a name="l06342"></a>06342     enc = <a class="code" href="../../d5/db5/encoding_8c.html#aef9c377b2d9d78b9f88e890b77593109">rb_enc_from_index</a>(idx);
<a name="l06343"></a>06343     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/de3/encoding_8h.html#a8b18a09a3055d3006c6d5baeaa6e7c72">rb_enc_asciicompat</a>(enc)) {
<a name="l06344"></a>06344         excargs[1] = <a class="code" href="../../d9/d2d/sprintf_8c.html#a05c34a91ab36c6a463c861df47808fae">rb_sprintf</a>(<span class="stringliteral">&quot;%s is not ASCII compatible&quot;</span>, <a class="code" href="../../d5/de3/encoding_8h.html#a69d59d898802726787a168ef2e0dc92c">rb_enc_name</a>(enc));
<a name="l06345"></a>06345         <span class="keywordflow">goto</span> error;
<a name="l06346"></a><a class="code" href="../../d7/dc0/parse_8y.html#a6b421d05eb45be4aaa9b0118283ee06f">06346</a>     }
<a name="l06347"></a>06347     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a> = enc;
<a name="l06348"></a>06348 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l06349"></a>06349 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a1b64f0549f6ce6da6ea51f2da2c69ca7">ruby_debug_lines</a>) {
<a name="l06350"></a>06350         <span class="keywordtype">long</span> i, n = <a class="code" href="../../d8/df4/generator_8h.html#ae988773ed219452578f881fc7189c486">RARRAY_LEN</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a1b64f0549f6ce6da6ea51f2da2c69ca7">ruby_debug_lines</a>);
<a name="l06351"></a><a class="code" href="../../d7/dc0/parse_8y.html#aac406d1a322ba6769a0861385f176d21">06351</a>         <span class="keyword">const</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *p = <a class="code" href="../../d8/df4/generator_8h.html#abb794fe2d7c73eea87e7ba2273939a8e">RARRAY_PTR</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a1b64f0549f6ce6da6ea51f2da2c69ca7">ruby_debug_lines</a>);
<a name="l06352"></a>06352         <span class="keywordflow">for</span> (i = 0; i &lt; n; ++i) {
<a name="l06353"></a>06353             <a class="code" href="../../d5/db5/encoding_8c.html#ad5df62bd02b6d06037baef7ad68bcae3">rb_enc_associate_index</a>(*p, idx);
<a name="l06354"></a>06354         }
<a name="l06355"></a>06355     }
<a name="l06356"></a>06356 <span class="preprocessor">#endif</span>
<a name="l06357"></a>06357 <span class="preprocessor"></span>}
<a name="l06358"></a>06358 
<a name="l06359"></a>06359 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l06360"></a>06360 <a class="code" href="../../d7/dc0/parse_8y.html#a926e0a72fb45f59dcde1490c84d94967">comment_at_top</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l06361"></a>06361 {
<a name="l06362"></a>06362     <span class="keyword">const</span> <span class="keywordtype">char</span> *p = lex_pbeg, *pend = <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> - 1;
<a name="l06363"></a>06363     <span class="keywordflow">if</span> (parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a350850a9fb3c7141370fafec1b2d352e">line_count</a> != (parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a620d0d73556d934fc4a2b8fc39a40f94">has_shebang</a> ? 2 : 1)) <span class="keywordflow">return</span> 0;
<a name="l06364"></a>06364     <span class="keywordflow">while</span> (p &lt; pend) {
<a name="l06365"></a>06365         <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(*p)) <span class="keywordflow">return</span> 0;
<a name="l06366"></a>06366         p++;
<a name="l06367"></a>06367     }
<a name="l06368"></a>06368     <span class="keywordflow">return</span> 1;
<a name="l06369"></a>06369 }
<a name="l06370"></a>06370 
<a name="l06371"></a>06371 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l06372"></a>06372 <span class="preprocessor"></span><span class="keyword">typedef</span> <a class="code" href="../../d3/d15/name2ctype_8h.html#a86f2415763322050063a5502f87c9422">long</a> (*<a class="code" href="../../d5/d11/ripper_8c.html#aaa295e68cc162c1332bd842eef200a3e">rb_magic_comment_length_t</a>)(<span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">long</span> len);
<a name="l06373"></a>06373 <span class="keyword">typedef</span> void (*<a class="code" href="../../d5/d11/ripper_8c.html#a191830a4ed0005354eea2b6a1741639e">rb_magic_comment_setter_t</a>)(<span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *val);
<a name="l06374"></a>06374 
<a name="l06375"></a>06375 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l06376"></a>06376 <a class="code" href="../../d7/dc0/parse_8y.html#a35c61cf2b11055da82f4e2264b2bea53">magic_comment_encoding</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *val)
<a name="l06377"></a>06377 {
<a name="l06378"></a><a class="code" href="../../d7/dc0/parse_8y.html#a73badaf9933ff199d0f668d09a7f5d4a">06378</a>     <span class="keywordflow">if</span> (!<a class="code" href="../../d7/dc0/parse_8y.html#a926e0a72fb45f59dcde1490c84d94967">comment_at_top</a>(parser)) {
<a name="l06379"></a>06379         <span class="keywordflow">return</span>;
<a name="l06380"></a>06380     }
<a name="l06381"></a>06381     <a class="code" href="../../d7/dc0/parse_8y.html#a52fd85030a5897245bf08ea733f141fe">parser_set_encode</a>(parser, val);
<a name="l06382"></a>06382 }
<a name="l06383"></a>06383 
<a name="l06384"></a>06384 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l06385"></a>06385 <a class="code" href="../../d7/dc0/parse_8y.html#a190ee587a3a9f8287285ab5f4b4c74b4">parser_set_token_info</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keyword">const</span> <span class="keywordtype">char</span> *val)
<a name="l06386"></a>06386 {
<a name="l06387"></a>06387     <span class="keywordtype">int</span> *p = &amp;parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#ad8d4e8dac64b2b8df97c394b621a47d5">parser_token_info_enabled</a>;
<a name="l06388"></a>06388 
<a name="l06389"></a>06389     <span class="keywordflow">switch</span> (*val) {
<a name="l06390"></a><a class="code" href="../../d7/dc0/parse_8y.html#ae9f929f755858a84578c7fa394f00a15">06390</a>       <span class="keywordflow">case</span> <span class="charliteral">&apos;t&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;T&apos;</span>:
<a name="l06391"></a>06391         <span class="keywordflow">if</span> (<a class="code" href="../../dc/db1/win32_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(val, <span class="stringliteral">&quot;true&quot;</span>) == 0) {
<a name="l06392"></a>06392             *p = <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l06393"></a>06393             <span class="keywordflow">return</span>;
<a name="l06394"></a>06394         }
<a name="l06395"></a>06395         <span class="keywordflow">break</span>;
<a name="l06396"></a>06396       <span class="keywordflow">case</span> <span class="charliteral">&apos;f&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;F&apos;</span>:
<a name="l06397"></a>06397         <span class="keywordflow">if</span> (<a class="code" href="../../dc/db1/win32_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(val, <span class="stringliteral">&quot;false&quot;</span>) == 0) {
<a name="l06398"></a>06398             *p = <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l06399"></a>06399             <span class="keywordflow">return</span>;
<a name="l06400"></a>06400         }
<a name="l06401"></a>06401         <span class="keywordflow">break</span>;
<a name="l06402"></a>06402     }
<a name="l06403"></a>06403     <a class="code" href="../../db/dcc/error_8c.html#ab89177d61c1d80c8e75fa0ff73addd85">rb_compile_warning</a>(<a class="code" href="../../d2/d47/compile_8c.html#aca52b28c4504720708a4fab8675dc407">ruby_sourcefile</a>, <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>, <span class="stringliteral">&quot;invalid value for %s: %s&quot;</span>, name, val);
<a name="l06404"></a>06404 }
<a name="l06405"></a><a class="code" href="../../d7/dc0/parse_8y.html#a5e4cd1ea9f95a2304b3b9703c88255b8">06405</a> 
<a name="l06406"></a>06406 <span class="keyword">struct </span><a class="code" href="../../d3/d72/structmagic__comment.html">magic_comment</a> {
<a name="l06407"></a>06407     <span class="keyword">const</span> <span class="keywordtype">char</span> *name;
<a name="l06408"></a>06408     <a class="code" href="../../d5/d11/ripper_8c.html#a191830a4ed0005354eea2b6a1741639e">rb_magic_comment_setter_t</a> func;
<a name="l06409"></a>06409     <a class="code" href="../../d5/d11/ripper_8c.html#aaa295e68cc162c1332bd842eef200a3e">rb_magic_comment_length_t</a> <a class="code" href="../../d3/d72/structmagic__comment.html#aba72bba46505c3b2ec12d117d85d47d0">length</a>;
<a name="l06410"></a>06410 };
<a name="l06411"></a>06411 
<a name="l06412"></a>06412 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d3/d72/structmagic__comment.html">magic_comment</a> <a class="code" href="../../d7/dc0/parse_8y.html#a8aa1e00e411642a6f52111134afc3dad">magic_comments</a>[] = {
<a name="l06413"></a>06413     {<span class="stringliteral">&quot;coding&quot;</span>, <a class="code" href="../../d7/dc0/parse_8y.html#a35c61cf2b11055da82f4e2264b2bea53">magic_comment_encoding</a>, <a class="code" href="../../d7/dc0/parse_8y.html#a5ef8f6dfb2d66a30d03278efd7c13b5c">parser_encode_length</a>},
<a name="l06414"></a>06414     {<span class="stringliteral">&quot;encoding&quot;</span>, <a class="code" href="../../d7/dc0/parse_8y.html#a35c61cf2b11055da82f4e2264b2bea53">magic_comment_encoding</a>, <a class="code" href="../../d7/dc0/parse_8y.html#a5ef8f6dfb2d66a30d03278efd7c13b5c">parser_encode_length</a>},
<a name="l06415"></a>06415     {<span class="stringliteral">&quot;warn_indent&quot;</span>, <a class="code" href="../../d7/dc0/parse_8y.html#a190ee587a3a9f8287285ab5f4b4c74b4">parser_set_token_info</a>},
<a name="l06416"></a>06416 };
<a name="l06417"></a>06417 <span class="preprocessor">#endif</span>
<a name="l06418"></a>06418 <span class="preprocessor"></span>
<a name="l06419"></a>06419 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l06420"></a>06420 <a class="code" href="../../d7/dc0/parse_8y.html#abf06907a8046aeb01e404e172d39941a">magic_comment_marker</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keywordtype">long</span> len)
<a name="l06421"></a>06421 {
<a name="l06422"></a>06422     <span class="keywordtype">long</span> i = 2;
<a name="l06423"></a>06423 
<a name="l06424"></a>06424     <span class="keywordflow">while</span> (i &lt; len) {
<a name="l06425"></a>06425         <span class="keywordflow">switch</span> (str[i]) {
<a name="l06426"></a>06426           <span class="keywordflow">case</span> <span class="charliteral">&apos;-&apos;</span>:
<a name="l06427"></a>06427             <span class="keywordflow">if</span> (str[i-1] == <span class="charliteral">&apos;*&apos;</span> &amp;&amp; str[i-2] == <span class="charliteral">&apos;-&apos;</span>) {
<a name="l06428"></a>06428                 <span class="keywordflow">return</span> str + i + 1;
<a name="l06429"></a><a class="code" href="../../d7/dc0/parse_8y.html#ac6131a270341c0e17602e22a693e1733">06429</a>             }
<a name="l06430"></a>06430             i += 2;
<a name="l06431"></a>06431             <span class="keywordflow">break</span>;
<a name="l06432"></a>06432           <span class="keywordflow">case</span> <span class="charliteral">&apos;*&apos;</span>:
<a name="l06433"></a>06433             <span class="keywordflow">if</span> (i + 1 &gt;= len) <span class="keywordflow">return</span> 0;
<a name="l06434"></a>06434             <span class="keywordflow">if</span> (str[i+1] != <span class="charliteral">&apos;-&apos;</span>) {
<a name="l06435"></a>06435                 i += 4;
<a name="l06436"></a>06436             }
<a name="l06437"></a>06437             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (str[i-1] != <span class="charliteral">&apos;-&apos;</span>) {
<a name="l06438"></a>06438                 i += 2;
<a name="l06439"></a>06439             }
<a name="l06440"></a>06440             <span class="keywordflow">else</span> {
<a name="l06441"></a>06441                 <span class="keywordflow">return</span> str + i + 2;
<a name="l06442"></a>06442             }
<a name="l06443"></a>06443             <span class="keywordflow">break</span>;
<a name="l06444"></a>06444           <span class="keywordflow">default</span>:
<a name="l06445"></a>06445             i += 3;
<a name="l06446"></a>06446             <span class="keywordflow">break</span>;
<a name="l06447"></a>06447         }
<a name="l06448"></a>06448     }
<a name="l06449"></a>06449     <span class="keywordflow">return</span> 0;
<a name="l06450"></a>06450 }
<a name="l06451"></a>06451 
<a name="l06452"></a>06452 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l06453"></a><a class="code" href="../../d7/dc0/parse_8y.html#af2ac23cf36a06bdf9117d34624762dbb">06453</a> <a class="code" href="../../d7/dc0/parse_8y.html#a47a214cd0b37682fba5c9b1c78d3eb17">parser_magic_comment</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keywordtype">long</span> len)
<a name="l06454"></a>06454 {
<a name="l06455"></a>06455     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> name = 0, val = 0;
<a name="l06456"></a>06456     <span class="keyword">const</span> <span class="keywordtype">char</span> *beg, *end, *vbeg, *vend;
<a name="l06457"></a><a class="code" href="../../d7/dc0/parse_8y.html#a29c0b788bc0cb326563ac030b16c1a62">06457</a> <span class="preprocessor">#define str_copy(_s, _p, _n) ((_s) \</span>
<a name="l06458"></a>06458 <span class="preprocessor">        ? (void)(rb_str_resize((_s), (_n)), \</span>
<a name="l06459"></a>06459 <span class="preprocessor">           MEMCPY(RSTRING_PTR(_s), (_p), char, (_n)), (_s)) \</span>
<a name="l06460"></a>06460 <span class="preprocessor">        : (void)((_s) = STR_NEW((_p), (_n))))</span>
<a name="l06461"></a>06461 <span class="preprocessor"></span>
<a name="l06462"></a>06462     <span class="keywordflow">if</span> (len &lt;= 7) <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l06463"></a>06463     <span class="keywordflow">if</span> (!(beg = <a class="code" href="../../d7/dc0/parse_8y.html#abf06907a8046aeb01e404e172d39941a">magic_comment_marker</a>(str, len))) <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l06464"></a>06464     <span class="keywordflow">if</span> (!(end = <a class="code" href="../../d7/dc0/parse_8y.html#abf06907a8046aeb01e404e172d39941a">magic_comment_marker</a>(beg, str + len - beg))) <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l06465"></a>06465     str = beg;
<a name="l06466"></a>06466     len = end - beg - 3;
<a name="l06467"></a>06467 
<a name="l06468"></a>06468     <span class="comment">/* %r&quot;([^\\s\&apos;\&quot;:;]+)\\s*:\\s*(\&quot;(?:\\\\.|[^\&quot;])*\&quot;|[^\&quot;\\s;]+)[\\s;]*&quot; */</span>
<a name="l06469"></a>06469     <span class="keywordflow">while</span> (len &gt; 0) {
<a name="l06470"></a>06470 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l06471"></a>06471 <span class="preprocessor"></span>        <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d3/d72/structmagic__comment.html">magic_comment</a> *p = magic_comments;
<a name="l06472"></a>06472 <span class="preprocessor">#endif</span>
<a name="l06473"></a>06473 <span class="preprocessor"></span>        <span class="keywordtype">char</span> *s;
<a name="l06474"></a>06474         <span class="keywordtype">int</span> i;
<a name="l06475"></a>06475         <span class="keywordtype">long</span> n = 0;
<a name="l06476"></a>06476 
<a name="l06477"></a>06477         <span class="keywordflow">for</span> (; len &gt; 0 &amp;&amp; *str; str++, --len) {
<a name="l06478"></a>06478             <span class="keywordflow">switch</span> (*str) {
<a name="l06479"></a>06479               <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;&quot;&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;:&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;;&apos;</span>:
<a name="l06480"></a>06480                 <span class="keywordflow">continue</span>;
<a name="l06481"></a><a class="code" href="../../d7/dc0/parse_8y.html#a5050704296343fe0b63dccdb94f22d58">06481</a>             }
<a name="l06482"></a>06482             <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(*str)) <span class="keywordflow">break</span>;
<a name="l06483"></a>06483         }
<a name="l06484"></a>06484         <span class="keywordflow">for</span> (beg = str; len &gt; 0; str++, --len) {
<a name="l06485"></a>06485             <span class="keywordflow">switch</span> (*str) {
<a name="l06486"></a>06486               <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;&quot;&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;:&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;;&apos;</span>:
<a name="l06487"></a><a class="code" href="../../d7/dc0/parse_8y.html#a19300a89f070a47ba472a7cf8f6c4c0c">06487</a>                 <span class="keywordflow">break</span>;
<a name="l06488"></a>06488               <span class="keywordflow">default</span>:
<a name="l06489"></a>06489                 <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(*str)) <span class="keywordflow">break</span>;
<a name="l06490"></a>06490                 <span class="keywordflow">continue</span>;
<a name="l06491"></a>06491             }
<a name="l06492"></a>06492             <span class="keywordflow">break</span>;
<a name="l06493"></a>06493         }
<a name="l06494"></a>06494         <span class="keywordflow">for</span> (end = str; len &gt; 0 &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(*str); str++, --len);
<a name="l06495"></a>06495         <span class="keywordflow">if</span> (!len) <span class="keywordflow">break</span>;
<a name="l06496"></a>06496         <span class="keywordflow">if</span> (*str != <span class="charliteral">&apos;:&apos;</span>) <span class="keywordflow">continue</span>;
<a name="l06497"></a>06497 
<a name="l06498"></a>06498         <span class="keywordflow">do</span> str++; <span class="keywordflow">while</span> (--len &gt; 0 &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(*str));
<a name="l06499"></a>06499         <span class="keywordflow">if</span> (!len) <span class="keywordflow">break</span>;
<a name="l06500"></a>06500         <span class="keywordflow">if</span> (*str == <span class="charliteral">&apos;&quot;&apos;</span>) {
<a name="l06501"></a>06501             <span class="keywordflow">for</span> (vbeg = ++str; --len &gt; 0 &amp;&amp; *str != <span class="charliteral">&apos;&quot;&apos;</span>; str++) {
<a name="l06502"></a>06502                 <span class="keywordflow">if</span> (*str == <span class="charliteral">&apos;\\&apos;</span>) {
<a name="l06503"></a>06503                     --len;
<a name="l06504"></a>06504                     ++str;
<a name="l06505"></a>06505                 }
<a name="l06506"></a>06506             }
<a name="l06507"></a>06507             vend = str;
<a name="l06508"></a>06508             <span class="keywordflow">if</span> (len) {
<a name="l06509"></a>06509                 --len;
<a name="l06510"></a>06510                 ++str;
<a name="l06511"></a>06511             }
<a name="l06512"></a>06512         }
<a name="l06513"></a>06513         <span class="keywordflow">else</span> {
<a name="l06514"></a>06514             <span class="keywordflow">for</span> (vbeg = str; len &gt; 0 &amp;&amp; *str != <span class="charliteral">&apos;&quot;&apos;</span> &amp;&amp; *str != <span class="charliteral">&apos;;&apos;</span> &amp;&amp; !<a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(*str); --len, str++);
<a name="l06515"></a>06515             vend = str;
<a name="l06516"></a>06516         }
<a name="l06517"></a>06517         <span class="keywordflow">while</span> (len &gt; 0 &amp;&amp; (*str == <span class="charliteral">&apos;;&apos;</span> || <a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(*str))) --len, str++;
<a name="l06518"></a>06518 
<a name="l06519"></a>06519         n = end - beg;
<a name="l06520"></a>06520         <a class="code" href="../../d5/d11/ripper_8c.html#a250f05050c4cfaf3b71d136ed2d9c661">str_copy</a>(name, beg, n);
<a name="l06521"></a>06521         s = <a class="code" href="../../d8/df4/generator_8h.html#aa0c7097c0d82c8372072fbab5a604e39">RSTRING_PTR</a>(name);
<a name="l06522"></a>06522         <span class="keywordflow">for</span> (i = 0; i &lt; n; ++i) {
<a name="l06523"></a>06523             <span class="keywordflow">if</span> (s[i] == <span class="charliteral">&apos;-&apos;</span>) s[i] = <span class="charliteral">&apos;_&apos;</span>;
<a name="l06524"></a>06524         }
<a name="l06525"></a>06525 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l06526"></a>06526 <span class="preprocessor"></span>        <span class="keywordflow">do</span> {
<a name="l06527"></a>06527             <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afcd8c37e32c2bfc294617c5553cd1e3b">STRNCASECMP</a>(p-&gt;<a class="code" href="../../d3/d72/structmagic__comment.html#aeee886e006dc088750e37d8757264f1d">name</a>, s, n) == 0) {
<a name="l06528"></a>06528                 n = vend - vbeg;
<a name="l06529"></a>06529                 <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d3/d72/structmagic__comment.html#aba72bba46505c3b2ec12d117d85d47d0">length</a>) {
<a name="l06530"></a>06530                     n = (*p-&gt;<a class="code" href="../../d3/d72/structmagic__comment.html#aba72bba46505c3b2ec12d117d85d47d0">length</a>)(parser, vbeg, n);
<a name="l06531"></a>06531                 }
<a name="l06532"></a>06532                 <a class="code" href="../../d5/d11/ripper_8c.html#a250f05050c4cfaf3b71d136ed2d9c661">str_copy</a>(val, vbeg, n);
<a name="l06533"></a>06533                 (*p-&gt;<a class="code" href="../../d3/d72/structmagic__comment.html#add12215a70476d760f4ca0b1762a1b73">func</a>)(parser, s, <a class="code" href="../../d8/df4/generator_8h.html#aa0c7097c0d82c8372072fbab5a604e39">RSTRING_PTR</a>(val));
<a name="l06534"></a>06534                 <span class="keywordflow">break</span>;
<a name="l06535"></a>06535             }
<a name="l06536"></a>06536         } <span class="keywordflow">while</span> (++p &lt; magic_comments + <a class="code" href="../../dc/dcc/array_8c.html#a4ac8fee05a285361c33a2b0d9c2d555c">numberof</a>(magic_comments));
<a name="l06537"></a>06537 <span class="preprocessor">#else</span>
<a name="l06538"></a>06538 <span class="preprocessor"></span>        dispatch2(<a class="code" href="../../d3/d72/structmagic__comment.html">magic_comment</a>, name, val);
<a name="l06539"></a>06539 <span class="preprocessor">#endif</span>
<a name="l06540"></a>06540 <span class="preprocessor"></span>    }
<a name="l06541"></a>06541 
<a name="l06542"></a>06542     <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l06543"></a>06543 }
<a name="l06544"></a>06544 
<a name="l06545"></a><a class="code" href="../../d7/dc0/parse_8y.html#ab6ec502979b60f56d9fbd9c7efb8554e">06545</a> <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l06546"></a>06546 <a class="code" href="../../d7/dc0/parse_8y.html#a1577ddd9ad59f71c121e86f4a5782622">set_file_encoding</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keyword">const</span> <span class="keywordtype">char</span> *send)
<a name="l06547"></a>06547 {
<a name="l06548"></a>06548     <span class="keywordtype">int</span> sep = 0;
<a name="l06549"></a>06549     <span class="keyword">const</span> <span class="keywordtype">char</span> *beg = str;
<a name="l06550"></a>06550     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> s;
<a name="l06551"></a>06551 
<a name="l06552"></a>06552     <span class="keywordflow">for</span> (;;) {
<a name="l06553"></a>06553         <span class="keywordflow">if</span> (send - str &lt;= 6) <span class="keywordflow">return</span>;
<a name="l06554"></a>06554         <span class="keywordflow">switch</span> (str[6]) {
<a name="l06555"></a>06555           <span class="keywordflow">case</span> <span class="charliteral">&apos;C&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;c&apos;</span>: str += 6; <span class="keywordflow">continue</span>;
<a name="l06556"></a><a class="code" href="../../d7/dc0/parse_8y.html#af41563d0fb6019d231aac7dd301a5489">06556</a>           <span class="keywordflow">case</span> <span class="charliteral">&apos;O&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;o&apos;</span>: str += 5; <span class="keywordflow">continue</span>;
<a name="l06557"></a>06557           <span class="keywordflow">case</span> <span class="charliteral">&apos;D&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;d&apos;</span>: str += 4; <span class="keywordflow">continue</span>;
<a name="l06558"></a>06558           <span class="keywordflow">case</span> <span class="charliteral">&apos;I&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;i&apos;</span>: str += 3; <span class="keywordflow">continue</span>;
<a name="l06559"></a>06559           <span class="keywordflow">case</span> <span class="charliteral">&apos;N&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;n&apos;</span>: str += 2; <span class="keywordflow">continue</span>;
<a name="l06560"></a>06560           <span class="keywordflow">case</span> <span class="charliteral">&apos;G&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;g&apos;</span>: str += 1; <span class="keywordflow">continue</span>;
<a name="l06561"></a>06561           <span class="keywordflow">case</span> <span class="charliteral">&apos;=&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;:&apos;</span>:
<a name="l06562"></a>06562             sep = 1;
<a name="l06563"></a>06563             str += 6;
<a name="l06564"></a>06564             <span class="keywordflow">break</span>;
<a name="l06565"></a>06565           <span class="keywordflow">default</span>:
<a name="l06566"></a>06566             str += 6;
<a name="l06567"></a>06567             <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(*str)) <span class="keywordflow">break</span>;
<a name="l06568"></a>06568             <span class="keywordflow">continue</span>;
<a name="l06569"></a>06569         }
<a name="l06570"></a>06570         <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afcd8c37e32c2bfc294617c5553cd1e3b">STRNCASECMP</a>(str-6, <span class="stringliteral">&quot;coding&quot;</span>, 6) == 0) <span class="keywordflow">break</span>;
<a name="l06571"></a>06571     }
<a name="l06572"></a>06572     <span class="keywordflow">for</span> (;;) {
<a name="l06573"></a>06573         <span class="keywordflow">do</span> {
<a name="l06574"></a>06574             <span class="keywordflow">if</span> (++str &gt;= send) <span class="keywordflow">return</span>;
<a name="l06575"></a>06575         } <span class="keywordflow">while</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(*str));
<a name="l06576"></a>06576         <span class="keywordflow">if</span> (sep) <span class="keywordflow">break</span>;
<a name="l06577"></a>06577         <span class="keywordflow">if</span> (*str != <span class="charliteral">&apos;=&apos;</span> &amp;&amp; *str != <span class="charliteral">&apos;:&apos;</span>) <span class="keywordflow">return</span>;
<a name="l06578"></a>06578         sep = 1;
<a name="l06579"></a>06579         str++;
<a name="l06580"></a>06580     }
<a name="l06581"></a>06581     beg = str;
<a name="l06582"></a>06582     <span class="keywordflow">while</span> ((*str == <span class="charliteral">&apos;-&apos;</span> || *str == <span class="charliteral">&apos;_&apos;</span> || <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8c0056118f585fa052e0f76e3198db6a">ISALNUM</a>(*str)) &amp;&amp; ++str &lt; send);
<a name="l06583"></a>06583     s = <a class="code" href="../../db/d2e/intern_8h.html#a48b2b873adb8b6a04254bd631c4b03c5">rb_str_new</a>(beg, <a class="code" href="../../d7/dc0/parse_8y.html#a5ef8f6dfb2d66a30d03278efd7c13b5c">parser_encode_length</a>(parser, beg, str - beg));
<a name="l06584"></a>06584     <a class="code" href="../../d7/dc0/parse_8y.html#a52fd85030a5897245bf08ea733f141fe">parser_set_encode</a>(parser, <a class="code" href="../../d8/df4/generator_8h.html#aa0c7097c0d82c8372072fbab5a604e39">RSTRING_PTR</a>(s));
<a name="l06585"></a>06585     <a class="code" href="../../db/d2e/intern_8h.html#a0a133856edb99f69eae3cb5a9e275ac9">rb_str_resize</a>(s, 0);
<a name="l06586"></a>06586 }
<a name="l06587"></a>06587 
<a name="l06588"></a>06588 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l06589"></a>06589 <a class="code" href="../../d7/dc0/parse_8y.html#afed0ba1d93197b631db7bbc854de24a8">parser_prepare</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l06590"></a>06590 {
<a name="l06591"></a>06591     <span class="keywordtype">int</span> c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l06592"></a>06592     <span class="keywordflow">switch</span> (c) {
<a name="l06593"></a>06593       <span class="keywordflow">case</span> <span class="charliteral">&apos;#&apos;</span>:
<a name="l06594"></a>06594         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#aa2f8bef78fbbbce2cc6e7fd364a365be">peek</a>(<span class="charliteral">&apos;!&apos;</span>)) parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a620d0d73556d934fc4a2b8fc39a40f94">has_shebang</a> = 1;
<a name="l06595"></a>06595         <span class="keywordflow">break</span>;
<a name="l06596"></a>06596       <span class="keywordflow">case</span> 0xef:                <span class="comment">/* UTF-8 BOM marker */</span>
<a name="l06597"></a>06597         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a> - <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> &gt;= 2 &amp;&amp;
<a name="l06598"></a>06598             (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>[0] == 0xbb &amp;&amp;
<a name="l06599"></a>06599             (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>[1] == 0xbf) {
<a name="l06600"></a>06600             parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a> = <a class="code" href="../../d5/db5/encoding_8c.html#a893004271cf8c790ca40c4712261aa8c">rb_utf8_encoding</a>();
<a name="l06601"></a>06601             <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> += 2;
<a name="l06602"></a><a class="code" href="../../d7/dc0/parse_8y.html#a3534c4f124e0c7bc29095cc82e23b581">06602</a>             lex_pbeg = <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>;
<a name="l06603"></a>06603             <span class="keywordflow">return</span>;
<a name="l06604"></a>06604         }
<a name="l06605"></a>06605         <span class="keywordflow">break</span>;
<a name="l06606"></a>06606       <span class="keywordflow">case</span> <a class="code" href="../../da/d50/vsnprintf_8c.html#a59adc4c82490d23754cd39c2fb99b0da">EOF</a>:
<a name="l06607"></a><a class="code" href="../../d7/dc0/parse_8y.html#a9fe4adfaa0808138b7a8a324a2500ff4">06607</a>         <span class="keywordflow">return</span>;
<a name="l06608"></a>06608     }
<a name="l06609"></a>06609     <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06610"></a>06610     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a> = <a class="code" href="../../d5/db5/encoding_8c.html#ac21ed764f3b39453b6a848dd64a19585">rb_enc_get</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ada3e2d92f1cfb779d4ec3be8cf58c76b">lex_lastline</a>);
<a name="l06611"></a>06611 }
<a name="l06612"></a>06612 
<a name="l06613"></a>06613 <span class="preprocessor">#define IS_ARG() (lex_state == EXPR_ARG || lex_state == EXPR_CMDARG)</span>
<a name="l06614"></a>06614 <span class="preprocessor"></span><span class="preprocessor">#define IS_END() (lex_state == EXPR_END || lex_state == EXPR_ENDARG || lex_state == EXPR_ENDFN)</span>
<a name="l06615"></a>06615 <span class="preprocessor"></span><span class="preprocessor">#define IS_BEG() (lex_state == EXPR_BEG || lex_state == EXPR_MID || lex_state == EXPR_VALUE || lex_state == EXPR_CLASS)</span>
<a name="l06616"></a>06616 <span class="preprocessor"></span><span class="preprocessor">#define IS_SPCARG(c) (IS_ARG() &amp;&amp; space_seen &amp;&amp; !ISSPACE(c))</span>
<a name="l06617"></a>06617 <span class="preprocessor"></span><span class="preprocessor">#define IS_LABEL_POSSIBLE() ((lex_state == EXPR_BEG &amp;&amp; !cmd_state) || IS_ARG())</span>
<a name="l06618"></a>06618 <span class="preprocessor"></span><span class="preprocessor">#define IS_LABEL_SUFFIX(n) (peek_n(&apos;:&apos;,(n)) &amp;&amp; !peek_n(&apos;:&apos;, (n)+1))</span>
<a name="l06619"></a><a class="code" href="../../d7/dc0/parse_8y.html#ac5e59e9787e03a160eecbcf3fdd288d6">06619</a> <span class="preprocessor"></span>
<a name="l06620"></a>06620 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l06621"></a>06621 <span class="preprocessor"></span><span class="preprocessor">#define ambiguous_operator(op, syn) ( \</span>
<a name="l06622"></a>06622 <span class="preprocessor">    rb_warning0(&quot;`&quot;op&quot;&apos; after local variable is interpreted as binary operator&quot;), \</span>
<a name="l06623"></a><a class="code" href="../../d7/dc0/parse_8y.html#a6c940848330b0d18af754a682923858f">06623</a> <span class="preprocessor">    rb_warning0(&quot;even though it seems like &quot;syn&quot;&quot;))</span>
<a name="l06624"></a>06624 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l06625"></a>06625 <span class="preprocessor"></span><span class="preprocessor">#define ambiguous_operator(op, syn) dispatch2(operator_ambiguous, ripper_intern(op), rb_str_new_cstr(syn))</span>
<a name="l06626"></a>06626 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l06627"></a><a class="code" href="../../d7/dc0/parse_8y.html#a6d396387896bc55f40d3fa2a47b6fc03">06627</a> <span class="preprocessor"></span><span class="preprocessor">#define warn_balanced(op, syn) ((void) \</span>
<a name="l06628"></a>06628 <span class="preprocessor">    (last_state != EXPR_CLASS &amp;&amp; last_state != EXPR_DOT &amp;&amp; \</span>
<a name="l06629"></a>06629 <span class="preprocessor">     last_state != EXPR_FNAME &amp;&amp; last_state != EXPR_ENDFN &amp;&amp; \</span>
<a name="l06630"></a><a class="code" href="../../d7/dc0/parse_8y.html#ab75c4deceb4295665a687660d8278e73">06630</a> <span class="preprocessor">     last_state != EXPR_ENDARG &amp;&amp; \</span>
<a name="l06631"></a>06631 <span class="preprocessor">     space_seen &amp;&amp; !ISSPACE(c) &amp;&amp; \</span>
<a name="l06632"></a>06632 <span class="preprocessor">     (ambiguous_operator(op, syn), 0)))</span>
<a name="l06633"></a><a class="code" href="../../d7/dc0/parse_8y.html#a83d4e1b960946a4d876f87cb0f9616f7">06633</a> <span class="preprocessor"></span>
<a name="l06634"></a>06634 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l06635"></a>06635 <a class="code" href="../../d7/dc0/parse_8y.html#af006539b61f4b4c5b76969e1993e672b">parser_yylex</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l06636"></a>06636 {
<a name="l06637"></a><a class="code" href="../../d7/dc0/parse_8y.html#a0c940d9e4ce4cfee55d7ccf714a1303d">06637</a>     <span class="keyword">register</span> <span class="keywordtype">int</span> c;
<a name="l06638"></a>06638     <span class="keywordtype">int</span> space_seen = 0;
<a name="l06639"></a>06639     <span class="keywordtype">int</span> cmd_state;
<a name="l06640"></a>06640     <span class="keyword">enum</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389">lex_state_e</a> last_state;
<a name="l06641"></a>06641     <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc;
<a name="l06642"></a><a class="code" href="../../d7/dc0/parse_8y.html#a35dc86bd9cbb3844f4eb328b72e35d8d">06642</a>     <span class="keywordtype">int</span> mb;
<a name="l06643"></a>06643 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l06644"></a>06644 <span class="preprocessor"></span>    <span class="keywordtype">int</span> fallthru = <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l06645"></a>06645 <span class="preprocessor">#endif</span>
<a name="l06646"></a><a class="code" href="../../d7/dc0/parse_8y.html#a75ad8f8fe412862ac33077ffe9ff27b9">06646</a> <span class="preprocessor"></span>
<a name="l06647"></a>06647     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a>) {
<a name="l06648"></a>06648         <span class="keywordtype">int</span> token;
<a name="l06649"></a>06649         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(<a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a>) == <a class="code" href="../../d5/d11/ripper_8c.html#a60ff266c9c51812eadf38c736e230689">NODE_HEREDOC</a>) {
<a name="l06650"></a>06650             token = <a class="code" href="../../d5/d11/ripper_8c.html#a0f0803d06630f0ffff03c6aa74757aaa">here_document</a>(<a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a>);
<a name="l06651"></a>06651             <span class="keywordflow">if</span> (token == <a class="code" href="../../d5/d11/ripper_8c.html#af4eeb9189245212ffd361ff11bcccdc0">tSTRING_END</a>) {
<a name="l06652"></a>06652                 <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = 0;
<a name="l06653"></a>06653                 <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389abb6d8e9fea98441c3b5971c4e7d509ae">EXPR_END</a>;
<a name="l06654"></a>06654             }
<a name="l06655"></a>06655         }
<a name="l06656"></a>06656         <span class="keywordflow">else</span> {
<a name="l06657"></a>06657             token = <a class="code" href="../../d5/d11/ripper_8c.html#ab4bd39c0e5ad4b73e888ec6a9a2b4256">parse_string</a>(<a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a>);
<a name="l06658"></a>06658             <span class="keywordflow">if</span> (token == <a class="code" href="../../d5/d11/ripper_8c.html#af4eeb9189245212ffd361ff11bcccdc0">tSTRING_END</a> || token == <a class="code" href="../../d5/d11/ripper_8c.html#af2f874084a5f0c5ccf581641c92a9891">tREGEXP_END</a>) {
<a name="l06659"></a>06659                 <a class="code" href="../../d8/d16/gc_8c.html#a53016811c87ff4c3ea839c9e85a9a9a4">rb_gc_force_recycle</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)<a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a>);
<a name="l06660"></a>06660                 lex_strterm = 0;
<a name="l06661"></a><a class="code" href="../../d7/dc0/parse_8y.html#a75acfb3798e577ebd296e604e422e86b">06661</a>                 <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389abb6d8e9fea98441c3b5971c4e7d509ae">EXPR_END</a>;
<a name="l06662"></a>06662             }
<a name="l06663"></a>06663         }
<a name="l06664"></a>06664         <span class="keywordflow">return</span> token;
<a name="l06665"></a>06665     }
<a name="l06666"></a>06666     cmd_state = <a class="code" href="../../d5/d11/ripper_8c.html#a302ec49a8c1c02e0dbaa5b4362263e40">command_start</a>;
<a name="l06667"></a>06667     <a class="code" href="../../d5/d11/ripper_8c.html#a302ec49a8c1c02e0dbaa5b4362263e40">command_start</a> = <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l06668"></a>06668   retry:
<a name="l06669"></a>06669     last_state = <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a>;
<a name="l06670"></a><a class="code" href="../../d7/dc0/parse_8y.html#aaef8ffc48c0cd2f26d22f446735cd765">06670</a>     <span class="keywordflow">switch</span> (c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) {
<a name="l06671"></a><a class="code" href="../../d7/dc0/parse_8y.html#a1c048c86d4090e164a912e3045282f9f">06671</a>       <span class="keywordflow">case</span> <span class="charliteral">&apos;\0&apos;</span>:                <span class="comment">/* NUL */</span>
<a name="l06672"></a><a class="code" href="../../d7/dc0/parse_8y.html#acf4744d9ea857f9df3d1d89e056b20b0">06672</a>       <span class="keywordflow">case</span> <span class="charliteral">&apos;\004&apos;</span>:              <span class="comment">/* ^D */</span>
<a name="l06673"></a><a class="code" href="../../d7/dc0/parse_8y.html#a668cfea151c63e845fa1c2931e2a39ea">06673</a>       <span class="keywordflow">case</span> <span class="charliteral">&apos;\032&apos;</span>:              <span class="comment">/* ^Z */</span>
<a name="l06674"></a><a class="code" href="../../d7/dc0/parse_8y.html#a733bded1a4e5947da3d0a0c629188ed1">06674</a>       <span class="keywordflow">case</span> -1:                  <span class="comment">/* end of script. */</span>
<a name="l06675"></a><a class="code" href="../../d7/dc0/parse_8y.html#a0ef2d3af9b4d83add8e5489cfc3988d5">06675</a>         <span class="keywordflow">return</span> 0;
<a name="l06676"></a><a class="code" href="../../d7/dc0/parse_8y.html#a7b134e9bb5a5ab60833db1649abb92fb">06676</a> 
<a name="l06677"></a><a class="code" href="../../d7/dc0/parse_8y.html#a4c4eeed212616499da05689f1ef72141">06677</a>         <span class="comment">/* white spaces */</span>
<a name="l06678"></a><a class="code" href="../../d7/dc0/parse_8y.html#a90b1befe6592f9326ede9fe677f6907c">06678</a>       <span class="keywordflow">case</span> <span class="charliteral">&apos; &apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;\t&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;\f&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;\r&apos;</span>:
<a name="l06679"></a><a class="code" href="../../d7/dc0/parse_8y.html#aed9075c666a973d19aeaaed7a1dfc5d4">06679</a>       <span class="keywordflow">case</span> <span class="stringliteral">&apos;\13&apos;</span>: <span class="comment">/* &apos;\v&apos; */</span>
<a name="l06680"></a><a class="code" href="../../d7/dc0/parse_8y.html#ab4bd39c0e5ad4b73e888ec6a9a2b4256">06680</a>         space_seen = 1;
<a name="l06681"></a><a class="code" href="../../d7/dc0/parse_8y.html#a0b81155c789c321756eabfef906ab16b">06681</a> <span class="preprocessor">#ifdef RIPPER</span>
<a name="l06682"></a><a class="code" href="../../d7/dc0/parse_8y.html#a0f0803d06630f0ffff03c6aa74757aaa">06682</a> <span class="preprocessor"></span>        <span class="keywordflow">while</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>())) {
<a name="l06683"></a><a class="code" href="../../d7/dc0/parse_8y.html#af51d8b343abeb4ee91736ce82702ad6a">06683</a>             <span class="keywordflow">switch</span> (c) {
<a name="l06684"></a><a class="code" href="../../d7/dc0/parse_8y.html#a29027bf440885f2de4462e41b9a969d4">06684</a>               <span class="keywordflow">case</span> <span class="charliteral">&apos; &apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;\t&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;\f&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;\r&apos;</span>:
<a name="l06685"></a><a class="code" href="../../d7/dc0/parse_8y.html#adcf02626de924b0ed8c7a5927a443c21">06685</a>               <span class="keywordflow">case</span> <span class="stringliteral">&apos;\13&apos;</span>: <span class="comment">/* &apos;\v&apos; */</span>
<a name="l06686"></a>06686                 <span class="keywordflow">break</span>;
<a name="l06687"></a>06687               <span class="keywordflow">default</span>:
<a name="l06688"></a><a class="code" href="../../d7/dc0/parse_8y.html#a63339b3dcfb84e6213fb0c9f8aba2c64">06688</a>                 <span class="keywordflow">goto</span> outofloop;
<a name="l06689"></a><a class="code" href="../../d7/dc0/parse_8y.html#a9ab46f60487a699cf912d90d402a734c">06689</a>             }
<a name="l06690"></a><a class="code" href="../../d7/dc0/parse_8y.html#a574f8b78e40dd79a4046b0cc2beccb4e">06690</a>         }
<a name="l06691"></a><a class="code" href="../../d7/dc0/parse_8y.html#a10ce8f505b60a94d404e4e43513933ae">06691</a>       outofloop:
<a name="l06692"></a><a class="code" href="../../d7/dc0/parse_8y.html#a5fc9367bfccabbd01bfb5acca2b2a6f6">06692</a>         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06693"></a><a class="code" href="../../d7/dc0/parse_8y.html#a9b98a334ce6c0615b5716b51b217b042">06693</a>         ripper_dispatch_scan_event(parser, <a class="code" href="../../df/dea/eventids2_8c.html#ac4fb68a6a71c99f2bee2d085cf109948">tSP</a>);
<a name="l06694"></a><a class="code" href="../../d7/dc0/parse_8y.html#a559dd69bd596f607c3978ea98ec430e9">06694</a> <span class="preprocessor">#endif</span>
<a name="l06695"></a>06695 <span class="preprocessor"></span>        <span class="keywordflow">goto</span> retry;
<a name="l06696"></a>06696 
<a name="l06697"></a>06697       <span class="keywordflow">case</span> <span class="charliteral">&apos;#&apos;</span>:         <span class="comment">/* it&apos;s a comment */</span>
<a name="l06698"></a>06698         <span class="comment">/* no magic_comment in shebang line */</span>
<a name="l06699"></a>06699         <span class="keywordflow">if</span> (!<a class="code" href="../../d7/dc0/parse_8y.html#a47a214cd0b37682fba5c9b1c78d3eb17">parser_magic_comment</a>(parser, <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>, <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a> - <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>)) {
<a name="l06700"></a>06700             <span class="keywordflow">if</span> (<a class="code" href="../../d7/dc0/parse_8y.html#a926e0a72fb45f59dcde1490c84d94967">comment_at_top</a>(parser)) {
<a name="l06701"></a>06701                 <a class="code" href="../../d7/dc0/parse_8y.html#a1577ddd9ad59f71c121e86f4a5782622">set_file_encoding</a>(parser, <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>, <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a>);
<a name="l06702"></a>06702             }
<a name="l06703"></a>06703         }
<a name="l06704"></a>06704         <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a>;
<a name="l06705"></a>06705 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l06706"></a>06706 <span class="preprocessor"></span>        ripper_dispatch_scan_event(parser, <a class="code" href="../../df/dea/eventids2_8c.html#a7bdf96ce7e4aa6391bf25c268c6c90a9">tCOMMENT</a>);
<a name="l06707"></a>06707         fallthru = <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l06708"></a>06708 <span class="preprocessor">#endif</span>
<a name="l06709"></a>06709 <span class="preprocessor"></span>        <span class="comment">/* fall through */</span>
<a name="l06710"></a>06710       <span class="keywordflow">case</span> <span class="charliteral">&apos;\n&apos;</span>:
<a name="l06711"></a><a class="code" href="../../d7/dc0/parse_8y.html#acf3bf78187c7dfbba241b27d1110b531">06711</a>         <span class="keywordflow">switch</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a>) {
<a name="l06712"></a>06712           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>:
<a name="l06713"></a>06713           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>:
<a name="l06714"></a>06714           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>:
<a name="l06715"></a>06715           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a98a4a7774a64c9570a583444940f74d5">EXPR_CLASS</a>:
<a name="l06716"></a>06716           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a26cd215d29270ab3dcfa7bf9bbb81193">EXPR_VALUE</a>:
<a name="l06717"></a>06717 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l06718"></a>06718 <span class="preprocessor"></span>            <span class="keywordflow">if</span> (!fallthru) {
<a name="l06719"></a>06719                 ripper_dispatch_scan_event(parser, <a class="code" href="../../df/dea/eventids2_8c.html#abc01c9797fcd802bcbb89119b2a5fcf2">tIGNORED_NL</a>);
<a name="l06720"></a>06720             }
<a name="l06721"></a>06721             fallthru = <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l06722"></a>06722 <span class="preprocessor">#endif</span>
<a name="l06723"></a>06723 <span class="preprocessor"></span>            <span class="keywordflow">goto</span> retry;
<a name="l06724"></a>06724           <span class="keywordflow">default</span>:
<a name="l06725"></a>06725             <span class="keywordflow">break</span>;
<a name="l06726"></a>06726         }
<a name="l06727"></a>06727         <span class="keywordflow">while</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>())) {
<a name="l06728"></a>06728             <span class="keywordflow">switch</span> (c) {
<a name="l06729"></a>06729               <span class="keywordflow">case</span> <span class="charliteral">&apos; &apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;\t&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;\f&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;\r&apos;</span>:
<a name="l06730"></a>06730               <span class="keywordflow">case</span> <span class="stringliteral">&apos;\13&apos;</span>: <span class="comment">/* &apos;\v&apos; */</span>
<a name="l06731"></a>06731                 space_seen = 1;
<a name="l06732"></a>06732                 <span class="keywordflow">break</span>;
<a name="l06733"></a>06733               <span class="keywordflow">case</span> <span class="charliteral">&apos;.&apos;</span>: {
<a name="l06734"></a>06734                   <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) != <span class="charliteral">&apos;.&apos;</span>) {
<a name="l06735"></a>06735                       <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06736"></a>06736                       <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(<span class="charliteral">&apos;.&apos;</span>);
<a name="l06737"></a>06737                       <span class="keywordflow">goto</span> retry;
<a name="l06738"></a>06738                   }
<a name="l06739"></a>06739               }
<a name="l06740"></a>06740               <span class="keywordflow">default</span>:
<a name="l06741"></a>06741                 --<a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>;
<a name="l06742"></a>06742                 <a class="code" href="../../d5/d11/ripper_8c.html#a390839b1224bcabe4141b01d94595111">lex_nextline</a> = <a class="code" href="../../d5/d11/ripper_8c.html#ada3e2d92f1cfb779d4ec3be8cf58c76b">lex_lastline</a>;
<a name="l06743"></a>06743               <span class="keywordflow">case</span> -1:          <span class="comment">/* EOF no decrement*/</span>
<a name="l06744"></a>06744                 <a class="code" href="../../d5/d11/ripper_8c.html#a78b87c7a31c73f4d182e2af460d4f009">lex_goto_eol</a>(parser);
<a name="l06745"></a>06745 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l06746"></a>06746 <span class="preprocessor"></span>                <span class="keywordflow">if</span> (c != -1) {
<a name="l06747"></a>06747                     parser-&gt;tokp = <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>;
<a name="l06748"></a>06748                 }
<a name="l06749"></a>06749 <span class="preprocessor">#endif</span>
<a name="l06750"></a>06750 <span class="preprocessor"></span>                <span class="keywordflow">goto</span> normal_newline;
<a name="l06751"></a>06751             }
<a name="l06752"></a>06752         }
<a name="l06753"></a>06753       normal_newline:
<a name="l06754"></a>06754         <a class="code" href="../../d5/d11/ripper_8c.html#a302ec49a8c1c02e0dbaa5b4362263e40">command_start</a> = <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l06755"></a>06755         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l06756"></a>06756         <span class="keywordflow">return</span> <span class="charliteral">&apos;\n&apos;</span>;
<a name="l06757"></a>06757 
<a name="l06758"></a>06758       <span class="keywordflow">case</span> <span class="charliteral">&apos;*&apos;</span>:
<a name="l06759"></a>06759         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;*&apos;</span>) {
<a name="l06760"></a>06760             <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l06761"></a>06761                 <a class="code" href="../../d5/d11/ripper_8c.html#a574f8b78e40dd79a4046b0cc2beccb4e">set_yylval_id</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3637bfb7d8b8ae77f0dccb4841c70673">tPOW</a>);
<a name="l06762"></a>06762                 <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l06763"></a>06763                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a>;
<a name="l06764"></a>06764             }
<a name="l06765"></a>06765             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06766"></a>06766             c = <a class="code" href="../../d5/d11/ripper_8c.html#a3637bfb7d8b8ae77f0dccb4841c70673">tPOW</a>;
<a name="l06767"></a>06767         }
<a name="l06768"></a>06768         <span class="keywordflow">else</span> {
<a name="l06769"></a>06769             <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l06770"></a>06770                 <a class="code" href="../../d5/d11/ripper_8c.html#a574f8b78e40dd79a4046b0cc2beccb4e">set_yylval_id</a>(<span class="charliteral">&apos;*&apos;</span>);
<a name="l06771"></a>06771                 <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l06772"></a>06772                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a>;
<a name="l06773"></a>06773             }
<a name="l06774"></a>06774             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06775"></a><a class="code" href="../../d7/dc0/parse_8y.html#affd804aa116f7d43493d29c6607df14d">06775</a>             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a82590f9b63a085ac5f0583c8aaefdec2">IS_SPCARG</a>(c)) {
<a name="l06776"></a>06776                 <a class="code" href="../../d5/d11/ripper_8c.html#ac3f01cfa65c2c0a61a6f83b556b892f3">rb_warning0</a>(<span class="stringliteral">&quot;`*&apos; interpreted as argument prefix&quot;</span>);
<a name="l06777"></a>06777                 c = <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a>;
<a name="l06778"></a><a class="code" href="../../d7/dc0/parse_8y.html#aa72172bec2f824525eb35bc05d102e55">06778</a>             }
<a name="l06779"></a><a class="code" href="../../d7/dc0/parse_8y.html#ab7f7b869d091a546a9381b1bcacf15a0">06779</a>             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a1436a59750d881d30cbd3873682868f8">IS_BEG</a>()) {
<a name="l06780"></a><a class="code" href="../../d7/dc0/parse_8y.html#a99a53301fa04e6eb1b2f15cf11c63bb5">06780</a>                 c = <a class="code" href="../../d5/d11/ripper_8c.html#a198a2397950cd18304a5aa1d297c5c49">tSTAR</a>;
<a name="l06781"></a><a class="code" href="../../d7/dc0/parse_8y.html#a27923e7c90c9f7bed49845772092c04d">06781</a>             }
<a name="l06782"></a><a class="code" href="../../d7/dc0/parse_8y.html#a054410a01d650b035ea8f1f263c48aa8">06782</a>             <span class="keywordflow">else</span> {
<a name="l06783"></a>06783                 <a class="code" href="../../d5/d11/ripper_8c.html#a043e2757b60ef78bc7bea525be8df035">warn_balanced</a>(<span class="stringliteral">&quot;*&quot;</span>, <span class="stringliteral">&quot;argument prefix&quot;</span>);
<a name="l06784"></a><a class="code" href="../../d7/dc0/parse_8y.html#a78fd981b3a747e74ed4e19a19777f5c5">06784</a>                 c = <span class="charliteral">&apos;*&apos;</span>;
<a name="l06785"></a>06785             }
<a name="l06786"></a>06786         }
<a name="l06787"></a>06787         <span class="keywordflow">switch</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a>) {
<a name="l06788"></a><a class="code" href="../../d7/dc0/parse_8y.html#ad17b98e320d948c047e2649400d87ce1">06788</a>           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>: <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>:
<a name="l06789"></a>06789             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>; <span class="keywordflow">break</span>;
<a name="l06790"></a>06790           <span class="keywordflow">default</span>:
<a name="l06791"></a>06791             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>; <span class="keywordflow">break</span>;
<a name="l06792"></a>06792         }
<a name="l06793"></a>06793         <span class="keywordflow">return</span> c;
<a name="l06794"></a>06794 
<a name="l06795"></a>06795       <span class="keywordflow">case</span> <span class="charliteral">&apos;!&apos;</span>:
<a name="l06796"></a>06796         c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l06797"></a>06797         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a> || <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>) {
<a name="l06798"></a>06798             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>;
<a name="l06799"></a>06799             <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;@&apos;</span>) {
<a name="l06800"></a>06800                 <span class="keywordflow">return</span> <span class="charliteral">&apos;!&apos;</span>;
<a name="l06801"></a>06801             }
<a name="l06802"></a><a class="code" href="../../d7/dc0/parse_8y.html#afafe3348aa336380fba0589ea7e4c50b">06802</a>         }
<a name="l06803"></a>06803         <span class="keywordflow">else</span> {
<a name="l06804"></a>06804             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l06805"></a>06805         }
<a name="l06806"></a>06806         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l06807"></a>06807             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#aa8f0fa309e4e39cda30f2116fb979320">tNEQ</a>;
<a name="l06808"></a>06808         }
<a name="l06809"></a>06809         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;~&apos;</span>) {
<a name="l06810"></a>06810             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a18a357e5edec5f1ff68c4bc4fc5d0c84">tNMATCH</a>;
<a name="l06811"></a>06811         }
<a name="l06812"></a>06812         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06813"></a>06813         <span class="keywordflow">return</span> <span class="charliteral">&apos;!&apos;</span>;
<a name="l06814"></a>06814 
<a name="l06815"></a><a class="code" href="../../d7/dc0/parse_8y.html#af331a7e7db9acfc249dfb7a8fe700198">06815</a>       <span class="keywordflow">case</span> <span class="charliteral">&apos;=&apos;</span>:
<a name="l06816"></a>06816         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab6ab5791e2b786131b7170981969eb69">was_bol</a>()) {
<a name="l06817"></a>06817             <span class="comment">/* skip embedded rd document */</span>
<a name="l06818"></a>06818             <span class="keywordflow">if</span> (strncmp(<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>, <span class="stringliteral">&quot;begin&quot;</span>, 5) == 0 &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>[5])) {
<a name="l06819"></a>06819 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l06820"></a>06820 <span class="preprocessor"></span>                <span class="keywordtype">int</span> first_p = <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l06821"></a>06821 
<a name="l06822"></a>06822                 <a class="code" href="../../d5/d11/ripper_8c.html#a78b87c7a31c73f4d182e2af460d4f009">lex_goto_eol</a>(parser);
<a name="l06823"></a>06823                 ripper_dispatch_scan_event(parser, <a class="code" href="../../df/dea/eventids2_8c.html#a88c914a8b2cb228da9b9e537117732df">tEMBDOC_BEG</a>);
<a name="l06824"></a>06824 <span class="preprocessor">#endif</span>
<a name="l06825"></a>06825 <span class="preprocessor"></span>                <span class="keywordflow">for</span> (;;) {
<a name="l06826"></a>06826                     <a class="code" href="../../d5/d11/ripper_8c.html#a78b87c7a31c73f4d182e2af460d4f009">lex_goto_eol</a>(parser);
<a name="l06827"></a>06827 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l06828"></a>06828 <span class="preprocessor"></span>                    <span class="keywordflow">if</span> (!first_p) {
<a name="l06829"></a>06829                         ripper_dispatch_scan_event(parser, <a class="code" href="../../df/dea/eventids2_8c.html#a0d96a2b66d98c03f7f336871180b52b8">tEMBDOC</a>);
<a name="l06830"></a>06830                     }
<a name="l06831"></a>06831                     first_p = <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l06832"></a><a class="code" href="../../d7/dc0/parse_8y.html#aec7b4948b84efb6c3629b3bda47141e0">06832</a> <span class="preprocessor">#endif</span>
<a name="l06833"></a>06833 <span class="preprocessor"></span>                    c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l06834"></a>06834                     <span class="keywordflow">if</span> (c == -1) {
<a name="l06835"></a>06835                         <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;embedded document meets end of file&quot;</span>);
<a name="l06836"></a>06836                         <span class="keywordflow">return</span> 0;
<a name="l06837"></a>06837                     }
<a name="l06838"></a>06838                     <span class="keywordflow">if</span> (c != <span class="charliteral">&apos;=&apos;</span>) <span class="keywordflow">continue</span>;
<a name="l06839"></a>06839                     <span class="keywordflow">if</span> (strncmp(<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>, <span class="stringliteral">&quot;end&quot;</span>, 3) == 0 &amp;&amp;
<a name="l06840"></a>06840                         (<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> + 3 == <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a> || <a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>[3]))) {
<a name="l06841"></a>06841                         <span class="keywordflow">break</span>;
<a name="l06842"></a>06842                     }
<a name="l06843"></a>06843                 }
<a name="l06844"></a>06844                 <a class="code" href="../../d5/d11/ripper_8c.html#a78b87c7a31c73f4d182e2af460d4f009">lex_goto_eol</a>(parser);
<a name="l06845"></a>06845 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l06846"></a>06846 <span class="preprocessor"></span>                ripper_dispatch_scan_event(parser, <a class="code" href="../../df/dea/eventids2_8c.html#aa3ecb407a94dd3d36e32e24dc663c0e7">tEMBDOC_END</a>);
<a name="l06847"></a>06847 <span class="preprocessor">#endif</span>
<a name="l06848"></a>06848 <span class="preprocessor"></span>                <span class="keywordflow">goto</span> retry;
<a name="l06849"></a>06849             }
<a name="l06850"></a>06850         }
<a name="l06851"></a>06851 
<a name="l06852"></a>06852         <span class="keywordflow">switch</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a>) {
<a name="l06853"></a>06853           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>: <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>:
<a name="l06854"></a>06854             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>; <span class="keywordflow">break</span>;
<a name="l06855"></a>06855           <span class="keywordflow">default</span>:
<a name="l06856"></a>06856             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>; <span class="keywordflow">break</span>;
<a name="l06857"></a>06857         }
<a name="l06858"></a>06858         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l06859"></a>06859             <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l06860"></a>06860                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ac6db743a4f2e6f90976870022d8914a2">tEQQ</a>;
<a name="l06861"></a><a class="code" href="../../d7/dc0/parse_8y.html#a19246ad5eb2d00f7df643573511e3142">06861</a>             }
<a name="l06862"></a>06862             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06863"></a>06863             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a6ea996f3ab75bd127d6326b180214c6f">tEQ</a>;
<a name="l06864"></a>06864         }
<a name="l06865"></a>06865         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;~&apos;</span>) {
<a name="l06866"></a>06866             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a6fba3b7a35b6a4abc5692d7bc6f7cc51">tMATCH</a>;
<a name="l06867"></a>06867         }
<a name="l06868"></a>06868         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;&gt;&apos;</span>) {
<a name="l06869"></a>06869             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a9df99a64c8253f03638b24327e2ff7b6">tASSOC</a>;
<a name="l06870"></a>06870         }
<a name="l06871"></a>06871         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06872"></a>06872         <span class="keywordflow">return</span> <span class="charliteral">&apos;=&apos;</span>;
<a name="l06873"></a>06873 
<a name="l06874"></a>06874       <span class="keywordflow">case</span> <span class="charliteral">&apos;&lt;&apos;</span>:
<a name="l06875"></a>06875         last_state = <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a>;
<a name="l06876"></a>06876         c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l06877"></a>06877         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;&lt;&apos;</span> &amp;&amp;
<a name="l06878"></a>06878             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> != <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a> &amp;&amp;
<a name="l06879"></a>06879             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> != <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a98a4a7774a64c9570a583444940f74d5">EXPR_CLASS</a> &amp;&amp;
<a name="l06880"></a>06880             !<a class="code" href="../../d5/d11/ripper_8c.html#a36b408a3839be13ba255b818d5720035">IS_END</a>() &amp;&amp;
<a name="l06881"></a>06881             (!<a class="code" href="../../d5/d11/ripper_8c.html#a8d78f62dab3d5267c076a82976814b8a">IS_ARG</a>() || space_seen)) {
<a name="l06882"></a>06882             <span class="keywordtype">int</span> token = <a class="code" href="../../d5/d11/ripper_8c.html#af51d8b343abeb4ee91736ce82702ad6a">heredoc_identifier</a>();
<a name="l06883"></a>06883             <span class="keywordflow">if</span> (token) <span class="keywordflow">return</span> token;
<a name="l06884"></a>06884         }
<a name="l06885"></a>06885         <span class="keywordflow">switch</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a>) {
<a name="l06886"></a>06886           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>: <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>:
<a name="l06887"></a>06887             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>; <span class="keywordflow">break</span>;
<a name="l06888"></a>06888           <span class="keywordflow">default</span>:
<a name="l06889"></a>06889             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>; <span class="keywordflow">break</span>;
<a name="l06890"></a>06890         }
<a name="l06891"></a>06891         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l06892"></a>06892             <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;&gt;&apos;</span>) {
<a name="l06893"></a>06893                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#af5d97f1c301f97e35c69e5e21d698c8b">tCMP</a>;
<a name="l06894"></a>06894             }
<a name="l06895"></a>06895             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06896"></a>06896             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a4c271a73151d715c58bf15c8607054e0">tLEQ</a>;
<a name="l06897"></a>06897         }
<a name="l06898"></a>06898         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;&lt;&apos;</span>) {
<a name="l06899"></a>06899             <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l06900"></a>06900                 <a class="code" href="../../d5/d11/ripper_8c.html#a574f8b78e40dd79a4046b0cc2beccb4e">set_yylval_id</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aabd668249ab17583bb8ba7b0a15dc88a">tLSHFT</a>);
<a name="l06901"></a>06901                 <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l06902"></a>06902                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a>;
<a name="l06903"></a>06903             }
<a name="l06904"></a>06904             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06905"></a>06905             <a class="code" href="../../d5/d11/ripper_8c.html#a043e2757b60ef78bc7bea525be8df035">warn_balanced</a>(<span class="stringliteral">&quot;&lt;&lt;&quot;</span>, <span class="stringliteral">&quot;here document&quot;</span>);
<a name="l06906"></a>06906             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#aabd668249ab17583bb8ba7b0a15dc88a">tLSHFT</a>;
<a name="l06907"></a>06907         }
<a name="l06908"></a>06908         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06909"></a>06909         <span class="keywordflow">return</span> <span class="charliteral">&apos;&lt;&apos;</span>;
<a name="l06910"></a>06910 
<a name="l06911"></a>06911       <span class="keywordflow">case</span> <span class="charliteral">&apos;&gt;&apos;</span>:
<a name="l06912"></a>06912         <span class="keywordflow">switch</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a>) {
<a name="l06913"></a>06913           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>: <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>:
<a name="l06914"></a>06914             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>; <span class="keywordflow">break</span>;
<a name="l06915"></a>06915           <span class="keywordflow">default</span>:
<a name="l06916"></a>06916             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>; <span class="keywordflow">break</span>;
<a name="l06917"></a>06917         }
<a name="l06918"></a>06918         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l06919"></a>06919             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a285fd90a21df46bc9781328e0ac5d22e">tGEQ</a>;
<a name="l06920"></a>06920         }
<a name="l06921"></a>06921         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;&gt;&apos;</span>) {
<a name="l06922"></a>06922             <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l06923"></a>06923                 <a class="code" href="../../d5/d11/ripper_8c.html#a574f8b78e40dd79a4046b0cc2beccb4e">set_yylval_id</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a5d34fc3d8e54b552366d4e8941852610">tRSHFT</a>);
<a name="l06924"></a>06924                 <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l06925"></a>06925                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a>;
<a name="l06926"></a><a class="code" href="../../d7/dc0/parse_8y.html#ac4a8140bd2878a83d6df2f5293c98eed">06926</a>             }
<a name="l06927"></a>06927             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06928"></a>06928             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a5d34fc3d8e54b552366d4e8941852610">tRSHFT</a>;
<a name="l06929"></a>06929         }
<a name="l06930"></a>06930         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06931"></a>06931         <span class="keywordflow">return</span> <span class="charliteral">&apos;&gt;&apos;</span>;
<a name="l06932"></a>06932 
<a name="l06933"></a>06933       <span class="keywordflow">case</span> <span class="charliteral">&apos;&quot;&apos;</span>:
<a name="l06934"></a>06934         <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2e577b512d22c4741a1f905721487a42">NEW_STRTERM</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25a7f4c3b93bf426276864f9bc8dc29a867">str_dquote</a>, <span class="charliteral">&apos;&quot;&apos;</span>, 0);
<a name="l06935"></a>06935         <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ae8e25024ff03620afa83e2a3c9bceb7b">tSTRING_BEG</a>;
<a name="l06936"></a>06936 
<a name="l06937"></a>06937       <span class="keywordflow">case</span> <span class="charliteral">&apos;`&apos;</span>:
<a name="l06938"></a>06938         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>) {
<a name="l06939"></a>06939             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a6625ca72427336b58374fc438e51b225">EXPR_ENDFN</a>;
<a name="l06940"></a>06940             <span class="keywordflow">return</span> c;
<a name="l06941"></a>06941         }
<a name="l06942"></a>06942         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>) {
<a name="l06943"></a><a class="code" href="../../d7/dc0/parse_8y.html#a33bc9954a8770b25c15d1f51c58f3867">06943</a>             <span class="keywordflow">if</span> (cmd_state)
<a name="l06944"></a>06944                 <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aad207364dc60f12acc33ec7685fd7c84">EXPR_CMDARG</a>;
<a name="l06945"></a>06945             <span class="keywordflow">else</span>
<a name="l06946"></a>06946                 <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>;
<a name="l06947"></a>06947             <span class="keywordflow">return</span> c;
<a name="l06948"></a>06948         }
<a name="l06949"></a>06949         <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2e577b512d22c4741a1f905721487a42">NEW_STRTERM</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25a7dd48ff6d3edd0dd7b4495292f22e6f0">str_xquote</a>, <span class="charliteral">&apos;`&apos;</span>, 0);
<a name="l06950"></a>06950         <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a476bb0d5e59ee5787ecb5bfdf6aa64a0">tXSTRING_BEG</a>;
<a name="l06951"></a>06951 
<a name="l06952"></a>06952       <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>:
<a name="l06953"></a>06953         <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2e577b512d22c4741a1f905721487a42">NEW_STRTERM</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25aaf6a1bae38eadb504993e21689e6e390">str_squote</a>, <span class="charliteral">&apos;\&apos;&apos;</span>, 0);
<a name="l06954"></a>06954         <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ae8e25024ff03620afa83e2a3c9bceb7b">tSTRING_BEG</a>;
<a name="l06955"></a>06955 
<a name="l06956"></a>06956       <span class="keywordflow">case</span> <span class="charliteral">&apos;?&apos;</span>:
<a name="l06957"></a>06957         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a36b408a3839be13ba255b818d5720035">IS_END</a>()) {
<a name="l06958"></a>06958             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a26cd215d29270ab3dcfa7bf9bbb81193">EXPR_VALUE</a>;
<a name="l06959"></a>06959             <span class="keywordflow">return</span> <span class="charliteral">&apos;?&apos;</span>;
<a name="l06960"></a><a class="code" href="../../d7/dc0/parse_8y.html#aa2d9d34b302b849f923743d4b4be53dc">06960</a>         }
<a name="l06961"></a>06961         c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l06962"></a>06962         <span class="keywordflow">if</span> (c == -1) {
<a name="l06963"></a>06963             <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;incomplete character syntax&quot;</span>);
<a name="l06964"></a>06964             <span class="keywordflow">return</span> 0;
<a name="l06965"></a>06965         }
<a name="l06966"></a><a class="code" href="../../d7/dc0/parse_8y.html#a7f2ac42d971e00443f67fb34261abc00">06966</a>         <span class="keywordflow">if</span> (<a class="code" href="../../d5/de3/encoding_8h.html#afabf48f5c16361d188a2ed990c34acfa">rb_enc_isspace</a>(c, parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a>)) {
<a name="l06967"></a>06967             <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#a8d78f62dab3d5267c076a82976814b8a">IS_ARG</a>()) {
<a name="l06968"></a>06968                 <span class="keywordtype">int</span> c2 = 0;
<a name="l06969"></a>06969                 <span class="keywordflow">switch</span> (c) {
<a name="l06970"></a>06970                   <span class="keywordflow">case</span> <span class="charliteral">&apos; &apos;</span>:
<a name="l06971"></a>06971                     c2 = <span class="charliteral">&apos;s&apos;</span>;
<a name="l06972"></a>06972                     <span class="keywordflow">break</span>;
<a name="l06973"></a>06973                   <span class="keywordflow">case</span> <span class="charliteral">&apos;\n&apos;</span>:
<a name="l06974"></a>06974                     c2 = <span class="charliteral">&apos;n&apos;</span>;
<a name="l06975"></a>06975                     <span class="keywordflow">break</span>;
<a name="l06976"></a>06976                   <span class="keywordflow">case</span> <span class="charliteral">&apos;\t&apos;</span>:
<a name="l06977"></a>06977                     c2 = <span class="charliteral">&apos;t&apos;</span>;
<a name="l06978"></a>06978                     <span class="keywordflow">break</span>;
<a name="l06979"></a>06979                   <span class="keywordflow">case</span> <span class="charliteral">&apos;\v&apos;</span>:
<a name="l06980"></a>06980                     c2 = <span class="charliteral">&apos;v&apos;</span>;
<a name="l06981"></a>06981                     <span class="keywordflow">break</span>;
<a name="l06982"></a>06982                   <span class="keywordflow">case</span> <span class="charliteral">&apos;\r&apos;</span>:
<a name="l06983"></a>06983                     c2 = <span class="charliteral">&apos;r&apos;</span>;
<a name="l06984"></a>06984                     <span class="keywordflow">break</span>;
<a name="l06985"></a>06985                   <span class="keywordflow">case</span> <span class="charliteral">&apos;\f&apos;</span>:
<a name="l06986"></a>06986                     c2 = <span class="charliteral">&apos;f&apos;</span>;
<a name="l06987"></a>06987                     <span class="keywordflow">break</span>;
<a name="l06988"></a>06988                 }
<a name="l06989"></a>06989                 <span class="keywordflow">if</span> (c2) {
<a name="l06990"></a>06990                     <a class="code" href="../../d5/d11/ripper_8c.html#a0dace759c53dbbe49ff7835c0a202027">rb_warnI</a>(<span class="stringliteral">&quot;invalid character syntax; use ?\\%c&quot;</span>, c2);
<a name="l06991"></a>06991                 }
<a name="l06992"></a>06992             }
<a name="l06993"></a>06993           ternary:
<a name="l06994"></a>06994             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l06995"></a>06995             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a26cd215d29270ab3dcfa7bf9bbb81193">EXPR_VALUE</a>;
<a name="l06996"></a>06996             <span class="keywordflow">return</span> <span class="charliteral">&apos;?&apos;</span>;
<a name="l06997"></a>06997         }
<a name="l06998"></a>06998         <a class="code" href="../../d5/d11/ripper_8c.html#acf4744d9ea857f9df3d1d89e056b20b0">newtok</a>();
<a name="l06999"></a>06999         enc = parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a>;
<a name="l07000"></a>07000         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#a78fd981b3a747e74ed4e19a19777f5c5">parser_isascii</a>()) {
<a name="l07001"></a>07001             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a9e54e692f310530a4cb22d98adbb4e91">tokadd_mbchar</a>(c) == -1) <span class="keywordflow">return</span> 0;
<a name="l07002"></a>07002         }
<a name="l07003"></a>07003         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="../../d5/de3/encoding_8h.html#a8d0f0029d4bd82780241fb22fe7bf5b8">rb_enc_isalnum</a>(c, parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a>) || c == <span class="charliteral">&apos;_&apos;</span>) &amp;&amp;
<a name="l07004"></a>07004                  <a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a> &lt; <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a> &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#a27923e7c90c9f7bed49845772092c04d">is_identchar</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>, <a class="code" href="../../d5/d11/ripper_8c.html#a2802e5cf00a42f8a4ddd8d8d1ff5dffb">lex_pend</a>, parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a>)) {
<a name="l07005"></a>07005             <span class="keywordflow">goto</span> ternary;
<a name="l07006"></a>07006         }
<a name="l07007"></a>07007         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;\\&apos;</span>) {
<a name="l07008"></a>07008             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#aa2f8bef78fbbbce2cc6e7fd364a365be">peek</a>(<span class="charliteral">&apos;u&apos;</span>)) {
<a name="l07009"></a>07009                 <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07010"></a>07010                 c = <a class="code" href="../../d7/dc0/parse_8y.html#aaa9a4cf453cefcd2ac75a38c7779e93a">parser_tokadd_utf8</a>(parser, &amp;enc, 0, 0, 0);
<a name="l07011"></a>07011                 <span class="keywordflow">if</span> (0x80 &lt;= c) {
<a name="l07012"></a>07012                     <a class="code" href="../../d5/d11/ripper_8c.html#a0b81155c789c321756eabfef906ab16b">tokaddmbc</a>(c, enc);
<a name="l07013"></a>07013                 }
<a name="l07014"></a><a class="code" href="../../d7/dc0/parse_8y.html#a491e36f465bcc626156202db04978cd7">07014</a>                 <span class="keywordflow">else</span> {
<a name="l07015"></a>07015                     <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07016"></a>07016                 }
<a name="l07017"></a>07017             }
<a name="l07018"></a>07018             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#ab2dc4b3c563466e9b33047660d5f4fbb">lex_eol_p</a>() &amp;&amp; !(c = *<a class="code" href="../../d5/d11/ripper_8c.html#aefa00e2f248493fb57b6738873b4cb12">lex_p</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#af96ff81718c3c27b342b5958fac6cb7e">ISASCII</a>(c))) {
<a name="l07019"></a>07019                 <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07020"></a>07020                 <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a9e54e692f310530a4cb22d98adbb4e91">tokadd_mbchar</a>(c) == -1) <span class="keywordflow">return</span> 0;
<a name="l07021"></a>07021             }
<a name="l07022"></a>07022             <span class="keywordflow">else</span> {
<a name="l07023"></a><a class="code" href="../../d7/dc0/parse_8y.html#a637ce9985953c7f271fd38a9820128e0">07023</a>                 c = <a class="code" href="../../d5/d11/ripper_8c.html#a7b134e9bb5a5ab60833db1649abb92fb">read_escape</a>(0, &amp;enc);
<a name="l07024"></a>07024                 <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07025"></a>07025             }
<a name="l07026"></a>07026         }
<a name="l07027"></a>07027         <span class="keywordflow">else</span> {
<a name="l07028"></a>07028             <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07029"></a>07029         }
<a name="l07030"></a>07030         <a class="code" href="../../d5/d11/ripper_8c.html#a4cb8635c421d3ada48f4c1a5ecfe6997">tokfix</a>();
<a name="l07031"></a>07031         <a class="code" href="../../d5/d11/ripper_8c.html#a63339b3dcfb84e6213fb0c9f8aba2c64">set_yylval_str</a>(<a class="code" href="../../d5/d11/ripper_8c.html#af3d71032dc2e6d8f81d50a3c8df7cfe7">STR_NEW3</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>(), <a class="code" href="../../d5/d11/ripper_8c.html#a69cc32ebd541279dcf93b82393380233">toklen</a>(), enc, 0));
<a name="l07032"></a>07032         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389abb6d8e9fea98441c3b5971c4e7d509ae">EXPR_END</a>;
<a name="l07033"></a><a class="code" href="../../d7/dc0/parse_8y.html#a0be85261168125d878ba6089b9ebaf0a">07033</a>         <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a34f5c56a3e2b501dafead39af9e1dd1c">tCHAR</a>;
<a name="l07034"></a>07034 
<a name="l07035"></a>07035       <span class="keywordflow">case</span> <span class="charliteral">&apos;&amp;&apos;</span>:
<a name="l07036"></a>07036         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;&amp;&apos;</span>) {
<a name="l07037"></a>07037             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07038"></a>07038             <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l07039"></a>07039                 <a class="code" href="../../d5/d11/ripper_8c.html#a574f8b78e40dd79a4046b0cc2beccb4e">set_yylval_id</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a65277f756450c2f9e7117faf2c01339a">tANDOP</a>);
<a name="l07040"></a>07040                 <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07041"></a>07041                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a>;
<a name="l07042"></a>07042             }
<a name="l07043"></a>07043             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07044"></a>07044             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a65277f756450c2f9e7117faf2c01339a">tANDOP</a>;
<a name="l07045"></a>07045         }
<a name="l07046"></a>07046         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l07047"></a>07047             <a class="code" href="../../d5/d11/ripper_8c.html#a574f8b78e40dd79a4046b0cc2beccb4e">set_yylval_id</a>(<span class="charliteral">&apos;&amp;&apos;</span>);
<a name="l07048"></a>07048             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07049"></a>07049             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a>;
<a name="l07050"></a>07050         }
<a name="l07051"></a>07051         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07052"></a>07052         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a82590f9b63a085ac5f0583c8aaefdec2">IS_SPCARG</a>(c)) {
<a name="l07053"></a><a class="code" href="../../d7/dc0/parse_8y.html#a0afda89714e6300ba4f718241579488e">07053</a>             <a class="code" href="../../d5/d11/ripper_8c.html#ac3f01cfa65c2c0a61a6f83b556b892f3">rb_warning0</a>(<span class="stringliteral">&quot;`&amp;&apos; interpreted as argument prefix&quot;</span>);
<a name="l07054"></a>07054             c = <a class="code" href="../../d5/d11/ripper_8c.html#ab96f3c142b77bb37684eb3e8968ce99f">tAMPER</a>;
<a name="l07055"></a>07055         }
<a name="l07056"></a>07056         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a1436a59750d881d30cbd3873682868f8">IS_BEG</a>()) {
<a name="l07057"></a>07057             c = <a class="code" href="../../d5/d11/ripper_8c.html#ab96f3c142b77bb37684eb3e8968ce99f">tAMPER</a>;
<a name="l07058"></a>07058         }
<a name="l07059"></a>07059         <span class="keywordflow">else</span> {
<a name="l07060"></a>07060             <a class="code" href="../../d5/d11/ripper_8c.html#a043e2757b60ef78bc7bea525be8df035">warn_balanced</a>(<span class="stringliteral">&quot;&amp;&quot;</span>, <span class="stringliteral">&quot;argument prefix&quot;</span>);
<a name="l07061"></a>07061             c = <span class="charliteral">&apos;&amp;&apos;</span>;
<a name="l07062"></a>07062         }
<a name="l07063"></a>07063         <span class="keywordflow">switch</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a>) {
<a name="l07064"></a>07064           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>: <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>:
<a name="l07065"></a>07065             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>; <span class="keywordflow">break</span>;
<a name="l07066"></a>07066           <span class="keywordflow">default</span>:
<a name="l07067"></a>07067             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07068"></a>07068         }
<a name="l07069"></a>07069         <span class="keywordflow">return</span> c;
<a name="l07070"></a>07070 
<a name="l07071"></a>07071       <span class="keywordflow">case</span> <span class="charliteral">&apos;|&apos;</span>:
<a name="l07072"></a>07072         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;|&apos;</span>) {
<a name="l07073"></a><a class="code" href="../../d7/dc0/parse_8y.html#af36ef20882377523249710431e5e571a">07073</a>             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07074"></a>07074             <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l07075"></a>07075                 <a class="code" href="../../d5/d11/ripper_8c.html#a574f8b78e40dd79a4046b0cc2beccb4e">set_yylval_id</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a>);
<a name="l07076"></a><a class="code" href="../../d7/dc0/parse_8y.html#a94a3192b464cd7ad7e89603015bd0e23">07076</a>                 <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07077"></a>07077                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a>;
<a name="l07078"></a>07078             }
<a name="l07079"></a>07079             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07080"></a>07080             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a>;
<a name="l07081"></a>07081         }
<a name="l07082"></a>07082         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l07083"></a>07083             <a class="code" href="../../d5/d11/ripper_8c.html#a574f8b78e40dd79a4046b0cc2beccb4e">set_yylval_id</a>(<span class="charliteral">&apos;|&apos;</span>);
<a name="l07084"></a>07084             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07085"></a>07085             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a>;
<a name="l07086"></a>07086         }
<a name="l07087"></a>07087         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a> || <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>) {
<a name="l07088"></a>07088             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>;
<a name="l07089"></a>07089         }
<a name="l07090"></a>07090         <span class="keywordflow">else</span> {
<a name="l07091"></a>07091             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07092"></a>07092         }
<a name="l07093"></a>07093         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07094"></a>07094         <span class="keywordflow">return</span> <span class="charliteral">&apos;|&apos;</span>;
<a name="l07095"></a>07095 
<a name="l07096"></a><a class="code" href="../../d7/dc0/parse_8y.html#a413b97b3122fa93eff53181a1f92d07e">07096</a>       <span class="keywordflow">case</span> <span class="charliteral">&apos;+&apos;</span>:
<a name="l07097"></a>07097         c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07098"></a>07098         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a> || <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>) {
<a name="l07099"></a>07099             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>;
<a name="l07100"></a>07100             <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;@&apos;</span>) {
<a name="l07101"></a>07101                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a30c0584a6e12ebd260060a9b77159e90">tUPLUS</a>;
<a name="l07102"></a>07102             }
<a name="l07103"></a><a class="code" href="../../d7/dc0/parse_8y.html#a7412884de7525393ed236f51925b4c66">07103</a>             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07104"></a>07104             <span class="keywordflow">return</span> <span class="charliteral">&apos;+&apos;</span>;
<a name="l07105"></a>07105         }
<a name="l07106"></a>07106         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l07107"></a>07107             <a class="code" href="../../d5/d11/ripper_8c.html#a574f8b78e40dd79a4046b0cc2beccb4e">set_yylval_id</a>(<span class="charliteral">&apos;+&apos;</span>);
<a name="l07108"></a>07108             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07109"></a>07109             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a>;
<a name="l07110"></a><a class="code" href="../../d7/dc0/parse_8y.html#a2cad62b3d9f04b9a9bfec854862ab1e5">07110</a>         }
<a name="l07111"></a>07111         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a1436a59750d881d30cbd3873682868f8">IS_BEG</a>() || (<a class="code" href="../../d5/d11/ripper_8c.html#a82590f9b63a085ac5f0583c8aaefdec2">IS_SPCARG</a>(c) &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#a3c5a49f7f344bf7d4894a02ea49538d7">arg_ambiguous</a>())) {
<a name="l07112"></a>07112             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07113"></a>07113             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07114"></a>07114             <span class="keywordflow">if</span> (c != -1 &amp;&amp; <a class="code" href="../../d1/dcc/bignum_8c.html#ab615ddd0d086b80219cd7e0345d6b5ef">ISDIGIT</a>(c)) {
<a name="l07115"></a>07115                 c = <span class="charliteral">&apos;+&apos;</span>;
<a name="l07116"></a>07116                 <span class="keywordflow">goto</span> start_num;
<a name="l07117"></a><a class="code" href="../../d7/dc0/parse_8y.html#ad5076c78de9f86393ee2d6a27f050990">07117</a>             }
<a name="l07118"></a>07118             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a30c0584a6e12ebd260060a9b77159e90">tUPLUS</a>;
<a name="l07119"></a>07119         }
<a name="l07120"></a>07120         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07121"></a>07121         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07122"></a>07122         <a class="code" href="../../d5/d11/ripper_8c.html#a043e2757b60ef78bc7bea525be8df035">warn_balanced</a>(<span class="stringliteral">&quot;+&quot;</span>, <span class="stringliteral">&quot;unary operator&quot;</span>);
<a name="l07123"></a>07123         <span class="keywordflow">return</span> <span class="charliteral">&apos;+&apos;</span>;
<a name="l07124"></a><a class="code" href="../../d7/dc0/parse_8y.html#a63a661069db8c201e1ee61db9723625b">07124</a> 
<a name="l07125"></a>07125       <span class="keywordflow">case</span> <span class="charliteral">&apos;-&apos;</span>:
<a name="l07126"></a>07126         c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07127"></a>07127         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a> || <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>) {
<a name="l07128"></a>07128             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>;
<a name="l07129"></a>07129             <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;@&apos;</span>) {
<a name="l07130"></a><a class="code" href="../../d7/dc0/parse_8y.html#a525197fc5b5152ea5760a98a7e594986">07130</a>                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a2990cd3acbac56afa45019a045ddcd9e">tUMINUS</a>;
<a name="l07131"></a>07131             }
<a name="l07132"></a>07132             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07133"></a>07133             <span class="keywordflow">return</span> <span class="charliteral">&apos;-&apos;</span>;
<a name="l07134"></a>07134         }
<a name="l07135"></a>07135         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l07136"></a>07136             <a class="code" href="../../d5/d11/ripper_8c.html#a574f8b78e40dd79a4046b0cc2beccb4e">set_yylval_id</a>(<span class="charliteral">&apos;-&apos;</span>);
<a name="l07137"></a>07137             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07138"></a><a class="code" href="../../d7/dc0/parse_8y.html#a7368a8916f449d63c1bb090bca14dcd5">07138</a>             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a>;
<a name="l07139"></a>07139         }
<a name="l07140"></a>07140         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;&gt;&apos;</span>) {
<a name="l07141"></a>07141             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>;
<a name="l07142"></a>07142             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a4e47dd239d0fcc7c52fdbcc1e1955ef5">tLAMBDA</a>;
<a name="l07143"></a>07143         }
<a name="l07144"></a>07144         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a1436a59750d881d30cbd3873682868f8">IS_BEG</a>() || (<a class="code" href="../../d5/d11/ripper_8c.html#a82590f9b63a085ac5f0583c8aaefdec2">IS_SPCARG</a>(c) &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#a3c5a49f7f344bf7d4894a02ea49538d7">arg_ambiguous</a>())) {
<a name="l07145"></a>07145             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07146"></a>07146             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07147"></a>07147             <span class="keywordflow">if</span> (c != -1 &amp;&amp; <a class="code" href="../../d1/dcc/bignum_8c.html#ab615ddd0d086b80219cd7e0345d6b5ef">ISDIGIT</a>(c)) {
<a name="l07148"></a>07148                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#afb221f5d4ce1cd557eb695967604d276">tUMINUS_NUM</a>;
<a name="l07149"></a>07149             }
<a name="l07150"></a>07150             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a2990cd3acbac56afa45019a045ddcd9e">tUMINUS</a>;
<a name="l07151"></a>07151         }
<a name="l07152"></a>07152         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07153"></a>07153         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07154"></a>07154         <a class="code" href="../../d5/d11/ripper_8c.html#a043e2757b60ef78bc7bea525be8df035">warn_balanced</a>(<span class="stringliteral">&quot;-&quot;</span>, <span class="stringliteral">&quot;unary operator&quot;</span>);
<a name="l07155"></a>07155         <span class="keywordflow">return</span> <span class="charliteral">&apos;-&apos;</span>;
<a name="l07156"></a>07156 
<a name="l07157"></a><a class="code" href="../../d7/dc0/parse_8y.html#ab423d80af75c48750f2a236fced421b8">07157</a>       <span class="keywordflow">case</span> <span class="charliteral">&apos;.&apos;</span>:
<a name="l07158"></a><a class="code" href="../../d7/dc0/parse_8y.html#aefdd60ff387e322710ff80f16bedbeaa">07158</a>         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07159"></a><a class="code" href="../../d7/dc0/parse_8y.html#ad832f161067673ac6dfca392c45d77e7">07159</a>         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;.&apos;</span>) {
<a name="l07160"></a><a class="code" href="../../d7/dc0/parse_8y.html#a1e43ae61ca7f1925ca9e34f9ffbabfc2">07160</a>             <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;.&apos;</span>) {
<a name="l07161"></a><a class="code" href="../../d7/dc0/parse_8y.html#abb3433e9d5d8bb54d1731c2379ee48ff">07161</a>                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a3044adcc37f3f3a58ee0d58bc0b38b2f">tDOT3</a>;
<a name="l07162"></a><a class="code" href="../../d7/dc0/parse_8y.html#ac7122d1bf4bfda474051b50d5c0357a7">07162</a>             }
<a name="l07163"></a>07163             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07164"></a><a class="code" href="../../d7/dc0/parse_8y.html#ade8554829f1e9c005c9647e2eb1e6c25">07164</a>             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ad6d247d3b76eb71841a20a06b7248d5c">tDOT2</a>;
<a name="l07165"></a><a class="code" href="../../d7/dc0/parse_8y.html#ade8554829f1e9c005c9647e2eb1e6c25aaf6a1bae38eadb504993e21689e6e390">07165</a>         }
<a name="l07166"></a><a class="code" href="../../d7/dc0/parse_8y.html#ade8554829f1e9c005c9647e2eb1e6c25a7f4c3b93bf426276864f9bc8dc29a867">07166</a>         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07167"></a><a class="code" href="../../d7/dc0/parse_8y.html#ade8554829f1e9c005c9647e2eb1e6c25a7dd48ff6d3edd0dd7b4495292f22e6f0">07167</a>         <span class="keywordflow">if</span> (c != -1 &amp;&amp; <a class="code" href="../../d1/dcc/bignum_8c.html#ab615ddd0d086b80219cd7e0345d6b5ef">ISDIGIT</a>(c)) {
<a name="l07168"></a><a class="code" href="../../d7/dc0/parse_8y.html#ade8554829f1e9c005c9647e2eb1e6c25aa9bfa1dfaca876d4661889a3e02796b3">07168</a>             <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;no .&lt;digit&gt; floating literal anymore; put 0 before dot&quot;</span>);
<a name="l07169"></a><a class="code" href="../../d7/dc0/parse_8y.html#ade8554829f1e9c005c9647e2eb1e6c25ad032e3dd7874d9cba5349b3eea31ee2a">07169</a>         }
<a name="l07170"></a><a class="code" href="../../d7/dc0/parse_8y.html#ade8554829f1e9c005c9647e2eb1e6c25a354b632ef49ad1cfb317d270a13552a4">07170</a>         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>;
<a name="l07171"></a><a class="code" href="../../d7/dc0/parse_8y.html#ade8554829f1e9c005c9647e2eb1e6c25a47b35c63e588adb3027d930eb4a31d40">07171</a>         <span class="keywordflow">return</span> <span class="charliteral">&apos;.&apos;</span>;
<a name="l07172"></a><a class="code" href="../../d7/dc0/parse_8y.html#ade8554829f1e9c005c9647e2eb1e6c25a17e717b9057d218529b4b14f4ec6fdb9">07172</a> 
<a name="l07173"></a>07173       start_num:
<a name="l07174"></a>07174       <span class="keywordflow">case</span> <span class="charliteral">&apos;0&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;1&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;2&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;3&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;4&apos;</span>:
<a name="l07175"></a>07175       <span class="keywordflow">case</span> <span class="charliteral">&apos;5&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;6&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;7&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;8&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;9&apos;</span>:
<a name="l07176"></a><a class="code" href="../../d7/dc0/parse_8y.html#ae01a84cc3a8d426834ccf42614c3e297">07176</a>         {
<a name="l07177"></a>07177             <span class="keywordtype">int</span> is_float, seen_point, seen_e, nondigit;
<a name="l07178"></a>07178 
<a name="l07179"></a>07179             is_float = seen_point = seen_e = nondigit = 0;
<a name="l07180"></a>07180             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389abb6d8e9fea98441c3b5971c4e7d509ae">EXPR_END</a>;
<a name="l07181"></a>07181             <a class="code" href="../../d5/d11/ripper_8c.html#acf4744d9ea857f9df3d1d89e056b20b0">newtok</a>();
<a name="l07182"></a>07182             <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;-&apos;</span> || c == <span class="charliteral">&apos;+&apos;</span>) {
<a name="l07183"></a>07183                 <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07184"></a>07184                 c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07185"></a>07185             }
<a name="l07186"></a>07186             <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;0&apos;</span>) {
<a name="l07187"></a>07187 <span class="preprocessor">#define no_digits() do {yyerror(&quot;numeric literal without digits&quot;); return 0;} while (0)</span>
<a name="l07188"></a>07188 <span class="preprocessor"></span>                <span class="keywordtype">int</span> start = <a class="code" href="../../d5/d11/ripper_8c.html#a69cc32ebd541279dcf93b82393380233">toklen</a>();
<a name="l07189"></a>07189                 c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07190"></a>07190                 <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;x&apos;</span> || c == <span class="charliteral">&apos;X&apos;</span>) {
<a name="l07191"></a>07191                     <span class="comment">/* hexadecimal */</span>
<a name="l07192"></a><a class="code" href="../../d7/dc0/parse_8y.html#a78b87c7a31c73f4d182e2af460d4f009">07192</a>                     c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07193"></a><a class="code" href="../../d7/dc0/parse_8y.html#ab2dc4b3c563466e9b33047660d5f4fbb">07193</a>                     <span class="keywordflow">if</span> (c != -1 &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a419f06aab80b7c8eb3aaf4dd70463731">ISXDIGIT</a>(c)) {
<a name="l07194"></a><a class="code" href="../../d7/dc0/parse_8y.html#aa2f8bef78fbbbce2cc6e7fd364a365be">07194</a>                         <span class="keywordflow">do</span> {
<a name="l07195"></a><a class="code" href="../../d7/dc0/parse_8y.html#ae72931e0e085a840ab0d4e3e9bf77996">07195</a>                             <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;_&apos;</span>) {
<a name="l07196"></a>07196                                 <span class="keywordflow">if</span> (nondigit) <span class="keywordflow">break</span>;
<a name="l07197"></a>07197                                 nondigit = c;
<a name="l07198"></a><a class="code" href="../../d7/dc0/parse_8y.html#a2cdddde331fd21fa42c89690aa7844ff">07198</a>                                 <span class="keywordflow">continue</span>;
<a name="l07199"></a>07199                             }
<a name="l07200"></a>07200                             <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a419f06aab80b7c8eb3aaf4dd70463731">ISXDIGIT</a>(c)) <span class="keywordflow">break</span>;
<a name="l07201"></a>07201                             nondigit = 0;
<a name="l07202"></a>07202                             <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07203"></a>07203                         } <span class="keywordflow">while</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) != -1);
<a name="l07204"></a>07204                     }
<a name="l07205"></a>07205                     <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07206"></a>07206                     <a class="code" href="../../d5/d11/ripper_8c.html#a4cb8635c421d3ada48f4c1a5ecfe6997">tokfix</a>();
<a name="l07207"></a>07207                     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a69cc32ebd541279dcf93b82393380233">toklen</a>() == start) {
<a name="l07208"></a>07208                         <a class="code" href="../../d5/d11/ripper_8c.html#a4109fdcadec8be93f3e91500b5f46fe4">no_digits</a>();
<a name="l07209"></a>07209                     }
<a name="l07210"></a>07210                     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nondigit) <span class="keywordflow">goto</span> trailing_uc;
<a name="l07211"></a>07211                     <a class="code" href="../../d5/d11/ripper_8c.html#a5fc9367bfccabbd01bfb5acca2b2a6f6">set_yylval_literal</a>(<a class="code" href="../../d1/dcc/bignum_8c.html#ad1cd4cd30b4ce5b52538392db6409651">rb_cstr_to_inum</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>(), 16, <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>));
<a name="l07212"></a>07212                     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#acf30b0b06859a67ac40b3b5ade640bec">tINTEGER</a>;
<a name="l07213"></a>07213                 }
<a name="l07214"></a>07214                 <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;b&apos;</span> || c == <span class="charliteral">&apos;B&apos;</span>) {
<a name="l07215"></a>07215                     <span class="comment">/* binary */</span>
<a name="l07216"></a>07216                     c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07217"></a>07217                     <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;0&apos;</span> || c == <span class="charliteral">&apos;1&apos;</span>) {
<a name="l07218"></a>07218                         <span class="keywordflow">do</span> {
<a name="l07219"></a>07219                             <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;_&apos;</span>) {
<a name="l07220"></a>07220                                 <span class="keywordflow">if</span> (nondigit) <span class="keywordflow">break</span>;
<a name="l07221"></a>07221                                 nondigit = c;
<a name="l07222"></a>07222                                 <span class="keywordflow">continue</span>;
<a name="l07223"></a>07223                             }
<a name="l07224"></a>07224                             <span class="keywordflow">if</span> (c != <span class="charliteral">&apos;0&apos;</span> &amp;&amp; c != <span class="charliteral">&apos;1&apos;</span>) <span class="keywordflow">break</span>;
<a name="l07225"></a>07225                             nondigit = 0;
<a name="l07226"></a>07226                             <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07227"></a>07227                         } <span class="keywordflow">while</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) != -1);
<a name="l07228"></a>07228                     }
<a name="l07229"></a>07229                     <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07230"></a>07230                     <a class="code" href="../../d5/d11/ripper_8c.html#a4cb8635c421d3ada48f4c1a5ecfe6997">tokfix</a>();
<a name="l07231"></a>07231                     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a69cc32ebd541279dcf93b82393380233">toklen</a>() == start) {
<a name="l07232"></a>07232                         <a class="code" href="../../d5/d11/ripper_8c.html#a4109fdcadec8be93f3e91500b5f46fe4">no_digits</a>();
<a name="l07233"></a>07233                     }
<a name="l07234"></a>07234                     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nondigit) <span class="keywordflow">goto</span> trailing_uc;
<a name="l07235"></a>07235                     <a class="code" href="../../d5/d11/ripper_8c.html#a5fc9367bfccabbd01bfb5acca2b2a6f6">set_yylval_literal</a>(<a class="code" href="../../d1/dcc/bignum_8c.html#ad1cd4cd30b4ce5b52538392db6409651">rb_cstr_to_inum</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>(), 2, <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>));
<a name="l07236"></a>07236                     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#acf30b0b06859a67ac40b3b5ade640bec">tINTEGER</a>;
<a name="l07237"></a>07237                 }
<a name="l07238"></a>07238                 <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;d&apos;</span> || c == <span class="charliteral">&apos;D&apos;</span>) {
<a name="l07239"></a>07239                     <span class="comment">/* decimal */</span>
<a name="l07240"></a>07240                     c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07241"></a>07241                     <span class="keywordflow">if</span> (c != -1 &amp;&amp; <a class="code" href="../../d1/dcc/bignum_8c.html#ab615ddd0d086b80219cd7e0345d6b5ef">ISDIGIT</a>(c)) {
<a name="l07242"></a>07242                         <span class="keywordflow">do</span> {
<a name="l07243"></a>07243                             <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;_&apos;</span>) {
<a name="l07244"></a>07244                                 <span class="keywordflow">if</span> (nondigit) <span class="keywordflow">break</span>;
<a name="l07245"></a>07245                                 nondigit = c;
<a name="l07246"></a>07246                                 <span class="keywordflow">continue</span>;
<a name="l07247"></a>07247                             }
<a name="l07248"></a>07248                             <span class="keywordflow">if</span> (!<a class="code" href="../../d1/dcc/bignum_8c.html#ab615ddd0d086b80219cd7e0345d6b5ef">ISDIGIT</a>(c)) <span class="keywordflow">break</span>;
<a name="l07249"></a>07249                             nondigit = 0;
<a name="l07250"></a>07250                             <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07251"></a>07251                         } <span class="keywordflow">while</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) != -1);
<a name="l07252"></a>07252                     }
<a name="l07253"></a>07253                     <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07254"></a><a class="code" href="../../d7/dc0/parse_8y.html#abf1eaa7681b3ca909844f53f3064a2ec">07254</a>                     <a class="code" href="../../d5/d11/ripper_8c.html#a4cb8635c421d3ada48f4c1a5ecfe6997">tokfix</a>();
<a name="l07255"></a>07255                     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a69cc32ebd541279dcf93b82393380233">toklen</a>() == start) {
<a name="l07256"></a>07256                         <a class="code" href="../../d5/d11/ripper_8c.html#a4109fdcadec8be93f3e91500b5f46fe4">no_digits</a>();
<a name="l07257"></a>07257                     }
<a name="l07258"></a>07258                     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nondigit) <span class="keywordflow">goto</span> trailing_uc;
<a name="l07259"></a>07259                     <a class="code" href="../../d5/d11/ripper_8c.html#a5fc9367bfccabbd01bfb5acca2b2a6f6">set_yylval_literal</a>(<a class="code" href="../../d1/dcc/bignum_8c.html#ad1cd4cd30b4ce5b52538392db6409651">rb_cstr_to_inum</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>(), 10, <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>));
<a name="l07260"></a>07260                     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#acf30b0b06859a67ac40b3b5ade640bec">tINTEGER</a>;
<a name="l07261"></a>07261                 }
<a name="l07262"></a>07262                 <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;_&apos;</span>) {
<a name="l07263"></a><a class="code" href="../../d7/dc0/parse_8y.html#ab6ab5791e2b786131b7170981969eb69">07263</a>                     <span class="comment">/* 0_0 */</span>
<a name="l07264"></a>07264                     <span class="keywordflow">goto</span> octal_number;
<a name="l07265"></a><a class="code" href="../../d7/dc0/parse_8y.html#a4cb8635c421d3ada48f4c1a5ecfe6997">07265</a>                 }
<a name="l07266"></a><a class="code" href="../../d7/dc0/parse_8y.html#a2b3a335d617ec14d6296ca82d3055858">07266</a>                 <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;o&apos;</span> || c == <span class="charliteral">&apos;O&apos;</span>) {
<a name="l07267"></a><a class="code" href="../../d7/dc0/parse_8y.html#a69cc32ebd541279dcf93b82393380233">07267</a>                     <span class="comment">/* prefixed octal */</span>
<a name="l07268"></a><a class="code" href="../../d7/dc0/parse_8y.html#a6bf5e0c0ab72ebfec413aeba1bd7696f">07268</a>                     c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07269"></a>07269                     <span class="keywordflow">if</span> (c == -1 || c == <span class="charliteral">&apos;_&apos;</span> || !<a class="code" href="../../d1/dcc/bignum_8c.html#ab615ddd0d086b80219cd7e0345d6b5ef">ISDIGIT</a>(c)) {
<a name="l07270"></a>07270                         <a class="code" href="../../d5/d11/ripper_8c.html#a4109fdcadec8be93f3e91500b5f46fe4">no_digits</a>();
<a name="l07271"></a><a class="code" href="../../d7/dc0/parse_8y.html#a5bf31317da0ef7282dedbda8246e9aca">07271</a>                     }
<a name="l07272"></a>07272                 }
<a name="l07273"></a>07273                 <span class="keywordflow">if</span> (c &gt;= <span class="charliteral">&apos;0&apos;</span> &amp;&amp; c &lt;= <span class="charliteral">&apos;7&apos;</span>) {
<a name="l07274"></a>07274                     <span class="comment">/* octal */</span>
<a name="l07275"></a>07275                   octal_number:
<a name="l07276"></a>07276                     <span class="keywordflow">do</span> {
<a name="l07277"></a>07277                         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;_&apos;</span>) {
<a name="l07278"></a>07278                             <span class="keywordflow">if</span> (nondigit) <span class="keywordflow">break</span>;
<a name="l07279"></a>07279                             nondigit = c;
<a name="l07280"></a>07280                             <span class="keywordflow">continue</span>;
<a name="l07281"></a>07281                         }
<a name="l07282"></a>07282                         <span class="keywordflow">if</span> (c &lt; &apos;0&apos; || c &gt; <span class="charliteral">&apos;9&apos;</span>) <span class="keywordflow">break</span>;
<a name="l07283"></a>07283                         <span class="keywordflow">if</span> (c &gt; <span class="charliteral">&apos;7&apos;</span>) <span class="keywordflow">goto</span> invalid_octal;
<a name="l07284"></a>07284                         nondigit = 0;
<a name="l07285"></a>07285                         <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07286"></a><a class="code" href="../../d7/dc0/parse_8y.html#ab831e47151b420de51e0f8270db92d1b">07286</a>                     } <span class="keywordflow">while</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) != -1);
<a name="l07287"></a>07287                     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a69cc32ebd541279dcf93b82393380233">toklen</a>() &gt; start) {
<a name="l07288"></a>07288                         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07289"></a>07289                         <a class="code" href="../../d5/d11/ripper_8c.html#a4cb8635c421d3ada48f4c1a5ecfe6997">tokfix</a>();
<a name="l07290"></a>07290                         <span class="keywordflow">if</span> (nondigit) <span class="keywordflow">goto</span> trailing_uc;
<a name="l07291"></a>07291                         <a class="code" href="../../d5/d11/ripper_8c.html#a5fc9367bfccabbd01bfb5acca2b2a6f6">set_yylval_literal</a>(<a class="code" href="../../d1/dcc/bignum_8c.html#ad1cd4cd30b4ce5b52538392db6409651">rb_cstr_to_inum</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>(), 8, <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>));
<a name="l07292"></a>07292                         <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#acf30b0b06859a67ac40b3b5ade640bec">tINTEGER</a>;
<a name="l07293"></a>07293                     }
<a name="l07294"></a>07294                     <span class="keywordflow">if</span> (nondigit) {
<a name="l07295"></a>07295                         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07296"></a>07296                         <span class="keywordflow">goto</span> trailing_uc;
<a name="l07297"></a>07297                     }
<a name="l07298"></a><a class="code" href="../../d7/dc0/parse_8y.html#adba953be2ada60fb6f1a4e210385ab6f">07298</a>                 }
<a name="l07299"></a>07299                 <span class="keywordflow">if</span> (c &gt; <span class="charliteral">&apos;7&apos;</span> &amp;&amp; c &lt;= <span class="charliteral">&apos;9&apos;</span>) {
<a name="l07300"></a>07300                   invalid_octal:
<a name="l07301"></a>07301                     <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;Invalid octal digit&quot;</span>);
<a name="l07302"></a>07302                 }
<a name="l07303"></a>07303                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;.&apos;</span> || c == <span class="charliteral">&apos;e&apos;</span> || c == <span class="charliteral">&apos;E&apos;</span>) {
<a name="l07304"></a>07304                     <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;0&apos;</span>);
<a name="l07305"></a>07305                 }
<a name="l07306"></a>07306                 <span class="keywordflow">else</span> {
<a name="l07307"></a>07307                     <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07308"></a><a class="code" href="../../d7/dc0/parse_8y.html#a8eab06aeb181228b855d138fc07d0bf2">07308</a>                     <a class="code" href="../../d5/d11/ripper_8c.html#a5fc9367bfccabbd01bfb5acca2b2a6f6">set_yylval_literal</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#ac55fae7f748afd3fc2533d0d7d06cf5a">INT2FIX</a>(0));
<a name="l07309"></a>07309                     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#acf30b0b06859a67ac40b3b5ade640bec">tINTEGER</a>;
<a name="l07310"></a>07310                 }
<a name="l07311"></a>07311             }
<a name="l07312"></a>07312 
<a name="l07313"></a>07313             <span class="keywordflow">for</span> (;;) {
<a name="l07314"></a>07314                 <span class="keywordflow">switch</span> (c) {
<a name="l07315"></a>07315                   <span class="keywordflow">case</span> <span class="charliteral">&apos;0&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;1&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;2&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;3&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;4&apos;</span>:
<a name="l07316"></a>07316                   <span class="keywordflow">case</span> <span class="charliteral">&apos;5&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;6&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;7&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;8&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;9&apos;</span>:
<a name="l07317"></a>07317                     nondigit = 0;
<a name="l07318"></a>07318                     <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07319"></a>07319                     <span class="keywordflow">break</span>;
<a name="l07320"></a>07320 
<a name="l07321"></a><a class="code" href="../../d7/dc0/parse_8y.html#a3ec6329b8e5cfbee9a64cf3107046130">07321</a>                   <span class="keywordflow">case</span> <span class="charliteral">&apos;.&apos;</span>:
<a name="l07322"></a>07322                     <span class="keywordflow">if</span> (nondigit) <span class="keywordflow">goto</span> trailing_uc;
<a name="l07323"></a>07323                     <span class="keywordflow">if</span> (seen_point || seen_e) {
<a name="l07324"></a><a class="code" href="../../d7/dc0/parse_8y.html#aaa9a4cf453cefcd2ac75a38c7779e93a">07324</a>                         <span class="keywordflow">goto</span> decode_num;
<a name="l07325"></a>07325                     }
<a name="l07326"></a>07326                     <span class="keywordflow">else</span> {
<a name="l07327"></a>07327                         <span class="keywordtype">int</span> c0 = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07328"></a>07328                         <span class="keywordflow">if</span> (c0 == -1 || !<a class="code" href="../../d1/dcc/bignum_8c.html#ab615ddd0d086b80219cd7e0345d6b5ef">ISDIGIT</a>(c0)) {
<a name="l07329"></a>07329                             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c0);
<a name="l07330"></a>07330                             <span class="keywordflow">goto</span> decode_num;
<a name="l07331"></a>07331                         }
<a name="l07332"></a>07332                         c = c0;
<a name="l07333"></a>07333                     }
<a name="l07334"></a>07334                     <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;.&apos;</span>);
<a name="l07335"></a>07335                     <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07336"></a>07336                     is_float++;
<a name="l07337"></a>07337                     seen_point++;
<a name="l07338"></a>07338                     nondigit = 0;
<a name="l07339"></a>07339                     <span class="keywordflow">break</span>;
<a name="l07340"></a>07340 
<a name="l07341"></a>07341                   <span class="keywordflow">case</span> <span class="charliteral">&apos;e&apos;</span>:
<a name="l07342"></a>07342                   <span class="keywordflow">case</span> <span class="charliteral">&apos;E&apos;</span>:
<a name="l07343"></a>07343                     <span class="keywordflow">if</span> (nondigit) {
<a name="l07344"></a>07344                         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07345"></a>07345                         c = nondigit;
<a name="l07346"></a>07346                         <span class="keywordflow">goto</span> decode_num;
<a name="l07347"></a>07347                     }
<a name="l07348"></a>07348                     <span class="keywordflow">if</span> (seen_e) {
<a name="l07349"></a>07349                         <span class="keywordflow">goto</span> decode_num;
<a name="l07350"></a>07350                     }
<a name="l07351"></a>07351                     <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07352"></a>07352                     seen_e++;
<a name="l07353"></a>07353                     is_float++;
<a name="l07354"></a>07354                     nondigit = c;
<a name="l07355"></a>07355                     c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07356"></a>07356                     <span class="keywordflow">if</span> (c != <span class="charliteral">&apos;-&apos;</span> &amp;&amp; c != <span class="charliteral">&apos;+&apos;</span>) <span class="keywordflow">continue</span>;
<a name="l07357"></a>07357                     <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07358"></a>07358                     nondigit = c;
<a name="l07359"></a>07359                     <span class="keywordflow">break</span>;
<a name="l07360"></a>07360 
<a name="l07361"></a>07361                   <span class="keywordflow">case</span> <span class="charliteral">&apos;_&apos;</span>:     <span class="comment">/* `_&apos; in number just ignored */</span>
<a name="l07362"></a>07362                     <span class="keywordflow">if</span> (nondigit) <span class="keywordflow">goto</span> decode_num;
<a name="l07363"></a>07363                     nondigit = c;
<a name="l07364"></a>07364                     <span class="keywordflow">break</span>;
<a name="l07365"></a>07365 
<a name="l07366"></a>07366                   <span class="keywordflow">default</span>:
<a name="l07367"></a>07367                     <span class="keywordflow">goto</span> decode_num;
<a name="l07368"></a>07368                 }
<a name="l07369"></a>07369                 c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07370"></a>07370             }
<a name="l07371"></a>07371 
<a name="l07372"></a>07372           decode_num:
<a name="l07373"></a>07373             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07374"></a>07374             <span class="keywordflow">if</span> (nondigit) {
<a name="l07375"></a>07375                 <span class="keywordtype">char</span> tmp[30];
<a name="l07376"></a>07376               trailing_uc:
<a name="l07377"></a>07377                 <a class="code" href="../../d7/d72/subst_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;trailing `%c&apos; in number&quot;</span>, nondigit);
<a name="l07378"></a>07378                 <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(tmp);
<a name="l07379"></a>07379             }
<a name="l07380"></a>07380             <a class="code" href="../../d5/d11/ripper_8c.html#a4cb8635c421d3ada48f4c1a5ecfe6997">tokfix</a>();
<a name="l07381"></a>07381             <span class="keywordflow">if</span> (is_float) {
<a name="l07382"></a>07382                 <span class="keywordtype">double</span> d = <a class="code" href="../../d8/d3c/util_8h.html#a9242b69e04b02654598efa37fb6c2185">strtod</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>(), 0);
<a name="l07383"></a>07383                 <span class="keywordflow">if</span> (errno == ERANGE) {
<a name="l07384"></a>07384                     <a class="code" href="../../d5/d11/ripper_8c.html#aca369e6f278a2656e996a822270e034c">rb_warningS</a>(<span class="stringliteral">&quot;Float %s out of range&quot;</span>, <a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>());
<a name="l07385"></a>07385                     <a class="code" href="../../d4/db0/__sdbm_8c.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = 0;
<a name="l07386"></a>07386                 }
<a name="l07387"></a>07387                 <a class="code" href="../../d5/d11/ripper_8c.html#a5fc9367bfccabbd01bfb5acca2b2a6f6">set_yylval_literal</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4affd02e0f0fe17593cd4ecd78cf9064">DBL2NUM</a>(d));
<a name="l07388"></a>07388                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#aefe8891831bd955c4672cc5423fdf7e8">tFLOAT</a>;
<a name="l07389"></a>07389             }
<a name="l07390"></a>07390             <a class="code" href="../../d5/d11/ripper_8c.html#a5fc9367bfccabbd01bfb5acca2b2a6f6">set_yylval_literal</a>(<a class="code" href="../../d1/dcc/bignum_8c.html#ad1cd4cd30b4ce5b52538392db6409651">rb_cstr_to_inum</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>(), 10, <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>));
<a name="l07391"></a>07391             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#acf30b0b06859a67ac40b3b5ade640bec">tINTEGER</a>;
<a name="l07392"></a>07392         }
<a name="l07393"></a>07393 
<a name="l07394"></a>07394       <span class="keywordflow">case</span> <span class="charliteral">&apos;)&apos;</span>:
<a name="l07395"></a><a class="code" href="../../d7/dc0/parse_8y.html#a39d5d8136e6acbd8dfb9d6a16537166c">07395</a>       <span class="keywordflow">case</span> <span class="charliteral">&apos;]&apos;</span>:
<a name="l07396"></a><a class="code" href="../../d7/dc0/parse_8y.html#acadd53369f5b5a20ff0b255e42cd7efc">07396</a>         <a class="code" href="../../d5/d11/ripper_8c.html#aba595207d91c2ea297a6d72686e3d421">paren_nest</a>--;
<a name="l07397"></a>07397       <span class="keywordflow">case</span> <span class="charliteral">&apos;}&apos;</span>:
<a name="l07398"></a>07398         <a class="code" href="../../d5/d11/ripper_8c.html#a952f9c2e68d4e750ee82677ec97c1ad7">COND_LEXPOP</a>();
<a name="l07399"></a><a class="code" href="../../d7/dc0/parse_8y.html#a00e1405a2365cacaf2e2e4e83638da3f">07399</a>         <a class="code" href="../../d5/d11/ripper_8c.html#a8c246461861a7c81c6027b7de031ca28">CMDARG_LEXPOP</a>();
<a name="l07400"></a>07400         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;)&apos;</span>)
<a name="l07401"></a>07401             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a6625ca72427336b58374fc438e51b225">EXPR_ENDFN</a>;
<a name="l07402"></a>07402         <span class="keywordflow">else</span>
<a name="l07403"></a>07403             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ad1e711c09425cc55dd8982c6486d14cb">EXPR_ENDARG</a>;
<a name="l07404"></a>07404         <span class="keywordflow">return</span> c;
<a name="l07405"></a>07405 
<a name="l07406"></a>07406       <span class="keywordflow">case</span> <span class="charliteral">&apos;:&apos;</span>:
<a name="l07407"></a>07407         c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07408"></a>07408         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;:&apos;</span>) {
<a name="l07409"></a>07409             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a1436a59750d881d30cbd3873682868f8">IS_BEG</a>() || <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a98a4a7774a64c9570a583444940f74d5">EXPR_CLASS</a> || <a class="code" href="../../d5/d11/ripper_8c.html#a82590f9b63a085ac5f0583c8aaefdec2">IS_SPCARG</a>(-1)) {
<a name="l07410"></a>07410                 <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07411"></a>07411                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a76d2c0533b6023921f54284bf058fa11">tCOLON3</a>;
<a name="l07412"></a>07412             }
<a name="l07413"></a>07413             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>;
<a name="l07414"></a>07414             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a>;
<a name="l07415"></a>07415         }
<a name="l07416"></a>07416         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a36b408a3839be13ba255b818d5720035">IS_END</a>() || <a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(c)) {
<a name="l07417"></a>07417             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07418"></a>07418             <a class="code" href="../../d5/d11/ripper_8c.html#a043e2757b60ef78bc7bea525be8df035">warn_balanced</a>(<span class="stringliteral">&quot;:&quot;</span>, <span class="stringliteral">&quot;symbol literal&quot;</span>);
<a name="l07419"></a>07419             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07420"></a>07420             <span class="keywordflow">return</span> <span class="charliteral">&apos;:&apos;</span>;
<a name="l07421"></a>07421         }
<a name="l07422"></a>07422         <span class="keywordflow">switch</span> (c) {
<a name="l07423"></a>07423           <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>:
<a name="l07424"></a>07424             <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2e577b512d22c4741a1f905721487a42">NEW_STRTERM</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25a47b35c63e588adb3027d930eb4a31d40">str_ssym</a>, c, 0);
<a name="l07425"></a>07425             <span class="keywordflow">break</span>;
<a name="l07426"></a>07426           <span class="keywordflow">case</span> <span class="charliteral">&apos;&quot;&apos;</span>:
<a name="l07427"></a>07427             <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2e577b512d22c4741a1f905721487a42">NEW_STRTERM</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25a17e717b9057d218529b4b14f4ec6fdb9">str_dsym</a>, c, 0);
<a name="l07428"></a>07428             <span class="keywordflow">break</span>;
<a name="l07429"></a>07429           <span class="keywordflow">default</span>:
<a name="l07430"></a>07430             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07431"></a>07431             <span class="keywordflow">break</span>;
<a name="l07432"></a>07432         }
<a name="l07433"></a>07433         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>;
<a name="l07434"></a>07434         <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a4e2e6284f92622d77f0feb7152f57ec7">tSYMBEG</a>;
<a name="l07435"></a>07435 
<a name="l07436"></a>07436       <span class="keywordflow">case</span> <span class="charliteral">&apos;/&apos;</span>:
<a name="l07437"></a>07437         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a1436a59750d881d30cbd3873682868f8">IS_BEG</a>()) {
<a name="l07438"></a>07438             <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2e577b512d22c4741a1f905721487a42">NEW_STRTERM</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25aa9bfa1dfaca876d4661889a3e02796b3">str_regexp</a>, <span class="charliteral">&apos;/&apos;</span>, 0);
<a name="l07439"></a>07439             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ad71e45c5e7cc1afa50bed0b8e129d842">tREGEXP_BEG</a>;
<a name="l07440"></a>07440         }
<a name="l07441"></a>07441         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l07442"></a>07442             <a class="code" href="../../d5/d11/ripper_8c.html#a574f8b78e40dd79a4046b0cc2beccb4e">set_yylval_id</a>(<span class="charliteral">&apos;/&apos;</span>);
<a name="l07443"></a>07443             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07444"></a>07444             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a>;
<a name="l07445"></a>07445         }
<a name="l07446"></a>07446         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07447"></a>07447         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a82590f9b63a085ac5f0583c8aaefdec2">IS_SPCARG</a>(c)) {
<a name="l07448"></a>07448             (void)<a class="code" href="../../d5/d11/ripper_8c.html#a3c5a49f7f344bf7d4894a02ea49538d7">arg_ambiguous</a>();
<a name="l07449"></a>07449             <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2e577b512d22c4741a1f905721487a42">NEW_STRTERM</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25aa9bfa1dfaca876d4661889a3e02796b3">str_regexp</a>, <span class="charliteral">&apos;/&apos;</span>, 0);
<a name="l07450"></a>07450             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ad71e45c5e7cc1afa50bed0b8e129d842">tREGEXP_BEG</a>;
<a name="l07451"></a>07451         }
<a name="l07452"></a>07452         <span class="keywordflow">switch</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a>) {
<a name="l07453"></a>07453           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>: <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>:
<a name="l07454"></a>07454             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>; <span class="keywordflow">break</span>;
<a name="l07455"></a>07455           <span class="keywordflow">default</span>:
<a name="l07456"></a>07456             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>; <span class="keywordflow">break</span>;
<a name="l07457"></a>07457         }
<a name="l07458"></a>07458         <a class="code" href="../../d5/d11/ripper_8c.html#a043e2757b60ef78bc7bea525be8df035">warn_balanced</a>(<span class="stringliteral">&quot;/&quot;</span>, <span class="stringliteral">&quot;regexp literal&quot;</span>);
<a name="l07459"></a>07459         <span class="keywordflow">return</span> <span class="charliteral">&apos;/&apos;</span>;
<a name="l07460"></a>07460 
<a name="l07461"></a>07461       <span class="keywordflow">case</span> <span class="charliteral">&apos;^&apos;</span>:
<a name="l07462"></a>07462         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l07463"></a>07463             <a class="code" href="../../d5/d11/ripper_8c.html#a574f8b78e40dd79a4046b0cc2beccb4e">set_yylval_id</a>(<span class="charliteral">&apos;^&apos;</span>);
<a name="l07464"></a>07464             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07465"></a>07465             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a>;
<a name="l07466"></a>07466         }
<a name="l07467"></a>07467         <span class="keywordflow">switch</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a>) {
<a name="l07468"></a>07468           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>: <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>:
<a name="l07469"></a>07469             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>; <span class="keywordflow">break</span>;
<a name="l07470"></a>07470           <span class="keywordflow">default</span>:
<a name="l07471"></a>07471             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>; <span class="keywordflow">break</span>;
<a name="l07472"></a>07472         }
<a name="l07473"></a>07473         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07474"></a>07474         <span class="keywordflow">return</span> <span class="charliteral">&apos;^&apos;</span>;
<a name="l07475"></a>07475 
<a name="l07476"></a>07476       <span class="keywordflow">case</span> <span class="charliteral">&apos;;&apos;</span>:
<a name="l07477"></a>07477         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07478"></a>07478         <a class="code" href="../../d5/d11/ripper_8c.html#a302ec49a8c1c02e0dbaa5b4362263e40">command_start</a> = <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l07479"></a>07479         <span class="keywordflow">return</span> <span class="charliteral">&apos;;&apos;</span>;
<a name="l07480"></a>07480 
<a name="l07481"></a>07481       <span class="keywordflow">case</span> <span class="charliteral">&apos;,&apos;</span>:
<a name="l07482"></a>07482         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07483"></a>07483         <span class="keywordflow">return</span> <span class="charliteral">&apos;,&apos;</span>;
<a name="l07484"></a>07484 
<a name="l07485"></a>07485       <span class="keywordflow">case</span> <span class="charliteral">&apos;~&apos;</span>:
<a name="l07486"></a>07486         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a> || <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>) {
<a name="l07487"></a>07487             <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) != <span class="charliteral">&apos;@&apos;</span>) {
<a name="l07488"></a>07488                 <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07489"></a>07489             }
<a name="l07490"></a><a class="code" href="../../d7/dc0/parse_8y.html#ad79f377a2a23447dab44352536d359f0">07490</a>             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>;
<a name="l07491"></a>07491         }
<a name="l07492"></a>07492         <span class="keywordflow">else</span> {
<a name="l07493"></a>07493             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07494"></a>07494         }
<a name="l07495"></a>07495         <span class="keywordflow">return</span> <span class="charliteral">&apos;~&apos;</span>;
<a name="l07496"></a>07496 
<a name="l07497"></a><a class="code" href="../../d7/dc0/parse_8y.html#a2b5d0ac0bc3a491bf38a37cc914484ea">07497</a>       <span class="keywordflow">case</span> <span class="charliteral">&apos;(&apos;</span>:
<a name="l07498"></a>07498         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a1436a59750d881d30cbd3873682868f8">IS_BEG</a>()) {
<a name="l07499"></a>07499             c = <a class="code" href="../../d5/d11/ripper_8c.html#a8d562a1eeeebb179b8571743d06dd937">tLPAREN</a>;
<a name="l07500"></a>07500         }
<a name="l07501"></a>07501         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a82590f9b63a085ac5f0583c8aaefdec2">IS_SPCARG</a>(-1)) {
<a name="l07502"></a>07502             c = <a class="code" href="../../d5/d11/ripper_8c.html#a02644b13da577555e023744bcc01df78">tLPAREN_ARG</a>;
<a name="l07503"></a>07503         }
<a name="l07504"></a>07504         <a class="code" href="../../d5/d11/ripper_8c.html#aba595207d91c2ea297a6d72686e3d421">paren_nest</a>++;
<a name="l07505"></a>07505         <a class="code" href="../../d5/d11/ripper_8c.html#adc05d33a1a8b13c91b4ec628df477f76">COND_PUSH</a>(0);
<a name="l07506"></a>07506         <a class="code" href="../../d5/d11/ripper_8c.html#abbb50c4060580ef708e0c96692509b42">CMDARG_PUSH</a>(0);
<a name="l07507"></a>07507         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07508"></a>07508         <span class="keywordflow">return</span> c;
<a name="l07509"></a>07509 
<a name="l07510"></a>07510       <span class="keywordflow">case</span> <span class="charliteral">&apos;[&apos;</span>:
<a name="l07511"></a>07511         <a class="code" href="../../d5/d11/ripper_8c.html#aba595207d91c2ea297a6d72686e3d421">paren_nest</a>++;
<a name="l07512"></a>07512         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a> || <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>) {
<a name="l07513"></a>07513             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>;
<a name="l07514"></a>07514             <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;]&apos;</span>) {
<a name="l07515"></a>07515                 <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l07516"></a>07516                     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ad1b5f00e34caa7051eef00a36b40d232">tASET</a>;
<a name="l07517"></a>07517                 }
<a name="l07518"></a>07518                 <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07519"></a>07519                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ab052bc5e13a5bbe98406c4aec5a4deac">tAREF</a>;
<a name="l07520"></a>07520             }
<a name="l07521"></a>07521             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07522"></a>07522             <span class="keywordflow">return</span> <span class="charliteral">&apos;[&apos;</span>;
<a name="l07523"></a>07523         }
<a name="l07524"></a>07524         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a1436a59750d881d30cbd3873682868f8">IS_BEG</a>()) {
<a name="l07525"></a>07525             c = <a class="code" href="../../d5/d11/ripper_8c.html#a8924ededc369aa7c8ff7605073acbd68">tLBRACK</a>;
<a name="l07526"></a>07526         }
<a name="l07527"></a>07527         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a8d78f62dab3d5267c076a82976814b8a">IS_ARG</a>() &amp;&amp; space_seen) {
<a name="l07528"></a>07528             c = <a class="code" href="../../d5/d11/ripper_8c.html#a8924ededc369aa7c8ff7605073acbd68">tLBRACK</a>;
<a name="l07529"></a>07529         }
<a name="l07530"></a>07530         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07531"></a>07531         <a class="code" href="../../d5/d11/ripper_8c.html#adc05d33a1a8b13c91b4ec628df477f76">COND_PUSH</a>(0);
<a name="l07532"></a>07532         <a class="code" href="../../d5/d11/ripper_8c.html#abbb50c4060580ef708e0c96692509b42">CMDARG_PUSH</a>(0);
<a name="l07533"></a>07533         <span class="keywordflow">return</span> c;
<a name="l07534"></a>07534 
<a name="l07535"></a>07535       <span class="keywordflow">case</span> <span class="charliteral">&apos;{&apos;</span>:
<a name="l07536"></a>07536         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a107615bfe2fe869c09b6c4a3bd8db8ec">lpar_beg</a> &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#a107615bfe2fe869c09b6c4a3bd8db8ec">lpar_beg</a> == <a class="code" href="../../d5/d11/ripper_8c.html#aba595207d91c2ea297a6d72686e3d421">paren_nest</a>) {
<a name="l07537"></a>07537             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07538"></a>07538             <a class="code" href="../../d5/d11/ripper_8c.html#a107615bfe2fe869c09b6c4a3bd8db8ec">lpar_beg</a> = 0;
<a name="l07539"></a>07539             --<a class="code" href="../../d5/d11/ripper_8c.html#aba595207d91c2ea297a6d72686e3d421">paren_nest</a>;
<a name="l07540"></a>07540             <a class="code" href="../../d5/d11/ripper_8c.html#adc05d33a1a8b13c91b4ec628df477f76">COND_PUSH</a>(0);
<a name="l07541"></a>07541             <a class="code" href="../../d5/d11/ripper_8c.html#abbb50c4060580ef708e0c96692509b42">CMDARG_PUSH</a>(0);
<a name="l07542"></a>07542             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a0dac552aee08b749a8cc2627b458e825">tLAMBEG</a>;
<a name="l07543"></a>07543         }
<a name="l07544"></a>07544         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a8d78f62dab3d5267c076a82976814b8a">IS_ARG</a>() || <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389abb6d8e9fea98441c3b5971c4e7d509ae">EXPR_END</a> || <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a6625ca72427336b58374fc438e51b225">EXPR_ENDFN</a>)
<a name="l07545"></a>07545             c = <span class="charliteral">&apos;{&apos;</span>;          <span class="comment">/* block (primary) */</span>
<a name="l07546"></a>07546         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ad1e711c09425cc55dd8982c6486d14cb">EXPR_ENDARG</a>)
<a name="l07547"></a>07547             c = <a class="code" href="../../d5/d11/ripper_8c.html#a7f3819cfc3596eb9af8ff1a6276f6eea">tLBRACE_ARG</a>;  <span class="comment">/* block (expr) */</span>
<a name="l07548"></a>07548         <span class="keywordflow">else</span>
<a name="l07549"></a>07549             c = <a class="code" href="../../d5/d11/ripper_8c.html#a47ff76b749ae189a435ebe6ac97c6afa">tLBRACE</a>;      <span class="comment">/* hash */</span>
<a name="l07550"></a>07550         <a class="code" href="../../d5/d11/ripper_8c.html#adc05d33a1a8b13c91b4ec628df477f76">COND_PUSH</a>(0);
<a name="l07551"></a>07551         <a class="code" href="../../d5/d11/ripper_8c.html#abbb50c4060580ef708e0c96692509b42">CMDARG_PUSH</a>(0);
<a name="l07552"></a>07552         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07553"></a>07553         <span class="keywordflow">if</span> (c != <a class="code" href="../../d5/d11/ripper_8c.html#a47ff76b749ae189a435ebe6ac97c6afa">tLBRACE</a>) <a class="code" href="../../d5/d11/ripper_8c.html#a302ec49a8c1c02e0dbaa5b4362263e40">command_start</a> = <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l07554"></a>07554         <span class="keywordflow">return</span> c;
<a name="l07555"></a>07555 
<a name="l07556"></a>07556       <span class="keywordflow">case</span> <span class="charliteral">&apos;\\&apos;</span>:
<a name="l07557"></a>07557         c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07558"></a>07558         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;\n&apos;</span>) {
<a name="l07559"></a>07559             space_seen = 1;
<a name="l07560"></a>07560 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l07561"></a>07561 <span class="preprocessor"></span>            ripper_dispatch_scan_event(parser, <a class="code" href="../../df/dea/eventids2_8c.html#ac4fb68a6a71c99f2bee2d085cf109948">tSP</a>);
<a name="l07562"></a>07562 <span class="preprocessor">#endif</span>
<a name="l07563"></a>07563 <span class="preprocessor"></span>            <span class="keywordflow">goto</span> retry; <span class="comment">/* skip \\n */</span>
<a name="l07564"></a>07564         }
<a name="l07565"></a>07565         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07566"></a>07566         <span class="keywordflow">return</span> <span class="charliteral">&apos;\\&apos;</span>;
<a name="l07567"></a>07567 
<a name="l07568"></a>07568       <span class="keywordflow">case</span> <span class="charliteral">&apos;%&apos;</span>:
<a name="l07569"></a>07569         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a1436a59750d881d30cbd3873682868f8">IS_BEG</a>()) {
<a name="l07570"></a><a class="code" href="../../d7/dc0/parse_8y.html#ab312572aebd9d4f8bdb8ebb10756f520">07570</a>             <span class="keywordtype">int</span> term;
<a name="l07571"></a>07571             <span class="keywordtype">int</span> paren;
<a name="l07572"></a>07572 
<a name="l07573"></a>07573             c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07574"></a>07574           quotation:
<a name="l07575"></a>07575             <span class="keywordflow">if</span> (c == -1 || !<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8c0056118f585fa052e0f76e3198db6a">ISALNUM</a>(c)) {
<a name="l07576"></a>07576                 term = c;
<a name="l07577"></a>07577                 c = <span class="charliteral">&apos;Q&apos;</span>;
<a name="l07578"></a>07578             }
<a name="l07579"></a>07579             <span class="keywordflow">else</span> {
<a name="l07580"></a>07580                 term = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07581"></a>07581                 <span class="keywordflow">if</span> (<a class="code" href="../../d5/de3/encoding_8h.html#a8d0f0029d4bd82780241fb22fe7bf5b8">rb_enc_isalnum</a>(term, parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a>) || !<a class="code" href="../../d5/d11/ripper_8c.html#a78fd981b3a747e74ed4e19a19777f5c5">parser_isascii</a>()) {
<a name="l07582"></a>07582                     <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;unknown type of %string&quot;</span>);
<a name="l07583"></a>07583                     <span class="keywordflow">return</span> 0;
<a name="l07584"></a>07584                 }
<a name="l07585"></a>07585             }
<a name="l07586"></a>07586             <span class="keywordflow">if</span> (c == -1 || term == -1) {
<a name="l07587"></a>07587                 <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;unterminated quoted string meets end of file&quot;</span>);
<a name="l07588"></a>07588                 <span class="keywordflow">return</span> 0;
<a name="l07589"></a>07589             }
<a name="l07590"></a>07590             paren = term;
<a name="l07591"></a>07591             <span class="keywordflow">if</span> (term == <span class="charliteral">&apos;(&apos;</span>) term = <span class="charliteral">&apos;)&apos;</span>;
<a name="l07592"></a>07592             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (term == <span class="charliteral">&apos;[&apos;</span>) term = <span class="charliteral">&apos;]&apos;</span>;
<a name="l07593"></a>07593             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (term == <span class="charliteral">&apos;{&apos;</span>) term = <span class="charliteral">&apos;}&apos;</span>;
<a name="l07594"></a>07594             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (term == <span class="charliteral">&apos;&lt;&apos;</span>) term = <span class="charliteral">&apos;&gt;&apos;</span>;
<a name="l07595"></a>07595             <span class="keywordflow">else</span> paren = 0;
<a name="l07596"></a>07596 
<a name="l07597"></a>07597             <span class="keywordflow">switch</span> (c) {
<a name="l07598"></a>07598               <span class="keywordflow">case</span> <span class="charliteral">&apos;Q&apos;</span>:
<a name="l07599"></a>07599                 <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2e577b512d22c4741a1f905721487a42">NEW_STRTERM</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25a7f4c3b93bf426276864f9bc8dc29a867">str_dquote</a>, term, paren);
<a name="l07600"></a>07600                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ae8e25024ff03620afa83e2a3c9bceb7b">tSTRING_BEG</a>;
<a name="l07601"></a>07601 
<a name="l07602"></a>07602               <span class="keywordflow">case</span> <span class="charliteral">&apos;q&apos;</span>:
<a name="l07603"></a>07603                 <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2e577b512d22c4741a1f905721487a42">NEW_STRTERM</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25aaf6a1bae38eadb504993e21689e6e390">str_squote</a>, term, paren);
<a name="l07604"></a>07604                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ae8e25024ff03620afa83e2a3c9bceb7b">tSTRING_BEG</a>;
<a name="l07605"></a>07605 
<a name="l07606"></a><a class="code" href="../../d7/dc0/parse_8y.html#a520b5c6e4d2cdbdd764de2a4a0782570">07606</a>               <span class="keywordflow">case</span> <span class="charliteral">&apos;W&apos;</span>:
<a name="l07607"></a>07607                 <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2e577b512d22c4741a1f905721487a42">NEW_STRTERM</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25a354b632ef49ad1cfb317d270a13552a4">str_dword</a>, term, paren);
<a name="l07608"></a>07608                 <span class="keywordflow">do</span> {c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();} <span class="keywordflow">while</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(c));
<a name="l07609"></a>07609                 <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07610"></a>07610                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a0002f4a3fccb91ab71bc6fbdaf1999e3">tWORDS_BEG</a>;
<a name="l07611"></a>07611 
<a name="l07612"></a>07612               <span class="keywordflow">case</span> <span class="charliteral">&apos;w&apos;</span>:
<a name="l07613"></a>07613                 <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2e577b512d22c4741a1f905721487a42">NEW_STRTERM</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25ad032e3dd7874d9cba5349b3eea31ee2a">str_sword</a>, term, paren);
<a name="l07614"></a>07614                 <span class="keywordflow">do</span> {c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();} <span class="keywordflow">while</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae8cdc17e44905c826bddf416b7bf621c">ISSPACE</a>(c));
<a name="l07615"></a><a class="code" href="../../d7/dc0/parse_8y.html#a50fd547bcb35e9f2943638d66299c8a8">07615</a>                 <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07616"></a>07616                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ad8bfebfd83a1461531056bbd1dcbea9b">tQWORDS_BEG</a>;
<a name="l07617"></a>07617 
<a name="l07618"></a>07618               <span class="keywordflow">case</span> <span class="charliteral">&apos;x&apos;</span>:
<a name="l07619"></a>07619                 <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2e577b512d22c4741a1f905721487a42">NEW_STRTERM</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25a7dd48ff6d3edd0dd7b4495292f22e6f0">str_xquote</a>, term, paren);
<a name="l07620"></a>07620                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a476bb0d5e59ee5787ecb5bfdf6aa64a0">tXSTRING_BEG</a>;
<a name="l07621"></a>07621 
<a name="l07622"></a>07622               <span class="keywordflow">case</span> <span class="charliteral">&apos;r&apos;</span>:
<a name="l07623"></a>07623                 <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2e577b512d22c4741a1f905721487a42">NEW_STRTERM</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25aa9bfa1dfaca876d4661889a3e02796b3">str_regexp</a>, term, paren);
<a name="l07624"></a>07624                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ad71e45c5e7cc1afa50bed0b8e129d842">tREGEXP_BEG</a>;
<a name="l07625"></a>07625 
<a name="l07626"></a>07626               <span class="keywordflow">case</span> <span class="charliteral">&apos;s&apos;</span>:
<a name="l07627"></a>07627                 <a class="code" href="../../d5/d11/ripper_8c.html#affae1cda64c293bc68894fac03761a9b">lex_strterm</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a2e577b512d22c4741a1f905721487a42">NEW_STRTERM</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ade8554829f1e9c005c9647e2eb1e6c25a47b35c63e588adb3027d930eb4a31d40">str_ssym</a>, term, paren);
<a name="l07628"></a><a class="code" href="../../d7/dc0/parse_8y.html#a9e54e692f310530a4cb22d98adbb4e91">07628</a>                 <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>;
<a name="l07629"></a>07629                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a4e2e6284f92622d77f0feb7152f57ec7">tSYMBEG</a>;
<a name="l07630"></a>07630 
<a name="l07631"></a><a class="code" href="../../d7/dc0/parse_8y.html#a8906e75085b9659c52e26e7bd75cce24">07631</a>               <span class="keywordflow">default</span>:
<a name="l07632"></a>07632                 <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;unknown type of %string&quot;</span>);
<a name="l07633"></a>07633                 <span class="keywordflow">return</span> 0;
<a name="l07634"></a>07634             }
<a name="l07635"></a>07635         }
<a name="l07636"></a>07636         <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l07637"></a>07637             <a class="code" href="../../d5/d11/ripper_8c.html#a574f8b78e40dd79a4046b0cc2beccb4e">set_yylval_id</a>(<span class="charliteral">&apos;%&apos;</span>);
<a name="l07638"></a>07638             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07639"></a>07639             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ab766178dff7099da557a01c7c688d2ae">tOP_ASGN</a>;
<a name="l07640"></a>07640         }
<a name="l07641"></a>07641         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a82590f9b63a085ac5f0583c8aaefdec2">IS_SPCARG</a>(c)) {
<a name="l07642"></a>07642             <span class="keywordflow">goto</span> quotation;
<a name="l07643"></a>07643         }
<a name="l07644"></a>07644         <span class="keywordflow">switch</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a>) {
<a name="l07645"></a>07645           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>: <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>:
<a name="l07646"></a>07646             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>; <span class="keywordflow">break</span>;
<a name="l07647"></a>07647           <span class="keywordflow">default</span>:
<a name="l07648"></a>07648             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>; <span class="keywordflow">break</span>;
<a name="l07649"></a>07649         }
<a name="l07650"></a>07650         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07651"></a>07651         <a class="code" href="../../d5/d11/ripper_8c.html#a043e2757b60ef78bc7bea525be8df035">warn_balanced</a>(<span class="stringliteral">&quot;%%&quot;</span>, <span class="stringliteral">&quot;string literal&quot;</span>);
<a name="l07652"></a>07652         <span class="keywordflow">return</span> <span class="charliteral">&apos;%&apos;</span>;
<a name="l07653"></a>07653 
<a name="l07654"></a>07654       <span class="keywordflow">case</span> <span class="charliteral">&apos;$&apos;</span>:
<a name="l07655"></a>07655         <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389abb6d8e9fea98441c3b5971c4e7d509ae">EXPR_END</a>;
<a name="l07656"></a>07656         <a class="code" href="../../d5/d11/ripper_8c.html#acf4744d9ea857f9df3d1d89e056b20b0">newtok</a>();
<a name="l07657"></a>07657         c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07658"></a>07658         <span class="keywordflow">switch</span> (c) {
<a name="l07659"></a>07659           <span class="keywordflow">case</span> <span class="charliteral">&apos;_&apos;</span>:             <span class="comment">/* $_: last read line string */</span>
<a name="l07660"></a>07660             c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07661"></a>07661             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a054410a01d650b035ea8f1f263c48aa8">parser_is_identchar</a>()) {
<a name="l07662"></a>07662                 <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;$&apos;</span>);
<a name="l07663"></a>07663                 <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;_&apos;</span>);
<a name="l07664"></a>07664                 <span class="keywordflow">break</span>;
<a name="l07665"></a>07665             }
<a name="l07666"></a>07666             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07667"></a>07667             c = <span class="charliteral">&apos;_&apos;</span>;
<a name="l07668"></a>07668             <span class="comment">/* fall through */</span>
<a name="l07669"></a>07669           <span class="keywordflow">case</span> <span class="charliteral">&apos;~&apos;</span>:             <span class="comment">/* $~: match-data */</span>
<a name="l07670"></a>07670           <span class="keywordflow">case</span> <span class="charliteral">&apos;*&apos;</span>:             <span class="comment">/* $*: argv */</span>
<a name="l07671"></a>07671           <span class="keywordflow">case</span> <span class="charliteral">&apos;$&apos;</span>:             <span class="comment">/* $$: pid */</span>
<a name="l07672"></a>07672           <span class="keywordflow">case</span> <span class="charliteral">&apos;?&apos;</span>:             <span class="comment">/* $?: last status */</span>
<a name="l07673"></a>07673           <span class="keywordflow">case</span> <span class="charliteral">&apos;!&apos;</span>:             <span class="comment">/* $!: error string */</span>
<a name="l07674"></a>07674           <span class="keywordflow">case</span> <span class="charliteral">&apos;@&apos;</span>:             <span class="comment">/* $@: error position */</span>
<a name="l07675"></a>07675           <span class="keywordflow">case</span> <span class="charliteral">&apos;/&apos;</span>:             <span class="comment">/* $/: input record separator */</span>
<a name="l07676"></a>07676           <span class="keywordflow">case</span> <span class="charliteral">&apos;\\&apos;</span>:            <span class="comment">/* $\: output record separator */</span>
<a name="l07677"></a>07677           <span class="keywordflow">case</span> <span class="charliteral">&apos;;&apos;</span>:             <span class="comment">/* $;: field separator */</span>
<a name="l07678"></a>07678           <span class="keywordflow">case</span> <span class="charliteral">&apos;,&apos;</span>:             <span class="comment">/* $,: output field separator */</span>
<a name="l07679"></a>07679           <span class="keywordflow">case</span> <span class="charliteral">&apos;.&apos;</span>:             <span class="comment">/* $.: last read line number */</span>
<a name="l07680"></a>07680           <span class="keywordflow">case</span> <span class="charliteral">&apos;=&apos;</span>:             <span class="comment">/* $=: ignorecase */</span>
<a name="l07681"></a>07681           <span class="keywordflow">case</span> <span class="charliteral">&apos;:&apos;</span>:             <span class="comment">/* $:: load path */</span>
<a name="l07682"></a>07682           <span class="keywordflow">case</span> <span class="charliteral">&apos;&lt;&apos;</span>:             <span class="comment">/* $&lt;: reading filename */</span>
<a name="l07683"></a>07683           <span class="keywordflow">case</span> <span class="charliteral">&apos;&gt;&apos;</span>:             <span class="comment">/* $&gt;: default output handle */</span>
<a name="l07684"></a>07684           <span class="keywordflow">case</span> <span class="charliteral">&apos;\&quot;&apos;</span>:            <span class="comment">/* $&quot;: already loaded files */</span>
<a name="l07685"></a>07685             <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;$&apos;</span>);
<a name="l07686"></a>07686             <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07687"></a>07687             <a class="code" href="../../d5/d11/ripper_8c.html#a4cb8635c421d3ada48f4c1a5ecfe6997">tokfix</a>();
<a name="l07688"></a>07688             <a class="code" href="../../d5/d11/ripper_8c.html#a10ce8f505b60a94d404e4e43513933ae">set_yylval_name</a>(<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>()));
<a name="l07689"></a>07689             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a0669929a5e8525326e729ff51842ba9e">tGVAR</a>;
<a name="l07690"></a>07690 
<a name="l07691"></a>07691           <span class="keywordflow">case</span> <span class="charliteral">&apos;-&apos;</span>:
<a name="l07692"></a>07692             <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;$&apos;</span>);
<a name="l07693"></a>07693             <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07694"></a>07694             c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07695"></a>07695             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a054410a01d650b035ea8f1f263c48aa8">parser_is_identchar</a>()) {
<a name="l07696"></a>07696                 <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a9e54e692f310530a4cb22d98adbb4e91">tokadd_mbchar</a>(c) == -1) <span class="keywordflow">return</span> 0;
<a name="l07697"></a>07697             }
<a name="l07698"></a>07698             <span class="keywordflow">else</span> {
<a name="l07699"></a>07699                 <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07700"></a>07700             }
<a name="l07701"></a>07701           gvar:
<a name="l07702"></a>07702             <a class="code" href="../../d5/d11/ripper_8c.html#a4cb8635c421d3ada48f4c1a5ecfe6997">tokfix</a>();
<a name="l07703"></a>07703             <a class="code" href="../../d5/d11/ripper_8c.html#a10ce8f505b60a94d404e4e43513933ae">set_yylval_name</a>(<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>()));
<a name="l07704"></a>07704             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a0669929a5e8525326e729ff51842ba9e">tGVAR</a>;
<a name="l07705"></a>07705 
<a name="l07706"></a>07706           <span class="keywordflow">case</span> <span class="charliteral">&apos;&amp;&apos;</span>:             <span class="comment">/* $&amp;: last match */</span>
<a name="l07707"></a>07707           <span class="keywordflow">case</span> <span class="charliteral">&apos;`&apos;</span>:             <span class="comment">/* $`: string before last match */</span>
<a name="l07708"></a>07708           <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>:            <span class="comment">/* $&apos;: string after last match */</span>
<a name="l07709"></a>07709           <span class="keywordflow">case</span> <span class="charliteral">&apos;+&apos;</span>:             <span class="comment">/* $+: string matches last paren. */</span>
<a name="l07710"></a>07710             <span class="keywordflow">if</span> (last_state == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>) {
<a name="l07711"></a>07711                 <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;$&apos;</span>);
<a name="l07712"></a>07712                 <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07713"></a>07713                 <span class="keywordflow">goto</span> gvar;
<a name="l07714"></a>07714             }
<a name="l07715"></a>07715             <a class="code" href="../../d5/d11/ripper_8c.html#a9b98a334ce6c0615b5716b51b217b042">set_yylval_node</a>(<a class="code" href="../../d3/d09/ripper_8y.html#aed5f589ca405760b85ea2921f87c647d">NEW_BACK_REF</a>(c));
<a name="l07716"></a>07716             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a2ff67775fb64c00948749c56837ef334">tBACK_REF</a>;
<a name="l07717"></a>07717 
<a name="l07718"></a>07718           <span class="keywordflow">case</span> <span class="charliteral">&apos;1&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;2&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;3&apos;</span>:
<a name="l07719"></a>07719           <span class="keywordflow">case</span> <span class="charliteral">&apos;4&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;5&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;6&apos;</span>:
<a name="l07720"></a>07720           <span class="keywordflow">case</span> <span class="charliteral">&apos;7&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;8&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;9&apos;</span>:
<a name="l07721"></a>07721             <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;$&apos;</span>);
<a name="l07722"></a>07722             <span class="keywordflow">do</span> {
<a name="l07723"></a>07723                 <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07724"></a>07724                 c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07725"></a>07725             } <span class="keywordflow">while</span> (c != -1 &amp;&amp; <a class="code" href="../../d1/dcc/bignum_8c.html#ab615ddd0d086b80219cd7e0345d6b5ef">ISDIGIT</a>(c));
<a name="l07726"></a>07726             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07727"></a>07727             <span class="keywordflow">if</span> (last_state == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>) <span class="keywordflow">goto</span> gvar;
<a name="l07728"></a>07728             <a class="code" href="../../d5/d11/ripper_8c.html#a4cb8635c421d3ada48f4c1a5ecfe6997">tokfix</a>();
<a name="l07729"></a>07729             <a class="code" href="../../d5/d11/ripper_8c.html#a9b98a334ce6c0615b5716b51b217b042">set_yylval_node</a>(<a class="code" href="../../d3/d09/ripper_8y.html#ae87f7a3b373aa0511ba8db4b23d60756">NEW_NTH_REF</a>(atoi(<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>()+1)));
<a name="l07730"></a>07730             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a0ac4af4d5877f883246a279da41cdd7a">tNTH_REF</a>;
<a name="l07731"></a>07731 
<a name="l07732"></a>07732           <span class="keywordflow">default</span>:
<a name="l07733"></a>07733             <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#a054410a01d650b035ea8f1f263c48aa8">parser_is_identchar</a>()) {
<a name="l07734"></a>07734                 <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07735"></a>07735                 <span class="keywordflow">return</span> <span class="charliteral">&apos;$&apos;</span>;
<a name="l07736"></a>07736             }
<a name="l07737"></a>07737           <span class="keywordflow">case</span> <span class="charliteral">&apos;0&apos;</span>:
<a name="l07738"></a>07738             <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;$&apos;</span>);
<a name="l07739"></a>07739         }
<a name="l07740"></a>07740         <span class="keywordflow">break</span>;
<a name="l07741"></a>07741 
<a name="l07742"></a>07742       <span class="keywordflow">case</span> <span class="charliteral">&apos;@&apos;</span>:
<a name="l07743"></a>07743         c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07744"></a>07744         <a class="code" href="../../d5/d11/ripper_8c.html#acf4744d9ea857f9df3d1d89e056b20b0">newtok</a>();
<a name="l07745"></a>07745         <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;@&apos;</span>);
<a name="l07746"></a>07746         <span class="keywordflow">if</span> (c == <span class="charliteral">&apos;@&apos;</span>) {
<a name="l07747"></a>07747             <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(<span class="charliteral">&apos;@&apos;</span>);
<a name="l07748"></a>07748             c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07749"></a>07749         }
<a name="l07750"></a>07750         <span class="keywordflow">if</span> (c != -1 &amp;&amp; <a class="code" href="../../d1/dcc/bignum_8c.html#ab615ddd0d086b80219cd7e0345d6b5ef">ISDIGIT</a>(c)) {
<a name="l07751"></a>07751             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a5c08826e166598d221e18905683c3524">tokidx</a> == 1) {
<a name="l07752"></a>07752                 <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;`@%c&apos; is not allowed as an instance variable name&quot;</span>, c);
<a name="l07753"></a>07753             }
<a name="l07754"></a>07754             <span class="keywordflow">else</span> {
<a name="l07755"></a>07755                 <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;`@@%c&apos; is not allowed as a class variable name&quot;</span>, c);
<a name="l07756"></a>07756             }
<a name="l07757"></a>07757             <span class="keywordflow">return</span> 0;
<a name="l07758"></a>07758         }
<a name="l07759"></a>07759         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#a054410a01d650b035ea8f1f263c48aa8">parser_is_identchar</a>()) {
<a name="l07760"></a><a class="code" href="../../d7/dc0/parse_8y.html#a2e577b512d22c4741a1f905721487a42">07760</a>             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07761"></a>07761             <span class="keywordflow">return</span> <span class="charliteral">&apos;@&apos;</span>;
<a name="l07762"></a>07762         }
<a name="l07763"></a>07763         <span class="keywordflow">break</span>;
<a name="l07764"></a><a class="code" href="../../d7/dc0/parse_8y.html#a95eefa198e352cdc0a60b0675abc3deb">07764</a> 
<a name="l07765"></a>07765       <span class="keywordflow">case</span> <span class="charliteral">&apos;_&apos;</span>:
<a name="l07766"></a>07766         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab6ab5791e2b786131b7170981969eb69">was_bol</a>() &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#adcf02626de924b0ed8c7a5927a443c21">whole_match_p</a>(<span class="stringliteral">&quot;__END__&quot;</span>, 7, 0)) {
<a name="l07767"></a>07767             <a class="code" href="../../d5/d11/ripper_8c.html#ad2f5a8f89d8220cedad31569f711d8d1">ruby__end__seen</a> = 1;
<a name="l07768"></a>07768             parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a19fefb3d80f961d6da3692fb8c47515b">eofp</a> = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aacea3516b33941ce8149098e223a7466">Qtrue</a>;
<a name="l07769"></a>07769 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l07770"></a>07770 <span class="preprocessor"></span>            <span class="keywordflow">return</span> -1;
<a name="l07771"></a>07771 <span class="preprocessor">#else</span>
<a name="l07772"></a>07772 <span class="preprocessor"></span>            <a class="code" href="../../d5/d11/ripper_8c.html#a78b87c7a31c73f4d182e2af460d4f009">lex_goto_eol</a>(parser);
<a name="l07773"></a>07773             ripper_dispatch_scan_event(parser, <a class="code" href="../../df/dea/eventids2_8c.html#a6d4769aca044e69eef7579f39045724f">k__END__</a>);
<a name="l07774"></a>07774             <span class="keywordflow">return</span> 0;
<a name="l07775"></a>07775 <span class="preprocessor">#endif</span>
<a name="l07776"></a>07776 <span class="preprocessor"></span>        }
<a name="l07777"></a>07777         <a class="code" href="../../d5/d11/ripper_8c.html#acf4744d9ea857f9df3d1d89e056b20b0">newtok</a>();
<a name="l07778"></a>07778         <span class="keywordflow">break</span>;
<a name="l07779"></a>07779 
<a name="l07780"></a>07780       <span class="keywordflow">default</span>:
<a name="l07781"></a>07781         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#a054410a01d650b035ea8f1f263c48aa8">parser_is_identchar</a>()) {
<a name="l07782"></a>07782             <a class="code" href="../../d5/d11/ripper_8c.html#ac8a9e12698ddd356976669c6116abef1">rb_compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a>  <span class="stringliteral">&quot;Invalid char `\\x%02X&apos; in expression&quot;</span>, c);
<a name="l07783"></a>07783             <span class="keywordflow">goto</span> retry;
<a name="l07784"></a>07784         }
<a name="l07785"></a>07785 
<a name="l07786"></a>07786         <a class="code" href="../../d5/d11/ripper_8c.html#acf4744d9ea857f9df3d1d89e056b20b0">newtok</a>();
<a name="l07787"></a>07787         <span class="keywordflow">break</span>;
<a name="l07788"></a>07788     }
<a name="l07789"></a>07789 
<a name="l07790"></a>07790     mb = <a class="code" href="../../d5/de3/encoding_8h.html#a0a0e73a2d98205044e1ad19432502c5b">ENC_CODERANGE_7BIT</a>;
<a name="l07791"></a>07791     <span class="keywordflow">do</span> {
<a name="l07792"></a>07792         <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#af96ff81718c3c27b342b5958fac6cb7e">ISASCII</a>(c)) mb = <a class="code" href="../../d5/de3/encoding_8h.html#a60de9709709968f9627365a6cd0ff5d1">ENC_CODERANGE_UNKNOWN</a>;
<a name="l07793"></a>07793         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a9e54e692f310530a4cb22d98adbb4e91">tokadd_mbchar</a>(c) == -1) <span class="keywordflow">return</span> 0;
<a name="l07794"></a>07794         c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07795"></a>07795     } <span class="keywordflow">while</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a054410a01d650b035ea8f1f263c48aa8">parser_is_identchar</a>());
<a name="l07796"></a>07796     <span class="keywordflow">switch</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>()[0]) {
<a name="l07797"></a>07797       <span class="keywordflow">case</span> <span class="charliteral">&apos;@&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;$&apos;</span>:
<a name="l07798"></a>07798         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07799"></a>07799         <span class="keywordflow">break</span>;
<a name="l07800"></a>07800       <span class="keywordflow">default</span>:
<a name="l07801"></a>07801         <span class="keywordflow">if</span> ((c == <span class="charliteral">&apos;!&apos;</span> || c == <span class="charliteral">&apos;?&apos;</span>) &amp;&amp; !<a class="code" href="../../d5/d11/ripper_8c.html#aa2f8bef78fbbbce2cc6e7fd364a365be">peek</a>(<span class="charliteral">&apos;=&apos;</span>)) {
<a name="l07802"></a>07802             <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07803"></a>07803         }
<a name="l07804"></a>07804         <span class="keywordflow">else</span> {
<a name="l07805"></a>07805             <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07806"></a>07806         }
<a name="l07807"></a>07807     }
<a name="l07808"></a>07808     <a class="code" href="../../d5/d11/ripper_8c.html#a4cb8635c421d3ada48f4c1a5ecfe6997">tokfix</a>();
<a name="l07809"></a>07809 
<a name="l07810"></a>07810     {
<a name="l07811"></a>07811         <span class="keywordtype">int</span> <a class="code" href="../../d8/d90/nkf_8c.html#a5ea5ac7abf5cce39283e422add1067d5">result</a> = 0;
<a name="l07812"></a>07812 
<a name="l07813"></a>07813         last_state = <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a>;
<a name="l07814"></a>07814         <span class="keywordflow">switch</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>()[0]) {
<a name="l07815"></a>07815           <span class="keywordflow">case</span> <span class="charliteral">&apos;$&apos;</span>:
<a name="l07816"></a>07816             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389abb6d8e9fea98441c3b5971c4e7d509ae">EXPR_END</a>;
<a name="l07817"></a>07817             result = <a class="code" href="../../d5/d11/ripper_8c.html#a0669929a5e8525326e729ff51842ba9e">tGVAR</a>;
<a name="l07818"></a>07818             <span class="keywordflow">break</span>;
<a name="l07819"></a>07819           <span class="keywordflow">case</span> <span class="charliteral">&apos;@&apos;</span>:
<a name="l07820"></a>07820             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389abb6d8e9fea98441c3b5971c4e7d509ae">EXPR_END</a>;
<a name="l07821"></a>07821             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>()[1] == <span class="charliteral">&apos;@&apos;</span>)
<a name="l07822"></a>07822                 result = <a class="code" href="../../d5/d11/ripper_8c.html#aaf70899e7dbbcf4d813cea481eb05592">tCVAR</a>;
<a name="l07823"></a>07823             <span class="keywordflow">else</span>
<a name="l07824"></a>07824                 result = <a class="code" href="../../d5/d11/ripper_8c.html#a3587d04e5ad9d0a5f409cf15a1358127">tIVAR</a>;
<a name="l07825"></a>07825             <span class="keywordflow">break</span>;
<a name="l07826"></a>07826 
<a name="l07827"></a>07827           <span class="keywordflow">default</span>:
<a name="l07828"></a>07828             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a6bf5e0c0ab72ebfec413aeba1bd7696f">toklast</a>() == <span class="charliteral">&apos;!&apos;</span> || <a class="code" href="../../d5/d11/ripper_8c.html#a6bf5e0c0ab72ebfec413aeba1bd7696f">toklast</a>() == <span class="charliteral">&apos;?&apos;</span>) {
<a name="l07829"></a>07829                 result = <a class="code" href="../../d5/d11/ripper_8c.html#aea28d934fe4e93590bcea40f409e1a81">tFID</a>;
<a name="l07830"></a>07830             }
<a name="l07831"></a>07831             <span class="keywordflow">else</span> {
<a name="l07832"></a>07832                 <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>) {
<a name="l07833"></a>07833                     <span class="keywordflow">if</span> ((c = <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>()) == <span class="charliteral">&apos;=&apos;</span> &amp;&amp; !<a class="code" href="../../d5/d11/ripper_8c.html#aa2f8bef78fbbbce2cc6e7fd364a365be">peek</a>(<span class="charliteral">&apos;~&apos;</span>) &amp;&amp; !<a class="code" href="../../d5/d11/ripper_8c.html#aa2f8bef78fbbbce2cc6e7fd364a365be">peek</a>(<span class="charliteral">&apos;&gt;&apos;</span>) &amp;&amp;
<a name="l07834"></a>07834                         (!<a class="code" href="../../d5/d11/ripper_8c.html#aa2f8bef78fbbbce2cc6e7fd364a365be">peek</a>(<span class="charliteral">&apos;=&apos;</span>) || (<a class="code" href="../../d5/d11/ripper_8c.html#ae72931e0e085a840ab0d4e3e9bf77996">peek_n</a>(<span class="charliteral">&apos;&gt;&apos;</span>, 1)))) {
<a name="l07835"></a>07835                         result = <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a>;
<a name="l07836"></a>07836                         <a class="code" href="../../d5/d11/ripper_8c.html#a733bded1a4e5947da3d0a0c629188ed1">tokadd</a>(c);
<a name="l07837"></a><a class="code" href="../../d7/dc0/parse_8y.html#adae5f13519c5ed85ea6c1f142d2cd03a">07837</a>                         <a class="code" href="../../d5/d11/ripper_8c.html#a4cb8635c421d3ada48f4c1a5ecfe6997">tokfix</a>();
<a name="l07838"></a>07838                     }
<a name="l07839"></a>07839                     <span class="keywordflow">else</span> {
<a name="l07840"></a>07840                         <a class="code" href="../../d5/d11/ripper_8c.html#a1c048c86d4090e164a912e3045282f9f">pushback</a>(c);
<a name="l07841"></a>07841                     }
<a name="l07842"></a>07842                 }
<a name="l07843"></a>07843                 <span class="keywordflow">if</span> (result == 0 &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a2bfd4177f165a5968d95960d42578ab6">ISUPPER</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>()[0])) {
<a name="l07844"></a>07844                     result = <a class="code" href="../../d5/d11/ripper_8c.html#a1d9ef131c20254025f1a620b09143cc0">tCONSTANT</a>;
<a name="l07845"></a>07845                 }
<a name="l07846"></a>07846                 <span class="keywordflow">else</span> {
<a name="l07847"></a>07847                     result = <a class="code" href="../../d5/d11/ripper_8c.html#aaacd5368526d4a16bd9b87715d4c7e6c">tIDENTIFIER</a>;
<a name="l07848"></a>07848                 }
<a name="l07849"></a>07849             }
<a name="l07850"></a>07850 
<a name="l07851"></a>07851             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a10bfeab290b5b40f8fc39cadc6198e7e">IS_LABEL_POSSIBLE</a>()) {
<a name="l07852"></a>07852                 <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ae3c906a0b64ac7d458ee6e22b5985d7c">IS_LABEL_SUFFIX</a>(0)) {
<a name="l07853"></a>07853                     <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07854"></a>07854                     <a class="code" href="../../d5/d11/ripper_8c.html#aaef8ffc48c0cd2f26d22f446735cd765">nextc</a>();
<a name="l07855"></a>07855                     <a class="code" href="../../d5/d11/ripper_8c.html#a10ce8f505b60a94d404e4e43513933ae">set_yylval_name</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a68ddfcbd71c4d46d6f05370fd65f52ca">TOK_INTERN</a>(!<a class="code" href="../../d5/d11/ripper_8c.html#af1f238938549819f56223e072d20c91d">ENC_SINGLE</a>(mb)));
<a name="l07856"></a>07856                     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a32e4df1c891f4cb10654bac75cd44ebf">tLABEL</a>;
<a name="l07857"></a>07857                 }
<a name="l07858"></a>07858             }
<a name="l07859"></a>07859             <span class="keywordflow">if</span> (mb == <a class="code" href="../../d5/de3/encoding_8h.html#a0a0e73a2d98205044e1ad19432502c5b">ENC_CODERANGE_7BIT</a> &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> != <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a>) {
<a name="l07860"></a>07860                 <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../da/df3/structkwtable.html">kwtable</a> *kw;
<a name="l07861"></a>07861 
<a name="l07862"></a>07862                 <span class="comment">/* See if it is a reserved word.  */</span>
<a name="l07863"></a>07863                 kw = <a class="code" href="../../d3/deb/lex_8c.html#ac4a38142b075a785d0673e75886531d1">rb_reserved_word</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a2b3a335d617ec14d6296ca82d3055858">tok</a>(), <a class="code" href="../../d5/d11/ripper_8c.html#a69cc32ebd541279dcf93b82393380233">toklen</a>());
<a name="l07864"></a>07864                 <span class="keywordflow">if</span> (kw) {
<a name="l07865"></a>07865                     <span class="keyword">enum</span> <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389">lex_state_e</a> <a class="code" href="../../d5/d1d/gb18030_8c.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a>;
<a name="l07866"></a>07866                     <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = kw-&gt;<a class="code" href="../../da/df3/structkwtable.html#a990adc24e31ddbff9411605da137102b">state</a>;
<a name="l07867"></a>07867                     <span class="keywordflow">if</span> (state == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>) {
<a name="l07868"></a>07868                         <a class="code" href="../../d5/d11/ripper_8c.html#a10ce8f505b60a94d404e4e43513933ae">set_yylval_name</a>(<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(kw-&gt;<a class="code" href="../../da/df3/structkwtable.html#a83406d5d3b22fd47c70ba6b496d8d68f">name</a>));
<a name="l07869"></a>07869                         <span class="keywordflow">return</span> kw-&gt;<a class="code" href="../../da/df3/structkwtable.html#a3fbe6efc7807f6b928b0e3edbc77e17b">id</a>[0];
<a name="l07870"></a>07870                     }
<a name="l07871"></a>07871                     <span class="keywordflow">if</span> (kw-&gt;<a class="code" href="../../da/df3/structkwtable.html#a3fbe6efc7807f6b928b0e3edbc77e17b">id</a>[0] == <a class="code" href="../../d5/d11/ripper_8c.html#af0eaec49b504972deb0631ab428cf7f0">keyword_do</a>) {
<a name="l07872"></a>07872                         <a class="code" href="../../d5/d11/ripper_8c.html#a302ec49a8c1c02e0dbaa5b4362263e40">command_start</a> = <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l07873"></a>07873                         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a107615bfe2fe869c09b6c4a3bd8db8ec">lpar_beg</a> &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#a107615bfe2fe869c09b6c4a3bd8db8ec">lpar_beg</a> == <a class="code" href="../../d5/d11/ripper_8c.html#aba595207d91c2ea297a6d72686e3d421">paren_nest</a>) {
<a name="l07874"></a>07874                             <a class="code" href="../../d5/d11/ripper_8c.html#a107615bfe2fe869c09b6c4a3bd8db8ec">lpar_beg</a> = 0;
<a name="l07875"></a>07875                             --<a class="code" href="../../d5/d11/ripper_8c.html#aba595207d91c2ea297a6d72686e3d421">paren_nest</a>;
<a name="l07876"></a>07876                             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a76b1eba4e233c955a6532d8de0c07b4b">keyword_do_LAMBDA</a>;
<a name="l07877"></a>07877                         }
<a name="l07878"></a>07878                         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ac8c5b56f91e035863a4d5b4e1fd0a2ec">COND_P</a>()) <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a531ddac2ff71be80ea02f3cb575b0d82">keyword_do_cond</a>;
<a name="l07879"></a>07879                         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ac35199dc098b524e7313c5961935b142">CMDARG_P</a>() &amp;&amp; state != <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aad207364dc60f12acc33ec7685fd7c84">EXPR_CMDARG</a>)
<a name="l07880"></a>07880                             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ac943360c0f2387c1797ba9b77537e915">keyword_do_block</a>;
<a name="l07881"></a>07881                         <span class="keywordflow">if</span> (state == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ad1e711c09425cc55dd8982c6486d14cb">EXPR_ENDARG</a> || state == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>)
<a name="l07882"></a>07882                             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ac943360c0f2387c1797ba9b77537e915">keyword_do_block</a>;
<a name="l07883"></a>07883                         <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#af0eaec49b504972deb0631ab428cf7f0">keyword_do</a>;
<a name="l07884"></a>07884                     }
<a name="l07885"></a>07885                     <span class="keywordflow">if</span> (state == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a> || state == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a26cd215d29270ab3dcfa7bf9bbb81193">EXPR_VALUE</a>)
<a name="l07886"></a>07886                         <span class="keywordflow">return</span> kw-&gt;<a class="code" href="../../da/df3/structkwtable.html#a3fbe6efc7807f6b928b0e3edbc77e17b">id</a>[0];
<a name="l07887"></a>07887                     <span class="keywordflow">else</span> {
<a name="l07888"></a>07888                         <span class="keywordflow">if</span> (kw-&gt;<a class="code" href="../../da/df3/structkwtable.html#a3fbe6efc7807f6b928b0e3edbc77e17b">id</a>[0] != kw-&gt;<a class="code" href="../../da/df3/structkwtable.html#a3fbe6efc7807f6b928b0e3edbc77e17b">id</a>[1])
<a name="l07889"></a>07889                             <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae75329b254e24a50315bb64425443d68">EXPR_BEG</a>;
<a name="l07890"></a>07890                         <span class="keywordflow">return</span> kw-&gt;<a class="code" href="../../da/df3/structkwtable.html#a3fbe6efc7807f6b928b0e3edbc77e17b">id</a>[1];
<a name="l07891"></a>07891                     }
<a name="l07892"></a>07892                 }
<a name="l07893"></a>07893             }
<a name="l07894"></a>07894 
<a name="l07895"></a>07895             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a1436a59750d881d30cbd3873682868f8">IS_BEG</a>() ||
<a name="l07896"></a>07896                 <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a> ||
<a name="l07897"></a>07897                 <a class="code" href="../../d5/d11/ripper_8c.html#a8d78f62dab3d5267c076a82976814b8a">IS_ARG</a>()) {
<a name="l07898"></a>07898                 <span class="keywordflow">if</span> (cmd_state) {
<a name="l07899"></a>07899                     <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aad207364dc60f12acc33ec7685fd7c84">EXPR_CMDARG</a>;
<a name="l07900"></a><a class="code" href="../../d7/dc0/parse_8y.html#a66716d038636a42bcf15c9762d3b05a5">07900</a>                 }
<a name="l07901"></a>07901                 <span class="keywordflow">else</span> {
<a name="l07902"></a>07902                     <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389aba244091a1141a6b2cbb212831263882">EXPR_ARG</a>;
<a name="l07903"></a>07903                 }
<a name="l07904"></a>07904             }
<a name="l07905"></a>07905             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a099bfc9473c6bbfffaf9ef2f473ca743">EXPR_FNAME</a>) {
<a name="l07906"></a>07906                 <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389a6625ca72427336b58374fc438e51b225">EXPR_ENDFN</a>;
<a name="l07907"></a>07907             }
<a name="l07908"></a>07908             <span class="keywordflow">else</span> {
<a name="l07909"></a>07909                 <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389abb6d8e9fea98441c3b5971c4e7d509ae">EXPR_END</a>;
<a name="l07910"></a>07910             }
<a name="l07911"></a>07911         }
<a name="l07912"></a>07912         {
<a name="l07913"></a>07913             <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> ident = <a class="code" href="../../d5/d11/ripper_8c.html#a68ddfcbd71c4d46d6f05370fd65f52ca">TOK_INTERN</a>(!<a class="code" href="../../d5/d11/ripper_8c.html#af1f238938549819f56223e072d20c91d">ENC_SINGLE</a>(mb));
<a name="l07914"></a>07914 
<a name="l07915"></a>07915             <a class="code" href="../../d5/d11/ripper_8c.html#a10ce8f505b60a94d404e4e43513933ae">set_yylval_name</a>(ident);
<a name="l07916"></a>07916             <span class="keywordflow">if</span> (last_state != <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389ae16ce6f814887883585cfb98a084f8ab">EXPR_DOT</a> &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#abe05eb6b7b2f2f735012a349f49c4c69">is_local_id</a>(ident) &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#a0103c8ab16f47ff57468f9a40024b009">lvar_defined</a>(ident)) {
<a name="l07917"></a><a class="code" href="../../d7/dc0/parse_8y.html#a24b14900b405d5a403c8fea7c8e97d4e">07917</a>                 <a class="code" href="../../d5/d11/ripper_8c.html#a7eef123a9e5b7353826d244b80eb4eea">lex_state</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a41ef384dc1649a65b158dd68d3b8c389abb6d8e9fea98441c3b5971c4e7d509ae">EXPR_END</a>;
<a name="l07918"></a>07918             }
<a name="l07919"></a>07919         }
<a name="l07920"></a>07920         <span class="keywordflow">return</span> result;
<a name="l07921"></a>07921     }
<a name="l07922"></a>07922 }
<a name="l07923"></a>07923 
<a name="l07924"></a>07924 <span class="preprocessor">#if YYPURE</span>
<a name="l07925"></a>07925 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l07926"></a>07926 <a class="code" href="../../d3/d7f/gram_8c.html#a5611300548b2030d86b6ab9168132b88">yylex</a>(<span class="keywordtype">void</span> *lval, <span class="keywordtype">void</span> *p)
<a name="l07927"></a>07927 <span class="preprocessor">#else</span>
<a name="l07928"></a>07928 <span class="preprocessor"></span><a class="code" href="../../d3/d7f/gram_8c.html#a5611300548b2030d86b6ab9168132b88">yylex</a>(<span class="keywordtype">void</span> *p)
<a name="l07929"></a>07929 <span class="preprocessor">#endif</span>
<a name="l07930"></a>07930 <span class="preprocessor"></span>{
<a name="l07931"></a>07931     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser = (<span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*)p;
<a name="l07932"></a>07932     <span class="keywordtype">int</span> t;
<a name="l07933"></a>07933 
<a name="l07934"></a>07934 <span class="preprocessor">#if YYPURE</span>
<a name="l07935"></a>07935 <span class="preprocessor"></span>    parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#aa46eff75784402a4786ee089724ef427">parser_yylval</a> = lval;
<a name="l07936"></a>07936     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#aa46eff75784402a4786ee089724ef427">parser_yylval</a>-&gt;<a class="code" href="../../d5/db1/union_y_y_s_t_y_p_e.html#a400b19db6242e7582fb5ff185f5c0a22">val</a> = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a2edf6990280eb2637623ccd421dee4f0">Qundef</a>;
<a name="l07937"></a>07937 <span class="preprocessor">#endif</span>
<a name="l07938"></a>07938 <span class="preprocessor"></span>    t = <a class="code" href="../../d7/dc0/parse_8y.html#af006539b61f4b4c5b76969e1993e672b">parser_yylex</a>(parser);
<a name="l07939"></a>07939 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l07940"></a>07940 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(parser-&gt;delayed)) {
<a name="l07941"></a>07941         ripper_dispatch_delayed_token(parser, t);
<a name="l07942"></a>07942         <span class="keywordflow">return</span> t;
<a name="l07943"></a><a class="code" href="../../d7/dc0/parse_8y.html#a2f659649d0e9161d89ce9d80dff2043a">07943</a>     }
<a name="l07944"></a>07944     <span class="keywordflow">if</span> (t != 0)
<a name="l07945"></a>07945         ripper_dispatch_scan_event(parser, t);
<a name="l07946"></a>07946 <span class="preprocessor">#endif</span>
<a name="l07947"></a><a class="code" href="../../d7/dc0/parse_8y.html#a888dc8bb6e309b2827feb1720ef952a4">07947</a> <span class="preprocessor"></span>
<a name="l07948"></a>07948     <span class="keywordflow">return</span> t;
<a name="l07949"></a>07949 }
<a name="l07950"></a>07950 
<a name="l07951"></a>07951 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l07952"></a>07952 <span class="preprocessor"></span><span class="keyword">static</span> NODE*
<a name="l07953"></a>07953 <a class="code" href="../../d7/dc0/parse_8y.html#a1aa5bc58197c4b24634e776fa093137c">node_newnode</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">enum</span> <a class="code" href="../../d1/d72/debug_8c.html#a3dae8bc7c708705be3a6e1688378868e">node_type</a> <a class="code" href="../../d5/d9d/tcltklib_8c.html#ac765329451135abec74c45e1897abf26">type</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> a0, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> a1, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> a2)
<a name="l07954"></a>07954 {
<a name="l07955"></a>07955     NODE *n = (<a class="code" href="../../d5/d11/ripper_8c.html#aa6e8d7f44de147b7e48991c2e9f3f3d4">rb_node_newnode</a>)(type, a0, a1, a2);
<a name="l07956"></a>07956     <a class="code" href="../../d3/d09/ripper_8y.html#ac821dfc4ca1d4673db9669205be97f85">nd_set_line</a>(n, <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>);
<a name="l07957"></a>07957     <span class="keywordflow">return</span> n;
<a name="l07958"></a>07958 }
<a name="l07959"></a>07959 
<a name="l07960"></a>07960 <span class="keyword">enum</span> <a class="code" href="../../d1/d72/debug_8c.html#a3dae8bc7c708705be3a6e1688378868e">node_type</a>
<a name="l07961"></a>07961 <a class="code" href="../../d5/d11/ripper_8c.html#a36db4a781dd7cb9698ac6f1f233a6206">nodetype</a>(NODE *node)                    <span class="comment">/* for debug */</span>
<a name="l07962"></a>07962 {
<a name="l07963"></a>07963     <span class="keywordflow">return</span> (<span class="keyword">enum</span> <a class="code" href="../../d1/d72/debug_8c.html#a3dae8bc7c708705be3a6e1688378868e">node_type</a>)<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node);
<a name="l07964"></a>07964 }
<a name="l07965"></a>07965 
<a name="l07966"></a>07966 <span class="keywordtype">int</span>
<a name="l07967"></a>07967 <a class="code" href="../../d5/d11/ripper_8c.html#a7dce59fe4eb3d1fcf860c422310cc088">nodeline</a>(NODE *node)
<a name="l07968"></a>07968 {
<a name="l07969"></a>07969     <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a532b1472e32368b65ce9351c1abc2c02">nd_line</a>(node);
<a name="l07970"></a>07970 }
<a name="l07971"></a>07971 
<a name="l07972"></a>07972 <span class="keyword">static</span> NODE*
<a name="l07973"></a>07973 <a class="code" href="../../d7/dc0/parse_8y.html#a6ad6bd94979e7cb3c497c20bcf5fbd86">newline_node</a>(NODE *node)
<a name="l07974"></a>07974 {
<a name="l07975"></a>07975     <span class="keywordflow">if</span> (node) {
<a name="l07976"></a>07976         node = <a class="code" href="../../d7/dc0/parse_8y.html#af6073dd45c01beeb98d4a07c13a581f8">remove_begin</a>(node);
<a name="l07977"></a>07977         node-&gt;flags |= <a class="code" href="../../d3/d09/ripper_8y.html#aca499ed79c89ddea66b38e191e5aa2e3">NODE_FL_NEWLINE</a>;
<a name="l07978"></a>07978     }
<a name="l07979"></a>07979     <span class="keywordflow">return</span> node;
<a name="l07980"></a>07980 }
<a name="l07981"></a>07981 
<a name="l07982"></a>07982 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l07983"></a>07983 <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>(NODE *node, NODE *orig)
<a name="l07984"></a>07984 {
<a name="l07985"></a>07985     <span class="keywordflow">if</span> (!node) <span class="keywordflow">return</span>;
<a name="l07986"></a>07986     <span class="keywordflow">if</span> (!orig) <span class="keywordflow">return</span>;
<a name="l07987"></a>07987     <span class="keywordflow">if</span> (orig == (NODE*)1) <span class="keywordflow">return</span>;
<a name="l07988"></a>07988     <a class="code" href="../../d3/d09/ripper_8y.html#ac821dfc4ca1d4673db9669205be97f85">nd_set_line</a>(node, <a class="code" href="../../d3/d09/ripper_8y.html#a532b1472e32368b65ce9351c1abc2c02">nd_line</a>(orig));
<a name="l07989"></a>07989 }
<a name="l07990"></a>07990 
<a name="l07991"></a>07991 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l07992"></a>07992 <a class="code" href="../../d5/d11/ripper_8c.html#a8746752241f1e93cda7de604e74573f2">parser_warning</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node, <span class="keyword">const</span> <span class="keywordtype">char</span> *mesg)
<a name="l07993"></a>07993 {
<a name="l07994"></a>07994     <a class="code" href="../../db/dcc/error_8c.html#ab89177d61c1d80c8e75fa0ff73addd85">rb_compile_warning</a>(<a class="code" href="../../d2/d47/compile_8c.html#aca52b28c4504720708a4fab8675dc407">ruby_sourcefile</a>, <a class="code" href="../../d3/d09/ripper_8y.html#a532b1472e32368b65ce9351c1abc2c02">nd_line</a>(node), <span class="stringliteral">&quot;%s&quot;</span>, mesg);
<a name="l07995"></a>07995 }
<a name="l07996"></a>07996 <span class="preprocessor">#define parser_warning(node, mesg) parser_warning(parser, (node), (mesg))</span>
<a name="l07997"></a>07997 <span class="preprocessor"></span>
<a name="l07998"></a>07998 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l07999"></a>07999 <a class="code" href="../../d5/d11/ripper_8c.html#a84b75c05dad2b44ac64ce29c35187e07">parser_warn</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node, <span class="keyword">const</span> <span class="keywordtype">char</span> *mesg)
<a name="l08000"></a>08000 {
<a name="l08001"></a>08001     <a class="code" href="../../db/dcc/error_8c.html#a146caf541551298053f23e384ce4ce2a">rb_compile_warn</a>(<a class="code" href="../../d2/d47/compile_8c.html#aca52b28c4504720708a4fab8675dc407">ruby_sourcefile</a>, <a class="code" href="../../d3/d09/ripper_8y.html#a532b1472e32368b65ce9351c1abc2c02">nd_line</a>(node), <span class="stringliteral">&quot;%s&quot;</span>, mesg);
<a name="l08002"></a>08002 }
<a name="l08003"></a>08003 <span class="preprocessor">#define parser_warn(node, mesg) parser_warn(parser, (node), (mesg))</span>
<a name="l08004"></a>08004 <span class="preprocessor"></span>
<a name="l08005"></a>08005 <span class="keyword">static</span> NODE*
<a name="l08006"></a>08006 <a class="code" href="../../d7/dc0/parse_8y.html#a7555d1e0de9ba368249e86283adb2e7f">block_append_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *head, NODE *tail)
<a name="l08007"></a>08007 {
<a name="l08008"></a>08008     NODE *end, *h = head, *nd;
<a name="l08009"></a>08009 
<a name="l08010"></a>08010     <span class="keywordflow">if</span> (tail == 0) <span class="keywordflow">return</span> head;
<a name="l08011"></a>08011 
<a name="l08012"></a>08012     <span class="keywordflow">if</span> (h == 0) <span class="keywordflow">return</span> tail;
<a name="l08013"></a>08013     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(h)) {
<a name="l08014"></a>08014       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#af19d1c1d9f26c7b19546967449e887f6">NODE_LIT</a>:
<a name="l08015"></a>08015       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aac55f53b58d8cbef84a61f2d744e7643">NODE_STR</a>:
<a name="l08016"></a>08016       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a4beb90d7425a19420390f5f402c7cd7b">NODE_SELF</a>:
<a name="l08017"></a>08017       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a00911cb328ad9df305f886837c76923c">NODE_TRUE</a>:
<a name="l08018"></a>08018       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aa66ba820f9577731ad767ba777d2e633">NODE_FALSE</a>:
<a name="l08019"></a>08019       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a52160547548851ab924923b8ca1dcb42">NODE_NIL</a>:
<a name="l08020"></a>08020         <a class="code" href="../../d5/d11/ripper_8c.html#a8746752241f1e93cda7de604e74573f2">parser_warning</a>(h, <span class="stringliteral">&quot;unused literal ignored&quot;</span>);
<a name="l08021"></a>08021         <span class="keywordflow">return</span> tail;
<a name="l08022"></a>08022       <span class="keywordflow">default</span>:
<a name="l08023"></a>08023         h = end = <a class="code" href="../../d3/d09/ripper_8y.html#a666a735b4205151eea89f68b0ffc1608">NEW_BLOCK</a>(head);
<a name="l08024"></a>08024         end-&gt;nd_end = end;
<a name="l08025"></a>08025         <a class="code" href="../../d5/d11/ripper_8c.html#aef78a4ca44d9bda9168f56901e4fcf93">fixpos</a>(end, head);
<a name="l08026"></a>08026         head = end;
<a name="l08027"></a>08027         <span class="keywordflow">break</span>;
<a name="l08028"></a>08028       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ae26c9ff309f6c5d0fd5c3edd0232ee0d">NODE_BLOCK</a>:
<a name="l08029"></a>08029         end = h-&gt;nd_end;
<a name="l08030"></a>08030         <span class="keywordflow">break</span>;
<a name="l08031"></a>08031     }
<a name="l08032"></a>08032 
<a name="l08033"></a>08033     nd = end-&gt;nd_head;
<a name="l08034"></a>08034     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(nd)) {
<a name="l08035"></a>08035       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a0740a4cb8cfb60e24ac741779344739b">NODE_RETURN</a>:
<a name="l08036"></a>08036       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ac20bfa82bfa40e0dbcb4c41c2d5ee603">NODE_BREAK</a>:
<a name="l08037"></a>08037       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a419512cc7a70c27779dfb2fb3ca71a5a">NODE_NEXT</a>:
<a name="l08038"></a>08038       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a18d2e6f19f54d07ba73aa95f4eab97d3">NODE_REDO</a>:
<a name="l08039"></a>08039       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ab34acb27dadef25e21806f3c6e8e0b2e">NODE_RETRY</a>:
<a name="l08040"></a>08040         <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a117741045763c090b26e30a85bd0e0a6">RTEST</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a56087d5316e4c73027105c023006cb15">ruby_verbose</a>)) {
<a name="l08041"></a>08041             <a class="code" href="../../d5/d11/ripper_8c.html#a8746752241f1e93cda7de604e74573f2">parser_warning</a>(nd, <span class="stringliteral">&quot;statement not reached&quot;</span>);
<a name="l08042"></a>08042         }
<a name="l08043"></a>08043         <span class="keywordflow">break</span>;
<a name="l08044"></a>08044 
<a name="l08045"></a>08045       <span class="keywordflow">default</span>:
<a name="l08046"></a>08046         <span class="keywordflow">break</span>;
<a name="l08047"></a>08047     }
<a name="l08048"></a>08048 
<a name="l08049"></a>08049     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(tail) != NODE_BLOCK) {
<a name="l08050"></a>08050         tail = <a class="code" href="../../d3/d09/ripper_8y.html#a666a735b4205151eea89f68b0ffc1608">NEW_BLOCK</a>(tail);
<a name="l08051"></a>08051         tail-&gt;nd_end = tail;
<a name="l08052"></a>08052     }
<a name="l08053"></a>08053     end-&gt;nd_next = tail;
<a name="l08054"></a><a class="code" href="../../d7/dc0/parse_8y.html#a0e98666d3d500be1f1457a46c8e5764c">08054</a>     h-&gt;nd_end = tail-&gt;nd_end;
<a name="l08055"></a>08055     <span class="keywordflow">return</span> head;
<a name="l08056"></a>08056 }
<a name="l08057"></a>08057 
<a name="l08058"></a>08058 <span class="comment">/* append item to the list */</span>
<a name="l08059"></a>08059 <span class="keyword">static</span> NODE*
<a name="l08060"></a>08060 <a class="code" href="../../d7/dc0/parse_8y.html#a03b449bec1be892e44e479612e98ec0e">list_append_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *list, NODE *item)
<a name="l08061"></a>08061 {
<a name="l08062"></a><a class="code" href="../../d7/dc0/parse_8y.html#a3c5a49f7f344bf7d4894a02ea49538d7">08062</a>     NODE *<a class="code" href="../../d6/da0/nkf-utf8_2nkf_8c.html#ab0b853bc4e4e9658036bf7e604f398ad">last</a>;
<a name="l08063"></a>08063 
<a name="l08064"></a>08064     <span class="keywordflow">if</span> (list == 0) <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(item);
<a name="l08065"></a><a class="code" href="../../d7/dc0/parse_8y.html#ac4d9b95cf84b566ad31b75093615da57">08065</a>     <span class="keywordflow">if</span> (list-&gt;nd_next) {
<a name="l08066"></a>08066         last = list-&gt;nd_next-&gt;nd_end;
<a name="l08067"></a>08067     }
<a name="l08068"></a>08068     <span class="keywordflow">else</span> {
<a name="l08069"></a>08069         last = list;
<a name="l08070"></a>08070     }
<a name="l08071"></a>08071 
<a name="l08072"></a>08072     list-&gt;nd_alen += 1;
<a name="l08073"></a>08073     last-&gt;nd_next = <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(item);
<a name="l08074"></a>08074     list-&gt;nd_next-&gt;nd_end = last-&gt;nd_next;
<a name="l08075"></a>08075     <span class="keywordflow">return</span> list;
<a name="l08076"></a><a class="code" href="../../d7/dc0/parse_8y.html#ab681d822bfcbffcfcafaedf91e932eb1">08076</a> }
<a name="l08077"></a>08077 
<a name="l08078"></a>08078 <span class="comment">/* concat two lists */</span>
<a name="l08079"></a>08079 <span class="keyword">static</span> NODE*
<a name="l08080"></a>08080 <a class="code" href="../../d7/dc0/parse_8y.html#ad9533c7bb654b3e2aeafd10f392ccfbd">list_concat_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *head, NODE *tail)
<a name="l08081"></a>08081 {
<a name="l08082"></a>08082     NODE *last;
<a name="l08083"></a><a class="code" href="../../d7/dc0/parse_8y.html#a5ef8f6dfb2d66a30d03278efd7c13b5c">08083</a> 
<a name="l08084"></a>08084     <span class="keywordflow">if</span> (head-&gt;nd_next) {
<a name="l08085"></a>08085         last = head-&gt;nd_next-&gt;nd_end;
<a name="l08086"></a>08086     }
<a name="l08087"></a>08087     <span class="keywordflow">else</span> {
<a name="l08088"></a>08088         last = head;
<a name="l08089"></a>08089     }
<a name="l08090"></a>08090 
<a name="l08091"></a>08091     head-&gt;nd_alen += tail-&gt;nd_alen;
<a name="l08092"></a>08092     last-&gt;nd_next = tail;
<a name="l08093"></a>08093     <span class="keywordflow">if</span> (tail-&gt;nd_next) {
<a name="l08094"></a>08094         head-&gt;nd_next-&gt;nd_end = tail-&gt;nd_next-&gt;nd_end;
<a name="l08095"></a>08095     }
<a name="l08096"></a>08096     <span class="keywordflow">else</span> {
<a name="l08097"></a>08097         head-&gt;nd_next-&gt;nd_end = tail;
<a name="l08098"></a>08098     }
<a name="l08099"></a>08099 
<a name="l08100"></a>08100     <span class="keywordflow">return</span> head;
<a name="l08101"></a>08101 }
<a name="l08102"></a>08102 
<a name="l08103"></a><a class="code" href="../../d7/dc0/parse_8y.html#a52fd85030a5897245bf08ea733f141fe">08103</a> <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l08104"></a>08104 <a class="code" href="../../d7/dc0/parse_8y.html#ac767d74bdd8f4a8a068329f007260dc2">literal_concat0</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> head, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> tail)
<a name="l08105"></a>08105 {
<a name="l08106"></a>08106     <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(tail)) <span class="keywordflow">return</span> 1;
<a name="l08107"></a>08107     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/db5/encoding_8c.html#a533ed45f02a3f72987b0f6f5ce04c996">rb_enc_compatible</a>(head, tail)) {
<a name="l08108"></a>08108         <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;string literal encodings differ (%s / %s)&quot;</span>,
<a name="l08109"></a>08109                       <a class="code" href="../../d5/de3/encoding_8h.html#a69d59d898802726787a168ef2e0dc92c">rb_enc_name</a>(<a class="code" href="../../d5/db5/encoding_8c.html#ac21ed764f3b39453b6a848dd64a19585">rb_enc_get</a>(head)),
<a name="l08110"></a>08110                       <a class="code" href="../../d5/de3/encoding_8h.html#a69d59d898802726787a168ef2e0dc92c">rb_enc_name</a>(<a class="code" href="../../d5/db5/encoding_8c.html#ac21ed764f3b39453b6a848dd64a19585">rb_enc_get</a>(tail)));
<a name="l08111"></a>08111         <a class="code" href="../../db/d2e/intern_8h.html#a0a133856edb99f69eae3cb5a9e275ac9">rb_str_resize</a>(head, 0);
<a name="l08112"></a>08112         <a class="code" href="../../db/d2e/intern_8h.html#a0a133856edb99f69eae3cb5a9e275ac9">rb_str_resize</a>(tail, 0);
<a name="l08113"></a>08113         <span class="keywordflow">return</span> 0;
<a name="l08114"></a>08114     }
<a name="l08115"></a>08115     <a class="code" href="../../db/d2e/intern_8h.html#abea58f4d2559060d5821ff7d3d35a496">rb_str_buf_append</a>(head, tail);
<a name="l08116"></a>08116     <span class="keywordflow">return</span> 1;
<a name="l08117"></a>08117 }
<a name="l08118"></a>08118 
<a name="l08119"></a>08119 <span class="comment">/* concat two string literals */</span>
<a name="l08120"></a>08120 <span class="keyword">static</span> NODE *
<a name="l08121"></a>08121 <a class="code" href="../../d7/dc0/parse_8y.html#a11c15cdb93782ce6cbd36a3943f0741b">literal_concat_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *head, NODE *tail)
<a name="l08122"></a>08122 {
<a name="l08123"></a>08123     <span class="keyword">enum</span> <a class="code" href="../../d1/d72/debug_8c.html#a3dae8bc7c708705be3a6e1688378868e">node_type</a> htype;
<a name="l08124"></a>08124 
<a name="l08125"></a>08125     <span class="keywordflow">if</span> (!head) <span class="keywordflow">return</span> tail;
<a name="l08126"></a>08126     <span class="keywordflow">if</span> (!tail) <span class="keywordflow">return</span> head;
<a name="l08127"></a>08127 
<a name="l08128"></a>08128     htype = <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(head);
<a name="l08129"></a>08129     <span class="keywordflow">if</span> (htype == NODE_EVSTR) {
<a name="l08130"></a>08130         NODE *node = <a class="code" href="../../d3/d09/ripper_8y.html#a4095910e406092a35a8cbf1d1f541026">NEW_DSTR</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>);
<a name="l08131"></a>08131         head = <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>(node, head);
<a name="l08132"></a>08132     }
<a name="l08133"></a>08133     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(tail)) {
<a name="l08134"></a>08134       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aac55f53b58d8cbef84a61f2d744e7643">NODE_STR</a>:
<a name="l08135"></a><a class="code" href="../../d7/dc0/parse_8y.html#a926e0a72fb45f59dcde1490c84d94967">08135</a>         <span class="keywordflow">if</span> (htype == NODE_STR) {
<a name="l08136"></a>08136             <span class="keywordflow">if</span> (!<a class="code" href="../../d7/dc0/parse_8y.html#ac767d74bdd8f4a8a068329f007260dc2">literal_concat0</a>(parser, head-&gt;nd_lit, tail-&gt;nd_lit)) {
<a name="l08137"></a>08137               error:
<a name="l08138"></a>08138                 <a class="code" href="../../d8/d16/gc_8c.html#a53016811c87ff4c3ea839c9e85a9a9a4">rb_gc_force_recycle</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)head);
<a name="l08139"></a>08139                 <a class="code" href="../../d8/d16/gc_8c.html#a53016811c87ff4c3ea839c9e85a9a9a4">rb_gc_force_recycle</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)tail);
<a name="l08140"></a>08140                 <span class="keywordflow">return</span> 0;
<a name="l08141"></a>08141             }
<a name="l08142"></a>08142             <a class="code" href="../../d8/d16/gc_8c.html#a53016811c87ff4c3ea839c9e85a9a9a4">rb_gc_force_recycle</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)tail);
<a name="l08143"></a>08143         }
<a name="l08144"></a>08144         <span class="keywordflow">else</span> {
<a name="l08145"></a>08145             <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>(head, tail);
<a name="l08146"></a>08146         }
<a name="l08147"></a><a class="code" href="../../d7/dc0/parse_8y.html#aaa295e68cc162c1332bd842eef200a3e">08147</a>         <span class="keywordflow">break</span>;
<a name="l08148"></a><a class="code" href="../../d7/dc0/parse_8y.html#a191830a4ed0005354eea2b6a1741639e">08148</a> 
<a name="l08149"></a>08149       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a6487236f9718bcfe094a657cb0efd498">NODE_DSTR</a>:
<a name="l08150"></a>08150         <span class="keywordflow">if</span> (htype == NODE_STR) {
<a name="l08151"></a><a class="code" href="../../d7/dc0/parse_8y.html#a35c61cf2b11055da82f4e2264b2bea53">08151</a>             <span class="keywordflow">if</span> (!<a class="code" href="../../d7/dc0/parse_8y.html#ac767d74bdd8f4a8a068329f007260dc2">literal_concat0</a>(parser, head-&gt;nd_lit, tail-&gt;nd_lit))
<a name="l08152"></a>08152                 <span class="keywordflow">goto</span> error;
<a name="l08153"></a>08153             tail-&gt;nd_lit = head-&gt;nd_lit;
<a name="l08154"></a>08154             <a class="code" href="../../d8/d16/gc_8c.html#a53016811c87ff4c3ea839c9e85a9a9a4">rb_gc_force_recycle</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)head);
<a name="l08155"></a>08155             head = tail;
<a name="l08156"></a>08156         }
<a name="l08157"></a>08157         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(tail-&gt;nd_lit)) {
<a name="l08158"></a>08158             head-&gt;nd_alen += tail-&gt;nd_alen - 1;
<a name="l08159"></a>08159             head-&gt;nd_next-&gt;nd_end-&gt;nd_next = tail-&gt;nd_next;
<a name="l08160"></a><a class="code" href="../../d7/dc0/parse_8y.html#a190ee587a3a9f8287285ab5f4b4c74b4">08160</a>             head-&gt;nd_next-&gt;nd_end = tail-&gt;nd_next-&gt;nd_end;
<a name="l08161"></a>08161             <a class="code" href="../../d8/d16/gc_8c.html#a53016811c87ff4c3ea839c9e85a9a9a4">rb_gc_force_recycle</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)tail);
<a name="l08162"></a>08162         }
<a name="l08163"></a>08163         <span class="keywordflow">else</span> {
<a name="l08164"></a>08164             <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>(tail, NODE_ARRAY);
<a name="l08165"></a>08165             tail-&gt;nd_head = <a class="code" href="../../d3/d09/ripper_8y.html#a67754e89cb5fe173e2ba7c6bc1d82649">NEW_STR</a>(tail-&gt;nd_lit);
<a name="l08166"></a>08166             <a class="code" href="../../d5/d11/ripper_8c.html#a95704859ba0b4e6cd52503bad1e2620f">list_concat</a>(head, tail);
<a name="l08167"></a>08167         }
<a name="l08168"></a>08168         <span class="keywordflow">break</span>;
<a name="l08169"></a>08169 
<a name="l08170"></a>08170       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ad557cd9d6e3e99782e148e0ed5712826">NODE_EVSTR</a>:
<a name="l08171"></a>08171         <span class="keywordflow">if</span> (htype == NODE_STR) {
<a name="l08172"></a>08172             <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>(head, NODE_DSTR);
<a name="l08173"></a>08173             head-&gt;nd_alen = 1;
<a name="l08174"></a>08174         }
<a name="l08175"></a>08175         <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>(head, tail);
<a name="l08176"></a>08176         <span class="keywordflow">break</span>;
<a name="l08177"></a>08177     }
<a name="l08178"></a>08178     <span class="keywordflow">return</span> head;
<a name="l08179"></a>08179 }
<a name="l08180"></a>08180 
<a name="l08181"></a>08181 <span class="keyword">static</span> NODE *
<a name="l08182"></a>08182 <a class="code" href="../../d7/dc0/parse_8y.html#a7ea0dcd3c8f0ab84e739b8d9ddb7e311">evstr2dstr_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node)
<a name="l08183"></a>08183 {
<a name="l08184"></a>08184     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node) == NODE_EVSTR) {
<a name="l08185"></a>08185         node = <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a4095910e406092a35a8cbf1d1f541026">NEW_DSTR</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>), node);
<a name="l08186"></a>08186     }
<a name="l08187"></a><a class="code" href="../../d7/dc0/parse_8y.html#a8aa1e00e411642a6f52111134afc3dad">08187</a>     <span class="keywordflow">return</span> node;
<a name="l08188"></a>08188 }
<a name="l08189"></a>08189 
<a name="l08190"></a>08190 <span class="keyword">static</span> NODE *
<a name="l08191"></a>08191 <a class="code" href="../../d7/dc0/parse_8y.html#a37b22b50bc0a6849e97389cdd76eb381">new_evstr_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node)
<a name="l08192"></a>08192 {
<a name="l08193"></a>08193     NODE *head = node;
<a name="l08194"></a>08194 
<a name="l08195"></a><a class="code" href="../../d7/dc0/parse_8y.html#abf06907a8046aeb01e404e172d39941a">08195</a>     <span class="keywordflow">if</span> (node) {
<a name="l08196"></a>08196         <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node)) {
<a name="l08197"></a>08197           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aac55f53b58d8cbef84a61f2d744e7643">NODE_STR</a>: <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a6487236f9718bcfe094a657cb0efd498">NODE_DSTR</a>: <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ad557cd9d6e3e99782e148e0ed5712826">NODE_EVSTR</a>:
<a name="l08198"></a>08198             <span class="keywordflow">return</span> node;
<a name="l08199"></a>08199         }
<a name="l08200"></a>08200     }
<a name="l08201"></a>08201     <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a042696698b24c9047266cc611786cd90">NEW_EVSTR</a>(head);
<a name="l08202"></a>08202 }
<a name="l08203"></a>08203 
<a name="l08204"></a>08204 <span class="keyword">static</span> NODE *
<a name="l08205"></a>08205 <a class="code" href="../../d7/dc0/parse_8y.html#a3b631e1178ed8844e220e592842951d7">call_bin_op_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *recv, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>, NODE *arg1)
<a name="l08206"></a>08206 {
<a name="l08207"></a>08207     <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>(recv);
<a name="l08208"></a>08208     <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>(arg1);
<a name="l08209"></a>08209     <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(recv, <span class="keywordtype">id</span>, <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(arg1));
<a name="l08210"></a>08210 }
<a name="l08211"></a>08211 
<a name="l08212"></a>08212 <span class="keyword">static</span> NODE *
<a name="l08213"></a>08213 <a class="code" href="../../d7/dc0/parse_8y.html#aff1d8ff9344d18f152fd8da63230c3c0">call_uni_op_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *recv, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l08214"></a>08214 {
<a name="l08215"></a>08215     <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>(recv);
<a name="l08216"></a>08216     <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(recv, <span class="keywordtype">id</span>, 0);
<a name="l08217"></a>08217 }
<a name="l08218"></a>08218 
<a name="l08219"></a>08219 <span class="keyword">static</span> NODE*
<a name="l08220"></a>08220 <a class="code" href="../../d7/dc0/parse_8y.html#a93a652e00a5120d926bec0565bc77ade">match_op_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node1, NODE *node2)
<a name="l08221"></a>08221 {
<a name="l08222"></a>08222     <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>(node1);
<a name="l08223"></a>08223     <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>(node2);
<a name="l08224"></a>08224     <span class="keywordflow">if</span> (node1) {
<a name="l08225"></a>08225         <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node1)) {
<a name="l08226"></a>08226           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a12aabedfc8eee47d21349ce818f3e60c">NODE_DREGX</a>:
<a name="l08227"></a>08227           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a43e52cd8b79e69a358e2ff4082094d2b">NODE_DREGX_ONCE</a>:
<a name="l08228"></a><a class="code" href="../../d7/dc0/parse_8y.html#a47a214cd0b37682fba5c9b1c78d3eb17">08228</a>             <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a8de372ec6a8945166cd0fc17b46ad203">NEW_MATCH2</a>(node1, node2);
<a name="l08229"></a>08229 
<a name="l08230"></a>08230           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#af19d1c1d9f26c7b19546967449e887f6">NODE_LIT</a>:
<a name="l08231"></a>08231             <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a394faf7191f18552a20cb17ce14226f0">TYPE</a>(node1-&gt;nd_lit) == <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afd5c1e36d171ecc04514332e8dcf6388">T_REGEXP</a>) {
<a name="l08232"></a>08232                 <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a8de372ec6a8945166cd0fc17b46ad203">NEW_MATCH2</a>(node1, node2);
<a name="l08233"></a>08233             }
<a name="l08234"></a>08234         }
<a name="l08235"></a>08235     }
<a name="l08236"></a>08236 
<a name="l08237"></a>08237     <span class="keywordflow">if</span> (node2) {
<a name="l08238"></a>08238         <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node2)) {
<a name="l08239"></a>08239           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a12aabedfc8eee47d21349ce818f3e60c">NODE_DREGX</a>:
<a name="l08240"></a>08240           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a43e52cd8b79e69a358e2ff4082094d2b">NODE_DREGX_ONCE</a>:
<a name="l08241"></a>08241             <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a483186aa3ffe3585c39e40355b446f35">NEW_MATCH3</a>(node2, node1);
<a name="l08242"></a>08242 
<a name="l08243"></a>08243           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#af19d1c1d9f26c7b19546967449e887f6">NODE_LIT</a>:
<a name="l08244"></a>08244             <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a394faf7191f18552a20cb17ce14226f0">TYPE</a>(node2-&gt;nd_lit) == <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afd5c1e36d171ecc04514332e8dcf6388">T_REGEXP</a>) {
<a name="l08245"></a>08245                 <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a483186aa3ffe3585c39e40355b446f35">NEW_MATCH3</a>(node2, node1);
<a name="l08246"></a>08246             }
<a name="l08247"></a>08247         }
<a name="l08248"></a>08248     }
<a name="l08249"></a>08249 
<a name="l08250"></a>08250     <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(node1, <a class="code" href="../../d5/d11/ripper_8c.html#a6fba3b7a35b6a4abc5692d7bc6f7cc51">tMATCH</a>, <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(node2));
<a name="l08251"></a>08251 }
<a name="l08252"></a>08252 
<a name="l08253"></a>08253 <span class="keyword">static</span> NODE*
<a name="l08254"></a>08254 <a class="code" href="../../d7/dc0/parse_8y.html#ae826cbed2941c44e1e7454f97ded9680">gettable_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l08255"></a>08255 {
<a name="l08256"></a>08256     <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="../../d5/d11/ripper_8c.html#ab8442a74bd68773667e1d016e17a8f20">keyword_self</a>) {
<a name="l08257"></a>08257         <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a6d129b237fb2313e807f0be8ef5ecc72">NEW_SELF</a>();
<a name="l08258"></a>08258     }
<a name="l08259"></a>08259     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="../../d5/d11/ripper_8c.html#a97061c623fd2070a72366daa7cd8386d">keyword_nil</a>) {
<a name="l08260"></a>08260         <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a969f4dd65ae53a2ec90dbbb0420af61e">NEW_NIL</a>();
<a name="l08261"></a>08261     }
<a name="l08262"></a>08262     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="../../d5/d11/ripper_8c.html#a4db6e341df3e5d2abf5887085e9c5f77">keyword_true</a>) {
<a name="l08263"></a>08263         <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#ad74e1beb604a11b6c1ef1ec50ea9a3e9">NEW_TRUE</a>();
<a name="l08264"></a>08264     }
<a name="l08265"></a>08265     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="../../d5/d11/ripper_8c.html#acabfb39849e96211b6441b971d4ea0a7">keyword_false</a>) {
<a name="l08266"></a>08266         <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#aaf11d2a78f788ebfcc39febbb3e727ea">NEW_FALSE</a>();
<a name="l08267"></a>08267     }
<a name="l08268"></a>08268     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="../../d5/d11/ripper_8c.html#abc6d3baf1526f6522fb096804f3e6f3f">keyword__FILE__</a>) {
<a name="l08269"></a>08269         <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a67754e89cb5fe173e2ba7c6bc1d82649">NEW_STR</a>(<a class="code" href="../../d5/de3/encoding_8h.html#aeb5f105fc82d8495f29cf03e563bff6b">rb_external_str_new_with_enc</a>(<a class="code" href="../../d2/d47/compile_8c.html#aca52b28c4504720708a4fab8675dc407">ruby_sourcefile</a>, <a class="code" href="../../d6/d7b/strchr_8c.html#a219836f542ce53545052bed5353820ca">strlen</a>(<a class="code" href="../../d2/d47/compile_8c.html#aca52b28c4504720708a4fab8675dc407">ruby_sourcefile</a>),
<a name="l08270"></a>08270                                                     <a class="code" href="../../d5/db5/encoding_8c.html#af99b5328ff8c5511cbccd48fc0fe82bc">rb_filesystem_encoding</a>()));
<a name="l08271"></a>08271     }
<a name="l08272"></a>08272     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="../../d5/d11/ripper_8c.html#a647bc6d3b4755012d0a547a771983690">keyword__LINE__</a>) {
<a name="l08273"></a>08273         <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a0b35b94b9b2bf20d34efc1616be83916">NEW_LIT</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#ac55fae7f748afd3fc2533d0d7d06cf5a">INT2FIX</a>(<a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>));
<a name="l08274"></a>08274     }
<a name="l08275"></a>08275     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="../../d5/d11/ripper_8c.html#ae3a907545a96704ee7c94870da496bf0">keyword__ENCODING__</a>) {
<a name="l08276"></a>08276         <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a0b35b94b9b2bf20d34efc1616be83916">NEW_LIT</a>(<a class="code" href="../../d5/db5/encoding_8c.html#ad4918664be7424ab9f961165eecb6c18">rb_enc_from_encoding</a>(parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a>));
<a name="l08277"></a>08277     }
<a name="l08278"></a>08278     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#abe05eb6b7b2f2f735012a349f49c4c69">is_local_id</a>(<span class="keywordtype">id</span>)) {
<a name="l08279"></a>08279         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab9196c3ae4712811a17ea70e52cd9cff">dyna_in_block</a>() &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#ab529a12b82d39987d521ab232bd6a6ec">dvar_defined</a>(<span class="keywordtype">id</span>)) <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a9765952595e2f9c55b2b998ab6597678">NEW_DVAR</a>(<span class="keywordtype">id</span>);
<a name="l08280"></a>08280         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a6e7b58aa0005e28573b05e2ea1d3b3bf">local_id</a>(<span class="keywordtype">id</span>)) <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#ad06291df482a642882a6a52e01435687">NEW_LVAR</a>(<span class="keywordtype">id</span>);
<a name="l08281"></a>08281         <span class="comment">/* method call without arguments */</span>
<a name="l08282"></a>08282         <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a5273a6315c859aa0daecc3c50518c98f">NEW_VCALL</a>(<span class="keywordtype">id</span>);
<a name="l08283"></a>08283     }
<a name="l08284"></a>08284     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#aa7c989c33902ce26ac5a769ab9859ffa">is_global_id</a>(<span class="keywordtype">id</span>)) {
<a name="l08285"></a>08285         <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#acb0de9b56aa284db22328a4a53f23f32">NEW_GVAR</a>(<span class="keywordtype">id</span>);
<a name="l08286"></a>08286     }
<a name="l08287"></a>08287     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ad0e139999d70d80ad07178ebc0c15424">is_instance_id</a>(<span class="keywordtype">id</span>)) {
<a name="l08288"></a>08288         <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a59c2d27bbdf39e56b78eb76c0f65dcbe">NEW_IVAR</a>(<span class="keywordtype">id</span>);
<a name="l08289"></a>08289     }
<a name="l08290"></a>08290     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a42465fd45eabc7e20d3d7637460b9baf">is_const_id</a>(<span class="keywordtype">id</span>)) {
<a name="l08291"></a>08291         <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a09b1b31b08ea5bc8d4d09a036000dcad">NEW_CONST</a>(<span class="keywordtype">id</span>);
<a name="l08292"></a>08292     }
<a name="l08293"></a>08293     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a25c0f4eec23a7f1b2845f70c14b648b9">is_class_id</a>(<span class="keywordtype">id</span>)) {
<a name="l08294"></a>08294         <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#ae2919e37a640ffec55e59cd7a7ba08fd">NEW_CVAR</a>(<span class="keywordtype">id</span>);
<a name="l08295"></a>08295     }
<a name="l08296"></a>08296     <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;identifier %s is not valid to get&quot;</span>, <a class="code" href="../../d5/d11/ripper_8c.html#a877bc58c495643fcf49dc64c44631e72">rb_id2name</a>(<span class="keywordtype">id</span>));
<a name="l08297"></a>08297     <span class="keywordflow">return</span> 0;
<a name="l08298"></a>08298 }
<a name="l08299"></a>08299 <span class="preprocessor">#else  </span><span class="comment">/* !RIPPER */</span>
<a name="l08300"></a>08300 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l08301"></a>08301 id_is_var_gen(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l08302"></a>08302 {
<a name="l08303"></a>08303     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a5db02b120da701d1ed73fc08192a3a98">is_notop_id</a>(<span class="keywordtype">id</span>)) {
<a name="l08304"></a>08304         <span class="keywordflow">switch</span> (<span class="keywordtype">id</span> &amp; ID_SCOPE_MASK) {
<a name="l08305"></a>08305           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a213f06511d6f5719cc0a625d9aa1bd32">ID_GLOBAL</a>: <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#abec98916456cd3faf05963cf2c8d9098">ID_INSTANCE</a>: <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a4aee1d3e78b30d117f1b58269e5afd4a">ID_CONST</a>: <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a27f67f7d60c26b133a5be10363911af5">ID_CLASS</a>:
<a name="l08306"></a>08306             <span class="keywordflow">return</span> 1;
<a name="l08307"></a>08307           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ad76be6937fe27e0331cb5ff66c0d94ca">ID_LOCAL</a>:
<a name="l08308"></a>08308             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab9196c3ae4712811a17ea70e52cd9cff">dyna_in_block</a>() &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#ab529a12b82d39987d521ab232bd6a6ec">dvar_defined</a>(<span class="keywordtype">id</span>)) <span class="keywordflow">return</span> 1;
<a name="l08309"></a>08309             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a6e7b58aa0005e28573b05e2ea1d3b3bf">local_id</a>(<span class="keywordtype">id</span>)) <span class="keywordflow">return</span> 1;
<a name="l08310"></a>08310             <span class="comment">/* method call without arguments */</span>
<a name="l08311"></a>08311             <span class="keywordflow">return</span> 0;
<a name="l08312"></a>08312         }
<a name="l08313"></a>08313     }
<a name="l08314"></a>08314     <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;identifier %s is not valid to get&quot;</span>, <a class="code" href="../../d5/d11/ripper_8c.html#a877bc58c495643fcf49dc64c44631e72">rb_id2name</a>(<span class="keywordtype">id</span>));
<a name="l08315"></a>08315     <span class="keywordflow">return</span> 0;
<a name="l08316"></a>08316 }
<a name="l08317"></a>08317 <span class="preprocessor">#endif </span><span class="comment">/* !RIPPER */</span>
<a name="l08318"></a>08318 
<a name="l08319"></a>08319 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l08320"></a>08320 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l08321"></a><a class="code" href="../../d7/dc0/parse_8y.html#a1577ddd9ad59f71c121e86f4a5782622">08321</a> <a class="code" href="../../d7/dc0/parse_8y.html#a3ecc8032bfc631e1a47bd2f8b684d0fd">assignable_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> lhs)
<a name="l08322"></a>08322 <span class="preprocessor">#else</span>
<a name="l08323"></a>08323 <span class="preprocessor"></span><span class="keyword">static</span> NODE*
<a name="l08324"></a>08324 <a class="code" href="../../d7/dc0/parse_8y.html#a3ecc8032bfc631e1a47bd2f8b684d0fd">assignable_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>, NODE *val)
<a name="l08325"></a>08325 <span class="preprocessor">#endif</span>
<a name="l08326"></a>08326 <span class="preprocessor"></span>{
<a name="l08327"></a>08327 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l08328"></a>08328 <span class="preprocessor"></span>    <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span> = <a class="code" href="../../d5/d11/ripper_8c.html#addeeb969b789536e6d64fb25622be06a">get_id</a>(lhs);
<a name="l08329"></a>08329 <span class="preprocessor"># define assignable_result(x) get_value(lhs)</span>
<a name="l08330"></a>08330 <span class="preprocessor"></span><span class="preprocessor"># define parser_yyerror(parser, x) dispatch1(assign_error, lhs)</span>
<a name="l08331"></a>08331 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l08332"></a>08332 <span class="preprocessor"></span><span class="preprocessor"># define assignable_result(x) (x)</span>
<a name="l08333"></a>08333 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l08334"></a>08334 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (!<span class="keywordtype">id</span>) <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a1608d7c2f447c5af8356d1ab20a096f9">assignable_result</a>(0);
<a name="l08335"></a>08335     <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="../../d5/d11/ripper_8c.html#ab8442a74bd68773667e1d016e17a8f20">keyword_self</a>) {
<a name="l08336"></a>08336         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;Can&apos;t change the value of self&quot;</span>);
<a name="l08337"></a>08337     }
<a name="l08338"></a>08338     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="../../d5/d11/ripper_8c.html#a97061c623fd2070a72366daa7cd8386d">keyword_nil</a>) {
<a name="l08339"></a>08339         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;Can&apos;t assign to nil&quot;</span>);
<a name="l08340"></a>08340     }
<a name="l08341"></a>08341     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="../../d5/d11/ripper_8c.html#a4db6e341df3e5d2abf5887085e9c5f77">keyword_true</a>) {
<a name="l08342"></a>08342         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;Can&apos;t assign to true&quot;</span>);
<a name="l08343"></a>08343     }
<a name="l08344"></a>08344     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="../../d5/d11/ripper_8c.html#acabfb39849e96211b6441b971d4ea0a7">keyword_false</a>) {
<a name="l08345"></a>08345         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;Can&apos;t assign to false&quot;</span>);
<a name="l08346"></a>08346     }
<a name="l08347"></a>08347     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="../../d5/d11/ripper_8c.html#abc6d3baf1526f6522fb096804f3e6f3f">keyword__FILE__</a>) {
<a name="l08348"></a>08348         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;Can&apos;t assign to __FILE__&quot;</span>);
<a name="l08349"></a>08349     }
<a name="l08350"></a>08350     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="../../d5/d11/ripper_8c.html#a647bc6d3b4755012d0a547a771983690">keyword__LINE__</a>) {
<a name="l08351"></a>08351         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;Can&apos;t assign to __LINE__&quot;</span>);
<a name="l08352"></a>08352     }
<a name="l08353"></a>08353     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == <a class="code" href="../../d5/d11/ripper_8c.html#ae3a907545a96704ee7c94870da496bf0">keyword__ENCODING__</a>) {
<a name="l08354"></a>08354         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;Can&apos;t assign to __ENCODING__&quot;</span>);
<a name="l08355"></a>08355     }
<a name="l08356"></a>08356     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#abe05eb6b7b2f2f735012a349f49c4c69">is_local_id</a>(<span class="keywordtype">id</span>)) {
<a name="l08357"></a>08357         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab9196c3ae4712811a17ea70e52cd9cff">dyna_in_block</a>()) {
<a name="l08358"></a>08358             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a35f0c13829e837fb839d2b25660600ae">dvar_curr</a>(<span class="keywordtype">id</span>)) {
<a name="l08359"></a>08359                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a1608d7c2f447c5af8356d1ab20a096f9">assignable_result</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a61417c7b2923e2ca34f6ce6b3806ef91">NEW_DASGN_CURR</a>(<span class="keywordtype">id</span>, val));
<a name="l08360"></a>08360             }
<a name="l08361"></a>08361             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab529a12b82d39987d521ab232bd6a6ec">dvar_defined</a>(<span class="keywordtype">id</span>)) {
<a name="l08362"></a>08362                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a1608d7c2f447c5af8356d1ab20a096f9">assignable_result</a>(<a class="code" href="../../d3/d09/ripper_8y.html#addbcfa23baa21915f286ee36f754b61e">NEW_DASGN</a>(<span class="keywordtype">id</span>, val));
<a name="l08363"></a>08363             }
<a name="l08364"></a><a class="code" href="../../d7/dc0/parse_8y.html#afed0ba1d93197b631db7bbc854de24a8">08364</a>             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a6e7b58aa0005e28573b05e2ea1d3b3bf">local_id</a>(<span class="keywordtype">id</span>)) {
<a name="l08365"></a>08365                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a1608d7c2f447c5af8356d1ab20a096f9">assignable_result</a>(<a class="code" href="../../d3/d09/ripper_8y.html#aade5c8f9eecd06dfb046e1bf7e0a15cd">NEW_LASGN</a>(<span class="keywordtype">id</span>, val));
<a name="l08366"></a>08366             }
<a name="l08367"></a>08367             <span class="keywordflow">else</span> {
<a name="l08368"></a>08368                 <a class="code" href="../../d5/d11/ripper_8c.html#acc5f07bfb6caca6da7510625d6e6fbd8">dyna_var</a>(<span class="keywordtype">id</span>);
<a name="l08369"></a>08369                 <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a1608d7c2f447c5af8356d1ab20a096f9">assignable_result</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a61417c7b2923e2ca34f6ce6b3806ef91">NEW_DASGN_CURR</a>(<span class="keywordtype">id</span>, val));
<a name="l08370"></a>08370             }
<a name="l08371"></a>08371         }
<a name="l08372"></a>08372         <span class="keywordflow">else</span> {
<a name="l08373"></a>08373             <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#a6e7b58aa0005e28573b05e2ea1d3b3bf">local_id</a>(<span class="keywordtype">id</span>)) {
<a name="l08374"></a>08374                 <a class="code" href="../../d5/d11/ripper_8c.html#ab4d5835dd61d1aeb0e81e95055dec2b4">local_var</a>(<span class="keywordtype">id</span>);
<a name="l08375"></a>08375             }
<a name="l08376"></a>08376             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a1608d7c2f447c5af8356d1ab20a096f9">assignable_result</a>(<a class="code" href="../../d3/d09/ripper_8y.html#aade5c8f9eecd06dfb046e1bf7e0a15cd">NEW_LASGN</a>(<span class="keywordtype">id</span>, val));
<a name="l08377"></a>08377         }
<a name="l08378"></a>08378     }
<a name="l08379"></a>08379     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#aa7c989c33902ce26ac5a769ab9859ffa">is_global_id</a>(<span class="keywordtype">id</span>)) {
<a name="l08380"></a>08380         <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a1608d7c2f447c5af8356d1ab20a096f9">assignable_result</a>(<a class="code" href="../../d3/d09/ripper_8y.html#abe238f8371c0060d49b8f2cb3e6e7d6a">NEW_GASGN</a>(<span class="keywordtype">id</span>, val));
<a name="l08381"></a>08381     }
<a name="l08382"></a>08382     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ad0e139999d70d80ad07178ebc0c15424">is_instance_id</a>(<span class="keywordtype">id</span>)) {
<a name="l08383"></a>08383         <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a1608d7c2f447c5af8356d1ab20a096f9">assignable_result</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a262dcb3f319203dc2de6eb958509a2f8">NEW_IASGN</a>(<span class="keywordtype">id</span>, val));
<a name="l08384"></a>08384     }
<a name="l08385"></a>08385     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a42465fd45eabc7e20d3d7637460b9baf">is_const_id</a>(<span class="keywordtype">id</span>)) {
<a name="l08386"></a>08386         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#ab3563b12f00c4558b6e9528d1733a459">in_def</a> &amp;&amp; !<a class="code" href="../../d5/d11/ripper_8c.html#ae1504c640dc00b676c5f8573c87c00bf">in_single</a>)
<a name="l08387"></a>08387             <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a1608d7c2f447c5af8356d1ab20a096f9">assignable_result</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a9b6fdcbe7b8e7cadd9f3051de760bfb7">NEW_CDECL</a>(<span class="keywordtype">id</span>, val, 0));
<a name="l08388"></a><a class="code" href="../../d7/dc0/parse_8y.html#a8d78f62dab3d5267c076a82976814b8a">08388</a>         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;dynamic constant assignment&quot;</span>);
<a name="l08389"></a><a class="code" href="../../d7/dc0/parse_8y.html#a36b408a3839be13ba255b818d5720035">08389</a>     }
<a name="l08390"></a><a class="code" href="../../d7/dc0/parse_8y.html#a1436a59750d881d30cbd3873682868f8">08390</a>     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a25c0f4eec23a7f1b2845f70c14b648b9">is_class_id</a>(<span class="keywordtype">id</span>)) {
<a name="l08391"></a><a class="code" href="../../d7/dc0/parse_8y.html#a82590f9b63a085ac5f0583c8aaefdec2">08391</a>         <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a1608d7c2f447c5af8356d1ab20a096f9">assignable_result</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a5f7a9373fb34597f3bda7361ba9b6c3d">NEW_CVASGN</a>(<span class="keywordtype">id</span>, val));
<a name="l08392"></a><a class="code" href="../../d7/dc0/parse_8y.html#a10bfeab290b5b40f8fc39cadc6198e7e">08392</a>     }
<a name="l08393"></a><a class="code" href="../../d7/dc0/parse_8y.html#ae3c906a0b64ac7d458ee6e22b5985d7c">08393</a>     <span class="keywordflow">else</span> {
<a name="l08394"></a>08394         <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;identifier %s is not valid to set&quot;</span>, <a class="code" href="../../d5/d11/ripper_8c.html#a877bc58c495643fcf49dc64c44631e72">rb_id2name</a>(<span class="keywordtype">id</span>));
<a name="l08395"></a>08395     }
<a name="l08396"></a><a class="code" href="../../d7/dc0/parse_8y.html#a02f43f14b40f28e7084be64f9b511e32">08396</a>     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a1608d7c2f447c5af8356d1ab20a096f9">assignable_result</a>(0);
<a name="l08397"></a>08397 <span class="preprocessor">#undef assignable_result</span>
<a name="l08398"></a>08398 <span class="preprocessor"></span><span class="preprocessor">#undef parser_yyerror</span>
<a name="l08399"></a>08399 <span class="preprocessor"></span>}
<a name="l08400"></a>08400 
<a name="l08401"></a>08401 <span class="preprocessor">#define LVAR_USED ((int)1 &lt;&lt; (sizeof(int) * CHAR_BIT - 1))</span>
<a name="l08402"></a><a class="code" href="../../d7/dc0/parse_8y.html#a043e2757b60ef78bc7bea525be8df035">08402</a> <span class="preprocessor"></span>
<a name="l08403"></a>08403 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>
<a name="l08404"></a>08404 <a class="code" href="../../d7/dc0/parse_8y.html#a97eaef3a4dc59309f546e492f2de87c1">shadowing_lvar_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> name)
<a name="l08405"></a>08405 {
<a name="l08406"></a>08406     <span class="keywordflow">if</span> (idUScore == name) <span class="keywordflow">return</span> name;
<a name="l08407"></a>08407     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab9196c3ae4712811a17ea70e52cd9cff">dyna_in_block</a>()) {
<a name="l08408"></a>08408         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a35f0c13829e837fb839d2b25660600ae">dvar_curr</a>(name)) {
<a name="l08409"></a>08409             <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;duplicated argument name&quot;</span>);
<a name="l08410"></a><a class="code" href="../../d7/dc0/parse_8y.html#af006539b61f4b4c5b76969e1993e672b">08410</a>         }
<a name="l08411"></a>08411         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ace7891011c83acd673c27d6b643e0f85">dvar_defined_get</a>(name) || <a class="code" href="../../d5/d11/ripper_8c.html#a6e7b58aa0005e28573b05e2ea1d3b3bf">local_id</a>(name)) {
<a name="l08412"></a>08412             <a class="code" href="../../d5/d11/ripper_8c.html#aca369e6f278a2656e996a822270e034c">rb_warningS</a>(<span class="stringliteral">&quot;shadowing outer local variable - %s&quot;</span>, <a class="code" href="../../d5/d11/ripper_8c.html#a877bc58c495643fcf49dc64c44631e72">rb_id2name</a>(name));
<a name="l08413"></a>08413             <a class="code" href="../../d5/d11/ripper_8c.html#ab173ab53e10567e11262a24587db4192">vtable_add</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;vars, name);
<a name="l08414"></a>08414             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;used) {
<a name="l08415"></a>08415                 <a class="code" href="../../d5/d11/ripper_8c.html#ab173ab53e10567e11262a24587db4192">vtable_add</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;used, (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>)<a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a> | <a class="code" href="../../d5/d11/ripper_8c.html#a1f9bbd9b926d67608f86011f6ccfb04a">LVAR_USED</a>);
<a name="l08416"></a>08416             }
<a name="l08417"></a>08417         }
<a name="l08418"></a>08418     }
<a name="l08419"></a>08419     <span class="keywordflow">else</span> {
<a name="l08420"></a>08420         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a6e7b58aa0005e28573b05e2ea1d3b3bf">local_id</a>(name)) {
<a name="l08421"></a>08421             <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;duplicated argument name&quot;</span>);
<a name="l08422"></a>08422         }
<a name="l08423"></a>08423     }
<a name="l08424"></a>08424     <span class="keywordflow">return</span> name;
<a name="l08425"></a>08425 }
<a name="l08426"></a>08426 
<a name="l08427"></a>08427 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l08428"></a>08428 <a class="code" href="../../d7/dc0/parse_8y.html#aad4c0e6d58b287449763ba2d430a7f45">new_bv_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> name)
<a name="l08429"></a>08429 {
<a name="l08430"></a>08430     <span class="keywordflow">if</span> (!name) <span class="keywordflow">return</span>;
<a name="l08431"></a>08431     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#abe05eb6b7b2f2f735012a349f49c4c69">is_local_id</a>(name)) {
<a name="l08432"></a>08432         <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;invalid local variable - %s&quot;</span>,
<a name="l08433"></a>08433                       <a class="code" href="../../d5/d11/ripper_8c.html#a877bc58c495643fcf49dc64c44631e72">rb_id2name</a>(name));
<a name="l08434"></a>08434         <span class="keywordflow">return</span>;
<a name="l08435"></a>08435     }
<a name="l08436"></a>08436     <a class="code" href="../../d5/d11/ripper_8c.html#aed3d1812d3f35fac1d14859bcffb89f7">shadowing_lvar</a>(name);
<a name="l08437"></a>08437     <a class="code" href="../../d5/d11/ripper_8c.html#acc5f07bfb6caca6da7510625d6e6fbd8">dyna_var</a>(name);
<a name="l08438"></a>08438 }
<a name="l08439"></a>08439 
<a name="l08440"></a>08440 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l08441"></a>08441 <span class="preprocessor"></span><span class="keyword">static</span> NODE *
<a name="l08442"></a>08442 <a class="code" href="../../d7/dc0/parse_8y.html#ad422fa4d165940b01c7d581bc51387f9">aryset_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *recv, NODE *idx)
<a name="l08443"></a>08443 {
<a name="l08444"></a>08444     <span class="keywordflow">if</span> (recv &amp;&amp; <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(recv) == NODE_SELF)
<a name="l08445"></a>08445         recv = (NODE *)1;
<a name="l08446"></a>08446     <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a51519c4cbc7282355ea1a8bc9e97b2f3">NEW_ATTRASGN</a>(recv, <a class="code" href="../../d5/d11/ripper_8c.html#ad1b5f00e34caa7051eef00a36b40d232">tASET</a>, idx);
<a name="l08447"></a>08447 }
<a name="l08448"></a>08448 
<a name="l08449"></a>08449 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l08450"></a>08450 <a class="code" href="../../d7/dc0/parse_8y.html#abbe3cc7f4fa0ed344392d46899838cbe">block_dup_check_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node1, NODE *node2)
<a name="l08451"></a>08451 {
<a name="l08452"></a>08452     <span class="keywordflow">if</span> (node2 &amp;&amp; node1 &amp;&amp; <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node1) == NODE_BLOCK_PASS) {
<a name="l08453"></a>08453         <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;both block arg and actual block given&quot;</span>);
<a name="l08454"></a>08454     }
<a name="l08455"></a>08455 }
<a name="l08456"></a>08456 
<a name="l08457"></a>08457 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>
<a name="l08458"></a>08458 <a class="code" href="../../d5/d11/ripper_8c.html#acbc28d5820d674dd4447a14c23de0a42">rb_id_attrset</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l08459"></a>08459 {
<a name="l08460"></a>08460     <span class="keywordtype">id</span> &amp;= ~ID_SCOPE_MASK;
<a name="l08461"></a>08461     <span class="keywordtype">id</span> |= <a class="code" href="../../d3/d09/ripper_8y.html#a7ea3b5e7f92094ad3f27a8585e4fc1db">ID_ATTRSET</a>;
<a name="l08462"></a>08462     <span class="keywordflow">return</span> id;
<a name="l08463"></a>08463 }
<a name="l08464"></a>08464 
<a name="l08465"></a>08465 <span class="keyword">static</span> NODE *
<a name="l08466"></a>08466 <a class="code" href="../../d7/dc0/parse_8y.html#ad5028a630a8c232882afc99601ab8a2e">attrset_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *recv, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l08467"></a>08467 {
<a name="l08468"></a>08468     <span class="keywordflow">if</span> (recv &amp;&amp; <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(recv) == NODE_SELF)
<a name="l08469"></a>08469         recv = (NODE *)1;
<a name="l08470"></a>08470     <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a51519c4cbc7282355ea1a8bc9e97b2f3">NEW_ATTRASGN</a>(recv, <a class="code" href="../../d5/d11/ripper_8c.html#acbc28d5820d674dd4447a14c23de0a42">rb_id_attrset</a>(<span class="keywordtype">id</span>), 0);
<a name="l08471"></a>08471 }
<a name="l08472"></a>08472 
<a name="l08473"></a>08473 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l08474"></a>08474 <a class="code" href="../../d7/dc0/parse_8y.html#a4380699b707ae09fa5a8b48da720deaf">rb_backref_error_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node)
<a name="l08475"></a>08475 {
<a name="l08476"></a>08476     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node)) {
<a name="l08477"></a>08477       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a3ea55c01c2adc06cf9da2a42925ccf03">NODE_NTH_REF</a>:
<a name="l08478"></a>08478         <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;Can&apos;t set variable $%ld&quot;</span>, node-&gt;nd_nth);
<a name="l08479"></a>08479         <span class="keywordflow">break</span>;
<a name="l08480"></a>08480       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a276fc132dec9ae10a63bf430e66a1064">NODE_BACK_REF</a>:
<a name="l08481"></a>08481         <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;Can&apos;t set variable $%c&quot;</span>, (<span class="keywordtype">int</span>)node-&gt;nd_nth);
<a name="l08482"></a>08482         <span class="keywordflow">break</span>;
<a name="l08483"></a>08483     }
<a name="l08484"></a>08484 }
<a name="l08485"></a>08485 
<a name="l08486"></a>08486 <span class="keyword">static</span> NODE *
<a name="l08487"></a>08487 <a class="code" href="../../d7/dc0/parse_8y.html#a9d9dd7ad262a2518251912a1e31e15a9">arg_concat_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node1, NODE *node2)
<a name="l08488"></a>08488 {
<a name="l08489"></a>08489     <span class="keywordflow">if</span> (!node2) <span class="keywordflow">return</span> node1;
<a name="l08490"></a>08490     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node1)) {
<a name="l08491"></a>08491       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aac25fa5ac2c9b236539991db75bbe3b7">NODE_BLOCK_PASS</a>:
<a name="l08492"></a>08492         <span class="keywordflow">if</span> (node1-&gt;nd_head)
<a name="l08493"></a>08493             node1-&gt;nd_head = <a class="code" href="../../d5/d11/ripper_8c.html#ae6c095551246969e88aaa53d80b6ddcd">arg_concat</a>(node1-&gt;nd_head, node2);
<a name="l08494"></a>08494         <span class="keywordflow">else</span>
<a name="l08495"></a>08495             node1-&gt;nd_head = <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(node2);
<a name="l08496"></a>08496         <span class="keywordflow">return</span> node1;
<a name="l08497"></a>08497       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a15dc4d72c7b3a577d28e6131a63926d9">NODE_ARGSPUSH</a>:
<a name="l08498"></a>08498         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node2) != NODE_ARRAY) <span class="keywordflow">break</span>;
<a name="l08499"></a>08499         node1-&gt;nd_body = <a class="code" href="../../d5/d11/ripper_8c.html#a95704859ba0b4e6cd52503bad1e2620f">list_concat</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(node1-&gt;nd_body), node2);
<a name="l08500"></a>08500         <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>(node1, NODE_ARGSCAT);
<a name="l08501"></a>08501         <span class="keywordflow">return</span> node1;
<a name="l08502"></a>08502       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a796ba7c9f501e5f81b4f6f06972250fd">NODE_ARGSCAT</a>:
<a name="l08503"></a>08503         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node2) != NODE_ARRAY ||
<a name="l08504"></a>08504             <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node1-&gt;nd_body) != NODE_ARRAY) <span class="keywordflow">break</span>;
<a name="l08505"></a>08505         node1-&gt;nd_body = <a class="code" href="../../d5/d11/ripper_8c.html#a95704859ba0b4e6cd52503bad1e2620f">list_concat</a>(node1-&gt;nd_body, node2);
<a name="l08506"></a>08506         <span class="keywordflow">return</span> node1;
<a name="l08507"></a>08507     }
<a name="l08508"></a>08508     <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#ac115448deb3e894336e6d380cd9aa0f4">NEW_ARGSCAT</a>(node1, node2);
<a name="l08509"></a>08509 }
<a name="l08510"></a>08510 
<a name="l08511"></a>08511 <span class="keyword">static</span> NODE *
<a name="l08512"></a>08512 <a class="code" href="../../d7/dc0/parse_8y.html#aada179bb4d8bf3345d354d060fa9b606">arg_append_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node1, NODE *node2)
<a name="l08513"></a>08513 {
<a name="l08514"></a>08514     <span class="keywordflow">if</span> (!node1) <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(node2);
<a name="l08515"></a>08515     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node1))  {
<a name="l08516"></a>08516       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a490d1fc6f7f9e81a1815e9b1c3080d94">NODE_ARRAY</a>:
<a name="l08517"></a>08517         <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>(node1, node2);
<a name="l08518"></a>08518       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aac25fa5ac2c9b236539991db75bbe3b7">NODE_BLOCK_PASS</a>:
<a name="l08519"></a>08519         node1-&gt;nd_head = <a class="code" href="../../d5/d11/ripper_8c.html#a96fe1c847b1abdd71e89dcf3504debce">arg_append</a>(node1-&gt;nd_head, node2);
<a name="l08520"></a>08520         <span class="keywordflow">return</span> node1;
<a name="l08521"></a>08521       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a15dc4d72c7b3a577d28e6131a63926d9">NODE_ARGSPUSH</a>:
<a name="l08522"></a>08522         node1-&gt;nd_body = <a class="code" href="../../d5/d11/ripper_8c.html#a8379e7ca64f11380b1494754ed4e177e">list_append</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(node1-&gt;nd_body), node2);
<a name="l08523"></a>08523         <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>(node1, NODE_ARGSCAT);
<a name="l08524"></a>08524         <span class="keywordflow">return</span> node1;
<a name="l08525"></a>08525     }
<a name="l08526"></a>08526     <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a513e4f2f005617cf790ff57233ae20f3">NEW_ARGSPUSH</a>(node1, node2);
<a name="l08527"></a>08527 }
<a name="l08528"></a>08528 
<a name="l08529"></a>08529 <span class="keyword">static</span> NODE *
<a name="l08530"></a>08530 <a class="code" href="../../d7/dc0/parse_8y.html#ac03fbbbe2d1f40883c0ed70f9fa0b517">splat_array</a>(NODE* node)
<a name="l08531"></a>08531 {
<a name="l08532"></a>08532     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node) == NODE_SPLAT) node = node-&gt;nd_head;
<a name="l08533"></a>08533     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node) == NODE_ARRAY) <span class="keywordflow">return</span> node;
<a name="l08534"></a>08534     <span class="keywordflow">return</span> 0;
<a name="l08535"></a>08535 }
<a name="l08536"></a>08536 
<a name="l08537"></a>08537 <span class="keyword">static</span> NODE *
<a name="l08538"></a>08538 <a class="code" href="../../d7/dc0/parse_8y.html#accf676c754e598aaeb80ff965c8a237c">node_assign_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *lhs, NODE *rhs)
<a name="l08539"></a>08539 {
<a name="l08540"></a>08540     <span class="keywordflow">if</span> (!lhs) <span class="keywordflow">return</span> 0;
<a name="l08541"></a>08541 
<a name="l08542"></a>08542     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(lhs)) {
<a name="l08543"></a>08543       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#acc59e8bf53d75d27835d03ee9bbac630">NODE_GASGN</a>:
<a name="l08544"></a>08544       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a4e3d1029dca72147900e9b1a840bf968">NODE_IASGN</a>:
<a name="l08545"></a>08545       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a015923f7f402969debebc4d989678ea4">NODE_IASGN2</a>:
<a name="l08546"></a>08546       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aa9d208a2eb1e5266beea027e10f3d472">NODE_LASGN</a>:
<a name="l08547"></a>08547       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#af92abe71c6571a24b59b4eb4ebb5908f">NODE_DASGN</a>:
<a name="l08548"></a>08548       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aa69a9128d7cd7376dc4d76e65d90e994">NODE_DASGN_CURR</a>:
<a name="l08549"></a>08549       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ad03c15faf9f8ca478889f491431b406b">NODE_MASGN</a>:
<a name="l08550"></a>08550       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a62bbab89538c1de14389202f9797ab3d">NODE_CDECL</a>:
<a name="l08551"></a>08551       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ae0d7af3d0cea1ce334874826929507bf">NODE_CVASGN</a>:
<a name="l08552"></a>08552         lhs-&gt;nd_value = rhs;
<a name="l08553"></a>08553         <span class="keywordflow">break</span>;
<a name="l08554"></a>08554 
<a name="l08555"></a>08555       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a1423dff9c55fd36cca257ffb758ca4a6">NODE_ATTRASGN</a>:
<a name="l08556"></a>08556       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ae72a414c065eefb25d29b0376ee93e3d">NODE_CALL</a>:
<a name="l08557"></a>08557         lhs-&gt;nd_args = <a class="code" href="../../d5/d11/ripper_8c.html#a96fe1c847b1abdd71e89dcf3504debce">arg_append</a>(lhs-&gt;nd_args, rhs);
<a name="l08558"></a>08558         <span class="keywordflow">break</span>;
<a name="l08559"></a>08559 
<a name="l08560"></a>08560       <span class="keywordflow">default</span>:
<a name="l08561"></a>08561         <span class="comment">/* should not happen */</span>
<a name="l08562"></a>08562         <span class="keywordflow">break</span>;
<a name="l08563"></a>08563     }
<a name="l08564"></a>08564 
<a name="l08565"></a>08565     <span class="keywordflow">return</span> lhs;
<a name="l08566"></a>08566 }
<a name="l08567"></a>08567 
<a name="l08568"></a>08568 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l08569"></a>08569 <a class="code" href="../../d7/dc0/parse_8y.html#a180d8f7346d941624f1c808368cb7ae0">value_expr_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node)
<a name="l08570"></a>08570 {
<a name="l08571"></a>08571     <span class="keywordtype">int</span> <a class="code" href="../../d5/d11/ripper_8c.html#a9c9363cead2d8e8616cb63b4eea79655">cond</a> = 0;
<a name="l08572"></a>08572 
<a name="l08573"></a>08573     <span class="keywordflow">if</span> (!node) {
<a name="l08574"></a>08574         <a class="code" href="../../d5/d11/ripper_8c.html#ac3f01cfa65c2c0a61a6f83b556b892f3">rb_warning0</a>(<span class="stringliteral">&quot;empty expression&quot;</span>);
<a name="l08575"></a>08575     }
<a name="l08576"></a>08576     <span class="keywordflow">while</span> (node) {
<a name="l08577"></a>08577         <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node)) {
<a name="l08578"></a>08578           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a0ce7b90eaf281deb02709b014b182134">NODE_DEFN</a>:
<a name="l08579"></a>08579           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a1aa42b99b85e6641856c375c18999ebc">NODE_DEFS</a>:
<a name="l08580"></a>08580             <a class="code" href="../../d5/d11/ripper_8c.html#a8746752241f1e93cda7de604e74573f2">parser_warning</a>(node, <span class="stringliteral">&quot;void value expression&quot;</span>);
<a name="l08581"></a>08581             <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l08582"></a>08582 
<a name="l08583"></a>08583           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a0740a4cb8cfb60e24ac741779344739b">NODE_RETURN</a>:
<a name="l08584"></a>08584           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ac20bfa82bfa40e0dbcb4c41c2d5ee603">NODE_BREAK</a>:
<a name="l08585"></a>08585           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a419512cc7a70c27779dfb2fb3ca71a5a">NODE_NEXT</a>:
<a name="l08586"></a>08586           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a18d2e6f19f54d07ba73aa95f4eab97d3">NODE_REDO</a>:
<a name="l08587"></a>08587           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ab34acb27dadef25e21806f3c6e8e0b2e">NODE_RETRY</a>:
<a name="l08588"></a>08588             <span class="keywordflow">if</span> (!cond) <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;void value expression&quot;</span>);
<a name="l08589"></a>08589             <span class="comment">/* or &quot;control never reach&quot;? */</span>
<a name="l08590"></a>08590             <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l08591"></a>08591 
<a name="l08592"></a>08592           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ae26c9ff309f6c5d0fd5c3edd0232ee0d">NODE_BLOCK</a>:
<a name="l08593"></a>08593             <span class="keywordflow">while</span> (node-&gt;nd_next) {
<a name="l08594"></a>08594                 node = node-&gt;nd_next;
<a name="l08595"></a>08595             }
<a name="l08596"></a>08596             node = node-&gt;nd_head;
<a name="l08597"></a>08597             <span class="keywordflow">break</span>;
<a name="l08598"></a>08598 
<a name="l08599"></a>08599           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a5108b748a0833a5e734a91e4f3719510">NODE_BEGIN</a>:
<a name="l08600"></a>08600             node = node-&gt;nd_body;
<a name="l08601"></a>08601             <span class="keywordflow">break</span>;
<a name="l08602"></a>08602 
<a name="l08603"></a>08603           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ab964a29f7a8cdb1e4b518b4cb7420ea5">NODE_IF</a>:
<a name="l08604"></a>08604             <span class="keywordflow">if</span> (!node-&gt;nd_body) {
<a name="l08605"></a>08605                 node = node-&gt;nd_else;
<a name="l08606"></a>08606                 <span class="keywordflow">break</span>;
<a name="l08607"></a>08607             }
<a name="l08608"></a>08608             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!node-&gt;nd_else) {
<a name="l08609"></a>08609                 node = node-&gt;nd_body;
<a name="l08610"></a>08610                 <span class="keywordflow">break</span>;
<a name="l08611"></a>08611             }
<a name="l08612"></a>08612             <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>(node-&gt;nd_body)) <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l08613"></a>08613             node = node-&gt;nd_else;
<a name="l08614"></a>08614             <span class="keywordflow">break</span>;
<a name="l08615"></a>08615 
<a name="l08616"></a>08616           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#afce3dc60f5eb8de336e40138600ef910">NODE_AND</a>:
<a name="l08617"></a>08617           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#addcdfeefb5907f74a7b172a710c8d45e">NODE_OR</a>:
<a name="l08618"></a>08618             cond = 1;
<a name="l08619"></a>08619             node = node-&gt;nd_2nd;
<a name="l08620"></a>08620             <span class="keywordflow">break</span>;
<a name="l08621"></a>08621 
<a name="l08622"></a>08622           <span class="keywordflow">default</span>:
<a name="l08623"></a>08623             <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l08624"></a>08624         }
<a name="l08625"></a>08625     }
<a name="l08626"></a>08626 
<a name="l08627"></a>08627     <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l08628"></a>08628 }
<a name="l08629"></a>08629 
<a name="l08630"></a>08630 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l08631"></a>08631 <a class="code" href="../../d7/dc0/parse_8y.html#a038ce54673add5dd7f977891d930a1d0">void_expr_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node)
<a name="l08632"></a>08632 {
<a name="l08633"></a>08633     <span class="keyword">const</span> <span class="keywordtype">char</span> *useless = 0;
<a name="l08634"></a>08634 
<a name="l08635"></a>08635     <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a117741045763c090b26e30a85bd0e0a6">RTEST</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a56087d5316e4c73027105c023006cb15">ruby_verbose</a>)) <span class="keywordflow">return</span>;
<a name="l08636"></a>08636 
<a name="l08637"></a>08637     <span class="keywordflow">if</span> (!node) <span class="keywordflow">return</span>;
<a name="l08638"></a>08638     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node)) {
<a name="l08639"></a>08639       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ae72a414c065eefb25d29b0376ee93e3d">NODE_CALL</a>:
<a name="l08640"></a>08640         <span class="keywordflow">switch</span> (node-&gt;nd_mid) {
<a name="l08641"></a>08641           <span class="keywordflow">case</span> <span class="charliteral">&apos;+&apos;</span>:
<a name="l08642"></a>08642           <span class="keywordflow">case</span> <span class="charliteral">&apos;-&apos;</span>:
<a name="l08643"></a>08643           <span class="keywordflow">case</span> <span class="charliteral">&apos;*&apos;</span>:
<a name="l08644"></a>08644           <span class="keywordflow">case</span> <span class="charliteral">&apos;/&apos;</span>:
<a name="l08645"></a>08645           <span class="keywordflow">case</span> <span class="charliteral">&apos;%&apos;</span>:
<a name="l08646"></a>08646           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a3637bfb7d8b8ae77f0dccb4841c70673">tPOW</a>:
<a name="l08647"></a>08647           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a30c0584a6e12ebd260060a9b77159e90">tUPLUS</a>:
<a name="l08648"></a>08648           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a2990cd3acbac56afa45019a045ddcd9e">tUMINUS</a>:
<a name="l08649"></a>08649           <span class="keywordflow">case</span> <span class="charliteral">&apos;|&apos;</span>:
<a name="l08650"></a>08650           <span class="keywordflow">case</span> <span class="charliteral">&apos;^&apos;</span>:
<a name="l08651"></a>08651           <span class="keywordflow">case</span> <span class="charliteral">&apos;&amp;&apos;</span>:
<a name="l08652"></a>08652           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#af5d97f1c301f97e35c69e5e21d698c8b">tCMP</a>:
<a name="l08653"></a>08653           <span class="keywordflow">case</span> <span class="charliteral">&apos;&gt;&apos;</span>:
<a name="l08654"></a>08654           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a285fd90a21df46bc9781328e0ac5d22e">tGEQ</a>:
<a name="l08655"></a>08655           <span class="keywordflow">case</span> <span class="charliteral">&apos;&lt;&apos;</span>:
<a name="l08656"></a>08656           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a4c271a73151d715c58bf15c8607054e0">tLEQ</a>:
<a name="l08657"></a>08657           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a6ea996f3ab75bd127d6326b180214c6f">tEQ</a>:
<a name="l08658"></a>08658           <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#aa8f0fa309e4e39cda30f2116fb979320">tNEQ</a>:
<a name="l08659"></a>08659             useless = <a class="code" href="../../d5/d11/ripper_8c.html#a877bc58c495643fcf49dc64c44631e72">rb_id2name</a>(node-&gt;nd_mid);
<a name="l08660"></a>08660             <span class="keywordflow">break</span>;
<a name="l08661"></a>08661         }
<a name="l08662"></a>08662         <span class="keywordflow">break</span>;
<a name="l08663"></a>08663 
<a name="l08664"></a>08664       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aeb55bab156cfba6fcec9991e963bce3c">NODE_LVAR</a>:
<a name="l08665"></a>08665       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#af01a3b936fc2a83332b8314ef6b00697">NODE_DVAR</a>:
<a name="l08666"></a>08666       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a19a08624c33d66f2ef3cfb66af6d9d9f">NODE_GVAR</a>:
<a name="l08667"></a>08667       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a64cab035c0744c9f375bdf575e0cac2f">NODE_IVAR</a>:
<a name="l08668"></a>08668       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#accf6c145831fd42cf9d6c816498ec82b">NODE_CVAR</a>:
<a name="l08669"></a>08669       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a3ea55c01c2adc06cf9da2a42925ccf03">NODE_NTH_REF</a>:
<a name="l08670"></a>08670       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a276fc132dec9ae10a63bf430e66a1064">NODE_BACK_REF</a>:
<a name="l08671"></a>08671         useless = <span class="stringliteral">&quot;a variable&quot;</span>;
<a name="l08672"></a>08672         <span class="keywordflow">break</span>;
<a name="l08673"></a>08673       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a4162517fa8cb8e9bc4b9d9f6e8c32692">NODE_CONST</a>:
<a name="l08674"></a>08674         useless = <span class="stringliteral">&quot;a constant&quot;</span>;
<a name="l08675"></a>08675         <span class="keywordflow">break</span>;
<a name="l08676"></a>08676       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#af19d1c1d9f26c7b19546967449e887f6">NODE_LIT</a>:
<a name="l08677"></a>08677       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aac55f53b58d8cbef84a61f2d744e7643">NODE_STR</a>:
<a name="l08678"></a>08678       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a6487236f9718bcfe094a657cb0efd498">NODE_DSTR</a>:
<a name="l08679"></a>08679       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a12aabedfc8eee47d21349ce818f3e60c">NODE_DREGX</a>:
<a name="l08680"></a>08680       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a43e52cd8b79e69a358e2ff4082094d2b">NODE_DREGX_ONCE</a>:
<a name="l08681"></a>08681         useless = <span class="stringliteral">&quot;a literal&quot;</span>;
<a name="l08682"></a>08682         <span class="keywordflow">break</span>;
<a name="l08683"></a>08683       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aff107642c64833eb6f64e7043c4d2b5c">NODE_COLON2</a>:
<a name="l08684"></a>08684       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a614c6f2b1367102fbde526a5eb2871af">NODE_COLON3</a>:
<a name="l08685"></a>08685         useless = <span class="stringliteral">&quot;::&quot;</span>;
<a name="l08686"></a>08686         <span class="keywordflow">break</span>;
<a name="l08687"></a>08687       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#af08e3ddc6c11af4918239aef9490687f">NODE_DOT2</a>:
<a name="l08688"></a>08688         useless = <span class="stringliteral">&quot;..&quot;</span>;
<a name="l08689"></a>08689         <span class="keywordflow">break</span>;
<a name="l08690"></a>08690       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a9a66d4437b952e9a6bbcbcad6801fc31">NODE_DOT3</a>:
<a name="l08691"></a>08691         useless = <span class="stringliteral">&quot;...&quot;</span>;
<a name="l08692"></a>08692         <span class="keywordflow">break</span>;
<a name="l08693"></a>08693       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a4beb90d7425a19420390f5f402c7cd7b">NODE_SELF</a>:
<a name="l08694"></a>08694         useless = <span class="stringliteral">&quot;self&quot;</span>;
<a name="l08695"></a>08695         <span class="keywordflow">break</span>;
<a name="l08696"></a>08696       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a52160547548851ab924923b8ca1dcb42">NODE_NIL</a>:
<a name="l08697"></a>08697         useless = <span class="stringliteral">&quot;nil&quot;</span>;
<a name="l08698"></a>08698         <span class="keywordflow">break</span>;
<a name="l08699"></a>08699       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a00911cb328ad9df305f886837c76923c">NODE_TRUE</a>:
<a name="l08700"></a>08700         useless = <span class="stringliteral">&quot;true&quot;</span>;
<a name="l08701"></a>08701         <span class="keywordflow">break</span>;
<a name="l08702"></a>08702       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aa66ba820f9577731ad767ba777d2e633">NODE_FALSE</a>:
<a name="l08703"></a>08703         useless = <span class="stringliteral">&quot;false&quot;</span>;
<a name="l08704"></a>08704         <span class="keywordflow">break</span>;
<a name="l08705"></a>08705       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a9a02a48d7532185f602ab2eee4e7b79a">NODE_DEFINED</a>:
<a name="l08706"></a>08706         useless = <span class="stringliteral">&quot;defined?&quot;</span>;
<a name="l08707"></a>08707         <span class="keywordflow">break</span>;
<a name="l08708"></a>08708     }
<a name="l08709"></a>08709 
<a name="l08710"></a>08710     <span class="keywordflow">if</span> (useless) {
<a name="l08711"></a>08711         <span class="keywordtype">int</span> line = <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>;
<a name="l08712"></a>08712 
<a name="l08713"></a>08713         <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a> = <a class="code" href="../../d3/d09/ripper_8y.html#a532b1472e32368b65ce9351c1abc2c02">nd_line</a>(node);
<a name="l08714"></a>08714         <a class="code" href="../../d5/d11/ripper_8c.html#a67e79dae06f8419a42a082e37c0b2901">rb_warnS</a>(<span class="stringliteral">&quot;possibly useless use of %s in void context&quot;</span>, useless);
<a name="l08715"></a>08715         <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a> = line;
<a name="l08716"></a>08716     }
<a name="l08717"></a>08717 }
<a name="l08718"></a>08718 
<a name="l08719"></a>08719 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l08720"></a>08720 <a class="code" href="../../d7/dc0/parse_8y.html#ae6c0cdb599962f345014a454d1465af0">void_stmts_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node)
<a name="l08721"></a>08721 {
<a name="l08722"></a>08722     <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a117741045763c090b26e30a85bd0e0a6">RTEST</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a56087d5316e4c73027105c023006cb15">ruby_verbose</a>)) <span class="keywordflow">return</span>;
<a name="l08723"></a>08723     <span class="keywordflow">if</span> (!node) <span class="keywordflow">return</span>;
<a name="l08724"></a>08724     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node) != NODE_BLOCK) <span class="keywordflow">return</span>;
<a name="l08725"></a>08725 
<a name="l08726"></a>08726     <span class="keywordflow">for</span> (;;) {
<a name="l08727"></a>08727         <span class="keywordflow">if</span> (!node-&gt;nd_next) <span class="keywordflow">return</span>;
<a name="l08728"></a>08728         <a class="code" href="../../d5/d11/ripper_8c.html#a107820121b3ffaaa6a970f54df7aa21f">void_expr0</a>(node-&gt;nd_head);
<a name="l08729"></a>08729         node = node-&gt;nd_next;
<a name="l08730"></a>08730     }
<a name="l08731"></a>08731 }
<a name="l08732"></a>08732 
<a name="l08733"></a>08733 <span class="keyword">static</span> NODE *
<a name="l08734"></a>08734 <a class="code" href="../../d7/dc0/parse_8y.html#af6073dd45c01beeb98d4a07c13a581f8">remove_begin</a>(NODE *node)
<a name="l08735"></a>08735 {
<a name="l08736"></a>08736     NODE **n = &amp;node, *n1 = node;
<a name="l08737"></a>08737     <span class="keywordflow">while</span> (n1 &amp;&amp; <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(n1) == NODE_BEGIN &amp;&amp; n1-&gt;nd_body) {
<a name="l08738"></a>08738         *n = n1 = n1-&gt;nd_body;
<a name="l08739"></a>08739     }
<a name="l08740"></a>08740     <span class="keywordflow">return</span> node;
<a name="l08741"></a>08741 }
<a name="l08742"></a>08742 
<a name="l08743"></a>08743 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l08744"></a>08744 <a class="code" href="../../d7/dc0/parse_8y.html#a50e6c67775b82211332ccb455ea74f11">reduce_nodes_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE **body)
<a name="l08745"></a>08745 {
<a name="l08746"></a>08746     NODE *node = *body;
<a name="l08747"></a>08747 
<a name="l08748"></a>08748     <span class="keywordflow">if</span> (!node) {
<a name="l08749"></a>08749         *body = <a class="code" href="../../d3/d09/ripper_8y.html#a969f4dd65ae53a2ec90dbbb0420af61e">NEW_NIL</a>();
<a name="l08750"></a>08750         <span class="keywordflow">return</span>;
<a name="l08751"></a>08751     }
<a name="l08752"></a>08752 <span class="preprocessor">#define subnodes(n1, n2) \</span>
<a name="l08753"></a>08753 <span class="preprocessor">    ((!node-&gt;n1) ? (node-&gt;n2 ? (body = &amp;node-&gt;n2, 1) : 0) : \</span>
<a name="l08754"></a>08754 <span class="preprocessor">     (!node-&gt;n2) ? (body = &amp;node-&gt;n1, 1) : \</span>
<a name="l08755"></a>08755 <span class="preprocessor">     (reduce_nodes(&amp;node-&gt;n1), body = &amp;node-&gt;n2, 1))</span>
<a name="l08756"></a>08756 <span class="preprocessor"></span>
<a name="l08757"></a>08757     <span class="keywordflow">while</span> (node) {
<a name="l08758"></a>08758         <span class="keywordtype">int</span> newline = (int)(node-&gt;flags &amp; NODE_FL_NEWLINE);
<a name="l08759"></a>08759         <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node)) {
<a name="l08760"></a>08760           end:
<a name="l08761"></a>08761           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a52160547548851ab924923b8ca1dcb42">NODE_NIL</a>:
<a name="l08762"></a>08762             *body = 0;
<a name="l08763"></a>08763             <span class="keywordflow">return</span>;
<a name="l08764"></a>08764           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a0740a4cb8cfb60e24ac741779344739b">NODE_RETURN</a>:
<a name="l08765"></a>08765             *body = node = node-&gt;nd_stts;
<a name="l08766"></a>08766             <span class="keywordflow">if</span> (newline &amp;&amp; node) node-&gt;flags |= <a class="code" href="../../d3/d09/ripper_8y.html#aca499ed79c89ddea66b38e191e5aa2e3">NODE_FL_NEWLINE</a>;
<a name="l08767"></a>08767             <span class="keywordflow">continue</span>;
<a name="l08768"></a>08768           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a5108b748a0833a5e734a91e4f3719510">NODE_BEGIN</a>:
<a name="l08769"></a>08769             *body = node = node-&gt;nd_body;
<a name="l08770"></a>08770             <span class="keywordflow">if</span> (newline &amp;&amp; node) node-&gt;flags |= <a class="code" href="../../d3/d09/ripper_8y.html#aca499ed79c89ddea66b38e191e5aa2e3">NODE_FL_NEWLINE</a>;
<a name="l08771"></a>08771             <span class="keywordflow">continue</span>;
<a name="l08772"></a>08772           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ae26c9ff309f6c5d0fd5c3edd0232ee0d">NODE_BLOCK</a>:
<a name="l08773"></a>08773             body = &amp;node-&gt;nd_end-&gt;nd_head;
<a name="l08774"></a>08774             <span class="keywordflow">break</span>;
<a name="l08775"></a>08775           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ab964a29f7a8cdb1e4b518b4cb7420ea5">NODE_IF</a>:
<a name="l08776"></a>08776             <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#aad50fbaf519744d86469c6b2f6824503">subnodes</a>(nd_body, nd_else)) <span class="keywordflow">break</span>;
<a name="l08777"></a>08777             <span class="keywordflow">return</span>;
<a name="l08778"></a>08778           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a73d8430547c57f3a7c0734b1a598ff8e">NODE_CASE</a>:
<a name="l08779"></a>08779             body = &amp;node-&gt;nd_body;
<a name="l08780"></a>08780             <span class="keywordflow">break</span>;
<a name="l08781"></a>08781           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#abe133b4015b1ff19345d5d25781fc25e">NODE_WHEN</a>:
<a name="l08782"></a>08782             <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#aad50fbaf519744d86469c6b2f6824503">subnodes</a>(nd_body, nd_next)) <span class="keywordflow">goto</span> end;
<a name="l08783"></a>08783             <span class="keywordflow">break</span>;
<a name="l08784"></a>08784           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#abd2d897cf3ea6a0b59b4cafb72d99b4c">NODE_ENSURE</a>:
<a name="l08785"></a>08785             <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#aad50fbaf519744d86469c6b2f6824503">subnodes</a>(nd_head, nd_resq)) <span class="keywordflow">goto</span> end;
<a name="l08786"></a>08786             <span class="keywordflow">break</span>;
<a name="l08787"></a>08787           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a2e2ee74ca4f1fe85350a59ae648d6310">NODE_RESCUE</a>:
<a name="l08788"></a>08788             <span class="keywordflow">if</span> (node-&gt;nd_else) {
<a name="l08789"></a>08789                 body = &amp;node-&gt;nd_resq;
<a name="l08790"></a>08790                 <span class="keywordflow">break</span>;
<a name="l08791"></a>08791             }
<a name="l08792"></a>08792             <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#aad50fbaf519744d86469c6b2f6824503">subnodes</a>(nd_head, nd_resq)) <span class="keywordflow">goto</span> end;
<a name="l08793"></a>08793             <span class="keywordflow">break</span>;
<a name="l08794"></a>08794           <span class="keywordflow">default</span>:
<a name="l08795"></a>08795             <span class="keywordflow">return</span>;
<a name="l08796"></a>08796         }
<a name="l08797"></a>08797         node = *body;
<a name="l08798"></a>08798         <span class="keywordflow">if</span> (newline &amp;&amp; node) node-&gt;flags |= <a class="code" href="../../d3/d09/ripper_8y.html#aca499ed79c89ddea66b38e191e5aa2e3">NODE_FL_NEWLINE</a>;
<a name="l08799"></a>08799     }
<a name="l08800"></a>08800 
<a name="l08801"></a>08801 <span class="preprocessor">#undef subnodes</span>
<a name="l08802"></a>08802 <span class="preprocessor"></span>}
<a name="l08803"></a>08803 
<a name="l08804"></a>08804 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l08805"></a>08805 <a class="code" href="../../d7/dc0/parse_8y.html#a02bf3912e8e63e37a6c78ab3b6edc101">assign_in_cond</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node)
<a name="l08806"></a>08806 {
<a name="l08807"></a>08807     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node)) {
<a name="l08808"></a>08808       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ad03c15faf9f8ca478889f491431b406b">NODE_MASGN</a>:
<a name="l08809"></a>08809         <a class="code" href="../../d5/d11/ripper_8c.html#a315893cd82bc2cc5165cd6072b4cb9fe">yyerror</a>(<span class="stringliteral">&quot;multiple assignment in conditional&quot;</span>);
<a name="l08810"></a>08810         <span class="keywordflow">return</span> 1;
<a name="l08811"></a>08811 
<a name="l08812"></a>08812       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aa9d208a2eb1e5266beea027e10f3d472">NODE_LASGN</a>:
<a name="l08813"></a>08813       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#af92abe71c6571a24b59b4eb4ebb5908f">NODE_DASGN</a>:
<a name="l08814"></a>08814       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aa69a9128d7cd7376dc4d76e65d90e994">NODE_DASGN_CURR</a>:
<a name="l08815"></a>08815       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#acc59e8bf53d75d27835d03ee9bbac630">NODE_GASGN</a>:
<a name="l08816"></a>08816       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a4e3d1029dca72147900e9b1a840bf968">NODE_IASGN</a>:
<a name="l08817"></a>08817         <span class="keywordflow">break</span>;
<a name="l08818"></a>08818 
<a name="l08819"></a>08819       <span class="keywordflow">default</span>:
<a name="l08820"></a>08820         <span class="keywordflow">return</span> 0;
<a name="l08821"></a>08821     }
<a name="l08822"></a>08822 
<a name="l08823"></a>08823     <span class="keywordflow">if</span> (!node-&gt;nd_value) <span class="keywordflow">return</span> 1;
<a name="l08824"></a>08824     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node-&gt;nd_value)) {
<a name="l08825"></a>08825       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#af19d1c1d9f26c7b19546967449e887f6">NODE_LIT</a>:
<a name="l08826"></a>08826       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aac55f53b58d8cbef84a61f2d744e7643">NODE_STR</a>:
<a name="l08827"></a>08827       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a52160547548851ab924923b8ca1dcb42">NODE_NIL</a>:
<a name="l08828"></a>08828       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a00911cb328ad9df305f886837c76923c">NODE_TRUE</a>:
<a name="l08829"></a>08829       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aa66ba820f9577731ad767ba777d2e633">NODE_FALSE</a>:
<a name="l08830"></a>08830         <span class="comment">/* reports always */</span>
<a name="l08831"></a>08831         <a class="code" href="../../d5/d11/ripper_8c.html#a84b75c05dad2b44ac64ce29c35187e07">parser_warn</a>(node-&gt;nd_value, <span class="stringliteral">&quot;found = in conditional, should be ==&quot;</span>);
<a name="l08832"></a>08832         <span class="keywordflow">return</span> 1;
<a name="l08833"></a>08833 
<a name="l08834"></a>08834       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a6487236f9718bcfe094a657cb0efd498">NODE_DSTR</a>:
<a name="l08835"></a>08835       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a4850c3a60b6471d48bbb7b574cc3c3ca">NODE_XSTR</a>:
<a name="l08836"></a>08836       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ac175ada0354ab81202c744d1db266a85">NODE_DXSTR</a>:
<a name="l08837"></a>08837       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ad557cd9d6e3e99782e148e0ed5712826">NODE_EVSTR</a>:
<a name="l08838"></a>08838       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a12aabedfc8eee47d21349ce818f3e60c">NODE_DREGX</a>:
<a name="l08839"></a>08839       <span class="keywordflow">default</span>:
<a name="l08840"></a>08840         <span class="keywordflow">break</span>;
<a name="l08841"></a>08841     }
<a name="l08842"></a>08842     <span class="keywordflow">return</span> 1;
<a name="l08843"></a>08843 }
<a name="l08844"></a>08844 
<a name="l08845"></a>08845 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l08846"></a>08846 <a class="code" href="../../d7/dc0/parse_8y.html#ac1292d5338dbd82db26c883f45326560">warn_unless_e_option</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node, <span class="keyword">const</span> <span class="keywordtype">char</span> *str)
<a name="l08847"></a>08847 {
<a name="l08848"></a>08848     <span class="keywordflow">if</span> (!<a class="code" href="../../d7/dc0/parse_8y.html#aa2d9d34b302b849f923743d4b4be53dc">e_option_supplied</a>(parser)) <a class="code" href="../../d5/d11/ripper_8c.html#a84b75c05dad2b44ac64ce29c35187e07">parser_warn</a>(node, str);
<a name="l08849"></a>08849 }
<a name="l08850"></a>08850 
<a name="l08851"></a>08851 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l08852"></a>08852 <a class="code" href="../../d7/dc0/parse_8y.html#a8e8b5c2555ec361a424b9a7b554bbeb0">warning_unless_e_option</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node, <span class="keyword">const</span> <span class="keywordtype">char</span> *str)
<a name="l08853"></a>08853 {
<a name="l08854"></a>08854     <span class="keywordflow">if</span> (!<a class="code" href="../../d7/dc0/parse_8y.html#aa2d9d34b302b849f923743d4b4be53dc">e_option_supplied</a>(parser)) <a class="code" href="../../d5/d11/ripper_8c.html#a8746752241f1e93cda7de604e74573f2">parser_warning</a>(node, str);
<a name="l08855"></a>08855 }
<a name="l08856"></a>08856 
<a name="l08857"></a>08857 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l08858"></a>08858 <a class="code" href="../../d7/dc0/parse_8y.html#ada4f67a980f0f983b65e40843f2cc7ed">fixup_nodes</a>(NODE **rootnode)
<a name="l08859"></a>08859 {
<a name="l08860"></a>08860     NODE *node, *next, *head;
<a name="l08861"></a>08861 
<a name="l08862"></a>08862     <span class="keywordflow">for</span> (node = *rootnode; node; node = next) {
<a name="l08863"></a>08863         <span class="keyword">enum</span> <a class="code" href="../../d1/d72/debug_8c.html#a3dae8bc7c708705be3a6e1688378868e">node_type</a> <a class="code" href="../../d5/d9d/tcltklib_8c.html#ac765329451135abec74c45e1897abf26">type</a>;
<a name="l08864"></a>08864         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> val;
<a name="l08865"></a>08865 
<a name="l08866"></a>08866         next = node-&gt;nd_next;
<a name="l08867"></a>08867         head = node-&gt;nd_head;
<a name="l08868"></a>08868         <a class="code" href="../../d8/d16/gc_8c.html#a53016811c87ff4c3ea839c9e85a9a9a4">rb_gc_force_recycle</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)node);
<a name="l08869"></a>08869         *rootnode = next;
<a name="l08870"></a>08870         <span class="keywordflow">switch</span> (type = <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(head)) {
<a name="l08871"></a>08871           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#af08e3ddc6c11af4918239aef9490687f">NODE_DOT2</a>:
<a name="l08872"></a>08872           <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a9a66d4437b952e9a6bbcbcad6801fc31">NODE_DOT3</a>:
<a name="l08873"></a>08873             val = <a class="code" href="../../db/d2e/intern_8h.html#ad45dbbd104cca8099a226319748a6f47">rb_range_new</a>(head-&gt;nd_beg-&gt;nd_lit, head-&gt;nd_end-&gt;nd_lit,
<a name="l08874"></a>08874                                type == NODE_DOT3);
<a name="l08875"></a>08875             <a class="code" href="../../d8/d16/gc_8c.html#a53016811c87ff4c3ea839c9e85a9a9a4">rb_gc_force_recycle</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)head-&gt;nd_beg);
<a name="l08876"></a>08876             <a class="code" href="../../d8/d16/gc_8c.html#a53016811c87ff4c3ea839c9e85a9a9a4">rb_gc_force_recycle</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)head-&gt;nd_end);
<a name="l08877"></a>08877             <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>(head, NODE_LIT);
<a name="l08878"></a>08878             head-&gt;nd_lit = val;
<a name="l08879"></a>08879             <span class="keywordflow">break</span>;
<a name="l08880"></a>08880           <span class="keywordflow">default</span>:
<a name="l08881"></a>08881             <span class="keywordflow">break</span>;
<a name="l08882"></a>08882         }
<a name="l08883"></a>08883     }
<a name="l08884"></a>08884 }
<a name="l08885"></a>08885 
<a name="l08886"></a>08886 <span class="keyword">static</span> NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a05b7a564ea54a633fc4443caa347f8ae">cond0</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*,NODE*);
<a name="l08887"></a>08887 
<a name="l08888"></a>08888 <span class="keyword">static</span> NODE*
<a name="l08889"></a>08889 <a class="code" href="../../d7/dc0/parse_8y.html#a7c3a1c2399a768079735435dbbb3b5f4">range_op</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node)
<a name="l08890"></a>08890 {
<a name="l08891"></a>08891     <span class="keyword">enum</span> <a class="code" href="../../d1/d72/debug_8c.html#a3dae8bc7c708705be3a6e1688378868e">node_type</a> type;
<a name="l08892"></a>08892 
<a name="l08893"></a>08893     <span class="keywordflow">if</span> (node == 0) <span class="keywordflow">return</span> 0;
<a name="l08894"></a>08894 
<a name="l08895"></a>08895     type = <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node);
<a name="l08896"></a>08896     <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>(node);
<a name="l08897"></a>08897     <span class="keywordflow">if</span> (type == NODE_LIT &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#acf2fcf97dcf9c7c35452730eb3e2aeb2">FIXNUM_P</a>(node-&gt;nd_lit)) {
<a name="l08898"></a>08898         <a class="code" href="../../d7/dc0/parse_8y.html#ac1292d5338dbd82db26c883f45326560">warn_unless_e_option</a>(parser, node, <span class="stringliteral">&quot;integer literal in conditional range&quot;</span>);
<a name="l08899"></a>08899         <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(node, <a class="code" href="../../d5/d11/ripper_8c.html#a6ea996f3ab75bd127d6326b180214c6f">tEQ</a>, <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(<a class="code" href="../../d3/d09/ripper_8y.html#acb0de9b56aa284db22328a4a53f23f32">NEW_GVAR</a>(<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;$.&quot;</span>))));
<a name="l08900"></a>08900     }
<a name="l08901"></a>08901     <span class="keywordflow">return</span> <a class="code" href="../../d7/dc0/parse_8y.html#a05b7a564ea54a633fc4443caa347f8ae">cond0</a>(parser, node);
<a name="l08902"></a>08902 }
<a name="l08903"></a>08903 
<a name="l08904"></a>08904 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l08905"></a>08905 <a class="code" href="../../d7/dc0/parse_8y.html#ae6db0a4cec7b2468240cb59958248655">literal_node</a>(NODE *node)
<a name="l08906"></a>08906 {
<a name="l08907"></a>08907     <span class="keywordflow">if</span> (!node) <span class="keywordflow">return</span> 1;        <span class="comment">/* same as NODE_NIL */</span>
<a name="l08908"></a>08908     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node)) {
<a name="l08909"></a>08909       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#af19d1c1d9f26c7b19546967449e887f6">NODE_LIT</a>:
<a name="l08910"></a>08910       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aac55f53b58d8cbef84a61f2d744e7643">NODE_STR</a>:
<a name="l08911"></a>08911       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a6487236f9718bcfe094a657cb0efd498">NODE_DSTR</a>:
<a name="l08912"></a>08912       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ad557cd9d6e3e99782e148e0ed5712826">NODE_EVSTR</a>:
<a name="l08913"></a>08913       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a12aabedfc8eee47d21349ce818f3e60c">NODE_DREGX</a>:
<a name="l08914"></a>08914       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a43e52cd8b79e69a358e2ff4082094d2b">NODE_DREGX_ONCE</a>:
<a name="l08915"></a>08915       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ab102222ffbe5118d93d37b103876fc44">NODE_DSYM</a>:
<a name="l08916"></a>08916         <span class="keywordflow">return</span> 2;
<a name="l08917"></a>08917       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a00911cb328ad9df305f886837c76923c">NODE_TRUE</a>:
<a name="l08918"></a>08918       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aa66ba820f9577731ad767ba777d2e633">NODE_FALSE</a>:
<a name="l08919"></a>08919       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a52160547548851ab924923b8ca1dcb42">NODE_NIL</a>:
<a name="l08920"></a>08920         <span class="keywordflow">return</span> 1;
<a name="l08921"></a>08921     }
<a name="l08922"></a>08922     <span class="keywordflow">return</span> 0;
<a name="l08923"></a>08923 }
<a name="l08924"></a>08924 
<a name="l08925"></a>08925 <span class="keyword">static</span> NODE*
<a name="l08926"></a>08926 <a class="code" href="../../d7/dc0/parse_8y.html#a05b7a564ea54a633fc4443caa347f8ae">cond0</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node)
<a name="l08927"></a>08927 {
<a name="l08928"></a>08928     <span class="keywordflow">if</span> (node == 0) <span class="keywordflow">return</span> 0;
<a name="l08929"></a>08929     <a class="code" href="../../d7/dc0/parse_8y.html#a02bf3912e8e63e37a6c78ab3b6edc101">assign_in_cond</a>(parser, node);
<a name="l08930"></a>08930 
<a name="l08931"></a>08931     <span class="keywordflow">switch</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node)) {
<a name="l08932"></a>08932       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a6487236f9718bcfe094a657cb0efd498">NODE_DSTR</a>:
<a name="l08933"></a>08933       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ad557cd9d6e3e99782e148e0ed5712826">NODE_EVSTR</a>:
<a name="l08934"></a>08934       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#aac55f53b58d8cbef84a61f2d744e7643">NODE_STR</a>:
<a name="l08935"></a>08935         <a class="code" href="../../d5/d11/ripper_8c.html#aaec2ebc8880fc8c66c0d07ad3b0edb44">rb_warn0</a>(<span class="stringliteral">&quot;string literal in condition&quot;</span>);
<a name="l08936"></a>08936         <span class="keywordflow">break</span>;
<a name="l08937"></a>08937 
<a name="l08938"></a>08938       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a12aabedfc8eee47d21349ce818f3e60c">NODE_DREGX</a>:
<a name="l08939"></a>08939       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a43e52cd8b79e69a358e2ff4082094d2b">NODE_DREGX_ONCE</a>:
<a name="l08940"></a>08940         <a class="code" href="../../d7/dc0/parse_8y.html#a8e8b5c2555ec361a424b9a7b554bbeb0">warning_unless_e_option</a>(parser, node, <span class="stringliteral">&quot;regex literal in condition&quot;</span>);
<a name="l08941"></a>08941         <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a8de372ec6a8945166cd0fc17b46ad203">NEW_MATCH2</a>(node, <a class="code" href="../../d3/d09/ripper_8y.html#acb0de9b56aa284db22328a4a53f23f32">NEW_GVAR</a>(<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;$_&quot;</span>)));
<a name="l08942"></a>08942 
<a name="l08943"></a>08943       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#afce3dc60f5eb8de336e40138600ef910">NODE_AND</a>:
<a name="l08944"></a>08944       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#addcdfeefb5907f74a7b172a710c8d45e">NODE_OR</a>:
<a name="l08945"></a>08945         node-&gt;nd_1st = <a class="code" href="../../d7/dc0/parse_8y.html#a05b7a564ea54a633fc4443caa347f8ae">cond0</a>(parser, node-&gt;nd_1st);
<a name="l08946"></a>08946         node-&gt;nd_2nd = <a class="code" href="../../d7/dc0/parse_8y.html#a05b7a564ea54a633fc4443caa347f8ae">cond0</a>(parser, node-&gt;nd_2nd);
<a name="l08947"></a>08947         <span class="keywordflow">break</span>;
<a name="l08948"></a>08948 
<a name="l08949"></a>08949       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#af08e3ddc6c11af4918239aef9490687f">NODE_DOT2</a>:
<a name="l08950"></a>08950       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#a9a66d4437b952e9a6bbcbcad6801fc31">NODE_DOT3</a>:
<a name="l08951"></a>08951         node-&gt;nd_beg = <a class="code" href="../../d7/dc0/parse_8y.html#a7c3a1c2399a768079735435dbbb3b5f4">range_op</a>(parser, node-&gt;nd_beg);
<a name="l08952"></a>08952         node-&gt;nd_end = <a class="code" href="../../d7/dc0/parse_8y.html#a7c3a1c2399a768079735435dbbb3b5f4">range_op</a>(parser, node-&gt;nd_end);
<a name="l08953"></a>08953         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node) == NODE_DOT2) <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>(node,NODE_FLIP2);
<a name="l08954"></a>08954         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node) == NODE_DOT3) <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>(node, NODE_FLIP3);
<a name="l08955"></a>08955         <span class="keywordflow">if</span> (!<a class="code" href="../../d7/dc0/parse_8y.html#aa2d9d34b302b849f923743d4b4be53dc">e_option_supplied</a>(parser)) {
<a name="l08956"></a>08956             <span class="keywordtype">int</span> b = <a class="code" href="../../d7/dc0/parse_8y.html#ae6db0a4cec7b2468240cb59958248655">literal_node</a>(node-&gt;nd_beg);
<a name="l08957"></a>08957             <span class="keywordtype">int</span> e = <a class="code" href="../../d7/dc0/parse_8y.html#ae6db0a4cec7b2468240cb59958248655">literal_node</a>(node-&gt;nd_end);
<a name="l08958"></a>08958             <span class="keywordflow">if</span> ((b == 1 &amp;&amp; e == 1) || (b + e &gt;= 2 &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a117741045763c090b26e30a85bd0e0a6">RTEST</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a56087d5316e4c73027105c023006cb15">ruby_verbose</a>))) {
<a name="l08959"></a>08959                 <a class="code" href="../../d5/d11/ripper_8c.html#a84b75c05dad2b44ac64ce29c35187e07">parser_warn</a>(node, <span class="stringliteral">&quot;range literal in condition&quot;</span>);
<a name="l08960"></a>08960             }
<a name="l08961"></a>08961         }
<a name="l08962"></a>08962         <span class="keywordflow">break</span>;
<a name="l08963"></a>08963 
<a name="l08964"></a>08964       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#ab102222ffbe5118d93d37b103876fc44">NODE_DSYM</a>:
<a name="l08965"></a>08965         <a class="code" href="../../d5/d11/ripper_8c.html#a8746752241f1e93cda7de604e74573f2">parser_warning</a>(node, <span class="stringliteral">&quot;literal in condition&quot;</span>);
<a name="l08966"></a>08966         <span class="keywordflow">break</span>;
<a name="l08967"></a>08967 
<a name="l08968"></a>08968       <span class="keywordflow">case</span> <a class="code" href="../../d3/d09/ripper_8y.html#af19d1c1d9f26c7b19546967449e887f6">NODE_LIT</a>:
<a name="l08969"></a>08969         <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a394faf7191f18552a20cb17ce14226f0">TYPE</a>(node-&gt;nd_lit) == <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afd5c1e36d171ecc04514332e8dcf6388">T_REGEXP</a>) {
<a name="l08970"></a>08970             <a class="code" href="../../d7/dc0/parse_8y.html#ac1292d5338dbd82db26c883f45326560">warn_unless_e_option</a>(parser, node, <span class="stringliteral">&quot;regex literal in condition&quot;</span>);
<a name="l08971"></a>08971             <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>(node, NODE_MATCH);
<a name="l08972"></a>08972         }
<a name="l08973"></a>08973         <span class="keywordflow">else</span> {
<a name="l08974"></a>08974             <a class="code" href="../../d5/d11/ripper_8c.html#a8746752241f1e93cda7de604e74573f2">parser_warning</a>(node, <span class="stringliteral">&quot;literal in condition&quot;</span>);
<a name="l08975"></a>08975         }
<a name="l08976"></a>08976       <span class="keywordflow">default</span>:
<a name="l08977"></a>08977         <span class="keywordflow">break</span>;
<a name="l08978"></a>08978     }
<a name="l08979"></a>08979     <span class="keywordflow">return</span> node;
<a name="l08980"></a>08980 }
<a name="l08981"></a>08981 
<a name="l08982"></a>08982 <span class="keyword">static</span> NODE*
<a name="l08983"></a>08983 <a class="code" href="../../d7/dc0/parse_8y.html#a92915296d7f7b01b855bb1720fa57eb8">cond_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node)
<a name="l08984"></a>08984 {
<a name="l08985"></a>08985     <span class="keywordflow">if</span> (node == 0) <span class="keywordflow">return</span> 0;
<a name="l08986"></a>08986     <span class="keywordflow">return</span> <a class="code" href="../../d7/dc0/parse_8y.html#a05b7a564ea54a633fc4443caa347f8ae">cond0</a>(parser, node);
<a name="l08987"></a>08987 }
<a name="l08988"></a>08988 
<a name="l08989"></a>08989 <span class="keyword">static</span> NODE*
<a name="l08990"></a>08990 <a class="code" href="../../d7/dc0/parse_8y.html#a847a3fb910f00edbd237aa423f94bdb9">logop_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">enum</span> <a class="code" href="../../d1/d72/debug_8c.html#a3dae8bc7c708705be3a6e1688378868e">node_type</a> type, NODE *left, NODE *right)
<a name="l08991"></a>08991 {
<a name="l08992"></a>08992     <a class="code" href="../../d5/d11/ripper_8c.html#a8dbae02a2b009f8064176f8f899dcbcf">value_expr</a>(left);
<a name="l08993"></a>08993     <span class="keywordflow">if</span> (left &amp;&amp; (<span class="keyword">enum</span> <a class="code" href="../../d1/d72/debug_8c.html#a3dae8bc7c708705be3a6e1688378868e">node_type</a>)<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(left) == type) {
<a name="l08994"></a>08994         NODE *node = left, *second;
<a name="l08995"></a>08995         <span class="keywordflow">while</span> ((second = node-&gt;nd_2nd) != 0 &amp;&amp; (<span class="keyword">enum</span> <a class="code" href="../../d1/d72/debug_8c.html#a3dae8bc7c708705be3a6e1688378868e">node_type</a>)<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(second) == type) {
<a name="l08996"></a>08996             node = second;
<a name="l08997"></a>08997         }
<a name="l08998"></a>08998         node-&gt;nd_2nd = <a class="code" href="../../d3/d09/ripper_8y.html#a6fafbd1d8ed31805fc7574ae1f6c87c7">NEW_NODE</a>(type, second, right, 0);
<a name="l08999"></a>08999         <span class="keywordflow">return</span> left;
<a name="l09000"></a>09000     }
<a name="l09001"></a>09001     <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a6fafbd1d8ed31805fc7574ae1f6c87c7">NEW_NODE</a>(type, left, right, 0);
<a name="l09002"></a>09002 }
<a name="l09003"></a>09003 
<a name="l09004"></a>09004 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l09005"></a>09005 <a class="code" href="../../d7/dc0/parse_8y.html#a9db34d1a14193da38d55c18c0376fbe4">no_blockarg</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node)
<a name="l09006"></a>09006 {
<a name="l09007"></a>09007     <span class="keywordflow">if</span> (node &amp;&amp; <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node) == NODE_BLOCK_PASS) {
<a name="l09008"></a>09008         <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;block argument should not be given&quot;</span>);
<a name="l09009"></a>09009     }
<a name="l09010"></a>09010 }
<a name="l09011"></a>09011 
<a name="l09012"></a>09012 <span class="keyword">static</span> NODE *
<a name="l09013"></a>09013 <a class="code" href="../../d7/dc0/parse_8y.html#ad0abb47818e0bcfa9c008d6e7e4ddbfe">ret_args_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node)
<a name="l09014"></a>09014 {
<a name="l09015"></a>09015     <span class="keywordflow">if</span> (node) {
<a name="l09016"></a>09016         <a class="code" href="../../d7/dc0/parse_8y.html#a9db34d1a14193da38d55c18c0376fbe4">no_blockarg</a>(parser, node);
<a name="l09017"></a>09017         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node) == NODE_ARRAY) {
<a name="l09018"></a>09018             <span class="keywordflow">if</span> (node-&gt;nd_next == 0) {
<a name="l09019"></a>09019                 node = node-&gt;nd_head;
<a name="l09020"></a>09020             }
<a name="l09021"></a>09021             <span class="keywordflow">else</span> {
<a name="l09022"></a>09022                 <a class="code" href="../../d3/d09/ripper_8y.html#a2d1f690881009147e0af52d3bcd84ccb">nd_set_type</a>(node, NODE_VALUES);
<a name="l09023"></a>09023             }
<a name="l09024"></a>09024         }
<a name="l09025"></a>09025     }
<a name="l09026"></a>09026     <span class="keywordflow">return</span> node;
<a name="l09027"></a>09027 }
<a name="l09028"></a>09028 
<a name="l09029"></a>09029 <span class="keyword">static</span> NODE *
<a name="l09030"></a>09030 <a class="code" href="../../d7/dc0/parse_8y.html#ae0479d8826aa662cc680ed75e657c5bf">new_yield_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *node)
<a name="l09031"></a>09031 {
<a name="l09032"></a>09032     <span class="keywordtype">long</span> state = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aacea3516b33941ce8149098e223a7466">Qtrue</a>;
<a name="l09033"></a>09033 
<a name="l09034"></a>09034     <span class="keywordflow">if</span> (node) {
<a name="l09035"></a>09035         <a class="code" href="../../d7/dc0/parse_8y.html#a9db34d1a14193da38d55c18c0376fbe4">no_blockarg</a>(parser, node);
<a name="l09036"></a>09036         <span class="keywordflow">if</span> (node &amp;&amp; <a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node) == NODE_SPLAT) {
<a name="l09037"></a>09037             state = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aacea3516b33941ce8149098e223a7466">Qtrue</a>;
<a name="l09038"></a>09038         }
<a name="l09039"></a>09039     }
<a name="l09040"></a>09040     <span class="keywordflow">else</span> {
<a name="l09041"></a>09041         state = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aba0717d2689eb68797421a02ab9295c6">Qfalse</a>;
<a name="l09042"></a>09042     }
<a name="l09043"></a>09043     <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a7796bc2b7ee4d35c0839cdc721200861">NEW_YIELD</a>(node, state);
<a name="l09044"></a>09044 }
<a name="l09045"></a>09045 
<a name="l09046"></a>09046 <span class="keyword">static</span> NODE*
<a name="l09047"></a>09047 <a class="code" href="../../d7/dc0/parse_8y.html#a31fcbde2b7aaecba1e43942d9e3535f4">negate_lit</a>(NODE *node)
<a name="l09048"></a>09048 {
<a name="l09049"></a>09049     <span class="keywordflow">switch</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a394faf7191f18552a20cb17ce14226f0">TYPE</a>(node-&gt;nd_lit)) {
<a name="l09050"></a>09050       <span class="keywordflow">case</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a523855de5546c34061e030f4606db3e9">T_FIXNUM</a>:
<a name="l09051"></a>09051         node-&gt;nd_lit = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a2ead2f64c81efed352e79e89f29b8fc8">LONG2FIX</a>(-<a class="code" href="../../de/de6/ruby_2ruby_8h.html#ae9390780cd6d04a2e0ac3d6282cdefea">FIX2LONG</a>(node-&gt;nd_lit));
<a name="l09052"></a>09052         <span class="keywordflow">break</span>;
<a name="l09053"></a>09053       <span class="keywordflow">case</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a41ac74a27dd1eadc2ca86d10590f2163">T_BIGNUM</a>:
<a name="l09054"></a>09054         node-&gt;nd_lit = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a6a973fe624aa9aa9ba0cdeb6792d3187" title="Calls a method.">rb_funcall</a>(node-&gt;nd_lit,<a class="code" href="../../d5/d11/ripper_8c.html#a2990cd3acbac56afa45019a045ddcd9e">tUMINUS</a>,0,0);
<a name="l09055"></a>09055         <span class="keywordflow">break</span>;
<a name="l09056"></a>09056       <span class="keywordflow">case</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3d072e0c25cf678e9b8601b957b92eae">T_FLOAT</a>:
<a name="l09057"></a>09057         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#adde23d563f8b7e5a0d646ada461dacba">RFLOAT</a>(node-&gt;nd_lit)-&gt;float_value = -<a class="code" href="../../d8/df4/generator_8h.html#a74258e532cd500e1cdfd6dcda7e97873">RFLOAT_VALUE</a>(node-&gt;nd_lit);
<a name="l09058"></a>09058         <span class="keywordflow">break</span>;
<a name="l09059"></a>09059       <span class="keywordflow">default</span>:
<a name="l09060"></a>09060         <span class="keywordflow">break</span>;
<a name="l09061"></a>09061     }
<a name="l09062"></a>09062     <span class="keywordflow">return</span> node;
<a name="l09063"></a>09063 }
<a name="l09064"></a>09064 
<a name="l09065"></a>09065 <span class="keyword">static</span> NODE *
<a name="l09066"></a>09066 <a class="code" href="../../d7/dc0/parse_8y.html#a09e2a35ffd054287cd8a5f9e285975e6">arg_blk_pass</a>(NODE *node1, NODE *node2)
<a name="l09067"></a>09067 {
<a name="l09068"></a>09068     <span class="keywordflow">if</span> (node2) {
<a name="l09069"></a>09069         node2-&gt;nd_head = node1;
<a name="l09070"></a>09070         <span class="keywordflow">return</span> node2;
<a name="l09071"></a>09071     }
<a name="l09072"></a>09072     <span class="keywordflow">return</span> node1;
<a name="l09073"></a>09073 }
<a name="l09074"></a>09074 
<a name="l09075"></a>09075 <span class="keyword">static</span> NODE*
<a name="l09076"></a>09076 <a class="code" href="../../d7/dc0/parse_8y.html#aa4c5791dac1d5f6d9dc8a2c9df32d336">new_args_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, NODE *m, NODE *o, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> r, NODE *p, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> b)
<a name="l09077"></a>09077 {
<a name="l09078"></a>09078     <span class="keywordtype">int</span> saved_line = <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>;
<a name="l09079"></a>09079     NODE *node;
<a name="l09080"></a>09080     NODE *i1, *i2 = 0;
<a name="l09081"></a>09081 
<a name="l09082"></a>09082     node = <a class="code" href="../../d3/d09/ripper_8y.html#abb0a68dbb0d8d052daf0170be019a7c9">NEW_ARGS</a>(m ? m-&gt;nd_plen : 0, o);
<a name="l09083"></a>09083     i1 = m ? m-&gt;nd_next : 0;
<a name="l09084"></a>09084     node-&gt;nd_next = <a class="code" href="../../d3/d09/ripper_8y.html#a244cf7c1439ba603ebd6c13f3e5dc98d">NEW_ARGS_AUX</a>(r, b);
<a name="l09085"></a>09085 
<a name="l09086"></a>09086     <span class="keywordflow">if</span> (p) {
<a name="l09087"></a>09087         i2 = p-&gt;nd_next;
<a name="l09088"></a>09088         node-&gt;nd_next-&gt;nd_next = <a class="code" href="../../d3/d09/ripper_8y.html#a244cf7c1439ba603ebd6c13f3e5dc98d">NEW_ARGS_AUX</a>(p-&gt;nd_pid, p-&gt;nd_plen);
<a name="l09089"></a>09089     }
<a name="l09090"></a>09090     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i1) {
<a name="l09091"></a>09091         node-&gt;nd_next-&gt;nd_next = <a class="code" href="../../d3/d09/ripper_8y.html#a244cf7c1439ba603ebd6c13f3e5dc98d">NEW_ARGS_AUX</a>(0, 0);
<a name="l09092"></a>09092     }
<a name="l09093"></a>09093     <span class="keywordflow">if</span> (i1 || i2) {
<a name="l09094"></a>09094         node-&gt;nd_next-&gt;nd_next-&gt;nd_next = <a class="code" href="../../d3/d09/ripper_8y.html#a6fafbd1d8ed31805fc7574ae1f6c87c7">NEW_NODE</a>(NODE_AND, i1, i2, 0);
<a name="l09095"></a>09095     }
<a name="l09096"></a>09096     <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a> = saved_line;
<a name="l09097"></a>09097     <span class="keywordflow">return</span> node;
<a name="l09098"></a>09098 }
<a name="l09099"></a>09099 <span class="preprocessor">#endif </span><span class="comment">/* !RIPPER */</span>
<a name="l09100"></a>09100 
<a name="l09101"></a>09101 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l09102"></a>09102 <a class="code" href="../../d7/dc0/parse_8y.html#a4fd43c338a5f66f2d33305d45580ea1d">warn_unused_var</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">struct</span> <a class="code" href="../../df/d34/structlocal__vars.html">local_vars</a> *local)
<a name="l09103"></a>09103 {
<a name="l09104"></a>09104     <span class="keywordtype">int</span> i, <a class="code" href="../../d8/d36/signal_8c.html#a6f2334d7e90694f211f708b860dfa486">cnt</a>;
<a name="l09105"></a>09105     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> *v, *u;
<a name="l09106"></a>09106 
<a name="l09107"></a>09107     <span class="keywordflow">if</span> (!local-&gt;<a class="code" href="../../df/d34/structlocal__vars.html#ae2e9500109d251ab7fe794d16d72f071">used</a>) <span class="keywordflow">return</span>;
<a name="l09108"></a>09108     v = local-&gt;<a class="code" href="../../df/d34/structlocal__vars.html#a69f2a304610e6ff671c45b664ccf831a">vars</a>-&gt;<a class="code" href="../../da/d3d/structvtable.html#a5308cc6c4700614b0ec2a74317a93f11">tbl</a>;
<a name="l09109"></a>09109     u = local-&gt;<a class="code" href="../../df/d34/structlocal__vars.html#ae2e9500109d251ab7fe794d16d72f071">used</a>-&gt;<a class="code" href="../../da/d3d/structvtable.html#a5308cc6c4700614b0ec2a74317a93f11">tbl</a>;
<a name="l09110"></a>09110     cnt = local-&gt;<a class="code" href="../../df/d34/structlocal__vars.html#ae2e9500109d251ab7fe794d16d72f071">used</a>-&gt;<a class="code" href="../../da/d3d/structvtable.html#a7fdcb9c83ee19c84d989b925043ad06d">pos</a>;
<a name="l09111"></a>09111     <span class="keywordflow">if</span> (cnt != local-&gt;<a class="code" href="../../df/d34/structlocal__vars.html#a69f2a304610e6ff671c45b664ccf831a">vars</a>-&gt;<a class="code" href="../../da/d3d/structvtable.html#a7fdcb9c83ee19c84d989b925043ad06d">pos</a>) {
<a name="l09112"></a>09112         <a class="code" href="../../db/dcc/error_8c.html#a2d5fb28e54f792e7341b2c45f52f3860">rb_bug</a>(<span class="stringliteral">&quot;local-&gt;used-&gt;pos != local-&gt;vars-&gt;pos&quot;</span>);
<a name="l09113"></a>09113     }
<a name="l09114"></a>09114     <span class="keywordflow">for</span> (i = 0; i &lt; cnt; ++i) {
<a name="l09115"></a>09115         <span class="keywordflow">if</span> (!v[i] || (u[i] &amp; <a class="code" href="../../d5/d11/ripper_8c.html#a1f9bbd9b926d67608f86011f6ccfb04a">LVAR_USED</a>)) <span class="keywordflow">continue</span>;
<a name="l09116"></a>09116         <span class="keywordflow">if</span> (idUScore == v[i]) <span class="keywordflow">continue</span>;
<a name="l09117"></a>09117         <a class="code" href="../../db/dcc/error_8c.html#a146caf541551298053f23e384ce4ce2a">rb_compile_warn</a>(<a class="code" href="../../d2/d47/compile_8c.html#aca52b28c4504720708a4fab8675dc407">ruby_sourcefile</a>, (<span class="keywordtype">int</span>)u[i], <span class="stringliteral">&quot;assigned but unused variable - %s&quot;</span>, <a class="code" href="../../d5/d11/ripper_8c.html#a877bc58c495643fcf49dc64c44631e72">rb_id2name</a>(v[i]));
<a name="l09118"></a>09118     }
<a name="l09119"></a>09119 }
<a name="l09120"></a>09120 
<a name="l09121"></a>09121 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l09122"></a>09122 <a class="code" href="../../d7/dc0/parse_8y.html#a5f47a25385c00ba4a63f11987d0e6c11">local_push_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keywordtype">int</span> inherit_dvars)
<a name="l09123"></a>09123 {
<a name="l09124"></a>09124     <span class="keyword">struct </span><a class="code" href="../../df/d34/structlocal__vars.html">local_vars</a> *local;
<a name="l09125"></a>09125 
<a name="l09126"></a>09126     local = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#ac8df5a8a8961bd9e16be385fef28c2f2">ALLOC</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d34/structlocal__vars.html">local_vars</a>);
<a name="l09127"></a>09127     local-&gt;<a class="code" href="../../df/d34/structlocal__vars.html#a14c2a2f2db273cae73cc35b9dbcbad87">prev</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>;
<a name="l09128"></a>09128     local-&gt;<a class="code" href="../../df/d34/structlocal__vars.html#ad1c48547f7cb37319c5fb8887d939e80">args</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a195d13114b3e77ed234b28e67f732dee">vtable_alloc</a>(0);
<a name="l09129"></a>09129     local-&gt;<a class="code" href="../../df/d34/structlocal__vars.html#a69f2a304610e6ff671c45b664ccf831a">vars</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a195d13114b3e77ed234b28e67f732dee">vtable_alloc</a>(inherit_dvars ? <a class="code" href="../../d5/d11/ripper_8c.html#a1e958e1fa9713ce80c2534cae6c806c9">DVARS_INHERIT</a> : <a class="code" href="../../d5/d11/ripper_8c.html#a120189a95455c13f715c2d385ad204e9">DVARS_TOPSCOPE</a>);
<a name="l09130"></a>09130     local-&gt;<a class="code" href="../../df/d34/structlocal__vars.html#ae2e9500109d251ab7fe794d16d72f071">used</a> = !inherit_dvars &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a117741045763c090b26e30a85bd0e0a6">RTEST</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a56087d5316e4c73027105c023006cb15">ruby_verbose</a>) ? <a class="code" href="../../d5/d11/ripper_8c.html#a195d13114b3e77ed234b28e67f732dee">vtable_alloc</a>(0) : 0;
<a name="l09131"></a>09131     <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a> = local;
<a name="l09132"></a>09132 }
<a name="l09133"></a>09133 
<a name="l09134"></a>09134 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l09135"></a>09135 <a class="code" href="../../d7/dc0/parse_8y.html#a0f658b4b6ca27634eda857e8f504b434">local_pop_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l09136"></a>09136 {
<a name="l09137"></a>09137     <span class="keyword">struct </span><a class="code" href="../../df/d34/structlocal__vars.html">local_vars</a> *local = <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;prev;
<a name="l09138"></a>09138     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;used) {
<a name="l09139"></a>09139         <a class="code" href="../../d7/dc0/parse_8y.html#a4fd43c338a5f66f2d33305d45580ea1d">warn_unused_var</a>(parser, <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>);
<a name="l09140"></a>09140         <a class="code" href="../../d5/d11/ripper_8c.html#a85f6dab8d92797efec6922dbb6da9588">vtable_free</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;used);
<a name="l09141"></a>09141     }
<a name="l09142"></a>09142     <a class="code" href="../../d5/d11/ripper_8c.html#a85f6dab8d92797efec6922dbb6da9588">vtable_free</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args);
<a name="l09143"></a>09143     <a class="code" href="../../d5/d11/ripper_8c.html#a85f6dab8d92797efec6922dbb6da9588">vtable_free</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;vars);
<a name="l09144"></a>09144     <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>);
<a name="l09145"></a>09145     <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a> = local;
<a name="l09146"></a>09146 }
<a name="l09147"></a>09147 
<a name="l09148"></a>09148 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l09149"></a>09149 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>*
<a name="l09150"></a>09150 <a class="code" href="../../d7/dc0/parse_8y.html#a3dc252afae87bc11ec326015f5828c7c">vtable_tblcpy</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> *buf, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../da/d3d/structvtable.html">vtable</a> *src)
<a name="l09151"></a>09151 {
<a name="l09152"></a>09152     <span class="keywordtype">int</span> i, cnt = <a class="code" href="../../d5/d11/ripper_8c.html#ae4e8077b70dff93cf67cfcf5348620e3">vtable_size</a>(src);
<a name="l09153"></a>09153 
<a name="l09154"></a>09154     <span class="keywordflow">if</span> (cnt &gt; 0) {
<a name="l09155"></a>09155         buf[0] = cnt;
<a name="l09156"></a>09156         <span class="keywordflow">for</span> (i = 0; i &lt; cnt; i++) {
<a name="l09157"></a>09157             buf[i] = src-&gt;<a class="code" href="../../da/d3d/structvtable.html#a5308cc6c4700614b0ec2a74317a93f11">tbl</a>[i];
<a name="l09158"></a>09158         }
<a name="l09159"></a>09159         <span class="keywordflow">return</span> buf;
<a name="l09160"></a>09160     }
<a name="l09161"></a>09161     <span class="keywordflow">return</span> 0;
<a name="l09162"></a>09162 }
<a name="l09163"></a>09163 
<a name="l09164"></a>09164 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>*
<a name="l09165"></a>09165 <a class="code" href="../../d7/dc0/parse_8y.html#aac5ec0f965181e06645e6dac601cee30">local_tbl_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l09166"></a>09166 {
<a name="l09167"></a>09167     <span class="keywordtype">int</span> cnt = <a class="code" href="../../d5/d11/ripper_8c.html#ae4e8077b70dff93cf67cfcf5348620e3">vtable_size</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args) + <a class="code" href="../../d5/d11/ripper_8c.html#ae4e8077b70dff93cf67cfcf5348620e3">vtable_size</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;vars);
<a name="l09168"></a>09168     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> *buf;
<a name="l09169"></a>09169 
<a name="l09170"></a>09170     <span class="keywordflow">if</span> (cnt &lt;= 0) <span class="keywordflow">return</span> 0;
<a name="l09171"></a>09171     buf = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a79041aa2bc7439c11906a86f82a52eb6">ALLOC_N</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>, cnt + 1);
<a name="l09172"></a>09172     <a class="code" href="../../d7/dc0/parse_8y.html#a3dc252afae87bc11ec326015f5828c7c">vtable_tblcpy</a>(buf+1, <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args);
<a name="l09173"></a>09173     <a class="code" href="../../d7/dc0/parse_8y.html#a3dc252afae87bc11ec326015f5828c7c">vtable_tblcpy</a>(buf+<a class="code" href="../../d5/d11/ripper_8c.html#ae4e8077b70dff93cf67cfcf5348620e3">vtable_size</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args)+1, <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;vars);
<a name="l09174"></a>09174     buf[0] = cnt;
<a name="l09175"></a>09175     <span class="keywordflow">return</span> buf;
<a name="l09176"></a>09176 }
<a name="l09177"></a>09177 <span class="preprocessor">#endif</span>
<a name="l09178"></a>09178 <span class="preprocessor"></span>
<a name="l09179"></a>09179 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l09180"></a>09180 <a class="code" href="../../d7/dc0/parse_8y.html#a1cae35722d25ca2fbaa6d1d3ae268278">arg_var_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l09181"></a>09181 {
<a name="l09182"></a>09182     <a class="code" href="../../d5/d11/ripper_8c.html#ab173ab53e10567e11262a24587db4192">vtable_add</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args, <span class="keywordtype">id</span>);
<a name="l09183"></a>09183     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ae4e8077b70dff93cf67cfcf5348620e3">vtable_size</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args) - 1;
<a name="l09184"></a>09184 }
<a name="l09185"></a>09185 
<a name="l09186"></a>09186 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l09187"></a>09187 <a class="code" href="../../d7/dc0/parse_8y.html#a77348ef72ae97d0a170314a2ede11d4f">local_var_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l09188"></a>09188 {
<a name="l09189"></a>09189     <a class="code" href="../../d5/d11/ripper_8c.html#ab173ab53e10567e11262a24587db4192">vtable_add</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;vars, <span class="keywordtype">id</span>);
<a name="l09190"></a>09190     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;used) {
<a name="l09191"></a>09191         <a class="code" href="../../d5/d11/ripper_8c.html#ab173ab53e10567e11262a24587db4192">vtable_add</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;used, (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>)<a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>);
<a name="l09192"></a>09192     }
<a name="l09193"></a>09193     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ae4e8077b70dff93cf67cfcf5348620e3">vtable_size</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;vars) - 1;
<a name="l09194"></a>09194 }
<a name="l09195"></a>09195 
<a name="l09196"></a>09196 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l09197"></a>09197 <a class="code" href="../../d7/dc0/parse_8y.html#a52d6e34fbd5d4d65ee2834bb2cdaadb0">local_id_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l09198"></a>09198 {
<a name="l09199"></a>09199     <span class="keyword">struct </span><a class="code" href="../../da/d3d/structvtable.html">vtable</a> *vars, *args, *used;
<a name="l09200"></a>09200 
<a name="l09201"></a>09201     vars = <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;vars;
<a name="l09202"></a>09202     args = <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args;
<a name="l09203"></a>09203     used = <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;used;
<a name="l09204"></a>09204 
<a name="l09205"></a>09205     <span class="keywordflow">while</span> (vars &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#a7c25fd6a3d60bf66779311845566273b">POINTER_P</a>(vars-&gt;<a class="code" href="../../da/d3d/structvtable.html#a75a8b035d8c379d99af9a04c14f9414c">prev</a>)) {
<a name="l09206"></a>09206         vars = vars-&gt;<a class="code" href="../../da/d3d/structvtable.html#a75a8b035d8c379d99af9a04c14f9414c">prev</a>;
<a name="l09207"></a>09207         args = args-&gt;<a class="code" href="../../da/d3d/structvtable.html#a75a8b035d8c379d99af9a04c14f9414c">prev</a>;
<a name="l09208"></a>09208         <span class="keywordflow">if</span> (used) used = used-&gt;<a class="code" href="../../da/d3d/structvtable.html#a75a8b035d8c379d99af9a04c14f9414c">prev</a>;
<a name="l09209"></a>09209     }
<a name="l09210"></a>09210 
<a name="l09211"></a>09211     <span class="keywordflow">if</span> (vars &amp;&amp; vars-&gt;<a class="code" href="../../da/d3d/structvtable.html#a75a8b035d8c379d99af9a04c14f9414c">prev</a> == <a class="code" href="../../d5/d11/ripper_8c.html#a1e958e1fa9713ce80c2534cae6c806c9">DVARS_INHERIT</a>) {
<a name="l09212"></a>09212         <span class="keywordflow">return</span> <a class="code" href="../../d2/d47/compile_8c.html#ae8c5c61bbbedb2b0f0a295aa4465b9e2">rb_local_defined</a>(<span class="keywordtype">id</span>);
<a name="l09213"></a>09213     }
<a name="l09214"></a>09214     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a64634944fc97b322eccc73273cbfe233">vtable_included</a>(args, <span class="keywordtype">id</span>)) {
<a name="l09215"></a>09215         <span class="keywordflow">return</span> 1;
<a name="l09216"></a>09216     }
<a name="l09217"></a>09217     <span class="keywordflow">else</span> {
<a name="l09218"></a>09218         <span class="keywordtype">int</span> i = <a class="code" href="../../d5/d11/ripper_8c.html#a64634944fc97b322eccc73273cbfe233">vtable_included</a>(vars, <span class="keywordtype">id</span>);
<a name="l09219"></a>09219         <span class="keywordflow">if</span> (i &amp;&amp; used) used-&gt;<a class="code" href="../../da/d3d/structvtable.html#a5308cc6c4700614b0ec2a74317a93f11">tbl</a>[i-1] |= LVAR_USED;
<a name="l09220"></a>09220         <span class="keywordflow">return</span> i != 0;
<a name="l09221"></a>09221     }
<a name="l09222"></a>09222 }
<a name="l09223"></a>09223 
<a name="l09224"></a>09224 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../da/d3d/structvtable.html">vtable</a> *
<a name="l09225"></a>09225 <a class="code" href="../../d7/dc0/parse_8y.html#afa4bc33195de8cb9273daa0d6f019e5d">dyna_push_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l09226"></a>09226 {
<a name="l09227"></a>09227     <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args = <a class="code" href="../../d5/d11/ripper_8c.html#a195d13114b3e77ed234b28e67f732dee">vtable_alloc</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args);
<a name="l09228"></a>09228     <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;vars = <a class="code" href="../../d5/d11/ripper_8c.html#a195d13114b3e77ed234b28e67f732dee">vtable_alloc</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;vars);
<a name="l09229"></a>09229     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;used) {
<a name="l09230"></a>09230         <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;used = <a class="code" href="../../d5/d11/ripper_8c.html#a195d13114b3e77ed234b28e67f732dee">vtable_alloc</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;used);
<a name="l09231"></a>09231     }
<a name="l09232"></a>09232     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args;
<a name="l09233"></a>09233 }
<a name="l09234"></a>09234 
<a name="l09235"></a>09235 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l09236"></a>09236 <a class="code" href="../../d7/dc0/parse_8y.html#a645739b431ecfee9bc49dd983d5988ee">dyna_pop_1</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l09237"></a>09237 {
<a name="l09238"></a>09238     <span class="keyword">struct </span><a class="code" href="../../da/d3d/structvtable.html">vtable</a> *tmp;
<a name="l09239"></a>09239 
<a name="l09240"></a>09240     <span class="keywordflow">if</span> ((tmp = <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;used) != 0) {
<a name="l09241"></a>09241         <a class="code" href="../../d7/dc0/parse_8y.html#a4fd43c338a5f66f2d33305d45580ea1d">warn_unused_var</a>(parser, <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>);
<a name="l09242"></a>09242         <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;used = <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;used-&gt;prev;
<a name="l09243"></a>09243         <a class="code" href="../../d5/d11/ripper_8c.html#a85f6dab8d92797efec6922dbb6da9588">vtable_free</a>(tmp);
<a name="l09244"></a>09244     }
<a name="l09245"></a>09245     tmp = <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args;
<a name="l09246"></a>09246     <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args = <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args-&gt;prev;
<a name="l09247"></a>09247     <a class="code" href="../../d5/d11/ripper_8c.html#a85f6dab8d92797efec6922dbb6da9588">vtable_free</a>(tmp);
<a name="l09248"></a>09248     tmp = <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;vars;
<a name="l09249"></a>09249     <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;vars = <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;vars-&gt;prev;
<a name="l09250"></a>09250     <a class="code" href="../../d5/d11/ripper_8c.html#a85f6dab8d92797efec6922dbb6da9588">vtable_free</a>(tmp);
<a name="l09251"></a>09251 }
<a name="l09252"></a>09252 
<a name="l09253"></a>09253 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l09254"></a>09254 <a class="code" href="../../d7/dc0/parse_8y.html#a9c508c4da50d6b7db80190e138b847e9">dyna_pop_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../da/d3d/structvtable.html">vtable</a> *lvargs)
<a name="l09255"></a>09255 {
<a name="l09256"></a>09256     <span class="keywordflow">while</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args != lvargs) {
<a name="l09257"></a>09257         <a class="code" href="../../d7/dc0/parse_8y.html#a645739b431ecfee9bc49dd983d5988ee">dyna_pop_1</a>(parser);
<a name="l09258"></a>09258         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args) {
<a name="l09259"></a>09259             <span class="keyword">struct </span><a class="code" href="../../df/d34/structlocal__vars.html">local_vars</a> *local = <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;prev;
<a name="l09260"></a>09260             <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>);
<a name="l09261"></a>09261             <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a> = local;
<a name="l09262"></a>09262         }
<a name="l09263"></a>09263     }
<a name="l09264"></a>09264     <a class="code" href="../../d7/dc0/parse_8y.html#a645739b431ecfee9bc49dd983d5988ee">dyna_pop_1</a>(parser);
<a name="l09265"></a>09265 }
<a name="l09266"></a>09266 
<a name="l09267"></a>09267 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l09268"></a>09268 <a class="code" href="../../d7/dc0/parse_8y.html#a515b9ddc0272fe885f758e3593900949">dyna_in_block_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l09269"></a>09269 {
<a name="l09270"></a>09270     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a7c25fd6a3d60bf66779311845566273b">POINTER_P</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;vars) &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;vars-&gt;prev != <a class="code" href="../../d5/d11/ripper_8c.html#a120189a95455c13f715c2d385ad204e9">DVARS_TOPSCOPE</a>;
<a name="l09271"></a>09271 }
<a name="l09272"></a>09272 
<a name="l09273"></a>09273 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l09274"></a>09274 <a class="code" href="../../d7/dc0/parse_8y.html#a4c4216234876b11b025189824abd1dac">dvar_defined_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>, <span class="keywordtype">int</span> <span class="keyword">get</span>)
<a name="l09275"></a>09275 {
<a name="l09276"></a>09276     <span class="keyword">struct </span><a class="code" href="../../da/d3d/structvtable.html">vtable</a> *vars, *args, *used;
<a name="l09277"></a>09277     <span class="keywordtype">int</span> i;
<a name="l09278"></a>09278 
<a name="l09279"></a>09279     args = <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args;
<a name="l09280"></a>09280     vars = <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;vars;
<a name="l09281"></a>09281     used = <a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;used;
<a name="l09282"></a>09282 
<a name="l09283"></a>09283     <span class="keywordflow">while</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a7c25fd6a3d60bf66779311845566273b">POINTER_P</a>(vars)) {
<a name="l09284"></a>09284         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a64634944fc97b322eccc73273cbfe233">vtable_included</a>(args, <span class="keywordtype">id</span>)) {
<a name="l09285"></a>09285             <span class="keywordflow">return</span> 1;
<a name="l09286"></a>09286         }
<a name="l09287"></a>09287         <span class="keywordflow">if</span> ((i = <a class="code" href="../../d5/d11/ripper_8c.html#a64634944fc97b322eccc73273cbfe233">vtable_included</a>(vars, <span class="keywordtype">id</span>)) != 0) {
<a name="l09288"></a>09288             <span class="keywordflow">if</span> (used) used-&gt;<a class="code" href="../../da/d3d/structvtable.html#a5308cc6c4700614b0ec2a74317a93f11">tbl</a>[i-1] |= LVAR_USED;
<a name="l09289"></a>09289             <span class="keywordflow">return</span> 1;
<a name="l09290"></a>09290         }
<a name="l09291"></a>09291         args = args-&gt;<a class="code" href="../../da/d3d/structvtable.html#a75a8b035d8c379d99af9a04c14f9414c">prev</a>;
<a name="l09292"></a>09292         vars = vars-&gt;<a class="code" href="../../da/d3d/structvtable.html#a75a8b035d8c379d99af9a04c14f9414c">prev</a>;
<a name="l09293"></a>09293         <span class="keywordflow">if</span> (<span class="keyword">get</span>) used = 0;
<a name="l09294"></a>09294         <span class="keywordflow">if</span> (used) used = used-&gt;<a class="code" href="../../da/d3d/structvtable.html#a75a8b035d8c379d99af9a04c14f9414c">prev</a>;
<a name="l09295"></a>09295     }
<a name="l09296"></a>09296 
<a name="l09297"></a>09297     <span class="keywordflow">if</span> (vars == <a class="code" href="../../d5/d11/ripper_8c.html#a1e958e1fa9713ce80c2534cae6c806c9">DVARS_INHERIT</a>) {
<a name="l09298"></a>09298         <span class="keywordflow">return</span> <a class="code" href="../../d2/d47/compile_8c.html#a8dae7d00e7ad11c9022ffaa83e7226f5">rb_dvar_defined</a>(<span class="keywordtype">id</span>);
<a name="l09299"></a>09299     }
<a name="l09300"></a>09300 
<a name="l09301"></a>09301     <span class="keywordflow">return</span> 0;
<a name="l09302"></a>09302 }
<a name="l09303"></a>09303 
<a name="l09304"></a>09304 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l09305"></a>09305 <a class="code" href="../../d7/dc0/parse_8y.html#aa682c82a0583ececc5e2a7def56ec445">dvar_curr_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l09306"></a>09306 {
<a name="l09307"></a>09307     <span class="keywordflow">return</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a64634944fc97b322eccc73273cbfe233">vtable_included</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args, <span class="keywordtype">id</span>) ||
<a name="l09308"></a>09308             <a class="code" href="../../d5/d11/ripper_8c.html#a64634944fc97b322eccc73273cbfe233">vtable_included</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;vars, <span class="keywordtype">id</span>));
<a name="l09309"></a>09309 }
<a name="l09310"></a>09310 
<a name="l09311"></a>09311 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l09312"></a>09312 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l09313"></a>09313 <a class="code" href="../../d7/dc0/parse_8y.html#ab600b10d5d1ecf82c70c220e4636cdd5">reg_fragment_setenc_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>* parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str, <span class="keywordtype">int</span> options)
<a name="l09314"></a>09314 {
<a name="l09315"></a>09315     <span class="keywordtype">int</span> c = <a class="code" href="../../d5/d11/ripper_8c.html#a9716cb57cf662ee8470dfad1713dfd1e">RE_OPTION_ENCODING_IDX</a>(options);
<a name="l09316"></a>09316 
<a name="l09317"></a>09317     <span class="keywordflow">if</span> (c) {
<a name="l09318"></a>09318         <span class="keywordtype">int</span> opt, idx;
<a name="l09319"></a>09319         <a class="code" href="../../d5/de3/encoding_8h.html#a999a688744447acf7be194e642468cd3">rb_char_to_option_kcode</a>(c, &amp;opt, &amp;idx);
<a name="l09320"></a>09320         <span class="keywordflow">if</span> (idx != <a class="code" href="../../d5/de3/encoding_8h.html#a6ba07266a084d7a480377f1472aabfd8">ENCODING_GET</a>(str) &amp;&amp;
<a name="l09321"></a>09321             <a class="code" href="../../d5/de3/encoding_8h.html#a5282c41e11a68fe310f45c9a326ae2b8">rb_enc_str_coderange</a>(str) != <a class="code" href="../../d5/de3/encoding_8h.html#a0a0e73a2d98205044e1ad19432502c5b">ENC_CODERANGE_7BIT</a>) {
<a name="l09322"></a>09322             <span class="keywordflow">goto</span> error;
<a name="l09323"></a>09323         }
<a name="l09324"></a>09324         <a class="code" href="../../d5/de3/encoding_8h.html#ae219bd2ad84b4ac96f773284a6b0448c">ENCODING_SET</a>(str, idx);
<a name="l09325"></a>09325     }
<a name="l09326"></a>09326     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a5b499349716d690ead3490ae9460710f">RE_OPTION_ENCODING_NONE</a>(options)) {
<a name="l09327"></a>09327         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/de3/encoding_8h.html#ae5ff9694c99a5306a9415ac51e8c4faa">ENCODING_IS_ASCII8BIT</a>(str) &amp;&amp;
<a name="l09328"></a>09328             <a class="code" href="../../d5/de3/encoding_8h.html#a5282c41e11a68fe310f45c9a326ae2b8">rb_enc_str_coderange</a>(str) != <a class="code" href="../../d5/de3/encoding_8h.html#a0a0e73a2d98205044e1ad19432502c5b">ENC_CODERANGE_7BIT</a>) {
<a name="l09329"></a>09329             c = <span class="charliteral">&apos;n&apos;</span>;
<a name="l09330"></a>09330             <span class="keywordflow">goto</span> error;
<a name="l09331"></a>09331         }
<a name="l09332"></a>09332         <a class="code" href="../../d5/db5/encoding_8c.html#a150a6e3ac22ac3be8f8c2ccc74a28e7b">rb_enc_associate</a>(str, <a class="code" href="../../d5/db5/encoding_8c.html#a767d777810f0d48add93857b52057262">rb_ascii8bit_encoding</a>());
<a name="l09333"></a>09333     }
<a name="l09334"></a>09334     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a> == <a class="code" href="../../d5/db5/encoding_8c.html#a1e215012f16414c044f6a212973c95a8">rb_usascii_encoding</a>()) {
<a name="l09335"></a>09335         <span class="keywordflow">if</span> (<a class="code" href="../../d5/de3/encoding_8h.html#a5282c41e11a68fe310f45c9a326ae2b8">rb_enc_str_coderange</a>(str) != <a class="code" href="../../d5/de3/encoding_8h.html#a0a0e73a2d98205044e1ad19432502c5b">ENC_CODERANGE_7BIT</a>) {
<a name="l09336"></a>09336             <span class="comment">/* raise in re.c */</span>
<a name="l09337"></a>09337             <a class="code" href="../../d5/db5/encoding_8c.html#a150a6e3ac22ac3be8f8c2ccc74a28e7b">rb_enc_associate</a>(str, <a class="code" href="../../d5/db5/encoding_8c.html#a1e215012f16414c044f6a212973c95a8">rb_usascii_encoding</a>());
<a name="l09338"></a>09338         }
<a name="l09339"></a>09339         <span class="keywordflow">else</span> {
<a name="l09340"></a>09340             <a class="code" href="../../d5/db5/encoding_8c.html#a150a6e3ac22ac3be8f8c2ccc74a28e7b">rb_enc_associate</a>(str, <a class="code" href="../../d5/db5/encoding_8c.html#a767d777810f0d48add93857b52057262">rb_ascii8bit_encoding</a>());
<a name="l09341"></a>09341         }
<a name="l09342"></a>09342     }
<a name="l09343"></a>09343     <span class="keywordflow">return</span>;
<a name="l09344"></a>09344 
<a name="l09345"></a>09345   error:
<a name="l09346"></a>09346     <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a>
<a name="l09347"></a>09347         <span class="stringliteral">&quot;regexp encoding option &apos;%c&apos; differs from source encoding &apos;%s&apos;&quot;</span>,
<a name="l09348"></a>09348         c, <a class="code" href="../../d5/de3/encoding_8h.html#a69d59d898802726787a168ef2e0dc92c">rb_enc_name</a>(<a class="code" href="../../d5/db5/encoding_8c.html#ac21ed764f3b39453b6a848dd64a19585">rb_enc_get</a>(str)));
<a name="l09349"></a>09349 }
<a name="l09350"></a>09350 
<a name="l09351"></a>09351 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l09352"></a>09352 <a class="code" href="../../d7/dc0/parse_8y.html#a3d317218af7a2958583fbc829bb238b8">reg_fragment_check_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>* parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str, <span class="keywordtype">int</span> options)
<a name="l09353"></a>09353 {
<a name="l09354"></a>09354     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d5/df2/win32_8c.html#a6ce68847c12434f60d1b2654a3dc3409">err</a>;
<a name="l09355"></a>09355     <a class="code" href="../../d5/d11/ripper_8c.html#a5fc2d1f4685a1446132227f925d3b379">reg_fragment_setenc</a>(str, options);
<a name="l09356"></a>09356     err = <a class="code" href="../../dc/d26/re_8c.html#aec45fb2d9c9e7dc454e31f2432c53408">rb_reg_check_preprocess</a>(str);
<a name="l09357"></a>09357     <span class="keywordflow">if</span> (err != <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>) {
<a name="l09358"></a>09358         err = <a class="code" href="../../db/d2e/intern_8h.html#acae5350f5d539c4654e4e33690256a9f">rb_obj_as_string</a>(err);
<a name="l09359"></a>09359         <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d8/df4/generator_8h.html#aa0c7097c0d82c8372072fbab5a604e39">RSTRING_PTR</a>(err));
<a name="l09360"></a>09360         <a class="code" href="../../d8/df4/generator_8h.html#ad2bf389f3fddea7bd3befa162c70561a">RB_GC_GUARD</a>(err);
<a name="l09361"></a>09361         <span class="keywordflow">return</span> 0;
<a name="l09362"></a>09362     }
<a name="l09363"></a>09363     <span class="keywordflow">return</span> 1;
<a name="l09364"></a>09364 }
<a name="l09365"></a>09365 
<a name="l09366"></a>09366 <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l09367"></a>09367     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>* parser;
<a name="l09368"></a>09368     <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc;
<a name="l09369"></a>09369     NODE *succ_block;
<a name="l09370"></a>09370     NODE *fail_block;
<a name="l09371"></a>09371     <span class="keywordtype">int</span> num;
<a name="l09372"></a>09372 } <a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html">reg_named_capture_assign_t</a>;
<a name="l09373"></a>09373 
<a name="l09374"></a>09374 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l09375"></a>09375 <a class="code" href="../../d7/dc0/parse_8y.html#a483808c5557dc75aecd88bc02331f285">reg_named_capture_assign_iter</a>(<span class="keyword">const</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a291548d828e9d948f8b8e1d117548841">OnigUChar</a> *name, <span class="keyword">const</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a291548d828e9d948f8b8e1d117548841">OnigUChar</a> *name_end,
<a name="l09376"></a>09376           <span class="keywordtype">int</span> back_num, <span class="keywordtype">int</span> *back_refs, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">OnigRegex</a> regex, <span class="keywordtype">void</span> *arg0)
<a name="l09377"></a>09377 {
<a name="l09378"></a>09378     <a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html">reg_named_capture_assign_t</a> *arg = (<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html">reg_named_capture_assign_t</a>*)arg0;
<a name="l09379"></a>09379     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>* parser = arg-&gt;<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#ae3238c02724d27e39b50c417e0e4fac3">parser</a>;
<a name="l09380"></a>09380     <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc = arg-&gt;<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#ac9b175818938e67fe0943919057faa28">enc</a>;
<a name="l09381"></a>09381     <span class="keywordtype">long</span> len = name_end - name;
<a name="l09382"></a>09382     <span class="keyword">const</span> <span class="keywordtype">char</span> *s = (<span class="keyword">const</span> <span class="keywordtype">char</span> *)name;
<a name="l09383"></a>09383     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> var;
<a name="l09384"></a>09384 
<a name="l09385"></a>09385     arg-&gt;<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#a40afc0b1f4310c603b144ae954c05d21">num</a>++;
<a name="l09386"></a>09386 
<a name="l09387"></a>09387     <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#ae9cbb835e73cb72a31b25a3244a9c0a9">succ_block</a> == 0) {
<a name="l09388"></a>09388         arg-&gt;<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#ae9cbb835e73cb72a31b25a3244a9c0a9">succ_block</a> = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l09389"></a>09389         arg-&gt;<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#adac0de0779ffe0be4c7c3fb8f079bb87">fail_block</a> = <a class="code" href="../../d3/d09/ripper_8y.html#a5e7a0a52100eb0c55a45820aec023c1d">NEW_BEGIN</a>(0);
<a name="l09390"></a>09390     }
<a name="l09391"></a>09391 
<a name="l09392"></a>09392     <span class="keywordflow">if</span> (!len || (*name != <span class="charliteral">&apos;_&apos;</span> &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#af96ff81718c3c27b342b5958fac6cb7e">ISASCII</a>(*name) &amp;&amp; !<a class="code" href="../../d5/de3/encoding_8h.html#ab0e0426c60fdb75dcd8aa9394e479b91">rb_enc_islower</a>(*name, enc)) ||
<a name="l09393"></a>09393         (len &lt; <a class="code" href="../../d3/d15/name2ctype_8h.html#aec7b4994021c554c1761ea31d016b680">MAX_WORD_LENGTH</a> &amp;&amp; <a class="code" href="../../d3/deb/lex_8c.html#ac4a38142b075a785d0673e75886531d1">rb_reserved_word</a>(s, (<span class="keywordtype">int</span>)len)) ||
<a name="l09394"></a>09394         !<a class="code" href="../../d5/d11/ripper_8c.html#ad088ff3cfa1d9b4d9ae5c9db9e05bba4">rb_enc_symname2_p</a>(s, len, enc)) {
<a name="l09395"></a>09395         <span class="keywordflow">return</span> <a class="code" href="../../dd/d24/st_8h.html#a0c6a172fd99de7928916e65034ed8b1fac99fc55c7f355bf9071739a4bc2ea139">ST_CONTINUE</a>;
<a name="l09396"></a>09396     }
<a name="l09397"></a>09397     var = <a class="code" href="../../d5/d11/ripper_8c.html#a7099e79ac3feb1a87550d4a93eebdc99">rb_intern3</a>(s, len, enc);
<a name="l09398"></a>09398     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#ab529a12b82d39987d521ab232bd6a6ec">dvar_defined</a>(var) || <a class="code" href="../../d5/d11/ripper_8c.html#a6e7b58aa0005e28573b05e2ea1d3b3bf">local_id</a>(var)) {
<a name="l09399"></a>09399         <a class="code" href="../../d5/d11/ripper_8c.html#aca369e6f278a2656e996a822270e034c">rb_warningS</a>(<span class="stringliteral">&quot;named capture conflicts a local variable - %s&quot;</span>,
<a name="l09400"></a>09400                     <a class="code" href="../../d5/d11/ripper_8c.html#a877bc58c495643fcf49dc64c44631e72">rb_id2name</a>(var));
<a name="l09401"></a>09401     }
<a name="l09402"></a>09402     arg-&gt;<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#ae9cbb835e73cb72a31b25a3244a9c0a9">succ_block</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>(arg-&gt;<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#ae9cbb835e73cb72a31b25a3244a9c0a9">succ_block</a>,
<a name="l09403"></a>09403         <a class="code" href="../../d7/dc0/parse_8y.html#a6ad6bd94979e7cb3c497c20bcf5fbd86">newline_node</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a24425bcc46577a37c70057c22fe05b6f">node_assign</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a5cb1df5a7a381c93bd1b53c64194c804">assignable</a>(var,0),
<a name="l09404"></a>09404             <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(
<a name="l09405"></a>09405               <a class="code" href="../../d5/d11/ripper_8c.html#a8128fe58f108349b4cb7c1a208cb874b">gettable</a>(<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;$~&quot;</span>)),
<a name="l09406"></a>09406               <a class="code" href="../../df/db9/id_8h.html#a08dd4fbd61c5fde369edd59783f753b3a700fe924530f27c93c81ba548682f680">idAREF</a>,
<a name="l09407"></a>09407               <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a0b35b94b9b2bf20d34efc1616be83916">NEW_LIT</a>(<a class="code" href="../../dc/d0c/cparse_8c.html#a48bfb6519a45249fb2ec0193ea3b6e1c">ID2SYM</a>(var))))
<a name="l09408"></a>09408             )));
<a name="l09409"></a>09409     arg-&gt;<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#adac0de0779ffe0be4c7c3fb8f079bb87">fail_block</a> = <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>(arg-&gt;<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#adac0de0779ffe0be4c7c3fb8f079bb87">fail_block</a>,
<a name="l09410"></a>09410         <a class="code" href="../../d7/dc0/parse_8y.html#a6ad6bd94979e7cb3c497c20bcf5fbd86">newline_node</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a24425bcc46577a37c70057c22fe05b6f">node_assign</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a5cb1df5a7a381c93bd1b53c64194c804">assignable</a>(var,0), <a class="code" href="../../d3/d09/ripper_8y.html#a0b35b94b9b2bf20d34efc1616be83916">NEW_LIT</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>))));
<a name="l09411"></a>09411     <span class="keywordflow">return</span> <a class="code" href="../../dd/d24/st_8h.html#a0c6a172fd99de7928916e65034ed8b1fac99fc55c7f355bf9071739a4bc2ea139">ST_CONTINUE</a>;
<a name="l09412"></a>09412 }
<a name="l09413"></a>09413 
<a name="l09414"></a>09414 <span class="keyword">static</span> NODE *
<a name="l09415"></a>09415 <a class="code" href="../../d7/dc0/parse_8y.html#a817a9ed63ee7f7d4dd67cac3b14dd600">reg_named_capture_assign_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>* parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d3/d09/ripper_8y.html#a91a8792a60d26aa3a547451afe30e002">regexp</a>, NODE *<a class="code" href="../../dd/d9f/date__parse_8c.html#aafe6a0803e756e59e5af70fdb2dcc912">match</a>)
<a name="l09416"></a>09416 {
<a name="l09417"></a>09417     <a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html">reg_named_capture_assign_t</a> arg;
<a name="l09418"></a>09418 
<a name="l09419"></a>09419     arg.<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#ae3238c02724d27e39b50c417e0e4fac3">parser</a> = parser;
<a name="l09420"></a>09420     arg.<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#ac9b175818938e67fe0943919057faa28">enc</a> = <a class="code" href="../../d5/db5/encoding_8c.html#ac21ed764f3b39453b6a848dd64a19585">rb_enc_get</a>(regexp);
<a name="l09421"></a>09421     arg.<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#ae9cbb835e73cb72a31b25a3244a9c0a9">succ_block</a> = 0;
<a name="l09422"></a>09422     arg.<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#adac0de0779ffe0be4c7c3fb8f079bb87">fail_block</a> = 0;
<a name="l09423"></a>09423     arg.<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#a40afc0b1f4310c603b144ae954c05d21">num</a> = 0;
<a name="l09424"></a>09424     <a class="code" href="../../d6/dda/regparse_8c.html#a0d72e0c285f5332420495848d355b173">onig_foreach_name</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a062a8130d6bba9a9ccde0ee143db5afd">RREGEXP</a>(regexp)-&gt;ptr, <a class="code" href="../../d7/dc0/parse_8y.html#a483808c5557dc75aecd88bc02331f285">reg_named_capture_assign_iter</a>, (<span class="keywordtype">void</span>*)&amp;arg);
<a name="l09425"></a>09425 
<a name="l09426"></a>09426     <span class="keywordflow">if</span> (arg.<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#a40afc0b1f4310c603b144ae954c05d21">num</a> == 0)
<a name="l09427"></a>09427         <span class="keywordflow">return</span> match;
<a name="l09428"></a>09428 
<a name="l09429"></a>09429     <span class="keywordflow">return</span>
<a name="l09430"></a>09430         <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>(
<a name="l09431"></a>09431             <a class="code" href="../../d7/dc0/parse_8y.html#a6ad6bd94979e7cb3c497c20bcf5fbd86">newline_node</a>(match),
<a name="l09432"></a>09432             <a class="code" href="../../d3/d09/ripper_8y.html#a0e9ba36e1c5584b64a0bcfa5b66fcd8e">NEW_IF</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a8128fe58f108349b4cb7c1a208cb874b">gettable</a>(<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;$~&quot;</span>)),
<a name="l09433"></a>09433                 <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>(
<a name="l09434"></a>09434                     <a class="code" href="../../d7/dc0/parse_8y.html#a6ad6bd94979e7cb3c497c20bcf5fbd86">newline_node</a>(arg.<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#ae9cbb835e73cb72a31b25a3244a9c0a9">succ_block</a>),
<a name="l09435"></a>09435                     <a class="code" href="../../d7/dc0/parse_8y.html#a6ad6bd94979e7cb3c497c20bcf5fbd86">newline_node</a>(
<a name="l09436"></a>09436                         <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(
<a name="l09437"></a>09437                           <a class="code" href="../../d5/d11/ripper_8c.html#a8128fe58f108349b4cb7c1a208cb874b">gettable</a>(<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;$~&quot;</span>)),
<a name="l09438"></a>09438                           <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;begin&quot;</span>),
<a name="l09439"></a>09439                           <a class="code" href="../../d3/d09/ripper_8y.html#a8aa0b92b54882fc0fadc7e1b76c892de">NEW_LIST</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a0b35b94b9b2bf20d34efc1616be83916">NEW_LIT</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#ac55fae7f748afd3fc2533d0d7d06cf5a">INT2FIX</a>(0)))))),
<a name="l09440"></a>09440                 <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>(
<a name="l09441"></a>09441                     <a class="code" href="../../d7/dc0/parse_8y.html#a6ad6bd94979e7cb3c497c20bcf5fbd86">newline_node</a>(arg.<a class="code" href="../../dc/d2e/structreg__named__capture__assign__t.html#adac0de0779ffe0be4c7c3fb8f079bb87">fail_block</a>),
<a name="l09442"></a>09442                     <a class="code" href="../../d7/dc0/parse_8y.html#a6ad6bd94979e7cb3c497c20bcf5fbd86">newline_node</a>(
<a name="l09443"></a>09443                         <a class="code" href="../../d3/d09/ripper_8y.html#a0b35b94b9b2bf20d34efc1616be83916">NEW_LIT</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>)))));
<a name="l09444"></a>09444 }
<a name="l09445"></a>09445 
<a name="l09446"></a>09446 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l09447"></a>09447 <a class="code" href="../../d7/dc0/parse_8y.html#a8ff489427b14f3edc12eec1fbf543b25">reg_compile_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>* parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str, <span class="keywordtype">int</span> options)
<a name="l09448"></a>09448 {
<a name="l09449"></a>09449     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> re;
<a name="l09450"></a>09450     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> err;
<a name="l09451"></a>09451 
<a name="l09452"></a>09452     <a class="code" href="../../d5/d11/ripper_8c.html#a5fc2d1f4685a1446132227f925d3b379">reg_fragment_setenc</a>(str, options);
<a name="l09453"></a>09453     err = <a class="code" href="../../d5/d9d/tcltklib_8c.html#a89cd18829599d193ee75073219cc42c4">rb_errinfo</a>();
<a name="l09454"></a>09454     re = <a class="code" href="../../dc/d26/re_8c.html#ace81b3265857e9c519faaa7efdfff5de">rb_reg_compile</a>(str, options &amp; RE_OPTION_MASK, <a class="code" href="../../d2/d47/compile_8c.html#aca52b28c4504720708a4fab8675dc407">ruby_sourcefile</a>, <a class="code" href="../../d5/d11/ripper_8c.html#ac8adcf383e167e479e17f0ceb7e99723">ruby_sourceline</a>);
<a name="l09455"></a>09455     <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(re)) {
<a name="l09456"></a>09456         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> mesg = <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;mesg&quot;</span>);
<a name="l09457"></a>09457         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> m = <a class="code" href="../../db/d2e/intern_8h.html#ab8a448eec4dc767e47f5f9bd35974734">rb_attr_get</a>(<a class="code" href="../../d5/d9d/tcltklib_8c.html#a89cd18829599d193ee75073219cc42c4">rb_errinfo</a>(), mesg);
<a name="l09458"></a>09458         <a class="code" href="../../d3/d57/eval_8c.html#a4484d744216a0afdf26dce14f1190973">rb_set_errinfo</a>(err);
<a name="l09459"></a>09459         <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(err)) {
<a name="l09460"></a>09460             <a class="code" href="../../db/d2e/intern_8h.html#ab592dcd9e193dea76fb0ff58b5d907e4">rb_str_append</a>(<a class="code" href="../../db/d2e/intern_8h.html#a4e3e3ccf959b5db6c125a68e1e1db0a3">rb_str_cat</a>(<a class="code" href="../../db/d2e/intern_8h.html#ab8a448eec4dc767e47f5f9bd35974734">rb_attr_get</a>(err, mesg), <span class="stringliteral">&quot;\n&quot;</span>, 1), m);
<a name="l09461"></a>09461         }
<a name="l09462"></a>09462         <span class="keywordflow">else</span> {
<a name="l09463"></a>09463             <a class="code" href="../../d5/d11/ripper_8c.html#afc0efe2105b7dc0284213e8e4c346ee8">compile_error</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a3b072b9b093fc1e30bfd03bcee3fc2d0">PARSER_ARG</a> <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d8/df4/generator_8h.html#aa0c7097c0d82c8372072fbab5a604e39">RSTRING_PTR</a>(m));
<a name="l09464"></a>09464         }
<a name="l09465"></a>09465         <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>;
<a name="l09466"></a>09466     }
<a name="l09467"></a>09467     <span class="keywordflow">return</span> re;
<a name="l09468"></a>09468 }
<a name="l09469"></a>09469 
<a name="l09470"></a>09470 <span class="keywordtype">void</span>
<a name="l09471"></a>09471 <a class="code" href="../../d5/d11/ripper_8c.html#a7285d41caf052f74c447b185ae226d8b">rb_gc_mark_parser</a>(<span class="keywordtype">void</span>)
<a name="l09472"></a>09472 {
<a name="l09473"></a>09473 }
<a name="l09474"></a>09474 
<a name="l09475"></a>09475 NODE*
<a name="l09476"></a>09476 <a class="code" href="../../d5/d11/ripper_8c.html#aafe1e960616320da34a446631cf0d679">rb_parser_append_print</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> vparser, NODE *node)
<a name="l09477"></a>09477 {
<a name="l09478"></a>09478     NODE *prelude = 0;
<a name="l09479"></a>09479     NODE *scope = node;
<a name="l09480"></a>09480     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser;
<a name="l09481"></a>09481 
<a name="l09482"></a>09482     <span class="keywordflow">if</span> (!node) <span class="keywordflow">return</span> node;
<a name="l09483"></a>09483 
<a name="l09484"></a>09484     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8dce6624396c492cdd1af3a4c5871556">TypedData_Get_Struct</a>(vparser, <span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, &amp;parser_data_type, parser);
<a name="l09485"></a>09485 
<a name="l09486"></a>09486     node = node-&gt;nd_body;
<a name="l09487"></a>09487 
<a name="l09488"></a>09488     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node) == NODE_PRELUDE) {
<a name="l09489"></a>09489         prelude = node;
<a name="l09490"></a>09490         node = node-&gt;nd_body;
<a name="l09491"></a>09491     }
<a name="l09492"></a>09492 
<a name="l09493"></a>09493     node = <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>(node,
<a name="l09494"></a>09494                         <a class="code" href="../../d3/d09/ripper_8y.html#ab2c9a6c46cf2371d4268127604a2997c">NEW_FCALL</a>(<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;print&quot;</span>),
<a name="l09495"></a>09495                                   <a class="code" href="../../d3/d09/ripper_8y.html#ad065a6b103ffa9588fc62c4b974fa1ed">NEW_ARRAY</a>(<a class="code" href="../../d3/d09/ripper_8y.html#acb0de9b56aa284db22328a4a53f23f32">NEW_GVAR</a>(<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;$_&quot;</span>)))));
<a name="l09496"></a>09496     <span class="keywordflow">if</span> (prelude) {
<a name="l09497"></a>09497         prelude-&gt;nd_body = node;
<a name="l09498"></a>09498         scope-&gt;nd_body = prelude;
<a name="l09499"></a>09499     }
<a name="l09500"></a>09500     <span class="keywordflow">else</span> {
<a name="l09501"></a>09501         scope-&gt;nd_body = node;
<a name="l09502"></a>09502     }
<a name="l09503"></a>09503 
<a name="l09504"></a>09504     <span class="keywordflow">return</span> scope;
<a name="l09505"></a>09505 }
<a name="l09506"></a>09506 
<a name="l09507"></a>09507 NODE *
<a name="l09508"></a>09508 <a class="code" href="../../d5/d11/ripper_8c.html#a6be0e8687051d30b196e41d24dab0a07">rb_parser_while_loop</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> vparser, NODE *node, <span class="keywordtype">int</span> chop, <span class="keywordtype">int</span> split)
<a name="l09509"></a>09509 {
<a name="l09510"></a>09510     NODE *prelude = 0;
<a name="l09511"></a>09511     NODE *scope = node;
<a name="l09512"></a>09512     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser;
<a name="l09513"></a>09513 
<a name="l09514"></a>09514     <span class="keywordflow">if</span> (!node) <span class="keywordflow">return</span> node;
<a name="l09515"></a>09515 
<a name="l09516"></a>09516     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8dce6624396c492cdd1af3a4c5871556">TypedData_Get_Struct</a>(vparser, <span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, &amp;parser_data_type, parser);
<a name="l09517"></a>09517 
<a name="l09518"></a>09518     node = node-&gt;nd_body;
<a name="l09519"></a>09519 
<a name="l09520"></a>09520     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(node) == NODE_PRELUDE) {
<a name="l09521"></a>09521         prelude = node;
<a name="l09522"></a>09522         node = node-&gt;nd_body;
<a name="l09523"></a>09523     }
<a name="l09524"></a>09524     <span class="keywordflow">if</span> (split) {
<a name="l09525"></a>09525         node = <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>(<a class="code" href="../../d3/d09/ripper_8y.html#abe238f8371c0060d49b8f2cb3e6e7d6a">NEW_GASGN</a>(<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;$F&quot;</span>),
<a name="l09526"></a>09526                                       <a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(<a class="code" href="../../d3/d09/ripper_8y.html#acb0de9b56aa284db22328a4a53f23f32">NEW_GVAR</a>(<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;$_&quot;</span>)),
<a name="l09527"></a>09527                                                <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;split&quot;</span>), 0)),
<a name="l09528"></a>09528                             node);
<a name="l09529"></a>09529     }
<a name="l09530"></a>09530     <span class="keywordflow">if</span> (chop) {
<a name="l09531"></a>09531         node = <a class="code" href="../../d5/d11/ripper_8c.html#a77faa7e42725ac9e93032b3914a7cf0e">block_append</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a1de81a35f996179a8b0c6942e78369ca">NEW_CALL</a>(<a class="code" href="../../d3/d09/ripper_8y.html#acb0de9b56aa284db22328a4a53f23f32">NEW_GVAR</a>(<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;$_&quot;</span>)),
<a name="l09532"></a>09532                                      <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;chop!&quot;</span>), 0), node);
<a name="l09533"></a>09533     }
<a name="l09534"></a>09534 
<a name="l09535"></a>09535     node = <a class="code" href="../../d3/d09/ripper_8y.html#a5107774051ae1ac529bc5a484221617a">NEW_OPT_N</a>(node);
<a name="l09536"></a>09536 
<a name="l09537"></a>09537     <span class="keywordflow">if</span> (prelude) {
<a name="l09538"></a>09538         prelude-&gt;nd_body = node;
<a name="l09539"></a>09539         scope-&gt;nd_body = prelude;
<a name="l09540"></a>09540     }
<a name="l09541"></a>09541     <span class="keywordflow">else</span> {
<a name="l09542"></a>09542         scope-&gt;nd_body = node;
<a name="l09543"></a>09543     }
<a name="l09544"></a>09544 
<a name="l09545"></a>09545     <span class="keywordflow">return</span> scope;
<a name="l09546"></a>09546 }
<a name="l09547"></a>09547 
<a name="l09548"></a>09548 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>{
<a name="l09549"></a>09549     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> token;
<a name="l09550"></a>09550     <span class="keyword">const</span> <span class="keywordtype">char</span> *name;
<a name="l09551"></a>09551 } <a class="code" href="../../d7/dc0/parse_8y.html#a47133fc92d2871c0e6b899b7e29c2f22">op_tbl</a>[] = {
<a name="l09552"></a>09552     {<a class="code" href="../../d5/d11/ripper_8c.html#ad6d247d3b76eb71841a20a06b7248d5c">tDOT2</a>,     <span class="stringliteral">&quot;..&quot;</span>},
<a name="l09553"></a>09553     {<a class="code" href="../../d5/d11/ripper_8c.html#a3044adcc37f3f3a58ee0d58bc0b38b2f">tDOT3</a>,     <span class="stringliteral">&quot;...&quot;</span>},
<a name="l09554"></a>09554     {<span class="charliteral">&apos;+&apos;</span>,       <span class="stringliteral">&quot;+(binary)&quot;</span>},
<a name="l09555"></a>09555     {<span class="charliteral">&apos;-&apos;</span>,       <span class="stringliteral">&quot;-(binary)&quot;</span>},
<a name="l09556"></a>09556     {<a class="code" href="../../d5/d11/ripper_8c.html#a3637bfb7d8b8ae77f0dccb4841c70673">tPOW</a>,      <span class="stringliteral">&quot;**&quot;</span>},
<a name="l09557"></a>09557     {<a class="code" href="../../d5/d11/ripper_8c.html#a30c0584a6e12ebd260060a9b77159e90">tUPLUS</a>,    <span class="stringliteral">&quot;+@&quot;</span>},
<a name="l09558"></a>09558     {<a class="code" href="../../d5/d11/ripper_8c.html#a2990cd3acbac56afa45019a045ddcd9e">tUMINUS</a>,   <span class="stringliteral">&quot;-@&quot;</span>},
<a name="l09559"></a>09559     {<a class="code" href="../../d5/d11/ripper_8c.html#af5d97f1c301f97e35c69e5e21d698c8b">tCMP</a>,      <span class="stringliteral">&quot;&lt;=&gt;&quot;</span>},
<a name="l09560"></a>09560     {<a class="code" href="../../d5/d11/ripper_8c.html#a285fd90a21df46bc9781328e0ac5d22e">tGEQ</a>,      <span class="stringliteral">&quot;&gt;=&quot;</span>},
<a name="l09561"></a>09561     {<a class="code" href="../../d5/d11/ripper_8c.html#a4c271a73151d715c58bf15c8607054e0">tLEQ</a>,      <span class="stringliteral">&quot;&lt;=&quot;</span>},
<a name="l09562"></a>09562     {<a class="code" href="../../d5/d11/ripper_8c.html#a6ea996f3ab75bd127d6326b180214c6f">tEQ</a>,       <span class="stringliteral">&quot;==&quot;</span>},
<a name="l09563"></a>09563     {<a class="code" href="../../d5/d11/ripper_8c.html#ac6db743a4f2e6f90976870022d8914a2">tEQQ</a>,      <span class="stringliteral">&quot;===&quot;</span>},
<a name="l09564"></a>09564     {<a class="code" href="../../d5/d11/ripper_8c.html#aa8f0fa309e4e39cda30f2116fb979320">tNEQ</a>,      <span class="stringliteral">&quot;!=&quot;</span>},
<a name="l09565"></a>09565     {<a class="code" href="../../d5/d11/ripper_8c.html#a6fba3b7a35b6a4abc5692d7bc6f7cc51">tMATCH</a>,    <span class="stringliteral">&quot;=~&quot;</span>},
<a name="l09566"></a>09566     {<a class="code" href="../../d5/d11/ripper_8c.html#a18a357e5edec5f1ff68c4bc4fc5d0c84">tNMATCH</a>,   <span class="stringliteral">&quot;!~&quot;</span>},
<a name="l09567"></a>09567     {<a class="code" href="../../d5/d11/ripper_8c.html#ab052bc5e13a5bbe98406c4aec5a4deac">tAREF</a>,     <span class="stringliteral">&quot;[]&quot;</span>},
<a name="l09568"></a>09568     {<a class="code" href="../../d5/d11/ripper_8c.html#ad1b5f00e34caa7051eef00a36b40d232">tASET</a>,     <span class="stringliteral">&quot;[]=&quot;</span>},
<a name="l09569"></a>09569     {<a class="code" href="../../d5/d11/ripper_8c.html#aabd668249ab17583bb8ba7b0a15dc88a">tLSHFT</a>,    <span class="stringliteral">&quot;&lt;&lt;&quot;</span>},
<a name="l09570"></a>09570     {<a class="code" href="../../d5/d11/ripper_8c.html#a5d34fc3d8e54b552366d4e8941852610">tRSHFT</a>,    <span class="stringliteral">&quot;&gt;&gt;&quot;</span>},
<a name="l09571"></a>09571     {<a class="code" href="../../d5/d11/ripper_8c.html#a23804289d471c293623fb64b8ffdf739">tCOLON2</a>,   <span class="stringliteral">&quot;::&quot;</span>},
<a name="l09572"></a>09572 };
<a name="l09573"></a>09573 
<a name="l09574"></a>09574 <span class="preprocessor">#define op_tbl_count numberof(op_tbl)</span>
<a name="l09575"></a>09575 <span class="preprocessor"></span>
<a name="l09576"></a>09576 <span class="preprocessor">#ifndef ENABLE_SELECTOR_NAMESPACE</span>
<a name="l09577"></a>09577 <span class="preprocessor"></span><span class="preprocessor">#define ENABLE_SELECTOR_NAMESPACE 0</span>
<a name="l09578"></a>09578 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l09579"></a>09579 <span class="preprocessor"></span>
<a name="l09580"></a>09580 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d7/de3/structsymbols.html">symbols</a> {
<a name="l09581"></a>09581     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <a class="code" href="../../d7/de3/structsymbols.html#ab614b28e06b23da446dc09887fb705b9">last_id</a>;
<a name="l09582"></a>09582     <a class="code" href="../../d0/ddd/structst__table.html">st_table</a> *<a class="code" href="../../d7/de3/structsymbols.html#a52573724c4b031ec2a02bbdf3ea89f6d">sym_id</a>;
<a name="l09583"></a>09583     <a class="code" href="../../d0/ddd/structst__table.html">st_table</a> *<a class="code" href="../../d7/de3/structsymbols.html#ac662d80ccf35d0338f6a8df3ec3b0a2d">id_str</a>;
<a name="l09584"></a>09584 <span class="preprocessor">#if ENABLE_SELECTOR_NAMESPACE</span>
<a name="l09585"></a>09585 <span class="preprocessor"></span>    <a class="code" href="../../d0/ddd/structst__table.html">st_table</a> *ivar2_id;
<a name="l09586"></a>09586     <a class="code" href="../../d0/ddd/structst__table.html">st_table</a> *id_ivar2;
<a name="l09587"></a>09587 <span class="preprocessor">#endif</span>
<a name="l09588"></a>09588 <span class="preprocessor"></span>    <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d7/de3/structsymbols.html#ac4a37d6760843c2a91ce2b920cbf6031">op_sym</a>[<a class="code" href="../../d5/d11/ripper_8c.html#aa04217e94ed963efd9ca7c22d36916d9">tLAST_TOKEN</a>];
<a name="l09589"></a>09589 } <a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a> = {<a class="code" href="../../df/db9/id_8h.html#a08dd4fbd61c5fde369edd59783f753b3aef5e6ebecd4d666f9eef041ec4ef5ff2">tLAST_ID</a>};
<a name="l09590"></a>09590 
<a name="l09591"></a>09591 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d6/d34/structst__hash__type.html">st_hash_type</a> <a class="code" href="../../d7/dc0/parse_8y.html#a812f626fd6fb71bf64609d2fb78bde8f">symhash</a> = {
<a name="l09592"></a>09592     <a class="code" href="../../db/d2e/intern_8h.html#abff17b0baeb7275f49e3bd417aec866f">rb_str_hash_cmp</a>,
<a name="l09593"></a>09593     <a class="code" href="../../db/d2e/intern_8h.html#ae3a4b38656e45011a94975206acf7650">rb_str_hash</a>,
<a name="l09594"></a>09594 };
<a name="l09595"></a>09595 
<a name="l09596"></a>09596 <span class="preprocessor">#if ENABLE_SELECTOR_NAMESPACE</span>
<a name="l09597"></a>09597 <span class="preprocessor"></span><span class="keyword">struct </span>ivar2_key {
<a name="l09598"></a>09598     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> id;
<a name="l09599"></a>09599     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> klass;
<a name="l09600"></a>09600 };
<a name="l09601"></a>09601 
<a name="l09602"></a>09602 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l09603"></a>09603 ivar2_cmp(<span class="keyword">struct</span> ivar2_key *key1, <span class="keyword">struct</span> ivar2_key *key2)
<a name="l09604"></a>09604 {
<a name="l09605"></a>09605     <span class="keywordflow">if</span> (key1-&gt;id == key2-&gt;id &amp;&amp; key1-&gt;klass == key2-&gt;klass) {
<a name="l09606"></a>09606         <span class="keywordflow">return</span> 0;
<a name="l09607"></a>09607     }
<a name="l09608"></a>09608     <span class="keywordflow">return</span> 1;
<a name="l09609"></a>09609 }
<a name="l09610"></a>09610 
<a name="l09611"></a>09611 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l09612"></a>09612 ivar2_hash(<span class="keyword">struct</span> ivar2_key *<a class="code" href="../../dc/de5/random_8c.html#a742229490b6759a90ece7ba82ba129d5">key</a>)
<a name="l09613"></a>09613 {
<a name="l09614"></a>09614     <span class="keywordflow">return</span> (key-&gt;id &lt;&lt; 8) ^ (key-&gt;klass &gt;&gt; 2);
<a name="l09615"></a>09615 }
<a name="l09616"></a>09616 
<a name="l09617"></a>09617 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d6/d34/structst__hash__type.html">st_hash_type</a> ivar2_hash_type = {
<a name="l09618"></a>09618     ivar2_cmp,
<a name="l09619"></a>09619     ivar2_hash,
<a name="l09620"></a>09620 };
<a name="l09621"></a>09621 <span class="preprocessor">#endif</span>
<a name="l09622"></a>09622 <span class="preprocessor"></span>
<a name="l09623"></a>09623 <span class="keywordtype">void</span>
<a name="l09624"></a>09624 <a class="code" href="../../d5/d11/ripper_8c.html#a23f64634e5ddba50b1c87524784f7a77">Init_sym</a>(<span class="keywordtype">void</span>)
<a name="l09625"></a>09625 {
<a name="l09626"></a>09626     <a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#a52573724c4b031ec2a02bbdf3ea89f6d">sym_id</a> = <a class="code" href="../../dd/d24/st_8h.html#a760f41c431b8dfcac5999005e2b07ead">st_init_table_with_size</a>(&amp;symhash, 1000);
<a name="l09627"></a>09627     <a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#ac662d80ccf35d0338f6a8df3ec3b0a2d">id_str</a> = <a class="code" href="../../dd/d24/st_8h.html#aa1e7ba5d3e3a2e49801c2591a5b0601d">st_init_numtable_with_size</a>(1000);
<a name="l09628"></a>09628 <span class="preprocessor">#if ENABLE_SELECTOR_NAMESPACE</span>
<a name="l09629"></a>09629 <span class="preprocessor"></span>    <a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.ivar2_id = <a class="code" href="../../dd/d24/st_8h.html#a760f41c431b8dfcac5999005e2b07ead">st_init_table_with_size</a>(&amp;ivar2_hash_type, 1000);
<a name="l09630"></a>09630     <a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.id_ivar2 = <a class="code" href="../../dd/d24/st_8h.html#aa1e7ba5d3e3a2e49801c2591a5b0601d">st_init_numtable_with_size</a>(1000);
<a name="l09631"></a>09631 <span class="preprocessor">#endif</span>
<a name="l09632"></a>09632 <span class="preprocessor"></span>
<a name="l09633"></a>09633     <a class="code" href="../../d8/dd1/id_8c.html#a205d9740f302af76779164a5a0df27f4">Init_id</a>();
<a name="l09634"></a>09634 }
<a name="l09635"></a>09635 
<a name="l09636"></a>09636 <span class="keywordtype">void</span>
<a name="l09637"></a>09637 <a class="code" href="../../d5/d11/ripper_8c.html#af6c57b43ffd3a787abbb1c96ef23b582">rb_gc_mark_symbols</a>(<span class="keywordtype">void</span>)
<a name="l09638"></a>09638 {
<a name="l09639"></a>09639     <a class="code" href="../../d8/d16/gc_8c.html#a6b9a51387748f1a94f4d77092163aa3a">rb_mark_tbl</a>(<a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#ac662d80ccf35d0338f6a8df3ec3b0a2d">id_str</a>);
<a name="l09640"></a>09640     <a class="code" href="../../d8/d16/gc_8c.html#a90e176b7e9d24053977f64a611c1d8bb">rb_gc_mark_locations</a>(<a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#ac4a37d6760843c2a91ce2b920cbf6031">op_sym</a>,
<a name="l09641"></a>09641                          <a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#ac4a37d6760843c2a91ce2b920cbf6031">op_sym</a> + <a class="code" href="../../d5/d11/ripper_8c.html#aa04217e94ed963efd9ca7c22d36916d9">tLAST_TOKEN</a>);
<a name="l09642"></a>09642 }
<a name="l09643"></a>09643 <span class="preprocessor">#endif </span><span class="comment">/* !RIPPER */</span>
<a name="l09644"></a>09644 
<a name="l09645"></a>09645 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>
<a name="l09646"></a>09646 <a class="code" href="../../d7/dc0/parse_8y.html#aa08eec83fc6f4c20259f8ec2ef1c4bb6">internal_id_gen</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l09647"></a>09647 {
<a name="l09648"></a>09648     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span> = (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>)<a class="code" href="../../d5/d11/ripper_8c.html#ae4e8077b70dff93cf67cfcf5348620e3">vtable_size</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;args) + (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>)<a class="code" href="../../d5/d11/ripper_8c.html#ae4e8077b70dff93cf67cfcf5348620e3">vtable_size</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a130b83f0b0248fe652ea11e6954a5bda">lvtbl</a>-&gt;vars);
<a name="l09649"></a>09649     <span class="keywordtype">id</span> += ((<a class="code" href="../../d5/d11/ripper_8c.html#aa04217e94ed963efd9ca7c22d36916d9">tLAST_TOKEN</a> - <a class="code" href="../../d3/d09/ripper_8y.html#af820f585405ef6bc685e351c900de149">ID_INTERNAL</a>) &gt;&gt; ID_SCOPE_SHIFT) + 1;
<a name="l09650"></a>09650     <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#af820f585405ef6bc685e351c900de149">ID_INTERNAL</a> | (<span class="keywordtype">id</span> &lt;&lt; <a class="code" href="../../d3/d09/ripper_8y.html#a95376a2b85654ab1030f2cecb34d2ac1">ID_SCOPE_SHIFT</a>);
<a name="l09651"></a>09651 }
<a name="l09652"></a>09652 
<a name="l09653"></a>09653 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l09654"></a>09654 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l09655"></a>09655 <a class="code" href="../../d7/dc0/parse_8y.html#a4935b802f3256a1e7df916f6f77fdb84">is_special_global_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *m, <span class="keyword">const</span> <span class="keywordtype">char</span> *e, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc)
<a name="l09656"></a>09656 {
<a name="l09657"></a>09657     <span class="keywordtype">int</span> mb = 0;
<a name="l09658"></a>09658 
<a name="l09659"></a>09659     <span class="keywordflow">if</span> (m &gt;= e) <span class="keywordflow">return</span> 0;
<a name="l09660"></a>09660     <span class="keywordflow">switch</span> (*m) {
<a name="l09661"></a>09661       <span class="keywordflow">case</span> <span class="charliteral">&apos;~&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;*&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;$&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;?&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;!&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;@&apos;</span>:
<a name="l09662"></a>09662       <span class="keywordflow">case</span> <span class="charliteral">&apos;/&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;\\&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;;&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;,&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;.&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;=&apos;</span>:
<a name="l09663"></a>09663       <span class="keywordflow">case</span> <span class="charliteral">&apos;:&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;&lt;&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;&gt;&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;\&quot;&apos;</span>:
<a name="l09664"></a>09664       <span class="keywordflow">case</span> <span class="charliteral">&apos;&amp;&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;`&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;\&apos;&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;+&apos;</span>:
<a name="l09665"></a>09665       <span class="keywordflow">case</span> <span class="charliteral">&apos;0&apos;</span>:
<a name="l09666"></a>09666         ++m;
<a name="l09667"></a>09667         <span class="keywordflow">break</span>;
<a name="l09668"></a>09668       <span class="keywordflow">case</span> <span class="charliteral">&apos;-&apos;</span>:
<a name="l09669"></a>09669         ++m;
<a name="l09670"></a>09670         <span class="keywordflow">if</span> (m &lt; e &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#a27923e7c90c9f7bed49845772092c04d">is_identchar</a>(m, e, enc)) {
<a name="l09671"></a>09671             <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#af96ff81718c3c27b342b5958fac6cb7e">ISASCII</a>(*m)) mb = 1;
<a name="l09672"></a>09672             m += <a class="code" href="../../d5/db5/encoding_8c.html#aa91c0fa3dfdfe3c55fcaa6029c35bbb8">rb_enc_mbclen</a>(m, e, enc);
<a name="l09673"></a>09673         }
<a name="l09674"></a>09674         <span class="keywordflow">break</span>;
<a name="l09675"></a>09675       <span class="keywordflow">default</span>:
<a name="l09676"></a>09676         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/de3/encoding_8h.html#a96918b340068df7137fd3d8a59cc7205">rb_enc_isdigit</a>(*m, enc)) <span class="keywordflow">return</span> 0;
<a name="l09677"></a>09677         <span class="keywordflow">do</span> {
<a name="l09678"></a>09678             <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#af96ff81718c3c27b342b5958fac6cb7e">ISASCII</a>(*m)) mb = 1;
<a name="l09679"></a>09679             ++m;
<a name="l09680"></a>09680         } <span class="keywordflow">while</span> (m &lt; e &amp;&amp; <a class="code" href="../../d5/de3/encoding_8h.html#a96918b340068df7137fd3d8a59cc7205">rb_enc_isdigit</a>(*m, enc));
<a name="l09681"></a>09681     }
<a name="l09682"></a>09682     <span class="keywordflow">return</span> m == e ? mb + 1 : 0;
<a name="l09683"></a>09683 }
<a name="l09684"></a>09684 
<a name="l09685"></a>09685 <span class="keywordtype">int</span>
<a name="l09686"></a>09686 <a class="code" href="../../d5/d11/ripper_8c.html#a4b1a61b1fa30e968fce6595775b068e3">rb_symname_p</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name)
<a name="l09687"></a>09687 {
<a name="l09688"></a>09688     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a376c00a06426d1d4e1bdb82f937a8784">rb_enc_symname_p</a>(name, <a class="code" href="../../d5/db5/encoding_8c.html#a767d777810f0d48add93857b52057262">rb_ascii8bit_encoding</a>());
<a name="l09689"></a>09689 }
<a name="l09690"></a>09690 
<a name="l09691"></a>09691 <span class="keywordtype">int</span>
<a name="l09692"></a>09692 <a class="code" href="../../d5/d11/ripper_8c.html#a376c00a06426d1d4e1bdb82f937a8784">rb_enc_symname_p</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc)
<a name="l09693"></a>09693 {
<a name="l09694"></a>09694     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ad088ff3cfa1d9b4d9ae5c9db9e05bba4">rb_enc_symname2_p</a>(name, <a class="code" href="../../d6/d7b/strchr_8c.html#a219836f542ce53545052bed5353820ca">strlen</a>(name), enc);
<a name="l09695"></a>09695 }
<a name="l09696"></a>09696 
<a name="l09697"></a>09697 <span class="keywordtype">int</span>
<a name="l09698"></a>09698 <a class="code" href="../../d5/d11/ripper_8c.html#ad088ff3cfa1d9b4d9ae5c9db9e05bba4">rb_enc_symname2_p</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">long</span> len, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc)
<a name="l09699"></a>09699 {
<a name="l09700"></a>09700     <span class="keyword">const</span> <span class="keywordtype">char</span> *m = name;
<a name="l09701"></a><a class="code" href="../../d7/dc0/parse_8y.html#a2123e15cd90b237d43cb43f9f3f17253">09701</a>     <span class="keyword">const</span> <span class="keywordtype">char</span> *e = m + len;
<a name="l09702"></a>09702     <span class="keywordtype">int</span> localid = <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l09703"></a>09703 
<a name="l09704"></a>09704     <span class="keywordflow">if</span> (!m || len &lt;= 0) <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l09705"></a>09705     <span class="keywordflow">switch</span> (*m) {
<a name="l09706"></a>09706       <span class="keywordflow">case</span> <span class="charliteral">&apos;\0&apos;</span>:
<a name="l09707"></a>09707         <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l09708"></a>09708 
<a name="l09709"></a>09709       <span class="keywordflow">case</span> <span class="charliteral">&apos;$&apos;</span>:
<a name="l09710"></a>09710         <span class="keywordflow">if</span> (<a class="code" href="../../d7/dc0/parse_8y.html#a4935b802f3256a1e7df916f6f77fdb84">is_special_global_name</a>(++m, e, enc)) <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l09711"></a>09711         <span class="keywordflow">goto</span> id;
<a name="l09712"></a>09712 
<a name="l09713"></a>09713       <span class="keywordflow">case</span> <span class="charliteral">&apos;@&apos;</span>:
<a name="l09714"></a>09714         <span class="keywordflow">if</span> (*++m == <span class="charliteral">&apos;@&apos;</span>) ++m;
<a name="l09715"></a>09715         <span class="keywordflow">goto</span> id;
<a name="l09716"></a>09716 
<a name="l09717"></a>09717       <span class="keywordflow">case</span> <span class="charliteral">&apos;&lt;&apos;</span>:
<a name="l09718"></a>09718         <span class="keywordflow">switch</span> (*++m) {
<a name="l09719"></a>09719           <span class="keywordflow">case</span> <span class="charliteral">&apos;&lt;&apos;</span>: ++m; <span class="keywordflow">break</span>;
<a name="l09720"></a>09720           <span class="keywordflow">case</span> <span class="charliteral">&apos;=&apos;</span>: <span class="keywordflow">if</span> (*++m == <span class="charliteral">&apos;&gt;&apos;</span>) ++m; <span class="keywordflow">break</span>;
<a name="l09721"></a>09721           <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;
<a name="l09722"></a>09722         }
<a name="l09723"></a>09723         <span class="keywordflow">break</span>;
<a name="l09724"></a>09724 
<a name="l09725"></a>09725       <span class="keywordflow">case</span> <span class="charliteral">&apos;&gt;&apos;</span>:
<a name="l09726"></a>09726         <span class="keywordflow">switch</span> (*++m) {
<a name="l09727"></a>09727           <span class="keywordflow">case</span> <span class="charliteral">&apos;&gt;&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;=&apos;</span>: ++m; <span class="keywordflow">break</span>;
<a name="l09728"></a><a class="code" href="../../d7/dc0/parse_8y.html#a1aa5bc58197c4b24634e776fa093137c">09728</a>         }
<a name="l09729"></a>09729         <span class="keywordflow">break</span>;
<a name="l09730"></a>09730 
<a name="l09731"></a>09731       <span class="keywordflow">case</span> <span class="charliteral">&apos;=&apos;</span>:
<a name="l09732"></a>09732         <span class="keywordflow">switch</span> (*++m) {
<a name="l09733"></a>09733           <span class="keywordflow">case</span> <span class="charliteral">&apos;~&apos;</span>: ++m; <span class="keywordflow">break</span>;
<a name="l09734"></a>09734           <span class="keywordflow">case</span> <span class="charliteral">&apos;=&apos;</span>: <span class="keywordflow">if</span> (*++m == <span class="charliteral">&apos;=&apos;</span>) ++m; <span class="keywordflow">break</span>;
<a name="l09735"></a>09735           <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l09736"></a><a class="code" href="../../d7/dc0/parse_8y.html#a36db4a781dd7cb9698ac6f1f233a6206">09736</a>         }
<a name="l09737"></a>09737         <span class="keywordflow">break</span>;
<a name="l09738"></a>09738 
<a name="l09739"></a>09739       <span class="keywordflow">case</span> <span class="charliteral">&apos;*&apos;</span>:
<a name="l09740"></a>09740         <span class="keywordflow">if</span> (*++m == <span class="charliteral">&apos;*&apos;</span>) ++m;
<a name="l09741"></a>09741         <span class="keywordflow">break</span>;
<a name="l09742"></a><a class="code" href="../../d7/dc0/parse_8y.html#a7dce59fe4eb3d1fcf860c422310cc088">09742</a> 
<a name="l09743"></a>09743       <span class="keywordflow">case</span> <span class="charliteral">&apos;+&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;-&apos;</span>:
<a name="l09744"></a>09744         <span class="keywordflow">if</span> (*++m == <span class="charliteral">&apos;@&apos;</span>) ++m;
<a name="l09745"></a>09745         <span class="keywordflow">break</span>;
<a name="l09746"></a>09746 
<a name="l09747"></a>09747       <span class="keywordflow">case</span> <span class="charliteral">&apos;|&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;^&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;&amp;&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;/&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;%&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;~&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;`&apos;</span>:
<a name="l09748"></a><a class="code" href="../../d7/dc0/parse_8y.html#a6ad6bd94979e7cb3c497c20bcf5fbd86">09748</a>         ++m;
<a name="l09749"></a>09749         <span class="keywordflow">break</span>;
<a name="l09750"></a>09750 
<a name="l09751"></a>09751       <span class="keywordflow">case</span> <span class="charliteral">&apos;[&apos;</span>:
<a name="l09752"></a>09752         <span class="keywordflow">if</span> (*++m != <span class="charliteral">&apos;]&apos;</span>) <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l09753"></a>09753         <span class="keywordflow">if</span> (*++m == <span class="charliteral">&apos;=&apos;</span>) ++m;
<a name="l09754"></a>09754         <span class="keywordflow">break</span>;
<a name="l09755"></a>09755 
<a name="l09756"></a>09756       <span class="keywordflow">case</span> <span class="charliteral">&apos;!&apos;</span>:
<a name="l09757"></a>09757         <span class="keywordflow">if</span> (len == 1) <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l09758"></a><a class="code" href="../../d7/dc0/parse_8y.html#ae21ccc4692e8a971970fabe29a410df2">09758</a>         <span class="keywordflow">switch</span> (*++m) {
<a name="l09759"></a>09759           <span class="keywordflow">case</span> <span class="charliteral">&apos;=&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;~&apos;</span>: ++m; <span class="keywordflow">break</span>;
<a name="l09760"></a>09760           <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l09761"></a>09761         }
<a name="l09762"></a>09762         <span class="keywordflow">break</span>;
<a name="l09763"></a>09763 
<a name="l09764"></a>09764       <span class="keywordflow">default</span>:
<a name="l09765"></a>09765         localid = !<a class="code" href="../../d5/de3/encoding_8h.html#a004214571fa83485ab3eb73690c694c4">rb_enc_isupper</a>(*m, enc);
<a name="l09766"></a>09766       <span class="keywordtype">id</span>:
<a name="l09767"></a><a class="code" href="../../d7/dc0/parse_8y.html#ae93738e4bc58c0529171b253b1e209b6">09767</a>         <span class="keywordflow">if</span> (m &gt;= e || (*m != <span class="charliteral">&apos;_&apos;</span> &amp;&amp; !<a class="code" href="../../d5/de3/encoding_8h.html#aa51910e650b62fec609e9365eb97f1db">rb_enc_isalpha</a>(*m, enc) &amp;&amp; <a class="code" href="../../de/de6/ruby_2ruby_8h.html#af96ff81718c3c27b342b5958fac6cb7e">ISASCII</a>(*m)))
<a name="l09768"></a>09768             <span class="keywordflow">return</span> <a class="code" href="../../d1/d5c/nkf_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;
<a name="l09769"></a>09769         <span class="keywordflow">while</span> (m &lt; e &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#a27923e7c90c9f7bed49845772092c04d">is_identchar</a>(m, e, enc)) m += <a class="code" href="../../d5/db5/encoding_8c.html#aa91c0fa3dfdfe3c55fcaa6029c35bbb8">rb_enc_mbclen</a>(m, e, enc);
<a name="l09770"></a>09770         <span class="keywordflow">if</span> (localid) {
<a name="l09771"></a><a class="code" href="../../d7/dc0/parse_8y.html#a8746752241f1e93cda7de604e74573f2">09771</a>             <span class="keywordflow">switch</span> (*m) {
<a name="l09772"></a>09772               <span class="keywordflow">case</span> <span class="charliteral">&apos;!&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;?&apos;</span>: <span class="keywordflow">case</span> <span class="charliteral">&apos;=&apos;</span>: ++m;
<a name="l09773"></a>09773             }
<a name="l09774"></a><a class="code" href="../../d7/dc0/parse_8y.html#a92998291bbcfe74ae5307461e35661b8">09774</a>         }
<a name="l09775"></a>09775         <span class="keywordflow">break</span>;
<a name="l09776"></a>09776     }
<a name="l09777"></a>09777     <span class="keywordflow">return</span> m == e;
<a name="l09778"></a><a class="code" href="../../d7/dc0/parse_8y.html#a84b75c05dad2b44ac64ce29c35187e07">09778</a> }
<a name="l09779"></a>09779 
<a name="l09780"></a>09780 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>
<a name="l09781"></a><a class="code" href="../../d7/dc0/parse_8y.html#a7555d1e0de9ba368249e86283adb2e7f">09781</a> <a class="code" href="../../d7/dc0/parse_8y.html#ad33897fa7fb56da938b08fb63e022a62">register_symid</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">long</span> len, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc)
<a name="l09782"></a>09782 {
<a name="l09783"></a>09783     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str = <a class="code" href="../../d5/de3/encoding_8h.html#a6707b730597e0e614213beb11670aca2">rb_enc_str_new</a>(name, len, enc);
<a name="l09784"></a>09784     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a7ae8fa209abf837905d53c1c4be7c75d">OBJ_FREEZE</a>(str);
<a name="l09785"></a>09785     <a class="code" href="../../dd/d24/st_8h.html#aee4e16ae99cd543ddf851107d5ea5408">st_add_direct</a>(<a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#a52573724c4b031ec2a02bbdf3ea89f6d">sym_id</a>, (<a class="code" href="../../de/dce/syck_8h.html#a8a45dfe133c1fd041e1b902bda9e43e8">st_data_t</a>)str, <span class="keywordtype">id</span>);
<a name="l09786"></a>09786     <a class="code" href="../../dd/d24/st_8h.html#aee4e16ae99cd543ddf851107d5ea5408">st_add_direct</a>(<a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#ac662d80ccf35d0338f6a8df3ec3b0a2d">id_str</a>, <span class="keywordtype">id</span>, (<a class="code" href="../../de/dce/syck_8h.html#a8a45dfe133c1fd041e1b902bda9e43e8">st_data_t</a>)str);
<a name="l09787"></a>09787     <span class="keywordflow">return</span> id;
<a name="l09788"></a>09788 }
<a name="l09789"></a>09789 
<a name="l09790"></a>09790 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>
<a name="l09791"></a>09791 <a class="code" href="../../d5/d11/ripper_8c.html#a7099e79ac3feb1a87550d4a93eebdc99">rb_intern3</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">long</span> len, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc)
<a name="l09792"></a>09792 {
<a name="l09793"></a>09793     <span class="keyword">const</span> <span class="keywordtype">char</span> *m = name;
<a name="l09794"></a>09794     <span class="keyword">const</span> <span class="keywordtype">char</span> *e = m + len;
<a name="l09795"></a>09795     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> c;
<a name="l09796"></a>09796     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str;
<a name="l09797"></a>09797     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> id;
<a name="l09798"></a>09798     <span class="keywordtype">long</span> last;
<a name="l09799"></a>09799     <span class="keywordtype">int</span> mb;
<a name="l09800"></a>09800     <a class="code" href="../../de/dce/syck_8h.html#a8a45dfe133c1fd041e1b902bda9e43e8">st_data_t</a> data;
<a name="l09801"></a>09801     <span class="keyword">struct </span><a class="code" href="../../dd/d63/struct_r_string.html">RString</a> fake_str;
<a name="l09802"></a>09802     fake_str.basic.flags = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a22a8c2a4bbaae9b68f65c9bb92fd4e39">T_STRING</a>|RSTRING_NOEMBED;
<a name="l09803"></a>09803     fake_str.basic.klass = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a7d36c9c3e9faa34c27eb7f2eb9c874a8">rb_cString</a>;
<a name="l09804"></a>09804     fake_str.as.heap.len = len;
<a name="l09805"></a>09805     fake_str.as.heap.ptr = (<span class="keywordtype">char</span> *)name;
<a name="l09806"></a>09806     fake_str.as.heap.aux.capa = len;
<a name="l09807"></a>09807     str = (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)&amp;fake_str;
<a name="l09808"></a>09808     <a class="code" href="../../d5/db5/encoding_8c.html#a150a6e3ac22ac3be8f8c2ccc74a28e7b">rb_enc_associate</a>(str, enc);
<a name="l09809"></a>09809     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a7ae8fa209abf837905d53c1c4be7c75d">OBJ_FREEZE</a>(str);
<a name="l09810"></a>09810 
<a name="l09811"></a>09811     <span class="keywordflow">if</span> (<a class="code" href="../../d5/de3/encoding_8h.html#a5282c41e11a68fe310f45c9a326ae2b8">rb_enc_str_coderange</a>(str) == <a class="code" href="../../d5/de3/encoding_8h.html#abb86fbc02fc2b78d928825ea6d6922f9">ENC_CODERANGE_BROKEN</a>) {
<a name="l09812"></a>09812         <a class="code" href="../../db/dcc/error_8c.html#a0f771a2840561f1838169b3d7d4616f3">rb_raise</a>(<a class="code" href="../../db/dcc/error_8c.html#ada7f59638e6bef5993dc6402ddab1d8a">rb_eEncodingError</a>, <span class="stringliteral">&quot;invalid encoding symbol&quot;</span>);
<a name="l09813"></a>09813     }
<a name="l09814"></a>09814 
<a name="l09815"></a>09815     <span class="keywordflow">if</span> (<a class="code" href="../../dd/d24/st_8h.html#a2d85287fbdaf7dcbc22d45e925c29fea">st_lookup</a>(<a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#a52573724c4b031ec2a02bbdf3ea89f6d">sym_id</a>, str, &amp;data))
<a name="l09816"></a>09816         <span class="keywordflow">return</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>)data;
<a name="l09817"></a>09817 
<a name="l09818"></a>09818     <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a7d36c9c3e9faa34c27eb7f2eb9c874a8">rb_cString</a> &amp;&amp; !<a class="code" href="../../d5/de3/encoding_8h.html#a8b18a09a3055d3006c6d5baeaa6e7c72">rb_enc_asciicompat</a>(enc)) {
<a name="l09819"></a>09819         <span class="keywordtype">id</span> = <a class="code" href="../../d3/d09/ripper_8y.html#aae62653c09515583c30005f2b6725c16">ID_JUNK</a>;
<a name="l09820"></a>09820         <span class="keywordflow">goto</span> new_id;
<a name="l09821"></a>09821     }
<a name="l09822"></a>09822     last = len-1;
<a name="l09823"></a>09823     <span class="keywordtype">id</span> = 0;
<a name="l09824"></a>09824     <span class="keywordflow">switch</span> (*m) {
<a name="l09825"></a>09825       <span class="keywordflow">case</span> <span class="charliteral">&apos;$&apos;</span>:
<a name="l09826"></a>09826         <span class="keywordtype">id</span> |= <a class="code" href="../../d3/d09/ripper_8y.html#a213f06511d6f5719cc0a625d9aa1bd32">ID_GLOBAL</a>;
<a name="l09827"></a>09827         <span class="keywordflow">if</span> ((mb = <a class="code" href="../../d7/dc0/parse_8y.html#a4935b802f3256a1e7df916f6f77fdb84">is_special_global_name</a>(++m, e, enc)) != 0) {
<a name="l09828"></a>09828             <span class="keywordflow">if</span> (!--mb) enc = <a class="code" href="../../d5/db5/encoding_8c.html#a767d777810f0d48add93857b52057262">rb_ascii8bit_encoding</a>();
<a name="l09829"></a>09829             <span class="keywordflow">goto</span> new_id;
<a name="l09830"></a>09830         }
<a name="l09831"></a>09831         <span class="keywordflow">break</span>;
<a name="l09832"></a>09832       <span class="keywordflow">case</span> <span class="charliteral">&apos;@&apos;</span>:
<a name="l09833"></a>09833         <span class="keywordflow">if</span> (m[1] == <span class="charliteral">&apos;@&apos;</span>) {
<a name="l09834"></a>09834             m++;
<a name="l09835"></a><a class="code" href="../../d7/dc0/parse_8y.html#a03b449bec1be892e44e479612e98ec0e">09835</a>             <span class="keywordtype">id</span> |= <a class="code" href="../../d3/d09/ripper_8y.html#a27f67f7d60c26b133a5be10363911af5">ID_CLASS</a>;
<a name="l09836"></a>09836         }
<a name="l09837"></a>09837         <span class="keywordflow">else</span> {
<a name="l09838"></a>09838             <span class="keywordtype">id</span> |= <a class="code" href="../../d3/d09/ripper_8y.html#abec98916456cd3faf05963cf2c8d9098">ID_INSTANCE</a>;
<a name="l09839"></a>09839         }
<a name="l09840"></a>09840         m++;
<a name="l09841"></a>09841         <span class="keywordflow">break</span>;
<a name="l09842"></a>09842       <span class="keywordflow">default</span>:
<a name="l09843"></a>09843         c = m[0];
<a name="l09844"></a>09844         <span class="keywordflow">if</span> (c != <span class="charliteral">&apos;_&apos;</span> &amp;&amp; <a class="code" href="../../d5/de3/encoding_8h.html#a6a45c3c98c745038de6c66a5014e0b35">rb_enc_isascii</a>(c, enc) &amp;&amp; <a class="code" href="../../d5/de3/encoding_8h.html#a2b0918ad1b68d3ae993b19c01093ae05">rb_enc_ispunct</a>(c, enc)) {
<a name="l09845"></a>09845             <span class="comment">/* operators */</span>
<a name="l09846"></a>09846             <span class="keywordtype">int</span> i;
<a name="l09847"></a>09847 
<a name="l09848"></a>09848             <span class="keywordflow">if</span> (len == 1) {
<a name="l09849"></a>09849                 <span class="keywordtype">id</span> = c;
<a name="l09850"></a>09850                 <span class="keywordflow">goto</span> id_register;
<a name="l09851"></a>09851             }
<a name="l09852"></a>09852             <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d5/d11/ripper_8c.html#a6defb562d03d74f39777f4bddbe07ab2">op_tbl_count</a>; i++) {
<a name="l09853"></a>09853                 <span class="keywordflow">if</span> (*<a class="code" href="../../d7/dc0/parse_8y.html#a47133fc92d2871c0e6b899b7e29c2f22">op_tbl</a>[i].name == *m &amp;&amp;
<a name="l09854"></a>09854                     strcmp(<a class="code" href="../../d7/dc0/parse_8y.html#a47133fc92d2871c0e6b899b7e29c2f22">op_tbl</a>[i].name, m) == 0) {
<a name="l09855"></a><a class="code" href="../../d7/dc0/parse_8y.html#ad9533c7bb654b3e2aeafd10f392ccfbd">09855</a>                     <span class="keywordtype">id</span> = <a class="code" href="../../d7/dc0/parse_8y.html#a47133fc92d2871c0e6b899b7e29c2f22">op_tbl</a>[i].token;
<a name="l09856"></a>09856                     <span class="keywordflow">goto</span> id_register;
<a name="l09857"></a>09857                 }
<a name="l09858"></a>09858             }
<a name="l09859"></a>09859         }
<a name="l09860"></a>09860 
<a name="l09861"></a>09861         <span class="keywordflow">if</span> (m[last] == <span class="charliteral">&apos;=&apos;</span>) {
<a name="l09862"></a>09862             <span class="comment">/* attribute assignment */</span>
<a name="l09863"></a>09863             <span class="keywordtype">id</span> = <a class="code" href="../../d5/d11/ripper_8c.html#a7099e79ac3feb1a87550d4a93eebdc99">rb_intern3</a>(name, last, enc);
<a name="l09864"></a>09864             <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &gt; <a class="code" href="../../d5/d11/ripper_8c.html#aa04217e94ed963efd9ca7c22d36916d9">tLAST_TOKEN</a> &amp;&amp; !<a class="code" href="../../d5/d11/ripper_8c.html#a2481b126efced59aff92031680a70596">is_attrset_id</a>(<span class="keywordtype">id</span>)) {
<a name="l09865"></a>09865                 enc = <a class="code" href="../../d5/db5/encoding_8c.html#ac21ed764f3b39453b6a848dd64a19585">rb_enc_get</a>(<a class="code" href="../../d5/d11/ripper_8c.html#aec42ef320e57234e789bdda6d655716f">rb_id2str</a>(<span class="keywordtype">id</span>));
<a name="l09866"></a>09866                 <span class="keywordtype">id</span> = <a class="code" href="../../d5/d11/ripper_8c.html#acbc28d5820d674dd4447a14c23de0a42">rb_id_attrset</a>(<span class="keywordtype">id</span>);
<a name="l09867"></a>09867                 <span class="keywordflow">goto</span> id_register;
<a name="l09868"></a>09868             }
<a name="l09869"></a>09869             <span class="keywordtype">id</span> = <a class="code" href="../../d3/d09/ripper_8y.html#a7ea3b5e7f92094ad3f27a8585e4fc1db">ID_ATTRSET</a>;
<a name="l09870"></a>09870         }
<a name="l09871"></a>09871         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/de3/encoding_8h.html#a004214571fa83485ab3eb73690c694c4">rb_enc_isupper</a>(m[0], enc)) {
<a name="l09872"></a>09872             <span class="keywordtype">id</span> = <a class="code" href="../../d3/d09/ripper_8y.html#a4aee1d3e78b30d117f1b58269e5afd4a">ID_CONST</a>;
<a name="l09873"></a>09873         }
<a name="l09874"></a>09874         <span class="keywordflow">else</span> {
<a name="l09875"></a>09875             <span class="keywordtype">id</span> = <a class="code" href="../../d3/d09/ripper_8y.html#ad76be6937fe27e0331cb5ff66c0d94ca">ID_LOCAL</a>;
<a name="l09876"></a>09876         }
<a name="l09877"></a>09877         <span class="keywordflow">break</span>;
<a name="l09878"></a>09878     }
<a name="l09879"></a><a class="code" href="../../d7/dc0/parse_8y.html#ac767d74bdd8f4a8a068329f007260dc2">09879</a>     mb = 0;
<a name="l09880"></a>09880     <span class="keywordflow">if</span> (!<a class="code" href="../../d5/de3/encoding_8h.html#a96918b340068df7137fd3d8a59cc7205">rb_enc_isdigit</a>(*m, enc)) {
<a name="l09881"></a>09881         <span class="keywordflow">while</span> (m &lt;= name + last &amp;&amp; <a class="code" href="../../d5/d11/ripper_8c.html#a27923e7c90c9f7bed49845772092c04d">is_identchar</a>(m, e, enc)) {
<a name="l09882"></a>09882             <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#af96ff81718c3c27b342b5958fac6cb7e">ISASCII</a>(*m)) {
<a name="l09883"></a>09883                 m++;
<a name="l09884"></a>09884             }
<a name="l09885"></a>09885             <span class="keywordflow">else</span> {
<a name="l09886"></a>09886                 mb = 1;
<a name="l09887"></a>09887                 m += <a class="code" href="../../d5/db5/encoding_8c.html#aa91c0fa3dfdfe3c55fcaa6029c35bbb8">rb_enc_mbclen</a>(m, e, enc);
<a name="l09888"></a>09888             }
<a name="l09889"></a>09889         }
<a name="l09890"></a>09890     }
<a name="l09891"></a>09891     <span class="keywordflow">if</span> (m - name &lt; len) <span class="keywordtype">id</span> = <a class="code" href="../../d3/d09/ripper_8y.html#aae62653c09515583c30005f2b6725c16">ID_JUNK</a>;
<a name="l09892"></a>09892     <span class="keywordflow">if</span> (enc != <a class="code" href="../../d5/db5/encoding_8c.html#a1e215012f16414c044f6a212973c95a8">rb_usascii_encoding</a>()) {
<a name="l09893"></a>09893         <span class="comment">/*</span>
<a name="l09894"></a>09894 <span class="comment">         * this clause makes sense only when called from other than</span>
<a name="l09895"></a>09895 <span class="comment">         * rb_intern_str() taking care of code-range.</span>
<a name="l09896"></a><a class="code" href="../../d7/dc0/parse_8y.html#a11c15cdb93782ce6cbd36a3943f0741b">09896</a> <span class="comment">         */</span>
<a name="l09897"></a>09897         <span class="keywordflow">if</span> (!mb) {
<a name="l09898"></a>09898             <span class="keywordflow">for</span> (; m &lt;= name + len; ++m) {
<a name="l09899"></a>09899                 <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#af96ff81718c3c27b342b5958fac6cb7e">ISASCII</a>(*m)) <span class="keywordflow">goto</span> mbstr;
<a name="l09900"></a>09900             }
<a name="l09901"></a>09901             enc = <a class="code" href="../../d5/db5/encoding_8c.html#a1e215012f16414c044f6a212973c95a8">rb_usascii_encoding</a>();
<a name="l09902"></a>09902         }
<a name="l09903"></a>09903       mbstr:;
<a name="l09904"></a>09904     }
<a name="l09905"></a>09905   new_id:
<a name="l09906"></a>09906     <span class="keywordflow">if</span> (<a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#ab614b28e06b23da446dc09887fb705b9">last_id</a> &gt;= ~(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>)0 &gt;&gt; (ID_SCOPE_SHIFT+<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a615c56600e961b0963af654efce5fa1aa228514837b51dd5edab41cca89a44423">RUBY_SPECIAL_SHIFT</a>)) {
<a name="l09907"></a>09907         <span class="keywordflow">if</span> (len &gt; 20) {
<a name="l09908"></a>09908             <a class="code" href="../../db/dcc/error_8c.html#a0f771a2840561f1838169b3d7d4616f3">rb_raise</a>(<a class="code" href="../../db/dcc/error_8c.html#a95ad3953d535707e2cf2b1d837f5e253">rb_eRuntimeError</a>, <span class="stringliteral">&quot;symbol table overflow (symbol %.20s...)&quot;</span>,
<a name="l09909"></a>09909                      name);
<a name="l09910"></a>09910         }
<a name="l09911"></a>09911         <span class="keywordflow">else</span> {
<a name="l09912"></a>09912             <a class="code" href="../../db/dcc/error_8c.html#a0f771a2840561f1838169b3d7d4616f3">rb_raise</a>(<a class="code" href="../../db/dcc/error_8c.html#a95ad3953d535707e2cf2b1d837f5e253">rb_eRuntimeError</a>, <span class="stringliteral">&quot;symbol table overflow (symbol %.*s)&quot;</span>,
<a name="l09913"></a>09913                      (<span class="keywordtype">int</span>)len, name);
<a name="l09914"></a>09914         }
<a name="l09915"></a>09915     }
<a name="l09916"></a>09916     <span class="keywordtype">id</span> |= ++<a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#ab614b28e06b23da446dc09887fb705b9">last_id</a> &lt;&lt; <a class="code" href="../../d3/d09/ripper_8y.html#a95376a2b85654ab1030f2cecb34d2ac1">ID_SCOPE_SHIFT</a>;
<a name="l09917"></a>09917   id_register:
<a name="l09918"></a>09918     <span class="keywordflow">return</span> <a class="code" href="../../d7/dc0/parse_8y.html#ad33897fa7fb56da938b08fb63e022a62">register_symid</a>(<span class="keywordtype">id</span>, name, len, enc);
<a name="l09919"></a>09919 }
<a name="l09920"></a>09920 
<a name="l09921"></a>09921 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>
<a name="l09922"></a>09922 <a class="code" href="../../d5/d11/ripper_8c.html#a06f1137a7428ccb3b70848762eab967e">rb_intern2</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">long</span> len)
<a name="l09923"></a>09923 {
<a name="l09924"></a>09924     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a7099e79ac3feb1a87550d4a93eebdc99">rb_intern3</a>(name, len, <a class="code" href="../../d5/db5/encoding_8c.html#a1e215012f16414c044f6a212973c95a8">rb_usascii_encoding</a>());
<a name="l09925"></a>09925 }
<a name="l09926"></a>09926 
<a name="l09927"></a>09927 <span class="preprocessor">#undef rb_intern</span>
<a name="l09928"></a>09928 <span class="preprocessor"></span><a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>
<a name="l09929"></a>09929 <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name)
<a name="l09930"></a>09930 {
<a name="l09931"></a>09931     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a06f1137a7428ccb3b70848762eab967e">rb_intern2</a>(name, <a class="code" href="../../d6/d7b/strchr_8c.html#a219836f542ce53545052bed5353820ca">strlen</a>(name));
<a name="l09932"></a>09932 }
<a name="l09933"></a>09933 
<a name="l09934"></a>09934 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>
<a name="l09935"></a>09935 <a class="code" href="../../d5/d11/ripper_8c.html#aebb6b3345ade11073c43fd418ec67b87">rb_intern_str</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str)
<a name="l09936"></a>09936 {
<a name="l09937"></a>09937     <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *enc;
<a name="l09938"></a>09938     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> id;
<a name="l09939"></a>09939 
<a name="l09940"></a>09940     <span class="keywordflow">if</span> (<a class="code" href="../../d5/de3/encoding_8h.html#a5282c41e11a68fe310f45c9a326ae2b8">rb_enc_str_coderange</a>(str) == <a class="code" href="../../d5/de3/encoding_8h.html#a0a0e73a2d98205044e1ad19432502c5b">ENC_CODERANGE_7BIT</a>) {
<a name="l09941"></a>09941         enc = <a class="code" href="../../d5/db5/encoding_8c.html#a1e215012f16414c044f6a212973c95a8">rb_usascii_encoding</a>();
<a name="l09942"></a>09942     }
<a name="l09943"></a>09943     <span class="keywordflow">else</span> {
<a name="l09944"></a>09944         enc = <a class="code" href="../../d5/db5/encoding_8c.html#ac21ed764f3b39453b6a848dd64a19585">rb_enc_get</a>(str);
<a name="l09945"></a>09945     }
<a name="l09946"></a>09946     <span class="keywordtype">id</span> = <a class="code" href="../../d5/d11/ripper_8c.html#a7099e79ac3feb1a87550d4a93eebdc99">rb_intern3</a>(<a class="code" href="../../d8/df4/generator_8h.html#aa0c7097c0d82c8372072fbab5a604e39">RSTRING_PTR</a>(str), <a class="code" href="../../d8/df4/generator_8h.html#a1661e63c26c5cbeef7217d05b0f33942">RSTRING_LEN</a>(str), enc);
<a name="l09947"></a>09947     <a class="code" href="../../d8/df4/generator_8h.html#ad2bf389f3fddea7bd3befa162c70561a">RB_GC_GUARD</a>(str);
<a name="l09948"></a>09948     <span class="keywordflow">return</span> id;
<a name="l09949"></a>09949 }
<a name="l09950"></a>09950 
<a name="l09951"></a>09951 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l09952"></a>09952 <a class="code" href="../../d5/d11/ripper_8c.html#aec42ef320e57234e789bdda6d655716f">rb_id2str</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l09953"></a>09953 {
<a name="l09954"></a>09954     <a class="code" href="../../de/dce/syck_8h.html#a8a45dfe133c1fd041e1b902bda9e43e8">st_data_t</a> data;
<a name="l09955"></a>09955 
<a name="l09956"></a>09956     <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &lt; <a class="code" href="../../d5/d11/ripper_8c.html#aa04217e94ed963efd9ca7c22d36916d9">tLAST_TOKEN</a>) {
<a name="l09957"></a><a class="code" href="../../d7/dc0/parse_8y.html#a7ea0dcd3c8f0ab84e739b8d9ddb7e311">09957</a>         <span class="keywordtype">int</span> i = 0;
<a name="l09958"></a>09958 
<a name="l09959"></a>09959         <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &lt; INT_MAX &amp;&amp; <a class="code" href="../../d5/db5/encoding_8c.html#a228e542e25e156e87f458b324e29c42a">rb_ispunct</a>((<span class="keywordtype">int</span>)<span class="keywordtype">id</span>)) {
<a name="l09960"></a>09960             <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str = <a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#ac4a37d6760843c2a91ce2b920cbf6031">op_sym</a>[i = (int)<span class="keywordtype">id</span>];
<a name="l09961"></a>09961             <span class="keywordflow">if</span> (!str) {
<a name="l09962"></a>09962                 <span class="keywordtype">char</span> name[2];
<a name="l09963"></a>09963                 name[0] = (char)<span class="keywordtype">id</span>;
<a name="l09964"></a>09964                 name[1] = 0;
<a name="l09965"></a>09965                 str = <a class="code" href="../../db/d2e/intern_8h.html#aed107a4eacd5f626b554d2d341b58bd5">rb_usascii_str_new</a>(name, 1);
<a name="l09966"></a><a class="code" href="../../d7/dc0/parse_8y.html#a37b22b50bc0a6849e97389cdd76eb381">09966</a>                 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a7ae8fa209abf837905d53c1c4be7c75d">OBJ_FREEZE</a>(str);
<a name="l09967"></a>09967                 <a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#ac4a37d6760843c2a91ce2b920cbf6031">op_sym</a>[i] = str;
<a name="l09968"></a>09968             }
<a name="l09969"></a>09969             <span class="keywordflow">return</span> str;
<a name="l09970"></a>09970         }
<a name="l09971"></a>09971         <span class="keywordflow">for</span> (i = 0; i &lt; op_tbl_count; i++) {
<a name="l09972"></a>09972             <span class="keywordflow">if</span> (<a class="code" href="../../d7/dc0/parse_8y.html#a47133fc92d2871c0e6b899b7e29c2f22">op_tbl</a>[i].token == <span class="keywordtype">id</span>) {
<a name="l09973"></a>09973                 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str = <a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#ac4a37d6760843c2a91ce2b920cbf6031">op_sym</a>[i];
<a name="l09974"></a>09974                 <span class="keywordflow">if</span> (!str) {
<a name="l09975"></a>09975                     str = <a class="code" href="../../db/d2e/intern_8h.html#a99895fce59be905b7c7f0a88bd32fa1f">rb_usascii_str_new2</a>(<a class="code" href="../../d7/dc0/parse_8y.html#a47133fc92d2871c0e6b899b7e29c2f22">op_tbl</a>[i].name);
<a name="l09976"></a>09976                     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a7ae8fa209abf837905d53c1c4be7c75d">OBJ_FREEZE</a>(str);
<a name="l09977"></a>09977                     <a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#ac4a37d6760843c2a91ce2b920cbf6031">op_sym</a>[i] = str;
<a name="l09978"></a>09978                 }
<a name="l09979"></a>09979                 <span class="keywordflow">return</span> str;
<a name="l09980"></a><a class="code" href="../../d7/dc0/parse_8y.html#a3b631e1178ed8844e220e592842951d7">09980</a>             }
<a name="l09981"></a>09981         }
<a name="l09982"></a>09982     }
<a name="l09983"></a>09983 
<a name="l09984"></a>09984     <span class="keywordflow">if</span> (<a class="code" href="../../dd/d24/st_8h.html#a2d85287fbdaf7dcbc22d45e925c29fea">st_lookup</a>(<a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#ac662d80ccf35d0338f6a8df3ec3b0a2d">id_str</a>, <span class="keywordtype">id</span>, &amp;data)) {
<a name="l09985"></a>09985         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str = (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)data;
<a name="l09986"></a>09986         <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a1d4c05021aacd8cab989ff60f95ebe2d">RBASIC</a>(str)-&gt;klass == 0)
<a name="l09987"></a>09987             <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a1d4c05021aacd8cab989ff60f95ebe2d">RBASIC</a>(str)-&gt;klass = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a7d36c9c3e9faa34c27eb7f2eb9c874a8">rb_cString</a>;
<a name="l09988"></a><a class="code" href="../../d7/dc0/parse_8y.html#aff1d8ff9344d18f152fd8da63230c3c0">09988</a>         <span class="keywordflow">return</span> str;
<a name="l09989"></a>09989     }
<a name="l09990"></a>09990 
<a name="l09991"></a>09991     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d11/ripper_8c.html#a2481b126efced59aff92031680a70596">is_attrset_id</a>(<span class="keywordtype">id</span>)) {
<a name="l09992"></a>09992         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> id2 = (<span class="keywordtype">id</span> &amp; ~ID_SCOPE_MASK) | <a class="code" href="../../d3/d09/ripper_8y.html#ad76be6937fe27e0331cb5ff66c0d94ca">ID_LOCAL</a>;
<a name="l09993"></a>09993         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str;
<a name="l09994"></a>09994 
<a name="l09995"></a><a class="code" href="../../d7/dc0/parse_8y.html#a93a652e00a5120d926bec0565bc77ade">09995</a>         <span class="keywordflow">while</span> (!(str = <a class="code" href="../../d5/d11/ripper_8c.html#aec42ef320e57234e789bdda6d655716f">rb_id2str</a>(id2))) {
<a name="l09996"></a>09996             <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d11/ripper_8c.html#abe05eb6b7b2f2f735012a349f49c4c69">is_local_id</a>(id2)) <span class="keywordflow">return</span> 0;
<a name="l09997"></a>09997             id2 = (<span class="keywordtype">id</span> &amp; ~ID_SCOPE_MASK) | <a class="code" href="../../d3/d09/ripper_8y.html#a4aee1d3e78b30d117f1b58269e5afd4a">ID_CONST</a>;
<a name="l09998"></a>09998         }
<a name="l09999"></a>09999         str = <a class="code" href="../../db/d2e/intern_8h.html#ae2843c766c24b80116bb127ebf22d5bf">rb_str_dup</a>(str);
<a name="l10000"></a>10000         <a class="code" href="../../db/d2e/intern_8h.html#a4e3e3ccf959b5db6c125a68e1e1db0a3">rb_str_cat</a>(str, <span class="stringliteral">&quot;=&quot;</span>, 1);
<a name="l10001"></a>10001         <a class="code" href="../../d5/d11/ripper_8c.html#aebb6b3345ade11073c43fd418ec67b87">rb_intern_str</a>(str);
<a name="l10002"></a>10002         <span class="keywordflow">if</span> (<a class="code" href="../../dd/d24/st_8h.html#a2d85287fbdaf7dcbc22d45e925c29fea">st_lookup</a>(<a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#ac662d80ccf35d0338f6a8df3ec3b0a2d">id_str</a>, <span class="keywordtype">id</span>, &amp;data)) {
<a name="l10003"></a>10003             <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str = (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)data;
<a name="l10004"></a>10004             <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a1d4c05021aacd8cab989ff60f95ebe2d">RBASIC</a>(str)-&gt;klass == 0)
<a name="l10005"></a>10005                 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a1d4c05021aacd8cab989ff60f95ebe2d">RBASIC</a>(str)-&gt;klass = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a7d36c9c3e9faa34c27eb7f2eb9c874a8">rb_cString</a>;
<a name="l10006"></a>10006             <span class="keywordflow">return</span> str;
<a name="l10007"></a>10007         }
<a name="l10008"></a>10008     }
<a name="l10009"></a>10009     <span class="keywordflow">return</span> 0;
<a name="l10010"></a>10010 }
<a name="l10011"></a>10011 
<a name="l10012"></a>10012 <span class="keyword">const</span> <span class="keywordtype">char</span> *
<a name="l10013"></a>10013 <a class="code" href="../../d5/d11/ripper_8c.html#a877bc58c495643fcf49dc64c44631e72">rb_id2name</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l10014"></a>10014 {
<a name="l10015"></a>10015     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str = <a class="code" href="../../d5/d11/ripper_8c.html#aec42ef320e57234e789bdda6d655716f">rb_id2str</a>(<span class="keywordtype">id</span>);
<a name="l10016"></a>10016 
<a name="l10017"></a>10017     <span class="keywordflow">if</span> (!str) <span class="keywordflow">return</span> 0;
<a name="l10018"></a>10018     <span class="keywordflow">return</span> <a class="code" href="../../d8/df4/generator_8h.html#aa0c7097c0d82c8372072fbab5a604e39">RSTRING_PTR</a>(str);
<a name="l10019"></a>10019 }
<a name="l10020"></a>10020 
<a name="l10021"></a>10021 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l10022"></a>10022 <a class="code" href="../../d7/dc0/parse_8y.html#a58e96fed52452cc2103880b51fb6d461">symbols_i</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dd/dc0/date__core_8c.html#a8157485e687f56a6ae2f3ee0a8cb1580">sym</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> value, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dd/d63/struct_r_string.html#a8d6293024f5ee35de0ff69314e0138a7">ary</a>)
<a name="l10023"></a>10023 {
<a name="l10024"></a>10024     <a class="code" href="../../dc/dcc/array_8c.html#a59d553a8cd781364b8bcb0deae25cca2">rb_ary_push</a>(ary, <a class="code" href="../../dc/d0c/cparse_8c.html#a48bfb6519a45249fb2ec0193ea3b6e1c">ID2SYM</a>(value));
<a name="l10025"></a>10025     <span class="keywordflow">return</span> <a class="code" href="../../dd/d24/st_8h.html#a0c6a172fd99de7928916e65034ed8b1fac99fc55c7f355bf9071739a4bc2ea139">ST_CONTINUE</a>;
<a name="l10026"></a>10026 }
<a name="l10027"></a>10027 
<a name="l10028"></a>10028 <span class="comment">/*</span>
<a name="l10029"></a><a class="code" href="../../d7/dc0/parse_8y.html#ae826cbed2941c44e1e7454f97ded9680">10029</a> <span class="comment"> *  call-seq:</span>
<a name="l10030"></a>10030 <span class="comment"> *     Symbol.all_symbols    =&gt; array</span>
<a name="l10031"></a>10031 <span class="comment"> *</span>
<a name="l10032"></a>10032 <span class="comment"> *  Returns an array of all the symbols currently in Ruby&apos;s symbol</span>
<a name="l10033"></a>10033 <span class="comment"> *  table.</span>
<a name="l10034"></a>10034 <span class="comment"> *</span>
<a name="l10035"></a>10035 <span class="comment"> *     Symbol.all_symbols.size    #=&gt; 903</span>
<a name="l10036"></a>10036 <span class="comment"> *     Symbol.all_symbols[1,20]   #=&gt; [:floor, :ARGV, :Binding, :symlink,</span>
<a name="l10037"></a>10037 <span class="comment"> *                                     :chown, :EOFError, :$;, :String,</span>
<a name="l10038"></a>10038 <span class="comment"> *                                     :LOCK_SH, :&quot;setuid?&quot;, :$&lt;,</span>
<a name="l10039"></a>10039 <span class="comment"> *                                     :default_proc, :compact, :extend,</span>
<a name="l10040"></a>10040 <span class="comment"> *                                     :Tms, :getwd, :$=, :ThreadGroup,</span>
<a name="l10041"></a>10041 <span class="comment"> *                                     :wait2, :$&gt;]</span>
<a name="l10042"></a>10042 <span class="comment"> */</span>
<a name="l10043"></a>10043 
<a name="l10044"></a>10044 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10045"></a>10045 <a class="code" href="../../d5/d11/ripper_8c.html#a564559c7653938771a7c75f054e4eeaf">rb_sym_all_symbols</a>(<span class="keywordtype">void</span>)
<a name="l10046"></a>10046 {
<a name="l10047"></a>10047     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> ary = <a class="code" href="../../dc/dcc/array_8c.html#a43a7bd246935ab63c233b4ae34d61d75">rb_ary_new2</a>(<a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#a52573724c4b031ec2a02bbdf3ea89f6d">sym_id</a>-&gt;<a class="code" href="../../d0/ddd/structst__table.html#aa593a5229fc7d02d628a4518f56f71b6">num_entries</a>);
<a name="l10048"></a>10048 
<a name="l10049"></a>10049     <a class="code" href="../../dd/d24/st_8h.html#ace5a79870d2800659a653fceeca55262">st_foreach</a>(<a class="code" href="../../d7/dc0/parse_8y.html#a122fe41711bccc3d787fb26d5c99898b">global_symbols</a>.<a class="code" href="../../d7/de3/structsymbols.html#a52573724c4b031ec2a02bbdf3ea89f6d">sym_id</a>, <a class="code" href="../../d7/dc0/parse_8y.html#a58e96fed52452cc2103880b51fb6d461">symbols_i</a>, ary);
<a name="l10050"></a>10050     <span class="keywordflow">return</span> ary;
<a name="l10051"></a>10051 }
<a name="l10052"></a>10052 
<a name="l10053"></a>10053 <span class="keywordtype">int</span>
<a name="l10054"></a>10054 <a class="code" href="../../d5/d11/ripper_8c.html#a962e14dc81f0fa2107c555dd10129c27">rb_is_const_id</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l10055"></a>10055 {
<a name="l10056"></a>10056     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a42465fd45eabc7e20d3d7637460b9baf">is_const_id</a>(<span class="keywordtype">id</span>);
<a name="l10057"></a>10057 }
<a name="l10058"></a>10058 
<a name="l10059"></a>10059 <span class="keywordtype">int</span>
<a name="l10060"></a>10060 <a class="code" href="../../d5/d11/ripper_8c.html#ae03b927bba1f91cc00879a3d15fa1e21">rb_is_class_id</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l10061"></a>10061 {
<a name="l10062"></a>10062     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a25c0f4eec23a7f1b2845f70c14b648b9">is_class_id</a>(<span class="keywordtype">id</span>);
<a name="l10063"></a>10063 }
<a name="l10064"></a>10064 
<a name="l10065"></a>10065 <span class="keywordtype">int</span>
<a name="l10066"></a>10066 <a class="code" href="../../d5/d11/ripper_8c.html#a80c6077ae7854872440eaa76a512786f">rb_is_instance_id</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l10067"></a>10067 {
<a name="l10068"></a>10068     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ad0e139999d70d80ad07178ebc0c15424">is_instance_id</a>(<span class="keywordtype">id</span>);
<a name="l10069"></a>10069 }
<a name="l10070"></a>10070 
<a name="l10071"></a>10071 <span class="keywordtype">int</span>
<a name="l10072"></a>10072 <a class="code" href="../../d5/d11/ripper_8c.html#aed0d62fc21ec2baa9ae344fe3ff30668">rb_is_local_id</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l10073"></a>10073 {
<a name="l10074"></a>10074     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#abe05eb6b7b2f2f735012a349f49c4c69">is_local_id</a>(<span class="keywordtype">id</span>);
<a name="l10075"></a>10075 }
<a name="l10076"></a>10076 
<a name="l10077"></a>10077 <span class="keywordtype">int</span>
<a name="l10078"></a>10078 <a class="code" href="../../d5/d11/ripper_8c.html#a8de5045bac0a4c9c7783508d0768b07c">rb_is_junk_id</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l10079"></a>10079 {
<a name="l10080"></a>10080     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a8d348f8d197ab35cb30bb4f30070330b">is_junk_id</a>(<span class="keywordtype">id</span>);
<a name="l10081"></a>10081 }
<a name="l10082"></a>10082 
<a name="l10083"></a>10083 <span class="preprocessor">#endif </span><span class="comment">/* !RIPPER */</span>
<a name="l10084"></a>10084 
<a name="l10085"></a>10085 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l10086"></a>10086 <a class="code" href="../../d7/dc0/parse_8y.html#aa92ae33c165140147305229fe3f53045">parser_initialize</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser)
<a name="l10087"></a>10087 {
<a name="l10088"></a>10088     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a19fefb3d80f961d6da3692fb8c47515b">eofp</a> = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aba0717d2689eb68797421a02ab9295c6">Qfalse</a>;
<a name="l10089"></a>10089 
<a name="l10090"></a>10090     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#aab4f03c9daa8934e4c6d269bff627c32">parser_lex_strterm</a> = 0;
<a name="l10091"></a>10091     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#aa1e1b12df54fd101780944957c47550f">parser_cond_stack</a> = 0;
<a name="l10092"></a>10092     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a10ac33a2b479ad79b04e6f008d0d9281">parser_cmdarg_stack</a> = 0;
<a name="l10093"></a>10093     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a15057740318f02c3ab1f547200250a32">parser_class_nest</a> = 0;
<a name="l10094"></a>10094     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a8b37637cadbdc7f9ed84957151dbe00c">parser_paren_nest</a> = 0;
<a name="l10095"></a>10095     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#ad0d1e67efbc75662659bdf15eba10c02">parser_lpar_beg</a> = 0;
<a name="l10096"></a>10096     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#af32ebc7d2e033e4fa5837ee2349351e1">parser_in_single</a> = 0;
<a name="l10097"></a>10097     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#aeea2a3bf10139449d201258cbd2a3663">parser_in_def</a> = 0;
<a name="l10098"></a>10098     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a0d993ec7cc62501f4108588f82fc8376">parser_in_defined</a> = 0;
<a name="l10099"></a><a class="code" href="../../d7/dc0/parse_8y.html#a3ecc8032bfc631e1a47bd2f8b684d0fd">10099</a>     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#ad7c93e2375cb95ad7cfa7d53eed4ea83">parser_compile_for_eval</a> = 0;
<a name="l10100"></a>10100     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a198f15d6ea4687f2f0f7d3a096f2a1d5">parser_cur_mid</a> = 0;
<a name="l10101"></a>10101     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a16a071acf078bfff4d8e832ab7e14adf">parser_tokenbuf</a> = <a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l10102"></a>10102     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#adb4cd39f9b280a097250d4728c1ddfa2">parser_tokidx</a> = 0;
<a name="l10103"></a>10103     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a97c3fe0beee2d873379a739242eb8b34">parser_toksiz</a> = 0;
<a name="l10104"></a>10104     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#aa9dd0a300478f36bf1c9ab8635d76c6d">parser_heredoc_end</a> = 0;
<a name="l10105"></a>10105     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#ae58ec9dad26d0b1071a696924a46b181">parser_command_start</a> = <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l10106"></a>10106     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a163eeb6cdc7427ab5a5cb00e3d475aa7">parser_deferred_nodes</a> = 0;
<a name="l10107"></a>10107     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#ae72a2e82c521a7ca1fd1804624b2fbab">parser_lex_pbeg</a> = 0;
<a name="l10108"></a>10108     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a0fd3cefbb60628f07052ba397fee0193">parser_lex_p</a> = 0;
<a name="l10109"></a>10109     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a243d9bc35db98ebd37872e4f0b238e45">parser_lex_pend</a> = 0;
<a name="l10110"></a>10110     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a409d4488c9862b46906ec91400426262">parser_lvtbl</a> = 0;
<a name="l10111"></a>10111     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#aa81de44706786628004a25850e3db594">parser_ruby__end__seen</a> = 0;
<a name="l10112"></a>10112     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#aca3dad79b534757f8f9c8af9f2e84ae3">parser_ruby_sourcefile</a> = 0;
<a name="l10113"></a>10113 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l10114"></a>10114 <span class="preprocessor"></span>    parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a8b43e9d07bed7d3b9d08eb21a8b0e206">is_ripper</a> = 0;
<a name="l10115"></a>10115     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a4ee841e20507c021a5548cfabc615f70">parser_eval_tree_begin</a> = 0;
<a name="l10116"></a>10116     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#add8d51e370b49afb01f121f9df5e64ec">parser_eval_tree</a> = 0;
<a name="l10117"></a>10117 <span class="preprocessor">#else</span>
<a name="l10118"></a>10118 <span class="preprocessor"></span>    parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a8b43e9d07bed7d3b9d08eb21a8b0e206">is_ripper</a> = 1;
<a name="l10119"></a>10119     parser-&gt;parser_ruby_sourcefile_string = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>;
<a name="l10120"></a>10120     parser-&gt;delayed = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>;
<a name="l10121"></a>10121 
<a name="l10122"></a>10122     parser-&gt;result = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>;
<a name="l10123"></a>10123     parser-&gt;parsing_thread = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>;
<a name="l10124"></a>10124     parser-&gt;toplevel_p = <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;
<a name="l10125"></a>10125 <span class="preprocessor">#endif</span>
<a name="l10126"></a>10126 <span class="preprocessor"></span><span class="preprocessor">#ifdef YYMALLOC</span>
<a name="l10127"></a>10127 <span class="preprocessor"></span>    parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a48ef67bb7e0d3e6a353ecaf1401b8125">heap</a> = <a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l10128"></a>10128 <span class="preprocessor">#endif</span>
<a name="l10129"></a>10129 <span class="preprocessor"></span>    parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a> = <a class="code" href="../../d5/db5/encoding_8c.html#a1e215012f16414c044f6a212973c95a8">rb_usascii_encoding</a>();
<a name="l10130"></a>10130 }
<a name="l10131"></a>10131 
<a name="l10132"></a>10132 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l10133"></a>10133 <span class="preprocessor"></span><span class="preprocessor">#define parser_mark ripper_parser_mark</span>
<a name="l10134"></a>10134 <span class="preprocessor"></span><span class="preprocessor">#define parser_free ripper_parser_free</span>
<a name="l10135"></a>10135 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l10136"></a>10136 <span class="preprocessor"></span>
<a name="l10137"></a>10137 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l10138"></a>10138 <a class="code" href="../../d7/dc0/parse_8y.html#a9d2aa6adabdcc22b57f6135402c2e3e7">parser_mark</a>(<span class="keywordtype">void</span> *<a class="code" href="../../dd/d63/struct_r_string.html#ab91e9819321568b71910a0000cab011d">ptr</a>)
<a name="l10139"></a>10139 {
<a name="l10140"></a>10140     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *p = (<span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*)ptr;
<a name="l10141"></a>10141 
<a name="l10142"></a>10142     <a class="code" href="../../d8/d16/gc_8c.html#a98250264e6adf4924cf2becf80122325">rb_gc_mark</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)p-&gt;<a class="code" href="../../d0/d64/structparser__params.html#aab4f03c9daa8934e4c6d269bff627c32">parser_lex_strterm</a>);
<a name="l10143"></a>10143     <a class="code" href="../../d8/d16/gc_8c.html#a98250264e6adf4924cf2becf80122325">rb_gc_mark</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)p-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a163eeb6cdc7427ab5a5cb00e3d475aa7">parser_deferred_nodes</a>);
<a name="l10144"></a>10144     <a class="code" href="../../d8/d16/gc_8c.html#a98250264e6adf4924cf2becf80122325">rb_gc_mark</a>(p-&gt;<a class="code" href="../../d0/d64/structparser__params.html#ab299eabdb020d4889bd357cb6688d35e">parser_lex_input</a>);
<a name="l10145"></a>10145     <a class="code" href="../../d8/d16/gc_8c.html#a98250264e6adf4924cf2becf80122325">rb_gc_mark</a>(p-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a79dbe048656c470ca0c90d03028e8992">parser_lex_lastline</a>);
<a name="l10146"></a>10146     <a class="code" href="../../d8/d16/gc_8c.html#a98250264e6adf4924cf2becf80122325">rb_gc_mark</a>(p-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a9a755c6a75f6fe835c43f7ed2e5c36b6">parser_lex_nextline</a>);
<a name="l10147"></a>10147 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l10148"></a>10148 <span class="preprocessor"></span>    <a class="code" href="../../d8/d16/gc_8c.html#a98250264e6adf4924cf2becf80122325">rb_gc_mark</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)p-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a4ee841e20507c021a5548cfabc615f70">parser_eval_tree_begin</a>) ;
<a name="l10149"></a>10149     <a class="code" href="../../d8/d16/gc_8c.html#a98250264e6adf4924cf2becf80122325">rb_gc_mark</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)p-&gt;<a class="code" href="../../d0/d64/structparser__params.html#add8d51e370b49afb01f121f9df5e64ec">parser_eval_tree</a>) ;
<a name="l10150"></a>10150     <a class="code" href="../../d8/d16/gc_8c.html#a98250264e6adf4924cf2becf80122325">rb_gc_mark</a>(p-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a558327fc6eb2ce2d464ae21f9d6bd140">debug_lines</a>);
<a name="l10151"></a>10151 <span class="preprocessor">#else</span>
<a name="l10152"></a>10152 <span class="preprocessor"></span>    <a class="code" href="../../d8/d16/gc_8c.html#a98250264e6adf4924cf2becf80122325">rb_gc_mark</a>(p-&gt;parser_ruby_sourcefile_string);
<a name="l10153"></a>10153     <a class="code" href="../../d8/d16/gc_8c.html#a98250264e6adf4924cf2becf80122325">rb_gc_mark</a>(p-&gt;delayed);
<a name="l10154"></a>10154     <a class="code" href="../../d8/d16/gc_8c.html#a98250264e6adf4924cf2becf80122325">rb_gc_mark</a>(p-&gt;value);
<a name="l10155"></a>10155     <a class="code" href="../../d8/d16/gc_8c.html#a98250264e6adf4924cf2becf80122325">rb_gc_mark</a>(p-&gt;result);
<a name="l10156"></a>10156     <a class="code" href="../../d8/d16/gc_8c.html#a98250264e6adf4924cf2becf80122325">rb_gc_mark</a>(p-&gt;parsing_thread);
<a name="l10157"></a>10157 <span class="preprocessor">#endif</span>
<a name="l10158"></a>10158 <span class="preprocessor"></span><span class="preprocessor">#ifdef YYMALLOC</span>
<a name="l10159"></a>10159 <span class="preprocessor"></span>    <a class="code" href="../../d8/d16/gc_8c.html#a98250264e6adf4924cf2becf80122325">rb_gc_mark</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)p-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a48ef67bb7e0d3e6a353ecaf1401b8125">heap</a>);
<a name="l10160"></a>10160 <span class="preprocessor">#endif</span>
<a name="l10161"></a>10161 <span class="preprocessor"></span>}
<a name="l10162"></a>10162 
<a name="l10163"></a>10163 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l10164"></a>10164 <a class="code" href="../../d7/dc0/parse_8y.html#a856bd7b478ffef2787b6e1d25a8b76b4">parser_free</a>(<span class="keywordtype">void</span> *ptr)
<a name="l10165"></a>10165 {
<a name="l10166"></a>10166     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *p = (<span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*)ptr;
<a name="l10167"></a>10167     <span class="keyword">struct </span><a class="code" href="../../df/d34/structlocal__vars.html">local_vars</a> *local, *prev;
<a name="l10168"></a>10168 
<a name="l10169"></a>10169     <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a16a071acf078bfff4d8e832ab7e14adf">parser_tokenbuf</a>) {
<a name="l10170"></a>10170         <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(p-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a16a071acf078bfff4d8e832ab7e14adf">parser_tokenbuf</a>);
<a name="l10171"></a>10171     }
<a name="l10172"></a>10172     <span class="keywordflow">for</span> (local = p-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a409d4488c9862b46906ec91400426262">parser_lvtbl</a>; local; local = prev) {
<a name="l10173"></a>10173         <span class="keywordflow">if</span> (local-&gt;<a class="code" href="../../df/d34/structlocal__vars.html#a69f2a304610e6ff671c45b664ccf831a">vars</a>) <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(local-&gt;<a class="code" href="../../df/d34/structlocal__vars.html#a69f2a304610e6ff671c45b664ccf831a">vars</a>);
<a name="l10174"></a>10174         prev = local-&gt;<a class="code" href="../../df/d34/structlocal__vars.html#a14c2a2f2db273cae73cc35b9dbcbad87">prev</a>;
<a name="l10175"></a>10175         <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(local);
<a name="l10176"></a><a class="code" href="../../d7/dc0/parse_8y.html#a1f9bbd9b926d67608f86011f6ccfb04a">10176</a>     }
<a name="l10177"></a>10177 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l10178"></a>10178 <span class="preprocessor"></span>    <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(p-&gt;<a class="code" href="../../d0/d64/structparser__params.html#aca3dad79b534757f8f9c8af9f2e84ae3">parser_ruby_sourcefile</a>);
<a name="l10179"></a><a class="code" href="../../d7/dc0/parse_8y.html#a97eaef3a4dc59309f546e492f2de87c1">10179</a> <span class="preprocessor">#endif</span>
<a name="l10180"></a>10180 <span class="preprocessor"></span>    <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(p);
<a name="l10181"></a>10181 }
<a name="l10182"></a>10182 
<a name="l10183"></a>10183 <span class="keyword">static</span> <span class="keywordtype">size_t</span>
<a name="l10184"></a>10184 <a class="code" href="../../d7/dc0/parse_8y.html#a5ac7d0f71ecd4430cce3b7f48de4e297">parser_memsize</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *ptr)
<a name="l10185"></a>10185 {
<a name="l10186"></a>10186     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *p = (<span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>*)ptr;
<a name="l10187"></a>10187     <span class="keyword">struct </span><a class="code" href="../../df/d34/structlocal__vars.html">local_vars</a> *local;
<a name="l10188"></a>10188     <span class="keywordtype">size_t</span> <a class="code" href="../../d5/db5/encoding_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a> = <span class="keyword">sizeof</span>(*p);
<a name="l10189"></a>10189 
<a name="l10190"></a>10190     <span class="keywordflow">if</span> (!ptr) <span class="keywordflow">return</span> 0;
<a name="l10191"></a>10191     size += p-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a97c3fe0beee2d873379a739242eb8b34">parser_toksiz</a>;
<a name="l10192"></a>10192     <span class="keywordflow">for</span> (local = p-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a409d4488c9862b46906ec91400426262">parser_lvtbl</a>; local; local = local-&gt;<a class="code" href="../../df/d34/structlocal__vars.html#a14c2a2f2db273cae73cc35b9dbcbad87">prev</a>) {
<a name="l10193"></a>10193         size += <span class="keyword">sizeof</span>(*local);
<a name="l10194"></a>10194         <span class="keywordflow">if</span> (local-&gt;<a class="code" href="../../df/d34/structlocal__vars.html#a69f2a304610e6ff671c45b664ccf831a">vars</a>) size += local-&gt;<a class="code" href="../../df/d34/structlocal__vars.html#a69f2a304610e6ff671c45b664ccf831a">vars</a>-&gt;<a class="code" href="../../da/d3d/structvtable.html#a5e21ff3b8c0aaa63c0ae1d9454207ba2">capa</a> * <span class="keyword">sizeof</span>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>);
<a name="l10195"></a>10195     }
<a name="l10196"></a>10196 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l10197"></a>10197 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../d0/d64/structparser__params.html#aca3dad79b534757f8f9c8af9f2e84ae3">parser_ruby_sourcefile</a>) {
<a name="l10198"></a>10198         size += <a class="code" href="../../d6/d7b/strchr_8c.html#a219836f542ce53545052bed5353820ca">strlen</a>(p-&gt;<a class="code" href="../../d0/d64/structparser__params.html#aca3dad79b534757f8f9c8af9f2e84ae3">parser_ruby_sourcefile</a>) + 1;
<a name="l10199"></a>10199     }
<a name="l10200"></a>10200 <span class="preprocessor">#endif</span>
<a name="l10201"></a>10201 <span class="preprocessor"></span>    <span class="keywordflow">return</span> size;
<a name="l10202"></a>10202 }
<a name="l10203"></a><a class="code" href="../../d7/dc0/parse_8y.html#aad4c0e6d58b287449763ba2d430a7f45">10203</a> 
<a name="l10204"></a>10204 <span class="keyword">static</span>
<a name="l10205"></a>10205 <span class="preprocessor">#ifndef RIPPER</span>
<a name="l10206"></a>10206 <span class="preprocessor"></span><span class="keyword">const</span>
<a name="l10207"></a>10207 <span class="preprocessor">#endif</span>
<a name="l10208"></a>10208 <span class="preprocessor"></span><a class="code" href="../../d7/de2/structrb__data__type__struct.html">rb_data_type_t</a> parser_data_type = {
<a name="l10209"></a>10209     <span class="stringliteral">&quot;parser&quot;</span>,
<a name="l10210"></a>10210     {
<a name="l10211"></a>10211         <a class="code" href="../../d7/dc0/parse_8y.html#a9d2aa6adabdcc22b57f6135402c2e3e7">parser_mark</a>,
<a name="l10212"></a>10212         <a class="code" href="../../d7/dc0/parse_8y.html#a856bd7b478ffef2787b6e1d25a8b76b4">parser_free</a>,
<a name="l10213"></a>10213         <a class="code" href="../../d7/dc0/parse_8y.html#a5ac7d0f71ecd4430cce3b7f48de4e297">parser_memsize</a>,
<a name="l10214"></a>10214     },
<a name="l10215"></a>10215 };
<a name="l10216"></a>10216 
<a name="l10217"></a><a class="code" href="../../d7/dc0/parse_8y.html#ad422fa4d165940b01c7d581bc51387f9">10217</a> <span class="preprocessor">#ifndef RIPPER</span>
<a name="l10218"></a>10218 <span class="preprocessor"></span><span class="preprocessor">#undef rb_reserved_word</span>
<a name="l10219"></a>10219 <span class="preprocessor"></span>
<a name="l10220"></a>10220 <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../da/df3/structkwtable.html">kwtable</a> *
<a name="l10221"></a>10221 <a class="code" href="../../d3/deb/lex_8c.html#ac4a38142b075a785d0673e75886531d1">rb_reserved_word</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len)
<a name="l10222"></a>10222 {
<a name="l10223"></a>10223     <span class="keywordflow">return</span> <a class="code" href="../../d3/deb/lex_8c.html#aacfcf4589cd67f87c3420ab12d0044ab">reserved_word</a>(str, len);
<a name="l10224"></a>10224 }
<a name="l10225"></a><a class="code" href="../../d7/dc0/parse_8y.html#abbe3cc7f4fa0ed344392d46899838cbe">10225</a> 
<a name="l10226"></a>10226 <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *
<a name="l10227"></a>10227 <a class="code" href="../../d7/dc0/parse_8y.html#a7f2caee3e846dda8fbb5e47831fcc9dd">parser_new</a>(<span class="keywordtype">void</span>)
<a name="l10228"></a>10228 {
<a name="l10229"></a>10229     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *p;
<a name="l10230"></a>10230 
<a name="l10231"></a>10231     p = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a79041aa2bc7439c11906a86f82a52eb6">ALLOC_N</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, 1);
<a name="l10232"></a>10232     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a56d620b94b668ed7665d1616b2c54e48">MEMZERO</a>(p, <span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, 1);
<a name="l10233"></a><a class="code" href="../../d7/dc0/parse_8y.html#acbc28d5820d674dd4447a14c23de0a42">10233</a>     <a class="code" href="../../d7/dc0/parse_8y.html#aa92ae33c165140147305229fe3f53045">parser_initialize</a>(p);
<a name="l10234"></a>10234     <span class="keywordflow">return</span> p;
<a name="l10235"></a>10235 }
<a name="l10236"></a>10236 
<a name="l10237"></a>10237 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10238"></a>10238 <a class="code" href="../../d5/d11/ripper_8c.html#a175a11311538e1c0c3bc41c96a6a8aaf">rb_parser_new</a>(<span class="keywordtype">void</span>)
<a name="l10239"></a>10239 {
<a name="l10240"></a>10240     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *p = <a class="code" href="../../d7/dc0/parse_8y.html#a7f2caee3e846dda8fbb5e47831fcc9dd">parser_new</a>();
<a name="l10241"></a><a class="code" href="../../d7/dc0/parse_8y.html#ad5028a630a8c232882afc99601ab8a2e">10241</a> 
<a name="l10242"></a>10242     <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aa3094c0054b80ec2a7e50f9fe1e5f4b2">TypedData_Wrap_Struct</a>(0, &amp;parser_data_type, p);
<a name="l10243"></a>10243 }
<a name="l10244"></a>10244 
<a name="l10245"></a>10245 <span class="comment">/*</span>
<a name="l10246"></a>10246 <span class="comment"> *  call-seq:</span>
<a name="l10247"></a>10247 <span class="comment"> *    ripper#end_seen?   -&gt; Boolean</span>
<a name="l10248"></a>10248 <span class="comment"> *</span>
<a name="l10249"></a><a class="code" href="../../d7/dc0/parse_8y.html#a4380699b707ae09fa5a8b48da720deaf">10249</a> <span class="comment"> *  Return true if parsed source ended by +\_\_END\_\_+.</span>
<a name="l10250"></a>10250 <span class="comment"> */</span>
<a name="l10251"></a>10251 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10252"></a>10252 <a class="code" href="../../d5/d11/ripper_8c.html#a9ee877befd26d3832f3ea41a2b6fcb89">rb_parser_end_seen_p</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> vparser)
<a name="l10253"></a>10253 {
<a name="l10254"></a>10254     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser;
<a name="l10255"></a>10255 
<a name="l10256"></a>10256     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8dce6624396c492cdd1af3a4c5871556">TypedData_Get_Struct</a>(vparser, <span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, &amp;parser_data_type, parser);
<a name="l10257"></a>10257     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#ad2f5a8f89d8220cedad31569f711d8d1">ruby__end__seen</a> ? <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aacea3516b33941ce8149098e223a7466">Qtrue</a> : <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aba0717d2689eb68797421a02ab9295c6">Qfalse</a>;
<a name="l10258"></a>10258 }
<a name="l10259"></a>10259 
<a name="l10260"></a>10260 <span class="comment">/*</span>
<a name="l10261"></a>10261 <span class="comment"> *  call-seq:</span>
<a name="l10262"></a><a class="code" href="../../d7/dc0/parse_8y.html#a9d9dd7ad262a2518251912a1e31e15a9">10262</a> <span class="comment"> *    ripper#encoding   -&gt; encoding</span>
<a name="l10263"></a>10263 <span class="comment"> *</span>
<a name="l10264"></a>10264 <span class="comment"> *  Return encoding of the source.</span>
<a name="l10265"></a>10265 <span class="comment"> */</span>
<a name="l10266"></a>10266 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10267"></a>10267 <a class="code" href="../../d5/d11/ripper_8c.html#a7624c273f1693afcdbd66e987ff613f5">rb_parser_encoding</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> vparser)
<a name="l10268"></a>10268 {
<a name="l10269"></a>10269     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser;
<a name="l10270"></a>10270 
<a name="l10271"></a>10271     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8dce6624396c492cdd1af3a4c5871556">TypedData_Get_Struct</a>(vparser, <span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, &amp;parser_data_type, parser);
<a name="l10272"></a>10272     <span class="keywordflow">return</span> <a class="code" href="../../d5/db5/encoding_8c.html#ad4918664be7424ab9f961165eecb6c18">rb_enc_from_encoding</a>(parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a3741a6cddab1b32f6b2a7e372fbc03bb">enc</a>);
<a name="l10273"></a>10273 }
<a name="l10274"></a>10274 
<a name="l10275"></a>10275 <span class="comment">/*</span>
<a name="l10276"></a>10276 <span class="comment"> *  call-seq:</span>
<a name="l10277"></a>10277 <span class="comment"> *    ripper.yydebug   -&gt; true or false</span>
<a name="l10278"></a>10278 <span class="comment"> *</span>
<a name="l10279"></a>10279 <span class="comment"> *  Get yydebug.</span>
<a name="l10280"></a>10280 <span class="comment"> */</span>
<a name="l10281"></a>10281 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10282"></a>10282 <a class="code" href="../../d5/d11/ripper_8c.html#ac309f65e4a301ef5ba0eeaceecf2a11a">rb_parser_get_yydebug</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>)
<a name="l10283"></a>10283 {
<a name="l10284"></a>10284     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser;
<a name="l10285"></a>10285 
<a name="l10286"></a>10286     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8dce6624396c492cdd1af3a4c5871556">TypedData_Get_Struct</a>(<span class="keyword">self</span>, <span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, &amp;parser_data_type, parser);
<a name="l10287"></a><a class="code" href="../../d7/dc0/parse_8y.html#aada179bb4d8bf3345d354d060fa9b606">10287</a>     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a7fde6236fcb0f6e5d1d20ce98d9f0d01">yydebug</a> ? <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aacea3516b33941ce8149098e223a7466">Qtrue</a> : <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aba0717d2689eb68797421a02ab9295c6">Qfalse</a>;
<a name="l10288"></a>10288 }
<a name="l10289"></a>10289 
<a name="l10290"></a>10290 <span class="comment">/*</span>
<a name="l10291"></a>10291 <span class="comment"> *  call-seq:</span>
<a name="l10292"></a>10292 <span class="comment"> *    ripper.yydebug = flag</span>
<a name="l10293"></a>10293 <span class="comment"> *</span>
<a name="l10294"></a>10294 <span class="comment"> *  Set yydebug.</span>
<a name="l10295"></a>10295 <span class="comment"> */</span>
<a name="l10296"></a>10296 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10297"></a>10297 <a class="code" href="../../d5/d11/ripper_8c.html#a9c450b504b28c4c599201777d474c64b">rb_parser_set_yydebug</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> flag)
<a name="l10298"></a>10298 {
<a name="l10299"></a>10299     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser;
<a name="l10300"></a>10300 
<a name="l10301"></a>10301     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8dce6624396c492cdd1af3a4c5871556">TypedData_Get_Struct</a>(<span class="keyword">self</span>, <span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, &amp;parser_data_type, parser);
<a name="l10302"></a>10302     <a class="code" href="../../d5/d11/ripper_8c.html#a7fde6236fcb0f6e5d1d20ce98d9f0d01">yydebug</a> = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a117741045763c090b26e30a85bd0e0a6">RTEST</a>(flag);
<a name="l10303"></a>10303     <span class="keywordflow">return</span> flag;
<a name="l10304"></a>10304 }
<a name="l10305"></a><a class="code" href="../../d7/dc0/parse_8y.html#ac03fbbbe2d1f40883c0ed70f9fa0b517">10305</a> 
<a name="l10306"></a>10306 <span class="preprocessor">#ifdef YYMALLOC</span>
<a name="l10307"></a>10307 <span class="preprocessor"></span><span class="preprocessor">#define HEAPCNT(n, size) ((n) * (size) / sizeof(YYSTYPE))</span>
<a name="l10308"></a>10308 <span class="preprocessor"></span><span class="preprocessor">#define NEWHEAP() rb_node_newnode(NODE_ALLOCA, 0, (VALUE)parser-&gt;heap, 0)</span>
<a name="l10309"></a>10309 <span class="preprocessor"></span><span class="preprocessor">#define ADD2HEAP(n, c, p) ((parser-&gt;heap = (n))-&gt;u1.node = (p), \</span>
<a name="l10310"></a>10310 <span class="preprocessor">                           (n)-&gt;u3.cnt = (c), (p))</span>
<a name="l10311"></a>10311 <span class="preprocessor"></span>
<a name="l10312"></a>10312 <span class="keywordtype">void</span> *
<a name="l10313"></a><a class="code" href="../../d7/dc0/parse_8y.html#accf676c754e598aaeb80ff965c8a237c">10313</a> <a class="code" href="../../d5/d11/ripper_8c.html#a4f3ae9609fdc6c16d6024ae4de84ff33">rb_parser_malloc</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keywordtype">size_t</span> size)
<a name="l10314"></a>10314 {
<a name="l10315"></a>10315     <span class="keywordtype">size_t</span> cnt = <a class="code" href="../../d5/d11/ripper_8c.html#acf3ff49176923bd61102eb8f883c980b">HEAPCNT</a>(1, size);
<a name="l10316"></a>10316     NODE *n = <a class="code" href="../../d5/d11/ripper_8c.html#a92ae0a02ac027bda16153837bf0a30b9">NEWHEAP</a>();
<a name="l10317"></a>10317     <span class="keywordtype">void</span> *ptr = <a class="code" href="../../d8/db0/defines_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>(size);
<a name="l10318"></a>10318 
<a name="l10319"></a>10319     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a504c2a0536a65c4856fc2a40a75b1c31">ADD2HEAP</a>(n, cnt, ptr);
<a name="l10320"></a>10320 }
<a name="l10321"></a>10321 
<a name="l10322"></a>10322 <span class="keywordtype">void</span> *
<a name="l10323"></a>10323 <a class="code" href="../../d5/d11/ripper_8c.html#acbe59985ec91486f50f842251688a393">rb_parser_calloc</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keywordtype">size_t</span> nelem, <span class="keywordtype">size_t</span> size)
<a name="l10324"></a>10324 {
<a name="l10325"></a>10325     <span class="keywordtype">size_t</span> cnt = <a class="code" href="../../d5/d11/ripper_8c.html#acf3ff49176923bd61102eb8f883c980b">HEAPCNT</a>(nelem, size);
<a name="l10326"></a>10326     NODE *n = <a class="code" href="../../d5/d11/ripper_8c.html#a92ae0a02ac027bda16153837bf0a30b9">NEWHEAP</a>();
<a name="l10327"></a>10327     <span class="keywordtype">void</span> *ptr = <a class="code" href="../../d8/db0/defines_8h.html#ade8988c3fcdbca51eb623eb5f7ad5150">xcalloc</a>(nelem, size);
<a name="l10328"></a>10328 
<a name="l10329"></a>10329     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a504c2a0536a65c4856fc2a40a75b1c31">ADD2HEAP</a>(n, cnt, ptr);
<a name="l10330"></a>10330 }
<a name="l10331"></a>10331 
<a name="l10332"></a>10332 <span class="keywordtype">void</span> *
<a name="l10333"></a>10333 <a class="code" href="../../d5/d11/ripper_8c.html#ab363c21cad1809bc4ca2461c94caf63a">rb_parser_realloc</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keywordtype">void</span> *ptr, <span class="keywordtype">size_t</span> size)
<a name="l10334"></a>10334 {
<a name="l10335"></a>10335     NODE *n;
<a name="l10336"></a>10336     <span class="keywordtype">size_t</span> cnt = <a class="code" href="../../d5/d11/ripper_8c.html#acf3ff49176923bd61102eb8f883c980b">HEAPCNT</a>(1, size);
<a name="l10337"></a>10337 
<a name="l10338"></a>10338     <span class="keywordflow">if</span> (ptr &amp;&amp; (n = parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a48ef67bb7e0d3e6a353ecaf1401b8125">heap</a>) != NULL) {
<a name="l10339"></a>10339         <span class="keywordflow">do</span> {
<a name="l10340"></a>10340             <span class="keywordflow">if</span> (n-&gt;u1.node == ptr) {
<a name="l10341"></a>10341                 n-&gt;u1.node = ptr = <a class="code" href="../../d8/db0/defines_8h.html#a40740062faf2d95d4935112447c464ef">xrealloc</a>(ptr, size);
<a name="l10342"></a>10342                 <span class="keywordflow">if</span> (n-&gt;u3.cnt) n-&gt;u3.cnt = cnt;
<a name="l10343"></a>10343                 <span class="keywordflow">return</span> ptr;
<a name="l10344"></a><a class="code" href="../../d7/dc0/parse_8y.html#a180d8f7346d941624f1c808368cb7ae0">10344</a>             }
<a name="l10345"></a>10345         } <span class="keywordflow">while</span> ((n = n-&gt;u2.node) != NULL);
<a name="l10346"></a>10346     }
<a name="l10347"></a>10347     n = <a class="code" href="../../d5/d11/ripper_8c.html#a92ae0a02ac027bda16153837bf0a30b9">NEWHEAP</a>();
<a name="l10348"></a>10348     ptr = <a class="code" href="../../d8/db0/defines_8h.html#a40740062faf2d95d4935112447c464ef">xrealloc</a>(ptr, size);
<a name="l10349"></a>10349     <span class="keywordflow">return</span> <a class="code" href="../../d5/d11/ripper_8c.html#a504c2a0536a65c4856fc2a40a75b1c31">ADD2HEAP</a>(n, cnt, ptr);
<a name="l10350"></a>10350 }
<a name="l10351"></a>10351 
<a name="l10352"></a>10352 <span class="keywordtype">void</span>
<a name="l10353"></a>10353 <a class="code" href="../../d5/d11/ripper_8c.html#aa67ca2b93146fd0847214c19ced69daf">rb_parser_free</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keywordtype">void</span> *ptr)
<a name="l10354"></a>10354 {
<a name="l10355"></a>10355     NODE **prev = &amp;parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a48ef67bb7e0d3e6a353ecaf1401b8125">heap</a>, *n;
<a name="l10356"></a>10356 
<a name="l10357"></a>10357     <span class="keywordflow">while</span> ((n = *prev) != NULL) {
<a name="l10358"></a>10358         <span class="keywordflow">if</span> (n-&gt;u1.node == ptr) {
<a name="l10359"></a>10359             *prev = n-&gt;u2.node;
<a name="l10360"></a>10360             <a class="code" href="../../d8/d16/gc_8c.html#a53016811c87ff4c3ea839c9e85a9a9a4">rb_gc_force_recycle</a>((<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>)n);
<a name="l10361"></a>10361             <span class="keywordflow">break</span>;
<a name="l10362"></a>10362         }
<a name="l10363"></a>10363         prev = &amp;n-&gt;u2.node;
<a name="l10364"></a>10364     }
<a name="l10365"></a>10365     <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(ptr);
<a name="l10366"></a>10366 }
<a name="l10367"></a>10367 <span class="preprocessor">#endif</span>
<a name="l10368"></a>10368 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l10369"></a>10369 <span class="preprocessor"></span>
<a name="l10370"></a>10370 <span class="preprocessor">#ifdef RIPPER</span>
<a name="l10371"></a>10371 <span class="preprocessor"></span><span class="preprocessor">#ifdef RIPPER_DEBUG</span>
<a name="l10372"></a>10372 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keywordtype">int</span> rb_is_pointer_to_heap(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>);
<a name="l10373"></a>10373 
<a name="l10374"></a>10374 <span class="comment">/* :nodoc: */</span>
<a name="l10375"></a>10375 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10376"></a>10376 ripper_validate_object(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> x)
<a name="l10377"></a>10377 {
<a name="l10378"></a>10378     <span class="keywordflow">if</span> (x == <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aba0717d2689eb68797421a02ab9295c6">Qfalse</a>) <span class="keywordflow">return</span> x;
<a name="l10379"></a>10379     <span class="keywordflow">if</span> (x == <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aacea3516b33941ce8149098e223a7466">Qtrue</a>) <span class="keywordflow">return</span> x;
<a name="l10380"></a>10380     <span class="keywordflow">if</span> (x == <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>) <span class="keywordflow">return</span> x;
<a name="l10381"></a>10381     <span class="keywordflow">if</span> (x == <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a2edf6990280eb2637623ccd421dee4f0">Qundef</a>)
<a name="l10382"></a>10382         <a class="code" href="../../db/dcc/error_8c.html#a0f771a2840561f1838169b3d7d4616f3">rb_raise</a>(<a class="code" href="../../db/dcc/error_8c.html#ab5e2a9fec766c75176fbb262bfe6a596">rb_eArgError</a>, <span class="stringliteral">&quot;Qundef given&quot;</span>);
<a name="l10383"></a>10383     <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#acf2fcf97dcf9c7c35452730eb3e2aeb2">FIXNUM_P</a>(x)) <span class="keywordflow">return</span> x;
<a name="l10384"></a>10384     <span class="keywordflow">if</span> (<a class="code" href="../../dc/d0c/cparse_8c.html#a637bc5a232034ee3fd411f8bef091566">SYMBOL_P</a>(x)) <span class="keywordflow">return</span> x;
<a name="l10385"></a>10385     <span class="keywordflow">if</span> (!rb_is_pointer_to_heap(x))
<a name="l10386"></a>10386         <a class="code" href="../../db/dcc/error_8c.html#a0f771a2840561f1838169b3d7d4616f3">rb_raise</a>(<a class="code" href="../../db/dcc/error_8c.html#ab5e2a9fec766c75176fbb262bfe6a596">rb_eArgError</a>, <span class="stringliteral">&quot;invalid pointer: %p&quot;</span>, x);
<a name="l10387"></a>10387     <span class="keywordflow">switch</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a394faf7191f18552a20cb17ce14226f0">TYPE</a>(x)) {
<a name="l10388"></a>10388       <span class="keywordflow">case</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a22a8c2a4bbaae9b68f65c9bb92fd4e39">T_STRING</a>:
<a name="l10389"></a>10389       <span class="keywordflow">case</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#abed71c72d5c3083041d52ad25630270e">T_OBJECT</a>:
<a name="l10390"></a>10390       <span class="keywordflow">case</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#abbd332f6f94d77e0a369c7720128639e">T_ARRAY</a>:
<a name="l10391"></a>10391       <span class="keywordflow">case</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a41ac74a27dd1eadc2ca86d10590f2163">T_BIGNUM</a>:
<a name="l10392"></a>10392       <span class="keywordflow">case</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3d072e0c25cf678e9b8601b957b92eae">T_FLOAT</a>:
<a name="l10393"></a>10393         <span class="keywordflow">return</span> x;
<a name="l10394"></a>10394       <span class="keywordflow">case</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a5f1cc49c4da51d5bdffa64be79ff6fb0">T_NODE</a>:
<a name="l10395"></a>10395         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(x) != NODE_LASGN) {
<a name="l10396"></a>10396             <a class="code" href="../../db/dcc/error_8c.html#a0f771a2840561f1838169b3d7d4616f3">rb_raise</a>(<a class="code" href="../../db/dcc/error_8c.html#ab5e2a9fec766c75176fbb262bfe6a596">rb_eArgError</a>, <span class="stringliteral">&quot;NODE given: %p&quot;</span>, x);
<a name="l10397"></a>10397         }
<a name="l10398"></a>10398         <span class="keywordflow">return</span> ((NODE *)x)-&gt;nd_rval;
<a name="l10399"></a>10399       <span class="keywordflow">default</span>:
<a name="l10400"></a>10400         <a class="code" href="../../db/dcc/error_8c.html#a0f771a2840561f1838169b3d7d4616f3">rb_raise</a>(<a class="code" href="../../db/dcc/error_8c.html#ab5e2a9fec766c75176fbb262bfe6a596">rb_eArgError</a>, <span class="stringliteral">&quot;wrong type of ruby object: %p (%s)&quot;</span>,
<a name="l10401"></a>10401                  x, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a9b4f42ada717bfbe7a78830639476aed">rb_obj_classname</a>(x));
<a name="l10402"></a>10402     }
<a name="l10403"></a>10403     <span class="keywordflow">return</span> x;
<a name="l10404"></a>10404 }
<a name="l10405"></a>10405 <span class="preprocessor">#endif</span>
<a name="l10406"></a><a class="code" href="../../d7/dc0/parse_8y.html#a038ce54673add5dd7f977891d930a1d0">10406</a> <span class="preprocessor"></span>
<a name="l10407"></a>10407 <span class="preprocessor">#define validate(x) ((x) = get_value(x))</span>
<a name="l10408"></a>10408 <span class="preprocessor"></span>
<a name="l10409"></a>10409 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10410"></a>10410 ripper_dispatch0(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> mid)
<a name="l10411"></a>10411 {
<a name="l10412"></a>10412     <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a6a973fe624aa9aa9ba0cdeb6792d3187" title="Calls a method.">rb_funcall</a>(parser-&gt;value, mid, 0);
<a name="l10413"></a>10413 }
<a name="l10414"></a>10414 
<a name="l10415"></a>10415 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10416"></a>10416 ripper_dispatch1(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> mid, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> a)
<a name="l10417"></a>10417 {
<a name="l10418"></a>10418     validate(a);
<a name="l10419"></a>10419     <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a6a973fe624aa9aa9ba0cdeb6792d3187" title="Calls a method.">rb_funcall</a>(parser-&gt;value, mid, 1, a);
<a name="l10420"></a>10420 }
<a name="l10421"></a>10421 
<a name="l10422"></a>10422 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10423"></a>10423 ripper_dispatch2(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> mid, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> a, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> b)
<a name="l10424"></a>10424 {
<a name="l10425"></a>10425     validate(a);
<a name="l10426"></a>10426     validate(b);
<a name="l10427"></a>10427     <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a6a973fe624aa9aa9ba0cdeb6792d3187" title="Calls a method.">rb_funcall</a>(parser-&gt;value, mid, 2, a, b);
<a name="l10428"></a>10428 }
<a name="l10429"></a>10429 
<a name="l10430"></a>10430 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10431"></a>10431 ripper_dispatch3(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> mid, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> a, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> b, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> c)
<a name="l10432"></a>10432 {
<a name="l10433"></a>10433     validate(a);
<a name="l10434"></a>10434     validate(b);
<a name="l10435"></a>10435     validate(c);
<a name="l10436"></a>10436     <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a6a973fe624aa9aa9ba0cdeb6792d3187" title="Calls a method.">rb_funcall</a>(parser-&gt;value, mid, 3, a, b, c);
<a name="l10437"></a>10437 }
<a name="l10438"></a>10438 
<a name="l10439"></a>10439 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10440"></a>10440 ripper_dispatch4(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> mid, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> a, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> b, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> c, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> d)
<a name="l10441"></a>10441 {
<a name="l10442"></a>10442     validate(a);
<a name="l10443"></a>10443     validate(b);
<a name="l10444"></a>10444     validate(c);
<a name="l10445"></a>10445     validate(d);
<a name="l10446"></a>10446     <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a6a973fe624aa9aa9ba0cdeb6792d3187" title="Calls a method.">rb_funcall</a>(parser-&gt;value, mid, 4, a, b, c, d);
<a name="l10447"></a>10447 }
<a name="l10448"></a>10448 
<a name="l10449"></a>10449 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10450"></a>10450 ripper_dispatch5(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> mid, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> a, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> b, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> c, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> d, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> e)
<a name="l10451"></a>10451 {
<a name="l10452"></a>10452     validate(a);
<a name="l10453"></a>10453     validate(b);
<a name="l10454"></a>10454     validate(c);
<a name="l10455"></a>10455     validate(d);
<a name="l10456"></a>10456     validate(e);
<a name="l10457"></a>10457     <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a6a973fe624aa9aa9ba0cdeb6792d3187" title="Calls a method.">rb_funcall</a>(parser-&gt;value, mid, 5, a, b, c, d, e);
<a name="l10458"></a>10458 }
<a name="l10459"></a>10459 
<a name="l10460"></a>10460 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>kw_assoc {
<a name="l10461"></a>10461     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> id;
<a name="l10462"></a>10462     <span class="keyword">const</span> <span class="keywordtype">char</span> *name;
<a name="l10463"></a>10463 } keyword_to_name[] = {
<a name="l10464"></a>10464     {<a class="code" href="../../d5/d11/ripper_8c.html#aaad7597969d430a0cd28b7715943e784">keyword_class</a>,     <span class="stringliteral">&quot;class&quot;</span>},
<a name="l10465"></a>10465     {<a class="code" href="../../d5/d11/ripper_8c.html#a608cdee478d71d061a7fe4463717d923">keyword_module</a>,    <span class="stringliteral">&quot;module&quot;</span>},
<a name="l10466"></a>10466     {<a class="code" href="../../d5/d11/ripper_8c.html#ac5156e971018e2f1a80e8b638bf1ad83">keyword_def</a>,       <span class="stringliteral">&quot;def&quot;</span>},
<a name="l10467"></a>10467     {<a class="code" href="../../d5/d11/ripper_8c.html#a0738772680283d265974b4f744404b58">keyword_undef</a>,     <span class="stringliteral">&quot;undef&quot;</span>},
<a name="l10468"></a>10468     {<a class="code" href="../../d5/d11/ripper_8c.html#a6068ed81f0c694c4874c0c90b398e198">keyword_begin</a>,     <span class="stringliteral">&quot;begin&quot;</span>},
<a name="l10469"></a>10469     {<a class="code" href="../../d5/d11/ripper_8c.html#adb3283c05c39cb946a765e95edfe4b79">keyword_rescue</a>,    <span class="stringliteral">&quot;rescue&quot;</span>},
<a name="l10470"></a>10470     {<a class="code" href="../../d5/d11/ripper_8c.html#a2cc9838aaa31cc63122bedee8cec14ca">keyword_ensure</a>,    <span class="stringliteral">&quot;ensure&quot;</span>},
<a name="l10471"></a>10471     {<a class="code" href="../../d5/d11/ripper_8c.html#a3887eba1b6af6ce3835d41cf832b4fa1">keyword_end</a>,       <span class="stringliteral">&quot;end&quot;</span>},
<a name="l10472"></a>10472     {<a class="code" href="../../d5/d11/ripper_8c.html#a0f1bd4f847f3d2e6fbaa432d68793f24">keyword_if</a>,        <span class="stringliteral">&quot;if&quot;</span>},
<a name="l10473"></a>10473     {<a class="code" href="../../d5/d11/ripper_8c.html#aec71ecb43b9af0c21560c7ebc47ffc13">keyword_unless</a>,    <span class="stringliteral">&quot;unless&quot;</span>},
<a name="l10474"></a>10474     {keyword_then,      <span class="stringliteral">&quot;then&quot;</span>},
<a name="l10475"></a>10475     {<a class="code" href="../../d5/d11/ripper_8c.html#a4e72412ea5c9c9a39319fb0224a0a23b">keyword_elsif</a>,     <span class="stringliteral">&quot;elsif&quot;</span>},
<a name="l10476"></a>10476     {<a class="code" href="../../d5/d11/ripper_8c.html#ab9f440f375bc044468920cc3dc8f9b07">keyword_else</a>,      <span class="stringliteral">&quot;else&quot;</span>},
<a name="l10477"></a>10477     {<a class="code" href="../../d5/d11/ripper_8c.html#a05aac07545e64b6a0054e8901a38992f">keyword_case</a>,      <span class="stringliteral">&quot;case&quot;</span>},
<a name="l10478"></a>10478     {<a class="code" href="../../d5/d11/ripper_8c.html#a5b03b4dec3069e33b82fb88f1beb21c7">keyword_when</a>,      <span class="stringliteral">&quot;when&quot;</span>},
<a name="l10479"></a>10479     {<a class="code" href="../../d5/d11/ripper_8c.html#a51e8071a22ee8afe26d720c2ea129c89">keyword_while</a>,     <span class="stringliteral">&quot;while&quot;</span>},
<a name="l10480"></a>10480     {<a class="code" href="../../d5/d11/ripper_8c.html#a479b05419c8b27b3aaeeb728e39b3972">keyword_until</a>,     <span class="stringliteral">&quot;until&quot;</span>},
<a name="l10481"></a>10481     {<a class="code" href="../../d5/d11/ripper_8c.html#ad586477cf71406d625d53eae311bdf11">keyword_for</a>,       <span class="stringliteral">&quot;for&quot;</span>},
<a name="l10482"></a>10482     {<a class="code" href="../../d5/d11/ripper_8c.html#a3df7a0f57555b3aa2a155393d6b1c4dc">keyword_break</a>,     <span class="stringliteral">&quot;break&quot;</span>},
<a name="l10483"></a>10483     {<a class="code" href="../../d5/d11/ripper_8c.html#a6f1a9cbe32cbd55a1e29b0d066bc9b09">keyword_next</a>,      <span class="stringliteral">&quot;next&quot;</span>},
<a name="l10484"></a>10484     {<a class="code" href="../../d5/d11/ripper_8c.html#a208e0237b3ea51246b610d113ba0253e">keyword_redo</a>,      <span class="stringliteral">&quot;redo&quot;</span>},
<a name="l10485"></a>10485     {<a class="code" href="../../d5/d11/ripper_8c.html#a8c2d03875c00212b36b822b056116426">keyword_retry</a>,     <span class="stringliteral">&quot;retry&quot;</span>},
<a name="l10486"></a>10486     {<a class="code" href="../../d5/d11/ripper_8c.html#a24cfafd1c70ce74a7e26d8600e4618b6">keyword_in</a>,        <span class="stringliteral">&quot;in&quot;</span>},
<a name="l10487"></a>10487     {<a class="code" href="../../d5/d11/ripper_8c.html#af0eaec49b504972deb0631ab428cf7f0">keyword_do</a>,        <span class="stringliteral">&quot;do&quot;</span>},
<a name="l10488"></a>10488     {<a class="code" href="../../d5/d11/ripper_8c.html#a531ddac2ff71be80ea02f3cb575b0d82">keyword_do_cond</a>,   <span class="stringliteral">&quot;do&quot;</span>},
<a name="l10489"></a>10489     {<a class="code" href="../../d5/d11/ripper_8c.html#ac943360c0f2387c1797ba9b77537e915">keyword_do_block</a>,  <span class="stringliteral">&quot;do&quot;</span>},
<a name="l10490"></a>10490     {<a class="code" href="../../d5/d11/ripper_8c.html#ab2da8a02f53da70f08f59bfcefb370d0">keyword_return</a>,    <span class="stringliteral">&quot;return&quot;</span>},
<a name="l10491"></a>10491     {<a class="code" href="../../d5/d11/ripper_8c.html#a23d86621a145239a20c9496993a87e1a">keyword_yield</a>,     <span class="stringliteral">&quot;yield&quot;</span>},
<a name="l10492"></a>10492     {<a class="code" href="../../d5/d11/ripper_8c.html#aeb6f2f7f0aff1706e3fcb6b1777ee784">keyword_super</a>,     <span class="stringliteral">&quot;super&quot;</span>},
<a name="l10493"></a>10493     {<a class="code" href="../../d5/d11/ripper_8c.html#ab8442a74bd68773667e1d016e17a8f20">keyword_self</a>,      <span class="stringliteral">&quot;self&quot;</span>},
<a name="l10494"></a>10494     {<a class="code" href="../../d5/d11/ripper_8c.html#a97061c623fd2070a72366daa7cd8386d">keyword_nil</a>,       <span class="stringliteral">&quot;nil&quot;</span>},
<a name="l10495"></a><a class="code" href="../../d7/dc0/parse_8y.html#ae6c0cdb599962f345014a454d1465af0">10495</a>     {<a class="code" href="../../d5/d11/ripper_8c.html#a4db6e341df3e5d2abf5887085e9c5f77">keyword_true</a>,      <span class="stringliteral">&quot;true&quot;</span>},
<a name="l10496"></a>10496     {<a class="code" href="../../d5/d11/ripper_8c.html#acabfb39849e96211b6441b971d4ea0a7">keyword_false</a>,     <span class="stringliteral">&quot;false&quot;</span>},
<a name="l10497"></a>10497     {<a class="code" href="../../d5/d11/ripper_8c.html#a4b2a7871e12bd91d4506c5a3904daee9">keyword_and</a>,       <span class="stringliteral">&quot;and&quot;</span>},
<a name="l10498"></a>10498     {<a class="code" href="../../d5/d11/ripper_8c.html#a0a3412db66a7bfe6e86a085ca4213f0a">keyword_or</a>,        <span class="stringliteral">&quot;or&quot;</span>},
<a name="l10499"></a>10499     {<a class="code" href="../../d5/d11/ripper_8c.html#aa7618608a8ca97b99b9b2760935869eb">keyword_not</a>,       <span class="stringliteral">&quot;not&quot;</span>},
<a name="l10500"></a>10500     {<a class="code" href="../../d5/d11/ripper_8c.html#a60d71c343a9b4aa799c67892d25dc12b">modifier_if</a>,       <span class="stringliteral">&quot;if&quot;</span>},
<a name="l10501"></a>10501     {<a class="code" href="../../d5/d11/ripper_8c.html#ac9823d8658cc0ef3ac7606852c84e5c8">modifier_unless</a>,   <span class="stringliteral">&quot;unless&quot;</span>},
<a name="l10502"></a>10502     {<a class="code" href="../../d5/d11/ripper_8c.html#acc4558c7b26aa158e3db0c5677b74533">modifier_while</a>,    <span class="stringliteral">&quot;while&quot;</span>},
<a name="l10503"></a>10503     {<a class="code" href="../../d5/d11/ripper_8c.html#a977c1146deb5448df4d5b1138d7c742e">modifier_until</a>,    <span class="stringliteral">&quot;until&quot;</span>},
<a name="l10504"></a>10504     {<a class="code" href="../../d5/d11/ripper_8c.html#a68a67be66a4f843e42b55a28c9d3dcfa">modifier_rescue</a>,   <span class="stringliteral">&quot;rescue&quot;</span>},
<a name="l10505"></a>10505     {<a class="code" href="../../d5/d11/ripper_8c.html#ab516dc23f7932eee4a881bb364b0bd73">keyword_alias</a>,     <span class="stringliteral">&quot;alias&quot;</span>},
<a name="l10506"></a>10506     {<a class="code" href="../../d5/d11/ripper_8c.html#afb1d7e76236b8c3c87f3a241263313a1">keyword_defined</a>,   <span class="stringliteral">&quot;defined?&quot;</span>},
<a name="l10507"></a>10507     {<a class="code" href="../../d5/d11/ripper_8c.html#ac4018498741336ff993f8dca4a489bb0">keyword_BEGIN</a>,     <span class="stringliteral">&quot;BEGIN&quot;</span>},
<a name="l10508"></a>10508     {<a class="code" href="../../d5/d11/ripper_8c.html#a301644f3b615b72fae2733620f7fd48c">keyword_END</a>,       <span class="stringliteral">&quot;END&quot;</span>},
<a name="l10509"></a><a class="code" href="../../d7/dc0/parse_8y.html#af6073dd45c01beeb98d4a07c13a581f8">10509</a>     {<a class="code" href="../../d5/d11/ripper_8c.html#a647bc6d3b4755012d0a547a771983690">keyword__LINE__</a>,   <span class="stringliteral">&quot;__LINE__&quot;</span>},
<a name="l10510"></a>10510     {<a class="code" href="../../d5/d11/ripper_8c.html#abc6d3baf1526f6522fb096804f3e6f3f">keyword__FILE__</a>,   <span class="stringliteral">&quot;__FILE__&quot;</span>},
<a name="l10511"></a>10511     {<a class="code" href="../../d5/d11/ripper_8c.html#ae3a907545a96704ee7c94870da496bf0">keyword__ENCODING__</a>, <span class="stringliteral">&quot;__ENCODING__&quot;</span>},
<a name="l10512"></a>10512     {0, <a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>}
<a name="l10513"></a>10513 };
<a name="l10514"></a>10514 
<a name="l10515"></a>10515 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>*
<a name="l10516"></a>10516 keyword_id_to_str(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l10517"></a>10517 {
<a name="l10518"></a>10518     <span class="keyword">const</span> <span class="keyword">struct </span>kw_assoc *a;
<a name="l10519"></a><a class="code" href="../../d7/dc0/parse_8y.html#a50e6c67775b82211332ccb455ea74f11">10519</a> 
<a name="l10520"></a>10520     <span class="keywordflow">for</span> (a = keyword_to_name; a-&gt;id; a++) {
<a name="l10521"></a>10521         <span class="keywordflow">if</span> (a-&gt;id == <span class="keywordtype">id</span>)
<a name="l10522"></a>10522             <span class="keywordflow">return</span> a-&gt;name;
<a name="l10523"></a>10523     }
<a name="l10524"></a>10524     <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l10525"></a>10525 }
<a name="l10526"></a>10526 
<a name="l10527"></a>10527 <span class="preprocessor">#undef ripper_id2sym</span>
<a name="l10528"></a>10528 <span class="preprocessor"></span><span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10529"></a>10529 <a class="code" href="../../d3/d09/ripper_8y.html#a72cda847e61be0cba59c906a237bc4aa">ripper_id2sym</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>)
<a name="l10530"></a>10530 {
<a name="l10531"></a>10531     <span class="keyword">const</span> <span class="keywordtype">char</span> *name;
<a name="l10532"></a>10532     <span class="keywordtype">char</span> buf[8];
<a name="l10533"></a>10533 
<a name="l10534"></a>10534     <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &lt;= 256) {
<a name="l10535"></a>10535         buf[0] = (char)<span class="keywordtype">id</span>;
<a name="l10536"></a>10536         buf[1] = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l10537"></a>10537         <span class="keywordflow">return</span> <a class="code" href="../../dc/d0c/cparse_8c.html#a48bfb6519a45249fb2ec0193ea3b6e1c">ID2SYM</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a06f1137a7428ccb3b70848762eab967e">rb_intern2</a>(buf, 1));
<a name="l10538"></a>10538     }
<a name="l10539"></a>10539     <span class="keywordflow">if</span> ((name = keyword_id_to_str(<span class="keywordtype">id</span>))) {
<a name="l10540"></a>10540         <span class="keywordflow">return</span> <a class="code" href="../../dc/d0c/cparse_8c.html#a48bfb6519a45249fb2ec0193ea3b6e1c">ID2SYM</a>(<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(name));
<a name="l10541"></a>10541     }
<a name="l10542"></a>10542     <span class="keywordflow">switch</span> (<span class="keywordtype">id</span>) {
<a name="l10543"></a>10543       <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#aa48378dc724b0fb063b10d61ebcf0c82">tOROP</a>:
<a name="l10544"></a>10544         name = <span class="stringliteral">&quot;||&quot;</span>;
<a name="l10545"></a>10545         <span class="keywordflow">break</span>;
<a name="l10546"></a>10546       <span class="keywordflow">case</span> <a class="code" href="../../d5/d11/ripper_8c.html#a65277f756450c2f9e7117faf2c01339a">tANDOP</a>:
<a name="l10547"></a>10547         name = <span class="stringliteral">&quot;&amp;&amp;&quot;</span>;
<a name="l10548"></a>10548         <span class="keywordflow">break</span>;
<a name="l10549"></a>10549       <span class="keywordflow">default</span>:
<a name="l10550"></a>10550         name = <a class="code" href="../../d5/d11/ripper_8c.html#a877bc58c495643fcf49dc64c44631e72">rb_id2name</a>(<span class="keywordtype">id</span>);
<a name="l10551"></a>10551         <span class="keywordflow">if</span> (!name) {
<a name="l10552"></a>10552             <a class="code" href="../../db/dcc/error_8c.html#a2d5fb28e54f792e7341b2c45f52f3860">rb_bug</a>(<span class="stringliteral">&quot;cannot convert ID to string: %ld&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<span class="keywordtype">id</span>);
<a name="l10553"></a>10553         }
<a name="l10554"></a>10554         <span class="keywordflow">return</span> <a class="code" href="../../dc/d0c/cparse_8c.html#a48bfb6519a45249fb2ec0193ea3b6e1c">ID2SYM</a>(<span class="keywordtype">id</span>);
<a name="l10555"></a>10555     }
<a name="l10556"></a>10556     <span class="keywordflow">return</span> <a class="code" href="../../dc/d0c/cparse_8c.html#a48bfb6519a45249fb2ec0193ea3b6e1c">ID2SYM</a>(<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(name));
<a name="l10557"></a>10557 }
<a name="l10558"></a>10558 
<a name="l10559"></a>10559 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a>
<a name="l10560"></a>10560 ripper_get_id(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> v)
<a name="l10561"></a>10561 {
<a name="l10562"></a>10562     NODE *nd;
<a name="l10563"></a>10563     <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#ac4f895997656c2abd27a29a8b8e982ca">RB_TYPE_P</a>(v, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a5f1cc49c4da51d5bdffa64be79ff6fb0">T_NODE</a>)) <span class="keywordflow">return</span> 0;
<a name="l10564"></a>10564     nd = (NODE *)v;
<a name="l10565"></a>10565     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(nd) != <a class="code" href="../../d3/d09/ripper_8y.html#aa9d208a2eb1e5266beea027e10f3d472">NODE_LASGN</a>) <span class="keywordflow">return</span> 0;
<a name="l10566"></a>10566     <span class="keywordflow">return</span> nd-&gt;nd_vid;
<a name="l10567"></a>10567 }
<a name="l10568"></a>10568 
<a name="l10569"></a>10569 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10570"></a>10570 ripper_get_value(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> v)
<a name="l10571"></a>10571 {
<a name="l10572"></a>10572     NODE *nd;
<a name="l10573"></a>10573     <span class="keywordflow">if</span> (v == <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a2edf6990280eb2637623ccd421dee4f0">Qundef</a>) <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>;
<a name="l10574"></a>10574     <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#ac4f895997656c2abd27a29a8b8e982ca">RB_TYPE_P</a>(v, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a5f1cc49c4da51d5bdffa64be79ff6fb0">T_NODE</a>)) <span class="keywordflow">return</span> v;
<a name="l10575"></a>10575     nd = (NODE *)v;
<a name="l10576"></a>10576     <span class="keywordflow">if</span> (<a class="code" href="../../d3/d09/ripper_8y.html#ade12c589b26f55f089dc25d689249c11">nd_type</a>(nd) != <a class="code" href="../../d3/d09/ripper_8y.html#aa9d208a2eb1e5266beea027e10f3d472">NODE_LASGN</a>) <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>;
<a name="l10577"></a>10577     <span class="keywordflow">return</span> nd-&gt;nd_rval;
<a name="l10578"></a>10578 }
<a name="l10579"></a>10579 
<a name="l10580"></a><a class="code" href="../../d7/dc0/parse_8y.html#a02bf3912e8e63e37a6c78ab3b6edc101">10580</a> <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l10581"></a>10581 ripper_compile_error(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...)
<a name="l10582"></a>10582 {
<a name="l10583"></a>10583     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str;
<a name="l10584"></a>10584     va_list args;
<a name="l10585"></a>10585 
<a name="l10586"></a>10586     va_start(args, fmt);
<a name="l10587"></a>10587     str = <a class="code" href="../../db/d2e/intern_8h.html#a13e29e5637f1d2fdf778399849da0d34">rb_vsprintf</a>(fmt, args);
<a name="l10588"></a>10588     va_end(args);
<a name="l10589"></a>10589     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a6a973fe624aa9aa9ba0cdeb6792d3187" title="Calls a method.">rb_funcall</a>(parser-&gt;value, <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;compile_error&quot;</span>), 1, str);
<a name="l10590"></a>10590 }
<a name="l10591"></a>10591 
<a name="l10592"></a>10592 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l10593"></a>10593 ripper_warn0(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt)
<a name="l10594"></a>10594 {
<a name="l10595"></a>10595     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a6a973fe624aa9aa9ba0cdeb6792d3187" title="Calls a method.">rb_funcall</a>(parser-&gt;value, <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;warn&quot;</span>), 1, <a class="code" href="../../d5/d11/ripper_8c.html#a774f72da4a84c6fe41cf3dc05952646c">STR_NEW2</a>(fmt));
<a name="l10596"></a>10596 }
<a name="l10597"></a>10597 
<a name="l10598"></a>10598 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l10599"></a>10599 ripper_warnI(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, <span class="keywordtype">int</span> a)
<a name="l10600"></a>10600 {
<a name="l10601"></a>10601     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a6a973fe624aa9aa9ba0cdeb6792d3187" title="Calls a method.">rb_funcall</a>(parser-&gt;value, <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;warn&quot;</span>), 2,
<a name="l10602"></a>10602                <a class="code" href="../../d5/d11/ripper_8c.html#a774f72da4a84c6fe41cf3dc05952646c">STR_NEW2</a>(fmt), <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aca9f83a35416ed9d6e0b860afa5eaf0f">INT2NUM</a>(a));
<a name="l10603"></a>10603 }
<a name="l10604"></a>10604 
<a name="l10605"></a>10605 <span class="preprocessor">#if 0</span>
<a name="l10606"></a>10606 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l10607"></a>10607 ripper_warnS(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, <span class="keyword">const</span> <span class="keywordtype">char</span> *str)
<a name="l10608"></a>10608 {
<a name="l10609"></a>10609     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a6a973fe624aa9aa9ba0cdeb6792d3187" title="Calls a method.">rb_funcall</a>(parser-&gt;value, <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;warn&quot;</span>), 2,
<a name="l10610"></a>10610                <a class="code" href="../../d5/d11/ripper_8c.html#a774f72da4a84c6fe41cf3dc05952646c">STR_NEW2</a>(fmt), <a class="code" href="../../d5/d11/ripper_8c.html#a774f72da4a84c6fe41cf3dc05952646c">STR_NEW2</a>(str));
<a name="l10611"></a>10611 }
<a name="l10612"></a>10612 <span class="preprocessor">#endif</span>
<a name="l10613"></a>10613 <span class="preprocessor"></span>
<a name="l10614"></a>10614 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l10615"></a>10615 ripper_warning0(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt)
<a name="l10616"></a>10616 {
<a name="l10617"></a>10617     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a6a973fe624aa9aa9ba0cdeb6792d3187" title="Calls a method.">rb_funcall</a>(parser-&gt;value, <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;warning&quot;</span>), 1, <a class="code" href="../../d5/d11/ripper_8c.html#a774f72da4a84c6fe41cf3dc05952646c">STR_NEW2</a>(fmt));
<a name="l10618"></a>10618 }
<a name="l10619"></a>10619 
<a name="l10620"></a>10620 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l10621"></a><a class="code" href="../../d7/dc0/parse_8y.html#ac1292d5338dbd82db26c883f45326560">10621</a> ripper_warningS(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, <span class="keyword">const</span> <span class="keywordtype">char</span> *str)
<a name="l10622"></a>10622 {
<a name="l10623"></a>10623     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a6a973fe624aa9aa9ba0cdeb6792d3187" title="Calls a method.">rb_funcall</a>(parser-&gt;value, <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;warning&quot;</span>), 2,
<a name="l10624"></a>10624                <a class="code" href="../../d5/d11/ripper_8c.html#a774f72da4a84c6fe41cf3dc05952646c">STR_NEW2</a>(fmt), <a class="code" href="../../d5/d11/ripper_8c.html#a774f72da4a84c6fe41cf3dc05952646c">STR_NEW2</a>(str));
<a name="l10625"></a>10625 }
<a name="l10626"></a>10626 
<a name="l10627"></a><a class="code" href="../../d7/dc0/parse_8y.html#a8e8b5c2555ec361a424b9a7b554bbeb0">10627</a> <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10628"></a>10628 ripper_lex_get_generic(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> src)
<a name="l10629"></a>10629 {
<a name="l10630"></a>10630     <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a6a973fe624aa9aa9ba0cdeb6792d3187" title="Calls a method.">rb_funcall</a>(src, ripper_id_gets, 0);
<a name="l10631"></a>10631 }
<a name="l10632"></a>10632 
<a name="l10633"></a><a class="code" href="../../d7/dc0/parse_8y.html#ada4f67a980f0f983b65e40843f2cc7ed">10633</a> <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10634"></a>10634 ripper_s_allocate(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> klass)
<a name="l10635"></a>10635 {
<a name="l10636"></a>10636     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *p;
<a name="l10637"></a>10637     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>;
<a name="l10638"></a>10638 
<a name="l10639"></a>10639     p = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a79041aa2bc7439c11906a86f82a52eb6">ALLOC_N</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, 1);
<a name="l10640"></a>10640     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a56d620b94b668ed7665d1616b2c54e48">MEMZERO</a>(p, <span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, 1);
<a name="l10641"></a>10641     <span class="keyword">self</span> = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aa3094c0054b80ec2a7e50f9fe1e5f4b2">TypedData_Wrap_Struct</a>(klass, &amp;parser_data_type, p);
<a name="l10642"></a>10642     p-&gt;value = <span class="keyword">self</span>;
<a name="l10643"></a>10643     <span class="keywordflow">return</span> <span class="keyword">self</span>;
<a name="l10644"></a>10644 }
<a name="l10645"></a>10645 
<a name="l10646"></a>10646 <span class="preprocessor">#define ripper_initialized_p(r) ((r)-&gt;parser_lex_input != 0)</span>
<a name="l10647"></a>10647 <span class="preprocessor"></span>
<a name="l10648"></a>10648 <span class="comment">/*</span>
<a name="l10649"></a>10649 <span class="comment"> *  call-seq:</span>
<a name="l10650"></a>10650 <span class="comment"> *    Ripper.new(src, filename=&quot;(ripper)&quot;, lineno=1) -&gt; ripper</span>
<a name="l10651"></a>10651 <span class="comment"> *</span>
<a name="l10652"></a>10652 <span class="comment"> *  Create a new Ripper object.</span>
<a name="l10653"></a>10653 <span class="comment"> *  _src_ must be a String, an IO, or an Object which has #gets method.</span>
<a name="l10654"></a>10654 <span class="comment"> *</span>
<a name="l10655"></a>10655 <span class="comment"> *  This method does not starts parsing.</span>
<a name="l10656"></a>10656 <span class="comment"> *  See also Ripper#parse and Ripper.parse.</span>
<a name="l10657"></a>10657 <span class="comment"> */</span>
<a name="l10658"></a>10658 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10659"></a>10659 ripper_initialize(<span class="keywordtype">int</span> <a class="code" href="../../df/d77/ruby_8c.html#ad1447518f4372828b8435ae82e48499e">argc</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *<a class="code" href="../../df/d77/ruby_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>)
<a name="l10660"></a>10660 {
<a name="l10661"></a>10661     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser;
<a name="l10662"></a>10662     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> src, fname, lineno;
<a name="l10663"></a>10663 
<a name="l10664"></a><a class="code" href="../../d7/dc0/parse_8y.html#a7c3a1c2399a768079735435dbbb3b5f4">10664</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8dce6624396c492cdd1af3a4c5871556">TypedData_Get_Struct</a>(<span class="keyword">self</span>, <span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, &amp;parser_data_type, parser);
<a name="l10665"></a>10665     <a class="code" href="../../d7/d19/group__defmethod.html#gaa7bed88640f01bee619f85fda09d28d7">rb_scan_args</a>(argc, argv, <span class="stringliteral">&quot;12&quot;</span>, &amp;src, &amp;fname, &amp;lineno);
<a name="l10666"></a>10666     <span class="keywordflow">if</span> (<a class="code" href="../../db/d2e/intern_8h.html#a33e614c406d6b64d605ad0ef3f3ccb19">rb_obj_respond_to</a>(src, ripper_id_gets, 0)) {
<a name="l10667"></a>10667         parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#ac6081a8fb34f2662c83a12cae955e14c">parser_lex_gets</a> = ripper_lex_get_generic;
<a name="l10668"></a>10668     }
<a name="l10669"></a>10669     <span class="keywordflow">else</span> {
<a name="l10670"></a>10670         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a0e80f207eb41e9010ec9f0f5f9419fea">StringValue</a>(src);
<a name="l10671"></a>10671         parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#ac6081a8fb34f2662c83a12cae955e14c">parser_lex_gets</a> = <a class="code" href="../../d7/dc0/parse_8y.html#a0be85261168125d878ba6089b9ebaf0a">lex_get_str</a>;
<a name="l10672"></a>10672     }
<a name="l10673"></a>10673     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#ab299eabdb020d4889bd357cb6688d35e">parser_lex_input</a> = src;
<a name="l10674"></a>10674     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a19fefb3d80f961d6da3692fb8c47515b">eofp</a> = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aba0717d2689eb68797421a02ab9295c6">Qfalse</a>;
<a name="l10675"></a>10675     <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(fname)) {
<a name="l10676"></a>10676         fname = <a class="code" href="../../d5/d11/ripper_8c.html#a774f72da4a84c6fe41cf3dc05952646c">STR_NEW2</a>(<span class="stringliteral">&quot;(ripper)&quot;</span>);
<a name="l10677"></a>10677     }
<a name="l10678"></a>10678     <span class="keywordflow">else</span> {
<a name="l10679"></a>10679         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a0e80f207eb41e9010ec9f0f5f9419fea">StringValue</a>(fname);
<a name="l10680"></a><a class="code" href="../../d7/dc0/parse_8y.html#ae6db0a4cec7b2468240cb59958248655">10680</a>     }
<a name="l10681"></a>10681     <a class="code" href="../../d7/dc0/parse_8y.html#aa92ae33c165140147305229fe3f53045">parser_initialize</a>(parser);
<a name="l10682"></a>10682 
<a name="l10683"></a>10683     parser-&gt;parser_ruby_sourcefile_string = fname;
<a name="l10684"></a>10684     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#aca3dad79b534757f8f9c8af9f2e84ae3">parser_ruby_sourcefile</a> = <a class="code" href="../../d8/df4/generator_8h.html#aa0c7097c0d82c8372072fbab5a604e39">RSTRING_PTR</a>(fname);
<a name="l10685"></a>10685     parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a5a213b9311bced75172045096b843702">parser_ruby_sourceline</a> = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(lineno) ? 0 : <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a877c38180d23c5447d976c70dda89d69">NUM2INT</a>(lineno) - 1;
<a name="l10686"></a>10686 
<a name="l10687"></a>10687     <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>;
<a name="l10688"></a>10688 }
<a name="l10689"></a>10689 
<a name="l10690"></a>10690 <span class="keyword">struct </span>ripper_args {
<a name="l10691"></a>10691     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser;
<a name="l10692"></a>10692     <span class="keywordtype">int</span> argc;
<a name="l10693"></a>10693     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *argv;
<a name="l10694"></a>10694 };
<a name="l10695"></a>10695 
<a name="l10696"></a>10696 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10697"></a>10697 ripper_parse0(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> parser_v)
<a name="l10698"></a>10698 {
<a name="l10699"></a>10699     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser;
<a name="l10700"></a>10700 
<a name="l10701"></a><a class="code" href="../../d7/dc0/parse_8y.html#a05b7a564ea54a633fc4443caa347f8ae">10701</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8dce6624396c492cdd1af3a4c5871556">TypedData_Get_Struct</a>(parser_v, <span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, &amp;parser_data_type, parser);
<a name="l10702"></a>10702     <a class="code" href="../../d7/dc0/parse_8y.html#afed0ba1d93197b631db7bbc854de24a8">parser_prepare</a>(parser);
<a name="l10703"></a>10703     ripper_yyparse((<span class="keywordtype">void</span>*)parser);
<a name="l10704"></a>10704     <span class="keywordflow">return</span> parser-&gt;result;
<a name="l10705"></a>10705 }
<a name="l10706"></a>10706 
<a name="l10707"></a>10707 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10708"></a>10708 ripper_ensure(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> parser_v)
<a name="l10709"></a>10709 {
<a name="l10710"></a>10710     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser;
<a name="l10711"></a>10711 
<a name="l10712"></a>10712     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8dce6624396c492cdd1af3a4c5871556">TypedData_Get_Struct</a>(parser_v, <span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, &amp;parser_data_type, parser);
<a name="l10713"></a>10713     parser-&gt;parsing_thread = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>;
<a name="l10714"></a>10714     <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>;
<a name="l10715"></a>10715 }
<a name="l10716"></a>10716 
<a name="l10717"></a>10717 <span class="comment">/*</span>
<a name="l10718"></a>10718 <span class="comment"> *  call-seq:</span>
<a name="l10719"></a>10719 <span class="comment"> *    ripper#parse</span>
<a name="l10720"></a>10720 <span class="comment"> *</span>
<a name="l10721"></a>10721 <span class="comment"> *  Start parsing and returns the value of the root action.</span>
<a name="l10722"></a>10722 <span class="comment"> */</span>
<a name="l10723"></a>10723 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10724"></a>10724 ripper_parse(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>)
<a name="l10725"></a>10725 {
<a name="l10726"></a>10726     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser;
<a name="l10727"></a>10727 
<a name="l10728"></a>10728     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8dce6624396c492cdd1af3a4c5871556">TypedData_Get_Struct</a>(<span class="keyword">self</span>, <span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, &amp;parser_data_type, parser);
<a name="l10729"></a>10729     <span class="keywordflow">if</span> (!ripper_initialized_p(parser)) {
<a name="l10730"></a>10730         <a class="code" href="../../db/dcc/error_8c.html#a0f771a2840561f1838169b3d7d4616f3">rb_raise</a>(<a class="code" href="../../db/dcc/error_8c.html#ab5e2a9fec766c75176fbb262bfe6a596">rb_eArgError</a>, <span class="stringliteral">&quot;method called for uninitialized object&quot;</span>);
<a name="l10731"></a>10731     }
<a name="l10732"></a>10732     <span class="keywordflow">if</span> (!<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(parser-&gt;parsing_thread)) {
<a name="l10733"></a>10733         <span class="keywordflow">if</span> (parser-&gt;parsing_thread == <a class="code" href="../../db/d2e/intern_8h.html#ac41dd89ae3df1fc1d9968c8239659ce3">rb_thread_current</a>())
<a name="l10734"></a>10734             <a class="code" href="../../db/dcc/error_8c.html#a0f771a2840561f1838169b3d7d4616f3">rb_raise</a>(<a class="code" href="../../db/dcc/error_8c.html#ab5e2a9fec766c75176fbb262bfe6a596">rb_eArgError</a>, <span class="stringliteral">&quot;Ripper#parse is not reentrant&quot;</span>);
<a name="l10735"></a>10735         <span class="keywordflow">else</span>
<a name="l10736"></a>10736             <a class="code" href="../../db/dcc/error_8c.html#a0f771a2840561f1838169b3d7d4616f3">rb_raise</a>(<a class="code" href="../../db/dcc/error_8c.html#ab5e2a9fec766c75176fbb262bfe6a596">rb_eArgError</a>, <span class="stringliteral">&quot;Ripper#parse is not multithread-safe&quot;</span>);
<a name="l10737"></a>10737     }
<a name="l10738"></a>10738     parser-&gt;parsing_thread = <a class="code" href="../../db/d2e/intern_8h.html#ac41dd89ae3df1fc1d9968c8239659ce3">rb_thread_current</a>();
<a name="l10739"></a>10739     <a class="code" href="../../d3/d57/eval_8c.html#a8061198378fb16adeb931f90540b2839">rb_ensure</a>(ripper_parse0, <span class="keyword">self</span>, ripper_ensure, <span class="keyword">self</span>);
<a name="l10740"></a>10740 
<a name="l10741"></a>10741     <span class="keywordflow">return</span> parser-&gt;result;
<a name="l10742"></a>10742 }
<a name="l10743"></a>10743 
<a name="l10744"></a>10744 <span class="comment">/*</span>
<a name="l10745"></a>10745 <span class="comment"> *  call-seq:</span>
<a name="l10746"></a>10746 <span class="comment"> *    ripper#column   -&gt; Integer</span>
<a name="l10747"></a>10747 <span class="comment"> *</span>
<a name="l10748"></a>10748 <span class="comment"> *  Return column number of current parsing line.</span>
<a name="l10749"></a>10749 <span class="comment"> *  This number starts from 0.</span>
<a name="l10750"></a>10750 <span class="comment"> */</span>
<a name="l10751"></a>10751 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10752"></a>10752 ripper_column(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>)
<a name="l10753"></a>10753 {
<a name="l10754"></a>10754     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser;
<a name="l10755"></a>10755     <span class="keywordtype">long</span> col;
<a name="l10756"></a>10756 
<a name="l10757"></a>10757     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8dce6624396c492cdd1af3a4c5871556">TypedData_Get_Struct</a>(<span class="keyword">self</span>, <span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, &amp;parser_data_type, parser);
<a name="l10758"></a><a class="code" href="../../d7/dc0/parse_8y.html#a92915296d7f7b01b855bb1720fa57eb8">10758</a>     <span class="keywordflow">if</span> (!ripper_initialized_p(parser)) {
<a name="l10759"></a>10759         <a class="code" href="../../db/dcc/error_8c.html#a0f771a2840561f1838169b3d7d4616f3">rb_raise</a>(<a class="code" href="../../db/dcc/error_8c.html#ab5e2a9fec766c75176fbb262bfe6a596">rb_eArgError</a>, <span class="stringliteral">&quot;method called for uninitialized object&quot;</span>);
<a name="l10760"></a>10760     }
<a name="l10761"></a>10761     <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(parser-&gt;parsing_thread)) <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>;
<a name="l10762"></a>10762     col = parser-&gt;tokp - parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#ae72a2e82c521a7ca1fd1804624b2fbab">parser_lex_pbeg</a>;
<a name="l10763"></a>10763     <span class="keywordflow">return</span> <a class="code" href="../../dc/d0c/cparse_8c.html#af1afba1194a12547a1e65d92abf03b03">LONG2NUM</a>(col);
<a name="l10764"></a>10764 }
<a name="l10765"></a><a class="code" href="../../d7/dc0/parse_8y.html#a847a3fb910f00edbd237aa423f94bdb9">10765</a> 
<a name="l10766"></a>10766 <span class="comment">/*</span>
<a name="l10767"></a>10767 <span class="comment"> *  call-seq:</span>
<a name="l10768"></a>10768 <span class="comment"> *    ripper#filename   -&gt; String</span>
<a name="l10769"></a>10769 <span class="comment"> *</span>
<a name="l10770"></a>10770 <span class="comment"> *  Return current parsing filename.</span>
<a name="l10771"></a>10771 <span class="comment"> */</span>
<a name="l10772"></a>10772 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10773"></a>10773 ripper_filename(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>)
<a name="l10774"></a>10774 {
<a name="l10775"></a>10775     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser;
<a name="l10776"></a>10776 
<a name="l10777"></a>10777     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8dce6624396c492cdd1af3a4c5871556">TypedData_Get_Struct</a>(<span class="keyword">self</span>, <span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, &amp;parser_data_type, parser);
<a name="l10778"></a>10778     <span class="keywordflow">if</span> (!ripper_initialized_p(parser)) {
<a name="l10779"></a>10779         <a class="code" href="../../db/dcc/error_8c.html#a0f771a2840561f1838169b3d7d4616f3">rb_raise</a>(<a class="code" href="../../db/dcc/error_8c.html#ab5e2a9fec766c75176fbb262bfe6a596">rb_eArgError</a>, <span class="stringliteral">&quot;method called for uninitialized object&quot;</span>);
<a name="l10780"></a><a class="code" href="../../d7/dc0/parse_8y.html#a9db34d1a14193da38d55c18c0376fbe4">10780</a>     }
<a name="l10781"></a>10781     <span class="keywordflow">return</span> parser-&gt;parser_ruby_sourcefile_string;
<a name="l10782"></a>10782 }
<a name="l10783"></a>10783 
<a name="l10784"></a>10784 <span class="comment">/*</span>
<a name="l10785"></a>10785 <span class="comment"> *  call-seq:</span>
<a name="l10786"></a>10786 <span class="comment"> *    ripper#lineno   -&gt; Integer</span>
<a name="l10787"></a>10787 <span class="comment"> *</span>
<a name="l10788"></a><a class="code" href="../../d7/dc0/parse_8y.html#ad0abb47818e0bcfa9c008d6e7e4ddbfe">10788</a> <span class="comment"> *  Return line number of current parsing line.</span>
<a name="l10789"></a>10789 <span class="comment"> *  This number starts from 1.</span>
<a name="l10790"></a>10790 <span class="comment"> */</span>
<a name="l10791"></a>10791 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10792"></a>10792 ripper_lineno(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>)
<a name="l10793"></a>10793 {
<a name="l10794"></a>10794     <span class="keyword">struct </span><a class="code" href="../../d0/d64/structparser__params.html">parser_params</a> *parser;
<a name="l10795"></a>10795 
<a name="l10796"></a>10796     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a8dce6624396c492cdd1af3a4c5871556">TypedData_Get_Struct</a>(<span class="keyword">self</span>, <span class="keyword">struct</span> <a class="code" href="../../d0/d64/structparser__params.html">parser_params</a>, &amp;parser_data_type, parser);
<a name="l10797"></a>10797     <span class="keywordflow">if</span> (!ripper_initialized_p(parser)) {
<a name="l10798"></a>10798         <a class="code" href="../../db/dcc/error_8c.html#a0f771a2840561f1838169b3d7d4616f3">rb_raise</a>(<a class="code" href="../../db/dcc/error_8c.html#ab5e2a9fec766c75176fbb262bfe6a596">rb_eArgError</a>, <span class="stringliteral">&quot;method called for uninitialized object&quot;</span>);
<a name="l10799"></a>10799     }
<a name="l10800"></a>10800     <span class="keywordflow">if</span> (<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a4832bad8845a35fc50f7a160901854a1">NIL_P</a>(parser-&gt;parsing_thread)) <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>;
<a name="l10801"></a>10801     <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aca9f83a35416ed9d6e0b860afa5eaf0f">INT2NUM</a>(parser-&gt;<a class="code" href="../../d0/d64/structparser__params.html#a5a213b9311bced75172045096b843702">parser_ruby_sourceline</a>);
<a name="l10802"></a>10802 }
<a name="l10803"></a>10803 
<a name="l10804"></a>10804 <span class="preprocessor">#ifdef RIPPER_DEBUG</span>
<a name="l10805"></a><a class="code" href="../../d7/dc0/parse_8y.html#ae0479d8826aa662cc680ed75e657c5bf">10805</a> <span class="preprocessor"></span><span class="comment">/* :nodoc: */</span>
<a name="l10806"></a>10806 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10807"></a>10807 ripper_assert_Qundef(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> obj, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> msg)
<a name="l10808"></a>10808 {
<a name="l10809"></a>10809     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a0e80f207eb41e9010ec9f0f5f9419fea">StringValue</a>(msg);
<a name="l10810"></a>10810     <span class="keywordflow">if</span> (obj == <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a2edf6990280eb2637623ccd421dee4f0">Qundef</a>) {
<a name="l10811"></a>10811         <a class="code" href="../../db/dcc/error_8c.html#a0f771a2840561f1838169b3d7d4616f3">rb_raise</a>(<a class="code" href="../../db/dcc/error_8c.html#ab5e2a9fec766c75176fbb262bfe6a596">rb_eArgError</a>, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d8/df4/generator_8h.html#aa0c7097c0d82c8372072fbab5a604e39">RSTRING_PTR</a>(msg));
<a name="l10812"></a>10812     }
<a name="l10813"></a>10813     <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>;
<a name="l10814"></a>10814 }
<a name="l10815"></a>10815 
<a name="l10816"></a>10816 <span class="comment">/* :nodoc: */</span>
<a name="l10817"></a>10817 <span class="keyword">static</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>
<a name="l10818"></a>10818 ripper_value(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> obj)
<a name="l10819"></a>10819 {
<a name="l10820"></a>10820     <span class="keywordflow">return</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#ad9f758738ddf6560da578a4425987892">ULONG2NUM</a>(obj);
<a name="l10821"></a>10821 }
<a name="l10822"></a><a class="code" href="../../d7/dc0/parse_8y.html#a31fcbde2b7aaecba1e43942d9e3535f4">10822</a> <span class="preprocessor">#endif</span>
<a name="l10823"></a>10823 <span class="preprocessor"></span>
<a name="l10824"></a>10824 
<a name="l10825"></a>10825 <span class="keywordtype">void</span>
<a name="l10826"></a>10826 InitVM_ripper(<span class="keywordtype">void</span>)
<a name="l10827"></a>10827 {
<a name="l10828"></a>10828     parser_data_type.<a class="code" href="../../d7/de2/structrb__data__type__struct.html#a40c7e82e9350c2b5850e8f288efd9777">parent</a> = <a class="code" href="../../de/de6/ruby_2ruby_8h.html#aa7423675bf99068c658e91a4ba55016c">RTYPEDDATA_TYPE</a>(<a class="code" href="../../d5/d11/ripper_8c.html#a175a11311538e1c0c3bc41c96a6a8aaf">rb_parser_new</a>());
<a name="l10829"></a>10829 }
<a name="l10830"></a>10830 
<a name="l10831"></a>10831 <span class="keywordtype">void</span>
<a name="l10832"></a>10832 Init_ripper(<span class="keywordtype">void</span>)
<a name="l10833"></a>10833 {
<a name="l10834"></a>10834     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> Ripper;
<a name="l10835"></a>10835 
<a name="l10836"></a>10836     <a class="code" href="../../d0/d56/console_8c.html#ae6d07472aa0647b417534f1e92b4b101">InitVM</a>(ripper);
<a name="l10837"></a>10837     Ripper = <a class="code" href="../../de/ddf/group__class.html#ga15d068dbe88a3bab3700b03bebb7fbac" title="Defines a top-level class.">rb_define_class</a>(<span class="stringliteral">&quot;Ripper&quot;</span>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a57c96ead3ef230b4838e65fe037c346e">rb_cObject</a>);
<a name="l10838"></a>10838     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a861b20872f7d24f1c5f2da5261037322">rb_define_const</a>(Ripper, <span class="stringliteral">&quot;Version&quot;</span>, <a class="code" href="../../db/d2e/intern_8h.html#a99895fce59be905b7c7f0a88bd32fa1f">rb_usascii_str_new2</a>(RIPPER_VERSION));
<a name="l10839"></a>10839     <a class="code" href="../../db/d2e/intern_8h.html#a6c99ed7f070458b961026d43d27d0642">rb_define_alloc_func</a>(Ripper, ripper_s_allocate);
<a name="l10840"></a>10840     <a class="code" href="../../d7/d19/group__defmethod.html#ga118dc7abcdb97f56fe35727ac0ff6eb8">rb_define_method</a>(Ripper, <span class="stringliteral">&quot;initialize&quot;</span>, ripper_initialize, -1);
<a name="l10841"></a><a class="code" href="../../d7/dc0/parse_8y.html#a09e2a35ffd054287cd8a5f9e285975e6">10841</a>     <a class="code" href="../../d7/d19/group__defmethod.html#ga118dc7abcdb97f56fe35727ac0ff6eb8">rb_define_method</a>(Ripper, <span class="stringliteral">&quot;parse&quot;</span>, ripper_parse, 0);
<a name="l10842"></a>10842     <a class="code" href="../../d7/d19/group__defmethod.html#ga118dc7abcdb97f56fe35727ac0ff6eb8">rb_define_method</a>(Ripper, <span class="stringliteral">&quot;column&quot;</span>, ripper_column, 0);
<a name="l10843"></a>10843     <a class="code" href="../../d7/d19/group__defmethod.html#ga118dc7abcdb97f56fe35727ac0ff6eb8">rb_define_method</a>(Ripper, <span class="stringliteral">&quot;filename&quot;</span>, ripper_filename, 0);
<a name="l10844"></a>10844     <a class="code" href="../../d7/d19/group__defmethod.html#ga118dc7abcdb97f56fe35727ac0ff6eb8">rb_define_method</a>(Ripper, <span class="stringliteral">&quot;lineno&quot;</span>, ripper_lineno, 0);
<a name="l10845"></a>10845     <a class="code" href="../../d7/d19/group__defmethod.html#ga118dc7abcdb97f56fe35727ac0ff6eb8">rb_define_method</a>(Ripper, <span class="stringliteral">&quot;end_seen?&quot;</span>, <a class="code" href="../../d5/d11/ripper_8c.html#a9ee877befd26d3832f3ea41a2b6fcb89">rb_parser_end_seen_p</a>, 0);
<a name="l10846"></a>10846     <a class="code" href="../../d7/d19/group__defmethod.html#ga118dc7abcdb97f56fe35727ac0ff6eb8">rb_define_method</a>(Ripper, <span class="stringliteral">&quot;encoding&quot;</span>, <a class="code" href="../../d5/d11/ripper_8c.html#a7624c273f1693afcdbd66e987ff613f5">rb_parser_encoding</a>, 0);
<a name="l10847"></a>10847     <a class="code" href="../../d7/d19/group__defmethod.html#ga118dc7abcdb97f56fe35727ac0ff6eb8">rb_define_method</a>(Ripper, <span class="stringliteral">&quot;yydebug&quot;</span>, <a class="code" href="../../d5/d11/ripper_8c.html#ac309f65e4a301ef5ba0eeaceecf2a11a">rb_parser_get_yydebug</a>, 0);
<a name="l10848"></a>10848     <a class="code" href="../../d7/d19/group__defmethod.html#ga118dc7abcdb97f56fe35727ac0ff6eb8">rb_define_method</a>(Ripper, <span class="stringliteral">&quot;yydebug=&quot;</span>, <a class="code" href="../../d5/d11/ripper_8c.html#a9c450b504b28c4c599201777d474c64b">rb_parser_set_yydebug</a>, 1);
<a name="l10849"></a>10849 <span class="preprocessor">#ifdef RIPPER_DEBUG</span>
<a name="l10850"></a>10850 <span class="preprocessor"></span>    <a class="code" href="../../d7/d19/group__defmethod.html#ga118dc7abcdb97f56fe35727ac0ff6eb8">rb_define_method</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a2f79a80cd4cd92563255889fdcc303b8">rb_mKernel</a>, <span class="stringliteral">&quot;assert_Qundef&quot;</span>, ripper_assert_Qundef, 2);
<a name="l10851"></a><a class="code" href="../../d7/dc0/parse_8y.html#aa4c5791dac1d5f6d9dc8a2c9df32d336">10851</a>     <a class="code" href="../../d7/d19/group__defmethod.html#ga118dc7abcdb97f56fe35727ac0ff6eb8">rb_define_method</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a2f79a80cd4cd92563255889fdcc303b8">rb_mKernel</a>, <span class="stringliteral">&quot;rawVALUE&quot;</span>, ripper_value, 1);
<a name="l10852"></a>10852     <a class="code" href="../../d7/d19/group__defmethod.html#ga118dc7abcdb97f56fe35727ac0ff6eb8">rb_define_method</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a2f79a80cd4cd92563255889fdcc303b8">rb_mKernel</a>, <span class="stringliteral">&quot;validate_object&quot;</span>, ripper_validate_object, 1);
<a name="l10853"></a>10853 <span class="preprocessor">#endif</span>
<a name="l10854"></a>10854 <span class="preprocessor"></span>
<a name="l10855"></a>10855     ripper_id_gets = <a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;gets&quot;</span>);
<a name="l10856"></a>10856     <a class="code" href="../../d8/de4/eventids1_8c.html#af0924960c2b21b79a59dafd32c8afddb">ripper_init_eventids1</a>(Ripper);
<a name="l10857"></a>10857     <a class="code" href="../../df/dea/eventids2_8c.html#ac8454d4e89651097afb4262651e6b36b">ripper_init_eventids2</a>(Ripper);
<a name="l10858"></a>10858     <span class="comment">/* ensure existing in symbol table */</span>
<a name="l10859"></a>10859     (void)<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;||&quot;</span>);
<a name="l10860"></a>10860     (void)<a class="code" href="../../dc/dcc/array_8c.html#a9cfa42d4b79c89d68c53be8b2150a503">rb_intern</a>(<span class="stringliteral">&quot;&amp;&amp;&quot;</span>);
<a name="l10861"></a>10861 
<a name="l10862"></a>10862 <span class="preprocessor"># if 0</span>
<a name="l10863"></a>10863 <span class="preprocessor"></span>    <span class="comment">/* Hack to let RDoc document SCRIPT_LINES__ */</span>
<a name="l10864"></a>10864 
<a name="l10865"></a>10865     <span class="comment">/*</span>
<a name="l10866"></a>10866 <span class="comment">     * When a Hash is assigned to +SCRIPT_LINES__+ the contents of files loaded</span>
<a name="l10867"></a>10867 <span class="comment">     * after the assignment will be added as an Array of lines with the file</span>
<a name="l10868"></a>10868 <span class="comment">     * name as the key.</span>
<a name="l10869"></a>10869 <span class="comment">     */</span>
<a name="l10870"></a>10870     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a5a25f6effbffe412ebda3391132e7129">rb_define_global_const</a>(<span class="stringliteral">&quot;SCRIPT_LINES__&quot;</span>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a320970f989dc8294c8203154e3db40c1">Qnil</a>);
<a name="l10871"></a>10871 <span class="preprocessor">#endif</span>
<a name="l10872"></a>10872 <span class="preprocessor"></span>
<a name="l10873"></a>10873 }
<a name="l10874"></a>10874 <span class="preprocessor">#endif </span><span class="comment">/* RIPPER */</span>
<a name="l10875"></a>10875 
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Mar 2013 for Ruby by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
