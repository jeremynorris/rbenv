<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ruby: regcomp.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="../../files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>regcomp.c</h1><a href="../../d0/d86/regcomp_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/**********************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">  regcomp.c -  Oniguruma (regular expression library)</span>
<a name="l00003"></a>00003 <span class="comment">**********************************************************************/</span>
<a name="l00004"></a>00004 <span class="comment">/*-</span>
<a name="l00005"></a>00005 <span class="comment"> * Copyright (c) 2002-2008  K.Kosako  &lt;sndgk393 AT ybb DOT ne DOT jp&gt;</span>
<a name="l00006"></a>00006 <span class="comment"> * All rights reserved.</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
<a name="l00009"></a>00009 <span class="comment"> * modification, are permitted provided that the following conditions</span>
<a name="l00010"></a>00010 <span class="comment"> * are met:</span>
<a name="l00011"></a>00011 <span class="comment"> * 1. Redistributions of source code must retain the above copyright</span>
<a name="l00012"></a>00012 <span class="comment"> *    notice, this list of conditions and the following disclaimer.</span>
<a name="l00013"></a>00013 <span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright</span>
<a name="l00014"></a>00014 <span class="comment"> *    notice, this list of conditions and the following disclaimer in the</span>
<a name="l00015"></a>00015 <span class="comment"> *    documentation and/or other materials provided with the distribution.</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS&apos;&apos; AND</span>
<a name="l00018"></a>00018 <span class="comment"> * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<a name="l00019"></a>00019 <span class="comment"> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
<a name="l00020"></a>00020 <span class="comment"> * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE</span>
<a name="l00021"></a>00021 <span class="comment"> * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</span>
<a name="l00022"></a>00022 <span class="comment"> * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS</span>
<a name="l00023"></a>00023 <span class="comment"> * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)</span>
<a name="l00024"></a>00024 <span class="comment"> * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span>
<a name="l00025"></a>00025 <span class="comment"> * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY</span>
<a name="l00026"></a>00026 <span class="comment"> * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF</span>
<a name="l00027"></a>00027 <span class="comment"> * SUCH DAMAGE.</span>
<a name="l00028"></a>00028 <span class="comment"> */</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/dfc/regparse_8h.html">regparse.h</a>&quot;</span>
<a name="l00031"></a>00031 
<a name="l00032"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a7ff64241d25dcbc75ac416b415f80612">00032</a> <a class="code" href="../../d8/db3/oniguruma_8h.html#a33aa7ed7612104fa36da121c8ecb4d4e">OnigCaseFoldType</a> <a class="code" href="../../d8/db3/oniguruma_8h.html#abf88672b9dd7c8ac64bc4a7b0ce6c6f8">OnigDefaultCaseFoldFlag</a> = <a class="code" href="../../d8/db3/oniguruma_8h.html#aea78d06ede73d1d0de8ea05d81f8ebf7">ONIGENC_CASE_FOLD_MIN</a>;
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="keyword">extern</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a33aa7ed7612104fa36da121c8ecb4d4e">OnigCaseFoldType</a>
<a name="l00035"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a1eeef9496609e650edcd7b2a077d98c0">00035</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a1eeef9496609e650edcd7b2a077d98c0">onig_get_default_case_fold_flag</a>(<span class="keywordtype">void</span>)
<a name="l00036"></a>00036 {
<a name="l00037"></a>00037   <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#abf88672b9dd7c8ac64bc4a7b0ce6c6f8">OnigDefaultCaseFoldFlag</a>;
<a name="l00038"></a>00038 }
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="keyword">extern</span> <span class="keywordtype">int</span>
<a name="l00041"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a2df8d0269fd216db255fde5942b83eec">00041</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a2df8d0269fd216db255fde5942b83eec">onig_set_default_case_fold_flag</a>(<a class="code" href="../../d8/db3/oniguruma_8h.html#a33aa7ed7612104fa36da121c8ecb4d4e">OnigCaseFoldType</a> case_fold_flag)
<a name="l00042"></a>00042 {
<a name="l00043"></a>00043   <a class="code" href="../../d8/db3/oniguruma_8h.html#abf88672b9dd7c8ac64bc4a7b0ce6c6f8">OnigDefaultCaseFoldFlag</a> = case_fold_flag;
<a name="l00044"></a>00044   <span class="keywordflow">return</span> 0;
<a name="l00045"></a>00045 }
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="preprocessor">#ifndef PLATFORM_UNALIGNED_WORD_ACCESS</span>
<a name="l00048"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ae77c9f043fb5d838a8a9076d010f02da">00048</a> <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="../../d0/d86/regcomp_8c.html#ae77c9f043fb5d838a8a9076d010f02da">PadBuf</a>[<a class="code" href="../../d6/d87/regint_8h.html#a81d7d9cf3f0b83da8ab0a772c00cc3db">WORD_ALIGNMENT_SIZE</a>];
<a name="l00049"></a>00049 <span class="preprocessor">#endif</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span>
<a name="l00051"></a>00051 <span class="keyword">static</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>*
<a name="l00052"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a158d6b9ddc5338ecbae4f030d19d13b8">00052</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a158d6b9ddc5338ecbae4f030d19d13b8">str_dup</a>(<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* s, <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* <a class="code" href="../../d6/d14/structre__registers.html#a1a42f8a5bcd4ac744e00132e2b80f8f0">end</a>)
<a name="l00053"></a>00053 {
<a name="l00054"></a>00054   ptrdiff_t <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a> = end - s;
<a name="l00055"></a>00055 
<a name="l00056"></a>00056   <span class="keywordflow">if</span> (len &gt; 0) {
<a name="l00057"></a>00057     <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* r = (<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* )<a class="code" href="../../d8/db0/defines_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>(len + 1);
<a name="l00058"></a>00058     <a class="code" href="../../d6/d87/regint_8h.html#a44eb2d3a10149e1d94651052bcdcb2bb">CHECK_NULL_RETURN</a>(r);
<a name="l00059"></a>00059     <a class="code" href="../../d6/d87/regint_8h.html#ad9f94f6a1ee2c69b34d8034684b31518">xmemcpy</a>(r, s, len);
<a name="l00060"></a>00060     r[len] = (<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> )0;
<a name="l00061"></a>00061     <span class="keywordflow">return</span> r;
<a name="l00062"></a>00062   }
<a name="l00063"></a>00063   <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00064"></a>00064 }
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00067"></a><a class="code" href="../../d0/d86/regcomp_8c.html#aad26bfcdc08e74d911686afe96828d2d">00067</a> <a class="code" href="../../d0/d86/regcomp_8c.html#aad26bfcdc08e74d911686afe96828d2d">swap_node</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* a, <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* b)
<a name="l00068"></a>00068 {
<a name="l00069"></a>00069   <a class="code" href="../../d0/d6e/struct___node.html">Node</a> c;
<a name="l00070"></a>00070   c = *a; *a = *b; *b = c;
<a name="l00071"></a>00071 
<a name="l00072"></a>00072   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(a) == <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>) {
<a name="l00073"></a>00073     <a class="code" href="../../d2/db7/struct_str_node.html">StrNode</a>* sn = <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(a);
<a name="l00074"></a>00074     <span class="keywordflow">if</span> (sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#adb1ddc3ec6793c9a15bd73e269d279ae">capa</a> == 0) {
<a name="l00075"></a>00075       <span class="keywordtype">size_t</span> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a> = sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a> - sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>;
<a name="l00076"></a>00076       sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>   = sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#af5b3a643780b4df36ede084633846fa2">buf</a>;
<a name="l00077"></a>00077       sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a> = sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a> + len;
<a name="l00078"></a>00078     }
<a name="l00079"></a>00079   }
<a name="l00080"></a>00080 
<a name="l00081"></a>00081   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(b) == <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>) {
<a name="l00082"></a>00082     <a class="code" href="../../d2/db7/struct_str_node.html">StrNode</a>* sn = <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(b);
<a name="l00083"></a>00083     <span class="keywordflow">if</span> (sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#adb1ddc3ec6793c9a15bd73e269d279ae">capa</a> == 0) {
<a name="l00084"></a>00084       <span class="keywordtype">size_t</span> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a> = sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a> - sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>;
<a name="l00085"></a>00085       sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>   = sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#af5b3a643780b4df36ede084633846fa2">buf</a>;
<a name="l00086"></a>00086       sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a> = sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a> + len;
<a name="l00087"></a>00087     }
<a name="l00088"></a>00088   }
<a name="l00089"></a>00089 }
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="keyword">static</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a>
<a name="l00092"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ae04444d8024a1649eba62b8a6c008cc4">00092</a> <a class="code" href="../../d0/d86/regcomp_8c.html#ae04444d8024a1649eba62b8a6c008cc4">distance_add</a>(<a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> d1, <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> d2)
<a name="l00093"></a>00093 {
<a name="l00094"></a>00094   <span class="keywordflow">if</span> (d1 == <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a> || d2 == <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a>)
<a name="l00095"></a>00095     <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a>;
<a name="l00096"></a>00096   <span class="keywordflow">else</span> {
<a name="l00097"></a>00097     <span class="keywordflow">if</span> (d1 &lt;= <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a> - d2) <span class="keywordflow">return</span> d1 + d2;
<a name="l00098"></a>00098     <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a>;
<a name="l00099"></a>00099   }
<a name="l00100"></a>00100 }
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 <span class="keyword">static</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a>
<a name="l00103"></a><a class="code" href="../../d0/d86/regcomp_8c.html#af4fd37fcaa0c31385e41ce128c9ed00c">00103</a> <a class="code" href="../../d0/d86/regcomp_8c.html#af4fd37fcaa0c31385e41ce128c9ed00c">distance_multiply</a>(<a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> d, <span class="keywordtype">int</span> m)
<a name="l00104"></a>00104 {
<a name="l00105"></a>00105   <span class="keywordflow">if</span> (m == 0) <span class="keywordflow">return</span> 0;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107   <span class="keywordflow">if</span> (d &lt; <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a> / m)
<a name="l00108"></a>00108     <span class="keywordflow">return</span> d * m;
<a name="l00109"></a>00109   <span class="keywordflow">else</span>
<a name="l00110"></a>00110     <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a>;
<a name="l00111"></a>00111 }
<a name="l00112"></a>00112 
<a name="l00113"></a>00113 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00114"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a652fcbf67675d6da1797c9cef80b860b">00114</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a652fcbf67675d6da1797c9cef80b860b">bitset_is_empty</a>(<a class="code" href="../../d6/d87/regint_8h.html#adb2b463784f4cfa2f5504eb0ed9ee70a">BitSetRef</a> bs)
<a name="l00115"></a>00115 {
<a name="l00116"></a>00116   <span class="keywordtype">int</span> i;
<a name="l00117"></a>00117   <span class="keywordflow">for</span> (i = 0; i &lt; (int )<a class="code" href="../../d6/d87/regint_8h.html#a89f6695a59a3a2db45421825d3e03ecd">BITSET_SIZE</a>; i++) {
<a name="l00118"></a>00118     <span class="keywordflow">if</span> (bs[i] != 0) <span class="keywordflow">return</span> 0;
<a name="l00119"></a>00119   }
<a name="l00120"></a>00120   <span class="keywordflow">return</span> 1;
<a name="l00121"></a>00121 }
<a name="l00122"></a>00122 
<a name="l00123"></a>00123 <span class="preprocessor">#ifdef ONIG_DEBUG</span>
<a name="l00124"></a>00124 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00125"></a>00125 onig_is_prelude(<span class="keywordtype">void</span>)
<a name="l00126"></a>00126 {
<a name="l00127"></a>00127     <span class="keywordflow">return</span> !<a class="code" href="../../db/d2e/intern_8h.html#afaaee0b4c292ab56ca8acee9fad1242b">rb_const_defined</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a0d59a418d5956d62076394536ee21dc6">rb_cThread</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a5753547d6a21eeb36aa8cb0ae7d6c9ce">rb_intern_const</a>(<span class="stringliteral">&quot;MUTEX_FOR_THREAD_EXCLUSIVE&quot;</span>));
<a name="l00128"></a>00128 }
<a name="l00129"></a>00129 
<a name="l00130"></a>00130 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00131"></a>00131 bitset_on_num(<a class="code" href="../../d6/d87/regint_8h.html#adb2b463784f4cfa2f5504eb0ed9ee70a">BitSetRef</a> bs)
<a name="l00132"></a>00132 {
<a name="l00133"></a>00133   <span class="keywordtype">int</span> i, n;
<a name="l00134"></a>00134 
<a name="l00135"></a>00135   n = 0;
<a name="l00136"></a>00136   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d87/regint_8h.html#a8bdc62bcdfffb01985810f7aa61d5999">SINGLE_BYTE_SIZE</a>; i++) {
<a name="l00137"></a>00137     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a43930f0cbfa176d3f727f1fc92027dac">BITSET_AT</a>(bs, i)) n++;
<a name="l00138"></a>00138   }
<a name="l00139"></a>00139   <span class="keywordflow">return</span> n;
<a name="l00140"></a>00140 }
<a name="l00141"></a>00141 <span class="preprocessor">#endif</span>
<a name="l00142"></a>00142 <span class="preprocessor"></span>
<a name="l00143"></a>00143 <span class="keyword">extern</span> <span class="keywordtype">int</span>
<a name="l00144"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a482b20817f394518a2ac234692c2add2">00144</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a482b20817f394518a2ac234692c2add2">onig_bbuf_init</a>(<a class="code" href="../../d0/deb/struct___b_buf.html">BBuf</a>* <a class="code" href="../../d6/da0/nkf-utf8_2nkf_8c.html#ac37f17a60c8b5533aac4840c681f62b8">buf</a>, <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> <a class="code" href="../../d5/db5/encoding_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)
<a name="l00145"></a>00145 {
<a name="l00146"></a>00146   <span class="keywordflow">if</span> (size &lt;= 0) {
<a name="l00147"></a>00147     size   = 0;
<a name="l00148"></a>00148     buf-&gt;<a class="code" href="../../d0/deb/struct___b_buf.html#a3d79f476af8e7a57dd240e68f11867a1">p</a> = <a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00149"></a>00149   }
<a name="l00150"></a>00150   <span class="keywordflow">else</span> {
<a name="l00151"></a>00151     buf-&gt;<a class="code" href="../../d0/deb/struct___b_buf.html#a3d79f476af8e7a57dd240e68f11867a1">p</a> = (<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* )<a class="code" href="../../d8/db0/defines_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>(size);
<a name="l00152"></a>00152     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(buf-&gt;<a class="code" href="../../d0/deb/struct___b_buf.html#a3d79f476af8e7a57dd240e68f11867a1">p</a>)) <span class="keywordflow">return</span>(<a class="code" href="../../d8/db3/oniguruma_8h.html#a843ef92c5edce533877d3d65ef94a142">ONIGERR_MEMORY</a>);
<a name="l00153"></a>00153   }
<a name="l00154"></a>00154 
<a name="l00155"></a>00155   buf-&gt;<a class="code" href="../../d0/deb/struct___b_buf.html#a12b605256309f2254309f69b92c4ab44">alloc</a> = (<span class="keywordtype">unsigned</span> int)size;
<a name="l00156"></a>00156   buf-&gt;<a class="code" href="../../d0/deb/struct___b_buf.html#acf9f185ff639d57c7e4aaa6e6415888c">used</a>  = 0;
<a name="l00157"></a>00157   <span class="keywordflow">return</span> 0;
<a name="l00158"></a>00158 }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 
<a name="l00161"></a>00161 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l00162"></a>00162 <span class="preprocessor"></span>
<a name="l00163"></a>00163 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00164"></a>00164 unset_addr_list_init(<a class="code" href="../../da/dd0/struct_unset_addr_list.html">UnsetAddrList</a>* uslist, <span class="keywordtype">int</span> <a class="code" href="../../d5/db5/encoding_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>)
<a name="l00165"></a>00165 {
<a name="l00166"></a>00166   <a class="code" href="../../d2/d2e/struct_unset_addr.html">UnsetAddr</a>* p;
<a name="l00167"></a>00167 
<a name="l00168"></a>00168   p = (<a class="code" href="../../d2/d2e/struct_unset_addr.html">UnsetAddr</a>* )<a class="code" href="../../d8/db0/defines_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d2/d2e/struct_unset_addr.html">UnsetAddr</a>)* size);
<a name="l00169"></a>00169   <a class="code" href="../../d6/d87/regint_8h.html#a17ebb2a12300dcf6d79916e357fae45a">CHECK_NULL_RETURN_MEMERR</a>(p);
<a name="l00170"></a>00170   uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a88a3440ee7dd19c9731fb34f12d02ae6">num</a>   = 0;
<a name="l00171"></a>00171   uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a8c57f8b4d1166185b15ca3b33bcca01d">alloc</a> = size;
<a name="l00172"></a>00172   uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a880912efb00473079965fc3d01d9ad5d">us</a>    = p;
<a name="l00173"></a>00173   <span class="keywordflow">return</span> 0;
<a name="l00174"></a>00174 }
<a name="l00175"></a>00175 
<a name="l00176"></a>00176 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l00177"></a>00177 unset_addr_list_end(<a class="code" href="../../da/dd0/struct_unset_addr_list.html">UnsetAddrList</a>* uslist)
<a name="l00178"></a>00178 {
<a name="l00179"></a>00179   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a880912efb00473079965fc3d01d9ad5d">us</a>))
<a name="l00180"></a>00180     <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a880912efb00473079965fc3d01d9ad5d">us</a>);
<a name="l00181"></a>00181 }
<a name="l00182"></a>00182 
<a name="l00183"></a>00183 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00184"></a>00184 unset_addr_list_add(<a class="code" href="../../da/dd0/struct_unset_addr_list.html">UnsetAddrList</a>* uslist, <span class="keywordtype">int</span> offset, <span class="keyword">struct</span> <a class="code" href="../../d0/d6e/struct___node.html">_Node</a>* <a class="code" href="../../d7/dc0/parse_8y.html#a0d7af8a92c4b0a07f71585584ef9634f">node</a>)
<a name="l00185"></a>00185 {
<a name="l00186"></a>00186   <a class="code" href="../../d2/d2e/struct_unset_addr.html">UnsetAddr</a>* p;
<a name="l00187"></a>00187   <span class="keywordtype">int</span> size;
<a name="l00188"></a>00188 
<a name="l00189"></a>00189   <span class="keywordflow">if</span> (uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a88a3440ee7dd19c9731fb34f12d02ae6">num</a> &gt;= uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a8c57f8b4d1166185b15ca3b33bcca01d">alloc</a>) {
<a name="l00190"></a>00190     size = uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a8c57f8b4d1166185b15ca3b33bcca01d">alloc</a> * 2;
<a name="l00191"></a>00191     p = (<a class="code" href="../../d2/d2e/struct_unset_addr.html">UnsetAddr</a>* )<a class="code" href="../../d8/db0/defines_8h.html#a40740062faf2d95d4935112447c464ef">xrealloc</a>(uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a880912efb00473079965fc3d01d9ad5d">us</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d2/d2e/struct_unset_addr.html">UnsetAddr</a>) * size);
<a name="l00192"></a>00192     <a class="code" href="../../d6/d87/regint_8h.html#a17ebb2a12300dcf6d79916e357fae45a">CHECK_NULL_RETURN_MEMERR</a>(p);
<a name="l00193"></a>00193     uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a8c57f8b4d1166185b15ca3b33bcca01d">alloc</a> = size;
<a name="l00194"></a>00194     uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a880912efb00473079965fc3d01d9ad5d">us</a>    = p;
<a name="l00195"></a>00195   }
<a name="l00196"></a>00196 
<a name="l00197"></a>00197   uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a880912efb00473079965fc3d01d9ad5d">us</a>[uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a88a3440ee7dd19c9731fb34f12d02ae6">num</a>].<a class="code" href="../../d2/d2e/struct_unset_addr.html#ae3bbc7c4f69836bce28684fff5050ead">offset</a> = offset;
<a name="l00198"></a>00198   uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a880912efb00473079965fc3d01d9ad5d">us</a>[uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a88a3440ee7dd19c9731fb34f12d02ae6">num</a>].<a class="code" href="../../d2/d2e/struct_unset_addr.html#a32320cbc7046ab89e117792b7b699c9e">target</a> = node;
<a name="l00199"></a>00199   uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a88a3440ee7dd19c9731fb34f12d02ae6">num</a>++;
<a name="l00200"></a>00200   <span class="keywordflow">return</span> 0;
<a name="l00201"></a>00201 }
<a name="l00202"></a>00202 <span class="preprocessor">#endif </span><span class="comment">/* USE_SUBEXP_CALL */</span>
<a name="l00203"></a>00203 
<a name="l00204"></a>00204 
<a name="l00205"></a>00205 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00206"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">00206</a> <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keywordtype">int</span> opcode)
<a name="l00207"></a>00207 {
<a name="l00208"></a>00208   <a class="code" href="../../d6/d87/regint_8h.html#a9a45ebbb7fb3343035dfdf6f8876e6f0">BBUF_ADD1</a>(reg, opcode);
<a name="l00209"></a>00209   <span class="keywordflow">return</span> 0;
<a name="l00210"></a>00210 }
<a name="l00211"></a>00211 
<a name="l00212"></a>00212 <span class="preprocessor">#ifdef USE_COMBINATION_EXPLOSION_CHECK</span>
<a name="l00213"></a>00213 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00214"></a>00214 add_state_check_num(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keywordtype">int</span> num)
<a name="l00215"></a>00215 {
<a name="l00216"></a>00216   <a class="code" href="../../d6/d87/regint_8h.html#aa877bee333a03d69077236a4bb72710c">StateCheckNumType</a> n = (<a class="code" href="../../d6/d87/regint_8h.html#aa877bee333a03d69077236a4bb72710c">StateCheckNumType</a> )num;
<a name="l00217"></a>00217 
<a name="l00218"></a>00218   <a class="code" href="../../d6/d87/regint_8h.html#ab11a199860e9e8502a563a96e5c75b28">BBUF_ADD</a>(reg, &amp;n, <a class="code" href="../../d6/d87/regint_8h.html#acafabf47814e803b8df00989bf1cdc66">SIZE_STATE_CHECK_NUM</a>);
<a name="l00219"></a>00219   <span class="keywordflow">return</span> 0;
<a name="l00220"></a>00220 }
<a name="l00221"></a>00221 <span class="preprocessor">#endif</span>
<a name="l00222"></a>00222 <span class="preprocessor"></span>
<a name="l00223"></a>00223 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00224"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a243429256ca92d036981b9d03367ef48">00224</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a243429256ca92d036981b9d03367ef48">add_rel_addr</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keywordtype">int</span> addr)
<a name="l00225"></a>00225 {
<a name="l00226"></a>00226   <a class="code" href="../../d6/d87/regint_8h.html#a9d058c40ebc713355574e3d4579bbd2a">RelAddrType</a> ra = (<a class="code" href="../../d6/d87/regint_8h.html#a9d058c40ebc713355574e3d4579bbd2a">RelAddrType</a> )addr;
<a name="l00227"></a>00227 
<a name="l00228"></a>00228   <a class="code" href="../../d6/d87/regint_8h.html#ab11a199860e9e8502a563a96e5c75b28">BBUF_ADD</a>(reg, &amp;ra, <a class="code" href="../../d6/d87/regint_8h.html#a452ae7b392734f127e7400d0dce6b5aa">SIZE_RELADDR</a>);
<a name="l00229"></a>00229   <span class="keywordflow">return</span> 0;
<a name="l00230"></a>00230 }
<a name="l00231"></a>00231 
<a name="l00232"></a>00232 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00233"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a896254bdbc411f21efe6aa82cab2cf75">00233</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a896254bdbc411f21efe6aa82cab2cf75">add_abs_addr</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keywordtype">int</span> addr)
<a name="l00234"></a>00234 {
<a name="l00235"></a>00235   <a class="code" href="../../d6/d87/regint_8h.html#a00ea65c75399f966f4362de003203ed5">AbsAddrType</a> ra = (<a class="code" href="../../d6/d87/regint_8h.html#a00ea65c75399f966f4362de003203ed5">AbsAddrType</a> )addr;
<a name="l00236"></a>00236 
<a name="l00237"></a>00237   <a class="code" href="../../d6/d87/regint_8h.html#ab11a199860e9e8502a563a96e5c75b28">BBUF_ADD</a>(reg, &amp;ra, <a class="code" href="../../d6/d87/regint_8h.html#adb98b5217b9bd3c7fef7f999a1a918b1">SIZE_ABSADDR</a>);
<a name="l00238"></a>00238   <span class="keywordflow">return</span> 0;
<a name="l00239"></a>00239 }
<a name="l00240"></a>00240 
<a name="l00241"></a>00241 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00242"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a852b4186cb93270cd7d71ebe658196c4">00242</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a852b4186cb93270cd7d71ebe658196c4">add_length</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>)
<a name="l00243"></a>00243 {
<a name="l00244"></a>00244   <a class="code" href="../../d6/d87/regint_8h.html#a2d7f6198122e9252799bc8ba7dc60727">LengthType</a> l = (<a class="code" href="../../d6/d87/regint_8h.html#a2d7f6198122e9252799bc8ba7dc60727">LengthType</a> )len;
<a name="l00245"></a>00245 
<a name="l00246"></a>00246   <a class="code" href="../../d6/d87/regint_8h.html#ab11a199860e9e8502a563a96e5c75b28">BBUF_ADD</a>(reg, &amp;l, <a class="code" href="../../d6/d87/regint_8h.html#abc7bd848a318380fe02568bac7ffeb3d">SIZE_LENGTH</a>);
<a name="l00247"></a>00247   <span class="keywordflow">return</span> 0;
<a name="l00248"></a>00248 }
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00251"></a><a class="code" href="../../d0/d86/regcomp_8c.html#af40c81c2868345b45aac5211ba114965">00251</a> <a class="code" href="../../d0/d86/regcomp_8c.html#af40c81c2868345b45aac5211ba114965">add_mem_num</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keywordtype">int</span> num)
<a name="l00252"></a>00252 {
<a name="l00253"></a>00253   <a class="code" href="../../d6/d87/regint_8h.html#a2f2763a4c4b7652ac3ad18c8c160e9f6">MemNumType</a> n = (<a class="code" href="../../d6/d87/regint_8h.html#a2f2763a4c4b7652ac3ad18c8c160e9f6">MemNumType</a> )num;
<a name="l00254"></a>00254 
<a name="l00255"></a>00255   <a class="code" href="../../d6/d87/regint_8h.html#ab11a199860e9e8502a563a96e5c75b28">BBUF_ADD</a>(reg, &amp;n, <a class="code" href="../../d6/d87/regint_8h.html#aba2581191b5b6472db1fd2728b585d78">SIZE_MEMNUM</a>);
<a name="l00256"></a>00256   <span class="keywordflow">return</span> 0;
<a name="l00257"></a>00257 }
<a name="l00258"></a>00258 
<a name="l00259"></a>00259 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00260"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a064cd7698a180d31b94b0b125f19d81a">00260</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a064cd7698a180d31b94b0b125f19d81a">add_pointer</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keywordtype">void</span>* addr)
<a name="l00261"></a>00261 {
<a name="l00262"></a>00262   <a class="code" href="../../d6/d87/regint_8h.html#acb6b48711ee0db9ad832d64a7b19ccbd">PointerType</a> ptr = (<a class="code" href="../../d6/d87/regint_8h.html#acb6b48711ee0db9ad832d64a7b19ccbd">PointerType</a> )addr;
<a name="l00263"></a>00263 
<a name="l00264"></a>00264   <a class="code" href="../../d6/d87/regint_8h.html#ab11a199860e9e8502a563a96e5c75b28">BBUF_ADD</a>(reg, &amp;ptr, <a class="code" href="../../d6/d87/regint_8h.html#a68fd9a25e437b367359fd764dec9bb5a">SIZE_POINTER</a>);
<a name="l00265"></a>00265   <span class="keywordflow">return</span> 0;
<a name="l00266"></a>00266 }
<a name="l00267"></a>00267 
<a name="l00268"></a>00268 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00269"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a83d486156614641c94d97661e17b743b">00269</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a83d486156614641c94d97661e17b743b">add_option</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <a class="code" href="../../d8/db3/oniguruma_8h.html#ad870c1a94502ad33c083978b17911e72">OnigOptionType</a> option)
<a name="l00270"></a>00270 {
<a name="l00271"></a>00271   <a class="code" href="../../d6/d87/regint_8h.html#ab11a199860e9e8502a563a96e5c75b28">BBUF_ADD</a>(reg, &amp;option, <a class="code" href="../../d6/d87/regint_8h.html#aeb0ed981d9ecc9562dfe16cd556327cf">SIZE_OPTION</a>);
<a name="l00272"></a>00272   <span class="keywordflow">return</span> 0;
<a name="l00273"></a>00273 }
<a name="l00274"></a>00274 
<a name="l00275"></a>00275 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00276"></a><a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">00276</a> <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keywordtype">int</span> opcode, <span class="keywordtype">int</span> addr)
<a name="l00277"></a>00277 {
<a name="l00278"></a>00278   <span class="keywordtype">int</span> r;
<a name="l00279"></a>00279 
<a name="l00280"></a>00280   r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, opcode);
<a name="l00281"></a>00281   <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00282"></a>00282   r = <a class="code" href="../../d0/d86/regcomp_8c.html#a243429256ca92d036981b9d03367ef48">add_rel_addr</a>(reg, addr);
<a name="l00283"></a>00283   <span class="keywordflow">return</span> r;
<a name="l00284"></a>00284 }
<a name="l00285"></a>00285 
<a name="l00286"></a>00286 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00287"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a8ca21a5244959b3186e91fcf6c4d5bf7">00287</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a8ca21a5244959b3186e91fcf6c4d5bf7">add_bytes</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* bytes, <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>)
<a name="l00288"></a>00288 {
<a name="l00289"></a>00289   <a class="code" href="../../d6/d87/regint_8h.html#ab11a199860e9e8502a563a96e5c75b28">BBUF_ADD</a>(reg, bytes, len);
<a name="l00290"></a>00290   <span class="keywordflow">return</span> 0;
<a name="l00291"></a>00291 }
<a name="l00292"></a>00292 
<a name="l00293"></a>00293 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00294"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a1f7ba42cda01aa0f6c606f3ae538916c">00294</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a1f7ba42cda01aa0f6c606f3ae538916c">add_bitset</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <a class="code" href="../../d6/d87/regint_8h.html#adb2b463784f4cfa2f5504eb0ed9ee70a">BitSetRef</a> bs)
<a name="l00295"></a>00295 {
<a name="l00296"></a>00296   <a class="code" href="../../d6/d87/regint_8h.html#ab11a199860e9e8502a563a96e5c75b28">BBUF_ADD</a>(reg, bs, <a class="code" href="../../d6/d87/regint_8h.html#a4b9583bd490990ab54e76251ca3f46ee">SIZE_BITSET</a>);
<a name="l00297"></a>00297   <span class="keywordflow">return</span> 0;
<a name="l00298"></a>00298 }
<a name="l00299"></a>00299 
<a name="l00300"></a>00300 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00301"></a><a class="code" href="../../d0/d86/regcomp_8c.html#aa58b641c5ebbf7b6949b2ed358fbd59c">00301</a> <a class="code" href="../../d0/d86/regcomp_8c.html#aa58b641c5ebbf7b6949b2ed358fbd59c">add_opcode_option</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keywordtype">int</span> opcode, <a class="code" href="../../d8/db3/oniguruma_8h.html#ad870c1a94502ad33c083978b17911e72">OnigOptionType</a> option)
<a name="l00302"></a>00302 {
<a name="l00303"></a>00303   <span class="keywordtype">int</span> r;
<a name="l00304"></a>00304 
<a name="l00305"></a>00305   r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, opcode);
<a name="l00306"></a>00306   <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00307"></a>00307   r = <a class="code" href="../../d0/d86/regcomp_8c.html#a83d486156614641c94d97661e17b743b">add_option</a>(reg, option);
<a name="l00308"></a>00308   <span class="keywordflow">return</span> r;
<a name="l00309"></a>00309 }
<a name="l00310"></a>00310 
<a name="l00311"></a>00311 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg);
<a name="l00312"></a>00312 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg);
<a name="l00313"></a>00313 
<a name="l00314"></a>00314 
<a name="l00315"></a><a class="code" href="../../d0/d86/regcomp_8c.html#aa713b0df3149703a280099259b85cf91">00315</a> <span class="preprocessor">#define IS_NEED_STR_LEN_OP_EXACT(op) \</span>
<a name="l00316"></a>00316 <span class="preprocessor">   ((op) == OP_EXACTN    || (op) == OP_EXACTMB2N ||\</span>
<a name="l00317"></a>00317 <span class="preprocessor">    (op) == OP_EXACTMB3N || (op) == OP_EXACTMBN  || (op) == OP_EXACTN_IC)</span>
<a name="l00318"></a>00318 <span class="preprocessor"></span>
<a name="l00319"></a>00319 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00320"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a760c54a6d25a582a6747b746081148f5">00320</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a760c54a6d25a582a6747b746081148f5">select_str_opcode</a>(<span class="keywordtype">int</span> mb_len, <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> str_len, <span class="keywordtype">int</span> ignore_case)
<a name="l00321"></a>00321 {
<a name="l00322"></a>00322   <span class="keywordtype">int</span> op;
<a name="l00323"></a>00323 
<a name="l00324"></a>00324   <span class="keywordflow">if</span> (ignore_case) {
<a name="l00325"></a>00325     <span class="keywordflow">switch</span> (str_len) {
<a name="l00326"></a>00326     <span class="keywordflow">case</span> 1:  op = <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ac1bb2eb7cff7020cfe303801e9ca45e1">OP_EXACT1_IC</a>; <span class="keywordflow">break</span>;
<a name="l00327"></a>00327     <span class="keywordflow">default</span>: op = <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af99b2fc071b095c9c5813abdbc4ee7e6">OP_EXACTN_IC</a>; <span class="keywordflow">break</span>;
<a name="l00328"></a>00328     }
<a name="l00329"></a>00329   }
<a name="l00330"></a>00330   <span class="keywordflow">else</span> {
<a name="l00331"></a>00331     <span class="keywordflow">switch</span> (mb_len) {
<a name="l00332"></a>00332     <span class="keywordflow">case</span> 1:
<a name="l00333"></a>00333       <span class="keywordflow">switch</span> (str_len) {
<a name="l00334"></a>00334       <span class="keywordflow">case</span> 1:  op = <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a802685c8960564369443ab09fa0ed994">OP_EXACT1</a>; <span class="keywordflow">break</span>;
<a name="l00335"></a>00335       <span class="keywordflow">case</span> 2:  op = <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a612d1fabc2c5cbd58fb1e0bbe51ff0ad">OP_EXACT2</a>; <span class="keywordflow">break</span>;
<a name="l00336"></a>00336       <span class="keywordflow">case</span> 3:  op = <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ab9f9811100c299335394d2d6cc392ae3">OP_EXACT3</a>; <span class="keywordflow">break</span>;
<a name="l00337"></a>00337       <span class="keywordflow">case</span> 4:  op = <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a6030307a6de89986500bdffabe2f3161">OP_EXACT4</a>; <span class="keywordflow">break</span>;
<a name="l00338"></a>00338       <span class="keywordflow">case</span> 5:  op = <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a60487277aab383bdfa623eb1747d7c1d">OP_EXACT5</a>; <span class="keywordflow">break</span>;
<a name="l00339"></a>00339       <span class="keywordflow">default</span>: op = <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a6543fb856be4fe416ec56b3b8b07dcc8">OP_EXACTN</a>; <span class="keywordflow">break</span>;
<a name="l00340"></a>00340       }
<a name="l00341"></a>00341       <span class="keywordflow">break</span>;
<a name="l00342"></a>00342 
<a name="l00343"></a>00343     <span class="keywordflow">case</span> 2:
<a name="l00344"></a>00344       <span class="keywordflow">switch</span> (str_len) {
<a name="l00345"></a>00345       <span class="keywordflow">case</span> 1:  op = <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aba9f67a2b24665f739b19df7c9a50107">OP_EXACTMB2N1</a>; <span class="keywordflow">break</span>;
<a name="l00346"></a>00346       <span class="keywordflow">case</span> 2:  op = <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ac25b152495efa0a51038928a05e2b459">OP_EXACTMB2N2</a>; <span class="keywordflow">break</span>;
<a name="l00347"></a>00347       <span class="keywordflow">case</span> 3:  op = <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aeeac4db9268157fe5cebbdd6f81b0f1d">OP_EXACTMB2N3</a>; <span class="keywordflow">break</span>;
<a name="l00348"></a>00348       <span class="keywordflow">default</span>: op = <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a45c3ff711c94546da76e9413d7cb0f31">OP_EXACTMB2N</a>;  <span class="keywordflow">break</span>;
<a name="l00349"></a>00349       }
<a name="l00350"></a>00350       <span class="keywordflow">break</span>;
<a name="l00351"></a>00351 
<a name="l00352"></a>00352     <span class="keywordflow">case</span> 3:
<a name="l00353"></a>00353       op = <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a00de7e9b227f6e16bacbbca42d8441a2">OP_EXACTMB3N</a>;
<a name="l00354"></a>00354       <span class="keywordflow">break</span>;
<a name="l00355"></a>00355 
<a name="l00356"></a>00356     <span class="keywordflow">default</span>:
<a name="l00357"></a>00357       op = <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a412ae4e1f2a0f31c2e59cad6d94f4906">OP_EXACTMBN</a>;
<a name="l00358"></a>00358       <span class="keywordflow">break</span>;
<a name="l00359"></a>00359     }
<a name="l00360"></a>00360   }
<a name="l00361"></a>00361   <span class="keywordflow">return</span> op;
<a name="l00362"></a>00362 }
<a name="l00363"></a>00363 
<a name="l00364"></a>00364 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00365"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a7516d17ec7570d5fe41b660e8d5bd6ba">00365</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a7516d17ec7570d5fe41b660e8d5bd6ba">compile_tree_empty_check</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keywordtype">int</span> empty_info)
<a name="l00366"></a>00366 {
<a name="l00367"></a>00367   <span class="keywordtype">int</span> r;
<a name="l00368"></a>00368   <span class="keywordtype">int</span> saved_num_null_check = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a503ad43eef2152c5242f7571e000bd21">num_null_check</a>;
<a name="l00369"></a>00369 
<a name="l00370"></a>00370   <span class="keywordflow">if</span> (empty_info != 0) {
<a name="l00371"></a>00371     r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a4b54f33edb33e9ad4056409ad7976858">OP_NULL_CHECK_START</a>);
<a name="l00372"></a>00372     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00373"></a>00373     r = <a class="code" href="../../d0/d86/regcomp_8c.html#af40c81c2868345b45aac5211ba114965">add_mem_num</a>(reg, reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a503ad43eef2152c5242f7571e000bd21">num_null_check</a>); <span class="comment">/* NULL CHECK ID */</span>
<a name="l00374"></a>00374     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00375"></a>00375     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a503ad43eef2152c5242f7571e000bd21">num_null_check</a>++;
<a name="l00376"></a>00376   }
<a name="l00377"></a>00377 
<a name="l00378"></a>00378   r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(node, reg);
<a name="l00379"></a>00379   <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00380"></a>00380 
<a name="l00381"></a>00381   <span class="keywordflow">if</span> (empty_info != 0) {
<a name="l00382"></a>00382     <span class="keywordflow">if</span> (empty_info == <a class="code" href="../../d1/dfc/regparse_8h.html#a986a5ef780a2ad8c4b93df2d58f0f615">NQ_TARGET_IS_EMPTY</a>)
<a name="l00383"></a>00383       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af0aec5c428361aa193258519f51ca784">OP_NULL_CHECK_END</a>);
<a name="l00384"></a>00384     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (empty_info == <a class="code" href="../../d1/dfc/regparse_8h.html#a5d2f216800450cd46951bebb6b400e4e">NQ_TARGET_IS_EMPTY_MEM</a>)
<a name="l00385"></a>00385       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af5666f4ae82f3138be3170451f0a4d02">OP_NULL_CHECK_END_MEMST</a>);
<a name="l00386"></a>00386     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (empty_info == <a class="code" href="../../d1/dfc/regparse_8h.html#aa897e83257181d0f4332a06d86c32ea3">NQ_TARGET_IS_EMPTY_REC</a>)
<a name="l00387"></a>00387       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a7bc64a642c299c19d8fc50ba5ad5ed10">OP_NULL_CHECK_END_MEMST_PUSH</a>);
<a name="l00388"></a>00388 
<a name="l00389"></a>00389     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00390"></a>00390     r = <a class="code" href="../../d0/d86/regcomp_8c.html#af40c81c2868345b45aac5211ba114965">add_mem_num</a>(reg, saved_num_null_check); <span class="comment">/* NULL CHECK ID */</span>
<a name="l00391"></a>00391   }
<a name="l00392"></a>00392   <span class="keywordflow">return</span> r;
<a name="l00393"></a>00393 }
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l00396"></a>00396 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00397"></a>00397 compile_call(<a class="code" href="../../d2/dac/struct_call_node.html">CallNode</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l00398"></a>00398 {
<a name="l00399"></a>00399   <span class="keywordtype">int</span> r;
<a name="l00400"></a>00400 
<a name="l00401"></a>00401   r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a098bbeea13096667b102f7fd90cbe38f">OP_CALL</a>);
<a name="l00402"></a>00402   <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00403"></a>00403   r = unset_addr_list_add(node-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#aed5652edd163b78e59ec18eb8412c2f7">unset_addr_list</a>, <a class="code" href="../../d6/d87/regint_8h.html#ab276246a7ef0f7f1f524561d70db25a4">BBUF_GET_OFFSET_POS</a>(reg),
<a name="l00404"></a>00404                           node-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#a74055ba4ccf07f1d75e2922f8af10eef">target</a>);
<a name="l00405"></a>00405   <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00406"></a>00406   r = <a class="code" href="../../d0/d86/regcomp_8c.html#a896254bdbc411f21efe6aa82cab2cf75">add_abs_addr</a>(reg, 0 <span class="comment">/*dummy addr.*/</span>);
<a name="l00407"></a>00407   <span class="keywordflow">return</span> r;
<a name="l00408"></a>00408 }
<a name="l00409"></a>00409 <span class="preprocessor">#endif</span>
<a name="l00410"></a>00410 <span class="preprocessor"></span>
<a name="l00411"></a>00411 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00412"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a91d018076ba815206f6320f9b7379626">00412</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a91d018076ba815206f6320f9b7379626">compile_tree_n_times</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <span class="keywordtype">int</span> n, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l00413"></a>00413 {
<a name="l00414"></a>00414   <span class="keywordtype">int</span> i, r;
<a name="l00415"></a>00415 
<a name="l00416"></a>00416   <span class="keywordflow">for</span> (i = 0; i &lt; n; i++) {
<a name="l00417"></a>00417     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(node, reg);
<a name="l00418"></a>00418     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00419"></a>00419   }
<a name="l00420"></a>00420   <span class="keywordflow">return</span> 0;
<a name="l00421"></a>00421 }
<a name="l00422"></a>00422 
<a name="l00423"></a>00423 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00424"></a><a class="code" href="../../d0/d86/regcomp_8c.html#aaa516b451e0ce46243820dc195189d41">00424</a> <a class="code" href="../../d0/d86/regcomp_8c.html#aaa516b451e0ce46243820dc195189d41">add_compile_string_length</a>(<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* s ARG_UNUSED, <span class="keywordtype">int</span> mb_len, <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> str_len,
<a name="l00425"></a>00425                           <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg ARG_UNUSED, <span class="keywordtype">int</span> ignore_case)
<a name="l00426"></a>00426 {
<a name="l00427"></a>00427   <span class="keywordtype">int</span> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l00428"></a>00428   <span class="keywordtype">int</span> op = <a class="code" href="../../d0/d86/regcomp_8c.html#a760c54a6d25a582a6747b746081148f5">select_str_opcode</a>(mb_len, str_len, ignore_case);
<a name="l00429"></a>00429 
<a name="l00430"></a>00430   len = <a class="code" href="../../d6/d87/regint_8h.html#a66af445efd415f99aadf774f122216ce">SIZE_OPCODE</a>;
<a name="l00431"></a>00431 
<a name="l00432"></a>00432   <span class="keywordflow">if</span> (op == <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a412ae4e1f2a0f31c2e59cad6d94f4906">OP_EXACTMBN</a>)  len += <a class="code" href="../../d6/d87/regint_8h.html#abc7bd848a318380fe02568bac7ffeb3d">SIZE_LENGTH</a>;
<a name="l00433"></a>00433   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#aa713b0df3149703a280099259b85cf91">IS_NEED_STR_LEN_OP_EXACT</a>(op))
<a name="l00434"></a>00434     len += <a class="code" href="../../d6/d87/regint_8h.html#abc7bd848a318380fe02568bac7ffeb3d">SIZE_LENGTH</a>;
<a name="l00435"></a>00435 
<a name="l00436"></a>00436   len += mb_len * str_len;
<a name="l00437"></a>00437   <span class="keywordflow">return</span> len;
<a name="l00438"></a>00438 }
<a name="l00439"></a>00439 
<a name="l00440"></a>00440 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00441"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ae2c3cc599066f038d977e1b67a77fa34">00441</a> <a class="code" href="../../d0/d86/regcomp_8c.html#ae2c3cc599066f038d977e1b67a77fa34">add_compile_string</a>(<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* s, <span class="keywordtype">int</span> mb_len, <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> str_len,
<a name="l00442"></a>00442                    <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keywordtype">int</span> ignore_case)
<a name="l00443"></a>00443 {
<a name="l00444"></a>00444   <span class="keywordtype">int</span> op = <a class="code" href="../../d0/d86/regcomp_8c.html#a760c54a6d25a582a6747b746081148f5">select_str_opcode</a>(mb_len, str_len, ignore_case);
<a name="l00445"></a>00445   <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, op);
<a name="l00446"></a>00446 
<a name="l00447"></a>00447   <span class="keywordflow">if</span> (op == <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a412ae4e1f2a0f31c2e59cad6d94f4906">OP_EXACTMBN</a>)
<a name="l00448"></a>00448     <a class="code" href="../../d0/d86/regcomp_8c.html#a852b4186cb93270cd7d71ebe658196c4">add_length</a>(reg, mb_len);
<a name="l00449"></a>00449 
<a name="l00450"></a>00450   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#aa713b0df3149703a280099259b85cf91">IS_NEED_STR_LEN_OP_EXACT</a>(op)) {
<a name="l00451"></a>00451     <span class="keywordflow">if</span> (op == <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af99b2fc071b095c9c5813abdbc4ee7e6">OP_EXACTN_IC</a>)
<a name="l00452"></a>00452       <a class="code" href="../../d0/d86/regcomp_8c.html#a852b4186cb93270cd7d71ebe658196c4">add_length</a>(reg, mb_len * str_len);
<a name="l00453"></a>00453     <span class="keywordflow">else</span>
<a name="l00454"></a>00454       <a class="code" href="../../d0/d86/regcomp_8c.html#a852b4186cb93270cd7d71ebe658196c4">add_length</a>(reg, str_len);
<a name="l00455"></a>00455   }
<a name="l00456"></a>00456 
<a name="l00457"></a>00457   <a class="code" href="../../d0/d86/regcomp_8c.html#a8ca21a5244959b3186e91fcf6c4d5bf7">add_bytes</a>(reg, s, mb_len * str_len);
<a name="l00458"></a>00458   <span class="keywordflow">return</span> 0;
<a name="l00459"></a>00459 }
<a name="l00460"></a>00460 
<a name="l00461"></a>00461 
<a name="l00462"></a>00462 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00463"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a78af5ec8c5968e56cb0fbe67ef2f8df4">00463</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a78af5ec8c5968e56cb0fbe67ef2f8df4">compile_length_string_node</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l00464"></a>00464 {
<a name="l00465"></a>00465   <span class="keywordtype">int</span> rlen, r, <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>, prev_len, slen, ambig;
<a name="l00466"></a>00466   <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>;
<a name="l00467"></a>00467   <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *p, *<a class="code" href="../../d7/dc0/parse_8y.html#a71f8b6ffdc0cc58ffd989c3162fb2bcf">prev</a>;
<a name="l00468"></a>00468   <a class="code" href="../../d2/db7/struct_str_node.html">StrNode</a>* sn;
<a name="l00469"></a>00469 
<a name="l00470"></a>00470   sn = <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(node);
<a name="l00471"></a>00471   <span class="keywordflow">if</span> (sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a> &lt;= sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>)
<a name="l00472"></a>00472     <span class="keywordflow">return</span> 0;
<a name="l00473"></a>00473 
<a name="l00474"></a>00474   ambig = <a class="code" href="../../d1/dfc/regparse_8h.html#a25596e8076dc2d32a0b4f386656f0feb">NSTRING_IS_AMBIG</a>(node);
<a name="l00475"></a>00475 
<a name="l00476"></a>00476   p = prev = sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>;
<a name="l00477"></a>00477   prev_len = <a class="code" href="../../d3/d09/ripper_8y.html#ae9f8530a4c9ec89ae8d62ce5b4410aad">enclen</a>(enc, p, sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a>);
<a name="l00478"></a>00478   p += prev_len;
<a name="l00479"></a>00479   slen = 1;
<a name="l00480"></a>00480   rlen = 0;
<a name="l00481"></a>00481 
<a name="l00482"></a>00482   <span class="keywordflow">for</span> (; p &lt; sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a>; ) {
<a name="l00483"></a>00483     len = <a class="code" href="../../d3/d09/ripper_8y.html#ae9f8530a4c9ec89ae8d62ce5b4410aad">enclen</a>(enc, p, sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a>);
<a name="l00484"></a>00484     <span class="keywordflow">if</span> (len == prev_len) {
<a name="l00485"></a>00485       slen++;
<a name="l00486"></a>00486     }
<a name="l00487"></a>00487     <span class="keywordflow">else</span> {
<a name="l00488"></a>00488       r = <a class="code" href="../../d0/d86/regcomp_8c.html#aaa516b451e0ce46243820dc195189d41">add_compile_string_length</a>(prev, prev_len, slen, reg, ambig);
<a name="l00489"></a>00489       rlen += r;
<a name="l00490"></a>00490       prev = p;
<a name="l00491"></a>00491       slen = 1;
<a name="l00492"></a>00492       prev_len = len;
<a name="l00493"></a>00493     }
<a name="l00494"></a>00494     p += len;
<a name="l00495"></a>00495   }
<a name="l00496"></a>00496   r = <a class="code" href="../../d0/d86/regcomp_8c.html#aaa516b451e0ce46243820dc195189d41">add_compile_string_length</a>(prev, prev_len, slen, reg, ambig);
<a name="l00497"></a>00497   rlen += r;
<a name="l00498"></a>00498   <span class="keywordflow">return</span> rlen;
<a name="l00499"></a>00499 }
<a name="l00500"></a>00500 
<a name="l00501"></a>00501 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00502"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a106cff8c1200c7332ffe55070aa3c030">00502</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a106cff8c1200c7332ffe55070aa3c030">compile_length_string_raw_node</a>(<a class="code" href="../../d2/db7/struct_str_node.html">StrNode</a>* sn, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l00503"></a>00503 {
<a name="l00504"></a>00504   <span class="keywordflow">if</span> (sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a> &lt;= sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>)
<a name="l00505"></a>00505     <span class="keywordflow">return</span> 0;
<a name="l00506"></a>00506 
<a name="l00507"></a>00507   <span class="keywordflow">return</span> <a class="code" href="../../d0/d86/regcomp_8c.html#aaa516b451e0ce46243820dc195189d41">add_compile_string_length</a>(sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>, 1 <span class="comment">/* sb */</span>, sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a> - sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>, reg, 0);
<a name="l00508"></a>00508 }
<a name="l00509"></a>00509 
<a name="l00510"></a>00510 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00511"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a4d9edce417188c84575b5edecf4885a3">00511</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a4d9edce417188c84575b5edecf4885a3">compile_string_node</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l00512"></a>00512 {
<a name="l00513"></a>00513   <span class="keywordtype">int</span> r, <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>, prev_len, slen, ambig;
<a name="l00514"></a>00514   <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>;
<a name="l00515"></a>00515   <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *p, *<a class="code" href="../../d7/dc0/parse_8y.html#a71f8b6ffdc0cc58ffd989c3162fb2bcf">prev</a>, *<a class="code" href="../../d6/d14/structre__registers.html#a1a42f8a5bcd4ac744e00132e2b80f8f0">end</a>;
<a name="l00516"></a>00516   <a class="code" href="../../d2/db7/struct_str_node.html">StrNode</a>* sn;
<a name="l00517"></a>00517 
<a name="l00518"></a>00518   sn = <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(node);
<a name="l00519"></a>00519   <span class="keywordflow">if</span> (sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a> &lt;= sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>)
<a name="l00520"></a>00520     <span class="keywordflow">return</span> 0;
<a name="l00521"></a>00521 
<a name="l00522"></a>00522   end = sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a>;
<a name="l00523"></a>00523   ambig = <a class="code" href="../../d1/dfc/regparse_8h.html#a25596e8076dc2d32a0b4f386656f0feb">NSTRING_IS_AMBIG</a>(node);
<a name="l00524"></a>00524 
<a name="l00525"></a>00525   p = prev = sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>;
<a name="l00526"></a>00526   prev_len = <a class="code" href="../../d3/d09/ripper_8y.html#ae9f8530a4c9ec89ae8d62ce5b4410aad">enclen</a>(enc, p, end);
<a name="l00527"></a>00527   p += prev_len;
<a name="l00528"></a>00528   slen = 1;
<a name="l00529"></a>00529 
<a name="l00530"></a>00530   <span class="keywordflow">for</span> (; p &lt; end; ) {
<a name="l00531"></a>00531     len = <a class="code" href="../../d3/d09/ripper_8y.html#ae9f8530a4c9ec89ae8d62ce5b4410aad">enclen</a>(enc, p, end);
<a name="l00532"></a>00532     <span class="keywordflow">if</span> (len == prev_len) {
<a name="l00533"></a>00533       slen++;
<a name="l00534"></a>00534     }
<a name="l00535"></a>00535     <span class="keywordflow">else</span> {
<a name="l00536"></a>00536       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae2c3cc599066f038d977e1b67a77fa34">add_compile_string</a>(prev, prev_len, slen, reg, ambig);
<a name="l00537"></a>00537       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00538"></a>00538 
<a name="l00539"></a>00539       prev  = p;
<a name="l00540"></a>00540       slen  = 1;
<a name="l00541"></a>00541       prev_len = len;
<a name="l00542"></a>00542     }
<a name="l00543"></a>00543 
<a name="l00544"></a>00544     p += len;
<a name="l00545"></a>00545   }
<a name="l00546"></a>00546   <span class="keywordflow">return</span> <a class="code" href="../../d0/d86/regcomp_8c.html#ae2c3cc599066f038d977e1b67a77fa34">add_compile_string</a>(prev, prev_len, slen, reg, ambig);
<a name="l00547"></a>00547 }
<a name="l00548"></a>00548 
<a name="l00549"></a>00549 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00550"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a515c57401c36b04eca6d5e1500f6c566">00550</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a515c57401c36b04eca6d5e1500f6c566">compile_string_raw_node</a>(<a class="code" href="../../d2/db7/struct_str_node.html">StrNode</a>* sn, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l00551"></a>00551 {
<a name="l00552"></a>00552   <span class="keywordflow">if</span> (sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a> &lt;= sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>)
<a name="l00553"></a>00553     <span class="keywordflow">return</span> 0;
<a name="l00554"></a>00554 
<a name="l00555"></a>00555   <span class="keywordflow">return</span> <a class="code" href="../../d0/d86/regcomp_8c.html#ae2c3cc599066f038d977e1b67a77fa34">add_compile_string</a>(sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>, 1 <span class="comment">/* sb */</span>, sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a> - sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>, reg, 0);
<a name="l00556"></a>00556 }
<a name="l00557"></a>00557 
<a name="l00558"></a>00558 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00559"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ad4f76599515bcec6a75a9f011c927859">00559</a> <a class="code" href="../../d0/d86/regcomp_8c.html#ad4f76599515bcec6a75a9f011c927859">add_multi_byte_cclass</a>(<a class="code" href="../../d0/deb/struct___b_buf.html">BBuf</a>* mbuf, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l00560"></a>00560 {
<a name="l00561"></a>00561 <span class="preprocessor">#ifdef PLATFORM_UNALIGNED_WORD_ACCESS</span>
<a name="l00562"></a>00562 <span class="preprocessor"></span>  <a class="code" href="../../d0/d86/regcomp_8c.html#a852b4186cb93270cd7d71ebe658196c4">add_length</a>(reg, mbuf-&gt;<a class="code" href="../../d0/deb/struct___b_buf.html#acf9f185ff639d57c7e4aaa6e6415888c">used</a>);
<a name="l00563"></a>00563   <span class="keywordflow">return</span> <a class="code" href="../../d0/d86/regcomp_8c.html#a8ca21a5244959b3186e91fcf6c4d5bf7">add_bytes</a>(reg, mbuf-&gt;<a class="code" href="../../d0/deb/struct___b_buf.html#a3d79f476af8e7a57dd240e68f11867a1">p</a>, mbuf-&gt;<a class="code" href="../../d0/deb/struct___b_buf.html#acf9f185ff639d57c7e4aaa6e6415888c">used</a>);
<a name="l00564"></a>00564 <span class="preprocessor">#else</span>
<a name="l00565"></a>00565 <span class="preprocessor"></span>  <span class="keywordtype">int</span> r, pad_size;
<a name="l00566"></a>00566   <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* p = <a class="code" href="../../d6/d87/regint_8h.html#a5939841d02c59b5f07a0a9313b1355c2">BBUF_GET_ADD_ADDRESS</a>(reg) + <a class="code" href="../../d6/d87/regint_8h.html#abc7bd848a318380fe02568bac7ffeb3d">SIZE_LENGTH</a>;
<a name="l00567"></a>00567 
<a name="l00568"></a>00568   <a class="code" href="../../d6/d87/regint_8h.html#a0b9e872436cfd5adf445266f53a923c5">GET_ALIGNMENT_PAD_SIZE</a>(p, pad_size);
<a name="l00569"></a>00569   <a class="code" href="../../d0/d86/regcomp_8c.html#a852b4186cb93270cd7d71ebe658196c4">add_length</a>(reg, mbuf-&gt;<a class="code" href="../../d0/deb/struct___b_buf.html#acf9f185ff639d57c7e4aaa6e6415888c">used</a> + (<a class="code" href="../../d6/d87/regint_8h.html#a81d7d9cf3f0b83da8ab0a772c00cc3db">WORD_ALIGNMENT_SIZE</a> - 1));
<a name="l00570"></a>00570   <span class="keywordflow">if</span> (pad_size != 0) <a class="code" href="../../d0/d86/regcomp_8c.html#a8ca21a5244959b3186e91fcf6c4d5bf7">add_bytes</a>(reg, <a class="code" href="../../d0/d86/regcomp_8c.html#ae77c9f043fb5d838a8a9076d010f02da">PadBuf</a>, pad_size);
<a name="l00571"></a>00571 
<a name="l00572"></a>00572   r = <a class="code" href="../../d0/d86/regcomp_8c.html#a8ca21a5244959b3186e91fcf6c4d5bf7">add_bytes</a>(reg, mbuf-&gt;<a class="code" href="../../d0/deb/struct___b_buf.html#a3d79f476af8e7a57dd240e68f11867a1">p</a>, mbuf-&gt;<a class="code" href="../../d0/deb/struct___b_buf.html#acf9f185ff639d57c7e4aaa6e6415888c">used</a>);
<a name="l00573"></a>00573 
<a name="l00574"></a>00574   <span class="comment">/* padding for return value from compile_length_cclass_node() to be fix. */</span>
<a name="l00575"></a>00575   pad_size = (<a class="code" href="../../d6/d87/regint_8h.html#a81d7d9cf3f0b83da8ab0a772c00cc3db">WORD_ALIGNMENT_SIZE</a> - 1) - pad_size;
<a name="l00576"></a>00576   <span class="keywordflow">if</span> (pad_size != 0) <a class="code" href="../../d0/d86/regcomp_8c.html#a8ca21a5244959b3186e91fcf6c4d5bf7">add_bytes</a>(reg, <a class="code" href="../../d0/d86/regcomp_8c.html#ae77c9f043fb5d838a8a9076d010f02da">PadBuf</a>, pad_size);
<a name="l00577"></a>00577   <span class="keywordflow">return</span> r;
<a name="l00578"></a>00578 <span class="preprocessor">#endif</span>
<a name="l00579"></a>00579 <span class="preprocessor"></span>}
<a name="l00580"></a>00580 
<a name="l00581"></a>00581 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00582"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ab184d74128864548c8dcb8f3d5b19089">00582</a> <a class="code" href="../../d0/d86/regcomp_8c.html#ab184d74128864548c8dcb8f3d5b19089">compile_length_cclass_node</a>(<a class="code" href="../../d8/d79/struct_c_class_node.html">CClassNode</a>* cc, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l00583"></a>00583 {
<a name="l00584"></a>00584   <span class="keywordtype">int</span> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l00585"></a>00585 
<a name="l00586"></a>00586   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#aae98a751e33d47e8617c92b24403ed96">IS_NCCLASS_SHARE</a>(cc)) {
<a name="l00587"></a>00587     len = <a class="code" href="../../d6/d87/regint_8h.html#a66af445efd415f99aadf774f122216ce">SIZE_OPCODE</a> + <a class="code" href="../../d6/d87/regint_8h.html#a68fd9a25e437b367359fd764dec9bb5a">SIZE_POINTER</a>;
<a name="l00588"></a>00588     <span class="keywordflow">return</span> len;
<a name="l00589"></a>00589   }
<a name="l00590"></a>00590 
<a name="l00591"></a>00591   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(cc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a599db43b8eea536a4e4d08400fa445cb">mbuf</a>)) {
<a name="l00592"></a>00592     len = <a class="code" href="../../d6/d87/regint_8h.html#a66af445efd415f99aadf774f122216ce">SIZE_OPCODE</a> + <a class="code" href="../../d6/d87/regint_8h.html#a4b9583bd490990ab54e76251ca3f46ee">SIZE_BITSET</a>;
<a name="l00593"></a>00593   }
<a name="l00594"></a>00594   <span class="keywordflow">else</span> {
<a name="l00595"></a>00595     <span class="keywordflow">if</span> (<a class="code" href="../../d8/db3/oniguruma_8h.html#a9d0d6012e6b7de2cf851d274bb9b9c9c">ONIGENC_MBC_MINLEN</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>) &gt; 1 || <a class="code" href="../../d0/d86/regcomp_8c.html#a652fcbf67675d6da1797c9cef80b860b">bitset_is_empty</a>(cc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a082458e56c928f78db90f08e242a9f3d">bs</a>)) {
<a name="l00596"></a>00596       len = <a class="code" href="../../d6/d87/regint_8h.html#a66af445efd415f99aadf774f122216ce">SIZE_OPCODE</a>;
<a name="l00597"></a>00597     }
<a name="l00598"></a>00598     <span class="keywordflow">else</span> {
<a name="l00599"></a>00599       len = <a class="code" href="../../d6/d87/regint_8h.html#a66af445efd415f99aadf774f122216ce">SIZE_OPCODE</a> + <a class="code" href="../../d6/d87/regint_8h.html#a4b9583bd490990ab54e76251ca3f46ee">SIZE_BITSET</a>;
<a name="l00600"></a>00600     }
<a name="l00601"></a>00601 <span class="preprocessor">#ifdef PLATFORM_UNALIGNED_WORD_ACCESS</span>
<a name="l00602"></a>00602 <span class="preprocessor"></span>    len += <a class="code" href="../../d6/d87/regint_8h.html#abc7bd848a318380fe02568bac7ffeb3d">SIZE_LENGTH</a> + cc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a599db43b8eea536a4e4d08400fa445cb">mbuf</a>-&gt;<a class="code" href="../../d0/deb/struct___b_buf.html#acf9f185ff639d57c7e4aaa6e6415888c">used</a>;
<a name="l00603"></a>00603 <span class="preprocessor">#else</span>
<a name="l00604"></a>00604 <span class="preprocessor"></span>    len += <a class="code" href="../../d6/d87/regint_8h.html#abc7bd848a318380fe02568bac7ffeb3d">SIZE_LENGTH</a> + cc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a599db43b8eea536a4e4d08400fa445cb">mbuf</a>-&gt;<a class="code" href="../../d0/deb/struct___b_buf.html#acf9f185ff639d57c7e4aaa6e6415888c">used</a> + (<a class="code" href="../../d6/d87/regint_8h.html#a81d7d9cf3f0b83da8ab0a772c00cc3db">WORD_ALIGNMENT_SIZE</a> - 1);
<a name="l00605"></a>00605 <span class="preprocessor">#endif</span>
<a name="l00606"></a>00606 <span class="preprocessor"></span>  }
<a name="l00607"></a>00607 
<a name="l00608"></a>00608   <span class="keywordflow">return</span> len;
<a name="l00609"></a>00609 }
<a name="l00610"></a>00610 
<a name="l00611"></a>00611 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00612"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a415a7336f625a6cbc2bfad26f7a2bc8f">00612</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a415a7336f625a6cbc2bfad26f7a2bc8f">compile_cclass_node</a>(<a class="code" href="../../d8/d79/struct_c_class_node.html">CClassNode</a>* cc, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l00613"></a>00613 {
<a name="l00614"></a>00614   <span class="keywordtype">int</span> r;
<a name="l00615"></a>00615 
<a name="l00616"></a>00616   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#aae98a751e33d47e8617c92b24403ed96">IS_NCCLASS_SHARE</a>(cc)) {
<a name="l00617"></a>00617     <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8cdeebcd10a14c5eaf2276127b9f8063">OP_CCLASS_NODE</a>);
<a name="l00618"></a>00618     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a064cd7698a180d31b94b0b125f19d81a">add_pointer</a>(reg, cc);
<a name="l00619"></a>00619     <span class="keywordflow">return</span> r;
<a name="l00620"></a>00620   }
<a name="l00621"></a>00621 
<a name="l00622"></a>00622   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(cc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a599db43b8eea536a4e4d08400fa445cb">mbuf</a>)) {
<a name="l00623"></a>00623     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#aa719ec00173511740495f30fc0878c9e">IS_NCCLASS_NOT</a>(cc))
<a name="l00624"></a>00624       <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af3302d2798a28920fca92621f0ad0a33">OP_CCLASS_NOT</a>);
<a name="l00625"></a>00625     <span class="keywordflow">else</span>
<a name="l00626"></a>00626       <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a843e6fcc2c81d592d84267ec452b0c32">OP_CCLASS</a>);
<a name="l00627"></a>00627 
<a name="l00628"></a>00628     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1f7ba42cda01aa0f6c606f3ae538916c">add_bitset</a>(reg, cc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a082458e56c928f78db90f08e242a9f3d">bs</a>);
<a name="l00629"></a>00629   }
<a name="l00630"></a>00630   <span class="keywordflow">else</span> {
<a name="l00631"></a>00631     <span class="keywordflow">if</span> (<a class="code" href="../../d8/db3/oniguruma_8h.html#a9d0d6012e6b7de2cf851d274bb9b9c9c">ONIGENC_MBC_MINLEN</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>) &gt; 1 || <a class="code" href="../../d0/d86/regcomp_8c.html#a652fcbf67675d6da1797c9cef80b860b">bitset_is_empty</a>(cc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a082458e56c928f78db90f08e242a9f3d">bs</a>)) {
<a name="l00632"></a>00632       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#aa719ec00173511740495f30fc0878c9e">IS_NCCLASS_NOT</a>(cc))
<a name="l00633"></a>00633         <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7abceea1b39968ed193131ef266a0f7313">OP_CCLASS_MB_NOT</a>);
<a name="l00634"></a>00634       <span class="keywordflow">else</span>
<a name="l00635"></a>00635         <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aa55987e4798bb3b4a9a84fc791a092a1">OP_CCLASS_MB</a>);
<a name="l00636"></a>00636 
<a name="l00637"></a>00637       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ad4f76599515bcec6a75a9f011c927859">add_multi_byte_cclass</a>(cc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a599db43b8eea536a4e4d08400fa445cb">mbuf</a>, reg);
<a name="l00638"></a>00638     }
<a name="l00639"></a>00639     <span class="keywordflow">else</span> {
<a name="l00640"></a>00640       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#aa719ec00173511740495f30fc0878c9e">IS_NCCLASS_NOT</a>(cc))
<a name="l00641"></a>00641         <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aa16a4fa0dab93e1b9feb3aa775722757">OP_CCLASS_MIX_NOT</a>);
<a name="l00642"></a>00642       <span class="keywordflow">else</span>
<a name="l00643"></a>00643         <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af700cb11f22421db229d4eb59eb6ccf7">OP_CCLASS_MIX</a>);
<a name="l00644"></a>00644 
<a name="l00645"></a>00645       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1f7ba42cda01aa0f6c606f3ae538916c">add_bitset</a>(reg, cc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a082458e56c928f78db90f08e242a9f3d">bs</a>);
<a name="l00646"></a>00646       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00647"></a>00647       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ad4f76599515bcec6a75a9f011c927859">add_multi_byte_cclass</a>(cc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a599db43b8eea536a4e4d08400fa445cb">mbuf</a>, reg);
<a name="l00648"></a>00648     }
<a name="l00649"></a>00649   }
<a name="l00650"></a>00650 
<a name="l00651"></a>00651   <span class="keywordflow">return</span> r;
<a name="l00652"></a>00652 }
<a name="l00653"></a>00653 
<a name="l00654"></a>00654 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00655"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ac207b349c4433ffcf5623538910f02c5">00655</a> <a class="code" href="../../d0/d86/regcomp_8c.html#ac207b349c4433ffcf5623538910f02c5">entry_repeat_range</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keywordtype">int</span> <span class="keywordtype">id</span>, <span class="keywordtype">int</span> lower, <span class="keywordtype">int</span> upper)
<a name="l00656"></a>00656 {
<a name="l00657"></a>00657 <span class="preprocessor">#define REPEAT_RANGE_ALLOC  4</span>
<a name="l00658"></a>00658 <span class="preprocessor"></span>
<a name="l00659"></a>00659   <a class="code" href="../../de/d9c/struct_onig_repeat_range.html">OnigRepeatRange</a>* p;
<a name="l00660"></a>00660 
<a name="l00661"></a>00661   <span class="keywordflow">if</span> (reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a62072755ec72bb1a94c9379dc2b2f78d">repeat_range_alloc</a> == 0) {
<a name="l00662"></a>00662     p = (<a class="code" href="../../de/d9c/struct_onig_repeat_range.html">OnigRepeatRange</a>* )<a class="code" href="../../d8/db0/defines_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../de/d9c/struct_onig_repeat_range.html">OnigRepeatRange</a>) * <a class="code" href="../../d0/d86/regcomp_8c.html#a332b74e5c5878209a786eb7593d029d4">REPEAT_RANGE_ALLOC</a>);
<a name="l00663"></a>00663     <a class="code" href="../../d6/d87/regint_8h.html#a17ebb2a12300dcf6d79916e357fae45a">CHECK_NULL_RETURN_MEMERR</a>(p);
<a name="l00664"></a>00664     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a640c016fa90e50ea710d2b5e55760590">repeat_range</a> = p;
<a name="l00665"></a>00665     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a62072755ec72bb1a94c9379dc2b2f78d">repeat_range_alloc</a> = <a class="code" href="../../d0/d86/regcomp_8c.html#a332b74e5c5878209a786eb7593d029d4">REPEAT_RANGE_ALLOC</a>;
<a name="l00666"></a>00666   }
<a name="l00667"></a>00667   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a62072755ec72bb1a94c9379dc2b2f78d">repeat_range_alloc</a> &lt;= <span class="keywordtype">id</span>) {
<a name="l00668"></a>00668     <span class="keywordtype">int</span> n;
<a name="l00669"></a>00669     n = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a62072755ec72bb1a94c9379dc2b2f78d">repeat_range_alloc</a> + <a class="code" href="../../d0/d86/regcomp_8c.html#a332b74e5c5878209a786eb7593d029d4">REPEAT_RANGE_ALLOC</a>;
<a name="l00670"></a>00670     p = (<a class="code" href="../../de/d9c/struct_onig_repeat_range.html">OnigRepeatRange</a>* )<a class="code" href="../../d8/db0/defines_8h.html#a40740062faf2d95d4935112447c464ef">xrealloc</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a640c016fa90e50ea710d2b5e55760590">repeat_range</a>,
<a name="l00671"></a>00671                                     <span class="keyword">sizeof</span>(<a class="code" href="../../de/d9c/struct_onig_repeat_range.html">OnigRepeatRange</a>) * n);
<a name="l00672"></a>00672     <a class="code" href="../../d6/d87/regint_8h.html#a17ebb2a12300dcf6d79916e357fae45a">CHECK_NULL_RETURN_MEMERR</a>(p);
<a name="l00673"></a>00673     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a640c016fa90e50ea710d2b5e55760590">repeat_range</a> = p;
<a name="l00674"></a>00674     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a62072755ec72bb1a94c9379dc2b2f78d">repeat_range_alloc</a> = n;
<a name="l00675"></a>00675   }
<a name="l00676"></a>00676   <span class="keywordflow">else</span> {
<a name="l00677"></a>00677     p = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a640c016fa90e50ea710d2b5e55760590">repeat_range</a>;
<a name="l00678"></a>00678   }
<a name="l00679"></a>00679 
<a name="l00680"></a>00680   p[id].<a class="code" href="../../de/d9c/struct_onig_repeat_range.html#a471452934634bf5cecfae756dec13df0">lower</a> = lower;
<a name="l00681"></a>00681   p[id].<a class="code" href="../../de/d9c/struct_onig_repeat_range.html#adeb63a2ad50b6c137ce42d3d0e0edbc5">upper</a> = (<a class="code" href="../../d6/d87/regint_8h.html#a7b7f11d4b2705496b7711598403d4f72">IS_REPEAT_INFINITE</a>(upper) ? 0x7fffffff : upper);
<a name="l00682"></a>00682   <span class="keywordflow">return</span> 0;
<a name="l00683"></a>00683 }
<a name="l00684"></a>00684 
<a name="l00685"></a>00685 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00686"></a><a class="code" href="../../d0/d86/regcomp_8c.html#acf4181a20d2530191810735a3e671d9e">00686</a> <a class="code" href="../../d0/d86/regcomp_8c.html#acf4181a20d2530191810735a3e671d9e">compile_range_repeat_node</a>(<a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* qn, <span class="keywordtype">int</span> target_len, <span class="keywordtype">int</span> empty_info,
<a name="l00687"></a>00687                           <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l00688"></a>00688 {
<a name="l00689"></a>00689   <span class="keywordtype">int</span> r;
<a name="l00690"></a>00690   <span class="keywordtype">int</span> num_repeat = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a007d05ab38dc2cfac189a4596b8c84b4">num_repeat</a>;
<a name="l00691"></a>00691 
<a name="l00692"></a>00692   r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a> ? <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a6066e50e385eb0ebb5edf501c66a77ce">OP_REPEAT</a> : <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ab1500068559c4c4ad727756c7447e30f">OP_REPEAT_NG</a>);
<a name="l00693"></a>00693   <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00694"></a>00694   r = <a class="code" href="../../d0/d86/regcomp_8c.html#af40c81c2868345b45aac5211ba114965">add_mem_num</a>(reg, num_repeat); <span class="comment">/* OP_REPEAT ID */</span>
<a name="l00695"></a>00695   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a007d05ab38dc2cfac189a4596b8c84b4">num_repeat</a>++;
<a name="l00696"></a>00696   <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00697"></a>00697   r = <a class="code" href="../../d0/d86/regcomp_8c.html#a243429256ca92d036981b9d03367ef48">add_rel_addr</a>(reg, target_len + <a class="code" href="../../d6/d87/regint_8h.html#acf4d0718e855f1f1febb11e7cdda1015">SIZE_OP_REPEAT_INC</a>);
<a name="l00698"></a>00698   <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00699"></a>00699 
<a name="l00700"></a>00700   r = <a class="code" href="../../d0/d86/regcomp_8c.html#ac207b349c4433ffcf5623538910f02c5">entry_repeat_range</a>(reg, num_repeat, qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>, qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>);
<a name="l00701"></a>00701   <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00702"></a>00702 
<a name="l00703"></a>00703   r = <a class="code" href="../../d0/d86/regcomp_8c.html#a7516d17ec7570d5fe41b660e8d5bd6ba">compile_tree_empty_check</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg, empty_info);
<a name="l00704"></a>00704   <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00705"></a>00705 
<a name="l00706"></a>00706   <span class="keywordflow">if</span> (
<a name="l00707"></a>00707 #ifdef <a class="code" href="../../d6/d87/regint_8h.html#a21559a8f38dcce02013fb72b84b66480">USE_SUBEXP_CALL</a>
<a name="l00708"></a>00708       reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a96aa44f3baa323e5103d65893872b61d">num_call</a> &gt; 0 ||
<a name="l00709"></a>00709 #endif
<a name="l00710"></a>00710       <a class="code" href="../../d1/dfc/regparse_8h.html#a1de9f3fa59256079112d3c8799eaa719">IS_QUANTIFIER_IN_REPEAT</a>(qn)) {
<a name="l00711"></a>00711     r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a> ? <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ab896f48834f7a980822f09a432e0447e">OP_REPEAT_INC_SG</a> : <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7adc2416f57694795b0ec4e6ec6ada8970">OP_REPEAT_INC_NG_SG</a>);
<a name="l00712"></a>00712   }
<a name="l00713"></a>00713   <span class="keywordflow">else</span> {
<a name="l00714"></a>00714     r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a> ? <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a21c8b4297ab29937dec4bc0833c3ac6b">OP_REPEAT_INC</a> : <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a19ad72a6cf7049c69736ac9b7ff8ec7e">OP_REPEAT_INC_NG</a>);
<a name="l00715"></a>00715   }
<a name="l00716"></a>00716   <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00717"></a>00717   r = <a class="code" href="../../d0/d86/regcomp_8c.html#af40c81c2868345b45aac5211ba114965">add_mem_num</a>(reg, num_repeat); <span class="comment">/* OP_REPEAT ID */</span>
<a name="l00718"></a>00718   <span class="keywordflow">return</span> r;
<a name="l00719"></a>00719 }
<a name="l00720"></a>00720 
<a name="l00721"></a>00721 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00722"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a5f9e5dede687cfd4c97e1e4b89146acc">00722</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a5f9e5dede687cfd4c97e1e4b89146acc">is_anychar_star_quantifier</a>(<a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* qn)
<a name="l00723"></a>00723 {
<a name="l00724"></a>00724   <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a> &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a7b7f11d4b2705496b7711598403d4f72">IS_REPEAT_INFINITE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>) &amp;&amp;
<a name="l00725"></a>00725       <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>) == <a class="code" href="../../d1/dfc/regparse_8h.html#a21a7fcbf4a9c872540490d92b9c29813">NT_CANY</a>)
<a name="l00726"></a>00726     <span class="keywordflow">return</span> 1;
<a name="l00727"></a>00727   <span class="keywordflow">else</span>
<a name="l00728"></a>00728     <span class="keywordflow">return</span> 0;
<a name="l00729"></a>00729 }
<a name="l00730"></a>00730 
<a name="l00731"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a24614dfeca814b59b47f7b9968722f0b">00731</a> <span class="preprocessor">#define QUANTIFIER_EXPAND_LIMIT_SIZE   50</span>
<a name="l00732"></a><a class="code" href="../../d0/d86/regcomp_8c.html#afab40be9879803efb8ef803155a0eb82">00732</a> <span class="preprocessor"></span><span class="preprocessor">#define CKN_ON   (ckn &gt; 0)</span>
<a name="l00733"></a>00733 <span class="preprocessor"></span>
<a name="l00734"></a>00734 <span class="preprocessor">#ifdef USE_COMBINATION_EXPLOSION_CHECK</span>
<a name="l00735"></a>00735 <span class="preprocessor"></span>
<a name="l00736"></a>00736 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00737"></a>00737 <a class="code" href="../../d0/d86/regcomp_8c.html#afb9ae3231efb837441d2ab1dd6cc1c7d">compile_length_quantifier_node</a>(<a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* qn, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l00738"></a>00738 {
<a name="l00739"></a>00739   <span class="keywordtype">int</span> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>, mod_tlen, cklen;
<a name="l00740"></a>00740   <span class="keywordtype">int</span> ckn;
<a name="l00741"></a>00741   <span class="keywordtype">int</span> infinite = <a class="code" href="../../d6/d87/regint_8h.html#a7b7f11d4b2705496b7711598403d4f72">IS_REPEAT_INFINITE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>);
<a name="l00742"></a>00742   <span class="keywordtype">int</span> empty_info = qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a3fe211fb928a1bcc58f4263cabc66f3d">target_empty_info</a>;
<a name="l00743"></a>00743   <span class="keywordtype">int</span> tlen = <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg);
<a name="l00744"></a>00744 
<a name="l00745"></a>00745   <span class="keywordflow">if</span> (tlen &lt; 0) <span class="keywordflow">return</span> tlen;
<a name="l00746"></a>00746 
<a name="l00747"></a>00747   ckn = ((reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a627abcc41418b0bdee0827c88e26d12b">num_comb_exp_check</a> &gt; 0) ? qn-&gt;comb_exp_check_num : 0);
<a name="l00748"></a>00748 
<a name="l00749"></a>00749   cklen = (<a class="code" href="../../d0/d86/regcomp_8c.html#afab40be9879803efb8ef803155a0eb82">CKN_ON</a> ? <a class="code" href="../../d6/d87/regint_8h.html#acafabf47814e803b8df00989bf1cdc66">SIZE_STATE_CHECK_NUM</a>: 0);
<a name="l00750"></a>00750 
<a name="l00751"></a>00751   <span class="comment">/* anychar repeat */</span>
<a name="l00752"></a>00752   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>) == <a class="code" href="../../d1/dfc/regparse_8h.html#a21a7fcbf4a9c872540490d92b9c29813">NT_CANY</a>) {
<a name="l00753"></a>00753     <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a> &amp;&amp; infinite) {
<a name="l00754"></a>00754       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#adde522805efdb73abd4f84ba1b92a4b1">next_head_exact</a>) &amp;&amp; !<a class="code" href="../../d0/d86/regcomp_8c.html#afab40be9879803efb8ef803155a0eb82">CKN_ON</a>)
<a name="l00755"></a>00755         <span class="keywordflow">return</span> <a class="code" href="../../d6/d87/regint_8h.html#a830aa348921e289aa8739c76814a6d85">SIZE_OP_ANYCHAR_STAR_PEEK_NEXT</a> + tlen * qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> + cklen;
<a name="l00756"></a>00756       <span class="keywordflow">else</span>
<a name="l00757"></a>00757         <span class="keywordflow">return</span> <a class="code" href="../../d6/d87/regint_8h.html#a9db7488f14ad3d195e64dc1b0c9dd0bf">SIZE_OP_ANYCHAR_STAR</a> + tlen * qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> + cklen;
<a name="l00758"></a>00758     }
<a name="l00759"></a>00759   }
<a name="l00760"></a>00760 
<a name="l00761"></a>00761   <span class="keywordflow">if</span> (empty_info != 0)
<a name="l00762"></a>00762     mod_tlen = tlen + (<a class="code" href="../../d6/d87/regint_8h.html#ab4cb397b113395716ab65360e5fd17fa">SIZE_OP_NULL_CHECK_START</a> + <a class="code" href="../../d6/d87/regint_8h.html#a63fe7ea2dcfce23ca783f5a36b9d1e6e">SIZE_OP_NULL_CHECK_END</a>);
<a name="l00763"></a>00763   <span class="keywordflow">else</span>
<a name="l00764"></a>00764     mod_tlen = tlen;
<a name="l00765"></a>00765 
<a name="l00766"></a>00766   <span class="keywordflow">if</span> (infinite &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> &lt;= 1) {
<a name="l00767"></a>00767     <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a>) {
<a name="l00768"></a>00768       <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> == 1)
<a name="l00769"></a>00769         len = <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>;
<a name="l00770"></a>00770       <span class="keywordflow">else</span>
<a name="l00771"></a>00771         len = 0;
<a name="l00772"></a>00772 
<a name="l00773"></a>00773       len += <a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a> + cklen + mod_tlen + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>;
<a name="l00774"></a>00774     }
<a name="l00775"></a>00775     <span class="keywordflow">else</span> {
<a name="l00776"></a>00776       <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> == 0)
<a name="l00777"></a>00777         len = <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>;
<a name="l00778"></a>00778       <span class="keywordflow">else</span>
<a name="l00779"></a>00779         len = 0;
<a name="l00780"></a>00780 
<a name="l00781"></a>00781       len += mod_tlen + <a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a> + cklen;
<a name="l00782"></a>00782     }
<a name="l00783"></a>00783   }
<a name="l00784"></a>00784   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> == 0) {
<a name="l00785"></a>00785     <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a5a8d1fa9320f1d0755269185a5588390">is_refered</a> != 0) <span class="comment">/* /(?&lt;n&gt;..){0}/ */</span>
<a name="l00786"></a>00786       len = <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a> + tlen;
<a name="l00787"></a>00787     <span class="keywordflow">else</span>
<a name="l00788"></a>00788       len = 0;
<a name="l00789"></a>00789   }
<a name="l00790"></a>00790   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> == 1 &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a>) {
<a name="l00791"></a>00791     <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> == 0) {
<a name="l00792"></a>00792       <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#afab40be9879803efb8ef803155a0eb82">CKN_ON</a>) {
<a name="l00793"></a>00793         len = SIZE_OP_STATE_CHECK_PUSH + tlen;
<a name="l00794"></a>00794       }
<a name="l00795"></a>00795       <span class="keywordflow">else</span> {
<a name="l00796"></a>00796         len = <a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a> + tlen;
<a name="l00797"></a>00797       }
<a name="l00798"></a>00798     }
<a name="l00799"></a>00799     <span class="keywordflow">else</span> {
<a name="l00800"></a>00800       len = tlen;
<a name="l00801"></a>00801     }
<a name="l00802"></a>00802   }
<a name="l00803"></a>00803   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a> &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> == 1 &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> == 0) { <span class="comment">/* &apos;??&apos; */</span>
<a name="l00804"></a>00804     len = <a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a> + cklen + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a> + tlen;
<a name="l00805"></a>00805   }
<a name="l00806"></a>00806   <span class="keywordflow">else</span> {
<a name="l00807"></a>00807     len = <a class="code" href="../../d6/d87/regint_8h.html#acf4d0718e855f1f1febb11e7cdda1015">SIZE_OP_REPEAT_INC</a>
<a name="l00808"></a>00808         + mod_tlen + <a class="code" href="../../d6/d87/regint_8h.html#a66af445efd415f99aadf774f122216ce">SIZE_OPCODE</a> + <a class="code" href="../../d6/d87/regint_8h.html#a452ae7b392734f127e7400d0dce6b5aa">SIZE_RELADDR</a> + <a class="code" href="../../d6/d87/regint_8h.html#aba2581191b5b6472db1fd2728b585d78">SIZE_MEMNUM</a>;
<a name="l00809"></a>00809     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#afab40be9879803efb8ef803155a0eb82">CKN_ON</a>)
<a name="l00810"></a>00810       len += SIZE_OP_STATE_CHECK;
<a name="l00811"></a>00811   }
<a name="l00812"></a>00812 
<a name="l00813"></a>00813   <span class="keywordflow">return</span> len;
<a name="l00814"></a>00814 }
<a name="l00815"></a>00815 
<a name="l00816"></a>00816 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00817"></a>00817 <a class="code" href="../../d0/d86/regcomp_8c.html#a9b0ad06272088a15b1d93ca7dcb200df">compile_quantifier_node</a>(<a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* qn, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l00818"></a>00818 {
<a name="l00819"></a>00819   <span class="keywordtype">int</span> r, mod_tlen;
<a name="l00820"></a>00820   <span class="keywordtype">int</span> ckn;
<a name="l00821"></a>00821   <span class="keywordtype">int</span> infinite = <a class="code" href="../../d6/d87/regint_8h.html#a7b7f11d4b2705496b7711598403d4f72">IS_REPEAT_INFINITE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>);
<a name="l00822"></a>00822   <span class="keywordtype">int</span> empty_info = qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a3fe211fb928a1bcc58f4263cabc66f3d">target_empty_info</a>;
<a name="l00823"></a>00823   <span class="keywordtype">int</span> tlen = <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg);
<a name="l00824"></a>00824 
<a name="l00825"></a>00825   <span class="keywordflow">if</span> (tlen &lt; 0) <span class="keywordflow">return</span> tlen;
<a name="l00826"></a>00826 
<a name="l00827"></a>00827   ckn = ((reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a627abcc41418b0bdee0827c88e26d12b">num_comb_exp_check</a> &gt; 0) ? qn-&gt;comb_exp_check_num : 0);
<a name="l00828"></a>00828 
<a name="l00829"></a>00829   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#a5f9e5dede687cfd4c97e1e4b89146acc">is_anychar_star_quantifier</a>(qn)) {
<a name="l00830"></a>00830     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a91d018076ba815206f6320f9b7379626">compile_tree_n_times</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>, reg);
<a name="l00831"></a>00831     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00832"></a>00832     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#adde522805efdb73abd4f84ba1b92a4b1">next_head_exact</a>) &amp;&amp; !<a class="code" href="../../d0/d86/regcomp_8c.html#afab40be9879803efb8ef803155a0eb82">CKN_ON</a>) {
<a name="l00833"></a>00833       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a98896bcddf1dce2b16e3d9d4da9b32c7">IS_MULTILINE</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a>))
<a name="l00834"></a>00834         r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7acc0675ef0928d65dd4c91b226c494d4a">OP_ANYCHAR_ML_STAR_PEEK_NEXT</a>);
<a name="l00835"></a>00835       <span class="keywordflow">else</span>
<a name="l00836"></a>00836         r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a38ecf0bc81634703d7efb9cd25696bed">OP_ANYCHAR_STAR_PEEK_NEXT</a>);
<a name="l00837"></a>00837       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00838"></a>00838       <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#afab40be9879803efb8ef803155a0eb82">CKN_ON</a>) {
<a name="l00839"></a>00839         r = add_state_check_num(reg, ckn);
<a name="l00840"></a>00840         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00841"></a>00841       }
<a name="l00842"></a>00842 
<a name="l00843"></a>00843       <span class="keywordflow">return</span> <a class="code" href="../../d0/d86/regcomp_8c.html#a8ca21a5244959b3186e91fcf6c4d5bf7">add_bytes</a>(reg, <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#adde522805efdb73abd4f84ba1b92a4b1">next_head_exact</a>)-&gt;s, 1);
<a name="l00844"></a>00844     }
<a name="l00845"></a>00845     <span class="keywordflow">else</span> {
<a name="l00846"></a>00846       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a98896bcddf1dce2b16e3d9d4da9b32c7">IS_MULTILINE</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a>)) {
<a name="l00847"></a>00847         r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, (<a class="code" href="../../d0/d86/regcomp_8c.html#afab40be9879803efb8ef803155a0eb82">CKN_ON</a> ?
<a name="l00848"></a>00848                                <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aa70df437aa2f9fcdf377768a26199386">OP_STATE_CHECK_ANYCHAR_ML_STAR</a>
<a name="l00849"></a>00849                              : <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a62797c81bffe2c3d9c4919d67de05bb9">OP_ANYCHAR_ML_STAR</a>));
<a name="l00850"></a>00850       }
<a name="l00851"></a>00851       <span class="keywordflow">else</span> {
<a name="l00852"></a>00852         r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, (<a class="code" href="../../d0/d86/regcomp_8c.html#afab40be9879803efb8ef803155a0eb82">CKN_ON</a> ?
<a name="l00853"></a>00853                                <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a146ae0f0e9a7a21afb4edb4f6971a66a">OP_STATE_CHECK_ANYCHAR_STAR</a>
<a name="l00854"></a>00854                              : <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a6d5f8220471f142a4b341f2ef4b8919c">OP_ANYCHAR_STAR</a>));
<a name="l00855"></a>00855       }
<a name="l00856"></a>00856       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00857"></a>00857       <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#afab40be9879803efb8ef803155a0eb82">CKN_ON</a>)
<a name="l00858"></a>00858         r = add_state_check_num(reg, ckn);
<a name="l00859"></a>00859 
<a name="l00860"></a>00860       <span class="keywordflow">return</span> r;
<a name="l00861"></a>00861     }
<a name="l00862"></a>00862   }
<a name="l00863"></a>00863 
<a name="l00864"></a>00864   <span class="keywordflow">if</span> (empty_info != 0)
<a name="l00865"></a>00865     mod_tlen = tlen + (<a class="code" href="../../d6/d87/regint_8h.html#ab4cb397b113395716ab65360e5fd17fa">SIZE_OP_NULL_CHECK_START</a> + <a class="code" href="../../d6/d87/regint_8h.html#a63fe7ea2dcfce23ca783f5a36b9d1e6e">SIZE_OP_NULL_CHECK_END</a>);
<a name="l00866"></a>00866   <span class="keywordflow">else</span>
<a name="l00867"></a>00867     mod_tlen = tlen;
<a name="l00868"></a>00868 
<a name="l00869"></a>00869   <span class="keywordflow">if</span> (infinite &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> &lt;= 1) {
<a name="l00870"></a>00870     <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a>) {
<a name="l00871"></a>00871       <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> == 1) {
<a name="l00872"></a>00872         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>,
<a name="l00873"></a>00873                         (<a class="code" href="../../d0/d86/regcomp_8c.html#afab40be9879803efb8ef803155a0eb82">CKN_ON</a> ? SIZE_OP_STATE_CHECK_PUSH : <a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a>));
<a name="l00874"></a>00874         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00875"></a>00875       }
<a name="l00876"></a>00876 
<a name="l00877"></a>00877       <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#afab40be9879803efb8ef803155a0eb82">CKN_ON</a>) {
<a name="l00878"></a>00878         r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a9b76e8922477cbbb9e53f8ce3c255536">OP_STATE_CHECK_PUSH</a>);
<a name="l00879"></a>00879         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00880"></a>00880         r = add_state_check_num(reg, ckn);
<a name="l00881"></a>00881         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00882"></a>00882         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a243429256ca92d036981b9d03367ef48">add_rel_addr</a>(reg, mod_tlen + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>);
<a name="l00883"></a>00883       }
<a name="l00884"></a>00884       <span class="keywordflow">else</span> {
<a name="l00885"></a>00885         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8dac71c3d6bbd96671b3a21efcc5b49f">OP_PUSH</a>, mod_tlen + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>);
<a name="l00886"></a>00886       }
<a name="l00887"></a>00887       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00888"></a>00888       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a7516d17ec7570d5fe41b660e8d5bd6ba">compile_tree_empty_check</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg, empty_info);
<a name="l00889"></a>00889       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00890"></a>00890       r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>,
<a name="l00891"></a>00891               -(mod_tlen + (<span class="keywordtype">int</span> )<a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>
<a name="l00892"></a>00892                 + (<span class="keywordtype">int</span> )(<a class="code" href="../../d0/d86/regcomp_8c.html#afab40be9879803efb8ef803155a0eb82">CKN_ON</a> ? SIZE_OP_STATE_CHECK_PUSH : <a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a>)));
<a name="l00893"></a>00893     }
<a name="l00894"></a>00894     <span class="keywordflow">else</span> {
<a name="l00895"></a>00895       <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> == 0) {
<a name="l00896"></a>00896         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>, mod_tlen);
<a name="l00897"></a>00897         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00898"></a>00898       }
<a name="l00899"></a>00899       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a7516d17ec7570d5fe41b660e8d5bd6ba">compile_tree_empty_check</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg, empty_info);
<a name="l00900"></a>00900       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00901"></a>00901       <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#afab40be9879803efb8ef803155a0eb82">CKN_ON</a>) {
<a name="l00902"></a>00902         r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a0b5db3c7450ac9950ff859e8f58bb24c">OP_STATE_CHECK_PUSH_OR_JUMP</a>);
<a name="l00903"></a>00903         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00904"></a>00904         r = add_state_check_num(reg, ckn);
<a name="l00905"></a>00905         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00906"></a>00906         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a243429256ca92d036981b9d03367ef48">add_rel_addr</a>(reg,
<a name="l00907"></a>00907                  -(mod_tlen + (<span class="keywordtype">int</span> )SIZE_OP_STATE_CHECK_PUSH_OR_JUMP));
<a name="l00908"></a>00908       }
<a name="l00909"></a>00909       <span class="keywordflow">else</span>
<a name="l00910"></a>00910         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8dac71c3d6bbd96671b3a21efcc5b49f">OP_PUSH</a>, -(mod_tlen + (<span class="keywordtype">int</span> )<a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a>));
<a name="l00911"></a>00911     }
<a name="l00912"></a>00912   }
<a name="l00913"></a>00913   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> == 0) {
<a name="l00914"></a>00914     <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a5a8d1fa9320f1d0755269185a5588390">is_refered</a> != 0) { <span class="comment">/* /(?&lt;n&gt;..){0}/ */</span>
<a name="l00915"></a>00915       r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>, tlen);
<a name="l00916"></a>00916       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00917"></a>00917       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg);
<a name="l00918"></a>00918     }
<a name="l00919"></a>00919     <span class="keywordflow">else</span>
<a name="l00920"></a>00920       r = 0;
<a name="l00921"></a>00921   }
<a name="l00922"></a>00922   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> == 1 &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a>) {
<a name="l00923"></a>00923     <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> == 0) {
<a name="l00924"></a>00924       <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#afab40be9879803efb8ef803155a0eb82">CKN_ON</a>) {
<a name="l00925"></a>00925         r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a9b76e8922477cbbb9e53f8ce3c255536">OP_STATE_CHECK_PUSH</a>);
<a name="l00926"></a>00926         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00927"></a>00927         r = add_state_check_num(reg, ckn);
<a name="l00928"></a>00928         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00929"></a>00929         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a243429256ca92d036981b9d03367ef48">add_rel_addr</a>(reg, tlen);
<a name="l00930"></a>00930       }
<a name="l00931"></a>00931       <span class="keywordflow">else</span> {
<a name="l00932"></a>00932         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8dac71c3d6bbd96671b3a21efcc5b49f">OP_PUSH</a>, tlen);
<a name="l00933"></a>00933       }
<a name="l00934"></a>00934       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00935"></a>00935     }
<a name="l00936"></a>00936 
<a name="l00937"></a>00937     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg);
<a name="l00938"></a>00938   }
<a name="l00939"></a>00939   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a> &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> == 1 &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> == 0) { <span class="comment">/* &apos;??&apos; */</span>
<a name="l00940"></a>00940     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#afab40be9879803efb8ef803155a0eb82">CKN_ON</a>) {
<a name="l00941"></a>00941       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a9b76e8922477cbbb9e53f8ce3c255536">OP_STATE_CHECK_PUSH</a>);
<a name="l00942"></a>00942       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00943"></a>00943       r = add_state_check_num(reg, ckn);
<a name="l00944"></a>00944       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00945"></a>00945       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a243429256ca92d036981b9d03367ef48">add_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>);
<a name="l00946"></a>00946     }
<a name="l00947"></a>00947     <span class="keywordflow">else</span> {
<a name="l00948"></a>00948       r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8dac71c3d6bbd96671b3a21efcc5b49f">OP_PUSH</a>, <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>);
<a name="l00949"></a>00949     }
<a name="l00950"></a>00950 
<a name="l00951"></a>00951     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00952"></a>00952     r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>, tlen);
<a name="l00953"></a>00953     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00954"></a>00954     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg);
<a name="l00955"></a>00955   }
<a name="l00956"></a>00956   <span class="keywordflow">else</span> {
<a name="l00957"></a>00957     r = <a class="code" href="../../d0/d86/regcomp_8c.html#acf4181a20d2530191810735a3e671d9e">compile_range_repeat_node</a>(qn, mod_tlen, empty_info, reg);
<a name="l00958"></a>00958     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#afab40be9879803efb8ef803155a0eb82">CKN_ON</a>) {
<a name="l00959"></a>00959       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00960"></a>00960       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a1b9a9a69ed5dd1a468b8cb4343ba2d42">OP_STATE_CHECK</a>);
<a name="l00961"></a>00961       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l00962"></a>00962       r = add_state_check_num(reg, ckn);
<a name="l00963"></a>00963     }
<a name="l00964"></a>00964   }
<a name="l00965"></a>00965   <span class="keywordflow">return</span> r;
<a name="l00966"></a>00966 }
<a name="l00967"></a>00967 
<a name="l00968"></a>00968 <span class="preprocessor">#else </span><span class="comment">/* USE_COMBINATION_EXPLOSION_CHECK */</span>
<a name="l00969"></a>00969 
<a name="l00970"></a>00970 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l00971"></a><a class="code" href="../../d0/d86/regcomp_8c.html#afb9ae3231efb837441d2ab1dd6cc1c7d">00971</a> <a class="code" href="../../d0/d86/regcomp_8c.html#afb9ae3231efb837441d2ab1dd6cc1c7d">compile_length_quantifier_node</a>(<a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* qn, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l00972"></a>00972 {
<a name="l00973"></a>00973   <span class="keywordtype">int</span> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>, mod_tlen;
<a name="l00974"></a>00974   <span class="keywordtype">int</span> infinite = <a class="code" href="../../d6/d87/regint_8h.html#a7b7f11d4b2705496b7711598403d4f72">IS_REPEAT_INFINITE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>);
<a name="l00975"></a>00975   <span class="keywordtype">int</span> empty_info = qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a3fe211fb928a1bcc58f4263cabc66f3d">target_empty_info</a>;
<a name="l00976"></a>00976   <span class="keywordtype">int</span> tlen = <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg);
<a name="l00977"></a>00977 
<a name="l00978"></a>00978   <span class="keywordflow">if</span> (tlen &lt; 0) <span class="keywordflow">return</span> tlen;
<a name="l00979"></a>00979 
<a name="l00980"></a>00980   <span class="comment">/* anychar repeat */</span>
<a name="l00981"></a>00981   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>) == <a class="code" href="../../d1/dfc/regparse_8h.html#a21a7fcbf4a9c872540490d92b9c29813">NT_CANY</a>) {
<a name="l00982"></a>00982     <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a> &amp;&amp; infinite) {
<a name="l00983"></a>00983       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#adde522805efdb73abd4f84ba1b92a4b1">next_head_exact</a>))
<a name="l00984"></a>00984         <span class="keywordflow">return</span> <a class="code" href="../../d6/d87/regint_8h.html#a830aa348921e289aa8739c76814a6d85">SIZE_OP_ANYCHAR_STAR_PEEK_NEXT</a> + tlen * qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>;
<a name="l00985"></a>00985       <span class="keywordflow">else</span>
<a name="l00986"></a>00986         <span class="keywordflow">return</span> <a class="code" href="../../d6/d87/regint_8h.html#a9db7488f14ad3d195e64dc1b0c9dd0bf">SIZE_OP_ANYCHAR_STAR</a> + tlen * qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>;
<a name="l00987"></a>00987     }
<a name="l00988"></a>00988   }
<a name="l00989"></a>00989 
<a name="l00990"></a>00990   <span class="keywordflow">if</span> (empty_info != 0)
<a name="l00991"></a>00991     mod_tlen = tlen + (<a class="code" href="../../d6/d87/regint_8h.html#ab4cb397b113395716ab65360e5fd17fa">SIZE_OP_NULL_CHECK_START</a> + <a class="code" href="../../d6/d87/regint_8h.html#a63fe7ea2dcfce23ca783f5a36b9d1e6e">SIZE_OP_NULL_CHECK_END</a>);
<a name="l00992"></a>00992   <span class="keywordflow">else</span>
<a name="l00993"></a>00993     mod_tlen = tlen;
<a name="l00994"></a>00994 
<a name="l00995"></a>00995   <span class="keywordflow">if</span> (infinite &amp;&amp;
<a name="l00996"></a>00996       (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> &lt;= 1 || tlen * qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> &lt;= <a class="code" href="../../d0/d86/regcomp_8c.html#a24614dfeca814b59b47f7b9968722f0b">QUANTIFIER_EXPAND_LIMIT_SIZE</a>)) {
<a name="l00997"></a>00997     <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> == 1 &amp;&amp; tlen &gt; <a class="code" href="../../d0/d86/regcomp_8c.html#a24614dfeca814b59b47f7b9968722f0b">QUANTIFIER_EXPAND_LIMIT_SIZE</a>) {
<a name="l00998"></a>00998       len = <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>;
<a name="l00999"></a>00999     }
<a name="l01000"></a>01000     <span class="keywordflow">else</span> {
<a name="l01001"></a>01001       len = tlen * qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>;
<a name="l01002"></a>01002     }
<a name="l01003"></a>01003 
<a name="l01004"></a>01004     <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a>) {
<a name="l01005"></a>01005       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a48cfdf5f3ea6bc385ab77ab6428f3c24">head_exact</a>))
<a name="l01006"></a>01006         len += <a class="code" href="../../d6/d87/regint_8h.html#a31f51c883f546aa837f10bdfab5ff8bd">SIZE_OP_PUSH_OR_JUMP_EXACT1</a> + mod_tlen + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>;
<a name="l01007"></a>01007       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#adde522805efdb73abd4f84ba1b92a4b1">next_head_exact</a>))
<a name="l01008"></a>01008         len += <a class="code" href="../../d6/d87/regint_8h.html#a0c4c3e23413405db7b5d85592fbf35c6">SIZE_OP_PUSH_IF_PEEK_NEXT</a> + mod_tlen + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>;
<a name="l01009"></a>01009       <span class="keywordflow">else</span>
<a name="l01010"></a>01010         len += <a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a> + mod_tlen + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>;
<a name="l01011"></a>01011     }
<a name="l01012"></a>01012     <span class="keywordflow">else</span>
<a name="l01013"></a>01013       len += <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a> + mod_tlen + <a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a>;
<a name="l01014"></a>01014   }
<a name="l01015"></a>01015   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> == 0 &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a5a8d1fa9320f1d0755269185a5588390">is_refered</a> != 0) { <span class="comment">/* /(?&lt;n&gt;..){0}/ */</span>
<a name="l01016"></a>01016     len = <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a> + tlen;
<a name="l01017"></a>01017   }
<a name="l01018"></a>01018   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!infinite &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a> &amp;&amp;
<a name="l01019"></a>01019            (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> == 1 || (tlen + <a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a>) * qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>
<a name="l01020"></a>01020                                       &lt;= <a class="code" href="../../d0/d86/regcomp_8c.html#a24614dfeca814b59b47f7b9968722f0b">QUANTIFIER_EXPAND_LIMIT_SIZE</a>)) {
<a name="l01021"></a>01021     len = tlen * qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>;
<a name="l01022"></a>01022     len += (<a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a> + tlen) * (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> - qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>);
<a name="l01023"></a>01023   }
<a name="l01024"></a>01024   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a> &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> == 1 &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> == 0) { <span class="comment">/* &apos;??&apos; */</span>
<a name="l01025"></a>01025     len = <a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a> + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a> + tlen;
<a name="l01026"></a>01026   }
<a name="l01027"></a>01027   <span class="keywordflow">else</span> {
<a name="l01028"></a>01028     len = <a class="code" href="../../d6/d87/regint_8h.html#acf4d0718e855f1f1febb11e7cdda1015">SIZE_OP_REPEAT_INC</a>
<a name="l01029"></a>01029         + mod_tlen + <a class="code" href="../../d6/d87/regint_8h.html#a66af445efd415f99aadf774f122216ce">SIZE_OPCODE</a> + <a class="code" href="../../d6/d87/regint_8h.html#a452ae7b392734f127e7400d0dce6b5aa">SIZE_RELADDR</a> + <a class="code" href="../../d6/d87/regint_8h.html#aba2581191b5b6472db1fd2728b585d78">SIZE_MEMNUM</a>;
<a name="l01030"></a>01030   }
<a name="l01031"></a>01031 
<a name="l01032"></a>01032   <span class="keywordflow">return</span> len;
<a name="l01033"></a>01033 }
<a name="l01034"></a>01034 
<a name="l01035"></a>01035 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01036"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a9b0ad06272088a15b1d93ca7dcb200df">01036</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a9b0ad06272088a15b1d93ca7dcb200df">compile_quantifier_node</a>(<a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* qn, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l01037"></a>01037 {
<a name="l01038"></a>01038   <span class="keywordtype">int</span> i, r, mod_tlen;
<a name="l01039"></a>01039   <span class="keywordtype">int</span> infinite = <a class="code" href="../../d6/d87/regint_8h.html#a7b7f11d4b2705496b7711598403d4f72">IS_REPEAT_INFINITE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>);
<a name="l01040"></a>01040   <span class="keywordtype">int</span> empty_info = qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a3fe211fb928a1bcc58f4263cabc66f3d">target_empty_info</a>;
<a name="l01041"></a>01041   <span class="keywordtype">int</span> tlen = <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg);
<a name="l01042"></a>01042 
<a name="l01043"></a>01043   <span class="keywordflow">if</span> (tlen &lt; 0) <span class="keywordflow">return</span> tlen;
<a name="l01044"></a>01044 
<a name="l01045"></a>01045   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#a5f9e5dede687cfd4c97e1e4b89146acc">is_anychar_star_quantifier</a>(qn)) {
<a name="l01046"></a>01046     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a91d018076ba815206f6320f9b7379626">compile_tree_n_times</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>, reg);
<a name="l01047"></a>01047     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01048"></a>01048     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#adde522805efdb73abd4f84ba1b92a4b1">next_head_exact</a>)) {
<a name="l01049"></a>01049       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a98896bcddf1dce2b16e3d9d4da9b32c7">IS_MULTILINE</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a>))
<a name="l01050"></a>01050         r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7acc0675ef0928d65dd4c91b226c494d4a">OP_ANYCHAR_ML_STAR_PEEK_NEXT</a>);
<a name="l01051"></a>01051       <span class="keywordflow">else</span>
<a name="l01052"></a>01052         r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a38ecf0bc81634703d7efb9cd25696bed">OP_ANYCHAR_STAR_PEEK_NEXT</a>);
<a name="l01053"></a>01053       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01054"></a>01054       <span class="keywordflow">return</span> <a class="code" href="../../d0/d86/regcomp_8c.html#a8ca21a5244959b3186e91fcf6c4d5bf7">add_bytes</a>(reg, <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#adde522805efdb73abd4f84ba1b92a4b1">next_head_exact</a>)-&gt;s, 1);
<a name="l01055"></a>01055     }
<a name="l01056"></a>01056     <span class="keywordflow">else</span> {
<a name="l01057"></a>01057       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a98896bcddf1dce2b16e3d9d4da9b32c7">IS_MULTILINE</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a>))
<a name="l01058"></a>01058         <span class="keywordflow">return</span> <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a62797c81bffe2c3d9c4919d67de05bb9">OP_ANYCHAR_ML_STAR</a>);
<a name="l01059"></a>01059       <span class="keywordflow">else</span>
<a name="l01060"></a>01060         <span class="keywordflow">return</span> <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a6d5f8220471f142a4b341f2ef4b8919c">OP_ANYCHAR_STAR</a>);
<a name="l01061"></a>01061     }
<a name="l01062"></a>01062   }
<a name="l01063"></a>01063 
<a name="l01064"></a>01064   <span class="keywordflow">if</span> (empty_info != 0)
<a name="l01065"></a>01065     mod_tlen = tlen + (<a class="code" href="../../d6/d87/regint_8h.html#ab4cb397b113395716ab65360e5fd17fa">SIZE_OP_NULL_CHECK_START</a> + <a class="code" href="../../d6/d87/regint_8h.html#a63fe7ea2dcfce23ca783f5a36b9d1e6e">SIZE_OP_NULL_CHECK_END</a>);
<a name="l01066"></a>01066   <span class="keywordflow">else</span>
<a name="l01067"></a>01067     mod_tlen = tlen;
<a name="l01068"></a>01068 
<a name="l01069"></a>01069   <span class="keywordflow">if</span> (infinite &amp;&amp;
<a name="l01070"></a>01070       (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> &lt;= 1 || tlen * qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> &lt;= <a class="code" href="../../d0/d86/regcomp_8c.html#a24614dfeca814b59b47f7b9968722f0b">QUANTIFIER_EXPAND_LIMIT_SIZE</a>)) {
<a name="l01071"></a>01071     <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> == 1 &amp;&amp; tlen &gt; <a class="code" href="../../d0/d86/regcomp_8c.html#a24614dfeca814b59b47f7b9968722f0b">QUANTIFIER_EXPAND_LIMIT_SIZE</a>) {
<a name="l01072"></a>01072       <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a>) {
<a name="l01073"></a>01073         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a48cfdf5f3ea6bc385ab77ab6428f3c24">head_exact</a>))
<a name="l01074"></a>01074           r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>, <a class="code" href="../../d6/d87/regint_8h.html#a31f51c883f546aa837f10bdfab5ff8bd">SIZE_OP_PUSH_OR_JUMP_EXACT1</a>);
<a name="l01075"></a>01075         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#adde522805efdb73abd4f84ba1b92a4b1">next_head_exact</a>))
<a name="l01076"></a>01076           r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>, <a class="code" href="../../d6/d87/regint_8h.html#a0c4c3e23413405db7b5d85592fbf35c6">SIZE_OP_PUSH_IF_PEEK_NEXT</a>);
<a name="l01077"></a>01077         <span class="keywordflow">else</span>
<a name="l01078"></a>01078           r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>, <a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a>);
<a name="l01079"></a>01079       }
<a name="l01080"></a>01080       <span class="keywordflow">else</span> {
<a name="l01081"></a>01081         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>, <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>);
<a name="l01082"></a>01082       }
<a name="l01083"></a>01083       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01084"></a>01084     }
<a name="l01085"></a>01085     <span class="keywordflow">else</span> {
<a name="l01086"></a>01086       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a91d018076ba815206f6320f9b7379626">compile_tree_n_times</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>, reg);
<a name="l01087"></a>01087       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01088"></a>01088     }
<a name="l01089"></a>01089 
<a name="l01090"></a>01090     <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a>) {
<a name="l01091"></a>01091       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a48cfdf5f3ea6bc385ab77ab6428f3c24">head_exact</a>)) {
<a name="l01092"></a>01092         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a6c17e281c04ad4d3282805c194e8ff99">OP_PUSH_OR_JUMP_EXACT1</a>,
<a name="l01093"></a>01093                              mod_tlen + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>);
<a name="l01094"></a>01094         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01095"></a>01095         <a class="code" href="../../d0/d86/regcomp_8c.html#a8ca21a5244959b3186e91fcf6c4d5bf7">add_bytes</a>(reg, <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a48cfdf5f3ea6bc385ab77ab6428f3c24">head_exact</a>)-&gt;s, 1);
<a name="l01096"></a>01096         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a7516d17ec7570d5fe41b660e8d5bd6ba">compile_tree_empty_check</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg, empty_info);
<a name="l01097"></a>01097         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01098"></a>01098         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>,
<a name="l01099"></a>01099         -(mod_tlen + (<span class="keywordtype">int</span> )<a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a> + (<span class="keywordtype">int</span> )<a class="code" href="../../d6/d87/regint_8h.html#a31f51c883f546aa837f10bdfab5ff8bd">SIZE_OP_PUSH_OR_JUMP_EXACT1</a>));
<a name="l01100"></a>01100       }
<a name="l01101"></a>01101       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#adde522805efdb73abd4f84ba1b92a4b1">next_head_exact</a>)) {
<a name="l01102"></a>01102         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aa8bc2955f8564742ed69b36ef9474dd4">OP_PUSH_IF_PEEK_NEXT</a>,
<a name="l01103"></a>01103                                 mod_tlen + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>);
<a name="l01104"></a>01104         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01105"></a>01105         <a class="code" href="../../d0/d86/regcomp_8c.html#a8ca21a5244959b3186e91fcf6c4d5bf7">add_bytes</a>(reg, <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#adde522805efdb73abd4f84ba1b92a4b1">next_head_exact</a>)-&gt;s, 1);
<a name="l01106"></a>01106         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a7516d17ec7570d5fe41b660e8d5bd6ba">compile_tree_empty_check</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg, empty_info);
<a name="l01107"></a>01107         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01108"></a>01108         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>,
<a name="l01109"></a>01109           -(mod_tlen + (<span class="keywordtype">int</span> )<a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a> + (<span class="keywordtype">int</span> )<a class="code" href="../../d6/d87/regint_8h.html#a0c4c3e23413405db7b5d85592fbf35c6">SIZE_OP_PUSH_IF_PEEK_NEXT</a>));
<a name="l01110"></a>01110       }
<a name="l01111"></a>01111       <span class="keywordflow">else</span> {
<a name="l01112"></a>01112         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8dac71c3d6bbd96671b3a21efcc5b49f">OP_PUSH</a>, mod_tlen + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>);
<a name="l01113"></a>01113         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01114"></a>01114         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a7516d17ec7570d5fe41b660e8d5bd6ba">compile_tree_empty_check</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg, empty_info);
<a name="l01115"></a>01115         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01116"></a>01116         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>,
<a name="l01117"></a>01117                      -(mod_tlen + (<span class="keywordtype">int</span> )<a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a> + (<span class="keywordtype">int</span> )<a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a>));
<a name="l01118"></a>01118       }
<a name="l01119"></a>01119     }
<a name="l01120"></a>01120     <span class="keywordflow">else</span> {
<a name="l01121"></a>01121       r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>, mod_tlen);
<a name="l01122"></a>01122       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01123"></a>01123       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a7516d17ec7570d5fe41b660e8d5bd6ba">compile_tree_empty_check</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg, empty_info);
<a name="l01124"></a>01124       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01125"></a>01125       r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8dac71c3d6bbd96671b3a21efcc5b49f">OP_PUSH</a>, -(mod_tlen + (<span class="keywordtype">int</span> )<a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a>));
<a name="l01126"></a>01126     }
<a name="l01127"></a>01127   }
<a name="l01128"></a>01128   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> == 0 &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a5a8d1fa9320f1d0755269185a5588390">is_refered</a> != 0) { <span class="comment">/* /(?&lt;n&gt;..){0}/ */</span>
<a name="l01129"></a>01129     r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>, tlen);
<a name="l01130"></a>01130     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01131"></a>01131     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg);
<a name="l01132"></a>01132   }
<a name="l01133"></a>01133   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!infinite &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a> &amp;&amp;
<a name="l01134"></a>01134            (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> == 1 || (tlen + <a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a>) * qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>
<a name="l01135"></a>01135                                   &lt;= <a class="code" href="../../d0/d86/regcomp_8c.html#a24614dfeca814b59b47f7b9968722f0b">QUANTIFIER_EXPAND_LIMIT_SIZE</a>)) {
<a name="l01136"></a>01136     <span class="keywordtype">int</span> n = qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> - qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>;
<a name="l01137"></a>01137 
<a name="l01138"></a>01138     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a91d018076ba815206f6320f9b7379626">compile_tree_n_times</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>, reg);
<a name="l01139"></a>01139     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01140"></a>01140 
<a name="l01141"></a>01141     <span class="keywordflow">for</span> (i = 0; i &lt; n; i++) {
<a name="l01142"></a>01142       r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8dac71c3d6bbd96671b3a21efcc5b49f">OP_PUSH</a>,
<a name="l01143"></a>01143                            (n - i) * tlen + (n - i - 1) * <a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a>);
<a name="l01144"></a>01144       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01145"></a>01145       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg);
<a name="l01146"></a>01146       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01147"></a>01147     }
<a name="l01148"></a>01148   }
<a name="l01149"></a>01149   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a> &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> == 1 &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> == 0) { <span class="comment">/* &apos;??&apos; */</span>
<a name="l01150"></a>01150     r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8dac71c3d6bbd96671b3a21efcc5b49f">OP_PUSH</a>, <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>);
<a name="l01151"></a>01151     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01152"></a>01152     r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>, tlen);
<a name="l01153"></a>01153     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01154"></a>01154     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg);
<a name="l01155"></a>01155   }
<a name="l01156"></a>01156   <span class="keywordflow">else</span> {
<a name="l01157"></a>01157     r = <a class="code" href="../../d0/d86/regcomp_8c.html#acf4181a20d2530191810735a3e671d9e">compile_range_repeat_node</a>(qn, mod_tlen, empty_info, reg);
<a name="l01158"></a>01158   }
<a name="l01159"></a>01159   <span class="keywordflow">return</span> r;
<a name="l01160"></a>01160 }
<a name="l01161"></a>01161 <span class="preprocessor">#endif </span><span class="comment">/* USE_COMBINATION_EXPLOSION_CHECK */</span>
<a name="l01162"></a>01162 
<a name="l01163"></a>01163 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01164"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ae1c3786784f7117cb9ce60187f0a6583">01164</a> <a class="code" href="../../d0/d86/regcomp_8c.html#ae1c3786784f7117cb9ce60187f0a6583">compile_length_option_node</a>(<a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l01165"></a>01165 {
<a name="l01166"></a>01166   <span class="keywordtype">int</span> tlen;
<a name="l01167"></a>01167   <a class="code" href="../../d8/db3/oniguruma_8h.html#ad870c1a94502ad33c083978b17911e72">OnigOptionType</a> <a class="code" href="../../d7/dc0/parse_8y.html#a71f8b6ffdc0cc58ffd989c3162fb2bcf">prev</a> = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a>;
<a name="l01168"></a>01168 
<a name="l01169"></a>01169   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a> = node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#a5dbb80c0012ac8b7d137371d8cb89667">option</a>;
<a name="l01170"></a>01170   tlen = <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, reg);
<a name="l01171"></a>01171   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a> = prev;
<a name="l01172"></a>01172 
<a name="l01173"></a>01173   <span class="keywordflow">if</span> (tlen &lt; 0) <span class="keywordflow">return</span> tlen;
<a name="l01174"></a>01174 
<a name="l01175"></a>01175   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a2362e23c5936826a0dc39bd18e5e22c8">IS_DYNAMIC_OPTION</a>(prev ^ node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#a5dbb80c0012ac8b7d137371d8cb89667">option</a>)) {
<a name="l01176"></a>01176     <span class="keywordflow">return</span> <a class="code" href="../../d6/d87/regint_8h.html#ac53cec2abc00648c85817c504abf66e2">SIZE_OP_SET_OPTION_PUSH</a> + <a class="code" href="../../d6/d87/regint_8h.html#afd6d10598e0fb6ae8556de4e3b8332ab">SIZE_OP_SET_OPTION</a> + <a class="code" href="../../d6/d87/regint_8h.html#a7374989293bbdf2c15ed77a17c4ccdf5">SIZE_OP_FAIL</a>
<a name="l01177"></a>01177            + tlen + <a class="code" href="../../d6/d87/regint_8h.html#afd6d10598e0fb6ae8556de4e3b8332ab">SIZE_OP_SET_OPTION</a>;
<a name="l01178"></a>01178   }
<a name="l01179"></a>01179   <span class="keywordflow">else</span>
<a name="l01180"></a>01180     <span class="keywordflow">return</span> tlen;
<a name="l01181"></a>01181 }
<a name="l01182"></a>01182 
<a name="l01183"></a>01183 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01184"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a2165ca62a2575912e715cd48e52f1bad">01184</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a2165ca62a2575912e715cd48e52f1bad">compile_option_node</a>(<a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l01185"></a>01185 {
<a name="l01186"></a>01186   <span class="keywordtype">int</span> r;
<a name="l01187"></a>01187   <a class="code" href="../../d8/db3/oniguruma_8h.html#ad870c1a94502ad33c083978b17911e72">OnigOptionType</a> <a class="code" href="../../d7/dc0/parse_8y.html#a71f8b6ffdc0cc58ffd989c3162fb2bcf">prev</a> = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a>;
<a name="l01188"></a>01188 
<a name="l01189"></a>01189   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a2362e23c5936826a0dc39bd18e5e22c8">IS_DYNAMIC_OPTION</a>(prev ^ node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#a5dbb80c0012ac8b7d137371d8cb89667">option</a>)) {
<a name="l01190"></a>01190     r = <a class="code" href="../../d0/d86/regcomp_8c.html#aa58b641c5ebbf7b6949b2ed358fbd59c">add_opcode_option</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a5d513f1b6600c48c5a04c81a74a25fe6">OP_SET_OPTION_PUSH</a>, node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#a5dbb80c0012ac8b7d137371d8cb89667">option</a>);
<a name="l01191"></a>01191     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01192"></a>01192     r = <a class="code" href="../../d0/d86/regcomp_8c.html#aa58b641c5ebbf7b6949b2ed358fbd59c">add_opcode_option</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a48fb4a33f7cdc4c6d194377fea0e9ff0">OP_SET_OPTION</a>, prev);
<a name="l01193"></a>01193     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01194"></a>01194     r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7adad4289276b97b650558ce66d141d648">OP_FAIL</a>);
<a name="l01195"></a>01195     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01196"></a>01196   }
<a name="l01197"></a>01197 
<a name="l01198"></a>01198   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a> = node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#a5dbb80c0012ac8b7d137371d8cb89667">option</a>;
<a name="l01199"></a>01199   r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, reg);
<a name="l01200"></a>01200   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a> = prev;
<a name="l01201"></a>01201 
<a name="l01202"></a>01202   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a2362e23c5936826a0dc39bd18e5e22c8">IS_DYNAMIC_OPTION</a>(prev ^ node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#a5dbb80c0012ac8b7d137371d8cb89667">option</a>)) {
<a name="l01203"></a>01203     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01204"></a>01204     r = <a class="code" href="../../d0/d86/regcomp_8c.html#aa58b641c5ebbf7b6949b2ed358fbd59c">add_opcode_option</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a48fb4a33f7cdc4c6d194377fea0e9ff0">OP_SET_OPTION</a>, prev);
<a name="l01205"></a>01205   }
<a name="l01206"></a>01206   <span class="keywordflow">return</span> r;
<a name="l01207"></a>01207 }
<a name="l01208"></a>01208 
<a name="l01209"></a>01209 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01210"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ac5017ecf195e17b985150bfc61a185a1">01210</a> <a class="code" href="../../d0/d86/regcomp_8c.html#ac5017ecf195e17b985150bfc61a185a1">compile_length_enclose_node</a>(<a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l01211"></a>01211 {
<a name="l01212"></a>01212   <span class="keywordtype">int</span> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l01213"></a>01213   <span class="keywordtype">int</span> tlen;
<a name="l01214"></a>01214 
<a name="l01215"></a>01215   <span class="keywordflow">if</span> (node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ae554d8a44a852592c4b79ee3241645c7">type</a> == <a class="code" href="../../d1/dfc/regparse_8h.html#a1f27f4cccd30502c03174673fe25af41">ENCLOSE_OPTION</a>)
<a name="l01216"></a>01216     <span class="keywordflow">return</span> <a class="code" href="../../d0/d86/regcomp_8c.html#ae1c3786784f7117cb9ce60187f0a6583">compile_length_option_node</a>(node, reg);
<a name="l01217"></a>01217 
<a name="l01218"></a>01218   <span class="keywordflow">if</span> (node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>) {
<a name="l01219"></a>01219     tlen = <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, reg);
<a name="l01220"></a>01220     <span class="keywordflow">if</span> (tlen &lt; 0) <span class="keywordflow">return</span> tlen;
<a name="l01221"></a>01221   }
<a name="l01222"></a>01222   <span class="keywordflow">else</span>
<a name="l01223"></a>01223     tlen = 0;
<a name="l01224"></a>01224 
<a name="l01225"></a>01225   <span class="keywordflow">switch</span> (node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ae554d8a44a852592c4b79ee3241645c7">type</a>) {
<a name="l01226"></a>01226   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a32e44d8ddaca8fd4931a8c13677972ad">ENCLOSE_MEMORY</a>:
<a name="l01227"></a>01227 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l01228"></a>01228 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a540ae1be7564579c1a005bd62ca6fcbb">IS_ENCLOSE_CALLED</a>(node)) {
<a name="l01229"></a>01229       len = <a class="code" href="../../d6/d87/regint_8h.html#aa673d97bc65c6d36ddabbdd49cb0cea5">SIZE_OP_MEMORY_START_PUSH</a> + tlen
<a name="l01230"></a>01230           + <a class="code" href="../../d6/d87/regint_8h.html#aef22f435d703f0836bf9ee53aadc5411">SIZE_OP_CALL</a> + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a> + <a class="code" href="../../d6/d87/regint_8h.html#a59d1237894c00c713db7a5472a7875c2">SIZE_OP_RETURN</a>;
<a name="l01231"></a>01231       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#af199b44779566d1c0d04e5eedff8ce2b">BIT_STATUS_AT</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a7d19e58612f0ca3cad71119d5627d21a">bt_mem_end</a>, node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#adda9a1fd356c9b102c09a3c596583b81">regnum</a>))
<a name="l01232"></a>01232         len += (<a class="code" href="../../d1/dfc/regparse_8h.html#a6b46359badf064aa3ba4bb6b75da3f7d">IS_ENCLOSE_RECURSION</a>(node)
<a name="l01233"></a>01233                 ? <a class="code" href="../../d6/d87/regint_8h.html#a7389be4aaa3071d28d0c06cc812c8f14">SIZE_OP_MEMORY_END_PUSH_REC</a> : <a class="code" href="../../d6/d87/regint_8h.html#a3696a8b5dd5bfcaaafea5f8d2d90abd2">SIZE_OP_MEMORY_END_PUSH</a>);
<a name="l01234"></a>01234       <span class="keywordflow">else</span>
<a name="l01235"></a>01235         len += (<a class="code" href="../../d1/dfc/regparse_8h.html#a6b46359badf064aa3ba4bb6b75da3f7d">IS_ENCLOSE_RECURSION</a>(node)
<a name="l01236"></a>01236                 ? <a class="code" href="../../d6/d87/regint_8h.html#aef1ccb3eb648f78a1059c9b8133b7586">SIZE_OP_MEMORY_END_REC</a> : <a class="code" href="../../d6/d87/regint_8h.html#a4453fd48853da110ba3b36c366cc6b8d">SIZE_OP_MEMORY_END</a>);
<a name="l01237"></a>01237     }
<a name="l01238"></a>01238     <span class="keywordflow">else</span>
<a name="l01239"></a>01239 <span class="preprocessor">#endif</span>
<a name="l01240"></a>01240 <span class="preprocessor"></span>    {
<a name="l01241"></a>01241       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#af199b44779566d1c0d04e5eedff8ce2b">BIT_STATUS_AT</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a2a513978bf98ec87c87c0d597f8d5ba4">bt_mem_start</a>, node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#adda9a1fd356c9b102c09a3c596583b81">regnum</a>))
<a name="l01242"></a>01242         len = <a class="code" href="../../d6/d87/regint_8h.html#aa673d97bc65c6d36ddabbdd49cb0cea5">SIZE_OP_MEMORY_START_PUSH</a>;
<a name="l01243"></a>01243       <span class="keywordflow">else</span>
<a name="l01244"></a>01244         len = <a class="code" href="../../d6/d87/regint_8h.html#a65845f3b9d377acac42b4e082b24a83b">SIZE_OP_MEMORY_START</a>;
<a name="l01245"></a>01245 
<a name="l01246"></a>01246       len += tlen + (<a class="code" href="../../d6/d87/regint_8h.html#af199b44779566d1c0d04e5eedff8ce2b">BIT_STATUS_AT</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a7d19e58612f0ca3cad71119d5627d21a">bt_mem_end</a>, node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#adda9a1fd356c9b102c09a3c596583b81">regnum</a>)
<a name="l01247"></a>01247                      ? <a class="code" href="../../d6/d87/regint_8h.html#a3696a8b5dd5bfcaaafea5f8d2d90abd2">SIZE_OP_MEMORY_END_PUSH</a> : <a class="code" href="../../d6/d87/regint_8h.html#a4453fd48853da110ba3b36c366cc6b8d">SIZE_OP_MEMORY_END</a>);
<a name="l01248"></a>01248     }
<a name="l01249"></a>01249     <span class="keywordflow">break</span>;
<a name="l01250"></a>01250 
<a name="l01251"></a>01251   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a8a9f973f8fdb597a604757521ae63fe2">ENCLOSE_STOP_BACKTRACK</a>:
<a name="l01252"></a>01252     <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#affacdcaad55b9463952eea0f241849b0">IS_ENCLOSE_STOP_BT_SIMPLE_REPEAT</a>(node)) {
<a name="l01253"></a>01253       <a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* qn = <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>);
<a name="l01254"></a>01254       tlen = <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg);
<a name="l01255"></a>01255       <span class="keywordflow">if</span> (tlen &lt; 0) <span class="keywordflow">return</span> tlen;
<a name="l01256"></a>01256 
<a name="l01257"></a>01257       len = tlen * qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>
<a name="l01258"></a>01258           + <a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a> + tlen + <a class="code" href="../../d6/d87/regint_8h.html#a982de955d49e5ab8c2fe258e2fa4da38">SIZE_OP_POP</a> + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>;
<a name="l01259"></a>01259     }
<a name="l01260"></a>01260     <span class="keywordflow">else</span> {
<a name="l01261"></a>01261       len = <a class="code" href="../../d6/d87/regint_8h.html#a5da5807038d4d88be40d3351eb0223a3">SIZE_OP_PUSH_STOP_BT</a> + tlen + <a class="code" href="../../d6/d87/regint_8h.html#a1987158858664b083fa97ba4b164b4f5">SIZE_OP_POP_STOP_BT</a>;
<a name="l01262"></a>01262     }
<a name="l01263"></a>01263     <span class="keywordflow">break</span>;
<a name="l01264"></a>01264 
<a name="l01265"></a>01265   <span class="keywordflow">default</span>:
<a name="l01266"></a>01266     <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5ca9b130d8887d7801e69fc25e858a44">ONIGERR_TYPE_BUG</a>;
<a name="l01267"></a>01267     <span class="keywordflow">break</span>;
<a name="l01268"></a>01268   }
<a name="l01269"></a>01269 
<a name="l01270"></a>01270   <span class="keywordflow">return</span> len;
<a name="l01271"></a>01271 }
<a name="l01272"></a>01272 
<a name="l01273"></a>01273 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d86/regcomp_8c.html#a2c933c9dbf2fa16cda90f1e04a6c901c">get_char_length_tree</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keywordtype">int</span>* <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>);
<a name="l01274"></a>01274 
<a name="l01275"></a>01275 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01276"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a390b20c237a30175b994273094fb919c">01276</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a390b20c237a30175b994273094fb919c">compile_enclose_node</a>(<a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l01277"></a>01277 {
<a name="l01278"></a>01278   <span class="keywordtype">int</span> r, <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l01279"></a>01279 
<a name="l01280"></a>01280   <span class="keywordflow">if</span> (node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ae554d8a44a852592c4b79ee3241645c7">type</a> == <a class="code" href="../../d1/dfc/regparse_8h.html#a1f27f4cccd30502c03174673fe25af41">ENCLOSE_OPTION</a>)
<a name="l01281"></a>01281     <span class="keywordflow">return</span> <a class="code" href="../../d0/d86/regcomp_8c.html#a2165ca62a2575912e715cd48e52f1bad">compile_option_node</a>(node, reg);
<a name="l01282"></a>01282 
<a name="l01283"></a>01283   <span class="keywordflow">switch</span> (node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ae554d8a44a852592c4b79ee3241645c7">type</a>) {
<a name="l01284"></a>01284   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a32e44d8ddaca8fd4931a8c13677972ad">ENCLOSE_MEMORY</a>:
<a name="l01285"></a>01285 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l01286"></a>01286 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a540ae1be7564579c1a005bd62ca6fcbb">IS_ENCLOSE_CALLED</a>(node)) {
<a name="l01287"></a>01287       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a098bbeea13096667b102f7fd90cbe38f">OP_CALL</a>);
<a name="l01288"></a>01288       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01289"></a>01289       node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#abf88c08e3eef023439b2435cfb05ec8a">call_addr</a> = <a class="code" href="../../d6/d87/regint_8h.html#ab276246a7ef0f7f1f524561d70db25a4">BBUF_GET_OFFSET_POS</a>(reg) + <a class="code" href="../../d6/d87/regint_8h.html#adb98b5217b9bd3c7fef7f999a1a918b1">SIZE_ABSADDR</a> + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>;
<a name="l01290"></a>01290       node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ab363e7282fc840cf5d2bc6c3ef782abe">state</a> |= <a class="code" href="../../d1/dfc/regparse_8h.html#a062214adf41d57d532eb6e7ba7464f47">NST_ADDR_FIXED</a>;
<a name="l01291"></a>01291       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a896254bdbc411f21efe6aa82cab2cf75">add_abs_addr</a>(reg, (<span class="keywordtype">int</span> )node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#abf88c08e3eef023439b2435cfb05ec8a">call_addr</a>);
<a name="l01292"></a>01292       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01293"></a>01293       len = <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, reg);
<a name="l01294"></a>01294       len += (<a class="code" href="../../d6/d87/regint_8h.html#aa673d97bc65c6d36ddabbdd49cb0cea5">SIZE_OP_MEMORY_START_PUSH</a> + <a class="code" href="../../d6/d87/regint_8h.html#a59d1237894c00c713db7a5472a7875c2">SIZE_OP_RETURN</a>);
<a name="l01295"></a>01295       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#af199b44779566d1c0d04e5eedff8ce2b">BIT_STATUS_AT</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a7d19e58612f0ca3cad71119d5627d21a">bt_mem_end</a>, node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#adda9a1fd356c9b102c09a3c596583b81">regnum</a>))
<a name="l01296"></a>01296         len += (<a class="code" href="../../d1/dfc/regparse_8h.html#a6b46359badf064aa3ba4bb6b75da3f7d">IS_ENCLOSE_RECURSION</a>(node)
<a name="l01297"></a>01297                 ? <a class="code" href="../../d6/d87/regint_8h.html#a7389be4aaa3071d28d0c06cc812c8f14">SIZE_OP_MEMORY_END_PUSH_REC</a> : <a class="code" href="../../d6/d87/regint_8h.html#a3696a8b5dd5bfcaaafea5f8d2d90abd2">SIZE_OP_MEMORY_END_PUSH</a>);
<a name="l01298"></a>01298       <span class="keywordflow">else</span>
<a name="l01299"></a>01299         len += (<a class="code" href="../../d1/dfc/regparse_8h.html#a6b46359badf064aa3ba4bb6b75da3f7d">IS_ENCLOSE_RECURSION</a>(node)
<a name="l01300"></a>01300                 ? <a class="code" href="../../d6/d87/regint_8h.html#aef1ccb3eb648f78a1059c9b8133b7586">SIZE_OP_MEMORY_END_REC</a> : <a class="code" href="../../d6/d87/regint_8h.html#a4453fd48853da110ba3b36c366cc6b8d">SIZE_OP_MEMORY_END</a>);
<a name="l01301"></a>01301 
<a name="l01302"></a>01302       r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>, len);
<a name="l01303"></a>01303       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01304"></a>01304     }
<a name="l01305"></a>01305 <span class="preprocessor">#endif</span>
<a name="l01306"></a>01306 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#af199b44779566d1c0d04e5eedff8ce2b">BIT_STATUS_AT</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a2a513978bf98ec87c87c0d597f8d5ba4">bt_mem_start</a>, node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#adda9a1fd356c9b102c09a3c596583b81">regnum</a>))
<a name="l01307"></a>01307       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ad44ea2499dde46a2fcae29c05eff5865">OP_MEMORY_START_PUSH</a>);
<a name="l01308"></a>01308     <span class="keywordflow">else</span>
<a name="l01309"></a>01309       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a478f412b2ab4f5af5a8fd5b5bcbd8099">OP_MEMORY_START</a>);
<a name="l01310"></a>01310     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01311"></a>01311     r = <a class="code" href="../../d0/d86/regcomp_8c.html#af40c81c2868345b45aac5211ba114965">add_mem_num</a>(reg, node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#adda9a1fd356c9b102c09a3c596583b81">regnum</a>);
<a name="l01312"></a>01312     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01313"></a>01313     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, reg);
<a name="l01314"></a>01314     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01315"></a>01315 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l01316"></a>01316 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a540ae1be7564579c1a005bd62ca6fcbb">IS_ENCLOSE_CALLED</a>(node)) {
<a name="l01317"></a>01317       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#af199b44779566d1c0d04e5eedff8ce2b">BIT_STATUS_AT</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a7d19e58612f0ca3cad71119d5627d21a">bt_mem_end</a>, node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#adda9a1fd356c9b102c09a3c596583b81">regnum</a>))
<a name="l01318"></a>01318         r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, (<a class="code" href="../../d1/dfc/regparse_8h.html#a6b46359badf064aa3ba4bb6b75da3f7d">IS_ENCLOSE_RECURSION</a>(node)
<a name="l01319"></a>01319                              ? <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a7389f0c8828e3af17d7f37ce1091e428">OP_MEMORY_END_PUSH_REC</a> : <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a9506e738bc1e09a6683b903e3b74e042">OP_MEMORY_END_PUSH</a>));
<a name="l01320"></a>01320       <span class="keywordflow">else</span>
<a name="l01321"></a>01321         r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, (<a class="code" href="../../d1/dfc/regparse_8h.html#a6b46359badf064aa3ba4bb6b75da3f7d">IS_ENCLOSE_RECURSION</a>(node)
<a name="l01322"></a>01322                              ? <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a1bd6d9ded3fe265889fbde6fafdc4029">OP_MEMORY_END_REC</a> : <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a614869c999fdc8cbbb3795e881bd82b4">OP_MEMORY_END</a>));
<a name="l01323"></a>01323 
<a name="l01324"></a>01324       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01325"></a>01325       r = <a class="code" href="../../d0/d86/regcomp_8c.html#af40c81c2868345b45aac5211ba114965">add_mem_num</a>(reg, node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#adda9a1fd356c9b102c09a3c596583b81">regnum</a>);
<a name="l01326"></a>01326       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01327"></a>01327       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ad436c18b194473f5ec64c28b774e41b3">OP_RETURN</a>);
<a name="l01328"></a>01328     }
<a name="l01329"></a>01329     <span class="keywordflow">else</span>
<a name="l01330"></a>01330 <span class="preprocessor">#endif</span>
<a name="l01331"></a>01331 <span class="preprocessor"></span>    {
<a name="l01332"></a>01332       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#af199b44779566d1c0d04e5eedff8ce2b">BIT_STATUS_AT</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a7d19e58612f0ca3cad71119d5627d21a">bt_mem_end</a>, node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#adda9a1fd356c9b102c09a3c596583b81">regnum</a>))
<a name="l01333"></a>01333         r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a9506e738bc1e09a6683b903e3b74e042">OP_MEMORY_END_PUSH</a>);
<a name="l01334"></a>01334       <span class="keywordflow">else</span>
<a name="l01335"></a>01335         r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a614869c999fdc8cbbb3795e881bd82b4">OP_MEMORY_END</a>);
<a name="l01336"></a>01336       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01337"></a>01337       r = <a class="code" href="../../d0/d86/regcomp_8c.html#af40c81c2868345b45aac5211ba114965">add_mem_num</a>(reg, node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#adda9a1fd356c9b102c09a3c596583b81">regnum</a>);
<a name="l01338"></a>01338     }
<a name="l01339"></a>01339     <span class="keywordflow">break</span>;
<a name="l01340"></a>01340 
<a name="l01341"></a>01341   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a8a9f973f8fdb597a604757521ae63fe2">ENCLOSE_STOP_BACKTRACK</a>:
<a name="l01342"></a>01342     <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#affacdcaad55b9463952eea0f241849b0">IS_ENCLOSE_STOP_BT_SIMPLE_REPEAT</a>(node)) {
<a name="l01343"></a>01343       <a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* qn = <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>);
<a name="l01344"></a>01344       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a91d018076ba815206f6320f9b7379626">compile_tree_n_times</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>, reg);
<a name="l01345"></a>01345       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01346"></a>01346 
<a name="l01347"></a>01347       len = <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg);
<a name="l01348"></a>01348       <span class="keywordflow">if</span> (len &lt; 0) <span class="keywordflow">return</span> len;
<a name="l01349"></a>01349 
<a name="l01350"></a>01350       r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8dac71c3d6bbd96671b3a21efcc5b49f">OP_PUSH</a>, len + <a class="code" href="../../d6/d87/regint_8h.html#a982de955d49e5ab8c2fe258e2fa4da38">SIZE_OP_POP</a> + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>);
<a name="l01351"></a>01351       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01352"></a>01352       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg);
<a name="l01353"></a>01353       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01354"></a>01354       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7afb3c2d934da3bfb01e4fd56338324e21">OP_POP</a>);
<a name="l01355"></a>01355       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01356"></a>01356       r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>,
<a name="l01357"></a>01357          -((<span class="keywordtype">int</span> )<a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a> + len + (<span class="keywordtype">int</span> )<a class="code" href="../../d6/d87/regint_8h.html#a982de955d49e5ab8c2fe258e2fa4da38">SIZE_OP_POP</a> + (<span class="keywordtype">int</span> )<a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>));
<a name="l01358"></a>01358     }
<a name="l01359"></a>01359     <span class="keywordflow">else</span> {
<a name="l01360"></a>01360       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a3d0f03207719e90631a99584f156fd69">OP_PUSH_STOP_BT</a>);
<a name="l01361"></a>01361       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01362"></a>01362       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(node-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, reg);
<a name="l01363"></a>01363       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01364"></a>01364       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a3425a34f545c48e5063f609951f6a5d2">OP_POP_STOP_BT</a>);
<a name="l01365"></a>01365     }
<a name="l01366"></a>01366     <span class="keywordflow">break</span>;
<a name="l01367"></a>01367 
<a name="l01368"></a>01368   <span class="keywordflow">default</span>:
<a name="l01369"></a>01369     <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5ca9b130d8887d7801e69fc25e858a44">ONIGERR_TYPE_BUG</a>;
<a name="l01370"></a>01370     <span class="keywordflow">break</span>;
<a name="l01371"></a>01371   }
<a name="l01372"></a>01372 
<a name="l01373"></a>01373   <span class="keywordflow">return</span> r;
<a name="l01374"></a>01374 }
<a name="l01375"></a>01375 
<a name="l01376"></a>01376 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01377"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a1038a09d8ebbff7dd1b62841487d6492">01377</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a1038a09d8ebbff7dd1b62841487d6492">compile_length_anchor_node</a>(<a class="code" href="../../de/d50/struct_anchor_node.html">AnchorNode</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l01378"></a>01378 {
<a name="l01379"></a>01379   <span class="keywordtype">int</span> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l01380"></a>01380   <span class="keywordtype">int</span> tlen = 0;
<a name="l01381"></a>01381 
<a name="l01382"></a>01382   <span class="keywordflow">if</span> (node-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>) {
<a name="l01383"></a>01383     tlen = <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(node-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, reg);
<a name="l01384"></a>01384     <span class="keywordflow">if</span> (tlen &lt; 0) <span class="keywordflow">return</span> tlen;
<a name="l01385"></a>01385   }
<a name="l01386"></a>01386 
<a name="l01387"></a>01387   <span class="keywordflow">switch</span> (node-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#a123b9c289808fe00650dbcff45fa2662">type</a>) {
<a name="l01388"></a>01388   <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#aa0f9fc98186b637ecce6d72e12ee1eed">ANCHOR_PREC_READ</a>:
<a name="l01389"></a>01389     len = <a class="code" href="../../d6/d87/regint_8h.html#a521c603f91468e4bd3887be06146cc95">SIZE_OP_PUSH_POS</a> + tlen + <a class="code" href="../../d6/d87/regint_8h.html#a78025c45b4f4c81888a0e100da98a513">SIZE_OP_POP_POS</a>;
<a name="l01390"></a>01390     <span class="keywordflow">break</span>;
<a name="l01391"></a>01391   <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a1c64ac74f61b2ffbf3b60f391ae65cbf">ANCHOR_PREC_READ_NOT</a>:
<a name="l01392"></a>01392     len = <a class="code" href="../../d6/d87/regint_8h.html#a7f4412f18205c4b37623f988eb18bb89">SIZE_OP_PUSH_POS_NOT</a> + tlen + <a class="code" href="../../d6/d87/regint_8h.html#ae4daa5105cd16a46819209ac7bf35132">SIZE_OP_FAIL_POS</a>;
<a name="l01393"></a>01393     <span class="keywordflow">break</span>;
<a name="l01394"></a>01394   <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a460ceecc3150bd7cd2437d41fbeb9ea8">ANCHOR_LOOK_BEHIND</a>:
<a name="l01395"></a>01395     len = <a class="code" href="../../d6/d87/regint_8h.html#af3d9262b7c0aaeee796fe9ad4278be44">SIZE_OP_LOOK_BEHIND</a> + tlen;
<a name="l01396"></a>01396     <span class="keywordflow">break</span>;
<a name="l01397"></a>01397   <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a8812f9a061dd987fe8426262589b52c4">ANCHOR_LOOK_BEHIND_NOT</a>:
<a name="l01398"></a>01398     len = <a class="code" href="../../d6/d87/regint_8h.html#ab22739f8e42f2447f7f14d653fb36d66">SIZE_OP_PUSH_LOOK_BEHIND_NOT</a> + tlen + <a class="code" href="../../d6/d87/regint_8h.html#afec995e1a7fc68fd1c56d49aca1bc35e">SIZE_OP_FAIL_LOOK_BEHIND_NOT</a>;
<a name="l01399"></a>01399     <span class="keywordflow">break</span>;
<a name="l01400"></a>01400 
<a name="l01401"></a>01401   <span class="keywordflow">default</span>:
<a name="l01402"></a>01402     len = <a class="code" href="../../d6/d87/regint_8h.html#a66af445efd415f99aadf774f122216ce">SIZE_OPCODE</a>;
<a name="l01403"></a>01403     <span class="keywordflow">break</span>;
<a name="l01404"></a>01404   }
<a name="l01405"></a>01405 
<a name="l01406"></a>01406   <span class="keywordflow">return</span> len;
<a name="l01407"></a>01407 }
<a name="l01408"></a>01408 
<a name="l01409"></a>01409 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01410"></a><a class="code" href="../../d0/d86/regcomp_8c.html#acfa9bfac441484b482b74052332a8a62">01410</a> <a class="code" href="../../d0/d86/regcomp_8c.html#acfa9bfac441484b482b74052332a8a62">compile_anchor_node</a>(<a class="code" href="../../de/d50/struct_anchor_node.html">AnchorNode</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l01411"></a>01411 {
<a name="l01412"></a>01412   <span class="keywordtype">int</span> r, <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l01413"></a>01413 
<a name="l01414"></a>01414   <span class="keywordflow">switch</span> (node-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#a123b9c289808fe00650dbcff45fa2662">type</a>) {
<a name="l01415"></a>01415   <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a5730b2ca5b8a8bbe5262c77ee26b7879">ANCHOR_BEGIN_BUF</a>:      r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ac25b75d19f6d5cd630a33af760282c9f">OP_BEGIN_BUF</a>);      <span class="keywordflow">break</span>;
<a name="l01416"></a>01416   <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#afae1199ac99483eb29f0824cea7b3329">ANCHOR_END_BUF</a>:        r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a7f3e45fe326369661137f1c6917452e5">OP_END_BUF</a>);        <span class="keywordflow">break</span>;
<a name="l01417"></a>01417   <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a0d426ab760f616696759ce14c060b622">ANCHOR_BEGIN_LINE</a>:     r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a5027423d234f4c5c0c274f73e1e3fadf">OP_BEGIN_LINE</a>);     <span class="keywordflow">break</span>;
<a name="l01418"></a>01418   <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a4dd9db8ffc551d1a759f1fac90baff78">ANCHOR_END_LINE</a>:       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a713c68f995a911ebed7e76959dd399cb">OP_END_LINE</a>);       <span class="keywordflow">break</span>;
<a name="l01419"></a>01419   <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a9336254890d4656b7e36574b462ca093">ANCHOR_SEMI_END_BUF</a>:   r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aa6767417108895a812655ac876c8e864">OP_SEMI_END_BUF</a>);   <span class="keywordflow">break</span>;
<a name="l01420"></a>01420   <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a317bea7c5108d3c78717a5df263fbe09">ANCHOR_BEGIN_POSITION</a>: r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a73e05280eb706c29a5ffbe231409e493">OP_BEGIN_POSITION</a>); <span class="keywordflow">break</span>;
<a name="l01421"></a>01421 
<a name="l01422"></a>01422   <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a5963eb85b5d3cfaecc1425010a2e4357">ANCHOR_WORD_BOUND</a>:     r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a54cec6cd7483b7562f8897301d5bf2d1">OP_WORD_BOUND</a>);     <span class="keywordflow">break</span>;
<a name="l01423"></a>01423   <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#ab1e3503037b2e8094b2f66a32fc40683">ANCHOR_NOT_WORD_BOUND</a>: r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7adb558375d652ef360d63b17c2b0c352a">OP_NOT_WORD_BOUND</a>); <span class="keywordflow">break</span>;
<a name="l01424"></a>01424 <span class="preprocessor">#ifdef USE_WORD_BEGIN_END</span>
<a name="l01425"></a>01425 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a6f3c15a0c4744c9125d79f1f157c4c05">ANCHOR_WORD_BEGIN</a>:     r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a2fec22cbf9b011b09c6f3348e6cc57aa">OP_WORD_BEGIN</a>);     <span class="keywordflow">break</span>;
<a name="l01426"></a>01426   <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#afa94e4bc6eced6f5f03a444e5e3d2d84">ANCHOR_WORD_END</a>:       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a2f171697d7a44612cf41e4e92ade53af">OP_WORD_END</a>);       <span class="keywordflow">break</span>;
<a name="l01427"></a>01427 <span class="preprocessor">#endif</span>
<a name="l01428"></a>01428 <span class="preprocessor"></span>
<a name="l01429"></a>01429   <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#aa0f9fc98186b637ecce6d72e12ee1eed">ANCHOR_PREC_READ</a>:
<a name="l01430"></a>01430     r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a7610e76242dce7c27e1ae5f896018f8a">OP_PUSH_POS</a>);
<a name="l01431"></a>01431     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01432"></a>01432     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(node-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, reg);
<a name="l01433"></a>01433     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01434"></a>01434     r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a2a4012299c05e09918aa9c94825d17c5">OP_POP_POS</a>);
<a name="l01435"></a>01435     <span class="keywordflow">break</span>;
<a name="l01436"></a>01436 
<a name="l01437"></a>01437   <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a1c64ac74f61b2ffbf3b60f391ae65cbf">ANCHOR_PREC_READ_NOT</a>:
<a name="l01438"></a>01438     len = <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(node-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, reg);
<a name="l01439"></a>01439     <span class="keywordflow">if</span> (len &lt; 0) <span class="keywordflow">return</span> len;
<a name="l01440"></a>01440     r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a0d4a8a75d3fb3cfa8a2989e475b0aa4b">OP_PUSH_POS_NOT</a>, len + <a class="code" href="../../d6/d87/regint_8h.html#ae4daa5105cd16a46819209ac7bf35132">SIZE_OP_FAIL_POS</a>);
<a name="l01441"></a>01441     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01442"></a>01442     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(node-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, reg);
<a name="l01443"></a>01443     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01444"></a>01444     r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7abd08dd3919e43ea497e79f43deb03d3e">OP_FAIL_POS</a>);
<a name="l01445"></a>01445     <span class="keywordflow">break</span>;
<a name="l01446"></a>01446 
<a name="l01447"></a>01447   <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a460ceecc3150bd7cd2437d41fbeb9ea8">ANCHOR_LOOK_BEHIND</a>:
<a name="l01448"></a>01448     {
<a name="l01449"></a>01449       <span class="keywordtype">int</span> n;
<a name="l01450"></a>01450       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a077f66491531fb39f88e9061b5c21f50">OP_LOOK_BEHIND</a>);
<a name="l01451"></a>01451       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01452"></a>01452       <span class="keywordflow">if</span> (node-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#aa00ddc7db0cbdaf4adf67b3bf1f4cf3c">char_len</a> &lt; 0) {
<a name="l01453"></a>01453         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a2c933c9dbf2fa16cda90f1e04a6c901c">get_char_length_tree</a>(node-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, reg, &amp;n);
<a name="l01454"></a>01454         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a73946c630e9d44c9b570b739180ee451">ONIGERR_INVALID_LOOK_BEHIND_PATTERN</a>;
<a name="l01455"></a>01455       }
<a name="l01456"></a>01456       <span class="keywordflow">else</span>
<a name="l01457"></a>01457         n = node-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#aa00ddc7db0cbdaf4adf67b3bf1f4cf3c">char_len</a>;
<a name="l01458"></a>01458       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a852b4186cb93270cd7d71ebe658196c4">add_length</a>(reg, n);
<a name="l01459"></a>01459       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01460"></a>01460       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(node-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, reg);
<a name="l01461"></a>01461     }
<a name="l01462"></a>01462     <span class="keywordflow">break</span>;
<a name="l01463"></a>01463 
<a name="l01464"></a>01464   <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a8812f9a061dd987fe8426262589b52c4">ANCHOR_LOOK_BEHIND_NOT</a>:
<a name="l01465"></a>01465     {
<a name="l01466"></a>01466       <span class="keywordtype">int</span> n;
<a name="l01467"></a>01467       len = <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(node-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, reg);
<a name="l01468"></a>01468       r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a3a1e1f361ad65db2b5f4b953c86d1dcd">OP_PUSH_LOOK_BEHIND_NOT</a>,
<a name="l01469"></a>01469                            len + <a class="code" href="../../d6/d87/regint_8h.html#afec995e1a7fc68fd1c56d49aca1bc35e">SIZE_OP_FAIL_LOOK_BEHIND_NOT</a>);
<a name="l01470"></a>01470       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01471"></a>01471       <span class="keywordflow">if</span> (node-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#aa00ddc7db0cbdaf4adf67b3bf1f4cf3c">char_len</a> &lt; 0) {
<a name="l01472"></a>01472         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a2c933c9dbf2fa16cda90f1e04a6c901c">get_char_length_tree</a>(node-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, reg, &amp;n);
<a name="l01473"></a>01473         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a73946c630e9d44c9b570b739180ee451">ONIGERR_INVALID_LOOK_BEHIND_PATTERN</a>;
<a name="l01474"></a>01474       }
<a name="l01475"></a>01475       <span class="keywordflow">else</span>
<a name="l01476"></a>01476         n = node-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#aa00ddc7db0cbdaf4adf67b3bf1f4cf3c">char_len</a>;
<a name="l01477"></a>01477       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a852b4186cb93270cd7d71ebe658196c4">add_length</a>(reg, n);
<a name="l01478"></a>01478       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01479"></a>01479       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(node-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, reg);
<a name="l01480"></a>01480       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01481"></a>01481       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7adfd6110eed51c3cd1dd5b5aba4e74017">OP_FAIL_LOOK_BEHIND_NOT</a>);
<a name="l01482"></a>01482     }
<a name="l01483"></a>01483     <span class="keywordflow">break</span>;
<a name="l01484"></a>01484 
<a name="l01485"></a>01485   <span class="keywordflow">default</span>:
<a name="l01486"></a>01486     <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5ca9b130d8887d7801e69fc25e858a44">ONIGERR_TYPE_BUG</a>;
<a name="l01487"></a>01487     <span class="keywordflow">break</span>;
<a name="l01488"></a>01488   }
<a name="l01489"></a>01489 
<a name="l01490"></a>01490   <span class="keywordflow">return</span> r;
<a name="l01491"></a>01491 }
<a name="l01492"></a>01492 
<a name="l01493"></a>01493 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01494"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">01494</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l01495"></a>01495 {
<a name="l01496"></a>01496   <span class="keywordtype">int</span> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>, <a class="code" href="../../d5/d9d/tcltklib_8c.html#ac765329451135abec74c45e1897abf26">type</a>, r;
<a name="l01497"></a>01497 
<a name="l01498"></a>01498   type = <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node);
<a name="l01499"></a>01499   <span class="keywordflow">switch</span> (type) {
<a name="l01500"></a>01500   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l01501"></a>01501     len = 0;
<a name="l01502"></a>01502     <span class="keywordflow">do</span> {
<a name="l01503"></a>01503       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), reg);
<a name="l01504"></a>01504       <span class="keywordflow">if</span> (r &lt; 0) <span class="keywordflow">return</span> r;
<a name="l01505"></a>01505       len += r;
<a name="l01506"></a>01506     } <span class="keywordflow">while</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l01507"></a>01507     r = len;
<a name="l01508"></a>01508     <span class="keywordflow">break</span>;
<a name="l01509"></a>01509 
<a name="l01510"></a>01510   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l01511"></a>01511     {
<a name="l01512"></a>01512       <span class="keywordtype">int</span> n;
<a name="l01513"></a>01513 
<a name="l01514"></a>01514       n = r = 0;
<a name="l01515"></a>01515       <span class="keywordflow">do</span> {
<a name="l01516"></a>01516         r += <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), reg);
<a name="l01517"></a>01517         n++;
<a name="l01518"></a>01518       } <span class="keywordflow">while</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l01519"></a>01519       r += (<a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a> + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>) * (n - 1);
<a name="l01520"></a>01520     }
<a name="l01521"></a>01521     <span class="keywordflow">break</span>;
<a name="l01522"></a>01522 
<a name="l01523"></a>01523   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>:
<a name="l01524"></a>01524     <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ae9f2e7348c7dca167e63f949aba51715">NSTRING_IS_RAW</a>(node))
<a name="l01525"></a>01525       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a106cff8c1200c7332ffe55070aa3c030">compile_length_string_raw_node</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(node), reg);
<a name="l01526"></a>01526     <span class="keywordflow">else</span>
<a name="l01527"></a>01527       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a78af5ec8c5968e56cb0fbe67ef2f8df4">compile_length_string_node</a>(node, reg);
<a name="l01528"></a>01528     <span class="keywordflow">break</span>;
<a name="l01529"></a>01529 
<a name="l01530"></a>01530   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a98cbe6da0636f892e4de517d350a2938">NT_CCLASS</a>:
<a name="l01531"></a>01531     r = <a class="code" href="../../d0/d86/regcomp_8c.html#ab184d74128864548c8dcb8f3d5b19089">compile_length_cclass_node</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#a816a6d8f921892c2efef73eb7727d589">NCCLASS</a>(node), reg);
<a name="l01532"></a>01532     <span class="keywordflow">break</span>;
<a name="l01533"></a>01533 
<a name="l01534"></a>01534   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a542a2658d0f164eea8bc384ab01549d4">NT_CTYPE</a>:
<a name="l01535"></a>01535   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a21a7fcbf4a9c872540490d92b9c29813">NT_CANY</a>:
<a name="l01536"></a>01536     r = <a class="code" href="../../d6/d87/regint_8h.html#a66af445efd415f99aadf774f122216ce">SIZE_OPCODE</a>;
<a name="l01537"></a>01537     <span class="keywordflow">break</span>;
<a name="l01538"></a>01538 
<a name="l01539"></a>01539   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ac1d2a54cfe6dfa9104b4bfb8d06b8aeb">NT_BREF</a>:
<a name="l01540"></a>01540     {
<a name="l01541"></a>01541       <a class="code" href="../../db/dbf/struct_b_ref_node.html">BRefNode</a>* br = <a class="code" href="../../d1/dfc/regparse_8h.html#a38215823f6ab7e63e919eae3bfa79bfa">NBREF</a>(node);
<a name="l01542"></a>01542 
<a name="l01543"></a>01543 <span class="preprocessor">#ifdef USE_BACKREF_WITH_LEVEL</span>
<a name="l01544"></a>01544 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a541503207bbeafefa86e82b117db414f">IS_BACKREF_NEST_LEVEL</a>(br)) {
<a name="l01545"></a>01545         r = <a class="code" href="../../d6/d87/regint_8h.html#a66af445efd415f99aadf774f122216ce">SIZE_OPCODE</a> + <a class="code" href="../../d6/d87/regint_8h.html#aeb0ed981d9ecc9562dfe16cd556327cf">SIZE_OPTION</a> + <a class="code" href="../../d6/d87/regint_8h.html#abc7bd848a318380fe02568bac7ffeb3d">SIZE_LENGTH</a> +
<a name="l01546"></a>01546             <a class="code" href="../../d6/d87/regint_8h.html#abc7bd848a318380fe02568bac7ffeb3d">SIZE_LENGTH</a> + (<a class="code" href="../../d6/d87/regint_8h.html#aba2581191b5b6472db1fd2728b585d78">SIZE_MEMNUM</a> * br-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#ae790ac554909ac2940d464ac98019912">back_num</a>);
<a name="l01547"></a>01547       }
<a name="l01548"></a>01548       <span class="keywordflow">else</span>
<a name="l01549"></a>01549 <span class="preprocessor">#endif</span>
<a name="l01550"></a>01550 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (br-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#ae790ac554909ac2940d464ac98019912">back_num</a> == 1) {
<a name="l01551"></a>01551         r = ((!<a class="code" href="../../d6/d87/regint_8h.html#ae42e344c5336b241948a7a47c99d6533">IS_IGNORECASE</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a>) &amp;&amp; br-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#a0948ce6a9a87eb9f537b46e19ab99809">back_static</a>[0] &lt;= 2)
<a name="l01552"></a>01552              ? <a class="code" href="../../d6/d87/regint_8h.html#a66af445efd415f99aadf774f122216ce">SIZE_OPCODE</a> : (<a class="code" href="../../d6/d87/regint_8h.html#a66af445efd415f99aadf774f122216ce">SIZE_OPCODE</a> + <a class="code" href="../../d6/d87/regint_8h.html#aba2581191b5b6472db1fd2728b585d78">SIZE_MEMNUM</a>));
<a name="l01553"></a>01553       }
<a name="l01554"></a>01554       <span class="keywordflow">else</span> {
<a name="l01555"></a>01555         r = <a class="code" href="../../d6/d87/regint_8h.html#a66af445efd415f99aadf774f122216ce">SIZE_OPCODE</a> + <a class="code" href="../../d6/d87/regint_8h.html#abc7bd848a318380fe02568bac7ffeb3d">SIZE_LENGTH</a> + (<a class="code" href="../../d6/d87/regint_8h.html#aba2581191b5b6472db1fd2728b585d78">SIZE_MEMNUM</a> * br-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#ae790ac554909ac2940d464ac98019912">back_num</a>);
<a name="l01556"></a>01556       }
<a name="l01557"></a>01557     }
<a name="l01558"></a>01558     <span class="keywordflow">break</span>;
<a name="l01559"></a>01559 
<a name="l01560"></a>01560 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l01561"></a>01561 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a35167bbf195155481ee5cbcae152d0f9">NT_CALL</a>:
<a name="l01562"></a>01562     r = <a class="code" href="../../d6/d87/regint_8h.html#aef22f435d703f0836bf9ee53aadc5411">SIZE_OP_CALL</a>;
<a name="l01563"></a>01563     <span class="keywordflow">break</span>;
<a name="l01564"></a>01564 <span class="preprocessor">#endif</span>
<a name="l01565"></a>01565 <span class="preprocessor"></span>
<a name="l01566"></a>01566   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l01567"></a>01567     r = <a class="code" href="../../d0/d86/regcomp_8c.html#afb9ae3231efb837441d2ab1dd6cc1c7d">compile_length_quantifier_node</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node), reg);
<a name="l01568"></a>01568     <span class="keywordflow">break</span>;
<a name="l01569"></a>01569 
<a name="l01570"></a>01570   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l01571"></a>01571     r = <a class="code" href="../../d0/d86/regcomp_8c.html#ac5017ecf195e17b985150bfc61a185a1">compile_length_enclose_node</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node), reg);
<a name="l01572"></a>01572     <span class="keywordflow">break</span>;
<a name="l01573"></a>01573 
<a name="l01574"></a>01574   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l01575"></a>01575     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1038a09d8ebbff7dd1b62841487d6492">compile_length_anchor_node</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node), reg);
<a name="l01576"></a>01576     <span class="keywordflow">break</span>;
<a name="l01577"></a>01577 
<a name="l01578"></a>01578   <span class="keywordflow">default</span>:
<a name="l01579"></a>01579     <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5ca9b130d8887d7801e69fc25e858a44">ONIGERR_TYPE_BUG</a>;
<a name="l01580"></a>01580     <span class="keywordflow">break</span>;
<a name="l01581"></a>01581   }
<a name="l01582"></a>01582 
<a name="l01583"></a>01583   <span class="keywordflow">return</span> r;
<a name="l01584"></a>01584 }
<a name="l01585"></a>01585 
<a name="l01586"></a>01586 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01587"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">01587</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l01588"></a>01588 {
<a name="l01589"></a>01589   <span class="keywordtype">int</span> n, <a class="code" href="../../d5/d9d/tcltklib_8c.html#ac765329451135abec74c45e1897abf26">type</a>, <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>, pos, r = 0;
<a name="l01590"></a>01590 
<a name="l01591"></a>01591   type = <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node);
<a name="l01592"></a>01592   <span class="keywordflow">switch</span> (type) {
<a name="l01593"></a>01593   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l01594"></a>01594     <span class="keywordflow">do</span> {
<a name="l01595"></a>01595       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), reg);
<a name="l01596"></a>01596     } <span class="keywordflow">while</span> (r == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l01597"></a>01597     <span class="keywordflow">break</span>;
<a name="l01598"></a>01598 
<a name="l01599"></a>01599   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l01600"></a>01600     {
<a name="l01601"></a>01601       <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* x = node;
<a name="l01602"></a>01602       len = 0;
<a name="l01603"></a>01603       <span class="keywordflow">do</span> {
<a name="l01604"></a>01604         len += <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(x), reg);
<a name="l01605"></a>01605         <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(x) != <a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l01606"></a>01606           len += <a class="code" href="../../d6/d87/regint_8h.html#a5511993c9e1f95c16b15f815c67be054">SIZE_OP_PUSH</a> + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>;
<a name="l01607"></a>01607         }
<a name="l01608"></a>01608       } <span class="keywordflow">while</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(x = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(x)));
<a name="l01609"></a>01609       pos = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a4cf446c0eb86f2fc3322f9fb27c5dc0f">used</a> + len;  <span class="comment">/* goal position */</span>
<a name="l01610"></a>01610 
<a name="l01611"></a>01611       <span class="keywordflow">do</span> {
<a name="l01612"></a>01612         len = <a class="code" href="../../d0/d86/regcomp_8c.html#a11e5c8c44c3730a666fbaecfe769e49c">compile_length_tree</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), reg);
<a name="l01613"></a>01613         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node))) {
<a name="l01614"></a>01614           r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8dac71c3d6bbd96671b3a21efcc5b49f">OP_PUSH</a>, len + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>);
<a name="l01615"></a>01615           <span class="keywordflow">if</span> (r) <span class="keywordflow">break</span>;
<a name="l01616"></a>01616         }
<a name="l01617"></a>01617         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), reg);
<a name="l01618"></a>01618         <span class="keywordflow">if</span> (r) <span class="keywordflow">break</span>;
<a name="l01619"></a>01619         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node))) {
<a name="l01620"></a>01620           len = pos - (reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a4cf446c0eb86f2fc3322f9fb27c5dc0f">used</a> + <a class="code" href="../../d6/d87/regint_8h.html#aa025528130cd49d3400fee158543d0f3">SIZE_OP_JUMP</a>);
<a name="l01621"></a>01621           r = <a class="code" href="../../d0/d86/regcomp_8c.html#af0dd1f87b44b121587bb1b74f7a1f91b">add_opcode_rel_addr</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>, len);
<a name="l01622"></a>01622           <span class="keywordflow">if</span> (r) <span class="keywordflow">break</span>;
<a name="l01623"></a>01623         }
<a name="l01624"></a>01624       } <span class="keywordflow">while</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l01625"></a>01625     }
<a name="l01626"></a>01626     <span class="keywordflow">break</span>;
<a name="l01627"></a>01627 
<a name="l01628"></a>01628   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>:
<a name="l01629"></a>01629     <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ae9f2e7348c7dca167e63f949aba51715">NSTRING_IS_RAW</a>(node))
<a name="l01630"></a>01630       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a515c57401c36b04eca6d5e1500f6c566">compile_string_raw_node</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(node), reg);
<a name="l01631"></a>01631     <span class="keywordflow">else</span>
<a name="l01632"></a>01632       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a4d9edce417188c84575b5edecf4885a3">compile_string_node</a>(node, reg);
<a name="l01633"></a>01633     <span class="keywordflow">break</span>;
<a name="l01634"></a>01634 
<a name="l01635"></a>01635   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a98cbe6da0636f892e4de517d350a2938">NT_CCLASS</a>:
<a name="l01636"></a>01636     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a415a7336f625a6cbc2bfad26f7a2bc8f">compile_cclass_node</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#a816a6d8f921892c2efef73eb7727d589">NCCLASS</a>(node), reg);
<a name="l01637"></a>01637     <span class="keywordflow">break</span>;
<a name="l01638"></a>01638 
<a name="l01639"></a>01639   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a542a2658d0f164eea8bc384ab01549d4">NT_CTYPE</a>:
<a name="l01640"></a>01640     {
<a name="l01641"></a>01641       <span class="keywordtype">int</span> op;
<a name="l01642"></a>01642 
<a name="l01643"></a>01643       <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a55cfe9cd258d0bdf14d6e48115f7e70b">NCTYPE</a>(node)-&gt;ctype) {
<a name="l01644"></a>01644       <span class="keywordflow">case</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a612fd1e82d5c1d87c6b73c15cee0ae98">ONIGENC_CTYPE_WORD</a>:
<a name="l01645"></a>01645         <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a55cfe9cd258d0bdf14d6e48115f7e70b">NCTYPE</a>(node)-&gt;not != 0)  op = <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aad741b267054ede86f875bee9a2fac55">OP_NOT_WORD</a>;
<a name="l01646"></a>01646         <span class="keywordflow">else</span>                         op = <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8506a6037e9060782cc55cec94419a09">OP_WORD</a>;
<a name="l01647"></a>01647         <span class="keywordflow">break</span>;
<a name="l01648"></a>01648       <span class="keywordflow">default</span>:
<a name="l01649"></a>01649         <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5ca9b130d8887d7801e69fc25e858a44">ONIGERR_TYPE_BUG</a>;
<a name="l01650"></a>01650         <span class="keywordflow">break</span>;
<a name="l01651"></a>01651       }
<a name="l01652"></a>01652       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, op);
<a name="l01653"></a>01653     }
<a name="l01654"></a>01654     <span class="keywordflow">break</span>;
<a name="l01655"></a>01655 
<a name="l01656"></a>01656   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a21a7fcbf4a9c872540490d92b9c29813">NT_CANY</a>:
<a name="l01657"></a>01657     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a98896bcddf1dce2b16e3d9d4da9b32c7">IS_MULTILINE</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a>))
<a name="l01658"></a>01658       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a2443080bedde163464aa357ca6477615">OP_ANYCHAR_ML</a>);
<a name="l01659"></a>01659     <span class="keywordflow">else</span>
<a name="l01660"></a>01660       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a5b08468e605792b6b89d7be760b6d8ed">OP_ANYCHAR</a>);
<a name="l01661"></a>01661     <span class="keywordflow">break</span>;
<a name="l01662"></a>01662 
<a name="l01663"></a>01663   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ac1d2a54cfe6dfa9104b4bfb8d06b8aeb">NT_BREF</a>:
<a name="l01664"></a>01664     {
<a name="l01665"></a>01665       <a class="code" href="../../db/dbf/struct_b_ref_node.html">BRefNode</a>* br = <a class="code" href="../../d1/dfc/regparse_8h.html#a38215823f6ab7e63e919eae3bfa79bfa">NBREF</a>(node);
<a name="l01666"></a>01666 
<a name="l01667"></a>01667 <span class="preprocessor">#ifdef USE_BACKREF_WITH_LEVEL</span>
<a name="l01668"></a>01668 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a541503207bbeafefa86e82b117db414f">IS_BACKREF_NEST_LEVEL</a>(br)) {
<a name="l01669"></a>01669         r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af5a6fae90bfd486b620f19fe1afd5cd2">OP_BACKREF_WITH_LEVEL</a>);
<a name="l01670"></a>01670         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01671"></a>01671         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a83d486156614641c94d97661e17b743b">add_option</a>(reg, (reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a> &amp; <a class="code" href="../../d8/db3/oniguruma_8h.html#a7caf1d0c5932b5b8bb7c63185b0aa1d9">ONIG_OPTION_IGNORECASE</a>));
<a name="l01672"></a>01672         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01673"></a>01673         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a852b4186cb93270cd7d71ebe658196c4">add_length</a>(reg, br-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#add7f3ad730773a428b3cd4ac298d94b9">nest_level</a>);
<a name="l01674"></a>01674         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01675"></a>01675 
<a name="l01676"></a>01676         <span class="keywordflow">goto</span> add_bacref_mems;
<a name="l01677"></a>01677       }
<a name="l01678"></a>01678       <span class="keywordflow">else</span>
<a name="l01679"></a>01679 <span class="preprocessor">#endif</span>
<a name="l01680"></a>01680 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (br-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#ae790ac554909ac2940d464ac98019912">back_num</a> == 1) {
<a name="l01681"></a>01681         n = br-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#a0948ce6a9a87eb9f537b46e19ab99809">back_static</a>[0];
<a name="l01682"></a>01682         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#ae42e344c5336b241948a7a47c99d6533">IS_IGNORECASE</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a>)) {
<a name="l01683"></a>01683           r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a92cac10d5dd6563484d83d78ffd7a9fe">OP_BACKREFN_IC</a>);
<a name="l01684"></a>01684           <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01685"></a>01685           r = <a class="code" href="../../d0/d86/regcomp_8c.html#af40c81c2868345b45aac5211ba114965">add_mem_num</a>(reg, n);
<a name="l01686"></a>01686         }
<a name="l01687"></a>01687         <span class="keywordflow">else</span> {
<a name="l01688"></a>01688           <span class="keywordflow">switch</span> (n) {
<a name="l01689"></a>01689           <span class="keywordflow">case</span> 1:  r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8b63034533b3aeca8955843b184c4a54">OP_BACKREF1</a>); <span class="keywordflow">break</span>;
<a name="l01690"></a>01690           <span class="keywordflow">case</span> 2:  r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ae06b335a0847c8a56fcd748996faae69">OP_BACKREF2</a>); <span class="keywordflow">break</span>;
<a name="l01691"></a>01691           <span class="keywordflow">default</span>:
<a name="l01692"></a>01692             r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a39bc017579125d7a8a55c6f15ab8407f">OP_BACKREFN</a>);
<a name="l01693"></a>01693             <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01694"></a>01694             r = <a class="code" href="../../d0/d86/regcomp_8c.html#af40c81c2868345b45aac5211ba114965">add_mem_num</a>(reg, n);
<a name="l01695"></a>01695             <span class="keywordflow">break</span>;
<a name="l01696"></a>01696           }
<a name="l01697"></a>01697         }
<a name="l01698"></a>01698       }
<a name="l01699"></a>01699       <span class="keywordflow">else</span> {
<a name="l01700"></a>01700         <span class="keywordtype">int</span> i;
<a name="l01701"></a>01701         <span class="keywordtype">int</span>* p;
<a name="l01702"></a>01702 
<a name="l01703"></a>01703         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#ae42e344c5336b241948a7a47c99d6533">IS_IGNORECASE</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a>)) {
<a name="l01704"></a>01704           r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ab618b20a94bacf16ee983d035b87bdf4">OP_BACKREF_MULTI_IC</a>);
<a name="l01705"></a>01705         }
<a name="l01706"></a>01706         <span class="keywordflow">else</span> {
<a name="l01707"></a>01707           r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af1ec37c9660cb03e31c26c7f54e18481">OP_BACKREF_MULTI</a>);
<a name="l01708"></a>01708         }
<a name="l01709"></a>01709         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01710"></a>01710 
<a name="l01711"></a>01711 <span class="preprocessor">#ifdef USE_BACKREF_WITH_LEVEL</span>
<a name="l01712"></a>01712 <span class="preprocessor"></span>      add_bacref_mems:
<a name="l01713"></a>01713 <span class="preprocessor">#endif</span>
<a name="l01714"></a>01714 <span class="preprocessor"></span>        r = <a class="code" href="../../d0/d86/regcomp_8c.html#a852b4186cb93270cd7d71ebe658196c4">add_length</a>(reg, br-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#ae790ac554909ac2940d464ac98019912">back_num</a>);
<a name="l01715"></a>01715         <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01716"></a>01716         p = <a class="code" href="../../d1/dfc/regparse_8h.html#af7acd0d16d2a338ffba1881e85a610b1">BACKREFS_P</a>(br);
<a name="l01717"></a>01717         <span class="keywordflow">for</span> (i = br-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#ae790ac554909ac2940d464ac98019912">back_num</a> - 1; i &gt;= 0; i--) {
<a name="l01718"></a>01718           r = <a class="code" href="../../d0/d86/regcomp_8c.html#af40c81c2868345b45aac5211ba114965">add_mem_num</a>(reg, p[i]);
<a name="l01719"></a>01719           <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l01720"></a>01720         }
<a name="l01721"></a>01721       }
<a name="l01722"></a>01722     }
<a name="l01723"></a>01723     <span class="keywordflow">break</span>;
<a name="l01724"></a>01724 
<a name="l01725"></a>01725 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l01726"></a>01726 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a35167bbf195155481ee5cbcae152d0f9">NT_CALL</a>:
<a name="l01727"></a>01727     r = compile_call(<a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node), reg);
<a name="l01728"></a>01728     <span class="keywordflow">break</span>;
<a name="l01729"></a>01729 <span class="preprocessor">#endif</span>
<a name="l01730"></a>01730 <span class="preprocessor"></span>
<a name="l01731"></a>01731   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l01732"></a>01732     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a9b0ad06272088a15b1d93ca7dcb200df">compile_quantifier_node</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node), reg);
<a name="l01733"></a>01733     <span class="keywordflow">break</span>;
<a name="l01734"></a>01734 
<a name="l01735"></a>01735   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l01736"></a>01736     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a390b20c237a30175b994273094fb919c">compile_enclose_node</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node), reg);
<a name="l01737"></a>01737     <span class="keywordflow">break</span>;
<a name="l01738"></a>01738 
<a name="l01739"></a>01739   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l01740"></a>01740     r = <a class="code" href="../../d0/d86/regcomp_8c.html#acfa9bfac441484b482b74052332a8a62">compile_anchor_node</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node), reg);
<a name="l01741"></a>01741     <span class="keywordflow">break</span>;
<a name="l01742"></a>01742 
<a name="l01743"></a>01743   <span class="keywordflow">default</span>:
<a name="l01744"></a>01744 <span class="preprocessor">#ifdef ONIG_DEBUG</span>
<a name="l01745"></a>01745 <span class="preprocessor"></span>    fprintf(stderr, <span class="stringliteral">&quot;compile_tree: undefined node type %d\n&quot;</span>, <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node));
<a name="l01746"></a>01746 <span class="preprocessor">#endif</span>
<a name="l01747"></a>01747 <span class="preprocessor"></span>    <span class="keywordflow">break</span>;
<a name="l01748"></a>01748   }
<a name="l01749"></a>01749 
<a name="l01750"></a>01750   <span class="keywordflow">return</span> r;
<a name="l01751"></a>01751 }
<a name="l01752"></a>01752 
<a name="l01753"></a>01753 <span class="preprocessor">#ifdef USE_NAMED_GROUP</span>
<a name="l01754"></a>01754 <span class="preprocessor"></span>
<a name="l01755"></a>01755 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01756"></a>01756 noname_disable_map(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>** plink, <a class="code" href="../../d2/d8b/struct_group_num_remap.html">GroupNumRemap</a>* map, <span class="keywordtype">int</span>* counter)
<a name="l01757"></a>01757 {
<a name="l01758"></a>01758   <span class="keywordtype">int</span> r = 0;
<a name="l01759"></a>01759   <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node = *plink;
<a name="l01760"></a>01760 
<a name="l01761"></a>01761   <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node)) {
<a name="l01762"></a>01762   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l01763"></a>01763   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l01764"></a>01764     <span class="keywordflow">do</span> {
<a name="l01765"></a>01765       r = noname_disable_map(&amp;(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node)), map, counter);
<a name="l01766"></a>01766     } <span class="keywordflow">while</span> (r == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l01767"></a>01767     <span class="keywordflow">break</span>;
<a name="l01768"></a>01768 
<a name="l01769"></a>01769   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l01770"></a>01770     {
<a name="l01771"></a>01771       <a class="code" href="../../d0/d6e/struct___node.html">Node</a>** ptarget = &amp;(<a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node)-&gt;target);
<a name="l01772"></a>01772       <a class="code" href="../../d0/d6e/struct___node.html">Node</a>*  old = *ptarget;
<a name="l01773"></a>01773       r = noname_disable_map(ptarget, map, counter);
<a name="l01774"></a>01774       <span class="keywordflow">if</span> (*ptarget != old &amp;&amp; <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(*ptarget) == <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>) {
<a name="l01775"></a>01775         <a class="code" href="../../d6/dda/regparse_8c.html#ace588d68b5808852a8265c27b18e6ed2">onig_reduce_nested_quantifier</a>(node, *ptarget);
<a name="l01776"></a>01776       }
<a name="l01777"></a>01777     }
<a name="l01778"></a>01778     <span class="keywordflow">break</span>;
<a name="l01779"></a>01779 
<a name="l01780"></a>01780   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l01781"></a>01781     {
<a name="l01782"></a>01782       <a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* en = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node);
<a name="l01783"></a>01783       <span class="keywordflow">if</span> (en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ae554d8a44a852592c4b79ee3241645c7">type</a> == <a class="code" href="../../d1/dfc/regparse_8h.html#a32e44d8ddaca8fd4931a8c13677972ad">ENCLOSE_MEMORY</a>) {
<a name="l01784"></a>01784         <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a8d89bb4bc96ce279f0b25381be6883e3">IS_ENCLOSE_NAMED_GROUP</a>(en)) {
<a name="l01785"></a>01785           (*counter)++;
<a name="l01786"></a>01786           map[en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#adda9a1fd356c9b102c09a3c596583b81">regnum</a>].<a class="code" href="../../d2/d8b/struct_group_num_remap.html#ad6c1090a2569428bbbbc029a906bf3a4">new_val</a> = *counter;
<a name="l01787"></a>01787           en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#adda9a1fd356c9b102c09a3c596583b81">regnum</a> = *counter;
<a name="l01788"></a>01788           r = noname_disable_map(&amp;(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>), map, counter);
<a name="l01789"></a>01789         }
<a name="l01790"></a>01790         <span class="keywordflow">else</span> {
<a name="l01791"></a>01791           *plink = en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>;
<a name="l01792"></a>01792           en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a> = <a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>;
<a name="l01793"></a>01793           <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(node);
<a name="l01794"></a>01794           r = noname_disable_map(plink, map, counter);
<a name="l01795"></a>01795         }
<a name="l01796"></a>01796       }
<a name="l01797"></a>01797       <span class="keywordflow">else</span>
<a name="l01798"></a>01798         r = noname_disable_map(&amp;(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>), map, counter);
<a name="l01799"></a>01799     }
<a name="l01800"></a>01800     <span class="keywordflow">break</span>;
<a name="l01801"></a>01801 
<a name="l01802"></a>01802   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l01803"></a>01803     {
<a name="l01804"></a>01804       <a class="code" href="../../de/d50/struct_anchor_node.html">AnchorNode</a>* an = <a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node);
<a name="l01805"></a>01805       <span class="keywordflow">switch</span> (an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#a123b9c289808fe00650dbcff45fa2662">type</a>) {
<a name="l01806"></a>01806       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#aa0f9fc98186b637ecce6d72e12ee1eed">ANCHOR_PREC_READ</a>:
<a name="l01807"></a>01807       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a1c64ac74f61b2ffbf3b60f391ae65cbf">ANCHOR_PREC_READ_NOT</a>:
<a name="l01808"></a>01808       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a460ceecc3150bd7cd2437d41fbeb9ea8">ANCHOR_LOOK_BEHIND</a>:
<a name="l01809"></a>01809       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a8812f9a061dd987fe8426262589b52c4">ANCHOR_LOOK_BEHIND_NOT</a>:
<a name="l01810"></a>01810         r = noname_disable_map(&amp;(an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>), map, counter);
<a name="l01811"></a>01811         <span class="keywordflow">break</span>;
<a name="l01812"></a>01812       }
<a name="l01813"></a>01813     }
<a name="l01814"></a>01814     <span class="keywordflow">break</span>;
<a name="l01815"></a>01815 
<a name="l01816"></a>01816   <span class="keywordflow">default</span>:
<a name="l01817"></a>01817     <span class="keywordflow">break</span>;
<a name="l01818"></a>01818   }
<a name="l01819"></a>01819 
<a name="l01820"></a>01820   <span class="keywordflow">return</span> r;
<a name="l01821"></a>01821 }
<a name="l01822"></a>01822 
<a name="l01823"></a>01823 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01824"></a>01824 renumber_node_backref(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../d2/d8b/struct_group_num_remap.html">GroupNumRemap</a>* map)
<a name="l01825"></a>01825 {
<a name="l01826"></a>01826   <span class="keywordtype">int</span> i, pos, n, old_num;
<a name="l01827"></a>01827   <span class="keywordtype">int</span> *backs;
<a name="l01828"></a>01828   <a class="code" href="../../db/dbf/struct_b_ref_node.html">BRefNode</a>* bn = <a class="code" href="../../d1/dfc/regparse_8h.html#a38215823f6ab7e63e919eae3bfa79bfa">NBREF</a>(node);
<a name="l01829"></a>01829 
<a name="l01830"></a>01830   <span class="keywordflow">if</span> (! <a class="code" href="../../d1/dfc/regparse_8h.html#a184cdcbd0920d3c748da3455a516a6c7">IS_BACKREF_NAME_REF</a>(bn))
<a name="l01831"></a>01831     <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a93b590a07677c61a744ea251d8b631f5">ONIGERR_NUMBERED_BACKREF_OR_CALL_NOT_ALLOWED</a>;
<a name="l01832"></a>01832 
<a name="l01833"></a>01833   old_num = bn-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#ae790ac554909ac2940d464ac98019912">back_num</a>;
<a name="l01834"></a>01834   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(bn-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#aefe536fb8ea9cd74d39b55d68cf724c4">back_dynamic</a>))
<a name="l01835"></a>01835     backs = bn-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#a0948ce6a9a87eb9f537b46e19ab99809">back_static</a>;
<a name="l01836"></a>01836   <span class="keywordflow">else</span>
<a name="l01837"></a>01837     backs = bn-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#aefe536fb8ea9cd74d39b55d68cf724c4">back_dynamic</a>;
<a name="l01838"></a>01838 
<a name="l01839"></a>01839   <span class="keywordflow">for</span> (i = 0, pos = 0; i &lt; old_num; i++) {
<a name="l01840"></a>01840     n = map[backs[i]].<a class="code" href="../../d2/d8b/struct_group_num_remap.html#ad6c1090a2569428bbbbc029a906bf3a4">new_val</a>;
<a name="l01841"></a>01841     <span class="keywordflow">if</span> (n &gt; 0) {
<a name="l01842"></a>01842       backs[pos] = n;
<a name="l01843"></a>01843       pos++;
<a name="l01844"></a>01844     }
<a name="l01845"></a>01845   }
<a name="l01846"></a>01846 
<a name="l01847"></a>01847   bn-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#ae790ac554909ac2940d464ac98019912">back_num</a> = pos;
<a name="l01848"></a>01848   <span class="keywordflow">return</span> 0;
<a name="l01849"></a>01849 }
<a name="l01850"></a>01850 
<a name="l01851"></a>01851 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01852"></a>01852 renumber_by_map(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../d2/d8b/struct_group_num_remap.html">GroupNumRemap</a>* map)
<a name="l01853"></a>01853 {
<a name="l01854"></a>01854   <span class="keywordtype">int</span> r = 0;
<a name="l01855"></a>01855 
<a name="l01856"></a>01856   <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node)) {
<a name="l01857"></a>01857   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l01858"></a>01858   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l01859"></a>01859     <span class="keywordflow">do</span> {
<a name="l01860"></a>01860       r = renumber_by_map(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), map);
<a name="l01861"></a>01861     } <span class="keywordflow">while</span> (r == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l01862"></a>01862     <span class="keywordflow">break</span>;
<a name="l01863"></a>01863   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l01864"></a>01864     r = renumber_by_map(<a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node)-&gt;target, map);
<a name="l01865"></a>01865     <span class="keywordflow">break</span>;
<a name="l01866"></a>01866   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l01867"></a>01867     r = renumber_by_map(<a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)-&gt;target, map);
<a name="l01868"></a>01868     <span class="keywordflow">break</span>;
<a name="l01869"></a>01869 
<a name="l01870"></a>01870   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ac1d2a54cfe6dfa9104b4bfb8d06b8aeb">NT_BREF</a>:
<a name="l01871"></a>01871     r = renumber_node_backref(node, map);
<a name="l01872"></a>01872     <span class="keywordflow">break</span>;
<a name="l01873"></a>01873 
<a name="l01874"></a>01874   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l01875"></a>01875     {
<a name="l01876"></a>01876       <a class="code" href="../../de/d50/struct_anchor_node.html">AnchorNode</a>* an = <a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node);
<a name="l01877"></a>01877       <span class="keywordflow">switch</span> (an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#a123b9c289808fe00650dbcff45fa2662">type</a>) {
<a name="l01878"></a>01878       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#aa0f9fc98186b637ecce6d72e12ee1eed">ANCHOR_PREC_READ</a>:
<a name="l01879"></a>01879       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a1c64ac74f61b2ffbf3b60f391ae65cbf">ANCHOR_PREC_READ_NOT</a>:
<a name="l01880"></a>01880       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a460ceecc3150bd7cd2437d41fbeb9ea8">ANCHOR_LOOK_BEHIND</a>:
<a name="l01881"></a>01881       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a8812f9a061dd987fe8426262589b52c4">ANCHOR_LOOK_BEHIND_NOT</a>:
<a name="l01882"></a>01882         r = renumber_by_map(an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, map);
<a name="l01883"></a>01883         <span class="keywordflow">break</span>;
<a name="l01884"></a>01884       }
<a name="l01885"></a>01885     }
<a name="l01886"></a>01886     <span class="keywordflow">break</span>;
<a name="l01887"></a>01887 
<a name="l01888"></a>01888   <span class="keywordflow">default</span>:
<a name="l01889"></a>01889     <span class="keywordflow">break</span>;
<a name="l01890"></a>01890   }
<a name="l01891"></a>01891 
<a name="l01892"></a>01892   <span class="keywordflow">return</span> r;
<a name="l01893"></a>01893 }
<a name="l01894"></a>01894 
<a name="l01895"></a>01895 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01896"></a>01896 numbered_ref_check(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node)
<a name="l01897"></a>01897 {
<a name="l01898"></a>01898   <span class="keywordtype">int</span> r = 0;
<a name="l01899"></a>01899 
<a name="l01900"></a>01900   <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node)) {
<a name="l01901"></a>01901   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l01902"></a>01902   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l01903"></a>01903     <span class="keywordflow">do</span> {
<a name="l01904"></a>01904       r = numbered_ref_check(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node));
<a name="l01905"></a>01905     } <span class="keywordflow">while</span> (r == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l01906"></a>01906     <span class="keywordflow">break</span>;
<a name="l01907"></a>01907   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l01908"></a>01908     r = numbered_ref_check(<a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node)-&gt;target);
<a name="l01909"></a>01909     <span class="keywordflow">break</span>;
<a name="l01910"></a>01910   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l01911"></a>01911     r = numbered_ref_check(<a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)-&gt;target);
<a name="l01912"></a>01912     <span class="keywordflow">break</span>;
<a name="l01913"></a>01913 
<a name="l01914"></a>01914   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ac1d2a54cfe6dfa9104b4bfb8d06b8aeb">NT_BREF</a>:
<a name="l01915"></a>01915     <span class="keywordflow">if</span> (! <a class="code" href="../../d1/dfc/regparse_8h.html#a184cdcbd0920d3c748da3455a516a6c7">IS_BACKREF_NAME_REF</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#a38215823f6ab7e63e919eae3bfa79bfa">NBREF</a>(node)))
<a name="l01916"></a>01916       <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a93b590a07677c61a744ea251d8b631f5">ONIGERR_NUMBERED_BACKREF_OR_CALL_NOT_ALLOWED</a>;
<a name="l01917"></a>01917     <span class="keywordflow">break</span>;
<a name="l01918"></a>01918 
<a name="l01919"></a>01919   <span class="keywordflow">default</span>:
<a name="l01920"></a>01920     <span class="keywordflow">break</span>;
<a name="l01921"></a>01921   }
<a name="l01922"></a>01922 
<a name="l01923"></a>01923   <span class="keywordflow">return</span> r;
<a name="l01924"></a>01924 }
<a name="l01925"></a>01925 
<a name="l01926"></a>01926 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01927"></a>01927 disable_noname_group_capture(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>** root, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <a class="code" href="../../d6/dbe/struct_scan_env.html">ScanEnv</a>* env)
<a name="l01928"></a>01928 {
<a name="l01929"></a>01929   <span class="keywordtype">int</span> r, i, pos, counter;
<a name="l01930"></a>01930   <a class="code" href="../../d6/d87/regint_8h.html#a8d82b7e6852911c76797b50cd40cfbed">BitStatusType</a> loc;
<a name="l01931"></a>01931   <a class="code" href="../../d2/d8b/struct_group_num_remap.html">GroupNumRemap</a>* map;
<a name="l01932"></a>01932 
<a name="l01933"></a>01933   map = (<a class="code" href="../../d2/d8b/struct_group_num_remap.html">GroupNumRemap</a>* )<a class="code" href="../../d6/d87/regint_8h.html#ac8cedf9b6f72f9370c682422afb4b3ec">xalloca</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../d2/d8b/struct_group_num_remap.html">GroupNumRemap</a>) * (env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a5f71c0a538e047bc63962df55ff304b0">num_mem</a> + 1));
<a name="l01934"></a>01934   <a class="code" href="../../d6/d87/regint_8h.html#a17ebb2a12300dcf6d79916e357fae45a">CHECK_NULL_RETURN_MEMERR</a>(map);
<a name="l01935"></a>01935   <span class="keywordflow">for</span> (i = 1; i &lt;= env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a5f71c0a538e047bc63962df55ff304b0">num_mem</a>; i++) {
<a name="l01936"></a>01936     map[i].<a class="code" href="../../d2/d8b/struct_group_num_remap.html#ad6c1090a2569428bbbbc029a906bf3a4">new_val</a> = 0;
<a name="l01937"></a>01937   }
<a name="l01938"></a>01938   counter = 0;
<a name="l01939"></a>01939   r = noname_disable_map(root, map, &amp;counter);
<a name="l01940"></a>01940   <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">return</span> r;
<a name="l01941"></a>01941 
<a name="l01942"></a>01942   r = renumber_by_map(*root, map);
<a name="l01943"></a>01943   <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">return</span> r;
<a name="l01944"></a>01944 
<a name="l01945"></a>01945   <span class="keywordflow">for</span> (i = 1, pos = 1; i &lt;= env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a5f71c0a538e047bc63962df55ff304b0">num_mem</a>; i++) {
<a name="l01946"></a>01946     <span class="keywordflow">if</span> (map[i].new_val &gt; 0) {
<a name="l01947"></a>01947       <a class="code" href="../../d1/dfc/regparse_8h.html#a82066fdd1d2abdcc23ae01f55bfbe321">SCANENV_MEM_NODES</a>(env)[pos] = <a class="code" href="../../d1/dfc/regparse_8h.html#a82066fdd1d2abdcc23ae01f55bfbe321">SCANENV_MEM_NODES</a>(env)[i];
<a name="l01948"></a>01948       pos++;
<a name="l01949"></a>01949     }
<a name="l01950"></a>01950   }
<a name="l01951"></a>01951 
<a name="l01952"></a>01952   loc = env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#aa096c240d283344fe4dd0626ac52e9ba">capture_history</a>;
<a name="l01953"></a>01953   <a class="code" href="../../d6/d87/regint_8h.html#ad11894263900a119660d7d44b289aab1">BIT_STATUS_CLEAR</a>(env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#aa096c240d283344fe4dd0626ac52e9ba">capture_history</a>);
<a name="l01954"></a>01954   <span class="keywordflow">for</span> (i = 1; i &lt;= <a class="code" href="../../d8/db3/oniguruma_8h.html#a8a5070fca54ba5fe3b011b9bf011cc59">ONIG_MAX_CAPTURE_HISTORY_GROUP</a>; i++) {
<a name="l01955"></a>01955     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#af199b44779566d1c0d04e5eedff8ce2b">BIT_STATUS_AT</a>(loc, i)) {
<a name="l01956"></a>01956       <a class="code" href="../../d6/d87/regint_8h.html#aed4001fbb4000757ab2f5a08d48d3fe9">BIT_STATUS_ON_AT_SIMPLE</a>(env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#aa096c240d283344fe4dd0626ac52e9ba">capture_history</a>, map[i].<a class="code" href="../../d2/d8b/struct_group_num_remap.html#ad6c1090a2569428bbbbc029a906bf3a4">new_val</a>);
<a name="l01957"></a>01957     }
<a name="l01958"></a>01958   }
<a name="l01959"></a>01959 
<a name="l01960"></a>01960   env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a5f71c0a538e047bc63962df55ff304b0">num_mem</a> = env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a6631d9427686a047869c75049f0d6c02">num_named</a>;
<a name="l01961"></a>01961   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#aaeb8694dde3a66fd839603fede774ca5">num_mem</a> = env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a6631d9427686a047869c75049f0d6c02">num_named</a>;
<a name="l01962"></a>01962 
<a name="l01963"></a>01963   <span class="keywordflow">return</span> <a class="code" href="../../d6/dda/regparse_8c.html#af1403b57925202f97bb10bd8c7c2d1ae">onig_renumber_name_table</a>(reg, map);
<a name="l01964"></a>01964 }
<a name="l01965"></a>01965 <span class="preprocessor">#endif </span><span class="comment">/* USE_NAMED_GROUP */</span>
<a name="l01966"></a>01966 
<a name="l01967"></a>01967 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l01968"></a>01968 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01969"></a>01969 unset_addr_list_fix(<a class="code" href="../../da/dd0/struct_unset_addr_list.html">UnsetAddrList</a>* uslist, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l01970"></a>01970 {
<a name="l01971"></a>01971   <span class="keywordtype">int</span> i, offset;
<a name="l01972"></a>01972   <a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* en;
<a name="l01973"></a>01973   <a class="code" href="../../d6/d87/regint_8h.html#a00ea65c75399f966f4362de003203ed5">AbsAddrType</a> addr;
<a name="l01974"></a>01974 
<a name="l01975"></a>01975   <span class="keywordflow">for</span> (i = 0; i &lt; uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a88a3440ee7dd19c9731fb34f12d02ae6">num</a>; i++) {
<a name="l01976"></a>01976     en = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a880912efb00473079965fc3d01d9ad5d">us</a>[i].<a class="code" href="../../d2/d2e/struct_unset_addr.html#a32320cbc7046ab89e117792b7b699c9e">target</a>);
<a name="l01977"></a>01977     <span class="keywordflow">if</span> (! <a class="code" href="../../d1/dfc/regparse_8h.html#a3807147603c44dc584ac196b5c9230ba">IS_ENCLOSE_ADDR_FIXED</a>(en)) <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a4067ac325df2d4bb0b4d2e692c257a49">ONIGERR_PARSER_BUG</a>;
<a name="l01978"></a>01978     addr = en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#abf88c08e3eef023439b2435cfb05ec8a">call_addr</a>;
<a name="l01979"></a>01979     offset = uslist-&gt;<a class="code" href="../../da/dd0/struct_unset_addr_list.html#a880912efb00473079965fc3d01d9ad5d">us</a>[i].<a class="code" href="../../d2/d2e/struct_unset_addr.html#ae3bbc7c4f69836bce28684fff5050ead">offset</a>;
<a name="l01980"></a>01980 
<a name="l01981"></a>01981     <a class="code" href="../../d6/d87/regint_8h.html#afb3dfdf157db19cd2d6399b77acd6954">BBUF_WRITE</a>(reg, offset, &amp;addr, <a class="code" href="../../d6/d87/regint_8h.html#adb98b5217b9bd3c7fef7f999a1a918b1">SIZE_ABSADDR</a>);
<a name="l01982"></a>01982   }
<a name="l01983"></a>01983   <span class="keywordflow">return</span> 0;
<a name="l01984"></a>01984 }
<a name="l01985"></a>01985 <span class="preprocessor">#endif</span>
<a name="l01986"></a>01986 <span class="preprocessor"></span>
<a name="l01987"></a>01987 <span class="preprocessor">#ifdef USE_MONOMANIAC_CHECK_CAPTURES_IN_ENDLESS_REPEAT</span>
<a name="l01988"></a>01988 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l01989"></a>01989 quantifiers_memory_node_info(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node)
<a name="l01990"></a>01990 {
<a name="l01991"></a>01991   <span class="keywordtype">int</span> r = 0;
<a name="l01992"></a>01992 
<a name="l01993"></a>01993   <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node)) {
<a name="l01994"></a>01994   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l01995"></a>01995   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l01996"></a>01996     {
<a name="l01997"></a>01997       <span class="keywordtype">int</span> v;
<a name="l01998"></a>01998       <span class="keywordflow">do</span> {
<a name="l01999"></a>01999         v = quantifiers_memory_node_info(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node));
<a name="l02000"></a>02000         <span class="keywordflow">if</span> (v &gt; r) r = v;
<a name="l02001"></a>02001       } <span class="keywordflow">while</span> (v &gt;= 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l02002"></a>02002     }
<a name="l02003"></a>02003     <span class="keywordflow">break</span>;
<a name="l02004"></a>02004 
<a name="l02005"></a>02005 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l02006"></a>02006 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a35167bbf195155481ee5cbcae152d0f9">NT_CALL</a>:
<a name="l02007"></a>02007     <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a250cd70778b5de06453ffa5e16c17daf">IS_CALL_RECURSION</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node))) {
<a name="l02008"></a>02008       <span class="keywordflow">return</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aa897e83257181d0f4332a06d86c32ea3">NQ_TARGET_IS_EMPTY_REC</a>; <span class="comment">/* tiny version */</span>
<a name="l02009"></a>02009     }
<a name="l02010"></a>02010     <span class="keywordflow">else</span>
<a name="l02011"></a>02011       r = quantifiers_memory_node_info(<a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node)-&gt;target);
<a name="l02012"></a>02012     <span class="keywordflow">break</span>;
<a name="l02013"></a>02013 <span class="preprocessor">#endif</span>
<a name="l02014"></a>02014 <span class="preprocessor"></span>
<a name="l02015"></a>02015   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l02016"></a>02016     {
<a name="l02017"></a>02017       <a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* qn = <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node);
<a name="l02018"></a>02018       <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> != 0) {
<a name="l02019"></a>02019         r = quantifiers_memory_node_info(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>);
<a name="l02020"></a>02020       }
<a name="l02021"></a>02021     }
<a name="l02022"></a>02022     <span class="keywordflow">break</span>;
<a name="l02023"></a>02023 
<a name="l02024"></a>02024   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l02025"></a>02025     {
<a name="l02026"></a>02026       <a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* en = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node);
<a name="l02027"></a>02027       <span class="keywordflow">switch</span> (en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ae554d8a44a852592c4b79ee3241645c7">type</a>) {
<a name="l02028"></a>02028       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a32e44d8ddaca8fd4931a8c13677972ad">ENCLOSE_MEMORY</a>:
<a name="l02029"></a>02029         <span class="keywordflow">return</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a5d2f216800450cd46951bebb6b400e4e">NQ_TARGET_IS_EMPTY_MEM</a>;
<a name="l02030"></a>02030         <span class="keywordflow">break</span>;
<a name="l02031"></a>02031 
<a name="l02032"></a>02032       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a1f27f4cccd30502c03174673fe25af41">ENCLOSE_OPTION</a>:
<a name="l02033"></a>02033       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a8a9f973f8fdb597a604757521ae63fe2">ENCLOSE_STOP_BACKTRACK</a>:
<a name="l02034"></a>02034         r = quantifiers_memory_node_info(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>);
<a name="l02035"></a>02035         <span class="keywordflow">break</span>;
<a name="l02036"></a>02036       <span class="keywordflow">default</span>:
<a name="l02037"></a>02037         <span class="keywordflow">break</span>;
<a name="l02038"></a>02038       }
<a name="l02039"></a>02039     }
<a name="l02040"></a>02040     <span class="keywordflow">break</span>;
<a name="l02041"></a>02041 
<a name="l02042"></a>02042   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ac1d2a54cfe6dfa9104b4bfb8d06b8aeb">NT_BREF</a>:
<a name="l02043"></a>02043   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>:
<a name="l02044"></a>02044   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a542a2658d0f164eea8bc384ab01549d4">NT_CTYPE</a>:
<a name="l02045"></a>02045   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a98cbe6da0636f892e4de517d350a2938">NT_CCLASS</a>:
<a name="l02046"></a>02046   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a21a7fcbf4a9c872540490d92b9c29813">NT_CANY</a>:
<a name="l02047"></a>02047   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l02048"></a>02048   <span class="keywordflow">default</span>:
<a name="l02049"></a>02049     <span class="keywordflow">break</span>;
<a name="l02050"></a>02050   }
<a name="l02051"></a>02051 
<a name="l02052"></a>02052   <span class="keywordflow">return</span> r;
<a name="l02053"></a>02053 }
<a name="l02054"></a>02054 <span class="preprocessor">#endif </span><span class="comment">/* USE_MONOMANIAC_CHECK_CAPTURES_IN_ENDLESS_REPEAT */</span>
<a name="l02055"></a>02055 
<a name="l02056"></a>02056 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02057"></a><a class="code" href="../../d0/d86/regcomp_8c.html#af82e9debd7e89c1c386efbfd438ac112">02057</a> <a class="code" href="../../d0/d86/regcomp_8c.html#af82e9debd7e89c1c386efbfd438ac112">get_min_match_length</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> *<a class="code" href="../../d1/d6f/date__strftime_8c.html#a2f2bf96d77a187bd4446b4ba3864470d">min</a>, <a class="code" href="../../d6/dbe/struct_scan_env.html">ScanEnv</a>* env)
<a name="l02058"></a>02058 {
<a name="l02059"></a>02059   <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> tmin;
<a name="l02060"></a>02060   <span class="keywordtype">int</span> r = 0;
<a name="l02061"></a>02061 
<a name="l02062"></a>02062   *min = 0;
<a name="l02063"></a>02063   <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node)) {
<a name="l02064"></a>02064   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ac1d2a54cfe6dfa9104b4bfb8d06b8aeb">NT_BREF</a>:
<a name="l02065"></a>02065     {
<a name="l02066"></a>02066       <span class="keywordtype">int</span> i;
<a name="l02067"></a>02067       <span class="keywordtype">int</span>* backs;
<a name="l02068"></a>02068       <a class="code" href="../../d0/d6e/struct___node.html">Node</a>** nodes = <a class="code" href="../../d1/dfc/regparse_8h.html#a82066fdd1d2abdcc23ae01f55bfbe321">SCANENV_MEM_NODES</a>(env);
<a name="l02069"></a>02069       <a class="code" href="../../db/dbf/struct_b_ref_node.html">BRefNode</a>* br = <a class="code" href="../../d1/dfc/regparse_8h.html#a38215823f6ab7e63e919eae3bfa79bfa">NBREF</a>(node);
<a name="l02070"></a>02070       <span class="keywordflow">if</span> (br-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#acc3cdd098999c2c649045d2640e8d101">state</a> &amp; <a class="code" href="../../d1/dfc/regparse_8h.html#a04144a8cc6b823fcae3b99f5cd5ab42c">NST_RECURSION</a>) <span class="keywordflow">break</span>;
<a name="l02071"></a>02071 
<a name="l02072"></a>02072       backs = <a class="code" href="../../d1/dfc/regparse_8h.html#af7acd0d16d2a338ffba1881e85a610b1">BACKREFS_P</a>(br);
<a name="l02073"></a>02073       <span class="keywordflow">if</span> (backs[0] &gt; env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a5f71c0a538e047bc63962df55ff304b0">num_mem</a>)  <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#adbf6f094cfd29f00edfcf0484dcbe7fa">ONIGERR_INVALID_BACKREF</a>;
<a name="l02074"></a>02074       r = <a class="code" href="../../d0/d86/regcomp_8c.html#af82e9debd7e89c1c386efbfd438ac112">get_min_match_length</a>(nodes[backs[0]], min, env);
<a name="l02075"></a>02075       <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">break</span>;
<a name="l02076"></a>02076       <span class="keywordflow">for</span> (i = 1; i &lt; br-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#ae790ac554909ac2940d464ac98019912">back_num</a>; i++) {
<a name="l02077"></a>02077         <span class="keywordflow">if</span> (backs[i] &gt; env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a5f71c0a538e047bc63962df55ff304b0">num_mem</a>)  <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#adbf6f094cfd29f00edfcf0484dcbe7fa">ONIGERR_INVALID_BACKREF</a>;
<a name="l02078"></a>02078         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af82e9debd7e89c1c386efbfd438ac112">get_min_match_length</a>(nodes[backs[i]], &amp;tmin, env);
<a name="l02079"></a>02079         <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">break</span>;
<a name="l02080"></a>02080         <span class="keywordflow">if</span> (*min &gt; tmin) *min = tmin;
<a name="l02081"></a>02081       }
<a name="l02082"></a>02082     }
<a name="l02083"></a>02083     <span class="keywordflow">break</span>;
<a name="l02084"></a>02084 
<a name="l02085"></a>02085 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l02086"></a>02086 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a35167bbf195155481ee5cbcae152d0f9">NT_CALL</a>:
<a name="l02087"></a>02087     <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a250cd70778b5de06453ffa5e16c17daf">IS_CALL_RECURSION</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node))) {
<a name="l02088"></a>02088       <a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* en = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node)-&gt;target);
<a name="l02089"></a>02089       <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a80b7e1e1d9df6c27f0e11f9b0fb043f6">IS_ENCLOSE_MIN_FIXED</a>(en))
<a name="l02090"></a>02090         *min = en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#a5cf2d042c7cd3c740a9ae8d67c7e328f">min_len</a>;
<a name="l02091"></a>02091     }
<a name="l02092"></a>02092     <span class="keywordflow">else</span>
<a name="l02093"></a>02093       r = <a class="code" href="../../d0/d86/regcomp_8c.html#af82e9debd7e89c1c386efbfd438ac112">get_min_match_length</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node)-&gt;target, min, env);
<a name="l02094"></a>02094     <span class="keywordflow">break</span>;
<a name="l02095"></a>02095 <span class="preprocessor">#endif</span>
<a name="l02096"></a>02096 <span class="preprocessor"></span>
<a name="l02097"></a>02097   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l02098"></a>02098     <span class="keywordflow">do</span> {
<a name="l02099"></a>02099       r = <a class="code" href="../../d0/d86/regcomp_8c.html#af82e9debd7e89c1c386efbfd438ac112">get_min_match_length</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), &amp;tmin, env);
<a name="l02100"></a>02100       <span class="keywordflow">if</span> (r == 0) *min += tmin;
<a name="l02101"></a>02101     } <span class="keywordflow">while</span> (r == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l02102"></a>02102     <span class="keywordflow">break</span>;
<a name="l02103"></a>02103 
<a name="l02104"></a>02104   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l02105"></a>02105     {
<a name="l02106"></a>02106       <a class="code" href="../../d0/d6e/struct___node.html">Node</a> *x, *y;
<a name="l02107"></a>02107       y = node;
<a name="l02108"></a>02108       <span class="keywordflow">do</span> {
<a name="l02109"></a>02109         x = <a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(y);
<a name="l02110"></a>02110         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af82e9debd7e89c1c386efbfd438ac112">get_min_match_length</a>(x, &amp;tmin, env);
<a name="l02111"></a>02111         <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">break</span>;
<a name="l02112"></a>02112         <span class="keywordflow">if</span> (y == node) *min = tmin;
<a name="l02113"></a>02113         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*min &gt; tmin) *min = tmin;
<a name="l02114"></a>02114       } <span class="keywordflow">while</span> (r == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(y = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(y)));
<a name="l02115"></a>02115     }
<a name="l02116"></a>02116     <span class="keywordflow">break</span>;
<a name="l02117"></a>02117 
<a name="l02118"></a>02118   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>:
<a name="l02119"></a>02119     {
<a name="l02120"></a>02120       <a class="code" href="../../d2/db7/struct_str_node.html">StrNode</a>* sn = <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(node);
<a name="l02121"></a>02121       *min = sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a> - sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>;
<a name="l02122"></a>02122     }
<a name="l02123"></a>02123     <span class="keywordflow">break</span>;
<a name="l02124"></a>02124 
<a name="l02125"></a>02125   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a542a2658d0f164eea8bc384ab01549d4">NT_CTYPE</a>:
<a name="l02126"></a>02126     *min = 1;
<a name="l02127"></a>02127     <span class="keywordflow">break</span>;
<a name="l02128"></a>02128 
<a name="l02129"></a>02129   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a98cbe6da0636f892e4de517d350a2938">NT_CCLASS</a>:
<a name="l02130"></a>02130   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a21a7fcbf4a9c872540490d92b9c29813">NT_CANY</a>:
<a name="l02131"></a>02131     *min = 1;
<a name="l02132"></a>02132     <span class="keywordflow">break</span>;
<a name="l02133"></a>02133 
<a name="l02134"></a>02134   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l02135"></a>02135     {
<a name="l02136"></a>02136       <a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* qn = <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node);
<a name="l02137"></a>02137 
<a name="l02138"></a>02138       <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> &gt; 0) {
<a name="l02139"></a>02139         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af82e9debd7e89c1c386efbfd438ac112">get_min_match_length</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, min, env);
<a name="l02140"></a>02140         <span class="keywordflow">if</span> (r == 0)
<a name="l02141"></a>02141           *min = <a class="code" href="../../d0/d86/regcomp_8c.html#af4fd37fcaa0c31385e41ce128c9ed00c">distance_multiply</a>(*min, qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>);
<a name="l02142"></a>02142       }
<a name="l02143"></a>02143     }
<a name="l02144"></a>02144     <span class="keywordflow">break</span>;
<a name="l02145"></a>02145 
<a name="l02146"></a>02146   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l02147"></a>02147     {
<a name="l02148"></a>02148       <a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* en = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node);
<a name="l02149"></a>02149       <span class="keywordflow">switch</span> (en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ae554d8a44a852592c4b79ee3241645c7">type</a>) {
<a name="l02150"></a>02150       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a32e44d8ddaca8fd4931a8c13677972ad">ENCLOSE_MEMORY</a>:
<a name="l02151"></a>02151 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l02152"></a>02152 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a80b7e1e1d9df6c27f0e11f9b0fb043f6">IS_ENCLOSE_MIN_FIXED</a>(en))
<a name="l02153"></a>02153           *min = en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#a5cf2d042c7cd3c740a9ae8d67c7e328f">min_len</a>;
<a name="l02154"></a>02154         <span class="keywordflow">else</span> {
<a name="l02155"></a>02155           r = <a class="code" href="../../d0/d86/regcomp_8c.html#af82e9debd7e89c1c386efbfd438ac112">get_min_match_length</a>(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, min, env);
<a name="l02156"></a>02156           <span class="keywordflow">if</span> (r == 0) {
<a name="l02157"></a>02157             en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#a5cf2d042c7cd3c740a9ae8d67c7e328f">min_len</a> = *min;
<a name="l02158"></a>02158             <a class="code" href="../../d1/dfc/regparse_8h.html#a709b6af5e5f6789e8a1ae2406f12a668">SET_ENCLOSE_STATUS</a>(node, <a class="code" href="../../d1/dfc/regparse_8h.html#a8980d8b4b93cf55da8bee382f4bab34b">NST_MIN_FIXED</a>);
<a name="l02159"></a>02159           }
<a name="l02160"></a>02160         }
<a name="l02161"></a>02161         <span class="keywordflow">break</span>;
<a name="l02162"></a>02162 <span class="preprocessor">#endif</span>
<a name="l02163"></a>02163 <span class="preprocessor"></span>      <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a1f27f4cccd30502c03174673fe25af41">ENCLOSE_OPTION</a>:
<a name="l02164"></a>02164       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a8a9f973f8fdb597a604757521ae63fe2">ENCLOSE_STOP_BACKTRACK</a>:
<a name="l02165"></a>02165         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af82e9debd7e89c1c386efbfd438ac112">get_min_match_length</a>(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, min, env);
<a name="l02166"></a>02166         <span class="keywordflow">break</span>;
<a name="l02167"></a>02167       }
<a name="l02168"></a>02168     }
<a name="l02169"></a>02169     <span class="keywordflow">break</span>;
<a name="l02170"></a>02170 
<a name="l02171"></a>02171   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l02172"></a>02172   <span class="keywordflow">default</span>:
<a name="l02173"></a>02173     <span class="keywordflow">break</span>;
<a name="l02174"></a>02174   }
<a name="l02175"></a>02175 
<a name="l02176"></a>02176   <span class="keywordflow">return</span> r;
<a name="l02177"></a>02177 }
<a name="l02178"></a>02178 
<a name="l02179"></a>02179 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02180"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a06bdc00e72ec725ddbca67672abc87a3">02180</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a06bdc00e72ec725ddbca67672abc87a3">get_max_match_length</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> *<a class="code" href="../../d1/d6f/date__strftime_8c.html#aa5d960354774dc177393b360c0f90aa9">max</a>, <a class="code" href="../../d6/dbe/struct_scan_env.html">ScanEnv</a>* env)
<a name="l02181"></a>02181 {
<a name="l02182"></a>02182   <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> tmax;
<a name="l02183"></a>02183   <span class="keywordtype">int</span> r = 0;
<a name="l02184"></a>02184 
<a name="l02185"></a>02185   *max = 0;
<a name="l02186"></a>02186   <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node)) {
<a name="l02187"></a>02187   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l02188"></a>02188     <span class="keywordflow">do</span> {
<a name="l02189"></a>02189       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a06bdc00e72ec725ddbca67672abc87a3">get_max_match_length</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), &amp;tmax, env);
<a name="l02190"></a>02190       <span class="keywordflow">if</span> (r == 0)
<a name="l02191"></a>02191         *max = <a class="code" href="../../d0/d86/regcomp_8c.html#ae04444d8024a1649eba62b8a6c008cc4">distance_add</a>(*max, tmax);
<a name="l02192"></a>02192     } <span class="keywordflow">while</span> (r == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l02193"></a>02193     <span class="keywordflow">break</span>;
<a name="l02194"></a>02194 
<a name="l02195"></a>02195   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l02196"></a>02196     <span class="keywordflow">do</span> {
<a name="l02197"></a>02197       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a06bdc00e72ec725ddbca67672abc87a3">get_max_match_length</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), &amp;tmax, env);
<a name="l02198"></a>02198       <span class="keywordflow">if</span> (r == 0 &amp;&amp; *max &lt; tmax) *max = tmax;
<a name="l02199"></a>02199     } <span class="keywordflow">while</span> (r == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l02200"></a>02200     <span class="keywordflow">break</span>;
<a name="l02201"></a>02201 
<a name="l02202"></a>02202   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>:
<a name="l02203"></a>02203     {
<a name="l02204"></a>02204       <a class="code" href="../../d2/db7/struct_str_node.html">StrNode</a>* sn = <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(node);
<a name="l02205"></a>02205       *max = sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a> - sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>;
<a name="l02206"></a>02206     }
<a name="l02207"></a>02207     <span class="keywordflow">break</span>;
<a name="l02208"></a>02208 
<a name="l02209"></a>02209   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a542a2658d0f164eea8bc384ab01549d4">NT_CTYPE</a>:
<a name="l02210"></a>02210     *max = <a class="code" href="../../d8/db3/oniguruma_8h.html#a1bf73c04a0be8c1855f1e13517dac9cc">ONIGENC_MBC_MAXLEN_DIST</a>(env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a97f766db4ac9dabc9d173bf99fbcc11b">enc</a>);
<a name="l02211"></a>02211     <span class="keywordflow">break</span>;
<a name="l02212"></a>02212 
<a name="l02213"></a>02213   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a98cbe6da0636f892e4de517d350a2938">NT_CCLASS</a>:
<a name="l02214"></a>02214   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a21a7fcbf4a9c872540490d92b9c29813">NT_CANY</a>:
<a name="l02215"></a>02215     *max = <a class="code" href="../../d8/db3/oniguruma_8h.html#a1bf73c04a0be8c1855f1e13517dac9cc">ONIGENC_MBC_MAXLEN_DIST</a>(env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a97f766db4ac9dabc9d173bf99fbcc11b">enc</a>);
<a name="l02216"></a>02216     <span class="keywordflow">break</span>;
<a name="l02217"></a>02217 
<a name="l02218"></a>02218   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ac1d2a54cfe6dfa9104b4bfb8d06b8aeb">NT_BREF</a>:
<a name="l02219"></a>02219     {
<a name="l02220"></a>02220       <span class="keywordtype">int</span> i;
<a name="l02221"></a>02221       <span class="keywordtype">int</span>* backs;
<a name="l02222"></a>02222       <a class="code" href="../../d0/d6e/struct___node.html">Node</a>** nodes = <a class="code" href="../../d1/dfc/regparse_8h.html#a82066fdd1d2abdcc23ae01f55bfbe321">SCANENV_MEM_NODES</a>(env);
<a name="l02223"></a>02223       <a class="code" href="../../db/dbf/struct_b_ref_node.html">BRefNode</a>* br = <a class="code" href="../../d1/dfc/regparse_8h.html#a38215823f6ab7e63e919eae3bfa79bfa">NBREF</a>(node);
<a name="l02224"></a>02224       <span class="keywordflow">if</span> (br-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#acc3cdd098999c2c649045d2640e8d101">state</a> &amp; <a class="code" href="../../d1/dfc/regparse_8h.html#a04144a8cc6b823fcae3b99f5cd5ab42c">NST_RECURSION</a>) {
<a name="l02225"></a>02225         *max = <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a>;
<a name="l02226"></a>02226         <span class="keywordflow">break</span>;
<a name="l02227"></a>02227       }
<a name="l02228"></a>02228       backs = <a class="code" href="../../d1/dfc/regparse_8h.html#af7acd0d16d2a338ffba1881e85a610b1">BACKREFS_P</a>(br);
<a name="l02229"></a>02229       <span class="keywordflow">for</span> (i = 0; i &lt; br-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#ae790ac554909ac2940d464ac98019912">back_num</a>; i++) {
<a name="l02230"></a>02230         <span class="keywordflow">if</span> (backs[i] &gt; env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a5f71c0a538e047bc63962df55ff304b0">num_mem</a>)  <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#adbf6f094cfd29f00edfcf0484dcbe7fa">ONIGERR_INVALID_BACKREF</a>;
<a name="l02231"></a>02231         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a06bdc00e72ec725ddbca67672abc87a3">get_max_match_length</a>(nodes[backs[i]], &amp;tmax, env);
<a name="l02232"></a>02232         <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">break</span>;
<a name="l02233"></a>02233         <span class="keywordflow">if</span> (*max &lt; tmax) *max = tmax;
<a name="l02234"></a>02234       }
<a name="l02235"></a>02235     }
<a name="l02236"></a>02236     <span class="keywordflow">break</span>;
<a name="l02237"></a>02237 
<a name="l02238"></a>02238 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l02239"></a>02239 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a35167bbf195155481ee5cbcae152d0f9">NT_CALL</a>:
<a name="l02240"></a>02240     <span class="keywordflow">if</span> (! <a class="code" href="../../d1/dfc/regparse_8h.html#a250cd70778b5de06453ffa5e16c17daf">IS_CALL_RECURSION</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node)))
<a name="l02241"></a>02241       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a06bdc00e72ec725ddbca67672abc87a3">get_max_match_length</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node)-&gt;target, max, env);
<a name="l02242"></a>02242     <span class="keywordflow">else</span>
<a name="l02243"></a>02243       *max = <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a>;
<a name="l02244"></a>02244     <span class="keywordflow">break</span>;
<a name="l02245"></a>02245 <span class="preprocessor">#endif</span>
<a name="l02246"></a>02246 <span class="preprocessor"></span>
<a name="l02247"></a>02247   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l02248"></a>02248     {
<a name="l02249"></a>02249       <a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* qn = <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node);
<a name="l02250"></a>02250 
<a name="l02251"></a>02251       <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> != 0) {
<a name="l02252"></a>02252         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a06bdc00e72ec725ddbca67672abc87a3">get_max_match_length</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, max, env);
<a name="l02253"></a>02253         <span class="keywordflow">if</span> (r == 0 &amp;&amp; *max != 0) {
<a name="l02254"></a>02254           <span class="keywordflow">if</span> (! <a class="code" href="../../d6/d87/regint_8h.html#a7b7f11d4b2705496b7711598403d4f72">IS_REPEAT_INFINITE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>))
<a name="l02255"></a>02255             *max = <a class="code" href="../../d0/d86/regcomp_8c.html#af4fd37fcaa0c31385e41ce128c9ed00c">distance_multiply</a>(*max, qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>);
<a name="l02256"></a>02256           <span class="keywordflow">else</span>
<a name="l02257"></a>02257             *max = <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a>;
<a name="l02258"></a>02258         }
<a name="l02259"></a>02259       }
<a name="l02260"></a>02260     }
<a name="l02261"></a>02261     <span class="keywordflow">break</span>;
<a name="l02262"></a>02262 
<a name="l02263"></a>02263   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l02264"></a>02264     {
<a name="l02265"></a>02265       <a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* en = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node);
<a name="l02266"></a>02266       <span class="keywordflow">switch</span> (en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ae554d8a44a852592c4b79ee3241645c7">type</a>) {
<a name="l02267"></a>02267       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a32e44d8ddaca8fd4931a8c13677972ad">ENCLOSE_MEMORY</a>:
<a name="l02268"></a>02268 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l02269"></a>02269 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a04d81dc57cf82bf1a5dbdd5e7a8030f4">IS_ENCLOSE_MAX_FIXED</a>(en))
<a name="l02270"></a>02270           *max = en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#acb7531c358e302688489cffb0918e98f">max_len</a>;
<a name="l02271"></a>02271         <span class="keywordflow">else</span> {
<a name="l02272"></a>02272           r = <a class="code" href="../../d0/d86/regcomp_8c.html#a06bdc00e72ec725ddbca67672abc87a3">get_max_match_length</a>(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, max, env);
<a name="l02273"></a>02273           <span class="keywordflow">if</span> (r == 0) {
<a name="l02274"></a>02274             en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#acb7531c358e302688489cffb0918e98f">max_len</a> = *max;
<a name="l02275"></a>02275             <a class="code" href="../../d1/dfc/regparse_8h.html#a709b6af5e5f6789e8a1ae2406f12a668">SET_ENCLOSE_STATUS</a>(node, <a class="code" href="../../d1/dfc/regparse_8h.html#a3b6e034b202e333e717437144c4ee4f4">NST_MAX_FIXED</a>);
<a name="l02276"></a>02276           }
<a name="l02277"></a>02277         }
<a name="l02278"></a>02278         <span class="keywordflow">break</span>;
<a name="l02279"></a>02279 <span class="preprocessor">#endif</span>
<a name="l02280"></a>02280 <span class="preprocessor"></span>      <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a1f27f4cccd30502c03174673fe25af41">ENCLOSE_OPTION</a>:
<a name="l02281"></a>02281       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a8a9f973f8fdb597a604757521ae63fe2">ENCLOSE_STOP_BACKTRACK</a>:
<a name="l02282"></a>02282         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a06bdc00e72ec725ddbca67672abc87a3">get_max_match_length</a>(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, max, env);
<a name="l02283"></a>02283         <span class="keywordflow">break</span>;
<a name="l02284"></a>02284       }
<a name="l02285"></a>02285     }
<a name="l02286"></a>02286     <span class="keywordflow">break</span>;
<a name="l02287"></a>02287 
<a name="l02288"></a>02288   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l02289"></a>02289   <span class="keywordflow">default</span>:
<a name="l02290"></a>02290     <span class="keywordflow">break</span>;
<a name="l02291"></a>02291   }
<a name="l02292"></a>02292 
<a name="l02293"></a>02293   <span class="keywordflow">return</span> r;
<a name="l02294"></a>02294 }
<a name="l02295"></a>02295 
<a name="l02296"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a89d5c2293ff7e0d16d3baa4d4aa2aa27">02296</a> <span class="preprocessor">#define GET_CHAR_LEN_VARLEN           -1</span>
<a name="l02297"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a371259239d91892d1cb0914248875090">02297</a> <span class="preprocessor"></span><span class="preprocessor">#define GET_CHAR_LEN_TOP_ALT_VARLEN   -2</span>
<a name="l02298"></a>02298 <span class="preprocessor"></span>
<a name="l02299"></a>02299 <span class="comment">/* fixed size pattern node only */</span>
<a name="l02300"></a>02300 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02301"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a1ff5e0313b7848df2d6d80e6ce4e7589">02301</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a1ff5e0313b7848df2d6d80e6ce4e7589">get_char_length_tree1</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keywordtype">int</span>* <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>, <span class="keywordtype">int</span> level)
<a name="l02302"></a>02302 {
<a name="l02303"></a>02303   <span class="keywordtype">int</span> tlen;
<a name="l02304"></a>02304   <span class="keywordtype">int</span> r = 0;
<a name="l02305"></a>02305 
<a name="l02306"></a>02306   level++;
<a name="l02307"></a>02307   *len = 0;
<a name="l02308"></a>02308   <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node)) {
<a name="l02309"></a>02309   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l02310"></a>02310     <span class="keywordflow">do</span> {
<a name="l02311"></a>02311       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1ff5e0313b7848df2d6d80e6ce4e7589">get_char_length_tree1</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), reg, &amp;tlen, level);
<a name="l02312"></a>02312       <span class="keywordflow">if</span> (r == 0)
<a name="l02313"></a>02313         *len = (int)<a class="code" href="../../d0/d86/regcomp_8c.html#ae04444d8024a1649eba62b8a6c008cc4">distance_add</a>(*len, tlen);
<a name="l02314"></a>02314     } <span class="keywordflow">while</span> (r == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l02315"></a>02315     <span class="keywordflow">break</span>;
<a name="l02316"></a>02316 
<a name="l02317"></a>02317   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l02318"></a>02318     {
<a name="l02319"></a>02319       <span class="keywordtype">int</span> tlen2;
<a name="l02320"></a>02320       <span class="keywordtype">int</span> varlen = 0;
<a name="l02321"></a>02321 
<a name="l02322"></a>02322       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1ff5e0313b7848df2d6d80e6ce4e7589">get_char_length_tree1</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), reg, &amp;tlen, level);
<a name="l02323"></a>02323       <span class="keywordflow">while</span> (r == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node))) {
<a name="l02324"></a>02324         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1ff5e0313b7848df2d6d80e6ce4e7589">get_char_length_tree1</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), reg, &amp;tlen2, level);
<a name="l02325"></a>02325         <span class="keywordflow">if</span> (r == 0) {
<a name="l02326"></a>02326           <span class="keywordflow">if</span> (tlen != tlen2)
<a name="l02327"></a>02327             varlen = 1;
<a name="l02328"></a>02328         }
<a name="l02329"></a>02329       }
<a name="l02330"></a>02330       <span class="keywordflow">if</span> (r == 0) {
<a name="l02331"></a>02331         <span class="keywordflow">if</span> (varlen != 0) {
<a name="l02332"></a>02332           <span class="keywordflow">if</span> (level == 1)
<a name="l02333"></a>02333             r = <a class="code" href="../../d0/d86/regcomp_8c.html#a371259239d91892d1cb0914248875090">GET_CHAR_LEN_TOP_ALT_VARLEN</a>;
<a name="l02334"></a>02334           <span class="keywordflow">else</span>
<a name="l02335"></a>02335             r = <a class="code" href="../../d0/d86/regcomp_8c.html#a89d5c2293ff7e0d16d3baa4d4aa2aa27">GET_CHAR_LEN_VARLEN</a>;
<a name="l02336"></a>02336         }
<a name="l02337"></a>02337         <span class="keywordflow">else</span>
<a name="l02338"></a>02338           *len = tlen;
<a name="l02339"></a>02339       }
<a name="l02340"></a>02340     }
<a name="l02341"></a>02341     <span class="keywordflow">break</span>;
<a name="l02342"></a>02342 
<a name="l02343"></a>02343   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>:
<a name="l02344"></a>02344     {
<a name="l02345"></a>02345       <a class="code" href="../../d2/db7/struct_str_node.html">StrNode</a>* sn = <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(node);
<a name="l02346"></a>02346       <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *s = sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>;
<a name="l02347"></a>02347       <span class="keywordflow">while</span> (s &lt; sn-&gt;<a class="code" href="../../d6/d14/structre__registers.html#a1a42f8a5bcd4ac744e00132e2b80f8f0">end</a>) {
<a name="l02348"></a>02348         s += <a class="code" href="../../d3/d09/ripper_8y.html#ae9f8530a4c9ec89ae8d62ce5b4410aad">enclen</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>, s, sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a>);
<a name="l02349"></a>02349         (*len)++;
<a name="l02350"></a>02350       }
<a name="l02351"></a>02351     }
<a name="l02352"></a>02352     <span class="keywordflow">break</span>;
<a name="l02353"></a>02353 
<a name="l02354"></a>02354   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l02355"></a>02355     {
<a name="l02356"></a>02356       <a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* qn = <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node);
<a name="l02357"></a>02357       <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> == qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>) {
<a name="l02358"></a>02358         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1ff5e0313b7848df2d6d80e6ce4e7589">get_char_length_tree1</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, reg, &amp;tlen, level);
<a name="l02359"></a>02359         <span class="keywordflow">if</span> (r == 0)
<a name="l02360"></a>02360           *len = (int)<a class="code" href="../../d0/d86/regcomp_8c.html#af4fd37fcaa0c31385e41ce128c9ed00c">distance_multiply</a>(tlen, qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>);
<a name="l02361"></a>02361       }
<a name="l02362"></a>02362       <span class="keywordflow">else</span>
<a name="l02363"></a>02363         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a89d5c2293ff7e0d16d3baa4d4aa2aa27">GET_CHAR_LEN_VARLEN</a>;
<a name="l02364"></a>02364     }
<a name="l02365"></a>02365     <span class="keywordflow">break</span>;
<a name="l02366"></a>02366 
<a name="l02367"></a>02367 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l02368"></a>02368 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a35167bbf195155481ee5cbcae152d0f9">NT_CALL</a>:
<a name="l02369"></a>02369     <span class="keywordflow">if</span> (! <a class="code" href="../../d1/dfc/regparse_8h.html#a250cd70778b5de06453ffa5e16c17daf">IS_CALL_RECURSION</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node)))
<a name="l02370"></a>02370       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1ff5e0313b7848df2d6d80e6ce4e7589">get_char_length_tree1</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node)-&gt;target, reg, len, level);
<a name="l02371"></a>02371     <span class="keywordflow">else</span>
<a name="l02372"></a>02372       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a89d5c2293ff7e0d16d3baa4d4aa2aa27">GET_CHAR_LEN_VARLEN</a>;
<a name="l02373"></a>02373     <span class="keywordflow">break</span>;
<a name="l02374"></a>02374 <span class="preprocessor">#endif</span>
<a name="l02375"></a>02375 <span class="preprocessor"></span>
<a name="l02376"></a>02376   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a542a2658d0f164eea8bc384ab01549d4">NT_CTYPE</a>:
<a name="l02377"></a>02377     *len = 1;
<a name="l02378"></a>02378     <span class="keywordflow">break</span>;
<a name="l02379"></a>02379 
<a name="l02380"></a>02380   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a98cbe6da0636f892e4de517d350a2938">NT_CCLASS</a>:
<a name="l02381"></a>02381   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a21a7fcbf4a9c872540490d92b9c29813">NT_CANY</a>:
<a name="l02382"></a>02382     *len = 1;
<a name="l02383"></a>02383     <span class="keywordflow">break</span>;
<a name="l02384"></a>02384 
<a name="l02385"></a>02385   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l02386"></a>02386     {
<a name="l02387"></a>02387       <a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* en = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node);
<a name="l02388"></a>02388       <span class="keywordflow">switch</span> (en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ae554d8a44a852592c4b79ee3241645c7">type</a>) {
<a name="l02389"></a>02389       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a32e44d8ddaca8fd4931a8c13677972ad">ENCLOSE_MEMORY</a>:
<a name="l02390"></a>02390 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l02391"></a>02391 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a3d05bf02d0982db8eca0845345a384a2">IS_ENCLOSE_CLEN_FIXED</a>(en))
<a name="l02392"></a>02392           *len = en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#a874b514e872612d4e7059f36e6452d5d">char_len</a>;
<a name="l02393"></a>02393         <span class="keywordflow">else</span> {
<a name="l02394"></a>02394           r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1ff5e0313b7848df2d6d80e6ce4e7589">get_char_length_tree1</a>(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, reg, len, level);
<a name="l02395"></a>02395           <span class="keywordflow">if</span> (r == 0) {
<a name="l02396"></a>02396             en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#a874b514e872612d4e7059f36e6452d5d">char_len</a> = *len;
<a name="l02397"></a>02397             <a class="code" href="../../d1/dfc/regparse_8h.html#a709b6af5e5f6789e8a1ae2406f12a668">SET_ENCLOSE_STATUS</a>(node, <a class="code" href="../../d1/dfc/regparse_8h.html#a5f98b351f6c8816374c0d53d5c49f987">NST_CLEN_FIXED</a>);
<a name="l02398"></a>02398           }
<a name="l02399"></a>02399         }
<a name="l02400"></a>02400         <span class="keywordflow">break</span>;
<a name="l02401"></a>02401 <span class="preprocessor">#endif</span>
<a name="l02402"></a>02402 <span class="preprocessor"></span>      <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a1f27f4cccd30502c03174673fe25af41">ENCLOSE_OPTION</a>:
<a name="l02403"></a>02403       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a8a9f973f8fdb597a604757521ae63fe2">ENCLOSE_STOP_BACKTRACK</a>:
<a name="l02404"></a>02404         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1ff5e0313b7848df2d6d80e6ce4e7589">get_char_length_tree1</a>(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, reg, len, level);
<a name="l02405"></a>02405         <span class="keywordflow">break</span>;
<a name="l02406"></a>02406       <span class="keywordflow">default</span>:
<a name="l02407"></a>02407         <span class="keywordflow">break</span>;
<a name="l02408"></a>02408       }
<a name="l02409"></a>02409     }
<a name="l02410"></a>02410     <span class="keywordflow">break</span>;
<a name="l02411"></a>02411 
<a name="l02412"></a>02412   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l02413"></a>02413     <span class="keywordflow">break</span>;
<a name="l02414"></a>02414 
<a name="l02415"></a>02415   <span class="keywordflow">default</span>:
<a name="l02416"></a>02416     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a89d5c2293ff7e0d16d3baa4d4aa2aa27">GET_CHAR_LEN_VARLEN</a>;
<a name="l02417"></a>02417     <span class="keywordflow">break</span>;
<a name="l02418"></a>02418   }
<a name="l02419"></a>02419 
<a name="l02420"></a>02420   <span class="keywordflow">return</span> r;
<a name="l02421"></a>02421 }
<a name="l02422"></a>02422 
<a name="l02423"></a>02423 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02424"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a2c933c9dbf2fa16cda90f1e04a6c901c">02424</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a2c933c9dbf2fa16cda90f1e04a6c901c">get_char_length_tree</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keywordtype">int</span>* <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>)
<a name="l02425"></a>02425 {
<a name="l02426"></a>02426   <span class="keywordflow">return</span> <a class="code" href="../../d0/d86/regcomp_8c.html#a1ff5e0313b7848df2d6d80e6ce4e7589">get_char_length_tree1</a>(node, reg, len, 0);
<a name="l02427"></a>02427 }
<a name="l02428"></a>02428 
<a name="l02429"></a>02429 <span class="comment">/* x is not included y ==&gt;  1 : 0 */</span>
<a name="l02430"></a>02430 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02431"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a4ede6a38087ec536817b0bdf83fa40ac">02431</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a4ede6a38087ec536817b0bdf83fa40ac">is_not_included</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* x, <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* y, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l02432"></a>02432 {
<a name="l02433"></a>02433   <span class="keywordtype">int</span> i;
<a name="l02434"></a>02434   <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l02435"></a>02435   <a class="code" href="../../d8/db3/oniguruma_8h.html#a7c8a84bc12127007886efbfcf53b6fb5">OnigCodePoint</a> code;
<a name="l02436"></a>02436   <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *p, c;
<a name="l02437"></a>02437   <span class="keywordtype">int</span> ytype;
<a name="l02438"></a>02438 
<a name="l02439"></a>02439  retry:
<a name="l02440"></a>02440   ytype = <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(y);
<a name="l02441"></a>02441   <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(x)) {
<a name="l02442"></a>02442   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a542a2658d0f164eea8bc384ab01549d4">NT_CTYPE</a>:
<a name="l02443"></a>02443     {
<a name="l02444"></a>02444       <span class="keywordflow">switch</span> (ytype) {
<a name="l02445"></a>02445       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a542a2658d0f164eea8bc384ab01549d4">NT_CTYPE</a>:
<a name="l02446"></a>02446         <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a55cfe9cd258d0bdf14d6e48115f7e70b">NCTYPE</a>(y)-&gt;ctype == <a class="code" href="../../d1/dfc/regparse_8h.html#a55cfe9cd258d0bdf14d6e48115f7e70b">NCTYPE</a>(x)-&gt;ctype &amp;&amp;
<a name="l02447"></a>02447             <a class="code" href="../../d1/dfc/regparse_8h.html#a55cfe9cd258d0bdf14d6e48115f7e70b">NCTYPE</a>(y)-&gt;not   != <a class="code" href="../../d1/dfc/regparse_8h.html#a55cfe9cd258d0bdf14d6e48115f7e70b">NCTYPE</a>(x)-&gt;not)
<a name="l02448"></a>02448           <span class="keywordflow">return</span> 1;
<a name="l02449"></a>02449         <span class="keywordflow">else</span>
<a name="l02450"></a>02450           <span class="keywordflow">return</span> 0;
<a name="l02451"></a>02451         <span class="keywordflow">break</span>;
<a name="l02452"></a>02452 
<a name="l02453"></a>02453       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a98cbe6da0636f892e4de517d350a2938">NT_CCLASS</a>:
<a name="l02454"></a>02454       swap:
<a name="l02455"></a>02455         {
<a name="l02456"></a>02456           <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* tmp;
<a name="l02457"></a>02457           tmp = x; x = y; y = tmp;
<a name="l02458"></a>02458           <span class="keywordflow">goto</span> retry;
<a name="l02459"></a>02459         }
<a name="l02460"></a>02460         <span class="keywordflow">break</span>;
<a name="l02461"></a>02461 
<a name="l02462"></a>02462       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>:
<a name="l02463"></a>02463         <span class="keywordflow">goto</span> swap;
<a name="l02464"></a>02464         <span class="keywordflow">break</span>;
<a name="l02465"></a>02465 
<a name="l02466"></a>02466       <span class="keywordflow">default</span>:
<a name="l02467"></a>02467         <span class="keywordflow">break</span>;
<a name="l02468"></a>02468       }
<a name="l02469"></a>02469     }
<a name="l02470"></a>02470     <span class="keywordflow">break</span>;
<a name="l02471"></a>02471 
<a name="l02472"></a>02472   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a98cbe6da0636f892e4de517d350a2938">NT_CCLASS</a>:
<a name="l02473"></a>02473     {
<a name="l02474"></a>02474       <a class="code" href="../../d8/d79/struct_c_class_node.html">CClassNode</a>* xc = <a class="code" href="../../d1/dfc/regparse_8h.html#a816a6d8f921892c2efef73eb7727d589">NCCLASS</a>(x);
<a name="l02475"></a>02475       <span class="keywordflow">switch</span> (ytype) {
<a name="l02476"></a>02476       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a542a2658d0f164eea8bc384ab01549d4">NT_CTYPE</a>:
<a name="l02477"></a>02477         <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a55cfe9cd258d0bdf14d6e48115f7e70b">NCTYPE</a>(y)-&gt;ctype) {
<a name="l02478"></a>02478         <span class="keywordflow">case</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a612fd1e82d5c1d87c6b73c15cee0ae98">ONIGENC_CTYPE_WORD</a>:
<a name="l02479"></a>02479           <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a55cfe9cd258d0bdf14d6e48115f7e70b">NCTYPE</a>(y)-&gt;not == 0) {
<a name="l02480"></a>02480             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(xc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a599db43b8eea536a4e4d08400fa445cb">mbuf</a>) &amp;&amp; !<a class="code" href="../../d6/d87/regint_8h.html#aa719ec00173511740495f30fc0878c9e">IS_NCCLASS_NOT</a>(xc)) {
<a name="l02481"></a>02481               <span class="keywordflow">for</span> (i = 0; i &lt; SINGLE_BYTE_SIZE; i++) {
<a name="l02482"></a>02482                 <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a43930f0cbfa176d3f727f1fc92027dac">BITSET_AT</a>(xc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a082458e56c928f78db90f08e242a9f3d">bs</a>, i)) {
<a name="l02483"></a>02483                   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#ac19cd6a0a4522316671da3b0fe76a9d2">IS_CODE_SB_WORD</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>, i)) <span class="keywordflow">return</span> 0;
<a name="l02484"></a>02484                 }
<a name="l02485"></a>02485               }
<a name="l02486"></a>02486               <span class="keywordflow">return</span> 1;
<a name="l02487"></a>02487             }
<a name="l02488"></a>02488             <span class="keywordflow">return</span> 0;
<a name="l02489"></a>02489           }
<a name="l02490"></a>02490           <span class="keywordflow">else</span> {
<a name="l02491"></a>02491             <span class="keywordflow">for</span> (i = 0; i &lt; SINGLE_BYTE_SIZE; i++) {
<a name="l02492"></a>02492               <span class="keywordflow">if</span> (! <a class="code" href="../../d6/d87/regint_8h.html#ac19cd6a0a4522316671da3b0fe76a9d2">IS_CODE_SB_WORD</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>, i)) {
<a name="l02493"></a>02493                 <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d87/regint_8h.html#aa719ec00173511740495f30fc0878c9e">IS_NCCLASS_NOT</a>(xc)) {
<a name="l02494"></a>02494                   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a43930f0cbfa176d3f727f1fc92027dac">BITSET_AT</a>(xc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a082458e56c928f78db90f08e242a9f3d">bs</a>, i))
<a name="l02495"></a>02495                     <span class="keywordflow">return</span> 0;
<a name="l02496"></a>02496                 }
<a name="l02497"></a>02497                 <span class="keywordflow">else</span> {
<a name="l02498"></a>02498                   <span class="keywordflow">if</span> (! <a class="code" href="../../d6/d87/regint_8h.html#a43930f0cbfa176d3f727f1fc92027dac">BITSET_AT</a>(xc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a082458e56c928f78db90f08e242a9f3d">bs</a>, i))
<a name="l02499"></a>02499                     <span class="keywordflow">return</span> 0;
<a name="l02500"></a>02500                 }
<a name="l02501"></a>02501               }
<a name="l02502"></a>02502             }
<a name="l02503"></a>02503             <span class="keywordflow">return</span> 1;
<a name="l02504"></a>02504           }
<a name="l02505"></a>02505           <span class="keywordflow">break</span>;
<a name="l02506"></a>02506 
<a name="l02507"></a>02507         <span class="keywordflow">default</span>:
<a name="l02508"></a>02508           <span class="keywordflow">break</span>;
<a name="l02509"></a>02509         }
<a name="l02510"></a>02510         <span class="keywordflow">break</span>;
<a name="l02511"></a>02511 
<a name="l02512"></a>02512       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a98cbe6da0636f892e4de517d350a2938">NT_CCLASS</a>:
<a name="l02513"></a>02513         {
<a name="l02514"></a>02514           <span class="keywordtype">int</span> v;
<a name="l02515"></a>02515           <a class="code" href="../../d8/d79/struct_c_class_node.html">CClassNode</a>* yc = <a class="code" href="../../d1/dfc/regparse_8h.html#a816a6d8f921892c2efef73eb7727d589">NCCLASS</a>(y);
<a name="l02516"></a>02516 
<a name="l02517"></a>02517           <span class="keywordflow">for</span> (i = 0; i &lt; SINGLE_BYTE_SIZE; i++) {
<a name="l02518"></a>02518             v = <a class="code" href="../../d6/d87/regint_8h.html#a43930f0cbfa176d3f727f1fc92027dac">BITSET_AT</a>(xc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a082458e56c928f78db90f08e242a9f3d">bs</a>, i);
<a name="l02519"></a>02519             <span class="keywordflow">if</span> ((v != 0 &amp;&amp; !<a class="code" href="../../d6/d87/regint_8h.html#aa719ec00173511740495f30fc0878c9e">IS_NCCLASS_NOT</a>(xc)) ||
<a name="l02520"></a>02520                 (v == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#aa719ec00173511740495f30fc0878c9e">IS_NCCLASS_NOT</a>(xc))) {
<a name="l02521"></a>02521               v = <a class="code" href="../../d6/d87/regint_8h.html#a43930f0cbfa176d3f727f1fc92027dac">BITSET_AT</a>(yc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a082458e56c928f78db90f08e242a9f3d">bs</a>, i);
<a name="l02522"></a>02522               <span class="keywordflow">if</span> ((v != 0 &amp;&amp; !<a class="code" href="../../d6/d87/regint_8h.html#aa719ec00173511740495f30fc0878c9e">IS_NCCLASS_NOT</a>(yc)) ||
<a name="l02523"></a>02523                   (v == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#aa719ec00173511740495f30fc0878c9e">IS_NCCLASS_NOT</a>(yc)))
<a name="l02524"></a>02524                 <span class="keywordflow">return</span> 0;
<a name="l02525"></a>02525             }
<a name="l02526"></a>02526           }
<a name="l02527"></a>02527           <span class="keywordflow">if</span> ((<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(xc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a599db43b8eea536a4e4d08400fa445cb">mbuf</a>) &amp;&amp; !<a class="code" href="../../d6/d87/regint_8h.html#aa719ec00173511740495f30fc0878c9e">IS_NCCLASS_NOT</a>(xc)) ||
<a name="l02528"></a>02528               (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(yc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a599db43b8eea536a4e4d08400fa445cb">mbuf</a>) &amp;&amp; !<a class="code" href="../../d6/d87/regint_8h.html#aa719ec00173511740495f30fc0878c9e">IS_NCCLASS_NOT</a>(yc)))
<a name="l02529"></a>02529             <span class="keywordflow">return</span> 1;
<a name="l02530"></a>02530           <span class="keywordflow">return</span> 0;
<a name="l02531"></a>02531         }
<a name="l02532"></a>02532         <span class="keywordflow">break</span>;
<a name="l02533"></a>02533 
<a name="l02534"></a>02534       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>:
<a name="l02535"></a>02535         <span class="keywordflow">goto</span> swap;
<a name="l02536"></a>02536         <span class="keywordflow">break</span>;
<a name="l02537"></a>02537 
<a name="l02538"></a>02538       <span class="keywordflow">default</span>:
<a name="l02539"></a>02539         <span class="keywordflow">break</span>;
<a name="l02540"></a>02540       }
<a name="l02541"></a>02541     }
<a name="l02542"></a>02542     <span class="keywordflow">break</span>;
<a name="l02543"></a>02543 
<a name="l02544"></a>02544   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>:
<a name="l02545"></a>02545     {
<a name="l02546"></a>02546       <a class="code" href="../../d2/db7/struct_str_node.html">StrNode</a>* xs = <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(x);
<a name="l02547"></a>02547       <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a85801a0f73a64733355230b366867b81">NSTRING_LEN</a>(x) == 0)
<a name="l02548"></a>02548         <span class="keywordflow">break</span>;
<a name="l02549"></a>02549 
<a name="l02550"></a>02550       c = *(xs-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>);
<a name="l02551"></a>02551       <span class="keywordflow">switch</span> (ytype) {
<a name="l02552"></a>02552       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a542a2658d0f164eea8bc384ab01549d4">NT_CTYPE</a>:
<a name="l02553"></a>02553         <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a55cfe9cd258d0bdf14d6e48115f7e70b">NCTYPE</a>(y)-&gt;ctype) {
<a name="l02554"></a>02554         <span class="keywordflow">case</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a612fd1e82d5c1d87c6b73c15cee0ae98">ONIGENC_CTYPE_WORD</a>:
<a name="l02555"></a>02555           <span class="keywordflow">if</span> (<a class="code" href="../../d8/db3/oniguruma_8h.html#af6e58f4a168bd6c3ab619042b8bdec1b">ONIGENC_IS_MBC_WORD</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>, xs-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>, xs-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a>))
<a name="l02556"></a>02556             <span class="keywordflow">return</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a55cfe9cd258d0bdf14d6e48115f7e70b">NCTYPE</a>(y)-&gt;not;
<a name="l02557"></a>02557           <span class="keywordflow">else</span>
<a name="l02558"></a>02558             <span class="keywordflow">return</span> !(<a class="code" href="../../d1/dfc/regparse_8h.html#a55cfe9cd258d0bdf14d6e48115f7e70b">NCTYPE</a>(y)-&gt;not);
<a name="l02559"></a>02559           <span class="keywordflow">break</span>;
<a name="l02560"></a>02560         <span class="keywordflow">default</span>:
<a name="l02561"></a>02561           <span class="keywordflow">break</span>;
<a name="l02562"></a>02562         }
<a name="l02563"></a>02563         <span class="keywordflow">break</span>;
<a name="l02564"></a>02564 
<a name="l02565"></a>02565       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a98cbe6da0636f892e4de517d350a2938">NT_CCLASS</a>:
<a name="l02566"></a>02566         {
<a name="l02567"></a>02567           <a class="code" href="../../d8/d79/struct_c_class_node.html">CClassNode</a>* cc = <a class="code" href="../../d1/dfc/regparse_8h.html#a816a6d8f921892c2efef73eb7727d589">NCCLASS</a>(y);
<a name="l02568"></a>02568 
<a name="l02569"></a>02569           code = <a class="code" href="../../d8/db3/oniguruma_8h.html#a375d2932370b8067cb9c73f17051ae89">ONIGENC_MBC_TO_CODE</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>, xs-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>,
<a name="l02570"></a>02570                                      xs-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a> + <a class="code" href="../../d8/db3/oniguruma_8h.html#a9b7b4b30cc33c93886aef6db226f8538">ONIGENC_MBC_MAXLEN</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>));
<a name="l02571"></a>02571           <span class="keywordflow">return</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#a7cf5f4a5bd94180443ca81ffa1e449b5">onig_is_code_in_cc</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>, code, cc) != 0 ? 0 : 1);
<a name="l02572"></a>02572         }
<a name="l02573"></a>02573         <span class="keywordflow">break</span>;
<a name="l02574"></a>02574 
<a name="l02575"></a>02575       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>:
<a name="l02576"></a>02576         {
<a name="l02577"></a>02577           <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *q;
<a name="l02578"></a>02578           <a class="code" href="../../d2/db7/struct_str_node.html">StrNode</a>* ys = <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(y);
<a name="l02579"></a>02579           len = <a class="code" href="../../d1/dfc/regparse_8h.html#a85801a0f73a64733355230b366867b81">NSTRING_LEN</a>(x);
<a name="l02580"></a>02580           <span class="keywordflow">if</span> (len &gt; <a class="code" href="../../d1/dfc/regparse_8h.html#a85801a0f73a64733355230b366867b81">NSTRING_LEN</a>(y)) len = <a class="code" href="../../d1/dfc/regparse_8h.html#a85801a0f73a64733355230b366867b81">NSTRING_LEN</a>(y);
<a name="l02581"></a>02581           <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a25596e8076dc2d32a0b4f386656f0feb">NSTRING_IS_AMBIG</a>(x) || <a class="code" href="../../d1/dfc/regparse_8h.html#a25596e8076dc2d32a0b4f386656f0feb">NSTRING_IS_AMBIG</a>(y)) {
<a name="l02582"></a>02582             <span class="comment">/* tiny version */</span>
<a name="l02583"></a>02583             <span class="keywordflow">return</span> 0;
<a name="l02584"></a>02584           }
<a name="l02585"></a>02585           <span class="keywordflow">else</span> {
<a name="l02586"></a>02586             <span class="keywordflow">for</span> (i = 0, p = ys-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>, q = xs-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>; (<a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a>)i &lt; len; i++, p++, q++) {
<a name="l02587"></a>02587               <span class="keywordflow">if</span> (*p != *q) <span class="keywordflow">return</span> 1;
<a name="l02588"></a>02588             }
<a name="l02589"></a>02589           }
<a name="l02590"></a>02590         }
<a name="l02591"></a>02591         <span class="keywordflow">break</span>;
<a name="l02592"></a>02592 
<a name="l02593"></a>02593       <span class="keywordflow">default</span>:
<a name="l02594"></a>02594         <span class="keywordflow">break</span>;
<a name="l02595"></a>02595       }
<a name="l02596"></a>02596     }
<a name="l02597"></a>02597     <span class="keywordflow">break</span>;
<a name="l02598"></a>02598 
<a name="l02599"></a>02599   <span class="keywordflow">default</span>:
<a name="l02600"></a>02600     <span class="keywordflow">break</span>;
<a name="l02601"></a>02601   }
<a name="l02602"></a>02602 
<a name="l02603"></a>02603   <span class="keywordflow">return</span> 0;
<a name="l02604"></a>02604 }
<a name="l02605"></a>02605 
<a name="l02606"></a>02606 <span class="keyword">static</span> <a class="code" href="../../d0/d6e/struct___node.html">Node</a>*
<a name="l02607"></a><a class="code" href="../../d0/d86/regcomp_8c.html#add066ca9799db63693400018f519903b">02607</a> <a class="code" href="../../d0/d86/regcomp_8c.html#add066ca9799db63693400018f519903b">get_head_value_node</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <span class="keywordtype">int</span> exact, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l02608"></a>02608 {
<a name="l02609"></a>02609   <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* n = <a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>;
<a name="l02610"></a>02610 
<a name="l02611"></a>02611   <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node)) {
<a name="l02612"></a>02612   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ac1d2a54cfe6dfa9104b4bfb8d06b8aeb">NT_BREF</a>:
<a name="l02613"></a>02613   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l02614"></a>02614   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a21a7fcbf4a9c872540490d92b9c29813">NT_CANY</a>:
<a name="l02615"></a>02615 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l02616"></a>02616 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a35167bbf195155481ee5cbcae152d0f9">NT_CALL</a>:
<a name="l02617"></a>02617 <span class="preprocessor">#endif</span>
<a name="l02618"></a>02618 <span class="preprocessor"></span>    <span class="keywordflow">break</span>;
<a name="l02619"></a>02619 
<a name="l02620"></a>02620   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a542a2658d0f164eea8bc384ab01549d4">NT_CTYPE</a>:
<a name="l02621"></a>02621   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a98cbe6da0636f892e4de517d350a2938">NT_CCLASS</a>:
<a name="l02622"></a>02622     <span class="keywordflow">if</span> (exact == 0) {
<a name="l02623"></a>02623       n = node;
<a name="l02624"></a>02624     }
<a name="l02625"></a>02625     <span class="keywordflow">break</span>;
<a name="l02626"></a>02626 
<a name="l02627"></a>02627   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l02628"></a>02628     n = <a class="code" href="../../d0/d86/regcomp_8c.html#add066ca9799db63693400018f519903b">get_head_value_node</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), exact, reg);
<a name="l02629"></a>02629     <span class="keywordflow">break</span>;
<a name="l02630"></a>02630 
<a name="l02631"></a>02631   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>:
<a name="l02632"></a>02632     {
<a name="l02633"></a>02633       <a class="code" href="../../d2/db7/struct_str_node.html">StrNode</a>* sn = <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(node);
<a name="l02634"></a>02634 
<a name="l02635"></a>02635       <span class="keywordflow">if</span> (sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a> &lt;= sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>)
<a name="l02636"></a>02636         <span class="keywordflow">break</span>;
<a name="l02637"></a>02637 
<a name="l02638"></a>02638       <span class="keywordflow">if</span> (exact != 0 &amp;&amp;
<a name="l02639"></a>02639           !<a class="code" href="../../d1/dfc/regparse_8h.html#ae9f2e7348c7dca167e63f949aba51715">NSTRING_IS_RAW</a>(node) &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#ae42e344c5336b241948a7a47c99d6533">IS_IGNORECASE</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a>)) {
<a name="l02640"></a>02640       }
<a name="l02641"></a>02641       <span class="keywordflow">else</span> {
<a name="l02642"></a>02642         n = node;
<a name="l02643"></a>02643       }
<a name="l02644"></a>02644     }
<a name="l02645"></a>02645     <span class="keywordflow">break</span>;
<a name="l02646"></a>02646 
<a name="l02647"></a>02647   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l02648"></a>02648     {
<a name="l02649"></a>02649       <a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* qn = <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node);
<a name="l02650"></a>02650       <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> &gt; 0) {
<a name="l02651"></a>02651         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a48cfdf5f3ea6bc385ab77ab6428f3c24">head_exact</a>))
<a name="l02652"></a>02652           n = qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a48cfdf5f3ea6bc385ab77ab6428f3c24">head_exact</a>;
<a name="l02653"></a>02653         <span class="keywordflow">else</span>
<a name="l02654"></a>02654           n = <a class="code" href="../../d0/d86/regcomp_8c.html#add066ca9799db63693400018f519903b">get_head_value_node</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, exact, reg);
<a name="l02655"></a>02655       }
<a name="l02656"></a>02656     }
<a name="l02657"></a>02657     <span class="keywordflow">break</span>;
<a name="l02658"></a>02658 
<a name="l02659"></a>02659   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l02660"></a>02660     {
<a name="l02661"></a>02661       <a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* en = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node);
<a name="l02662"></a>02662       <span class="keywordflow">switch</span> (en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ae554d8a44a852592c4b79ee3241645c7">type</a>) {
<a name="l02663"></a>02663       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a1f27f4cccd30502c03174673fe25af41">ENCLOSE_OPTION</a>:
<a name="l02664"></a>02664         {
<a name="l02665"></a>02665           <a class="code" href="../../d8/db3/oniguruma_8h.html#ad870c1a94502ad33c083978b17911e72">OnigOptionType</a> <a class="code" href="../../d6/da0/nkf-utf8_2nkf_8c.html#ad2d8a938168dc85041b2bac532a7cf75">options</a> = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a>;
<a name="l02666"></a>02666 
<a name="l02667"></a>02667           reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a> = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)-&gt;option;
<a name="l02668"></a>02668           n = <a class="code" href="../../d0/d86/regcomp_8c.html#add066ca9799db63693400018f519903b">get_head_value_node</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)-&gt;target, exact, reg);
<a name="l02669"></a>02669           reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a> = options;
<a name="l02670"></a>02670         }
<a name="l02671"></a>02671         <span class="keywordflow">break</span>;
<a name="l02672"></a>02672 
<a name="l02673"></a>02673       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a32e44d8ddaca8fd4931a8c13677972ad">ENCLOSE_MEMORY</a>:
<a name="l02674"></a>02674       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a8a9f973f8fdb597a604757521ae63fe2">ENCLOSE_STOP_BACKTRACK</a>:
<a name="l02675"></a>02675         n = <a class="code" href="../../d0/d86/regcomp_8c.html#add066ca9799db63693400018f519903b">get_head_value_node</a>(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, exact, reg);
<a name="l02676"></a>02676         <span class="keywordflow">break</span>;
<a name="l02677"></a>02677       }
<a name="l02678"></a>02678     }
<a name="l02679"></a>02679     <span class="keywordflow">break</span>;
<a name="l02680"></a>02680 
<a name="l02681"></a>02681   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l02682"></a>02682     <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node)-&gt;<a class="code" href="../../d5/d9d/tcltklib_8c.html#ac765329451135abec74c45e1897abf26">type</a> == <a class="code" href="../../d6/d87/regint_8h.html#aa0f9fc98186b637ecce6d72e12ee1eed">ANCHOR_PREC_READ</a>)
<a name="l02683"></a>02683       n = <a class="code" href="../../d0/d86/regcomp_8c.html#add066ca9799db63693400018f519903b">get_head_value_node</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node)-&gt;target, exact, reg);
<a name="l02684"></a>02684     <span class="keywordflow">break</span>;
<a name="l02685"></a>02685 
<a name="l02686"></a>02686   <span class="keywordflow">default</span>:
<a name="l02687"></a>02687     <span class="keywordflow">break</span>;
<a name="l02688"></a>02688   }
<a name="l02689"></a>02689 
<a name="l02690"></a>02690   <span class="keywordflow">return</span> n;
<a name="l02691"></a>02691 }
<a name="l02692"></a>02692 
<a name="l02693"></a>02693 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02694"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a7b85b31f12762d485ff5ed2aca6b6608">02694</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a7b85b31f12762d485ff5ed2aca6b6608">check_type_tree</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <span class="keywordtype">int</span> type_mask, <span class="keywordtype">int</span> enclose_mask, <span class="keywordtype">int</span> anchor_mask)
<a name="l02695"></a>02695 {
<a name="l02696"></a>02696   <span class="keywordtype">int</span> <a class="code" href="../../d5/d9d/tcltklib_8c.html#ac765329451135abec74c45e1897abf26">type</a>, r = 0;
<a name="l02697"></a>02697 
<a name="l02698"></a>02698   type = <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node);
<a name="l02699"></a>02699   <span class="keywordflow">if</span> ((<a class="code" href="../../d1/dfc/regparse_8h.html#a9c6bcdfde67af62e9b0467bc3135adbe">NTYPE2BIT</a>(type) &amp; type_mask) == 0)
<a name="l02700"></a>02700     <span class="keywordflow">return</span> 1;
<a name="l02701"></a>02701 
<a name="l02702"></a>02702   <span class="keywordflow">switch</span> (type) {
<a name="l02703"></a>02703   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l02704"></a>02704   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l02705"></a>02705     <span class="keywordflow">do</span> {
<a name="l02706"></a>02706       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a7b85b31f12762d485ff5ed2aca6b6608">check_type_tree</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), type_mask, enclose_mask,
<a name="l02707"></a>02707                           anchor_mask);
<a name="l02708"></a>02708     } <span class="keywordflow">while</span> (r == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l02709"></a>02709     <span class="keywordflow">break</span>;
<a name="l02710"></a>02710 
<a name="l02711"></a>02711   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l02712"></a>02712     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a7b85b31f12762d485ff5ed2aca6b6608">check_type_tree</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node)-&gt;target, type_mask, enclose_mask,
<a name="l02713"></a>02713                         anchor_mask);
<a name="l02714"></a>02714     <span class="keywordflow">break</span>;
<a name="l02715"></a>02715 
<a name="l02716"></a>02716   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l02717"></a>02717     {
<a name="l02718"></a>02718       <a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* en = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node);
<a name="l02719"></a>02719       <span class="keywordflow">if</span> ((en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ae554d8a44a852592c4b79ee3241645c7">type</a> &amp; enclose_mask) == 0)
<a name="l02720"></a>02720         <span class="keywordflow">return</span> 1;
<a name="l02721"></a>02721 
<a name="l02722"></a>02722       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a7b85b31f12762d485ff5ed2aca6b6608">check_type_tree</a>(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, type_mask, enclose_mask, anchor_mask);
<a name="l02723"></a>02723     }
<a name="l02724"></a>02724     <span class="keywordflow">break</span>;
<a name="l02725"></a>02725 
<a name="l02726"></a>02726   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l02727"></a>02727     type = <a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node)-&gt;type;
<a name="l02728"></a>02728     <span class="keywordflow">if</span> ((type &amp; anchor_mask) == 0)
<a name="l02729"></a>02729       <span class="keywordflow">return</span> 1;
<a name="l02730"></a>02730 
<a name="l02731"></a>02731     <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node)-&gt;target)
<a name="l02732"></a>02732       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a7b85b31f12762d485ff5ed2aca6b6608">check_type_tree</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node)-&gt;target,
<a name="l02733"></a>02733                           type_mask, enclose_mask, anchor_mask);
<a name="l02734"></a>02734     <span class="keywordflow">break</span>;
<a name="l02735"></a>02735 
<a name="l02736"></a>02736   <span class="keywordflow">default</span>:
<a name="l02737"></a>02737     <span class="keywordflow">break</span>;
<a name="l02738"></a>02738   }
<a name="l02739"></a>02739   <span class="keywordflow">return</span> r;
<a name="l02740"></a>02740 }
<a name="l02741"></a>02741 
<a name="l02742"></a>02742 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l02743"></a>02743 <span class="preprocessor"></span>
<a name="l02744"></a>02744 <span class="preprocessor">#define RECURSION_EXIST       1</span>
<a name="l02745"></a>02745 <span class="preprocessor"></span><span class="preprocessor">#define RECURSION_INFINITE    2</span>
<a name="l02746"></a>02746 <span class="preprocessor"></span>
<a name="l02747"></a>02747 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02748"></a>02748 subexp_inf_recursive_check(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../d6/dbe/struct_scan_env.html">ScanEnv</a>* env, <span class="keywordtype">int</span> head)
<a name="l02749"></a>02749 {
<a name="l02750"></a>02750   <span class="keywordtype">int</span> <a class="code" href="../../d5/d9d/tcltklib_8c.html#ac765329451135abec74c45e1897abf26">type</a>;
<a name="l02751"></a>02751   <span class="keywordtype">int</span> r = 0;
<a name="l02752"></a>02752 
<a name="l02753"></a>02753   type = <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node);
<a name="l02754"></a>02754   <span class="keywordflow">switch</span> (type) {
<a name="l02755"></a>02755   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l02756"></a>02756     {
<a name="l02757"></a>02757       <a class="code" href="../../d0/d6e/struct___node.html">Node</a> *x;
<a name="l02758"></a>02758       <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> <a class="code" href="../../d1/d6f/date__strftime_8c.html#a2f2bf96d77a187bd4446b4ba3864470d">min</a>;
<a name="l02759"></a>02759       <span class="keywordtype">int</span> ret;
<a name="l02760"></a>02760 
<a name="l02761"></a>02761       x = node;
<a name="l02762"></a>02762       <span class="keywordflow">do</span> {
<a name="l02763"></a>02763         ret = subexp_inf_recursive_check(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(x), env, head);
<a name="l02764"></a>02764         <span class="keywordflow">if</span> (ret &lt; 0 || ret == RECURSION_INFINITE) <span class="keywordflow">return</span> ret;
<a name="l02765"></a>02765         r |= ret;
<a name="l02766"></a>02766         <span class="keywordflow">if</span> (head) {
<a name="l02767"></a>02767           ret = <a class="code" href="../../d0/d86/regcomp_8c.html#af82e9debd7e89c1c386efbfd438ac112">get_min_match_length</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(x), &amp;min, env);
<a name="l02768"></a>02768           <span class="keywordflow">if</span> (ret != 0) <span class="keywordflow">return</span> ret;
<a name="l02769"></a>02769           <span class="keywordflow">if</span> (min != 0) head = 0;
<a name="l02770"></a>02770         }
<a name="l02771"></a>02771       } <span class="keywordflow">while</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(x = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(x)));
<a name="l02772"></a>02772     }
<a name="l02773"></a>02773     <span class="keywordflow">break</span>;
<a name="l02774"></a>02774 
<a name="l02775"></a>02775   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l02776"></a>02776     {
<a name="l02777"></a>02777       <span class="keywordtype">int</span> ret;
<a name="l02778"></a>02778       r = RECURSION_EXIST;
<a name="l02779"></a>02779       <span class="keywordflow">do</span> {
<a name="l02780"></a>02780         ret = subexp_inf_recursive_check(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), env, head);
<a name="l02781"></a>02781         <span class="keywordflow">if</span> (ret &lt; 0 || ret == RECURSION_INFINITE) <span class="keywordflow">return</span> ret;
<a name="l02782"></a>02782         r &amp;= ret;
<a name="l02783"></a>02783       } <span class="keywordflow">while</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l02784"></a>02784     }
<a name="l02785"></a>02785     <span class="keywordflow">break</span>;
<a name="l02786"></a>02786 
<a name="l02787"></a>02787   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l02788"></a>02788     r = subexp_inf_recursive_check(<a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node)-&gt;target, env, head);
<a name="l02789"></a>02789     <span class="keywordflow">if</span> (r == RECURSION_EXIST) {
<a name="l02790"></a>02790       <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node)-&gt;lower == 0) r = 0;
<a name="l02791"></a>02791     }
<a name="l02792"></a>02792     <span class="keywordflow">break</span>;
<a name="l02793"></a>02793 
<a name="l02794"></a>02794   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l02795"></a>02795     {
<a name="l02796"></a>02796       <a class="code" href="../../de/d50/struct_anchor_node.html">AnchorNode</a>* an = <a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node);
<a name="l02797"></a>02797       <span class="keywordflow">switch</span> (an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#a123b9c289808fe00650dbcff45fa2662">type</a>) {
<a name="l02798"></a>02798       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#aa0f9fc98186b637ecce6d72e12ee1eed">ANCHOR_PREC_READ</a>:
<a name="l02799"></a>02799       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a1c64ac74f61b2ffbf3b60f391ae65cbf">ANCHOR_PREC_READ_NOT</a>:
<a name="l02800"></a>02800       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a460ceecc3150bd7cd2437d41fbeb9ea8">ANCHOR_LOOK_BEHIND</a>:
<a name="l02801"></a>02801       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a8812f9a061dd987fe8426262589b52c4">ANCHOR_LOOK_BEHIND_NOT</a>:
<a name="l02802"></a>02802         r = subexp_inf_recursive_check(an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, env, head);
<a name="l02803"></a>02803         <span class="keywordflow">break</span>;
<a name="l02804"></a>02804       }
<a name="l02805"></a>02805     }
<a name="l02806"></a>02806     <span class="keywordflow">break</span>;
<a name="l02807"></a>02807 
<a name="l02808"></a>02808   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a35167bbf195155481ee5cbcae152d0f9">NT_CALL</a>:
<a name="l02809"></a>02809     r = subexp_inf_recursive_check(<a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node)-&gt;target, env, head);
<a name="l02810"></a>02810     <span class="keywordflow">break</span>;
<a name="l02811"></a>02811 
<a name="l02812"></a>02812   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l02813"></a>02813     <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a5c579a377a5453e3613fd08a542680fa">IS_ENCLOSE_MARK2</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)))
<a name="l02814"></a>02814       <span class="keywordflow">return</span> 0;
<a name="l02815"></a>02815     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#abc6f5e62575b817d5caa5a412cae8b3b">IS_ENCLOSE_MARK1</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)))
<a name="l02816"></a>02816       <span class="keywordflow">return</span> (head == 0 ? RECURSION_EXIST : RECURSION_INFINITE);
<a name="l02817"></a>02817     <span class="keywordflow">else</span> {
<a name="l02818"></a>02818       <a class="code" href="../../d1/dfc/regparse_8h.html#a709b6af5e5f6789e8a1ae2406f12a668">SET_ENCLOSE_STATUS</a>(node, <a class="code" href="../../d1/dfc/regparse_8h.html#aea3eb0bc7f52529c2b77dc01a0b5e751">NST_MARK2</a>);
<a name="l02819"></a>02819       r = subexp_inf_recursive_check(<a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)-&gt;target, env, head);
<a name="l02820"></a>02820       <a class="code" href="../../d1/dfc/regparse_8h.html#ac109fca051528ba56563ac056db96ec5">CLEAR_ENCLOSE_STATUS</a>(node, <a class="code" href="../../d1/dfc/regparse_8h.html#aea3eb0bc7f52529c2b77dc01a0b5e751">NST_MARK2</a>);
<a name="l02821"></a>02821     }
<a name="l02822"></a>02822     <span class="keywordflow">break</span>;
<a name="l02823"></a>02823 
<a name="l02824"></a>02824   <span class="keywordflow">default</span>:
<a name="l02825"></a>02825     <span class="keywordflow">break</span>;
<a name="l02826"></a>02826   }
<a name="l02827"></a>02827 
<a name="l02828"></a>02828   <span class="keywordflow">return</span> r;
<a name="l02829"></a>02829 }
<a name="l02830"></a>02830 
<a name="l02831"></a>02831 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02832"></a>02832 subexp_inf_recursive_check_trav(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../d6/dbe/struct_scan_env.html">ScanEnv</a>* env)
<a name="l02833"></a>02833 {
<a name="l02834"></a>02834   <span class="keywordtype">int</span> type;
<a name="l02835"></a>02835   <span class="keywordtype">int</span> r = 0;
<a name="l02836"></a>02836 
<a name="l02837"></a>02837   type = <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node);
<a name="l02838"></a>02838   <span class="keywordflow">switch</span> (type) {
<a name="l02839"></a>02839   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l02840"></a>02840   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l02841"></a>02841     <span class="keywordflow">do</span> {
<a name="l02842"></a>02842       r = subexp_inf_recursive_check_trav(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), env);
<a name="l02843"></a>02843     } <span class="keywordflow">while</span> (r == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l02844"></a>02844     <span class="keywordflow">break</span>;
<a name="l02845"></a>02845 
<a name="l02846"></a>02846   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l02847"></a>02847     r = subexp_inf_recursive_check_trav(<a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node)-&gt;target, env);
<a name="l02848"></a>02848     <span class="keywordflow">break</span>;
<a name="l02849"></a>02849 
<a name="l02850"></a>02850   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l02851"></a>02851     {
<a name="l02852"></a>02852       <a class="code" href="../../de/d50/struct_anchor_node.html">AnchorNode</a>* an = <a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node);
<a name="l02853"></a>02853       <span class="keywordflow">switch</span> (an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#a123b9c289808fe00650dbcff45fa2662">type</a>) {
<a name="l02854"></a>02854       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#aa0f9fc98186b637ecce6d72e12ee1eed">ANCHOR_PREC_READ</a>:
<a name="l02855"></a>02855       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a1c64ac74f61b2ffbf3b60f391ae65cbf">ANCHOR_PREC_READ_NOT</a>:
<a name="l02856"></a>02856       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a460ceecc3150bd7cd2437d41fbeb9ea8">ANCHOR_LOOK_BEHIND</a>:
<a name="l02857"></a>02857       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a8812f9a061dd987fe8426262589b52c4">ANCHOR_LOOK_BEHIND_NOT</a>:
<a name="l02858"></a>02858         r = subexp_inf_recursive_check_trav(an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, env);
<a name="l02859"></a>02859         <span class="keywordflow">break</span>;
<a name="l02860"></a>02860       }
<a name="l02861"></a>02861     }
<a name="l02862"></a>02862     <span class="keywordflow">break</span>;
<a name="l02863"></a>02863 
<a name="l02864"></a>02864   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l02865"></a>02865     {
<a name="l02866"></a>02866       <a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* en = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node);
<a name="l02867"></a>02867 
<a name="l02868"></a>02868       <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a6b46359badf064aa3ba4bb6b75da3f7d">IS_ENCLOSE_RECURSION</a>(en)) {
<a name="l02869"></a>02869         <a class="code" href="../../d1/dfc/regparse_8h.html#a709b6af5e5f6789e8a1ae2406f12a668">SET_ENCLOSE_STATUS</a>(node, <a class="code" href="../../d1/dfc/regparse_8h.html#ac474062af4aa1229d9d3aff35745dbda">NST_MARK1</a>);
<a name="l02870"></a>02870         r = subexp_inf_recursive_check(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, env, 1);
<a name="l02871"></a>02871         <span class="keywordflow">if</span> (r &gt; 0) <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a3fd35633d93d47381668578ce35a0fe2">ONIGERR_NEVER_ENDING_RECURSION</a>;
<a name="l02872"></a>02872         <a class="code" href="../../d1/dfc/regparse_8h.html#ac109fca051528ba56563ac056db96ec5">CLEAR_ENCLOSE_STATUS</a>(node, <a class="code" href="../../d1/dfc/regparse_8h.html#ac474062af4aa1229d9d3aff35745dbda">NST_MARK1</a>);
<a name="l02873"></a>02873       }
<a name="l02874"></a>02874       r = subexp_inf_recursive_check_trav(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, env);
<a name="l02875"></a>02875     }
<a name="l02876"></a>02876 
<a name="l02877"></a>02877     <span class="keywordflow">break</span>;
<a name="l02878"></a>02878 
<a name="l02879"></a>02879   <span class="keywordflow">default</span>:
<a name="l02880"></a>02880     <span class="keywordflow">break</span>;
<a name="l02881"></a>02881   }
<a name="l02882"></a>02882 
<a name="l02883"></a>02883   <span class="keywordflow">return</span> r;
<a name="l02884"></a>02884 }
<a name="l02885"></a>02885 
<a name="l02886"></a>02886 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02887"></a>02887 subexp_recursive_check(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node)
<a name="l02888"></a>02888 {
<a name="l02889"></a>02889   <span class="keywordtype">int</span> r = 0;
<a name="l02890"></a>02890 
<a name="l02891"></a>02891   <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node)) {
<a name="l02892"></a>02892   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l02893"></a>02893   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l02894"></a>02894     <span class="keywordflow">do</span> {
<a name="l02895"></a>02895       r |= subexp_recursive_check(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node));
<a name="l02896"></a>02896     } <span class="keywordflow">while</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l02897"></a>02897     <span class="keywordflow">break</span>;
<a name="l02898"></a>02898 
<a name="l02899"></a>02899   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l02900"></a>02900     r = subexp_recursive_check(<a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node)-&gt;target);
<a name="l02901"></a>02901     <span class="keywordflow">break</span>;
<a name="l02902"></a>02902 
<a name="l02903"></a>02903   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l02904"></a>02904     {
<a name="l02905"></a>02905       <a class="code" href="../../de/d50/struct_anchor_node.html">AnchorNode</a>* an = <a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node);
<a name="l02906"></a>02906       <span class="keywordflow">switch</span> (an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#a123b9c289808fe00650dbcff45fa2662">type</a>) {
<a name="l02907"></a>02907       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#aa0f9fc98186b637ecce6d72e12ee1eed">ANCHOR_PREC_READ</a>:
<a name="l02908"></a>02908       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a1c64ac74f61b2ffbf3b60f391ae65cbf">ANCHOR_PREC_READ_NOT</a>:
<a name="l02909"></a>02909       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a460ceecc3150bd7cd2437d41fbeb9ea8">ANCHOR_LOOK_BEHIND</a>:
<a name="l02910"></a>02910       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a8812f9a061dd987fe8426262589b52c4">ANCHOR_LOOK_BEHIND_NOT</a>:
<a name="l02911"></a>02911         r = subexp_recursive_check(an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>);
<a name="l02912"></a>02912         <span class="keywordflow">break</span>;
<a name="l02913"></a>02913       }
<a name="l02914"></a>02914     }
<a name="l02915"></a>02915     <span class="keywordflow">break</span>;
<a name="l02916"></a>02916 
<a name="l02917"></a>02917   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a35167bbf195155481ee5cbcae152d0f9">NT_CALL</a>:
<a name="l02918"></a>02918     r = subexp_recursive_check(<a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node)-&gt;target);
<a name="l02919"></a>02919     <span class="keywordflow">if</span> (r != 0) <a class="code" href="../../d1/dfc/regparse_8h.html#a6292c7c2a45036cc7b12476b5c5367cc">SET_CALL_RECURSION</a>(node);
<a name="l02920"></a>02920     <span class="keywordflow">break</span>;
<a name="l02921"></a>02921 
<a name="l02922"></a>02922   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l02923"></a>02923     <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a5c579a377a5453e3613fd08a542680fa">IS_ENCLOSE_MARK2</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)))
<a name="l02924"></a>02924       <span class="keywordflow">return</span> 0;
<a name="l02925"></a>02925     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#abc6f5e62575b817d5caa5a412cae8b3b">IS_ENCLOSE_MARK1</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)))
<a name="l02926"></a>02926       <span class="keywordflow">return</span> 1; <span class="comment">/* recursion */</span>
<a name="l02927"></a>02927     <span class="keywordflow">else</span> {
<a name="l02928"></a>02928       <a class="code" href="../../d1/dfc/regparse_8h.html#a709b6af5e5f6789e8a1ae2406f12a668">SET_ENCLOSE_STATUS</a>(node, <a class="code" href="../../d1/dfc/regparse_8h.html#aea3eb0bc7f52529c2b77dc01a0b5e751">NST_MARK2</a>);
<a name="l02929"></a>02929       r = subexp_recursive_check(<a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)-&gt;target);
<a name="l02930"></a>02930       <a class="code" href="../../d1/dfc/regparse_8h.html#ac109fca051528ba56563ac056db96ec5">CLEAR_ENCLOSE_STATUS</a>(node, <a class="code" href="../../d1/dfc/regparse_8h.html#aea3eb0bc7f52529c2b77dc01a0b5e751">NST_MARK2</a>);
<a name="l02931"></a>02931     }
<a name="l02932"></a>02932     <span class="keywordflow">break</span>;
<a name="l02933"></a>02933 
<a name="l02934"></a>02934   <span class="keywordflow">default</span>:
<a name="l02935"></a>02935     <span class="keywordflow">break</span>;
<a name="l02936"></a>02936   }
<a name="l02937"></a>02937 
<a name="l02938"></a>02938   <span class="keywordflow">return</span> r;
<a name="l02939"></a>02939 }
<a name="l02940"></a>02940 
<a name="l02941"></a>02941 
<a name="l02942"></a>02942 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l02943"></a>02943 subexp_recursive_check_trav(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../d6/dbe/struct_scan_env.html">ScanEnv</a>* env)
<a name="l02944"></a>02944 {
<a name="l02945"></a>02945 <span class="preprocessor">#define FOUND_CALLED_NODE    1</span>
<a name="l02946"></a>02946 <span class="preprocessor"></span>
<a name="l02947"></a>02947   <span class="keywordtype">int</span> type;
<a name="l02948"></a>02948   <span class="keywordtype">int</span> r = 0;
<a name="l02949"></a>02949 
<a name="l02950"></a>02950   type = <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node);
<a name="l02951"></a>02951   <span class="keywordflow">switch</span> (type) {
<a name="l02952"></a>02952   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l02953"></a>02953   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l02954"></a>02954     {
<a name="l02955"></a>02955       <span class="keywordtype">int</span> ret;
<a name="l02956"></a>02956       <span class="keywordflow">do</span> {
<a name="l02957"></a>02957         ret = subexp_recursive_check_trav(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), env);
<a name="l02958"></a>02958         <span class="keywordflow">if</span> (ret == FOUND_CALLED_NODE) r = FOUND_CALLED_NODE;
<a name="l02959"></a>02959         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ret &lt; 0) <span class="keywordflow">return</span> ret;
<a name="l02960"></a>02960       } <span class="keywordflow">while</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l02961"></a>02961     }
<a name="l02962"></a>02962     <span class="keywordflow">break</span>;
<a name="l02963"></a>02963 
<a name="l02964"></a>02964   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l02965"></a>02965     r = subexp_recursive_check_trav(<a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node)-&gt;target, env);
<a name="l02966"></a>02966     <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node)-&gt;upper == 0) {
<a name="l02967"></a>02967       <span class="keywordflow">if</span> (r == FOUND_CALLED_NODE)
<a name="l02968"></a>02968         <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node)-&gt;is_refered = 1;
<a name="l02969"></a>02969     }
<a name="l02970"></a>02970     <span class="keywordflow">break</span>;
<a name="l02971"></a>02971 
<a name="l02972"></a>02972   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l02973"></a>02973     {
<a name="l02974"></a>02974       <a class="code" href="../../de/d50/struct_anchor_node.html">AnchorNode</a>* an = <a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node);
<a name="l02975"></a>02975       <span class="keywordflow">switch</span> (an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#a123b9c289808fe00650dbcff45fa2662">type</a>) {
<a name="l02976"></a>02976       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#aa0f9fc98186b637ecce6d72e12ee1eed">ANCHOR_PREC_READ</a>:
<a name="l02977"></a>02977       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a1c64ac74f61b2ffbf3b60f391ae65cbf">ANCHOR_PREC_READ_NOT</a>:
<a name="l02978"></a>02978       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a460ceecc3150bd7cd2437d41fbeb9ea8">ANCHOR_LOOK_BEHIND</a>:
<a name="l02979"></a>02979       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a8812f9a061dd987fe8426262589b52c4">ANCHOR_LOOK_BEHIND_NOT</a>:
<a name="l02980"></a>02980         r = subexp_recursive_check_trav(an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, env);
<a name="l02981"></a>02981         <span class="keywordflow">break</span>;
<a name="l02982"></a>02982       }
<a name="l02983"></a>02983     }
<a name="l02984"></a>02984     <span class="keywordflow">break</span>;
<a name="l02985"></a>02985 
<a name="l02986"></a>02986   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l02987"></a>02987     {
<a name="l02988"></a>02988       <a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* en = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node);
<a name="l02989"></a>02989 
<a name="l02990"></a>02990       <span class="keywordflow">if</span> (! <a class="code" href="../../d1/dfc/regparse_8h.html#a6b46359badf064aa3ba4bb6b75da3f7d">IS_ENCLOSE_RECURSION</a>(en)) {
<a name="l02991"></a>02991         <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a540ae1be7564579c1a005bd62ca6fcbb">IS_ENCLOSE_CALLED</a>(en)) {
<a name="l02992"></a>02992           <a class="code" href="../../d1/dfc/regparse_8h.html#a709b6af5e5f6789e8a1ae2406f12a668">SET_ENCLOSE_STATUS</a>(node, <a class="code" href="../../d1/dfc/regparse_8h.html#ac474062af4aa1229d9d3aff35745dbda">NST_MARK1</a>);
<a name="l02993"></a>02993           r = subexp_recursive_check(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>);
<a name="l02994"></a>02994           <span class="keywordflow">if</span> (r != 0) <a class="code" href="../../d1/dfc/regparse_8h.html#a709b6af5e5f6789e8a1ae2406f12a668">SET_ENCLOSE_STATUS</a>(node, <a class="code" href="../../d1/dfc/regparse_8h.html#a04144a8cc6b823fcae3b99f5cd5ab42c">NST_RECURSION</a>);
<a name="l02995"></a>02995           <a class="code" href="../../d1/dfc/regparse_8h.html#ac109fca051528ba56563ac056db96ec5">CLEAR_ENCLOSE_STATUS</a>(node, <a class="code" href="../../d1/dfc/regparse_8h.html#ac474062af4aa1229d9d3aff35745dbda">NST_MARK1</a>);
<a name="l02996"></a>02996         }
<a name="l02997"></a>02997       }
<a name="l02998"></a>02998       r = subexp_recursive_check_trav(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, env);
<a name="l02999"></a>02999       <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a540ae1be7564579c1a005bd62ca6fcbb">IS_ENCLOSE_CALLED</a>(en))
<a name="l03000"></a>03000         r |= FOUND_CALLED_NODE;
<a name="l03001"></a>03001     }
<a name="l03002"></a>03002     <span class="keywordflow">break</span>;
<a name="l03003"></a>03003 
<a name="l03004"></a>03004   <span class="keywordflow">default</span>:
<a name="l03005"></a>03005     <span class="keywordflow">break</span>;
<a name="l03006"></a>03006   }
<a name="l03007"></a>03007 
<a name="l03008"></a>03008   <span class="keywordflow">return</span> r;
<a name="l03009"></a>03009 }
<a name="l03010"></a>03010 
<a name="l03011"></a>03011 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l03012"></a>03012 setup_subexp_call(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../d6/dbe/struct_scan_env.html">ScanEnv</a>* env)
<a name="l03013"></a>03013 {
<a name="l03014"></a>03014   <span class="keywordtype">int</span> type;
<a name="l03015"></a>03015   <span class="keywordtype">int</span> r = 0;
<a name="l03016"></a>03016 
<a name="l03017"></a>03017   type = <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node);
<a name="l03018"></a>03018   <span class="keywordflow">switch</span> (type) {
<a name="l03019"></a>03019   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l03020"></a>03020     <span class="keywordflow">do</span> {
<a name="l03021"></a>03021       r = setup_subexp_call(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), env);
<a name="l03022"></a>03022     } <span class="keywordflow">while</span> (r == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l03023"></a>03023     <span class="keywordflow">break</span>;
<a name="l03024"></a>03024 
<a name="l03025"></a>03025   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l03026"></a>03026     <span class="keywordflow">do</span> {
<a name="l03027"></a>03027       r = setup_subexp_call(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), env);
<a name="l03028"></a>03028     } <span class="keywordflow">while</span> (r == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l03029"></a>03029     <span class="keywordflow">break</span>;
<a name="l03030"></a>03030 
<a name="l03031"></a>03031   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l03032"></a>03032     r = setup_subexp_call(<a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node)-&gt;target, env);
<a name="l03033"></a>03033     <span class="keywordflow">break</span>;
<a name="l03034"></a>03034   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l03035"></a>03035     r = setup_subexp_call(<a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)-&gt;target, env);
<a name="l03036"></a>03036     <span class="keywordflow">break</span>;
<a name="l03037"></a>03037 
<a name="l03038"></a>03038   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a35167bbf195155481ee5cbcae152d0f9">NT_CALL</a>:
<a name="l03039"></a>03039     {
<a name="l03040"></a>03040       <a class="code" href="../../d2/dac/struct_call_node.html">CallNode</a>* cn = <a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node);
<a name="l03041"></a>03041       <a class="code" href="../../d0/d6e/struct___node.html">Node</a>** nodes = <a class="code" href="../../d1/dfc/regparse_8h.html#a82066fdd1d2abdcc23ae01f55bfbe321">SCANENV_MEM_NODES</a>(env);
<a name="l03042"></a>03042 
<a name="l03043"></a>03043       <span class="keywordflow">if</span> (cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#af57c99126e81f387a015e73b0afa860a">group_num</a> != 0) {
<a name="l03044"></a>03044         <span class="keywordtype">int</span> gnum = cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#af57c99126e81f387a015e73b0afa860a">group_num</a>;
<a name="l03045"></a>03045 
<a name="l03046"></a>03046 <span class="preprocessor">#ifdef USE_NAMED_GROUP</span>
<a name="l03047"></a>03047 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a6631d9427686a047869c75049f0d6c02">num_named</a> &gt; 0 &amp;&amp;
<a name="l03048"></a>03048             <a class="code" href="../../d1/dfc/regparse_8h.html#a18bfc9ee154d6dd516347bd71b4810f6">IS_SYNTAX_BV</a>(env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#ae5c4502ad7b7a4a418eda464919d2bda">syntax</a>, <a class="code" href="../../d8/db3/oniguruma_8h.html#aabffac0a9cf8aa6bda2d83997bbccd94">ONIG_SYN_CAPTURE_ONLY_NAMED_GROUP</a>) &amp;&amp;
<a name="l03049"></a>03049             !<a class="code" href="../../d8/db3/oniguruma_8h.html#a2ff7c691b88c0b43377bbe3f409b036a">ONIG_IS_OPTION_ON</a>(env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a1a7599f3079dfc7ab6d0b317f0f37d93">option</a>, <a class="code" href="../../d8/db3/oniguruma_8h.html#a89a38e785fb1aa007945f4e5fabb6b3e">ONIG_OPTION_CAPTURE_GROUP</a>)) {
<a name="l03050"></a>03050           <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a93b590a07677c61a744ea251d8b631f5">ONIGERR_NUMBERED_BACKREF_OR_CALL_NOT_ALLOWED</a>;
<a name="l03051"></a>03051         }
<a name="l03052"></a>03052 <span class="preprocessor">#endif</span>
<a name="l03053"></a>03053 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (gnum &gt; env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a5f71c0a538e047bc63962df55ff304b0">num_mem</a>) {
<a name="l03054"></a>03054           <a class="code" href="../../d6/dda/regparse_8c.html#a8d6d95d9c113545baa16fe1ff3d96191">onig_scan_env_set_error_string</a>(env,
<a name="l03055"></a>03055                  <a class="code" href="../../d8/db3/oniguruma_8h.html#a92a87e060e627bc3badb0d9e3648e333">ONIGERR_UNDEFINED_GROUP_REFERENCE</a>, cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#a6e8afb4d83386549c360a4b2f0830314">name</a>, cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#ae2927bfc2351f28c2cef4c67c1826653">name_end</a>);
<a name="l03056"></a>03056           <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a92a87e060e627bc3badb0d9e3648e333">ONIGERR_UNDEFINED_GROUP_REFERENCE</a>;
<a name="l03057"></a>03057         }
<a name="l03058"></a>03058 
<a name="l03059"></a>03059 <span class="preprocessor">#ifdef USE_NAMED_GROUP</span>
<a name="l03060"></a>03060 <span class="preprocessor"></span>      set_call_attr:
<a name="l03061"></a>03061 <span class="preprocessor">#endif</span>
<a name="l03062"></a>03062 <span class="preprocessor"></span>        cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#a74055ba4ccf07f1d75e2922f8af10eef">target</a> = nodes[cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#af57c99126e81f387a015e73b0afa860a">group_num</a>];
<a name="l03063"></a>03063         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#a74055ba4ccf07f1d75e2922f8af10eef">target</a>)) {
<a name="l03064"></a>03064           <a class="code" href="../../d6/dda/regparse_8c.html#a8d6d95d9c113545baa16fe1ff3d96191">onig_scan_env_set_error_string</a>(env,
<a name="l03065"></a>03065                  <a class="code" href="../../d8/db3/oniguruma_8h.html#a6f16c9adf6c6e9e769b0ea84f9b32665">ONIGERR_UNDEFINED_NAME_REFERENCE</a>, cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#a6e8afb4d83386549c360a4b2f0830314">name</a>, cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#ae2927bfc2351f28c2cef4c67c1826653">name_end</a>);
<a name="l03066"></a>03066           <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a6f16c9adf6c6e9e769b0ea84f9b32665">ONIGERR_UNDEFINED_NAME_REFERENCE</a>;
<a name="l03067"></a>03067         }
<a name="l03068"></a>03068         <a class="code" href="../../d1/dfc/regparse_8h.html#a709b6af5e5f6789e8a1ae2406f12a668">SET_ENCLOSE_STATUS</a>(cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#a74055ba4ccf07f1d75e2922f8af10eef">target</a>, <a class="code" href="../../d1/dfc/regparse_8h.html#aa135965725c393f6995444a164778b69">NST_CALLED</a>);
<a name="l03069"></a>03069         <a class="code" href="../../d6/d87/regint_8h.html#a69d9bf37ca95acb1bd2f662556fc529b">BIT_STATUS_ON_AT</a>(env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a5ae5ce2ec7e6fe61e234fa4fd05ee1e4">bt_mem_start</a>, cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#af57c99126e81f387a015e73b0afa860a">group_num</a>);
<a name="l03070"></a>03070         cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#aed5652edd163b78e59ec18eb8412c2f7">unset_addr_list</a> = env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a62165c123178de4db47aae2ba8e938ac">unset_addr_list</a>;
<a name="l03071"></a>03071       }
<a name="l03072"></a>03072 <span class="preprocessor">#ifdef USE_NAMED_GROUP</span>
<a name="l03073"></a>03073 <span class="preprocessor"></span>      <span class="keywordflow">else</span> {
<a name="l03074"></a>03074         <span class="keywordtype">int</span> *refs;
<a name="l03075"></a>03075 
<a name="l03076"></a>03076         <span class="keywordtype">int</span> n = <a class="code" href="../../d6/dda/regparse_8c.html#a083f9c0f9e54ad206e6464554876abe9">onig_name_to_group_numbers</a>(env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#ae4606d4fccc90f08112b577ef1822eac">reg</a>, cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#a6e8afb4d83386549c360a4b2f0830314">name</a>, cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#ae2927bfc2351f28c2cef4c67c1826653">name_end</a>,
<a name="l03077"></a>03077                                            &amp;refs);
<a name="l03078"></a>03078         <span class="keywordflow">if</span> (n &lt;= 0) {
<a name="l03079"></a>03079           <a class="code" href="../../d6/dda/regparse_8c.html#a8d6d95d9c113545baa16fe1ff3d96191">onig_scan_env_set_error_string</a>(env,
<a name="l03080"></a>03080                  <a class="code" href="../../d8/db3/oniguruma_8h.html#a6f16c9adf6c6e9e769b0ea84f9b32665">ONIGERR_UNDEFINED_NAME_REFERENCE</a>, cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#a6e8afb4d83386549c360a4b2f0830314">name</a>, cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#ae2927bfc2351f28c2cef4c67c1826653">name_end</a>);
<a name="l03081"></a>03081           <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a6f16c9adf6c6e9e769b0ea84f9b32665">ONIGERR_UNDEFINED_NAME_REFERENCE</a>;
<a name="l03082"></a>03082         }
<a name="l03083"></a>03083         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &gt; 1) {
<a name="l03084"></a>03084           <a class="code" href="../../d6/dda/regparse_8c.html#a8d6d95d9c113545baa16fe1ff3d96191">onig_scan_env_set_error_string</a>(env,
<a name="l03085"></a>03085             <a class="code" href="../../d8/db3/oniguruma_8h.html#a335d23e07fd796a2610d64cee8527fc0">ONIGERR_MULTIPLEX_DEFINITION_NAME_CALL</a>, cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#a6e8afb4d83386549c360a4b2f0830314">name</a>, cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#ae2927bfc2351f28c2cef4c67c1826653">name_end</a>);
<a name="l03086"></a>03086           <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a335d23e07fd796a2610d64cee8527fc0">ONIGERR_MULTIPLEX_DEFINITION_NAME_CALL</a>;
<a name="l03087"></a>03087         }
<a name="l03088"></a>03088         <span class="keywordflow">else</span> {
<a name="l03089"></a>03089           cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#af57c99126e81f387a015e73b0afa860a">group_num</a> = refs[0];
<a name="l03090"></a>03090           <span class="keywordflow">goto</span> set_call_attr;
<a name="l03091"></a>03091         }
<a name="l03092"></a>03092       }
<a name="l03093"></a>03093 <span class="preprocessor">#endif</span>
<a name="l03094"></a>03094 <span class="preprocessor"></span>    }
<a name="l03095"></a>03095     <span class="keywordflow">break</span>;
<a name="l03096"></a>03096 
<a name="l03097"></a>03097   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l03098"></a>03098     {
<a name="l03099"></a>03099       <a class="code" href="../../de/d50/struct_anchor_node.html">AnchorNode</a>* an = <a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node);
<a name="l03100"></a>03100 
<a name="l03101"></a>03101       <span class="keywordflow">switch</span> (an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#a123b9c289808fe00650dbcff45fa2662">type</a>) {
<a name="l03102"></a>03102       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#aa0f9fc98186b637ecce6d72e12ee1eed">ANCHOR_PREC_READ</a>:
<a name="l03103"></a>03103       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a1c64ac74f61b2ffbf3b60f391ae65cbf">ANCHOR_PREC_READ_NOT</a>:
<a name="l03104"></a>03104       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a460ceecc3150bd7cd2437d41fbeb9ea8">ANCHOR_LOOK_BEHIND</a>:
<a name="l03105"></a>03105       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a8812f9a061dd987fe8426262589b52c4">ANCHOR_LOOK_BEHIND_NOT</a>:
<a name="l03106"></a>03106         r = setup_subexp_call(an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, env);
<a name="l03107"></a>03107         <span class="keywordflow">break</span>;
<a name="l03108"></a>03108       }
<a name="l03109"></a>03109     }
<a name="l03110"></a>03110     <span class="keywordflow">break</span>;
<a name="l03111"></a>03111 
<a name="l03112"></a>03112   <span class="keywordflow">default</span>:
<a name="l03113"></a>03113     <span class="keywordflow">break</span>;
<a name="l03114"></a>03114   }
<a name="l03115"></a>03115 
<a name="l03116"></a>03116   <span class="keywordflow">return</span> r;
<a name="l03117"></a>03117 }
<a name="l03118"></a>03118 <span class="preprocessor">#endif</span>
<a name="l03119"></a>03119 <span class="preprocessor"></span>
<a name="l03120"></a>03120 <span class="comment">/* divide different length alternatives in look-behind.</span>
<a name="l03121"></a>03121 <span class="comment">  (?&lt;=A|B) ==&gt; (?&lt;=A)|(?&lt;=B)</span>
<a name="l03122"></a>03122 <span class="comment">  (?&lt;!A|B) ==&gt; (?&lt;!A)(?&lt;!B)</span>
<a name="l03123"></a>03123 <span class="comment">*/</span>
<a name="l03124"></a>03124 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l03125"></a><a class="code" href="../../d0/d86/regcomp_8c.html#afa342a20869a50ae3810613e4a5f469a">03125</a> <a class="code" href="../../d0/d86/regcomp_8c.html#afa342a20869a50ae3810613e4a5f469a">divide_look_behind_alternatives</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node)
<a name="l03126"></a>03126 {
<a name="l03127"></a>03127   <a class="code" href="../../d0/d6e/struct___node.html">Node</a> *head, *np, *insert_node;
<a name="l03128"></a>03128   <a class="code" href="../../de/d50/struct_anchor_node.html">AnchorNode</a>* an = <a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node);
<a name="l03129"></a>03129   <span class="keywordtype">int</span> anc_type = an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#a123b9c289808fe00650dbcff45fa2662">type</a>;
<a name="l03130"></a>03130 
<a name="l03131"></a>03131   head = an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>;
<a name="l03132"></a>03132   np = <a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(head);
<a name="l03133"></a>03133   <a class="code" href="../../d0/d86/regcomp_8c.html#aad26bfcdc08e74d911686afe96828d2d">swap_node</a>(node, head);
<a name="l03134"></a>03134   <a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node) = head;
<a name="l03135"></a>03135   <a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(head)-&gt;target = np;
<a name="l03136"></a>03136 
<a name="l03137"></a>03137   np = node;
<a name="l03138"></a>03138   <span class="keywordflow">while</span> ((np = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(np)) != <a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>) {
<a name="l03139"></a>03139     insert_node = <a class="code" href="../../d6/dda/regparse_8c.html#a153ac14abd8927a6edd4da2f445d1c30">onig_node_new_anchor</a>(anc_type);
<a name="l03140"></a>03140     <a class="code" href="../../d6/d87/regint_8h.html#a17ebb2a12300dcf6d79916e357fae45a">CHECK_NULL_RETURN_MEMERR</a>(insert_node);
<a name="l03141"></a>03141     <a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(insert_node)-&gt;target = <a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(np);
<a name="l03142"></a>03142     <a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(np) = insert_node;
<a name="l03143"></a>03143   }
<a name="l03144"></a>03144 
<a name="l03145"></a>03145   <span class="keywordflow">if</span> (anc_type == <a class="code" href="../../d6/d87/regint_8h.html#a8812f9a061dd987fe8426262589b52c4">ANCHOR_LOOK_BEHIND_NOT</a>) {
<a name="l03146"></a>03146     np = node;
<a name="l03147"></a>03147     <span class="keywordflow">do</span> {
<a name="l03148"></a>03148       <a class="code" href="../../d1/dfc/regparse_8h.html#aa63b31f6718866f81a7efd9263270f82">SET_NTYPE</a>(np, <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>);  <span class="comment">/* alt -&gt; list */</span>
<a name="l03149"></a>03149     } <span class="keywordflow">while</span> ((np = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(np)) != <a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>);
<a name="l03150"></a>03150   }
<a name="l03151"></a>03151   <span class="keywordflow">return</span> 0;
<a name="l03152"></a>03152 }
<a name="l03153"></a>03153 
<a name="l03154"></a>03154 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l03155"></a><a class="code" href="../../d0/d86/regcomp_8c.html#aafc7dceb9ef806e4a0cf3543f3d84697">03155</a> <a class="code" href="../../d0/d86/regcomp_8c.html#aafc7dceb9ef806e4a0cf3543f3d84697">setup_look_behind</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <a class="code" href="../../d6/dbe/struct_scan_env.html">ScanEnv</a>* env)
<a name="l03156"></a>03156 {
<a name="l03157"></a>03157   <span class="keywordtype">int</span> r, <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l03158"></a>03158   <a class="code" href="../../de/d50/struct_anchor_node.html">AnchorNode</a>* an = <a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node);
<a name="l03159"></a>03159 
<a name="l03160"></a>03160   r = <a class="code" href="../../d0/d86/regcomp_8c.html#a2c933c9dbf2fa16cda90f1e04a6c901c">get_char_length_tree</a>(an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, reg, &amp;len);
<a name="l03161"></a>03161   <span class="keywordflow">if</span> (r == 0)
<a name="l03162"></a>03162     an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#aa00ddc7db0cbdaf4adf67b3bf1f4cf3c">char_len</a> = len;
<a name="l03163"></a>03163   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r == <a class="code" href="../../d0/d86/regcomp_8c.html#a89d5c2293ff7e0d16d3baa4d4aa2aa27">GET_CHAR_LEN_VARLEN</a>)
<a name="l03164"></a>03164     r = <a class="code" href="../../d8/db3/oniguruma_8h.html#a73946c630e9d44c9b570b739180ee451">ONIGERR_INVALID_LOOK_BEHIND_PATTERN</a>;
<a name="l03165"></a>03165   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (r == <a class="code" href="../../d0/d86/regcomp_8c.html#a371259239d91892d1cb0914248875090">GET_CHAR_LEN_TOP_ALT_VARLEN</a>) {
<a name="l03166"></a>03166     <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a18bfc9ee154d6dd516347bd71b4810f6">IS_SYNTAX_BV</a>(env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#ae5c4502ad7b7a4a418eda464919d2bda">syntax</a>, <a class="code" href="../../d8/db3/oniguruma_8h.html#ac71155485c9f6a0467a4e789730ed2c6">ONIG_SYN_DIFFERENT_LEN_ALT_LOOK_BEHIND</a>))
<a name="l03167"></a>03167       r = <a class="code" href="../../d0/d86/regcomp_8c.html#afa342a20869a50ae3810613e4a5f469a">divide_look_behind_alternatives</a>(node);
<a name="l03168"></a>03168     <span class="keywordflow">else</span>
<a name="l03169"></a>03169       r = <a class="code" href="../../d8/db3/oniguruma_8h.html#a73946c630e9d44c9b570b739180ee451">ONIGERR_INVALID_LOOK_BEHIND_PATTERN</a>;
<a name="l03170"></a>03170   }
<a name="l03171"></a>03171 
<a name="l03172"></a>03172   <span class="keywordflow">return</span> r;
<a name="l03173"></a>03173 }
<a name="l03174"></a>03174 
<a name="l03175"></a>03175 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l03176"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a965874fe7fa195fb13c239f5a53ca115">03176</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a965874fe7fa195fb13c239f5a53ca115">next_setup</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* next_node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l03177"></a>03177 {
<a name="l03178"></a>03178   <span class="keywordtype">int</span> type;
<a name="l03179"></a>03179 
<a name="l03180"></a>03180  retry:
<a name="l03181"></a>03181   type = <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node);
<a name="l03182"></a>03182   <span class="keywordflow">if</span> (type == <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>) {
<a name="l03183"></a>03183     <a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* qn = <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node);
<a name="l03184"></a>03184     <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a> &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a7b7f11d4b2705496b7711598403d4f72">IS_REPEAT_INFINITE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>)) {
<a name="l03185"></a>03185 <span class="preprocessor">#ifdef USE_QTFR_PEEK_NEXT</span>
<a name="l03186"></a>03186 <span class="preprocessor"></span>      <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* n = <a class="code" href="../../d0/d86/regcomp_8c.html#add066ca9799db63693400018f519903b">get_head_value_node</a>(next_node, 1, reg);
<a name="l03187"></a>03187       <span class="comment">/* &apos;\0&apos;: for UTF-16BE etc... */</span>
<a name="l03188"></a>03188       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(n) &amp;&amp; <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(n)-&gt;s[0] != <span class="charliteral">&apos;\0&apos;</span>) {
<a name="l03189"></a>03189         qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#adde522805efdb73abd4f84ba1b92a4b1">next_head_exact</a> = n;
<a name="l03190"></a>03190       }
<a name="l03191"></a>03191 <span class="preprocessor">#endif</span>
<a name="l03192"></a>03192 <span class="preprocessor"></span>      <span class="comment">/* automatic posseivation a*b ==&gt; (?&gt;a*)b */</span>
<a name="l03193"></a>03193       <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> &lt;= 1) {
<a name="l03194"></a>03194         <span class="keywordtype">int</span> ttype = <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>);
<a name="l03195"></a>03195         <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#aa9a85d9c346d35f5bba88a49fde214f2">IS_NODE_TYPE_SIMPLE</a>(ttype)) {
<a name="l03196"></a>03196           <a class="code" href="../../d0/d6e/struct___node.html">Node</a> *x, *y;
<a name="l03197"></a>03197           x = <a class="code" href="../../d0/d86/regcomp_8c.html#add066ca9799db63693400018f519903b">get_head_value_node</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, 0, reg);
<a name="l03198"></a>03198           <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(x)) {
<a name="l03199"></a>03199             y = <a class="code" href="../../d0/d86/regcomp_8c.html#add066ca9799db63693400018f519903b">get_head_value_node</a>(next_node,  0, reg);
<a name="l03200"></a>03200             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(y) &amp;&amp; <a class="code" href="../../d0/d86/regcomp_8c.html#a4ede6a38087ec536817b0bdf83fa40ac">is_not_included</a>(x, y, reg)) {
<a name="l03201"></a>03201               <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* en = <a class="code" href="../../d6/dda/regparse_8c.html#a91c33deefe09343b00b57031f7e8ff53">onig_node_new_enclose</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#a8a9f973f8fdb597a604757521ae63fe2">ENCLOSE_STOP_BACKTRACK</a>);
<a name="l03202"></a>03202               <a class="code" href="../../d6/d87/regint_8h.html#a17ebb2a12300dcf6d79916e357fae45a">CHECK_NULL_RETURN_MEMERR</a>(en);
<a name="l03203"></a>03203               <a class="code" href="../../d1/dfc/regparse_8h.html#a709b6af5e5f6789e8a1ae2406f12a668">SET_ENCLOSE_STATUS</a>(en, <a class="code" href="../../d1/dfc/regparse_8h.html#a9948e403fc7becde4d7f75a0bb0599ec">NST_STOP_BT_SIMPLE_REPEAT</a>);
<a name="l03204"></a>03204               <a class="code" href="../../d0/d86/regcomp_8c.html#aad26bfcdc08e74d911686afe96828d2d">swap_node</a>(node, en);
<a name="l03205"></a>03205               <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)-&gt;target = en;
<a name="l03206"></a>03206             }
<a name="l03207"></a>03207           }
<a name="l03208"></a>03208         }
<a name="l03209"></a>03209       }
<a name="l03210"></a>03210     }
<a name="l03211"></a>03211   }
<a name="l03212"></a>03212   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>) {
<a name="l03213"></a>03213     <a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* en = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node);
<a name="l03214"></a>03214     <span class="keywordflow">if</span> (en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ae554d8a44a852592c4b79ee3241645c7">type</a> == <a class="code" href="../../d1/dfc/regparse_8h.html#a32e44d8ddaca8fd4931a8c13677972ad">ENCLOSE_MEMORY</a>) {
<a name="l03215"></a>03215       node = en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>;
<a name="l03216"></a>03216       <span class="keywordflow">goto</span> retry;
<a name="l03217"></a>03217     }
<a name="l03218"></a>03218   }
<a name="l03219"></a>03219   <span class="keywordflow">return</span> 0;
<a name="l03220"></a>03220 }
<a name="l03221"></a>03221 
<a name="l03222"></a>03222 
<a name="l03223"></a>03223 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l03224"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ae9233509294fe5e5faa2024cc88300f9">03224</a> <a class="code" href="../../d0/d86/regcomp_8c.html#ae9233509294fe5e5faa2024cc88300f9">update_string_node_case_fold</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <a class="code" href="../../d0/d6e/struct___node.html">Node</a> *node)
<a name="l03225"></a>03225 {
<a name="l03226"></a>03226   <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *p, *q, *<a class="code" href="../../d6/d14/structre__registers.html#a1a42f8a5bcd4ac744e00132e2b80f8f0">end</a>, <a class="code" href="../../d6/da0/nkf-utf8_2nkf_8c.html#ac37f17a60c8b5533aac4840c681f62b8">buf</a>[<a class="code" href="../../d8/db3/oniguruma_8h.html#ab7642a8f7701d8153d1ff9ae15cadeae">ONIGENC_MBC_CASE_FOLD_MAXLEN</a>];
<a name="l03227"></a>03227   <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *sbuf, *ebuf, *sp;
<a name="l03228"></a>03228   <span class="keywordtype">int</span> r, i, <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l03229"></a>03229   <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> sbuf_size;
<a name="l03230"></a>03230   <a class="code" href="../../d2/db7/struct_str_node.html">StrNode</a>* sn = <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(node);
<a name="l03231"></a>03231 
<a name="l03232"></a>03232   end = sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a>;
<a name="l03233"></a>03233   sbuf_size = (end - sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>) * 2;
<a name="l03234"></a>03234   sbuf = (<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* )<a class="code" href="../../d8/db0/defines_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>(sbuf_size);
<a name="l03235"></a>03235   <a class="code" href="../../d6/d87/regint_8h.html#a17ebb2a12300dcf6d79916e357fae45a">CHECK_NULL_RETURN_MEMERR</a>(sbuf);
<a name="l03236"></a>03236   ebuf = sbuf + sbuf_size;
<a name="l03237"></a>03237 
<a name="l03238"></a>03238   sp = sbuf;
<a name="l03239"></a>03239   p = sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>;
<a name="l03240"></a>03240   <span class="keywordflow">while</span> (p &lt; end) {
<a name="l03241"></a>03241     len = <a class="code" href="../../d8/db3/oniguruma_8h.html#aa02e5671b7b6c3de2e895832e16746c6">ONIGENC_MBC_CASE_FOLD</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>, reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a4c22ffab8b6aec7bfa1fc8ccda3a1a27">case_fold_flag</a>, &amp;p, end, buf);
<a name="l03242"></a>03242     q = buf;
<a name="l03243"></a>03243     <span class="keywordflow">for</span> (i = 0; i &lt; len; i++) {
<a name="l03244"></a>03244       <span class="keywordflow">if</span> (sp &gt;= ebuf) {
<a name="l03245"></a>03245         sbuf = (<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* )<a class="code" href="../../d8/db0/defines_8h.html#a40740062faf2d95d4935112447c464ef">xrealloc</a>(sbuf, sbuf_size * 2);
<a name="l03246"></a>03246         <a class="code" href="../../d6/d87/regint_8h.html#a17ebb2a12300dcf6d79916e357fae45a">CHECK_NULL_RETURN_MEMERR</a>(sbuf);
<a name="l03247"></a>03247         sp = sbuf + sbuf_size;
<a name="l03248"></a>03248         sbuf_size *= 2;
<a name="l03249"></a>03249         ebuf = sbuf + sbuf_size;
<a name="l03250"></a>03250       }
<a name="l03251"></a>03251 
<a name="l03252"></a>03252       *sp++ = buf[i];
<a name="l03253"></a>03253     }
<a name="l03254"></a>03254   }
<a name="l03255"></a>03255 
<a name="l03256"></a>03256   r = <a class="code" href="../../d6/dda/regparse_8c.html#abe42195fece2fb89ab00f53fea58b091">onig_node_str_set</a>(node, sbuf, sp);
<a name="l03257"></a>03257   <span class="keywordflow">if</span> (r != 0) {
<a name="l03258"></a>03258     <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(sbuf);
<a name="l03259"></a>03259     <span class="keywordflow">return</span> r;
<a name="l03260"></a>03260   }
<a name="l03261"></a>03261 
<a name="l03262"></a>03262   <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(sbuf);
<a name="l03263"></a>03263   <span class="keywordflow">return</span> 0;
<a name="l03264"></a>03264 }
<a name="l03265"></a>03265 
<a name="l03266"></a>03266 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l03267"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a2970d7a550254e288e1213a953c3b906">03267</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a2970d7a550254e288e1213a953c3b906">expand_case_fold_make_rem_string</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>** rnode, <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *s, <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *<a class="code" href="../../d6/d14/structre__registers.html#a1a42f8a5bcd4ac744e00132e2b80f8f0">end</a>,
<a name="l03268"></a>03268                                  <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l03269"></a>03269 {
<a name="l03270"></a>03270   <span class="keywordtype">int</span> r;
<a name="l03271"></a>03271   <a class="code" href="../../d0/d6e/struct___node.html">Node</a> *node;
<a name="l03272"></a>03272 
<a name="l03273"></a>03273   node = <a class="code" href="../../d6/dda/regparse_8c.html#aa43586564529e972a0cc1e7fec489aff">onig_node_new_str</a>(s, end);
<a name="l03274"></a>03274   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(node)) <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a843ef92c5edce533877d3d65ef94a142">ONIGERR_MEMORY</a>;
<a name="l03275"></a>03275 
<a name="l03276"></a>03276   r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae9233509294fe5e5faa2024cc88300f9">update_string_node_case_fold</a>(reg, node);
<a name="l03277"></a>03277   <span class="keywordflow">if</span> (r != 0) {
<a name="l03278"></a>03278     <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(node);
<a name="l03279"></a>03279     <span class="keywordflow">return</span> r;
<a name="l03280"></a>03280   }
<a name="l03281"></a>03281 
<a name="l03282"></a>03282   <a class="code" href="../../d1/dfc/regparse_8h.html#a9ae80d34bf54720801a9f96840734944">NSTRING_SET_AMBIG</a>(node);
<a name="l03283"></a>03283   <a class="code" href="../../d1/dfc/regparse_8h.html#aff13589e40d148e0272743a7bdfb461a">NSTRING_SET_DONT_GET_OPT_INFO</a>(node);
<a name="l03284"></a>03284   *rnode = node;
<a name="l03285"></a>03285   <span class="keywordflow">return</span> 0;
<a name="l03286"></a>03286 }
<a name="l03287"></a>03287 
<a name="l03288"></a>03288 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l03289"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a6c23e4e142a4dc933c021ea8a4c21a87">03289</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a6c23e4e142a4dc933c021ea8a4c21a87">expand_case_fold_string_alt</a>(<span class="keywordtype">int</span> item_num, <a class="code" href="../../d3/d82/struct_onig_case_fold_code_item.html">OnigCaseFoldCodeItem</a> items[],
<a name="l03290"></a>03290                             <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *p, <span class="keywordtype">int</span> slen, <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *<a class="code" href="../../d6/d14/structre__registers.html#a1a42f8a5bcd4ac744e00132e2b80f8f0">end</a>,
<a name="l03291"></a>03291                             <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <a class="code" href="../../d0/d6e/struct___node.html">Node</a> **rnode)
<a name="l03292"></a>03292 {
<a name="l03293"></a>03293   <span class="keywordtype">int</span> r, i, j, <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>, varlen;
<a name="l03294"></a>03294   <a class="code" href="../../d0/d6e/struct___node.html">Node</a> *anode, *var_anode, *snode, *xnode, *an;
<a name="l03295"></a>03295   <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> <a class="code" href="../../d6/da0/nkf-utf8_2nkf_8c.html#ac37f17a60c8b5533aac4840c681f62b8">buf</a>[<a class="code" href="../../d8/db3/oniguruma_8h.html#a5eba220c99bf5d04cfe9dc51e744b747">ONIGENC_CODE_TO_MBC_MAXLEN</a>];
<a name="l03296"></a>03296 
<a name="l03297"></a>03297   *rnode = var_anode = <a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>;
<a name="l03298"></a>03298 
<a name="l03299"></a>03299   varlen = 0;
<a name="l03300"></a>03300   <span class="keywordflow">for</span> (i = 0; i &lt; item_num; i++) {
<a name="l03301"></a>03301     <span class="keywordflow">if</span> (items[i].byte_len != slen) {
<a name="l03302"></a>03302       varlen = 1;
<a name="l03303"></a>03303       <span class="keywordflow">break</span>;
<a name="l03304"></a>03304     }
<a name="l03305"></a>03305   }
<a name="l03306"></a>03306 
<a name="l03307"></a>03307   <span class="keywordflow">if</span> (varlen != 0) {
<a name="l03308"></a>03308     *rnode = var_anode = <a class="code" href="../../d6/dda/regparse_8c.html#a9ee0d6fbf2d9ed077e5c5831b93444a6">onig_node_new_alt</a>(<a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>, <a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>);
<a name="l03309"></a>03309     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(var_anode)) <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a843ef92c5edce533877d3d65ef94a142">ONIGERR_MEMORY</a>;
<a name="l03310"></a>03310 
<a name="l03311"></a>03311     xnode = <a class="code" href="../../d6/dda/regparse_8c.html#ab258e6fc3c655e2b50e770b6d1d8b939">onig_node_new_list</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l03312"></a>03312     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(xnode)) <span class="keywordflow">goto</span> mem_err;
<a name="l03313"></a>03313     <a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(var_anode) = xnode;
<a name="l03314"></a>03314 
<a name="l03315"></a>03315     anode = <a class="code" href="../../d6/dda/regparse_8c.html#a9ee0d6fbf2d9ed077e5c5831b93444a6">onig_node_new_alt</a>(<a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>, <a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>);
<a name="l03316"></a>03316     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(anode)) <span class="keywordflow">goto</span> mem_err;
<a name="l03317"></a>03317     <a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(xnode) = anode;
<a name="l03318"></a>03318   }
<a name="l03319"></a>03319   <span class="keywordflow">else</span> {
<a name="l03320"></a>03320     *rnode = anode = <a class="code" href="../../d6/dda/regparse_8c.html#a9ee0d6fbf2d9ed077e5c5831b93444a6">onig_node_new_alt</a>(<a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>, <a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>);
<a name="l03321"></a>03321     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(anode)) <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a843ef92c5edce533877d3d65ef94a142">ONIGERR_MEMORY</a>;
<a name="l03322"></a>03322   }
<a name="l03323"></a>03323 
<a name="l03324"></a>03324   snode = <a class="code" href="../../d6/dda/regparse_8c.html#aa43586564529e972a0cc1e7fec489aff">onig_node_new_str</a>(p, p + slen);
<a name="l03325"></a>03325   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(snode)) <span class="keywordflow">goto</span> mem_err;
<a name="l03326"></a>03326 
<a name="l03327"></a>03327   <a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(anode) = snode;
<a name="l03328"></a>03328 
<a name="l03329"></a>03329   <span class="keywordflow">for</span> (i = 0; i &lt; item_num; i++) {
<a name="l03330"></a>03330     snode = <a class="code" href="../../d6/dda/regparse_8c.html#aa43586564529e972a0cc1e7fec489aff">onig_node_new_str</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l03331"></a>03331     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(snode)) <span class="keywordflow">goto</span> mem_err;
<a name="l03332"></a>03332 
<a name="l03333"></a>03333     <span class="keywordflow">for</span> (j = 0; j &lt; items[i].<a class="code" href="../../d3/d82/struct_onig_case_fold_code_item.html#abb939986cfbf2fc043ce9858a0c2058e">code_len</a>; j++) {
<a name="l03334"></a>03334       len = <a class="code" href="../../d8/db3/oniguruma_8h.html#a203e2c46a8be4e9dccc830d1b408b83b">ONIGENC_CODE_TO_MBC</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>, items[i].<a class="code" href="../../d3/d82/struct_onig_case_fold_code_item.html#a28a8df75df6050d13d4dcfa467ecf79e">code</a>[j], buf);
<a name="l03335"></a>03335       <span class="keywordflow">if</span> (len &lt; 0) {
<a name="l03336"></a>03336         r = len;
<a name="l03337"></a>03337         <span class="keywordflow">goto</span> mem_err2;
<a name="l03338"></a>03338       }
<a name="l03339"></a>03339 
<a name="l03340"></a>03340       r = <a class="code" href="../../d6/dda/regparse_8c.html#a4c9f32699c8567f97bf22053473ec09e">onig_node_str_cat</a>(snode, buf, buf + len);
<a name="l03341"></a>03341       <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">goto</span> mem_err2;
<a name="l03342"></a>03342     }
<a name="l03343"></a>03343 
<a name="l03344"></a>03344     an = <a class="code" href="../../d6/dda/regparse_8c.html#a9ee0d6fbf2d9ed077e5c5831b93444a6">onig_node_new_alt</a>(<a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>, <a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>);
<a name="l03345"></a>03345     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(an)) {
<a name="l03346"></a>03346       <span class="keywordflow">goto</span> mem_err2;
<a name="l03347"></a>03347     }
<a name="l03348"></a>03348 
<a name="l03349"></a>03349     <span class="keywordflow">if</span> (items[i].byte_len != slen) {
<a name="l03350"></a>03350       <a class="code" href="../../d0/d6e/struct___node.html">Node</a> *rem;
<a name="l03351"></a>03351       <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *q = p + items[i].<a class="code" href="../../d3/d82/struct_onig_case_fold_code_item.html#ae0e3da5e535844ce63f8e048a9d85e8f">byte_len</a>;
<a name="l03352"></a>03352 
<a name="l03353"></a>03353       <span class="keywordflow">if</span> (q &lt; end) {
<a name="l03354"></a>03354         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a2970d7a550254e288e1213a953c3b906">expand_case_fold_make_rem_string</a>(&amp;rem, q, end, reg);
<a name="l03355"></a>03355         <span class="keywordflow">if</span> (r != 0) {
<a name="l03356"></a>03356           <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(an);
<a name="l03357"></a>03357           <span class="keywordflow">goto</span> mem_err2;
<a name="l03358"></a>03358         }
<a name="l03359"></a>03359 
<a name="l03360"></a>03360         xnode = <a class="code" href="../../d6/dda/regparse_8c.html#ac5dff6c5b4675f20090b2919bb08ad54">onig_node_list_add</a>(<a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>, snode);
<a name="l03361"></a>03361         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(xnode)) {
<a name="l03362"></a>03362           <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(an);
<a name="l03363"></a>03363           <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(rem);
<a name="l03364"></a>03364           <span class="keywordflow">goto</span> mem_err2;
<a name="l03365"></a>03365         }
<a name="l03366"></a>03366         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(<a class="code" href="../../d6/dda/regparse_8c.html#ac5dff6c5b4675f20090b2919bb08ad54">onig_node_list_add</a>(xnode, rem))) {
<a name="l03367"></a>03367           <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(an);
<a name="l03368"></a>03368           <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(xnode);
<a name="l03369"></a>03369           <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(rem);
<a name="l03370"></a>03370           <span class="keywordflow">goto</span> mem_err;
<a name="l03371"></a>03371         }
<a name="l03372"></a>03372 
<a name="l03373"></a>03373         <a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(an) = xnode;
<a name="l03374"></a>03374       }
<a name="l03375"></a>03375       <span class="keywordflow">else</span> {
<a name="l03376"></a>03376         <a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(an) = snode;
<a name="l03377"></a>03377       }
<a name="l03378"></a>03378 
<a name="l03379"></a>03379       <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(var_anode) = an;
<a name="l03380"></a>03380       var_anode = an;
<a name="l03381"></a>03381     }
<a name="l03382"></a>03382     <span class="keywordflow">else</span> {
<a name="l03383"></a>03383       <a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(an)     = snode;
<a name="l03384"></a>03384       <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(anode) = an;
<a name="l03385"></a>03385       anode = an;
<a name="l03386"></a>03386     }
<a name="l03387"></a>03387   }
<a name="l03388"></a>03388 
<a name="l03389"></a>03389   <span class="keywordflow">return</span> varlen;
<a name="l03390"></a>03390 
<a name="l03391"></a>03391  mem_err2:
<a name="l03392"></a>03392   <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(snode);
<a name="l03393"></a>03393 
<a name="l03394"></a>03394  mem_err:
<a name="l03395"></a>03395   <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(*rnode);
<a name="l03396"></a>03396 
<a name="l03397"></a>03397   <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a843ef92c5edce533877d3d65ef94a142">ONIGERR_MEMORY</a>;
<a name="l03398"></a>03398 }
<a name="l03399"></a>03399 
<a name="l03400"></a>03400 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l03401"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a548fcc47d5f94f7206802549da1a6fe8">03401</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a548fcc47d5f94f7206802549da1a6fe8">expand_case_fold_string</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l03402"></a>03402 {
<a name="l03403"></a>03403 <span class="preprocessor">#define THRESHOLD_CASE_FOLD_ALT_FOR_EXPANSION  8</span>
<a name="l03404"></a>03404 <span class="preprocessor"></span>
<a name="l03405"></a>03405   <span class="keywordtype">int</span> r, n, <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>, alt_num;
<a name="l03406"></a>03406   <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *start, *<a class="code" href="../../d6/d14/structre__registers.html#a1a42f8a5bcd4ac744e00132e2b80f8f0">end</a>, *p;
<a name="l03407"></a>03407   <a class="code" href="../../d0/d6e/struct___node.html">Node</a> *top_root, *root, *snode, *prev_node;
<a name="l03408"></a>03408   <a class="code" href="../../d3/d82/struct_onig_case_fold_code_item.html">OnigCaseFoldCodeItem</a> items[<a class="code" href="../../d8/db3/oniguruma_8h.html#ac28bb2f36ed83c00bf7c89f4bc042f8b">ONIGENC_GET_CASE_FOLD_CODES_MAX_NUM</a>];
<a name="l03409"></a>03409   <a class="code" href="../../d2/db7/struct_str_node.html">StrNode</a>* sn = <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(node);
<a name="l03410"></a>03410 
<a name="l03411"></a>03411   <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a25596e8076dc2d32a0b4f386656f0feb">NSTRING_IS_AMBIG</a>(node)) <span class="keywordflow">return</span> 0;
<a name="l03412"></a>03412 
<a name="l03413"></a>03413   start = sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>;
<a name="l03414"></a>03414   end   = sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a>;
<a name="l03415"></a>03415   <span class="keywordflow">if</span> (start &gt;= end) <span class="keywordflow">return</span> 0;
<a name="l03416"></a>03416 
<a name="l03417"></a>03417   r = 0;
<a name="l03418"></a>03418   top_root = root = prev_node = snode = <a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>;
<a name="l03419"></a>03419   alt_num = 1;
<a name="l03420"></a>03420   p = start;
<a name="l03421"></a>03421   <span class="keywordflow">while</span> (p &lt; end) {
<a name="l03422"></a>03422     n = <a class="code" href="../../d8/db3/oniguruma_8h.html#aa066ff2aa5e5d9442c4de2ccb86a4d44">ONIGENC_GET_CASE_FOLD_CODES_BY_STR</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>, reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a4c22ffab8b6aec7bfa1fc8ccda3a1a27">case_fold_flag</a>,
<a name="l03423"></a>03423                                            p, end, items);
<a name="l03424"></a>03424     <span class="keywordflow">if</span> (n &lt; 0) {
<a name="l03425"></a>03425       r = n;
<a name="l03426"></a>03426       <span class="keywordflow">goto</span> <a class="code" href="../../d5/df2/win32_8c.html#a6ce68847c12434f60d1b2654a3dc3409">err</a>;
<a name="l03427"></a>03427     }
<a name="l03428"></a>03428 
<a name="l03429"></a>03429     len = <a class="code" href="../../d3/d09/ripper_8y.html#ae9f8530a4c9ec89ae8d62ce5b4410aad">enclen</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>, p, end);
<a name="l03430"></a>03430 
<a name="l03431"></a>03431     <span class="keywordflow">if</span> (n == 0) {
<a name="l03432"></a>03432       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(snode)) {
<a name="l03433"></a>03433         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(root) &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(prev_node)) {
<a name="l03434"></a>03434           top_root = root = <a class="code" href="../../d6/dda/regparse_8c.html#ac5dff6c5b4675f20090b2919bb08ad54">onig_node_list_add</a>(<a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>, prev_node);
<a name="l03435"></a>03435           <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(root)) {
<a name="l03436"></a>03436             <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(prev_node);
<a name="l03437"></a>03437             <span class="keywordflow">goto</span> mem_err;
<a name="l03438"></a>03438           }
<a name="l03439"></a>03439         }
<a name="l03440"></a>03440 
<a name="l03441"></a>03441         prev_node = snode = <a class="code" href="../../d6/dda/regparse_8c.html#aa43586564529e972a0cc1e7fec489aff">onig_node_new_str</a>(<a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l03442"></a>03442         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(snode)) <span class="keywordflow">goto</span> mem_err;
<a name="l03443"></a>03443         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(root)) {
<a name="l03444"></a>03444           <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(<a class="code" href="../../d6/dda/regparse_8c.html#ac5dff6c5b4675f20090b2919bb08ad54">onig_node_list_add</a>(root, snode))) {
<a name="l03445"></a>03445             <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(snode);
<a name="l03446"></a>03446             <span class="keywordflow">goto</span> mem_err;
<a name="l03447"></a>03447           }
<a name="l03448"></a>03448         }
<a name="l03449"></a>03449       }
<a name="l03450"></a>03450 
<a name="l03451"></a>03451       r = <a class="code" href="../../d6/dda/regparse_8c.html#a4c9f32699c8567f97bf22053473ec09e">onig_node_str_cat</a>(snode, p, p + len);
<a name="l03452"></a>03452       <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">goto</span> <a class="code" href="../../d5/df2/win32_8c.html#a6ce68847c12434f60d1b2654a3dc3409">err</a>;
<a name="l03453"></a>03453     }
<a name="l03454"></a>03454     <span class="keywordflow">else</span> {
<a name="l03455"></a>03455       alt_num *= (n + 1);
<a name="l03456"></a>03456       <span class="keywordflow">if</span> (alt_num &gt; <a class="code" href="../../d0/d86/regcomp_8c.html#a364f45f6d4118677c55a92e49f96443d">THRESHOLD_CASE_FOLD_ALT_FOR_EXPANSION</a>) <span class="keywordflow">break</span>;
<a name="l03457"></a>03457 
<a name="l03458"></a>03458       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(root) &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(prev_node)) {
<a name="l03459"></a>03459         top_root = root = <a class="code" href="../../d6/dda/regparse_8c.html#ac5dff6c5b4675f20090b2919bb08ad54">onig_node_list_add</a>(<a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>, prev_node);
<a name="l03460"></a>03460         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(root)) {
<a name="l03461"></a>03461           <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(prev_node);
<a name="l03462"></a>03462           <span class="keywordflow">goto</span> mem_err;
<a name="l03463"></a>03463         }
<a name="l03464"></a>03464       }
<a name="l03465"></a>03465 
<a name="l03466"></a>03466       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a6c23e4e142a4dc933c021ea8a4c21a87">expand_case_fold_string_alt</a>(n, items, p, len, end, reg, &amp;prev_node);
<a name="l03467"></a>03467       <span class="keywordflow">if</span> (r &lt; 0) <span class="keywordflow">goto</span> mem_err;
<a name="l03468"></a>03468       <span class="keywordflow">if</span> (r == 1) {
<a name="l03469"></a>03469         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(root)) {
<a name="l03470"></a>03470           top_root = prev_node;
<a name="l03471"></a>03471         }
<a name="l03472"></a>03472         <span class="keywordflow">else</span> {
<a name="l03473"></a>03473           <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(<a class="code" href="../../d6/dda/regparse_8c.html#ac5dff6c5b4675f20090b2919bb08ad54">onig_node_list_add</a>(root, prev_node))) {
<a name="l03474"></a>03474             <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(prev_node);
<a name="l03475"></a>03475             <span class="keywordflow">goto</span> mem_err;
<a name="l03476"></a>03476           }
<a name="l03477"></a>03477         }
<a name="l03478"></a>03478 
<a name="l03479"></a>03479         root = <a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(prev_node);
<a name="l03480"></a>03480       }
<a name="l03481"></a>03481       <span class="keywordflow">else</span> { <span class="comment">/* r == 0 */</span>
<a name="l03482"></a>03482         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(root)) {
<a name="l03483"></a>03483           <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(<a class="code" href="../../d6/dda/regparse_8c.html#ac5dff6c5b4675f20090b2919bb08ad54">onig_node_list_add</a>(root, prev_node))) {
<a name="l03484"></a>03484             <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(prev_node);
<a name="l03485"></a>03485             <span class="keywordflow">goto</span> mem_err;
<a name="l03486"></a>03486           }
<a name="l03487"></a>03487         }
<a name="l03488"></a>03488       }
<a name="l03489"></a>03489 
<a name="l03490"></a>03490       snode = <a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>;
<a name="l03491"></a>03491     }
<a name="l03492"></a>03492 
<a name="l03493"></a>03493     p += len;
<a name="l03494"></a>03494   }
<a name="l03495"></a>03495 
<a name="l03496"></a>03496   <span class="keywordflow">if</span> (p &lt; end) {
<a name="l03497"></a>03497     <a class="code" href="../../d0/d6e/struct___node.html">Node</a> *srem;
<a name="l03498"></a>03498 
<a name="l03499"></a>03499     r = <a class="code" href="../../d0/d86/regcomp_8c.html#a2970d7a550254e288e1213a953c3b906">expand_case_fold_make_rem_string</a>(&amp;srem, p, end, reg);
<a name="l03500"></a>03500     <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">goto</span> mem_err;
<a name="l03501"></a>03501 
<a name="l03502"></a>03502     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(prev_node) &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(root)) {
<a name="l03503"></a>03503       top_root = root = <a class="code" href="../../d6/dda/regparse_8c.html#ac5dff6c5b4675f20090b2919bb08ad54">onig_node_list_add</a>(<a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>, prev_node);
<a name="l03504"></a>03504       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(root)) {
<a name="l03505"></a>03505         <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(srem);
<a name="l03506"></a>03506         <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(prev_node);
<a name="l03507"></a>03507         <span class="keywordflow">goto</span> mem_err;
<a name="l03508"></a>03508       }
<a name="l03509"></a>03509     }
<a name="l03510"></a>03510 
<a name="l03511"></a>03511     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(root)) {
<a name="l03512"></a>03512       prev_node = srem;
<a name="l03513"></a>03513     }
<a name="l03514"></a>03514     <span class="keywordflow">else</span> {
<a name="l03515"></a>03515       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(<a class="code" href="../../d6/dda/regparse_8c.html#ac5dff6c5b4675f20090b2919bb08ad54">onig_node_list_add</a>(root, srem))) {
<a name="l03516"></a>03516         <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(srem);
<a name="l03517"></a>03517         <span class="keywordflow">goto</span> mem_err;
<a name="l03518"></a>03518       }
<a name="l03519"></a>03519     }
<a name="l03520"></a>03520   }
<a name="l03521"></a>03521 
<a name="l03522"></a>03522   <span class="comment">/* ending */</span>
<a name="l03523"></a>03523   top_root = (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(top_root) ? top_root : prev_node);
<a name="l03524"></a>03524   <a class="code" href="../../d0/d86/regcomp_8c.html#aad26bfcdc08e74d911686afe96828d2d">swap_node</a>(node, top_root);
<a name="l03525"></a>03525   <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(top_root);
<a name="l03526"></a>03526   <span class="keywordflow">return</span> 0;
<a name="l03527"></a>03527 
<a name="l03528"></a>03528  mem_err:
<a name="l03529"></a>03529   r = <a class="code" href="../../d8/db3/oniguruma_8h.html#a843ef92c5edce533877d3d65ef94a142">ONIGERR_MEMORY</a>;
<a name="l03530"></a>03530 
<a name="l03531"></a>03531  <a class="code" href="../../d5/df2/win32_8c.html#a6ce68847c12434f60d1b2654a3dc3409">err</a>:
<a name="l03532"></a>03532   <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(top_root);
<a name="l03533"></a>03533   <span class="keywordflow">return</span> r;
<a name="l03534"></a>03534 }
<a name="l03535"></a>03535 
<a name="l03536"></a>03536 
<a name="l03537"></a>03537 <span class="preprocessor">#ifdef USE_COMBINATION_EXPLOSION_CHECK</span>
<a name="l03538"></a>03538 <span class="preprocessor"></span>
<a name="l03539"></a>03539 <span class="preprocessor">#define CEC_THRES_NUM_BIG_REPEAT         512</span>
<a name="l03540"></a>03540 <span class="preprocessor"></span><span class="preprocessor">#define CEC_INFINITE_NUM          0x7fffffff</span>
<a name="l03541"></a>03541 <span class="preprocessor"></span>
<a name="l03542"></a>03542 <span class="preprocessor">#define CEC_IN_INFINITE_REPEAT    (1&lt;&lt;0)</span>
<a name="l03543"></a>03543 <span class="preprocessor"></span><span class="preprocessor">#define CEC_IN_FINITE_REPEAT      (1&lt;&lt;1)</span>
<a name="l03544"></a>03544 <span class="preprocessor"></span><span class="preprocessor">#define CEC_CONT_BIG_REPEAT       (1&lt;&lt;2)</span>
<a name="l03545"></a>03545 <span class="preprocessor"></span>
<a name="l03546"></a>03546 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l03547"></a>03547 setup_comb_exp_check(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <span class="keywordtype">int</span> <a class="code" href="../../d5/d1d/gb18030_8c.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>, <a class="code" href="../../d6/dbe/struct_scan_env.html">ScanEnv</a>* env)
<a name="l03548"></a>03548 {
<a name="l03549"></a>03549   <span class="keywordtype">int</span> type;
<a name="l03550"></a>03550   <span class="keywordtype">int</span> r = state;
<a name="l03551"></a>03551 
<a name="l03552"></a>03552   type = <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node);
<a name="l03553"></a>03553   <span class="keywordflow">switch</span> (type) {
<a name="l03554"></a>03554   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l03555"></a>03555     {
<a name="l03556"></a>03556       <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* <a class="code" href="../../d7/dc0/parse_8y.html#a71f8b6ffdc0cc58ffd989c3162fb2bcf">prev</a> = <a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>;
<a name="l03557"></a>03557       <span class="keywordflow">do</span> {
<a name="l03558"></a>03558         r = setup_comb_exp_check(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), r, env);
<a name="l03559"></a>03559         prev = <a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node);
<a name="l03560"></a>03560       } <span class="keywordflow">while</span> (r &gt;= 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l03561"></a>03561     }
<a name="l03562"></a>03562     <span class="keywordflow">break</span>;
<a name="l03563"></a>03563 
<a name="l03564"></a>03564   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l03565"></a>03565     {
<a name="l03566"></a>03566       <span class="keywordtype">int</span> ret;
<a name="l03567"></a>03567       <span class="keywordflow">do</span> {
<a name="l03568"></a>03568         ret = setup_comb_exp_check(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), state, env);
<a name="l03569"></a>03569         r |= ret;
<a name="l03570"></a>03570       } <span class="keywordflow">while</span> (ret &gt;= 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l03571"></a>03571     }
<a name="l03572"></a>03572     <span class="keywordflow">break</span>;
<a name="l03573"></a>03573 
<a name="l03574"></a>03574   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l03575"></a>03575     {
<a name="l03576"></a>03576       <span class="keywordtype">int</span> child_state = state;
<a name="l03577"></a>03577       <span class="keywordtype">int</span> add_state = 0;
<a name="l03578"></a>03578       <a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* qn = <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node);
<a name="l03579"></a>03579       <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* target = qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>;
<a name="l03580"></a>03580       <span class="keywordtype">int</span> var_num;
<a name="l03581"></a>03581 
<a name="l03582"></a>03582       <span class="keywordflow">if</span> (! <a class="code" href="../../d6/d87/regint_8h.html#a7b7f11d4b2705496b7711598403d4f72">IS_REPEAT_INFINITE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>)) {
<a name="l03583"></a>03583         <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> &gt; 1) {
<a name="l03584"></a>03584           <span class="comment">/* {0,1}, {1,1} are allowed */</span>
<a name="l03585"></a>03585           child_state |= CEC_IN_FINITE_REPEAT;
<a name="l03586"></a>03586 
<a name="l03587"></a>03587           <span class="comment">/* check (a*){n,m}, (a+){n,m} =&gt; (a*){n,n}, (a+){n,n} */</span>
<a name="l03588"></a>03588           <span class="keywordflow">if</span> (env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a88f3a0da2aa91b57436970ef7aa062f6">backrefed_mem</a> == 0) {
<a name="l03589"></a>03589             <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>) == <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>) {
<a name="l03590"></a>03590               <a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* en = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>);
<a name="l03591"></a>03591               <span class="keywordflow">if</span> (en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ae554d8a44a852592c4b79ee3241645c7">type</a> == <a class="code" href="../../d1/dfc/regparse_8h.html#a32e44d8ddaca8fd4931a8c13677972ad">ENCLOSE_MEMORY</a>) {
<a name="l03592"></a>03592                 <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>) == <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>) {
<a name="l03593"></a>03593                   <a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* q = <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>);
<a name="l03594"></a>03594                   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a7b7f11d4b2705496b7711598403d4f72">IS_REPEAT_INFINITE</a>(q-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>)
<a name="l03595"></a>03595                       &amp;&amp; q-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a> == qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a>) {
<a name="l03596"></a>03596                     qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> = (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> == 0 ? 1 : qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>);
<a name="l03597"></a>03597                     <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> == 1)
<a name="l03598"></a>03598                       child_state = state;
<a name="l03599"></a>03599                   }
<a name="l03600"></a>03600                 }
<a name="l03601"></a>03601               }
<a name="l03602"></a>03602             }
<a name="l03603"></a>03603           }
<a name="l03604"></a>03604         }
<a name="l03605"></a>03605       }
<a name="l03606"></a>03606 
<a name="l03607"></a>03607       <span class="keywordflow">if</span> (state &amp; CEC_IN_FINITE_REPEAT) {
<a name="l03608"></a>03608         qn-&gt;comb_exp_check_num = -1;
<a name="l03609"></a>03609       }
<a name="l03610"></a>03610       <span class="keywordflow">else</span> {
<a name="l03611"></a>03611         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a7b7f11d4b2705496b7711598403d4f72">IS_REPEAT_INFINITE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>)) {
<a name="l03612"></a>03612           var_num = CEC_INFINITE_NUM;
<a name="l03613"></a>03613           child_state |= CEC_IN_INFINITE_REPEAT;
<a name="l03614"></a>03614         }
<a name="l03615"></a>03615         <span class="keywordflow">else</span> {
<a name="l03616"></a>03616           var_num = qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> - qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>;
<a name="l03617"></a>03617         }
<a name="l03618"></a>03618 
<a name="l03619"></a>03619         <span class="keywordflow">if</span> (var_num &gt;= CEC_THRES_NUM_BIG_REPEAT)
<a name="l03620"></a>03620           add_state |= CEC_CONT_BIG_REPEAT;
<a name="l03621"></a>03621 
<a name="l03622"></a>03622         <span class="keywordflow">if</span> (((state &amp; CEC_IN_INFINITE_REPEAT) != 0 &amp;&amp; var_num != 0) ||
<a name="l03623"></a>03623             ((state &amp; CEC_CONT_BIG_REPEAT) != 0 &amp;&amp;
<a name="l03624"></a>03624              var_num &gt;= CEC_THRES_NUM_BIG_REPEAT)) {
<a name="l03625"></a>03625           <span class="keywordflow">if</span> (qn-&gt;comb_exp_check_num == 0) {
<a name="l03626"></a>03626             env-&gt;num_comb_exp_check++;
<a name="l03627"></a>03627             qn-&gt;comb_exp_check_num = env-&gt;num_comb_exp_check;
<a name="l03628"></a>03628             <span class="keywordflow">if</span> (env-&gt;curr_max_regnum &gt; env-&gt;comb_exp_max_regnum)
<a name="l03629"></a>03629               env-&gt;comb_exp_max_regnum = env-&gt;curr_max_regnum;
<a name="l03630"></a>03630           }
<a name="l03631"></a>03631         }
<a name="l03632"></a>03632       }
<a name="l03633"></a>03633 
<a name="l03634"></a>03634       r = setup_comb_exp_check(target, child_state, env);
<a name="l03635"></a>03635       r |= add_state;
<a name="l03636"></a>03636     }
<a name="l03637"></a>03637     <span class="keywordflow">break</span>;
<a name="l03638"></a>03638 
<a name="l03639"></a>03639   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l03640"></a>03640     {
<a name="l03641"></a>03641       <a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* en = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node);
<a name="l03642"></a>03642 
<a name="l03643"></a>03643       <span class="keywordflow">switch</span> (en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ae554d8a44a852592c4b79ee3241645c7">type</a>) {
<a name="l03644"></a>03644       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a32e44d8ddaca8fd4931a8c13677972ad">ENCLOSE_MEMORY</a>:
<a name="l03645"></a>03645         {
<a name="l03646"></a>03646           <span class="keywordflow">if</span> (env-&gt;curr_max_regnum &lt; en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#adda9a1fd356c9b102c09a3c596583b81">regnum</a>)
<a name="l03647"></a>03647             env-&gt;curr_max_regnum = en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#adda9a1fd356c9b102c09a3c596583b81">regnum</a>;
<a name="l03648"></a>03648 
<a name="l03649"></a>03649           r = setup_comb_exp_check(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, state, env);
<a name="l03650"></a>03650         }
<a name="l03651"></a>03651         <span class="keywordflow">break</span>;
<a name="l03652"></a>03652 
<a name="l03653"></a>03653       <span class="keywordflow">default</span>:
<a name="l03654"></a>03654         r = setup_comb_exp_check(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, state, env);
<a name="l03655"></a>03655         <span class="keywordflow">break</span>;
<a name="l03656"></a>03656       }
<a name="l03657"></a>03657     }
<a name="l03658"></a>03658     <span class="keywordflow">break</span>;
<a name="l03659"></a>03659 
<a name="l03660"></a>03660 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l03661"></a>03661 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a35167bbf195155481ee5cbcae152d0f9">NT_CALL</a>:
<a name="l03662"></a>03662     <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a250cd70778b5de06453ffa5e16c17daf">IS_CALL_RECURSION</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node)))
<a name="l03663"></a>03663       env-&gt;has_recursion = 1;
<a name="l03664"></a>03664     <span class="keywordflow">else</span>
<a name="l03665"></a>03665       r = setup_comb_exp_check(<a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node)-&gt;target, state, env);
<a name="l03666"></a>03666     <span class="keywordflow">break</span>;
<a name="l03667"></a>03667 <span class="preprocessor">#endif</span>
<a name="l03668"></a>03668 <span class="preprocessor"></span>
<a name="l03669"></a>03669   <span class="keywordflow">default</span>:
<a name="l03670"></a>03670     <span class="keywordflow">break</span>;
<a name="l03671"></a>03671   }
<a name="l03672"></a>03672 
<a name="l03673"></a>03673   <span class="keywordflow">return</span> r;
<a name="l03674"></a>03674 }
<a name="l03675"></a>03675 <span class="preprocessor">#endif</span>
<a name="l03676"></a>03676 <span class="preprocessor"></span>
<a name="l03677"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ae44ad561c845177c6f139610839024d7">03677</a> <span class="preprocessor">#define IN_ALT        (1&lt;&lt;0)</span>
<a name="l03678"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a91ad90a8594a098cf789e9478c43ffe0">03678</a> <span class="preprocessor"></span><span class="preprocessor">#define IN_NOT        (1&lt;&lt;1)</span>
<a name="l03679"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a82d623a103adc51c30beb0709e20207d">03679</a> <span class="preprocessor"></span><span class="preprocessor">#define IN_REPEAT     (1&lt;&lt;2)</span>
<a name="l03680"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a068e4e04daa30ec118ce79c7bfa9e07e">03680</a> <span class="preprocessor"></span><span class="preprocessor">#define IN_VAR_REPEAT (1&lt;&lt;3)</span>
<a name="l03681"></a>03681 <span class="preprocessor"></span>
<a name="l03682"></a>03682 <span class="comment">/* setup_tree does the following work.</span>
<a name="l03683"></a>03683 <span class="comment"> 1. check empty loop. (set qn-&gt;target_empty_info)</span>
<a name="l03684"></a>03684 <span class="comment"> 2. expand ignore-case in char class.</span>
<a name="l03685"></a>03685 <span class="comment"> 3. set memory status bit flags. (reg-&gt;mem_stats)</span>
<a name="l03686"></a>03686 <span class="comment"> 4. set qn-&gt;head_exact for [push, exact] -&gt; [push_or_jump_exact1, exact].</span>
<a name="l03687"></a>03687 <span class="comment"> 5. find invalid patterns in look-behind.</span>
<a name="l03688"></a>03688 <span class="comment"> 6. expand repeated string.</span>
<a name="l03689"></a>03689 <span class="comment"> */</span>
<a name="l03690"></a>03690 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l03691"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a59640e9a6551bf5e14242534adc9ddbc">03691</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a59640e9a6551bf5e14242534adc9ddbc">setup_tree</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keywordtype">int</span> state, <a class="code" href="../../d6/dbe/struct_scan_env.html">ScanEnv</a>* env)
<a name="l03692"></a>03692 {
<a name="l03693"></a>03693   <span class="keywordtype">int</span> type;
<a name="l03694"></a>03694   <span class="keywordtype">int</span> r = 0;
<a name="l03695"></a>03695 
<a name="l03696"></a>03696 restart:
<a name="l03697"></a>03697   type = <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node);
<a name="l03698"></a>03698   <span class="keywordflow">switch</span> (type) {
<a name="l03699"></a>03699   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l03700"></a>03700     {
<a name="l03701"></a>03701       <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* prev = <a class="code" href="../../d3/d7f/gram_8c.html#ac00d2982d51115efbe8a13840d47b7a7">NULL_NODE</a>;
<a name="l03702"></a>03702       <span class="keywordflow">do</span> {
<a name="l03703"></a>03703         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a59640e9a6551bf5e14242534adc9ddbc">setup_tree</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), reg, state, env);
<a name="l03704"></a>03704         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(prev) &amp;&amp; r == 0) {
<a name="l03705"></a>03705           r = <a class="code" href="../../d0/d86/regcomp_8c.html#a965874fe7fa195fb13c239f5a53ca115">next_setup</a>(prev, <a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), reg);
<a name="l03706"></a>03706         }
<a name="l03707"></a>03707         prev = <a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node);
<a name="l03708"></a>03708       } <span class="keywordflow">while</span> (r == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l03709"></a>03709     }
<a name="l03710"></a>03710     <span class="keywordflow">break</span>;
<a name="l03711"></a>03711 
<a name="l03712"></a>03712   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l03713"></a>03713     <span class="keywordflow">do</span> {
<a name="l03714"></a>03714       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a59640e9a6551bf5e14242534adc9ddbc">setup_tree</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), reg, (state | <a class="code" href="../../d0/d86/regcomp_8c.html#ae44ad561c845177c6f139610839024d7">IN_ALT</a>), env);
<a name="l03715"></a>03715     } <span class="keywordflow">while</span> (r == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node)));
<a name="l03716"></a>03716     <span class="keywordflow">break</span>;
<a name="l03717"></a>03717 
<a name="l03718"></a>03718   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a98cbe6da0636f892e4de517d350a2938">NT_CCLASS</a>:
<a name="l03719"></a>03719     <span class="keywordflow">break</span>;
<a name="l03720"></a>03720 
<a name="l03721"></a>03721   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>:
<a name="l03722"></a>03722     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#ae42e344c5336b241948a7a47c99d6533">IS_IGNORECASE</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a>) &amp;&amp; !<a class="code" href="../../d1/dfc/regparse_8h.html#ae9f2e7348c7dca167e63f949aba51715">NSTRING_IS_RAW</a>(node)) {
<a name="l03723"></a>03723       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a548fcc47d5f94f7206802549da1a6fe8">expand_case_fold_string</a>(node, reg);
<a name="l03724"></a>03724     }
<a name="l03725"></a>03725     <span class="keywordflow">break</span>;
<a name="l03726"></a>03726 
<a name="l03727"></a>03727   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a542a2658d0f164eea8bc384ab01549d4">NT_CTYPE</a>:
<a name="l03728"></a>03728   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a21a7fcbf4a9c872540490d92b9c29813">NT_CANY</a>:
<a name="l03729"></a>03729     <span class="keywordflow">break</span>;
<a name="l03730"></a>03730 
<a name="l03731"></a>03731 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l03732"></a>03732 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a35167bbf195155481ee5cbcae152d0f9">NT_CALL</a>:
<a name="l03733"></a>03733     <span class="keywordflow">break</span>;
<a name="l03734"></a>03734 <span class="preprocessor">#endif</span>
<a name="l03735"></a>03735 <span class="preprocessor"></span>
<a name="l03736"></a>03736   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ac1d2a54cfe6dfa9104b4bfb8d06b8aeb">NT_BREF</a>:
<a name="l03737"></a>03737     {
<a name="l03738"></a>03738       <span class="keywordtype">int</span> i;
<a name="l03739"></a>03739       <span class="keywordtype">int</span>* p;
<a name="l03740"></a>03740       <a class="code" href="../../d0/d6e/struct___node.html">Node</a>** nodes = <a class="code" href="../../d1/dfc/regparse_8h.html#a82066fdd1d2abdcc23ae01f55bfbe321">SCANENV_MEM_NODES</a>(env);
<a name="l03741"></a>03741       <a class="code" href="../../db/dbf/struct_b_ref_node.html">BRefNode</a>* br = <a class="code" href="../../d1/dfc/regparse_8h.html#a38215823f6ab7e63e919eae3bfa79bfa">NBREF</a>(node);
<a name="l03742"></a>03742       p = <a class="code" href="../../d1/dfc/regparse_8h.html#af7acd0d16d2a338ffba1881e85a610b1">BACKREFS_P</a>(br);
<a name="l03743"></a>03743       <span class="keywordflow">for</span> (i = 0; i &lt; br-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#ae790ac554909ac2940d464ac98019912">back_num</a>; i++) {
<a name="l03744"></a>03744         <span class="keywordflow">if</span> (p[i] &gt; env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a5f71c0a538e047bc63962df55ff304b0">num_mem</a>)  <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#adbf6f094cfd29f00edfcf0484dcbe7fa">ONIGERR_INVALID_BACKREF</a>;
<a name="l03745"></a>03745         <a class="code" href="../../d6/d87/regint_8h.html#a69d9bf37ca95acb1bd2f662556fc529b">BIT_STATUS_ON_AT</a>(env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a88f3a0da2aa91b57436970ef7aa062f6">backrefed_mem</a>, p[i]);
<a name="l03746"></a>03746         <a class="code" href="../../d6/d87/regint_8h.html#a69d9bf37ca95acb1bd2f662556fc529b">BIT_STATUS_ON_AT</a>(env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a5ae5ce2ec7e6fe61e234fa4fd05ee1e4">bt_mem_start</a>, p[i]);
<a name="l03747"></a>03747 <span class="preprocessor">#ifdef USE_BACKREF_WITH_LEVEL</span>
<a name="l03748"></a>03748 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a541503207bbeafefa86e82b117db414f">IS_BACKREF_NEST_LEVEL</a>(br)) {
<a name="l03749"></a>03749           <a class="code" href="../../d6/d87/regint_8h.html#a69d9bf37ca95acb1bd2f662556fc529b">BIT_STATUS_ON_AT</a>(env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a11a89b745f9dac826110ee1671ca0edd">bt_mem_end</a>, p[i]);
<a name="l03750"></a>03750         }
<a name="l03751"></a>03751 <span class="preprocessor">#endif</span>
<a name="l03752"></a>03752 <span class="preprocessor"></span>        <a class="code" href="../../d1/dfc/regparse_8h.html#a709b6af5e5f6789e8a1ae2406f12a668">SET_ENCLOSE_STATUS</a>(nodes[p[i]], <a class="code" href="../../d1/dfc/regparse_8h.html#a2082f6e70d86ff50485eae8854599ae2">NST_MEM_BACKREFED</a>);
<a name="l03753"></a>03753       }
<a name="l03754"></a>03754     }
<a name="l03755"></a>03755     <span class="keywordflow">break</span>;
<a name="l03756"></a>03756 
<a name="l03757"></a>03757   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l03758"></a>03758     {
<a name="l03759"></a>03759       <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> d;
<a name="l03760"></a>03760       <a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* qn = <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node);
<a name="l03761"></a>03761       <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* target = qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>;
<a name="l03762"></a>03762 
<a name="l03763"></a>03763       <span class="keywordflow">if</span> ((state &amp; <a class="code" href="../../d0/d86/regcomp_8c.html#a82d623a103adc51c30beb0709e20207d">IN_REPEAT</a>) != 0) {
<a name="l03764"></a>03764         qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#adf0012100439ccd999435f0f27042798">state</a> |= <a class="code" href="../../d1/dfc/regparse_8h.html#a493914509e096a07795ffc4971e2680f">NST_IN_REPEAT</a>;
<a name="l03765"></a>03765       }
<a name="l03766"></a>03766 
<a name="l03767"></a>03767       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a7b7f11d4b2705496b7711598403d4f72">IS_REPEAT_INFINITE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>) || qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> &gt;= 1) {
<a name="l03768"></a>03768         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af82e9debd7e89c1c386efbfd438ac112">get_min_match_length</a>(target, &amp;d, env);
<a name="l03769"></a>03769         <span class="keywordflow">if</span> (r) <span class="keywordflow">break</span>;
<a name="l03770"></a>03770         <span class="keywordflow">if</span> (d == 0) {
<a name="l03771"></a>03771           qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a3fe211fb928a1bcc58f4263cabc66f3d">target_empty_info</a> = <a class="code" href="../../d1/dfc/regparse_8h.html#a986a5ef780a2ad8c4b93df2d58f0f615">NQ_TARGET_IS_EMPTY</a>;
<a name="l03772"></a>03772 <span class="preprocessor">#ifdef USE_MONOMANIAC_CHECK_CAPTURES_IN_ENDLESS_REPEAT</span>
<a name="l03773"></a>03773 <span class="preprocessor"></span>          r = quantifiers_memory_node_info(target);
<a name="l03774"></a>03774           <span class="keywordflow">if</span> (r &lt; 0) <span class="keywordflow">break</span>;
<a name="l03775"></a>03775           <span class="keywordflow">if</span> (r &gt; 0) {
<a name="l03776"></a>03776             qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a3fe211fb928a1bcc58f4263cabc66f3d">target_empty_info</a> = r;
<a name="l03777"></a>03777           }
<a name="l03778"></a>03778 <span class="preprocessor">#endif</span>
<a name="l03779"></a>03779 <span class="preprocessor"></span><span class="preprocessor">#if 0</span>
<a name="l03780"></a>03780 <span class="preprocessor"></span>          r = <a class="code" href="../../d0/d86/regcomp_8c.html#a06bdc00e72ec725ddbca67672abc87a3">get_max_match_length</a>(target, &amp;d, env);
<a name="l03781"></a>03781           <span class="keywordflow">if</span> (r == 0 &amp;&amp; d == 0) {
<a name="l03782"></a>03782             <span class="comment">/*  ()* ==&gt; ()?, ()+ ==&gt; ()  */</span>
<a name="l03783"></a>03783             qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> = 1;
<a name="l03784"></a>03784             <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> &gt; 1) qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> = 1;
<a name="l03785"></a>03785             <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(target) == <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>) {
<a name="l03786"></a>03786               qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> = qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> = 0;  <span class="comment">/* /(?:)+/ ==&gt; // */</span>
<a name="l03787"></a>03787             }
<a name="l03788"></a>03788           }
<a name="l03789"></a>03789 <span class="preprocessor">#endif</span>
<a name="l03790"></a>03790 <span class="preprocessor"></span>        }
<a name="l03791"></a>03791       }
<a name="l03792"></a>03792 
<a name="l03793"></a>03793       state |= IN_REPEAT;
<a name="l03794"></a>03794       <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> != qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>)
<a name="l03795"></a>03795         state |= <a class="code" href="../../d0/d86/regcomp_8c.html#a068e4e04daa30ec118ce79c7bfa9e07e">IN_VAR_REPEAT</a>;
<a name="l03796"></a>03796       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a59640e9a6551bf5e14242534adc9ddbc">setup_tree</a>(target, reg, state, env);
<a name="l03797"></a>03797       <span class="keywordflow">if</span> (r) <span class="keywordflow">break</span>;
<a name="l03798"></a>03798 
<a name="l03799"></a>03799       <span class="comment">/* expand string */</span>
<a name="l03800"></a>03800 <span class="preprocessor">#define EXPAND_STRING_MAX_LENGTH  100</span>
<a name="l03801"></a>03801 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(target) == <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>) {
<a name="l03802"></a>03802         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d87/regint_8h.html#a7b7f11d4b2705496b7711598403d4f72">IS_REPEAT_INFINITE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>) &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> == qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a> &amp;&amp;
<a name="l03803"></a>03803             qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> &gt; 1 &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> &lt;= <a class="code" href="../../d0/d86/regcomp_8c.html#a1f3377878b4402017780f5457f3e2ca5">EXPAND_STRING_MAX_LENGTH</a>) {
<a name="l03804"></a>03804           <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a> = <a class="code" href="../../d1/dfc/regparse_8h.html#a85801a0f73a64733355230b366867b81">NSTRING_LEN</a>(target);
<a name="l03805"></a>03805           <a class="code" href="../../d2/db7/struct_str_node.html">StrNode</a>* sn = <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(target);
<a name="l03806"></a>03806 
<a name="l03807"></a>03807           <span class="keywordflow">if</span> (len * qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> &lt;= <a class="code" href="../../d0/d86/regcomp_8c.html#a1f3377878b4402017780f5457f3e2ca5">EXPAND_STRING_MAX_LENGTH</a>) {
<a name="l03808"></a>03808             <span class="keywordtype">int</span> i, n = qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>;
<a name="l03809"></a>03809             <a class="code" href="../../d6/dda/regparse_8c.html#a47ef98c51fc32c0e34bd6d917bf1cb74">onig_node_conv_to_str_node</a>(node, <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(target)-&gt;flag);
<a name="l03810"></a>03810             <span class="keywordflow">for</span> (i = 0; i &lt; n; i++) {
<a name="l03811"></a>03811               r = <a class="code" href="../../d6/dda/regparse_8c.html#a4c9f32699c8567f97bf22053473ec09e">onig_node_str_cat</a>(node, sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>, sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a>);
<a name="l03812"></a>03812               <span class="keywordflow">if</span> (r) <span class="keywordflow">break</span>;
<a name="l03813"></a>03813             }
<a name="l03814"></a>03814             <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(target);
<a name="l03815"></a>03815             <span class="keywordflow">break</span>; <span class="comment">/* break case NT_QTFR: */</span>
<a name="l03816"></a>03816           }
<a name="l03817"></a>03817         }
<a name="l03818"></a>03818       }
<a name="l03819"></a>03819 
<a name="l03820"></a>03820 <span class="preprocessor">#ifdef USE_OP_PUSH_OR_JUMP_EXACT</span>
<a name="l03821"></a>03821 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a> &amp;&amp; (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a3fe211fb928a1bcc58f4263cabc66f3d">target_empty_info</a> != 0)) {
<a name="l03822"></a>03822         <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(target) == <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>) {
<a name="l03823"></a>03823           <a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* tqn = <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(target);
<a name="l03824"></a>03824           <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(tqn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a48cfdf5f3ea6bc385ab77ab6428f3c24">head_exact</a>)) {
<a name="l03825"></a>03825             qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a48cfdf5f3ea6bc385ab77ab6428f3c24">head_exact</a>  = tqn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a48cfdf5f3ea6bc385ab77ab6428f3c24">head_exact</a>;
<a name="l03826"></a>03826             tqn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a48cfdf5f3ea6bc385ab77ab6428f3c24">head_exact</a> = <a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03827"></a>03827           }
<a name="l03828"></a>03828         }
<a name="l03829"></a>03829         <span class="keywordflow">else</span> {
<a name="l03830"></a>03830           qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a48cfdf5f3ea6bc385ab77ab6428f3c24">head_exact</a> = <a class="code" href="../../d0/d86/regcomp_8c.html#add066ca9799db63693400018f519903b">get_head_value_node</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, 1, reg);
<a name="l03831"></a>03831         }
<a name="l03832"></a>03832       }
<a name="l03833"></a>03833 <span class="preprocessor">#endif</span>
<a name="l03834"></a>03834 <span class="preprocessor"></span>    }
<a name="l03835"></a>03835     <span class="keywordflow">break</span>;
<a name="l03836"></a>03836 
<a name="l03837"></a>03837   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l03838"></a>03838     {
<a name="l03839"></a>03839       <a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* en = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node);
<a name="l03840"></a>03840 
<a name="l03841"></a>03841       <span class="keywordflow">switch</span> (en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ae554d8a44a852592c4b79ee3241645c7">type</a>) {
<a name="l03842"></a>03842       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a1f27f4cccd30502c03174673fe25af41">ENCLOSE_OPTION</a>:
<a name="l03843"></a>03843         {
<a name="l03844"></a>03844           <a class="code" href="../../d8/db3/oniguruma_8h.html#ad870c1a94502ad33c083978b17911e72">OnigOptionType</a> <a class="code" href="../../d6/da0/nkf-utf8_2nkf_8c.html#ad2d8a938168dc85041b2bac532a7cf75">options</a> = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a>;
<a name="l03845"></a>03845           reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a> = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)-&gt;option;
<a name="l03846"></a>03846           r = <a class="code" href="../../d0/d86/regcomp_8c.html#a59640e9a6551bf5e14242534adc9ddbc">setup_tree</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)-&gt;target, reg, state, env);
<a name="l03847"></a>03847           reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a> = options;
<a name="l03848"></a>03848         }
<a name="l03849"></a>03849         <span class="keywordflow">break</span>;
<a name="l03850"></a>03850 
<a name="l03851"></a>03851       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a32e44d8ddaca8fd4931a8c13677972ad">ENCLOSE_MEMORY</a>:
<a name="l03852"></a>03852         <span class="keywordflow">if</span> ((state &amp; (<a class="code" href="../../d0/d86/regcomp_8c.html#ae44ad561c845177c6f139610839024d7">IN_ALT</a> | <a class="code" href="../../d0/d86/regcomp_8c.html#a91ad90a8594a098cf789e9478c43ffe0">IN_NOT</a> | <a class="code" href="../../d0/d86/regcomp_8c.html#a068e4e04daa30ec118ce79c7bfa9e07e">IN_VAR_REPEAT</a>)) != 0) {
<a name="l03853"></a>03853           <a class="code" href="../../d6/d87/regint_8h.html#a69d9bf37ca95acb1bd2f662556fc529b">BIT_STATUS_ON_AT</a>(env-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a5ae5ce2ec7e6fe61e234fa4fd05ee1e4">bt_mem_start</a>, en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#adda9a1fd356c9b102c09a3c596583b81">regnum</a>);
<a name="l03854"></a>03854           <span class="comment">/* SET_ENCLOSE_STATUS(node, NST_MEM_IN_ALT_NOT); */</span>
<a name="l03855"></a>03855         }
<a name="l03856"></a>03856         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a59640e9a6551bf5e14242534adc9ddbc">setup_tree</a>(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, reg, state, env);
<a name="l03857"></a>03857         <span class="keywordflow">break</span>;
<a name="l03858"></a>03858 
<a name="l03859"></a>03859       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a8a9f973f8fdb597a604757521ae63fe2">ENCLOSE_STOP_BACKTRACK</a>:
<a name="l03860"></a>03860         {
<a name="l03861"></a>03861           <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* target = en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>;
<a name="l03862"></a>03862           r = <a class="code" href="../../d0/d86/regcomp_8c.html#a59640e9a6551bf5e14242534adc9ddbc">setup_tree</a>(target, reg, state, env);
<a name="l03863"></a>03863           <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(target) == <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>) {
<a name="l03864"></a>03864             <a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* tqn = <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(target);
<a name="l03865"></a>03865             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a7b7f11d4b2705496b7711598403d4f72">IS_REPEAT_INFINITE</a>(tqn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>) &amp;&amp; tqn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> &lt;= 1 &amp;&amp;
<a name="l03866"></a>03866                 tqn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a> != 0) {  <span class="comment">/* (?&gt;a*), a*+ etc... */</span>
<a name="l03867"></a>03867               <span class="keywordtype">int</span> qtype = <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(tqn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>);
<a name="l03868"></a>03868               <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#aa9a85d9c346d35f5bba88a49fde214f2">IS_NODE_TYPE_SIMPLE</a>(qtype))
<a name="l03869"></a>03869                 <a class="code" href="../../d1/dfc/regparse_8h.html#a709b6af5e5f6789e8a1ae2406f12a668">SET_ENCLOSE_STATUS</a>(node, <a class="code" href="../../d1/dfc/regparse_8h.html#a9948e403fc7becde4d7f75a0bb0599ec">NST_STOP_BT_SIMPLE_REPEAT</a>);
<a name="l03870"></a>03870             }
<a name="l03871"></a>03871           }
<a name="l03872"></a>03872         }
<a name="l03873"></a>03873         <span class="keywordflow">break</span>;
<a name="l03874"></a>03874       }
<a name="l03875"></a>03875     }
<a name="l03876"></a>03876     <span class="keywordflow">break</span>;
<a name="l03877"></a>03877 
<a name="l03878"></a>03878   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l03879"></a>03879     {
<a name="l03880"></a>03880       <a class="code" href="../../de/d50/struct_anchor_node.html">AnchorNode</a>* an = <a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node);
<a name="l03881"></a>03881 
<a name="l03882"></a>03882       <span class="keywordflow">switch</span> (an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#a123b9c289808fe00650dbcff45fa2662">type</a>) {
<a name="l03883"></a>03883       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#aa0f9fc98186b637ecce6d72e12ee1eed">ANCHOR_PREC_READ</a>:
<a name="l03884"></a>03884         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a59640e9a6551bf5e14242534adc9ddbc">setup_tree</a>(an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, reg, state, env);
<a name="l03885"></a>03885         <span class="keywordflow">break</span>;
<a name="l03886"></a>03886       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a1c64ac74f61b2ffbf3b60f391ae65cbf">ANCHOR_PREC_READ_NOT</a>:
<a name="l03887"></a>03887         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a59640e9a6551bf5e14242534adc9ddbc">setup_tree</a>(an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, reg, (state | <a class="code" href="../../d0/d86/regcomp_8c.html#a91ad90a8594a098cf789e9478c43ffe0">IN_NOT</a>), env);
<a name="l03888"></a>03888         <span class="keywordflow">break</span>;
<a name="l03889"></a>03889 
<a name="l03890"></a>03890 <span class="comment">/* allowed node types in look-behind */</span>
<a name="l03891"></a>03891 <span class="preprocessor">#define ALLOWED_TYPE_IN_LB  \</span>
<a name="l03892"></a>03892 <span class="preprocessor">  ( BIT_NT_LIST | BIT_NT_ALT | BIT_NT_STR | BIT_NT_CCLASS | BIT_NT_CTYPE | \</span>
<a name="l03893"></a>03893 <span class="preprocessor">    BIT_NT_CANY | BIT_NT_ANCHOR | BIT_NT_ENCLOSE | BIT_NT_QTFR | BIT_NT_CALL )</span>
<a name="l03894"></a>03894 <span class="preprocessor"></span>
<a name="l03895"></a>03895 <span class="preprocessor">#define ALLOWED_ENCLOSE_IN_LB       ( ENCLOSE_MEMORY )</span>
<a name="l03896"></a>03896 <span class="preprocessor"></span><span class="preprocessor">#define ALLOWED_ENCLOSE_IN_LB_NOT   0</span>
<a name="l03897"></a>03897 <span class="preprocessor"></span>
<a name="l03898"></a>03898 <span class="preprocessor">#define ALLOWED_ANCHOR_IN_LB \</span>
<a name="l03899"></a>03899 <span class="preprocessor">( ANCHOR_LOOK_BEHIND | ANCHOR_BEGIN_LINE | ANCHOR_END_LINE | ANCHOR_BEGIN_BUF | ANCHOR_BEGIN_POSITION )</span>
<a name="l03900"></a>03900 <span class="preprocessor"></span><span class="preprocessor">#define ALLOWED_ANCHOR_IN_LB_NOT \</span>
<a name="l03901"></a>03901 <span class="preprocessor">( ANCHOR_LOOK_BEHIND | ANCHOR_LOOK_BEHIND_NOT | ANCHOR_BEGIN_LINE | ANCHOR_END_LINE | ANCHOR_BEGIN_BUF | ANCHOR_BEGIN_POSITION )</span>
<a name="l03902"></a>03902 <span class="preprocessor"></span>
<a name="l03903"></a>03903       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a460ceecc3150bd7cd2437d41fbeb9ea8">ANCHOR_LOOK_BEHIND</a>:
<a name="l03904"></a>03904         {
<a name="l03905"></a>03905           r = <a class="code" href="../../d0/d86/regcomp_8c.html#a7b85b31f12762d485ff5ed2aca6b6608">check_type_tree</a>(an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, <a class="code" href="../../d0/d86/regcomp_8c.html#a42659aed152897b855725b6dc7c00f9b">ALLOWED_TYPE_IN_LB</a>,
<a name="l03906"></a>03906                               <a class="code" href="../../d0/d86/regcomp_8c.html#aa120ba7689d0c7798c1d05fef173cdb9">ALLOWED_ENCLOSE_IN_LB</a>, <a class="code" href="../../d0/d86/regcomp_8c.html#a4db94e43235b48451535316040f07a4b">ALLOWED_ANCHOR_IN_LB</a>);
<a name="l03907"></a>03907           <span class="keywordflow">if</span> (r &lt; 0) <span class="keywordflow">return</span> r;
<a name="l03908"></a>03908           <span class="keywordflow">if</span> (r &gt; 0) <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a73946c630e9d44c9b570b739180ee451">ONIGERR_INVALID_LOOK_BEHIND_PATTERN</a>;
<a name="l03909"></a>03909           r = <a class="code" href="../../d0/d86/regcomp_8c.html#aafc7dceb9ef806e4a0cf3543f3d84697">setup_look_behind</a>(node, reg, env);
<a name="l03910"></a>03910           <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">return</span> r;
<a name="l03911"></a>03911           <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node) != <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>) <span class="keywordflow">goto</span> restart;
<a name="l03912"></a>03912           r = <a class="code" href="../../d0/d86/regcomp_8c.html#a59640e9a6551bf5e14242534adc9ddbc">setup_tree</a>(an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, reg, state, env);
<a name="l03913"></a>03913         }
<a name="l03914"></a>03914         <span class="keywordflow">break</span>;
<a name="l03915"></a>03915 
<a name="l03916"></a>03916       <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a8812f9a061dd987fe8426262589b52c4">ANCHOR_LOOK_BEHIND_NOT</a>:
<a name="l03917"></a>03917         {
<a name="l03918"></a>03918           r = <a class="code" href="../../d0/d86/regcomp_8c.html#a7b85b31f12762d485ff5ed2aca6b6608">check_type_tree</a>(an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, <a class="code" href="../../d0/d86/regcomp_8c.html#a42659aed152897b855725b6dc7c00f9b">ALLOWED_TYPE_IN_LB</a>,
<a name="l03919"></a>03919                       <a class="code" href="../../d0/d86/regcomp_8c.html#aec6ce7f3e42b583367cd1112a30b91bc">ALLOWED_ENCLOSE_IN_LB_NOT</a>, <a class="code" href="../../d0/d86/regcomp_8c.html#a40bc69a7db3f8d89c31fe8a1e14e3ce8">ALLOWED_ANCHOR_IN_LB_NOT</a>);
<a name="l03920"></a>03920           <span class="keywordflow">if</span> (r &lt; 0) <span class="keywordflow">return</span> r;
<a name="l03921"></a>03921           <span class="keywordflow">if</span> (r &gt; 0) <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a73946c630e9d44c9b570b739180ee451">ONIGERR_INVALID_LOOK_BEHIND_PATTERN</a>;
<a name="l03922"></a>03922           r = <a class="code" href="../../d0/d86/regcomp_8c.html#aafc7dceb9ef806e4a0cf3543f3d84697">setup_look_behind</a>(node, reg, env);
<a name="l03923"></a>03923           <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">return</span> r;
<a name="l03924"></a>03924           <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node) != <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>) <span class="keywordflow">goto</span> restart;
<a name="l03925"></a>03925           r = <a class="code" href="../../d0/d86/regcomp_8c.html#a59640e9a6551bf5e14242534adc9ddbc">setup_tree</a>(an-&gt;<a class="code" href="../../de/d50/struct_anchor_node.html#ae9c23a2547c5be66d34aa9b5c13f3f05">target</a>, reg, (state | <a class="code" href="../../d0/d86/regcomp_8c.html#a91ad90a8594a098cf789e9478c43ffe0">IN_NOT</a>), env);
<a name="l03926"></a>03926         }
<a name="l03927"></a>03927         <span class="keywordflow">break</span>;
<a name="l03928"></a>03928       }
<a name="l03929"></a>03929     }
<a name="l03930"></a>03930     <span class="keywordflow">break</span>;
<a name="l03931"></a>03931 
<a name="l03932"></a>03932   <span class="keywordflow">default</span>:
<a name="l03933"></a>03933     <span class="keywordflow">break</span>;
<a name="l03934"></a>03934   }
<a name="l03935"></a>03935 
<a name="l03936"></a>03936   <span class="keywordflow">return</span> r;
<a name="l03937"></a>03937 }
<a name="l03938"></a>03938 
<a name="l03939"></a>03939 <span class="comment">/* set skip map for Boyer-Moor search */</span>
<a name="l03940"></a>03940 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l03941"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ac6be9edb60b5c3eb8bc0135683390264">03941</a> <a class="code" href="../../d0/d86/regcomp_8c.html#ac6be9edb60b5c3eb8bc0135683390264">set_bm_skip</a>(<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* s, <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* <a class="code" href="../../d6/d14/structre__registers.html#a1a42f8a5bcd4ac744e00132e2b80f8f0">end</a>, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc ARG_UNUSED,
<a name="l03942"></a>03942             <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> skip[], <span class="keywordtype">int</span>** int_skip)
<a name="l03943"></a>03943 {
<a name="l03944"></a>03944   <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> i, <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l03945"></a>03945 
<a name="l03946"></a>03946   len = end - s;
<a name="l03947"></a>03947   <span class="keywordflow">if</span> (len &lt; <a class="code" href="../../d8/db3/oniguruma_8h.html#aa5e520778f7bf10deda0dff9570b36de">ONIG_CHAR_TABLE_SIZE</a>) {
<a name="l03948"></a>03948     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d8/db3/oniguruma_8h.html#aa5e520778f7bf10deda0dff9570b36de">ONIG_CHAR_TABLE_SIZE</a>; i++) skip[i] = len;
<a name="l03949"></a>03949 
<a name="l03950"></a>03950     <span class="keywordflow">for</span> (i = 0; i &lt; len - 1; i++)
<a name="l03951"></a>03951       skip[s[i]] = len - 1 - i;
<a name="l03952"></a>03952   }
<a name="l03953"></a>03953   <span class="keywordflow">else</span> {
<a name="l03954"></a>03954     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(*int_skip)) {
<a name="l03955"></a>03955       *int_skip = (<span class="keywordtype">int</span>* )<a class="code" href="../../d8/db0/defines_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * <a class="code" href="../../d8/db3/oniguruma_8h.html#aa5e520778f7bf10deda0dff9570b36de">ONIG_CHAR_TABLE_SIZE</a>);
<a name="l03956"></a>03956       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(*int_skip)) <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a843ef92c5edce533877d3d65ef94a142">ONIGERR_MEMORY</a>;
<a name="l03957"></a>03957     }
<a name="l03958"></a>03958     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d8/db3/oniguruma_8h.html#aa5e520778f7bf10deda0dff9570b36de">ONIG_CHAR_TABLE_SIZE</a>; i++) (*int_skip)[i] = (int)len;
<a name="l03959"></a>03959 
<a name="l03960"></a>03960     <span class="keywordflow">for</span> (i = 0; i &lt; len - 1; i++)
<a name="l03961"></a>03961       (*int_skip)[s[i]] = (int)(len - 1 - i);
<a name="l03962"></a>03962   }
<a name="l03963"></a>03963   <span class="keywordflow">return</span> 0;
<a name="l03964"></a>03964 }
<a name="l03965"></a>03965 
<a name="l03966"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a2fb0cdfbf815e86dcad1ed35280be79b">03966</a> <span class="preprocessor">#define OPT_EXACT_MAXLEN   24</span>
<a name="l03967"></a>03967 <span class="preprocessor"></span>
<a name="l03968"></a><a class="code" href="../../d9/d1f/struct_min_max_len.html">03968</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l03969"></a><a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">03969</a>   <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> min;  <span class="comment">/* min byte length */</span>
<a name="l03970"></a><a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">03970</a>   <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> <a class="code" href="../../d1/d6f/date__strftime_8c.html#aa5d960354774dc177393b360c0f90aa9">max</a>;  <span class="comment">/* max byte length */</span>
<a name="l03971"></a>03971 } <a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>;
<a name="l03972"></a>03972 
<a name="l03973"></a><a class="code" href="../../d6/d2e/struct_opt_env.html">03973</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l03974"></a><a class="code" href="../../d6/d2e/struct_opt_env.html#a283a4ef13786d1740f6e602a979c9fc4">03974</a>   <a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>        mmd;
<a name="l03975"></a><a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">03975</a>   <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a>     enc;
<a name="l03976"></a><a class="code" href="../../d6/d2e/struct_opt_env.html#ada2c187eb78050758c55eda24da7cb2e">03976</a>   <a class="code" href="../../d8/db3/oniguruma_8h.html#ad870c1a94502ad33c083978b17911e72">OnigOptionType</a>   <a class="code" href="../../d6/da0/nkf-utf8_2nkf_8c.html#ad2d8a938168dc85041b2bac532a7cf75">options</a>;
<a name="l03977"></a><a class="code" href="../../d6/d2e/struct_opt_env.html#ad9a5ace21d10189ac9de1b997b2379cf">03977</a>   <a class="code" href="../../d8/db3/oniguruma_8h.html#a33aa7ed7612104fa36da121c8ecb4d4e">OnigCaseFoldType</a> case_fold_flag;
<a name="l03978"></a><a class="code" href="../../d6/d2e/struct_opt_env.html#a2dc30c2c1668dca6cfc5aee3fc9d78ea">03978</a>   <a class="code" href="../../d6/dbe/struct_scan_env.html">ScanEnv</a>*         scan_env;
<a name="l03979"></a>03979 } <a class="code" href="../../d6/d2e/struct_opt_env.html">OptEnv</a>;
<a name="l03980"></a>03980 
<a name="l03981"></a><a class="code" href="../../d3/dd5/struct_opt_anc_info.html">03981</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l03982"></a><a class="code" href="../../d3/dd5/struct_opt_anc_info.html#ab9a69bdf299121ad75108a3e1bf8f6fd">03982</a>   <span class="keywordtype">int</span> left_anchor;
<a name="l03983"></a><a class="code" href="../../d3/dd5/struct_opt_anc_info.html#a2b9a54a503c8fbcd8b46f42007f2147d">03983</a>   <span class="keywordtype">int</span> right_anchor;
<a name="l03984"></a>03984 } <a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a>;
<a name="l03985"></a>03985 
<a name="l03986"></a><a class="code" href="../../d8/dc8/struct_opt_exact_info.html">03986</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l03987"></a><a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a95319a8e4d24521aec38ce39d764633d">03987</a>   <a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>  mmd; <span class="comment">/* info position */</span>
<a name="l03988"></a><a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a09a227bb2282ed54b850492250cf8ce4">03988</a>   <a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a> anc;
<a name="l03989"></a>03989 
<a name="l03990"></a><a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">03990</a>   <span class="keywordtype">int</span>   reach_end;
<a name="l03991"></a><a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a18509747454f3fbb63451cc6ee80b29b">03991</a>   <span class="keywordtype">int</span>   ignore_case;
<a name="l03992"></a><a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">03992</a>   <span class="keywordtype">int</span>   <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l03993"></a><a class="code" href="../../d8/dc8/struct_opt_exact_info.html#ab77ee2f1fbe3f3701af923a330d1214d">03993</a>   <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> s[<a class="code" href="../../d0/d86/regcomp_8c.html#a2fb0cdfbf815e86dcad1ed35280be79b">OPT_EXACT_MAXLEN</a>];
<a name="l03994"></a>03994 } <a class="code" href="../../d8/dc8/struct_opt_exact_info.html">OptExactInfo</a>;
<a name="l03995"></a>03995 
<a name="l03996"></a><a class="code" href="../../d3/dd6/struct_opt_map_info.html">03996</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l03997"></a><a class="code" href="../../d3/dd6/struct_opt_map_info.html#aed8cda0ff7790a099ce70a7b5aa6488a">03997</a>   <a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a> mmd; <span class="comment">/* info position */</span>
<a name="l03998"></a><a class="code" href="../../d3/dd6/struct_opt_map_info.html#ad93a89419f970f3d9f5b196d3fdcb578">03998</a>   <a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a> anc;
<a name="l03999"></a>03999 
<a name="l04000"></a><a class="code" href="../../d3/dd6/struct_opt_map_info.html#a57c79c254c912dd039f0db900b7be0ec">04000</a>   <span class="keywordtype">int</span>   value;      <span class="comment">/* weighted value */</span>
<a name="l04001"></a><a class="code" href="../../d3/dd6/struct_opt_map_info.html#a5338e964ee9f34dcc6d5280c8d80f2f7">04001</a>   <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> map[<a class="code" href="../../d8/db3/oniguruma_8h.html#aa5e520778f7bf10deda0dff9570b36de">ONIG_CHAR_TABLE_SIZE</a>];
<a name="l04002"></a>04002 } <a class="code" href="../../d3/dd6/struct_opt_map_info.html">OptMapInfo</a>;
<a name="l04003"></a>04003 
<a name="l04004"></a><a class="code" href="../../d9/dcf/struct_node_opt_info.html">04004</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l04005"></a><a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">04005</a>   <a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>    <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l04006"></a>04006 
<a name="l04007"></a><a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">04007</a>   <a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a>   anc;
<a name="l04008"></a><a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">04008</a>   <a class="code" href="../../d8/dc8/struct_opt_exact_info.html">OptExactInfo</a> exb;    <span class="comment">/* boundary */</span>
<a name="l04009"></a><a class="code" href="../../d9/dcf/struct_node_opt_info.html#a9b4848025c0b6e49574bf20cf7a74db0">04009</a>   <a class="code" href="../../d8/dc8/struct_opt_exact_info.html">OptExactInfo</a> exm;    <span class="comment">/* middle */</span>
<a name="l04010"></a><a class="code" href="../../d9/dcf/struct_node_opt_info.html#aac24e1f9229b602f12b0e696414f5408">04010</a>   <a class="code" href="../../d8/dc8/struct_opt_exact_info.html">OptExactInfo</a> expr;   <span class="comment">/* prec read (?=...) */</span>
<a name="l04011"></a>04011 
<a name="l04012"></a><a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">04012</a>   <a class="code" href="../../d3/dd6/struct_opt_map_info.html">OptMapInfo</a>   map;   <span class="comment">/* boundary */</span>
<a name="l04013"></a>04013 } <a class="code" href="../../d9/dcf/struct_node_opt_info.html">NodeOptInfo</a>;
<a name="l04014"></a>04014 
<a name="l04015"></a>04015 
<a name="l04016"></a>04016 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l04017"></a><a class="code" href="../../d0/d86/regcomp_8c.html#aa212386e3a0760597c7752595702ae27">04017</a> <a class="code" href="../../d0/d86/regcomp_8c.html#aa212386e3a0760597c7752595702ae27">map_position_value</a>(<a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc, <span class="keywordtype">int</span> i)
<a name="l04018"></a>04018 {
<a name="l04019"></a>04019   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> ByteValTable[] = {
<a name="l04020"></a>04020      5,  1,  1,  1,  1,  1,  1,  1,  1, 10, 10,  1,  1, 10,  1,  1,
<a name="l04021"></a>04021      1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,
<a name="l04022"></a>04022     12,  4,  7,  4,  4,  4,  4,  4,  4,  5,  5,  5,  5,  5,  5,  5,
<a name="l04023"></a>04023      6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  5,  5,  5,  5,  5,  5,
<a name="l04024"></a>04024      5,  6,  6,  6,  6,  7,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,
<a name="l04025"></a>04025      6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  5,  6,  5,  5,  5,
<a name="l04026"></a>04026      5,  6,  6,  6,  6,  7,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,
<a name="l04027"></a>04027      6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  6,  5,  5,  5,  5,  1
<a name="l04028"></a>04028   };
<a name="l04029"></a>04029 
<a name="l04030"></a>04030   <span class="keywordflow">if</span> (i &lt; (<span class="keywordtype">int</span> )(<span class="keyword">sizeof</span>(ByteValTable)/<span class="keyword">sizeof</span>(ByteValTable[0]))) {
<a name="l04031"></a>04031     <span class="keywordflow">if</span> (i == 0 &amp;&amp; <a class="code" href="../../d8/db3/oniguruma_8h.html#a9d0d6012e6b7de2cf851d274bb9b9c9c">ONIGENC_MBC_MINLEN</a>(enc) &gt; 1)
<a name="l04032"></a>04032       <span class="keywordflow">return</span> 20;
<a name="l04033"></a>04033     <span class="keywordflow">else</span>
<a name="l04034"></a>04034       <span class="keywordflow">return</span> (<span class="keywordtype">int</span> )ByteValTable[i];
<a name="l04035"></a>04035   }
<a name="l04036"></a>04036   <span class="keywordflow">else</span>
<a name="l04037"></a>04037     <span class="keywordflow">return</span> 4;   <span class="comment">/* Take it easy. */</span>
<a name="l04038"></a>04038 }
<a name="l04039"></a>04039 
<a name="l04040"></a>04040 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l04041"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a97f6d4c0bbd396792b41f310ee48923e">04041</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a97f6d4c0bbd396792b41f310ee48923e">distance_value</a>(<a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>* mm)
<a name="l04042"></a>04042 {
<a name="l04043"></a>04043   <span class="comment">/* 1000 / (min-max-dist + 1) */</span>
<a name="l04044"></a>04044   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">short</span> <span class="keywordtype">int</span> dist_vals[] = {
<a name="l04045"></a>04045     1000,  500,  333,  250,  200,  167,  143,  125,  111,  100,
<a name="l04046"></a>04046       91,   83,   77,   71,   67,   63,   59,   56,   53,   50,
<a name="l04047"></a>04047       48,   45,   43,   42,   40,   38,   37,   36,   34,   33,
<a name="l04048"></a>04048       32,   31,   30,   29,   29,   28,   27,   26,   26,   25,
<a name="l04049"></a>04049       24,   24,   23,   23,   22,   22,   21,   21,   20,   20,
<a name="l04050"></a>04050       20,   19,   19,   19,   18,   18,   18,   17,   17,   17,
<a name="l04051"></a>04051       16,   16,   16,   16,   15,   15,   15,   15,   14,   14,
<a name="l04052"></a>04052       14,   14,   14,   14,   13,   13,   13,   13,   13,   13,
<a name="l04053"></a>04053       12,   12,   12,   12,   12,   12,   11,   11,   11,   11,
<a name="l04054"></a>04054       11,   11,   11,   11,   11,   10,   10,   10,   10,   10
<a name="l04055"></a>04055   };
<a name="l04056"></a>04056 
<a name="l04057"></a>04057   <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> d;
<a name="l04058"></a>04058 
<a name="l04059"></a>04059   <span class="keywordflow">if</span> (mm-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> == <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a>) <span class="keywordflow">return</span> 0;
<a name="l04060"></a>04060 
<a name="l04061"></a>04061   d = mm-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> - mm-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a>;
<a name="l04062"></a>04062   <span class="keywordflow">if</span> (d &lt; <span class="keyword">sizeof</span>(dist_vals)/<span class="keyword">sizeof</span>(dist_vals[0]))
<a name="l04063"></a>04063     <span class="comment">/* return dist_vals[d] * 16 / (mm-&gt;min + 12); */</span>
<a name="l04064"></a>04064     <span class="keywordflow">return</span> (<span class="keywordtype">int</span> )dist_vals[d];
<a name="l04065"></a>04065   <span class="keywordflow">else</span>
<a name="l04066"></a>04066     <span class="keywordflow">return</span> 1;
<a name="l04067"></a>04067 }
<a name="l04068"></a>04068 
<a name="l04069"></a>04069 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l04070"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a2c24fa918b8841658b94ae285329cf44">04070</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a2c24fa918b8841658b94ae285329cf44">comp_distance_value</a>(<a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>* d1, <a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>* d2, <span class="keywordtype">int</span> v1, <span class="keywordtype">int</span> v2)
<a name="l04071"></a>04071 {
<a name="l04072"></a>04072   <span class="keywordflow">if</span> (v2 &lt;= 0) <span class="keywordflow">return</span> -1;
<a name="l04073"></a>04073   <span class="keywordflow">if</span> (v1 &lt;= 0) <span class="keywordflow">return</span>  1;
<a name="l04074"></a>04074 
<a name="l04075"></a>04075   v1 *= <a class="code" href="../../d0/d86/regcomp_8c.html#a97f6d4c0bbd396792b41f310ee48923e">distance_value</a>(d1);
<a name="l04076"></a>04076   v2 *= <a class="code" href="../../d0/d86/regcomp_8c.html#a97f6d4c0bbd396792b41f310ee48923e">distance_value</a>(d2);
<a name="l04077"></a>04077 
<a name="l04078"></a>04078   <span class="keywordflow">if</span> (v2 &gt; v1) <span class="keywordflow">return</span>  1;
<a name="l04079"></a>04079   <span class="keywordflow">if</span> (v2 &lt; v1) <span class="keywordflow">return</span> -1;
<a name="l04080"></a>04080 
<a name="l04081"></a>04081   <span class="keywordflow">if</span> (d2-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a> &lt; d1-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a>) <span class="keywordflow">return</span>  1;
<a name="l04082"></a>04082   <span class="keywordflow">if</span> (d2-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a> &gt; d1-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a>) <span class="keywordflow">return</span> -1;
<a name="l04083"></a>04083   <span class="keywordflow">return</span> 0;
<a name="l04084"></a>04084 }
<a name="l04085"></a>04085 
<a name="l04086"></a>04086 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l04087"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ae5b5a60bc20ac40a5e1339c7734a4e5b">04087</a> <a class="code" href="../../d0/d86/regcomp_8c.html#ae5b5a60bc20ac40a5e1339c7734a4e5b">is_equal_mml</a>(<a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>* a, <a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>* b)
<a name="l04088"></a>04088 {
<a name="l04089"></a>04089   <span class="keywordflow">return</span> (a-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a> == b-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a> &amp;&amp; a-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> == b-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a>) ? 1 : 0;
<a name="l04090"></a>04090 }
<a name="l04091"></a>04091 
<a name="l04092"></a>04092 
<a name="l04093"></a>04093 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04094"></a><a class="code" href="../../d0/d86/regcomp_8c.html#aaac64b6a152d4115c1546048512c0346">04094</a> <a class="code" href="../../d0/d86/regcomp_8c.html#aaac64b6a152d4115c1546048512c0346">set_mml</a>(<a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>* mml, <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> min, <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> <a class="code" href="../../d1/d6f/date__strftime_8c.html#aa5d960354774dc177393b360c0f90aa9">max</a>)
<a name="l04095"></a>04095 {
<a name="l04096"></a>04096   mml-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a> = min;
<a name="l04097"></a>04097   mml-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> = max;
<a name="l04098"></a>04098 }
<a name="l04099"></a>04099 
<a name="l04100"></a>04100 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04101"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a6657b0c274b61a7c0654e51e52eef6c5">04101</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a6657b0c274b61a7c0654e51e52eef6c5">clear_mml</a>(<a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>* mml)
<a name="l04102"></a>04102 {
<a name="l04103"></a>04103   mml-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a> = mml-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> = 0;
<a name="l04104"></a>04104 }
<a name="l04105"></a>04105 
<a name="l04106"></a>04106 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04107"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a6ddd045344fb1654955b1fe5a6ad1de5">04107</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a6ddd045344fb1654955b1fe5a6ad1de5">copy_mml</a>(<a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>* to, <a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>* from)
<a name="l04108"></a>04108 {
<a name="l04109"></a>04109   to-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a> = from-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a>;
<a name="l04110"></a>04110   to-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> = from-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a>;
<a name="l04111"></a>04111 }
<a name="l04112"></a>04112 
<a name="l04113"></a>04113 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04114"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a29dbe3e7e64d0d79fece8290c191096b">04114</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a29dbe3e7e64d0d79fece8290c191096b">add_mml</a>(<a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>* to, <a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>* from)
<a name="l04115"></a>04115 {
<a name="l04116"></a>04116   to-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a> = <a class="code" href="../../d0/d86/regcomp_8c.html#ae04444d8024a1649eba62b8a6c008cc4">distance_add</a>(to-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a>, from-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a>);
<a name="l04117"></a>04117   to-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> = <a class="code" href="../../d0/d86/regcomp_8c.html#ae04444d8024a1649eba62b8a6c008cc4">distance_add</a>(to-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a>, from-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a>);
<a name="l04118"></a>04118 }
<a name="l04119"></a>04119 
<a name="l04120"></a>04120 <span class="preprocessor">#if 0</span>
<a name="l04121"></a>04121 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04122"></a>04122 add_len_mml(<a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>* to, <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>)
<a name="l04123"></a>04123 {
<a name="l04124"></a>04124   to-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a> = <a class="code" href="../../d0/d86/regcomp_8c.html#ae04444d8024a1649eba62b8a6c008cc4">distance_add</a>(to-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a>, len);
<a name="l04125"></a>04125   to-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> = <a class="code" href="../../d0/d86/regcomp_8c.html#ae04444d8024a1649eba62b8a6c008cc4">distance_add</a>(to-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a>, len);
<a name="l04126"></a>04126 }
<a name="l04127"></a>04127 <span class="preprocessor">#endif</span>
<a name="l04128"></a>04128 <span class="preprocessor"></span>
<a name="l04129"></a>04129 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04130"></a><a class="code" href="../../d0/d86/regcomp_8c.html#adc7b2f0076ff0ef62c590aeac1459bfe">04130</a> <a class="code" href="../../d0/d86/regcomp_8c.html#adc7b2f0076ff0ef62c590aeac1459bfe">alt_merge_mml</a>(<a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>* to, <a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>* from)
<a name="l04131"></a>04131 {
<a name="l04132"></a>04132   <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a> &gt; from-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a>) to-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a> = from-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a>;
<a name="l04133"></a>04133   <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> &lt; from-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a>) to-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> = from-&gt;<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a>;
<a name="l04134"></a>04134 }
<a name="l04135"></a>04135 
<a name="l04136"></a>04136 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04137"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a645d272d8107e84b51c83212d27b32e7">04137</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a645d272d8107e84b51c83212d27b32e7">copy_opt_env</a>(<a class="code" href="../../d6/d2e/struct_opt_env.html">OptEnv</a>* to, <a class="code" href="../../d6/d2e/struct_opt_env.html">OptEnv</a>* from)
<a name="l04138"></a>04138 {
<a name="l04139"></a>04139   *to = *from;
<a name="l04140"></a>04140 }
<a name="l04141"></a>04141 
<a name="l04142"></a>04142 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04143"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a13a25e75208ee510a293659d6e4ef345">04143</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a13a25e75208ee510a293659d6e4ef345">clear_opt_anc_info</a>(<a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a>* anc)
<a name="l04144"></a>04144 {
<a name="l04145"></a>04145   anc-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#ab9a69bdf299121ad75108a3e1bf8f6fd">left_anchor</a>  = 0;
<a name="l04146"></a>04146   anc-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#a2b9a54a503c8fbcd8b46f42007f2147d">right_anchor</a> = 0;
<a name="l04147"></a>04147 }
<a name="l04148"></a>04148 
<a name="l04149"></a>04149 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04150"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a598aa744df53e329cc9d560ad7a43c92">04150</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a598aa744df53e329cc9d560ad7a43c92">copy_opt_anc_info</a>(<a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a>* to, <a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a>* from)
<a name="l04151"></a>04151 {
<a name="l04152"></a>04152   *to = *from;
<a name="l04153"></a>04153 }
<a name="l04154"></a>04154 
<a name="l04155"></a>04155 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04156"></a><a class="code" href="../../d0/d86/regcomp_8c.html#adf1ffe8c1b8ee6888d734c29e9cf3fad">04156</a> <a class="code" href="../../d0/d86/regcomp_8c.html#adf1ffe8c1b8ee6888d734c29e9cf3fad">concat_opt_anc_info</a>(<a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a>* to, <a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a>* left, <a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a>* right,
<a name="l04157"></a>04157                     <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> left_len, <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> right_len)
<a name="l04158"></a>04158 {
<a name="l04159"></a>04159   <a class="code" href="../../d0/d86/regcomp_8c.html#a13a25e75208ee510a293659d6e4ef345">clear_opt_anc_info</a>(to);
<a name="l04160"></a>04160 
<a name="l04161"></a>04161   to-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#ab9a69bdf299121ad75108a3e1bf8f6fd">left_anchor</a> = left-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#ab9a69bdf299121ad75108a3e1bf8f6fd">left_anchor</a>;
<a name="l04162"></a>04162   <span class="keywordflow">if</span> (left_len == 0) {
<a name="l04163"></a>04163     to-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#ab9a69bdf299121ad75108a3e1bf8f6fd">left_anchor</a> |= right-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#ab9a69bdf299121ad75108a3e1bf8f6fd">left_anchor</a>;
<a name="l04164"></a>04164   }
<a name="l04165"></a>04165 
<a name="l04166"></a>04166   to-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#a2b9a54a503c8fbcd8b46f42007f2147d">right_anchor</a> = right-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#a2b9a54a503c8fbcd8b46f42007f2147d">right_anchor</a>;
<a name="l04167"></a>04167   <span class="keywordflow">if</span> (right_len == 0) {
<a name="l04168"></a>04168     to-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#a2b9a54a503c8fbcd8b46f42007f2147d">right_anchor</a> |= left-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#a2b9a54a503c8fbcd8b46f42007f2147d">right_anchor</a>;
<a name="l04169"></a>04169   }
<a name="l04170"></a>04170 }
<a name="l04171"></a>04171 
<a name="l04172"></a>04172 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l04173"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a1e3fd5c83f6f8199ebe168fd12d4e4e9">04173</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a1e3fd5c83f6f8199ebe168fd12d4e4e9">is_left_anchor</a>(<span class="keywordtype">int</span> anc)
<a name="l04174"></a>04174 {
<a name="l04175"></a>04175   <span class="keywordflow">if</span> (anc == <a class="code" href="../../d6/d87/regint_8h.html#afae1199ac99483eb29f0824cea7b3329">ANCHOR_END_BUF</a> || anc == <a class="code" href="../../d6/d87/regint_8h.html#a9336254890d4656b7e36574b462ca093">ANCHOR_SEMI_END_BUF</a> ||
<a name="l04176"></a>04176       anc == <a class="code" href="../../d6/d87/regint_8h.html#a4dd9db8ffc551d1a759f1fac90baff78">ANCHOR_END_LINE</a> || anc == <a class="code" href="../../d6/d87/regint_8h.html#aa0f9fc98186b637ecce6d72e12ee1eed">ANCHOR_PREC_READ</a> ||
<a name="l04177"></a>04177       anc == <a class="code" href="../../d6/d87/regint_8h.html#a1c64ac74f61b2ffbf3b60f391ae65cbf">ANCHOR_PREC_READ_NOT</a>)
<a name="l04178"></a>04178     <span class="keywordflow">return</span> 0;
<a name="l04179"></a>04179 
<a name="l04180"></a>04180   <span class="keywordflow">return</span> 1;
<a name="l04181"></a>04181 }
<a name="l04182"></a>04182 
<a name="l04183"></a>04183 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l04184"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a59f75d45d79a864d966e61a207dfe738">04184</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a59f75d45d79a864d966e61a207dfe738">is_set_opt_anc_info</a>(<a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a>* to, <span class="keywordtype">int</span> anc)
<a name="l04185"></a>04185 {
<a name="l04186"></a>04186   <span class="keywordflow">if</span> ((to-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#ab9a69bdf299121ad75108a3e1bf8f6fd">left_anchor</a> &amp; anc) != 0) <span class="keywordflow">return</span> 1;
<a name="l04187"></a>04187 
<a name="l04188"></a>04188   <span class="keywordflow">return</span> ((to-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#a2b9a54a503c8fbcd8b46f42007f2147d">right_anchor</a> &amp; anc) != 0 ? 1 : 0);
<a name="l04189"></a>04189 }
<a name="l04190"></a>04190 
<a name="l04191"></a>04191 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04192"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a71c4f197d39cb16718891c87485b4675">04192</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a71c4f197d39cb16718891c87485b4675">add_opt_anc_info</a>(<a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a>* to, <span class="keywordtype">int</span> anc)
<a name="l04193"></a>04193 {
<a name="l04194"></a>04194   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#a1e3fd5c83f6f8199ebe168fd12d4e4e9">is_left_anchor</a>(anc))
<a name="l04195"></a>04195     to-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#ab9a69bdf299121ad75108a3e1bf8f6fd">left_anchor</a> |= anc;
<a name="l04196"></a>04196   <span class="keywordflow">else</span>
<a name="l04197"></a>04197     to-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#a2b9a54a503c8fbcd8b46f42007f2147d">right_anchor</a> |= anc;
<a name="l04198"></a>04198 }
<a name="l04199"></a>04199 
<a name="l04200"></a>04200 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04201"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ab17c2a993044f2f028c1b299a2bfa64a">04201</a> <a class="code" href="../../d0/d86/regcomp_8c.html#ab17c2a993044f2f028c1b299a2bfa64a">remove_opt_anc_info</a>(<a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a>* to, <span class="keywordtype">int</span> anc)
<a name="l04202"></a>04202 {
<a name="l04203"></a>04203   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#a1e3fd5c83f6f8199ebe168fd12d4e4e9">is_left_anchor</a>(anc))
<a name="l04204"></a>04204     to-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#ab9a69bdf299121ad75108a3e1bf8f6fd">left_anchor</a> &amp;= ~anc;
<a name="l04205"></a>04205   <span class="keywordflow">else</span>
<a name="l04206"></a>04206     to-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#a2b9a54a503c8fbcd8b46f42007f2147d">right_anchor</a> &amp;= ~anc;
<a name="l04207"></a>04207 }
<a name="l04208"></a>04208 
<a name="l04209"></a>04209 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04210"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ae80c62aeb0fdfe07f8a303c4addd10e6">04210</a> <a class="code" href="../../d0/d86/regcomp_8c.html#ae80c62aeb0fdfe07f8a303c4addd10e6">alt_merge_opt_anc_info</a>(<a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a>* to, <a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a>* <a class="code" href="../../d1/d6f/date__strftime_8c.html#aa62ba8463316e20fcef4b9db83bab2fd">add</a>)
<a name="l04211"></a>04211 {
<a name="l04212"></a>04212   to-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#ab9a69bdf299121ad75108a3e1bf8f6fd">left_anchor</a>  &amp;= add-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#ab9a69bdf299121ad75108a3e1bf8f6fd">left_anchor</a>;
<a name="l04213"></a>04213   to-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#a2b9a54a503c8fbcd8b46f42007f2147d">right_anchor</a> &amp;= add-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#a2b9a54a503c8fbcd8b46f42007f2147d">right_anchor</a>;
<a name="l04214"></a>04214 }
<a name="l04215"></a>04215 
<a name="l04216"></a>04216 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l04217"></a><a class="code" href="../../d0/d86/regcomp_8c.html#aa9f9da2e207fbf07f6995f7a37718916">04217</a> <a class="code" href="../../d0/d86/regcomp_8c.html#aa9f9da2e207fbf07f6995f7a37718916">is_full_opt_exact_info</a>(<a class="code" href="../../d8/dc8/struct_opt_exact_info.html">OptExactInfo</a>* ex)
<a name="l04218"></a>04218 {
<a name="l04219"></a>04219   <span class="keywordflow">return</span> (ex-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> &gt;= <a class="code" href="../../d0/d86/regcomp_8c.html#a2fb0cdfbf815e86dcad1ed35280be79b">OPT_EXACT_MAXLEN</a> ? 1 : 0);
<a name="l04220"></a>04220 }
<a name="l04221"></a>04221 
<a name="l04222"></a>04222 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04223"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a1c8a658cf0018bc9205e4c6afce4173c">04223</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a1c8a658cf0018bc9205e4c6afce4173c">clear_opt_exact_info</a>(<a class="code" href="../../d8/dc8/struct_opt_exact_info.html">OptExactInfo</a>* ex)
<a name="l04224"></a>04224 {
<a name="l04225"></a>04225   <a class="code" href="../../d0/d86/regcomp_8c.html#a6657b0c274b61a7c0654e51e52eef6c5">clear_mml</a>(&amp;ex-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a95319a8e4d24521aec38ce39d764633d">mmd</a>);
<a name="l04226"></a>04226   <a class="code" href="../../d0/d86/regcomp_8c.html#a13a25e75208ee510a293659d6e4ef345">clear_opt_anc_info</a>(&amp;ex-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a09a227bb2282ed54b850492250cf8ce4">anc</a>);
<a name="l04227"></a>04227   ex-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a>   = 0;
<a name="l04228"></a>04228   ex-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a18509747454f3fbb63451cc6ee80b29b">ignore_case</a> = 0;
<a name="l04229"></a>04229   ex-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a>         = 0;
<a name="l04230"></a>04230   ex-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#ab77ee2f1fbe3f3701af923a330d1214d">s</a>[0]        = <span class="charliteral">&apos;\0&apos;</span>;
<a name="l04231"></a>04231 }
<a name="l04232"></a>04232 
<a name="l04233"></a>04233 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04234"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a966940434a5979df5e76f85c58a2e732">04234</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a966940434a5979df5e76f85c58a2e732">copy_opt_exact_info</a>(<a class="code" href="../../d8/dc8/struct_opt_exact_info.html">OptExactInfo</a>* to, <a class="code" href="../../d8/dc8/struct_opt_exact_info.html">OptExactInfo</a>* from)
<a name="l04235"></a>04235 {
<a name="l04236"></a>04236   *to = *from;
<a name="l04237"></a>04237 }
<a name="l04238"></a>04238 
<a name="l04239"></a>04239 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04240"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ae634e8024dd636cd22c5d43170b95a37">04240</a> <a class="code" href="../../d0/d86/regcomp_8c.html#ae634e8024dd636cd22c5d43170b95a37">concat_opt_exact_info</a>(<a class="code" href="../../d8/dc8/struct_opt_exact_info.html">OptExactInfo</a>* to, <a class="code" href="../../d8/dc8/struct_opt_exact_info.html">OptExactInfo</a>* <a class="code" href="../../d1/d6f/date__strftime_8c.html#aa62ba8463316e20fcef4b9db83bab2fd">add</a>, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc)
<a name="l04241"></a>04241 {
<a name="l04242"></a>04242   <span class="keywordtype">int</span> i, j, <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l04243"></a>04243   <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *p, *end;
<a name="l04244"></a>04244   <a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a> tanc;
<a name="l04245"></a>04245 
<a name="l04246"></a>04246   <span class="keywordflow">if</span> (! to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a18509747454f3fbb63451cc6ee80b29b">ignore_case</a> &amp;&amp; add-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a18509747454f3fbb63451cc6ee80b29b">ignore_case</a>) {
<a name="l04247"></a>04247     <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> &gt;= add-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a>) return ;  <span class="comment">/* avoid */</span>
<a name="l04248"></a>04248 
<a name="l04249"></a>04249     to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a18509747454f3fbb63451cc6ee80b29b">ignore_case</a> = 1;
<a name="l04250"></a>04250   }
<a name="l04251"></a>04251 
<a name="l04252"></a>04252   p = add-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#ab77ee2f1fbe3f3701af923a330d1214d">s</a>;
<a name="l04253"></a>04253   end = p + add-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a>;
<a name="l04254"></a>04254   <span class="keywordflow">for</span> (i = to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a>; p &lt; end; ) {
<a name="l04255"></a>04255     len = <a class="code" href="../../d3/d09/ripper_8y.html#ae9f8530a4c9ec89ae8d62ce5b4410aad">enclen</a>(enc, p, end);
<a name="l04256"></a>04256     <span class="keywordflow">if</span> (i + len &gt; <a class="code" href="../../d0/d86/regcomp_8c.html#a2fb0cdfbf815e86dcad1ed35280be79b">OPT_EXACT_MAXLEN</a>) <span class="keywordflow">break</span>;
<a name="l04257"></a>04257     <span class="keywordflow">for</span> (j = 0; j &lt; len &amp;&amp; p &lt; end; j++)
<a name="l04258"></a>04258       to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#ab77ee2f1fbe3f3701af923a330d1214d">s</a>[i++] = *p++;
<a name="l04259"></a>04259   }
<a name="l04260"></a>04260 
<a name="l04261"></a>04261   to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> = i;
<a name="l04262"></a>04262   to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a> = (p == end ? add-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a> : 0);
<a name="l04263"></a>04263 
<a name="l04264"></a>04264   <a class="code" href="../../d0/d86/regcomp_8c.html#adf1ffe8c1b8ee6888d734c29e9cf3fad">concat_opt_anc_info</a>(&amp;tanc, &amp;to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a09a227bb2282ed54b850492250cf8ce4">anc</a>, &amp;add-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a09a227bb2282ed54b850492250cf8ce4">anc</a>, 1, 1);
<a name="l04265"></a>04265   <span class="keywordflow">if</span> (! to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a>) tanc.<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#a2b9a54a503c8fbcd8b46f42007f2147d">right_anchor</a> = 0;
<a name="l04266"></a>04266   <a class="code" href="../../d0/d86/regcomp_8c.html#a598aa744df53e329cc9d560ad7a43c92">copy_opt_anc_info</a>(&amp;to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a09a227bb2282ed54b850492250cf8ce4">anc</a>, &amp;tanc);
<a name="l04267"></a>04267 }
<a name="l04268"></a>04268 
<a name="l04269"></a>04269 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04270"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a35ad627121dbb81c014bfe7ed7a40f69">04270</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a35ad627121dbb81c014bfe7ed7a40f69">concat_opt_exact_info_str</a>(<a class="code" href="../../d8/dc8/struct_opt_exact_info.html">OptExactInfo</a>* to, <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* s, <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* end,
<a name="l04271"></a>04271                           <span class="keywordtype">int</span> raw ARG_UNUSED, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc)
<a name="l04272"></a>04272 {
<a name="l04273"></a>04273   <span class="keywordtype">int</span> i, j, <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l04274"></a>04274   <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *p;
<a name="l04275"></a>04275 
<a name="l04276"></a>04276   <span class="keywordflow">for</span> (i = to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a>, p = s; p &lt; end &amp;&amp; i &lt; <a class="code" href="../../d0/d86/regcomp_8c.html#a2fb0cdfbf815e86dcad1ed35280be79b">OPT_EXACT_MAXLEN</a>; ) {
<a name="l04277"></a>04277     len = <a class="code" href="../../d3/d09/ripper_8y.html#ae9f8530a4c9ec89ae8d62ce5b4410aad">enclen</a>(enc, p, end);
<a name="l04278"></a>04278     <span class="keywordflow">if</span> (i + len &gt; <a class="code" href="../../d0/d86/regcomp_8c.html#a2fb0cdfbf815e86dcad1ed35280be79b">OPT_EXACT_MAXLEN</a>) <span class="keywordflow">break</span>;
<a name="l04279"></a>04279     <span class="keywordflow">for</span> (j = 0; j &lt; len &amp;&amp; p &lt; end; j++)
<a name="l04280"></a>04280       to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#ab77ee2f1fbe3f3701af923a330d1214d">s</a>[i++] = *p++;
<a name="l04281"></a>04281   }
<a name="l04282"></a>04282 
<a name="l04283"></a>04283   to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> = i;
<a name="l04284"></a>04284 }
<a name="l04285"></a>04285 
<a name="l04286"></a>04286 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04287"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a35faa5c32eaac056e6cfd90d75037277">04287</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a35faa5c32eaac056e6cfd90d75037277">alt_merge_opt_exact_info</a>(<a class="code" href="../../d8/dc8/struct_opt_exact_info.html">OptExactInfo</a>* to, <a class="code" href="../../d8/dc8/struct_opt_exact_info.html">OptExactInfo</a>* <a class="code" href="../../d1/d6f/date__strftime_8c.html#aa62ba8463316e20fcef4b9db83bab2fd">add</a>, <a class="code" href="../../d6/d2e/struct_opt_env.html">OptEnv</a>* env)
<a name="l04288"></a>04288 {
<a name="l04289"></a>04289   <span class="keywordtype">int</span> i, j, <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l04290"></a>04290 
<a name="l04291"></a>04291   <span class="keywordflow">if</span> (add-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> == 0 || to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> == 0) {
<a name="l04292"></a>04292     <a class="code" href="../../d0/d86/regcomp_8c.html#a1c8a658cf0018bc9205e4c6afce4173c">clear_opt_exact_info</a>(to);
<a name="l04293"></a>04293     return ;
<a name="l04294"></a>04294   }
<a name="l04295"></a>04295 
<a name="l04296"></a>04296   <span class="keywordflow">if</span> (! <a class="code" href="../../d0/d86/regcomp_8c.html#ae5b5a60bc20ac40a5e1339c7734a4e5b">is_equal_mml</a>(&amp;to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a95319a8e4d24521aec38ce39d764633d">mmd</a>, &amp;add-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a95319a8e4d24521aec38ce39d764633d">mmd</a>)) {
<a name="l04297"></a>04297     <a class="code" href="../../d0/d86/regcomp_8c.html#a1c8a658cf0018bc9205e4c6afce4173c">clear_opt_exact_info</a>(to);
<a name="l04298"></a>04298     return ;
<a name="l04299"></a>04299   }
<a name="l04300"></a>04300 
<a name="l04301"></a>04301   <span class="keywordflow">for</span> (i = 0; i &lt; to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> &amp;&amp; i &lt; add-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a>; ) {
<a name="l04302"></a>04302     <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#ab77ee2f1fbe3f3701af923a330d1214d">s</a>[i] != add-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#ab77ee2f1fbe3f3701af923a330d1214d">s</a>[i]) <span class="keywordflow">break</span>;
<a name="l04303"></a>04303     len = <a class="code" href="../../d3/d09/ripper_8y.html#ae9f8530a4c9ec89ae8d62ce5b4410aad">enclen</a>(env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>, to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#ab77ee2f1fbe3f3701af923a330d1214d">s</a> + i, to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#ab77ee2f1fbe3f3701af923a330d1214d">s</a> + to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a>);
<a name="l04304"></a>04304 
<a name="l04305"></a>04305     <span class="keywordflow">for</span> (j = 1; j &lt; len; j++) {
<a name="l04306"></a>04306       <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#ab77ee2f1fbe3f3701af923a330d1214d">s</a>[i+j] != add-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#ab77ee2f1fbe3f3701af923a330d1214d">s</a>[i+j]) <span class="keywordflow">break</span>;
<a name="l04307"></a>04307     }
<a name="l04308"></a>04308     <span class="keywordflow">if</span> (j &lt; len) <span class="keywordflow">break</span>;
<a name="l04309"></a>04309     i += len;
<a name="l04310"></a>04310   }
<a name="l04311"></a>04311 
<a name="l04312"></a>04312   <span class="keywordflow">if</span> (! add-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a> || i &lt; add-&gt;len || i &lt; to-&gt;len) {
<a name="l04313"></a>04313     to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a> = 0;
<a name="l04314"></a>04314   }
<a name="l04315"></a>04315   to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> = i;
<a name="l04316"></a>04316   to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a18509747454f3fbb63451cc6ee80b29b">ignore_case</a> |= add-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a18509747454f3fbb63451cc6ee80b29b">ignore_case</a>;
<a name="l04317"></a>04317 
<a name="l04318"></a>04318   <a class="code" href="../../d0/d86/regcomp_8c.html#ae80c62aeb0fdfe07f8a303c4addd10e6">alt_merge_opt_anc_info</a>(&amp;to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a09a227bb2282ed54b850492250cf8ce4">anc</a>, &amp;add-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a09a227bb2282ed54b850492250cf8ce4">anc</a>);
<a name="l04319"></a>04319   <span class="keywordflow">if</span> (! to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a>) to-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a09a227bb2282ed54b850492250cf8ce4">anc</a>.<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#a2b9a54a503c8fbcd8b46f42007f2147d">right_anchor</a> = 0;
<a name="l04320"></a>04320 }
<a name="l04321"></a>04321 
<a name="l04322"></a>04322 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04323"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a3482bb5c83438601e2bce401a49b72d9">04323</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a3482bb5c83438601e2bce401a49b72d9">select_opt_exact_info</a>(<a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc, <a class="code" href="../../d8/dc8/struct_opt_exact_info.html">OptExactInfo</a>* now, <a class="code" href="../../d8/dc8/struct_opt_exact_info.html">OptExactInfo</a>* alt)
<a name="l04324"></a>04324 {
<a name="l04325"></a>04325   <span class="keywordtype">int</span> v1, v2;
<a name="l04326"></a>04326 
<a name="l04327"></a>04327   v1 = now-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a>;
<a name="l04328"></a>04328   v2 = alt-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a>;
<a name="l04329"></a>04329 
<a name="l04330"></a>04330   <span class="keywordflow">if</span> (v2 == 0) {
<a name="l04331"></a>04331     return ;
<a name="l04332"></a>04332   }
<a name="l04333"></a>04333   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (v1 == 0) {
<a name="l04334"></a>04334     <a class="code" href="../../d0/d86/regcomp_8c.html#a966940434a5979df5e76f85c58a2e732">copy_opt_exact_info</a>(now, alt);
<a name="l04335"></a>04335     return ;
<a name="l04336"></a>04336   }
<a name="l04337"></a>04337   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (v1 &lt;= 2 &amp;&amp; v2 &lt;= 2) {
<a name="l04338"></a>04338     <span class="comment">/* ByteValTable[x] is big value --&gt; low price */</span>
<a name="l04339"></a>04339     v2 = <a class="code" href="../../d0/d86/regcomp_8c.html#aa212386e3a0760597c7752595702ae27">map_position_value</a>(enc, now-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#ab77ee2f1fbe3f3701af923a330d1214d">s</a>[0]);
<a name="l04340"></a>04340     v1 = <a class="code" href="../../d0/d86/regcomp_8c.html#aa212386e3a0760597c7752595702ae27">map_position_value</a>(enc, alt-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#ab77ee2f1fbe3f3701af923a330d1214d">s</a>[0]);
<a name="l04341"></a>04341 
<a name="l04342"></a>04342     <span class="keywordflow">if</span> (now-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> &gt; 1) v1 += 5;
<a name="l04343"></a>04343     <span class="keywordflow">if</span> (alt-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> &gt; 1) v2 += 5;
<a name="l04344"></a>04344   }
<a name="l04345"></a>04345 
<a name="l04346"></a>04346   <span class="keywordflow">if</span> (now-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a18509747454f3fbb63451cc6ee80b29b">ignore_case</a> == 0) v1 *= 2;
<a name="l04347"></a>04347   <span class="keywordflow">if</span> (alt-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a18509747454f3fbb63451cc6ee80b29b">ignore_case</a> == 0) v2 *= 2;
<a name="l04348"></a>04348 
<a name="l04349"></a>04349   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#a2c24fa918b8841658b94ae285329cf44">comp_distance_value</a>(&amp;now-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a95319a8e4d24521aec38ce39d764633d">mmd</a>, &amp;alt-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a95319a8e4d24521aec38ce39d764633d">mmd</a>, v1, v2) &gt; 0)
<a name="l04350"></a>04350     <a class="code" href="../../d0/d86/regcomp_8c.html#a966940434a5979df5e76f85c58a2e732">copy_opt_exact_info</a>(now, alt);
<a name="l04351"></a>04351 }
<a name="l04352"></a>04352 
<a name="l04353"></a>04353 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04354"></a><a class="code" href="../../d0/d86/regcomp_8c.html#afbc17307a1c543b95e89ec2d9a63f340">04354</a> <a class="code" href="../../d0/d86/regcomp_8c.html#afbc17307a1c543b95e89ec2d9a63f340">clear_opt_map_info</a>(<a class="code" href="../../d3/dd6/struct_opt_map_info.html">OptMapInfo</a>* map)
<a name="l04355"></a>04355 {
<a name="l04356"></a>04356   <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d3/dd6/struct_opt_map_info.html">OptMapInfo</a> clean_info = {
<a name="l04357"></a>04357     {0, 0}, {0, 0}, 0,
<a name="l04358"></a>04358     {
<a name="l04359"></a>04359       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
<a name="l04360"></a>04360       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
<a name="l04361"></a>04361       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
<a name="l04362"></a>04362       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
<a name="l04363"></a>04363       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
<a name="l04364"></a>04364       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
<a name="l04365"></a>04365       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
<a name="l04366"></a>04366       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
<a name="l04367"></a>04367       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
<a name="l04368"></a>04368       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
<a name="l04369"></a>04369       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
<a name="l04370"></a>04370       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
<a name="l04371"></a>04371       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
<a name="l04372"></a>04372       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
<a name="l04373"></a>04373       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
<a name="l04374"></a>04374       0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
<a name="l04375"></a>04375     }
<a name="l04376"></a>04376   };
<a name="l04377"></a>04377 
<a name="l04378"></a>04378   <a class="code" href="../../d6/d87/regint_8h.html#ad9f94f6a1ee2c69b34d8034684b31518">xmemcpy</a>(map, &amp;clean_info, <span class="keyword">sizeof</span>(<a class="code" href="../../d3/dd6/struct_opt_map_info.html">OptMapInfo</a>));
<a name="l04379"></a>04379 }
<a name="l04380"></a>04380 
<a name="l04381"></a>04381 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04382"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a058f6d84d2d5b6a8a1838ac4f6cff387">04382</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a058f6d84d2d5b6a8a1838ac4f6cff387">copy_opt_map_info</a>(<a class="code" href="../../d3/dd6/struct_opt_map_info.html">OptMapInfo</a>* to, <a class="code" href="../../d3/dd6/struct_opt_map_info.html">OptMapInfo</a>* from)
<a name="l04383"></a>04383 {
<a name="l04384"></a>04384   *to = *from;
<a name="l04385"></a>04385 }
<a name="l04386"></a>04386 
<a name="l04387"></a>04387 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04388"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a165619843f96ab55d5698d4414a3dfa8">04388</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a165619843f96ab55d5698d4414a3dfa8">add_char_opt_map_info</a>(<a class="code" href="../../d3/dd6/struct_opt_map_info.html">OptMapInfo</a>* map, <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> c, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc)
<a name="l04389"></a>04389 {
<a name="l04390"></a>04390   <span class="keywordflow">if</span> (map-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a5338e964ee9f34dcc6d5280c8d80f2f7">map</a>[c] == 0) {
<a name="l04391"></a>04391     map-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a5338e964ee9f34dcc6d5280c8d80f2f7">map</a>[c] = 1;
<a name="l04392"></a>04392     map-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a57c79c254c912dd039f0db900b7be0ec">value</a> += <a class="code" href="../../d0/d86/regcomp_8c.html#aa212386e3a0760597c7752595702ae27">map_position_value</a>(enc, c);
<a name="l04393"></a>04393   }
<a name="l04394"></a>04394 }
<a name="l04395"></a>04395 
<a name="l04396"></a>04396 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l04397"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ad96b3ac8783b3c6c9fcdb7fcd9f426d7">04397</a> <a class="code" href="../../d0/d86/regcomp_8c.html#ad96b3ac8783b3c6c9fcdb7fcd9f426d7">add_char_amb_opt_map_info</a>(<a class="code" href="../../d3/dd6/struct_opt_map_info.html">OptMapInfo</a>* map, <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* p, <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* end,
<a name="l04398"></a>04398                           <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc, <a class="code" href="../../d8/db3/oniguruma_8h.html#a33aa7ed7612104fa36da121c8ecb4d4e">OnigCaseFoldType</a> case_fold_flag)
<a name="l04399"></a>04399 {
<a name="l04400"></a>04400   <a class="code" href="../../d3/d82/struct_onig_case_fold_code_item.html">OnigCaseFoldCodeItem</a> items[<a class="code" href="../../d8/db3/oniguruma_8h.html#ac28bb2f36ed83c00bf7c89f4bc042f8b">ONIGENC_GET_CASE_FOLD_CODES_MAX_NUM</a>];
<a name="l04401"></a>04401   <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> <a class="code" href="../../d6/da0/nkf-utf8_2nkf_8c.html#ac37f17a60c8b5533aac4840c681f62b8">buf</a>[<a class="code" href="../../d8/db3/oniguruma_8h.html#a5eba220c99bf5d04cfe9dc51e744b747">ONIGENC_CODE_TO_MBC_MAXLEN</a>];
<a name="l04402"></a>04402   <span class="keywordtype">int</span> i, n;
<a name="l04403"></a>04403 
<a name="l04404"></a>04404   <a class="code" href="../../d0/d86/regcomp_8c.html#a165619843f96ab55d5698d4414a3dfa8">add_char_opt_map_info</a>(map, p[0], enc);
<a name="l04405"></a>04405 
<a name="l04406"></a>04406   case_fold_flag = <a class="code" href="../../d6/d87/regint_8h.html#af05e755f5b11568c5a0258b03155935d">DISABLE_CASE_FOLD_MULTI_CHAR</a>(case_fold_flag);
<a name="l04407"></a>04407   n = <a class="code" href="../../d8/db3/oniguruma_8h.html#aa066ff2aa5e5d9442c4de2ccb86a4d44">ONIGENC_GET_CASE_FOLD_CODES_BY_STR</a>(enc, case_fold_flag, p, end, items);
<a name="l04408"></a>04408   <span class="keywordflow">if</span> (n &lt; 0) <span class="keywordflow">return</span> n;
<a name="l04409"></a>04409 
<a name="l04410"></a>04410   <span class="keywordflow">for</span> (i = 0; i &lt; n; i++) {
<a name="l04411"></a>04411     <a class="code" href="../../d8/db3/oniguruma_8h.html#a203e2c46a8be4e9dccc830d1b408b83b">ONIGENC_CODE_TO_MBC</a>(enc, items[i].code[0], buf);
<a name="l04412"></a>04412     <a class="code" href="../../d0/d86/regcomp_8c.html#a165619843f96ab55d5698d4414a3dfa8">add_char_opt_map_info</a>(map, buf[0], enc);
<a name="l04413"></a>04413   }
<a name="l04414"></a>04414 
<a name="l04415"></a>04415   <span class="keywordflow">return</span> 0;
<a name="l04416"></a>04416 }
<a name="l04417"></a>04417 
<a name="l04418"></a>04418 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04419"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a4ab6f85dfea9fee54affb419de818e67">04419</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a4ab6f85dfea9fee54affb419de818e67">select_opt_map_info</a>(<a class="code" href="../../d3/dd6/struct_opt_map_info.html">OptMapInfo</a>* now, <a class="code" href="../../d3/dd6/struct_opt_map_info.html">OptMapInfo</a>* alt)
<a name="l04420"></a>04420 {
<a name="l04421"></a>04421   <span class="keyword">const</span> <span class="keywordtype">int</span> z = 1&lt;&lt;15; <span class="comment">/* 32768: something big value */</span>
<a name="l04422"></a>04422 
<a name="l04423"></a>04423   <span class="keywordtype">int</span> v1, v2;
<a name="l04424"></a>04424 
<a name="l04425"></a>04425   <span class="keywordflow">if</span> (alt-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a57c79c254c912dd039f0db900b7be0ec">value</a> == 0) return ;
<a name="l04426"></a>04426   <span class="keywordflow">if</span> (now-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a57c79c254c912dd039f0db900b7be0ec">value</a> == 0) {
<a name="l04427"></a>04427     <a class="code" href="../../d0/d86/regcomp_8c.html#a058f6d84d2d5b6a8a1838ac4f6cff387">copy_opt_map_info</a>(now, alt);
<a name="l04428"></a>04428     return ;
<a name="l04429"></a>04429   }
<a name="l04430"></a>04430 
<a name="l04431"></a>04431   v1 = z / now-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a57c79c254c912dd039f0db900b7be0ec">value</a>;
<a name="l04432"></a>04432   v2 = z / alt-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a57c79c254c912dd039f0db900b7be0ec">value</a>;
<a name="l04433"></a>04433   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#a2c24fa918b8841658b94ae285329cf44">comp_distance_value</a>(&amp;now-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#aed8cda0ff7790a099ce70a7b5aa6488a">mmd</a>, &amp;alt-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#aed8cda0ff7790a099ce70a7b5aa6488a">mmd</a>, v1, v2) &gt; 0)
<a name="l04434"></a>04434     <a class="code" href="../../d0/d86/regcomp_8c.html#a058f6d84d2d5b6a8a1838ac4f6cff387">copy_opt_map_info</a>(now, alt);
<a name="l04435"></a>04435 }
<a name="l04436"></a>04436 
<a name="l04437"></a>04437 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l04438"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a3bb9e5c82dc98336dfb7494c79817e52">04438</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a3bb9e5c82dc98336dfb7494c79817e52">comp_opt_exact_or_map_info</a>(<a class="code" href="../../d8/dc8/struct_opt_exact_info.html">OptExactInfo</a>* e, <a class="code" href="../../d3/dd6/struct_opt_map_info.html">OptMapInfo</a>* m)
<a name="l04439"></a>04439 {
<a name="l04440"></a>04440 <span class="preprocessor">#define COMP_EM_BASE  20</span>
<a name="l04441"></a>04441 <span class="preprocessor"></span>  <span class="keywordtype">int</span> ve, vm;
<a name="l04442"></a>04442 
<a name="l04443"></a>04443   <span class="keywordflow">if</span> (m-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a57c79c254c912dd039f0db900b7be0ec">value</a> &lt;= 0) <span class="keywordflow">return</span> -1;
<a name="l04444"></a>04444 
<a name="l04445"></a>04445   ve = <a class="code" href="../../d0/d86/regcomp_8c.html#a6a6dc014090d88f5e5d8af7f92e2b8e3">COMP_EM_BASE</a> * e-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> * (e-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a18509747454f3fbb63451cc6ee80b29b">ignore_case</a> ? 1 : 2);
<a name="l04446"></a>04446   vm = <a class="code" href="../../d0/d86/regcomp_8c.html#a6a6dc014090d88f5e5d8af7f92e2b8e3">COMP_EM_BASE</a> * 5 * 2 / m-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a57c79c254c912dd039f0db900b7be0ec">value</a>;
<a name="l04447"></a>04447   <span class="keywordflow">return</span> <a class="code" href="../../d0/d86/regcomp_8c.html#a2c24fa918b8841658b94ae285329cf44">comp_distance_value</a>(&amp;e-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a95319a8e4d24521aec38ce39d764633d">mmd</a>, &amp;m-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#aed8cda0ff7790a099ce70a7b5aa6488a">mmd</a>, ve, vm);
<a name="l04448"></a>04448 }
<a name="l04449"></a>04449 
<a name="l04450"></a>04450 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04451"></a><a class="code" href="../../d0/d86/regcomp_8c.html#aac2007aeb9a098813a027e25e24c0fc9">04451</a> <a class="code" href="../../d0/d86/regcomp_8c.html#aac2007aeb9a098813a027e25e24c0fc9">alt_merge_opt_map_info</a>(<a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc, <a class="code" href="../../d3/dd6/struct_opt_map_info.html">OptMapInfo</a>* to, <a class="code" href="../../d3/dd6/struct_opt_map_info.html">OptMapInfo</a>* <a class="code" href="../../d1/d6f/date__strftime_8c.html#aa62ba8463316e20fcef4b9db83bab2fd">add</a>)
<a name="l04452"></a>04452 {
<a name="l04453"></a>04453   <span class="keywordtype">int</span> i, val;
<a name="l04454"></a>04454 
<a name="l04455"></a>04455   <span class="comment">/* if (! is_equal_mml(&amp;to-&gt;mmd, &amp;add-&gt;mmd)) return ; */</span>
<a name="l04456"></a>04456   <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a57c79c254c912dd039f0db900b7be0ec">value</a> == 0) return ;
<a name="l04457"></a>04457   <span class="keywordflow">if</span> (add-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a57c79c254c912dd039f0db900b7be0ec">value</a> == 0 || to-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#aed8cda0ff7790a099ce70a7b5aa6488a">mmd</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> &lt; add-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#aed8cda0ff7790a099ce70a7b5aa6488a">mmd</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a>) {
<a name="l04458"></a>04458     <a class="code" href="../../d0/d86/regcomp_8c.html#afbc17307a1c543b95e89ec2d9a63f340">clear_opt_map_info</a>(to);
<a name="l04459"></a>04459     return ;
<a name="l04460"></a>04460   }
<a name="l04461"></a>04461 
<a name="l04462"></a>04462   <a class="code" href="../../d0/d86/regcomp_8c.html#adc7b2f0076ff0ef62c590aeac1459bfe">alt_merge_mml</a>(&amp;to-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#aed8cda0ff7790a099ce70a7b5aa6488a">mmd</a>, &amp;add-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#aed8cda0ff7790a099ce70a7b5aa6488a">mmd</a>);
<a name="l04463"></a>04463 
<a name="l04464"></a>04464   val = 0;
<a name="l04465"></a>04465   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d8/db3/oniguruma_8h.html#aa5e520778f7bf10deda0dff9570b36de">ONIG_CHAR_TABLE_SIZE</a>; i++) {
<a name="l04466"></a>04466     <span class="keywordflow">if</span> (add-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a5338e964ee9f34dcc6d5280c8d80f2f7">map</a>[i])
<a name="l04467"></a>04467       to-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a5338e964ee9f34dcc6d5280c8d80f2f7">map</a>[i] = 1;
<a name="l04468"></a>04468 
<a name="l04469"></a>04469     <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a5338e964ee9f34dcc6d5280c8d80f2f7">map</a>[i])
<a name="l04470"></a>04470       val += <a class="code" href="../../d0/d86/regcomp_8c.html#aa212386e3a0760597c7752595702ae27">map_position_value</a>(enc, i);
<a name="l04471"></a>04471   }
<a name="l04472"></a>04472   to-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a57c79c254c912dd039f0db900b7be0ec">value</a> = val;
<a name="l04473"></a>04473 
<a name="l04474"></a>04474   <a class="code" href="../../d0/d86/regcomp_8c.html#ae80c62aeb0fdfe07f8a303c4addd10e6">alt_merge_opt_anc_info</a>(&amp;to-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#ad93a89419f970f3d9f5b196d3fdcb578">anc</a>, &amp;add-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#ad93a89419f970f3d9f5b196d3fdcb578">anc</a>);
<a name="l04475"></a>04475 }
<a name="l04476"></a>04476 
<a name="l04477"></a>04477 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04478"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a201a436303b0cf2736f51eeb95d1ffe2">04478</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a201a436303b0cf2736f51eeb95d1ffe2">set_bound_node_opt_info</a>(<a class="code" href="../../d9/dcf/struct_node_opt_info.html">NodeOptInfo</a>* opt, <a class="code" href="../../d9/d1f/struct_min_max_len.html">MinMaxLen</a>* mmd)
<a name="l04479"></a>04479 {
<a name="l04480"></a>04480   <a class="code" href="../../d0/d86/regcomp_8c.html#a6ddd045344fb1654955b1fe5a6ad1de5">copy_mml</a>(&amp;(opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a95319a8e4d24521aec38ce39d764633d">mmd</a>),  mmd);
<a name="l04481"></a>04481   <a class="code" href="../../d0/d86/regcomp_8c.html#a6ddd045344fb1654955b1fe5a6ad1de5">copy_mml</a>(&amp;(opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#aac24e1f9229b602f12b0e696414f5408">expr</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a95319a8e4d24521aec38ce39d764633d">mmd</a>), mmd);
<a name="l04482"></a>04482   <a class="code" href="../../d0/d86/regcomp_8c.html#a6ddd045344fb1654955b1fe5a6ad1de5">copy_mml</a>(&amp;(opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>.<a class="code" href="../../d3/dd6/struct_opt_map_info.html#aed8cda0ff7790a099ce70a7b5aa6488a">mmd</a>),  mmd);
<a name="l04483"></a>04483 }
<a name="l04484"></a>04484 
<a name="l04485"></a>04485 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04486"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a46fad3850a515494a09c2b1cb67ebb77">04486</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a46fad3850a515494a09c2b1cb67ebb77">clear_node_opt_info</a>(<a class="code" href="../../d9/dcf/struct_node_opt_info.html">NodeOptInfo</a>* opt)
<a name="l04487"></a>04487 {
<a name="l04488"></a>04488   <a class="code" href="../../d0/d86/regcomp_8c.html#a6657b0c274b61a7c0654e51e52eef6c5">clear_mml</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>);
<a name="l04489"></a>04489   <a class="code" href="../../d0/d86/regcomp_8c.html#a13a25e75208ee510a293659d6e4ef345">clear_opt_anc_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">anc</a>);
<a name="l04490"></a>04490   <a class="code" href="../../d0/d86/regcomp_8c.html#a1c8a658cf0018bc9205e4c6afce4173c">clear_opt_exact_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>);
<a name="l04491"></a>04491   <a class="code" href="../../d0/d86/regcomp_8c.html#a1c8a658cf0018bc9205e4c6afce4173c">clear_opt_exact_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a9b4848025c0b6e49574bf20cf7a74db0">exm</a>);
<a name="l04492"></a>04492   <a class="code" href="../../d0/d86/regcomp_8c.html#a1c8a658cf0018bc9205e4c6afce4173c">clear_opt_exact_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#aac24e1f9229b602f12b0e696414f5408">expr</a>);
<a name="l04493"></a>04493   <a class="code" href="../../d0/d86/regcomp_8c.html#afbc17307a1c543b95e89ec2d9a63f340">clear_opt_map_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>);
<a name="l04494"></a>04494 }
<a name="l04495"></a>04495 
<a name="l04496"></a>04496 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04497"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a4805c548139f3e569bc14bb2ee848dee">04497</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a4805c548139f3e569bc14bb2ee848dee">copy_node_opt_info</a>(<a class="code" href="../../d9/dcf/struct_node_opt_info.html">NodeOptInfo</a>* to, <a class="code" href="../../d9/dcf/struct_node_opt_info.html">NodeOptInfo</a>* from)
<a name="l04498"></a>04498 {
<a name="l04499"></a>04499   *to = *from;
<a name="l04500"></a>04500 }
<a name="l04501"></a>04501 
<a name="l04502"></a>04502 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04503"></a><a class="code" href="../../d0/d86/regcomp_8c.html#af46da737215fbb617bdc641d88eb3a61">04503</a> <a class="code" href="../../d0/d86/regcomp_8c.html#af46da737215fbb617bdc641d88eb3a61">concat_left_node_opt_info</a>(<a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc, <a class="code" href="../../d9/dcf/struct_node_opt_info.html">NodeOptInfo</a>* to, <a class="code" href="../../d9/dcf/struct_node_opt_info.html">NodeOptInfo</a>* <a class="code" href="../../d1/d6f/date__strftime_8c.html#aa62ba8463316e20fcef4b9db83bab2fd">add</a>)
<a name="l04504"></a>04504 {
<a name="l04505"></a>04505   <span class="keywordtype">int</span> exb_reach, exm_reach;
<a name="l04506"></a>04506   <a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a> tanc;
<a name="l04507"></a>04507 
<a name="l04508"></a>04508   <a class="code" href="../../d0/d86/regcomp_8c.html#adf1ffe8c1b8ee6888d734c29e9cf3fad">concat_opt_anc_info</a>(&amp;tanc, &amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">anc</a>, &amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">anc</a>, to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a>, add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a>);
<a name="l04509"></a>04509   <a class="code" href="../../d0/d86/regcomp_8c.html#a598aa744df53e329cc9d560ad7a43c92">copy_opt_anc_info</a>(&amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">anc</a>, &amp;tanc);
<a name="l04510"></a>04510 
<a name="l04511"></a>04511   <span class="keywordflow">if</span> (add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> &gt; 0 &amp;&amp; to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> == 0) {
<a name="l04512"></a>04512     <a class="code" href="../../d0/d86/regcomp_8c.html#adf1ffe8c1b8ee6888d734c29e9cf3fad">concat_opt_anc_info</a>(&amp;tanc, &amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">anc</a>, &amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a09a227bb2282ed54b850492250cf8ce4">anc</a>,
<a name="l04513"></a>04513                         to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a>, add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a>);
<a name="l04514"></a>04514     <a class="code" href="../../d0/d86/regcomp_8c.html#a598aa744df53e329cc9d560ad7a43c92">copy_opt_anc_info</a>(&amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a09a227bb2282ed54b850492250cf8ce4">anc</a>, &amp;tanc);
<a name="l04515"></a>04515   }
<a name="l04516"></a>04516 
<a name="l04517"></a>04517   <span class="keywordflow">if</span> (add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>.<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a57c79c254c912dd039f0db900b7be0ec">value</a> &gt; 0 &amp;&amp; to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> == 0) {
<a name="l04518"></a>04518     <span class="keywordflow">if</span> (add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>.<a class="code" href="../../d3/dd6/struct_opt_map_info.html#aed8cda0ff7790a099ce70a7b5aa6488a">mmd</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> == 0)
<a name="l04519"></a>04519       add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>.<a class="code" href="../../d3/dd6/struct_opt_map_info.html#ad93a89419f970f3d9f5b196d3fdcb578">anc</a>.<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#ab9a69bdf299121ad75108a3e1bf8f6fd">left_anchor</a> |= to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">anc</a>.<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#ab9a69bdf299121ad75108a3e1bf8f6fd">left_anchor</a>;
<a name="l04520"></a>04520   }
<a name="l04521"></a>04521 
<a name="l04522"></a>04522   exb_reach = to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a>;
<a name="l04523"></a>04523   exm_reach = to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a9b4848025c0b6e49574bf20cf7a74db0">exm</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a>;
<a name="l04524"></a>04524 
<a name="l04525"></a>04525   <span class="keywordflow">if</span> (add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> != 0)
<a name="l04526"></a>04526     to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a> = to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a9b4848025c0b6e49574bf20cf7a74db0">exm</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a> = 0;
<a name="l04527"></a>04527 
<a name="l04528"></a>04528   <span class="keywordflow">if</span> (add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> &gt; 0) {
<a name="l04529"></a>04529     <span class="keywordflow">if</span> (exb_reach) {
<a name="l04530"></a>04530       <a class="code" href="../../d0/d86/regcomp_8c.html#ae634e8024dd636cd22c5d43170b95a37">concat_opt_exact_info</a>(&amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>, &amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>, enc);
<a name="l04531"></a>04531       <a class="code" href="../../d0/d86/regcomp_8c.html#a1c8a658cf0018bc9205e4c6afce4173c">clear_opt_exact_info</a>(&amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>);
<a name="l04532"></a>04532     }
<a name="l04533"></a>04533     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (exm_reach) {
<a name="l04534"></a>04534       <a class="code" href="../../d0/d86/regcomp_8c.html#ae634e8024dd636cd22c5d43170b95a37">concat_opt_exact_info</a>(&amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a9b4848025c0b6e49574bf20cf7a74db0">exm</a>, &amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>, enc);
<a name="l04535"></a>04535       <a class="code" href="../../d0/d86/regcomp_8c.html#a1c8a658cf0018bc9205e4c6afce4173c">clear_opt_exact_info</a>(&amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>);
<a name="l04536"></a>04536     }
<a name="l04537"></a>04537   }
<a name="l04538"></a>04538   <a class="code" href="../../d0/d86/regcomp_8c.html#a3482bb5c83438601e2bce401a49b72d9">select_opt_exact_info</a>(enc, &amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a9b4848025c0b6e49574bf20cf7a74db0">exm</a>, &amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>);
<a name="l04539"></a>04539   <a class="code" href="../../d0/d86/regcomp_8c.html#a3482bb5c83438601e2bce401a49b72d9">select_opt_exact_info</a>(enc, &amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a9b4848025c0b6e49574bf20cf7a74db0">exm</a>, &amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a9b4848025c0b6e49574bf20cf7a74db0">exm</a>);
<a name="l04540"></a>04540 
<a name="l04541"></a>04541   <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#aac24e1f9229b602f12b0e696414f5408">expr</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> &gt; 0) {
<a name="l04542"></a>04542     <span class="keywordflow">if</span> (add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> &gt; 0) {
<a name="l04543"></a>04543       <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#aac24e1f9229b602f12b0e696414f5408">expr</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> &gt; (<span class="keywordtype">int</span> )add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a>)
<a name="l04544"></a>04544         to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#aac24e1f9229b602f12b0e696414f5408">expr</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> = (int)add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a>;
<a name="l04545"></a>04545 
<a name="l04546"></a>04546       <a class="code" href="../../d7/dc0/parse_8y.html#a2ac1143ac343c79cbfa448e30d74fa1c">if</a> (to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#aac24e1f9229b602f12b0e696414f5408">expr</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a95319a8e4d24521aec38ce39d764633d">mmd</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> == 0)
<a name="l04547"></a>04547         <a class="code" href="../../d0/d86/regcomp_8c.html#a3482bb5c83438601e2bce401a49b72d9">select_opt_exact_info</a>(enc, &amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>, &amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#aac24e1f9229b602f12b0e696414f5408">expr</a>);
<a name="l04548"></a>04548       <span class="keywordflow">else</span>
<a name="l04549"></a>04549         <a class="code" href="../../d0/d86/regcomp_8c.html#a3482bb5c83438601e2bce401a49b72d9">select_opt_exact_info</a>(enc, &amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a9b4848025c0b6e49574bf20cf7a74db0">exm</a>, &amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#aac24e1f9229b602f12b0e696414f5408">expr</a>);
<a name="l04550"></a>04550     }
<a name="l04551"></a>04551   }
<a name="l04552"></a>04552   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#aac24e1f9229b602f12b0e696414f5408">expr</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> &gt; 0) {
<a name="l04553"></a>04553     <a class="code" href="../../d0/d86/regcomp_8c.html#a966940434a5979df5e76f85c58a2e732">copy_opt_exact_info</a>(&amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#aac24e1f9229b602f12b0e696414f5408">expr</a>, &amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#aac24e1f9229b602f12b0e696414f5408">expr</a>);
<a name="l04554"></a>04554   }
<a name="l04555"></a>04555 
<a name="l04556"></a>04556   <a class="code" href="../../d0/d86/regcomp_8c.html#a4ab6f85dfea9fee54affb419de818e67">select_opt_map_info</a>(&amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>, &amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>);
<a name="l04557"></a>04557 
<a name="l04558"></a>04558   <a class="code" href="../../d0/d86/regcomp_8c.html#a29dbe3e7e64d0d79fece8290c191096b">add_mml</a>(&amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>, &amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>);
<a name="l04559"></a>04559 }
<a name="l04560"></a>04560 
<a name="l04561"></a>04561 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04562"></a><a class="code" href="../../d0/d86/regcomp_8c.html#abb2b9ef2e5fdeda9ad99478734100701">04562</a> <a class="code" href="../../d0/d86/regcomp_8c.html#abb2b9ef2e5fdeda9ad99478734100701">alt_merge_node_opt_info</a>(<a class="code" href="../../d9/dcf/struct_node_opt_info.html">NodeOptInfo</a>* to, <a class="code" href="../../d9/dcf/struct_node_opt_info.html">NodeOptInfo</a>* <a class="code" href="../../d1/d6f/date__strftime_8c.html#aa62ba8463316e20fcef4b9db83bab2fd">add</a>, <a class="code" href="../../d6/d2e/struct_opt_env.html">OptEnv</a>* env)
<a name="l04563"></a>04563 {
<a name="l04564"></a>04564   <a class="code" href="../../d0/d86/regcomp_8c.html#ae80c62aeb0fdfe07f8a303c4addd10e6">alt_merge_opt_anc_info</a>  (&amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">anc</a>,  &amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">anc</a>);
<a name="l04565"></a>04565   <a class="code" href="../../d0/d86/regcomp_8c.html#a35faa5c32eaac056e6cfd90d75037277">alt_merge_opt_exact_info</a>(&amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>,  &amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>, env);
<a name="l04566"></a>04566   <a class="code" href="../../d0/d86/regcomp_8c.html#a35faa5c32eaac056e6cfd90d75037277">alt_merge_opt_exact_info</a>(&amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a9b4848025c0b6e49574bf20cf7a74db0">exm</a>,  &amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a9b4848025c0b6e49574bf20cf7a74db0">exm</a>, env);
<a name="l04567"></a>04567   <a class="code" href="../../d0/d86/regcomp_8c.html#a35faa5c32eaac056e6cfd90d75037277">alt_merge_opt_exact_info</a>(&amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#aac24e1f9229b602f12b0e696414f5408">expr</a>, &amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#aac24e1f9229b602f12b0e696414f5408">expr</a>, env);
<a name="l04568"></a>04568   <a class="code" href="../../d0/d86/regcomp_8c.html#aac2007aeb9a098813a027e25e24c0fc9">alt_merge_opt_map_info</a>(env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>, &amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>,  &amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>);
<a name="l04569"></a>04569 
<a name="l04570"></a>04570   <a class="code" href="../../d0/d86/regcomp_8c.html#adc7b2f0076ff0ef62c590aeac1459bfe">alt_merge_mml</a>(&amp;to-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>, &amp;add-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>);
<a name="l04571"></a>04571 }
<a name="l04572"></a>04572 
<a name="l04573"></a>04573 
<a name="l04574"></a><a class="code" href="../../d0/d86/regcomp_8c.html#adf166474e0286654536600887f55d285">04574</a> <span class="preprocessor">#define MAX_NODE_OPT_INFO_REF_COUNT    5</span>
<a name="l04575"></a>04575 <span class="preprocessor"></span>
<a name="l04576"></a>04576 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l04577"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a64bf2ec6c871b03f56252ce16f83753b">04577</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a64bf2ec6c871b03f56252ce16f83753b">optimize_node_left</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../d9/dcf/struct_node_opt_info.html">NodeOptInfo</a>* opt, <a class="code" href="../../d6/d2e/struct_opt_env.html">OptEnv</a>* env)
<a name="l04578"></a>04578 {
<a name="l04579"></a>04579   <span class="keywordtype">int</span> type;
<a name="l04580"></a>04580   <span class="keywordtype">int</span> r = 0;
<a name="l04581"></a>04581 
<a name="l04582"></a>04582   <a class="code" href="../../d0/d86/regcomp_8c.html#a46fad3850a515494a09c2b1cb67ebb77">clear_node_opt_info</a>(opt);
<a name="l04583"></a>04583   <a class="code" href="../../d0/d86/regcomp_8c.html#a201a436303b0cf2736f51eeb95d1ffe2">set_bound_node_opt_info</a>(opt, &amp;env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a283a4ef13786d1740f6e602a979c9fc4">mmd</a>);
<a name="l04584"></a>04584 
<a name="l04585"></a>04585   type = <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node);
<a name="l04586"></a>04586   <span class="keywordflow">switch</span> (type) {
<a name="l04587"></a>04587   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l04588"></a>04588     {
<a name="l04589"></a>04589       <a class="code" href="../../d6/d2e/struct_opt_env.html">OptEnv</a> nenv;
<a name="l04590"></a>04590       <a class="code" href="../../d9/dcf/struct_node_opt_info.html">NodeOptInfo</a> nopt;
<a name="l04591"></a>04591       <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* nd = node;
<a name="l04592"></a>04592 
<a name="l04593"></a>04593       <a class="code" href="../../d0/d86/regcomp_8c.html#a645d272d8107e84b51c83212d27b32e7">copy_opt_env</a>(&amp;nenv, env);
<a name="l04594"></a>04594       <span class="keywordflow">do</span> {
<a name="l04595"></a>04595         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a64bf2ec6c871b03f56252ce16f83753b">optimize_node_left</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(nd), &amp;nopt, &amp;nenv);
<a name="l04596"></a>04596         <span class="keywordflow">if</span> (r == 0) {
<a name="l04597"></a>04597           <a class="code" href="../../d0/d86/regcomp_8c.html#a29dbe3e7e64d0d79fece8290c191096b">add_mml</a>(&amp;nenv.<a class="code" href="../../d6/d2e/struct_opt_env.html#a283a4ef13786d1740f6e602a979c9fc4">mmd</a>, &amp;nopt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>);
<a name="l04598"></a>04598           <a class="code" href="../../d0/d86/regcomp_8c.html#af46da737215fbb617bdc641d88eb3a61">concat_left_node_opt_info</a>(env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>, opt, &amp;nopt);
<a name="l04599"></a>04599         }
<a name="l04600"></a>04600       } <span class="keywordflow">while</span> (r == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(nd = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(nd)));
<a name="l04601"></a>04601     }
<a name="l04602"></a>04602     <span class="keywordflow">break</span>;
<a name="l04603"></a>04603 
<a name="l04604"></a>04604   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l04605"></a>04605     {
<a name="l04606"></a>04606       <a class="code" href="../../d9/dcf/struct_node_opt_info.html">NodeOptInfo</a> nopt;
<a name="l04607"></a>04607       <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* nd = node;
<a name="l04608"></a>04608 
<a name="l04609"></a>04609       <span class="keywordflow">do</span> {
<a name="l04610"></a>04610         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a64bf2ec6c871b03f56252ce16f83753b">optimize_node_left</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(nd), &amp;nopt, env);
<a name="l04611"></a>04611         <span class="keywordflow">if</span> (r == 0) {
<a name="l04612"></a>04612           <span class="keywordflow">if</span> (nd == node) <a class="code" href="../../d0/d86/regcomp_8c.html#a4805c548139f3e569bc14bb2ee848dee">copy_node_opt_info</a>(opt, &amp;nopt);
<a name="l04613"></a>04613           <span class="keywordflow">else</span>            <a class="code" href="../../d0/d86/regcomp_8c.html#abb2b9ef2e5fdeda9ad99478734100701">alt_merge_node_opt_info</a>(opt, &amp;nopt, env);
<a name="l04614"></a>04614         }
<a name="l04615"></a>04615       } <span class="keywordflow">while</span> ((r == 0) &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(nd = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(nd)));
<a name="l04616"></a>04616     }
<a name="l04617"></a>04617     <span class="keywordflow">break</span>;
<a name="l04618"></a>04618 
<a name="l04619"></a>04619   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>:
<a name="l04620"></a>04620     {
<a name="l04621"></a>04621       <a class="code" href="../../d2/db7/struct_str_node.html">StrNode</a>* sn = <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(node);
<a name="l04622"></a>04622       <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> slen = sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a> - sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>;
<a name="l04623"></a>04623       <span class="keywordtype">int</span> is_raw = <a class="code" href="../../d1/dfc/regparse_8h.html#ae9f2e7348c7dca167e63f949aba51715">NSTRING_IS_RAW</a>(node);
<a name="l04624"></a>04624 
<a name="l04625"></a>04625       <span class="keywordflow">if</span> (! <a class="code" href="../../d1/dfc/regparse_8h.html#a25596e8076dc2d32a0b4f386656f0feb">NSTRING_IS_AMBIG</a>(node)) {
<a name="l04626"></a>04626         <a class="code" href="../../d0/d86/regcomp_8c.html#a35ad627121dbb81c014bfe7ed7a40f69">concat_opt_exact_info_str</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>, sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>, sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a>,
<a name="l04627"></a>04627                                   <a class="code" href="../../d1/dfc/regparse_8h.html#ae9f2e7348c7dca167e63f949aba51715">NSTRING_IS_RAW</a>(node), env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>);
<a name="l04628"></a>04628         <span class="keywordflow">if</span> (slen &gt; 0) {
<a name="l04629"></a>04629           <a class="code" href="../../d0/d86/regcomp_8c.html#a165619843f96ab55d5698d4414a3dfa8">add_char_opt_map_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>, *(sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>), env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>);
<a name="l04630"></a>04630         }
<a name="l04631"></a>04631         <a class="code" href="../../d0/d86/regcomp_8c.html#aaac64b6a152d4115c1546048512c0346">set_mml</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>, slen, slen);
<a name="l04632"></a>04632       }
<a name="l04633"></a>04633       <span class="keywordflow">else</span> {
<a name="l04634"></a>04634         <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> <a class="code" href="../../d1/d6f/date__strftime_8c.html#aa5d960354774dc177393b360c0f90aa9">max</a>;
<a name="l04635"></a>04635 
<a name="l04636"></a>04636         <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad31a3361dfb2d6e4a8f6a261eec83369">NSTRING_IS_DONT_GET_OPT_INFO</a>(node)) {
<a name="l04637"></a>04637           <span class="keywordtype">int</span> n = <a class="code" href="../../d6/d8e/regenc_8c.html#afe0cc4ddeec0df8528038e1b822d4a37">onigenc_strlen</a>(env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>, sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>, sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a>);
<a name="l04638"></a>04638           max = <a class="code" href="../../d8/db3/oniguruma_8h.html#a1bf73c04a0be8c1855f1e13517dac9cc">ONIGENC_MBC_MAXLEN_DIST</a>(env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>) * n;
<a name="l04639"></a>04639         }
<a name="l04640"></a>04640         <span class="keywordflow">else</span> {
<a name="l04641"></a>04641           <a class="code" href="../../d0/d86/regcomp_8c.html#a35ad627121dbb81c014bfe7ed7a40f69">concat_opt_exact_info_str</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>, sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>, sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a>,
<a name="l04642"></a>04642                                     is_raw, env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>);
<a name="l04643"></a>04643           opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a18509747454f3fbb63451cc6ee80b29b">ignore_case</a> = 1;
<a name="l04644"></a>04644 
<a name="l04645"></a>04645           <span class="keywordflow">if</span> (slen &gt; 0) {
<a name="l04646"></a>04646             r = <a class="code" href="../../d0/d86/regcomp_8c.html#ad96b3ac8783b3c6c9fcdb7fcd9f426d7">add_char_amb_opt_map_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>, sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#a8b07267d3e1ef65804a2888ed2f46211">s</a>, sn-&gt;<a class="code" href="../../d2/db7/struct_str_node.html#abf9ee3af9216b1e5d2724692a339d2bf">end</a>,
<a name="l04647"></a>04647                                           env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>, env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#ad9a5ace21d10189ac9de1b997b2379cf">case_fold_flag</a>);
<a name="l04648"></a>04648             <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">break</span>;
<a name="l04649"></a>04649           }
<a name="l04650"></a>04650 
<a name="l04651"></a>04651           max = slen;
<a name="l04652"></a>04652         }
<a name="l04653"></a>04653 
<a name="l04654"></a>04654         <a class="code" href="../../d0/d86/regcomp_8c.html#aaac64b6a152d4115c1546048512c0346">set_mml</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>, slen, max);
<a name="l04655"></a>04655       }
<a name="l04656"></a>04656 
<a name="l04657"></a>04657       <span class="keywordflow">if</span> ((<a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a>)opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> == slen)
<a name="l04658"></a>04658         opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a> = 1;
<a name="l04659"></a>04659     }
<a name="l04660"></a>04660     <span class="keywordflow">break</span>;
<a name="l04661"></a>04661 
<a name="l04662"></a>04662   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a98cbe6da0636f892e4de517d350a2938">NT_CCLASS</a>:
<a name="l04663"></a>04663     {
<a name="l04664"></a>04664       <span class="keywordtype">int</span> i, z;
<a name="l04665"></a>04665       <a class="code" href="../../d8/d79/struct_c_class_node.html">CClassNode</a>* cc = <a class="code" href="../../d1/dfc/regparse_8h.html#a816a6d8f921892c2efef73eb7727d589">NCCLASS</a>(node);
<a name="l04666"></a>04666 
<a name="l04667"></a>04667       <span class="comment">/* no need to check ignore case. (setted in setup_tree()) */</span>
<a name="l04668"></a>04668 
<a name="l04669"></a>04669       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(cc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a599db43b8eea536a4e4d08400fa445cb">mbuf</a>) || <a class="code" href="../../d6/d87/regint_8h.html#aa719ec00173511740495f30fc0878c9e">IS_NCCLASS_NOT</a>(cc)) {
<a name="l04670"></a>04670         <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> min = <a class="code" href="../../d8/db3/oniguruma_8h.html#a9d0d6012e6b7de2cf851d274bb9b9c9c">ONIGENC_MBC_MINLEN</a>(env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>);
<a name="l04671"></a>04671         <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> <a class="code" href="../../d1/d6f/date__strftime_8c.html#aa5d960354774dc177393b360c0f90aa9">max</a> = <a class="code" href="../../d8/db3/oniguruma_8h.html#a1bf73c04a0be8c1855f1e13517dac9cc">ONIGENC_MBC_MAXLEN_DIST</a>(env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>);
<a name="l04672"></a>04672 
<a name="l04673"></a>04673         <a class="code" href="../../d0/d86/regcomp_8c.html#aaac64b6a152d4115c1546048512c0346">set_mml</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>, min, max);
<a name="l04674"></a>04674       }
<a name="l04675"></a>04675       <span class="keywordflow">else</span> {
<a name="l04676"></a>04676         <span class="keywordflow">for</span> (i = 0; i &lt; SINGLE_BYTE_SIZE; i++) {
<a name="l04677"></a>04677           z = <a class="code" href="../../d6/d87/regint_8h.html#a43930f0cbfa176d3f727f1fc92027dac">BITSET_AT</a>(cc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a082458e56c928f78db90f08e242a9f3d">bs</a>, i);
<a name="l04678"></a>04678           <span class="keywordflow">if</span> ((z &amp;&amp; !<a class="code" href="../../d6/d87/regint_8h.html#aa719ec00173511740495f30fc0878c9e">IS_NCCLASS_NOT</a>(cc)) || (!z &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#aa719ec00173511740495f30fc0878c9e">IS_NCCLASS_NOT</a>(cc))) {
<a name="l04679"></a>04679             <a class="code" href="../../d0/d86/regcomp_8c.html#a165619843f96ab55d5698d4414a3dfa8">add_char_opt_map_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>, (<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> )i, env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>);
<a name="l04680"></a>04680           }
<a name="l04681"></a>04681         }
<a name="l04682"></a>04682         <a class="code" href="../../d0/d86/regcomp_8c.html#aaac64b6a152d4115c1546048512c0346">set_mml</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>, 1, 1);
<a name="l04683"></a>04683       }
<a name="l04684"></a>04684     }
<a name="l04685"></a>04685     <span class="keywordflow">break</span>;
<a name="l04686"></a>04686 
<a name="l04687"></a>04687   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a542a2658d0f164eea8bc384ab01549d4">NT_CTYPE</a>:
<a name="l04688"></a>04688     {
<a name="l04689"></a>04689       <span class="keywordtype">int</span> i, min, <a class="code" href="../../d1/d6f/date__strftime_8c.html#aa5d960354774dc177393b360c0f90aa9">max</a>;
<a name="l04690"></a>04690 
<a name="l04691"></a>04691       max = <a class="code" href="../../d8/db3/oniguruma_8h.html#a1bf73c04a0be8c1855f1e13517dac9cc">ONIGENC_MBC_MAXLEN_DIST</a>(env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>);
<a name="l04692"></a>04692 
<a name="l04693"></a>04693       <span class="keywordflow">if</span> (max == 1) {
<a name="l04694"></a>04694         min = 1;
<a name="l04695"></a>04695 
<a name="l04696"></a>04696         <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a55cfe9cd258d0bdf14d6e48115f7e70b">NCTYPE</a>(node)-&gt;ctype) {
<a name="l04697"></a>04697         <span class="keywordflow">case</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a612fd1e82d5c1d87c6b73c15cee0ae98">ONIGENC_CTYPE_WORD</a>:
<a name="l04698"></a>04698           <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a55cfe9cd258d0bdf14d6e48115f7e70b">NCTYPE</a>(node)-&gt;not != 0) {
<a name="l04699"></a>04699             <span class="keywordflow">for</span> (i = 0; i &lt; SINGLE_BYTE_SIZE; i++) {
<a name="l04700"></a>04700               <span class="keywordflow">if</span> (! <a class="code" href="../../d8/db3/oniguruma_8h.html#a7b44f6afd4815b806827f9440be9e6b6">ONIGENC_IS_CODE_WORD</a>(env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>, i)) {
<a name="l04701"></a>04701                 <a class="code" href="../../d0/d86/regcomp_8c.html#a165619843f96ab55d5698d4414a3dfa8">add_char_opt_map_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>, (<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> )i, env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>);
<a name="l04702"></a>04702               }
<a name="l04703"></a>04703             }
<a name="l04704"></a>04704           }
<a name="l04705"></a>04705           <span class="keywordflow">else</span> {
<a name="l04706"></a>04706             <span class="keywordflow">for</span> (i = 0; i &lt; SINGLE_BYTE_SIZE; i++) {
<a name="l04707"></a>04707               <span class="keywordflow">if</span> (<a class="code" href="../../d8/db3/oniguruma_8h.html#a7b44f6afd4815b806827f9440be9e6b6">ONIGENC_IS_CODE_WORD</a>(env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>, i)) {
<a name="l04708"></a>04708                 <a class="code" href="../../d0/d86/regcomp_8c.html#a165619843f96ab55d5698d4414a3dfa8">add_char_opt_map_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>, (<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> )i, env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>);
<a name="l04709"></a>04709               }
<a name="l04710"></a>04710             }
<a name="l04711"></a>04711           }
<a name="l04712"></a>04712           <span class="keywordflow">break</span>;
<a name="l04713"></a>04713         }
<a name="l04714"></a>04714       }
<a name="l04715"></a>04715       <span class="keywordflow">else</span> {
<a name="l04716"></a>04716         min = <a class="code" href="../../d8/db3/oniguruma_8h.html#a9d0d6012e6b7de2cf851d274bb9b9c9c">ONIGENC_MBC_MINLEN</a>(env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>);
<a name="l04717"></a>04717       }
<a name="l04718"></a>04718       <a class="code" href="../../d0/d86/regcomp_8c.html#aaac64b6a152d4115c1546048512c0346">set_mml</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>, min, max);
<a name="l04719"></a>04719     }
<a name="l04720"></a>04720     <span class="keywordflow">break</span>;
<a name="l04721"></a>04721 
<a name="l04722"></a>04722   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a21a7fcbf4a9c872540490d92b9c29813">NT_CANY</a>:
<a name="l04723"></a>04723     {
<a name="l04724"></a>04724       <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> min = <a class="code" href="../../d8/db3/oniguruma_8h.html#a9d0d6012e6b7de2cf851d274bb9b9c9c">ONIGENC_MBC_MINLEN</a>(env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>);
<a name="l04725"></a>04725       <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> <a class="code" href="../../d1/d6f/date__strftime_8c.html#aa5d960354774dc177393b360c0f90aa9">max</a> = <a class="code" href="../../d8/db3/oniguruma_8h.html#a1bf73c04a0be8c1855f1e13517dac9cc">ONIGENC_MBC_MAXLEN_DIST</a>(env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>);
<a name="l04726"></a>04726       <a class="code" href="../../d0/d86/regcomp_8c.html#aaac64b6a152d4115c1546048512c0346">set_mml</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>, min, max);
<a name="l04727"></a>04727     }
<a name="l04728"></a>04728     <span class="keywordflow">break</span>;
<a name="l04729"></a>04729 
<a name="l04730"></a>04730   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l04731"></a>04731     <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node)-&gt;type) {
<a name="l04732"></a>04732     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a5730b2ca5b8a8bbe5262c77ee26b7879">ANCHOR_BEGIN_BUF</a>:
<a name="l04733"></a>04733     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a317bea7c5108d3c78717a5df263fbe09">ANCHOR_BEGIN_POSITION</a>:
<a name="l04734"></a>04734     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a0d426ab760f616696759ce14c060b622">ANCHOR_BEGIN_LINE</a>:
<a name="l04735"></a>04735     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#afae1199ac99483eb29f0824cea7b3329">ANCHOR_END_BUF</a>:
<a name="l04736"></a>04736     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a9336254890d4656b7e36574b462ca093">ANCHOR_SEMI_END_BUF</a>:
<a name="l04737"></a>04737     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a4dd9db8ffc551d1a759f1fac90baff78">ANCHOR_END_LINE</a>:
<a name="l04738"></a>04738       <a class="code" href="../../d0/d86/regcomp_8c.html#a71c4f197d39cb16718891c87485b4675">add_opt_anc_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">anc</a>, <a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node)-&gt;type);
<a name="l04739"></a>04739       <span class="keywordflow">break</span>;
<a name="l04740"></a>04740 
<a name="l04741"></a>04741     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#aa0f9fc98186b637ecce6d72e12ee1eed">ANCHOR_PREC_READ</a>:
<a name="l04742"></a>04742       {
<a name="l04743"></a>04743         <a class="code" href="../../d9/dcf/struct_node_opt_info.html">NodeOptInfo</a> nopt;
<a name="l04744"></a>04744 
<a name="l04745"></a>04745         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a64bf2ec6c871b03f56252ce16f83753b">optimize_node_left</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node)-&gt;target, &amp;nopt, env);
<a name="l04746"></a>04746         <span class="keywordflow">if</span> (r == 0) {
<a name="l04747"></a>04747           <span class="keywordflow">if</span> (nopt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> &gt; 0)
<a name="l04748"></a>04748             <a class="code" href="../../d0/d86/regcomp_8c.html#a966940434a5979df5e76f85c58a2e732">copy_opt_exact_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#aac24e1f9229b602f12b0e696414f5408">expr</a>, &amp;nopt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>);
<a name="l04749"></a>04749           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nopt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a9b4848025c0b6e49574bf20cf7a74db0">exm</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> &gt; 0)
<a name="l04750"></a>04750             <a class="code" href="../../d0/d86/regcomp_8c.html#a966940434a5979df5e76f85c58a2e732">copy_opt_exact_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#aac24e1f9229b602f12b0e696414f5408">expr</a>, &amp;nopt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a9b4848025c0b6e49574bf20cf7a74db0">exm</a>);
<a name="l04751"></a>04751 
<a name="l04752"></a>04752           opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#aac24e1f9229b602f12b0e696414f5408">expr</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a> = 0;
<a name="l04753"></a>04753 
<a name="l04754"></a>04754           <span class="keywordflow">if</span> (nopt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>.<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a57c79c254c912dd039f0db900b7be0ec">value</a> &gt; 0)
<a name="l04755"></a>04755             <a class="code" href="../../d0/d86/regcomp_8c.html#a058f6d84d2d5b6a8a1838ac4f6cff387">copy_opt_map_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>, &amp;nopt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>);
<a name="l04756"></a>04756         }
<a name="l04757"></a>04757       }
<a name="l04758"></a>04758       <span class="keywordflow">break</span>;
<a name="l04759"></a>04759 
<a name="l04760"></a>04760     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a1c64ac74f61b2ffbf3b60f391ae65cbf">ANCHOR_PREC_READ_NOT</a>:
<a name="l04761"></a>04761     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a460ceecc3150bd7cd2437d41fbeb9ea8">ANCHOR_LOOK_BEHIND</a>: <span class="comment">/* Sorry, I can&apos;t make use of it. */</span>
<a name="l04762"></a>04762     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a8812f9a061dd987fe8426262589b52c4">ANCHOR_LOOK_BEHIND_NOT</a>:
<a name="l04763"></a>04763       <span class="keywordflow">break</span>;
<a name="l04764"></a>04764     }
<a name="l04765"></a>04765     <span class="keywordflow">break</span>;
<a name="l04766"></a>04766 
<a name="l04767"></a>04767   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ac1d2a54cfe6dfa9104b4bfb8d06b8aeb">NT_BREF</a>:
<a name="l04768"></a>04768     {
<a name="l04769"></a>04769       <span class="keywordtype">int</span> i;
<a name="l04770"></a>04770       <span class="keywordtype">int</span>* backs;
<a name="l04771"></a>04771       <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> min, <a class="code" href="../../d1/d6f/date__strftime_8c.html#aa5d960354774dc177393b360c0f90aa9">max</a>, tmin, tmax;
<a name="l04772"></a>04772       <a class="code" href="../../d0/d6e/struct___node.html">Node</a>** nodes = <a class="code" href="../../d1/dfc/regparse_8h.html#a82066fdd1d2abdcc23ae01f55bfbe321">SCANENV_MEM_NODES</a>(env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a2dc30c2c1668dca6cfc5aee3fc9d78ea">scan_env</a>);
<a name="l04773"></a>04773       <a class="code" href="../../db/dbf/struct_b_ref_node.html">BRefNode</a>* br = <a class="code" href="../../d1/dfc/regparse_8h.html#a38215823f6ab7e63e919eae3bfa79bfa">NBREF</a>(node);
<a name="l04774"></a>04774 
<a name="l04775"></a>04775       <span class="keywordflow">if</span> (br-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#acc3cdd098999c2c649045d2640e8d101">state</a> &amp; <a class="code" href="../../d1/dfc/regparse_8h.html#a04144a8cc6b823fcae3b99f5cd5ab42c">NST_RECURSION</a>) {
<a name="l04776"></a>04776         <a class="code" href="../../d0/d86/regcomp_8c.html#aaac64b6a152d4115c1546048512c0346">set_mml</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>, 0, <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a>);
<a name="l04777"></a>04777         <span class="keywordflow">break</span>;
<a name="l04778"></a>04778       }
<a name="l04779"></a>04779       backs = <a class="code" href="../../d1/dfc/regparse_8h.html#af7acd0d16d2a338ffba1881e85a610b1">BACKREFS_P</a>(br);
<a name="l04780"></a>04780       r = <a class="code" href="../../d0/d86/regcomp_8c.html#af82e9debd7e89c1c386efbfd438ac112">get_min_match_length</a>(nodes[backs[0]], &amp;min, env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a2dc30c2c1668dca6cfc5aee3fc9d78ea">scan_env</a>);
<a name="l04781"></a>04781       <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">break</span>;
<a name="l04782"></a>04782       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a06bdc00e72ec725ddbca67672abc87a3">get_max_match_length</a>(nodes[backs[0]], &amp;max, env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a2dc30c2c1668dca6cfc5aee3fc9d78ea">scan_env</a>);
<a name="l04783"></a>04783       <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">break</span>;
<a name="l04784"></a>04784       <span class="keywordflow">for</span> (i = 1; i &lt; br-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#ae790ac554909ac2940d464ac98019912">back_num</a>; i++) {
<a name="l04785"></a>04785         r = <a class="code" href="../../d0/d86/regcomp_8c.html#af82e9debd7e89c1c386efbfd438ac112">get_min_match_length</a>(nodes[backs[i]], &amp;tmin, env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a2dc30c2c1668dca6cfc5aee3fc9d78ea">scan_env</a>);
<a name="l04786"></a>04786         <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">break</span>;
<a name="l04787"></a>04787         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a06bdc00e72ec725ddbca67672abc87a3">get_max_match_length</a>(nodes[backs[i]], &amp;tmax, env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a2dc30c2c1668dca6cfc5aee3fc9d78ea">scan_env</a>);
<a name="l04788"></a>04788         <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">break</span>;
<a name="l04789"></a>04789         <span class="keywordflow">if</span> (min &gt; tmin) min = tmin;
<a name="l04790"></a>04790         <span class="keywordflow">if</span> (max &lt; tmax) max = tmax;
<a name="l04791"></a>04791       }
<a name="l04792"></a>04792       <span class="keywordflow">if</span> (r == 0) <a class="code" href="../../d0/d86/regcomp_8c.html#aaac64b6a152d4115c1546048512c0346">set_mml</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>, min, max);
<a name="l04793"></a>04793     }
<a name="l04794"></a>04794     <span class="keywordflow">break</span>;
<a name="l04795"></a>04795 
<a name="l04796"></a>04796 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l04797"></a>04797 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a35167bbf195155481ee5cbcae152d0f9">NT_CALL</a>:
<a name="l04798"></a>04798     <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a250cd70778b5de06453ffa5e16c17daf">IS_CALL_RECURSION</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node)))
<a name="l04799"></a>04799       <a class="code" href="../../d0/d86/regcomp_8c.html#aaac64b6a152d4115c1546048512c0346">set_mml</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>, 0, <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a>);
<a name="l04800"></a>04800     <span class="keywordflow">else</span> {
<a name="l04801"></a>04801       <a class="code" href="../../d8/db3/oniguruma_8h.html#ad870c1a94502ad33c083978b17911e72">OnigOptionType</a> save = env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#ada2c187eb78050758c55eda24da7cb2e">options</a>;
<a name="l04802"></a>04802       env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#ada2c187eb78050758c55eda24da7cb2e">options</a> = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node)-&gt;target)-&gt;option;
<a name="l04803"></a>04803       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a64bf2ec6c871b03f56252ce16f83753b">optimize_node_left</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node)-&gt;target, opt, env);
<a name="l04804"></a>04804       env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#ada2c187eb78050758c55eda24da7cb2e">options</a> = save;
<a name="l04805"></a>04805     }
<a name="l04806"></a>04806     <span class="keywordflow">break</span>;
<a name="l04807"></a>04807 <span class="preprocessor">#endif</span>
<a name="l04808"></a>04808 <span class="preprocessor"></span>
<a name="l04809"></a>04809   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l04810"></a>04810     {
<a name="l04811"></a>04811       <span class="keywordtype">int</span> i;
<a name="l04812"></a>04812       <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> min, <a class="code" href="../../d1/d6f/date__strftime_8c.html#aa5d960354774dc177393b360c0f90aa9">max</a>;
<a name="l04813"></a>04813       <a class="code" href="../../d9/dcf/struct_node_opt_info.html">NodeOptInfo</a> nopt;
<a name="l04814"></a>04814       <a class="code" href="../../d4/dfa/struct_qtfr_node.html">QtfrNode</a>* qn = <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node);
<a name="l04815"></a>04815 
<a name="l04816"></a>04816       r = <a class="code" href="../../d0/d86/regcomp_8c.html#a64bf2ec6c871b03f56252ce16f83753b">optimize_node_left</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>, &amp;nopt, env);
<a name="l04817"></a>04817       <span class="keywordflow">if</span> (r) <span class="keywordflow">break</span>;
<a name="l04818"></a>04818 
<a name="l04819"></a>04819       <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> == 0 &amp;&amp; <a class="code" href="../../d6/d87/regint_8h.html#a7b7f11d4b2705496b7711598403d4f72">IS_REPEAT_INFINITE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>)) {
<a name="l04820"></a>04820         <span class="keywordflow">if</span> (env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a283a4ef13786d1740f6e602a979c9fc4">mmd</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> == 0 &amp;&amp;
<a name="l04821"></a>04821             <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a358ba7208e8bf097527cc9813adc5017">target</a>) == <a class="code" href="../../d1/dfc/regparse_8h.html#a21a7fcbf4a9c872540490d92b9c29813">NT_CANY</a> &amp;&amp; qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a8a7f7398dce22e1445a7900f90e374bf">greedy</a>) {
<a name="l04822"></a>04822           <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a98896bcddf1dce2b16e3d9d4da9b32c7">IS_MULTILINE</a>(env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#ada2c187eb78050758c55eda24da7cb2e">options</a>))
<a name="l04823"></a>04823             <a class="code" href="../../d0/d86/regcomp_8c.html#a71c4f197d39cb16718891c87485b4675">add_opt_anc_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">anc</a>, <a class="code" href="../../d6/d87/regint_8h.html#a770880666efda5a87ba8ce6e618c7bef">ANCHOR_ANYCHAR_STAR_ML</a>);
<a name="l04824"></a>04824           <span class="keywordflow">else</span>
<a name="l04825"></a>04825             <a class="code" href="../../d0/d86/regcomp_8c.html#a71c4f197d39cb16718891c87485b4675">add_opt_anc_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">anc</a>, <a class="code" href="../../d6/d87/regint_8h.html#ad255197c4f708b99046907082857659d">ANCHOR_ANYCHAR_STAR</a>);
<a name="l04826"></a>04826         }
<a name="l04827"></a>04827       }
<a name="l04828"></a>04828       <span class="keywordflow">else</span> {
<a name="l04829"></a>04829         <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> &gt; 0) {
<a name="l04830"></a>04830           <a class="code" href="../../d0/d86/regcomp_8c.html#a4805c548139f3e569bc14bb2ee848dee">copy_node_opt_info</a>(opt, &amp;nopt);
<a name="l04831"></a>04831           <span class="keywordflow">if</span> (nopt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> &gt; 0) {
<a name="l04832"></a>04832             <span class="keywordflow">if</span> (nopt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a>) {
<a name="l04833"></a>04833               <span class="keywordflow">for</span> (i = 2; i &lt;= qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> &amp;&amp;
<a name="l04834"></a>04834                           ! <a class="code" href="../../d0/d86/regcomp_8c.html#aa9f9da2e207fbf07f6995f7a37718916">is_full_opt_exact_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>); i++) {
<a name="l04835"></a>04835                 <a class="code" href="../../d0/d86/regcomp_8c.html#ae634e8024dd636cd22c5d43170b95a37">concat_opt_exact_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>, &amp;nopt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>, env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>);
<a name="l04836"></a>04836               }
<a name="l04837"></a>04837               <span class="keywordflow">if</span> (i &lt; qn-&gt;lower) {
<a name="l04838"></a>04838                 opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a> = 0;
<a name="l04839"></a>04839               }
<a name="l04840"></a>04840             }
<a name="l04841"></a>04841           }
<a name="l04842"></a>04842 
<a name="l04843"></a>04843           <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> != qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>) {
<a name="l04844"></a>04844             opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a> = 0;
<a name="l04845"></a>04845             opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a9b4848025c0b6e49574bf20cf7a74db0">exm</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a> = 0;
<a name="l04846"></a>04846           }
<a name="l04847"></a>04847           <span class="keywordflow">if</span> (qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a> &gt; 1)
<a name="l04848"></a>04848             opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a9b4848025c0b6e49574bf20cf7a74db0">exm</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#af8c9e410a33d02410db1c6ac6d274e46">reach_end</a> = 0;
<a name="l04849"></a>04849         }
<a name="l04850"></a>04850       }
<a name="l04851"></a>04851 
<a name="l04852"></a>04852       min = <a class="code" href="../../d0/d86/regcomp_8c.html#af4fd37fcaa0c31385e41ce128c9ed00c">distance_multiply</a>(nopt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a>, qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#a2a09a09d1685822771870905699f4c4d">lower</a>);
<a name="l04853"></a>04853       <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a7b7f11d4b2705496b7711598403d4f72">IS_REPEAT_INFINITE</a>(qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>))
<a name="l04854"></a>04854         max = (nopt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> &gt; 0 ? <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a> : 0);
<a name="l04855"></a>04855       <span class="keywordflow">else</span>
<a name="l04856"></a>04856         max = <a class="code" href="../../d0/d86/regcomp_8c.html#af4fd37fcaa0c31385e41ce128c9ed00c">distance_multiply</a>(nopt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a>, qn-&gt;<a class="code" href="../../d4/dfa/struct_qtfr_node.html#ad6302c7e3c130ed1f322b11ca7b7b3b8">upper</a>);
<a name="l04857"></a>04857 
<a name="l04858"></a>04858       <a class="code" href="../../d0/d86/regcomp_8c.html#aaac64b6a152d4115c1546048512c0346">set_mml</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>, min, max);
<a name="l04859"></a>04859     }
<a name="l04860"></a>04860     <span class="keywordflow">break</span>;
<a name="l04861"></a>04861 
<a name="l04862"></a>04862   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l04863"></a>04863     {
<a name="l04864"></a>04864       <a class="code" href="../../d3/dff/struct_enclose_node.html">EncloseNode</a>* en = <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node);
<a name="l04865"></a>04865 
<a name="l04866"></a>04866       <span class="keywordflow">switch</span> (en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ae554d8a44a852592c4b79ee3241645c7">type</a>) {
<a name="l04867"></a>04867       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a1f27f4cccd30502c03174673fe25af41">ENCLOSE_OPTION</a>:
<a name="l04868"></a>04868         {
<a name="l04869"></a>04869           <a class="code" href="../../d8/db3/oniguruma_8h.html#ad870c1a94502ad33c083978b17911e72">OnigOptionType</a> save = env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#ada2c187eb78050758c55eda24da7cb2e">options</a>;
<a name="l04870"></a>04870 
<a name="l04871"></a>04871           env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#ada2c187eb78050758c55eda24da7cb2e">options</a> = en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#a5dbb80c0012ac8b7d137371d8cb89667">option</a>;
<a name="l04872"></a>04872           r = <a class="code" href="../../d0/d86/regcomp_8c.html#a64bf2ec6c871b03f56252ce16f83753b">optimize_node_left</a>(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, opt, env);
<a name="l04873"></a>04873           env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#ada2c187eb78050758c55eda24da7cb2e">options</a> = save;
<a name="l04874"></a>04874         }
<a name="l04875"></a>04875         <span class="keywordflow">break</span>;
<a name="l04876"></a>04876 
<a name="l04877"></a>04877       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a32e44d8ddaca8fd4931a8c13677972ad">ENCLOSE_MEMORY</a>:
<a name="l04878"></a>04878 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l04879"></a>04879 <span class="preprocessor"></span>        en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#a7368540a09d78c212ab05f9436204fae">opt_count</a>++;
<a name="l04880"></a>04880         <span class="keywordflow">if</span> (en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#a7368540a09d78c212ab05f9436204fae">opt_count</a> &gt; <a class="code" href="../../d0/d86/regcomp_8c.html#adf166474e0286654536600887f55d285">MAX_NODE_OPT_INFO_REF_COUNT</a>) {
<a name="l04881"></a>04881           <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> min, <a class="code" href="../../d1/d6f/date__strftime_8c.html#aa5d960354774dc177393b360c0f90aa9">max</a>;
<a name="l04882"></a>04882 
<a name="l04883"></a>04883           min = 0;
<a name="l04884"></a>04884           max = <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a>;
<a name="l04885"></a>04885           <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a80b7e1e1d9df6c27f0e11f9b0fb043f6">IS_ENCLOSE_MIN_FIXED</a>(en)) min = en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#a5cf2d042c7cd3c740a9ae8d67c7e328f">min_len</a>;
<a name="l04886"></a>04886           <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a04d81dc57cf82bf1a5dbdd5e7a8030f4">IS_ENCLOSE_MAX_FIXED</a>(en)) max = en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#acb7531c358e302688489cffb0918e98f">max_len</a>;
<a name="l04887"></a>04887           <a class="code" href="../../d0/d86/regcomp_8c.html#aaac64b6a152d4115c1546048512c0346">set_mml</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>, min, max);
<a name="l04888"></a>04888         }
<a name="l04889"></a>04889         <span class="keywordflow">else</span>
<a name="l04890"></a>04890 <span class="preprocessor">#endif</span>
<a name="l04891"></a>04891 <span class="preprocessor"></span>        {
<a name="l04892"></a>04892           r = <a class="code" href="../../d0/d86/regcomp_8c.html#a64bf2ec6c871b03f56252ce16f83753b">optimize_node_left</a>(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, opt, env);
<a name="l04893"></a>04893 
<a name="l04894"></a>04894           <span class="keywordflow">if</span> (<a class="code" href="../../d0/d86/regcomp_8c.html#a59f75d45d79a864d966e61a207dfe738">is_set_opt_anc_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">anc</a>, <a class="code" href="../../d1/dfc/regparse_8h.html#acb5f6fdd354c1ec172e6d93c2a964d83">ANCHOR_ANYCHAR_STAR_MASK</a>)) {
<a name="l04895"></a>04895             <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#af199b44779566d1c0d04e5eedff8ce2b">BIT_STATUS_AT</a>(env-&gt;<a class="code" href="../../d6/d2e/struct_opt_env.html#a2dc30c2c1668dca6cfc5aee3fc9d78ea">scan_env</a>-&gt;<a class="code" href="../../d6/dbe/struct_scan_env.html#a88f3a0da2aa91b57436970ef7aa062f6">backrefed_mem</a>, en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#adda9a1fd356c9b102c09a3c596583b81">regnum</a>))
<a name="l04896"></a>04896               <a class="code" href="../../d0/d86/regcomp_8c.html#ab17c2a993044f2f028c1b299a2bfa64a">remove_opt_anc_info</a>(&amp;opt-&gt;<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">anc</a>, <a class="code" href="../../d1/dfc/regparse_8h.html#acb5f6fdd354c1ec172e6d93c2a964d83">ANCHOR_ANYCHAR_STAR_MASK</a>);
<a name="l04897"></a>04897           }
<a name="l04898"></a>04898         }
<a name="l04899"></a>04899         <span class="keywordflow">break</span>;
<a name="l04900"></a>04900 
<a name="l04901"></a>04901       <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a8a9f973f8fdb597a604757521ae63fe2">ENCLOSE_STOP_BACKTRACK</a>:
<a name="l04902"></a>04902         r = <a class="code" href="../../d0/d86/regcomp_8c.html#a64bf2ec6c871b03f56252ce16f83753b">optimize_node_left</a>(en-&gt;<a class="code" href="../../d3/dff/struct_enclose_node.html#ad018736c5553a75908d9b857dbdadb91">target</a>, opt, env);
<a name="l04903"></a>04903         <span class="keywordflow">break</span>;
<a name="l04904"></a>04904       }
<a name="l04905"></a>04905     }
<a name="l04906"></a>04906     <span class="keywordflow">break</span>;
<a name="l04907"></a>04907 
<a name="l04908"></a>04908   <span class="keywordflow">default</span>:
<a name="l04909"></a>04909 <span class="preprocessor">#ifdef ONIG_DEBUG</span>
<a name="l04910"></a>04910 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (!onig_is_prelude()) fprintf(stderr, <span class="stringliteral">&quot;optimize_node_left: undefined node type %d\n&quot;</span>,
<a name="l04911"></a>04911             <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node));
<a name="l04912"></a>04912 <span class="preprocessor">#endif</span>
<a name="l04913"></a>04913 <span class="preprocessor"></span>    r = <a class="code" href="../../d8/db3/oniguruma_8h.html#a5ca9b130d8887d7801e69fc25e858a44">ONIGERR_TYPE_BUG</a>;
<a name="l04914"></a>04914     <span class="keywordflow">break</span>;
<a name="l04915"></a>04915   }
<a name="l04916"></a>04916 
<a name="l04917"></a>04917   <span class="keywordflow">return</span> r;
<a name="l04918"></a>04918 }
<a name="l04919"></a>04919 
<a name="l04920"></a>04920 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l04921"></a><a class="code" href="../../d0/d86/regcomp_8c.html#af2049f0c2de3fa16ef25a176369654f2">04921</a> <a class="code" href="../../d0/d86/regcomp_8c.html#af2049f0c2de3fa16ef25a176369654f2">set_optimize_exact_info</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <a class="code" href="../../d8/dc8/struct_opt_exact_info.html">OptExactInfo</a>* e)
<a name="l04922"></a>04922 {
<a name="l04923"></a>04923   <span class="keywordtype">int</span> r;
<a name="l04924"></a>04924 
<a name="l04925"></a>04925   <span class="keywordflow">if</span> (e-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> == 0) <span class="keywordflow">return</span> 0;
<a name="l04926"></a>04926 
<a name="l04927"></a>04927   <span class="keywordflow">if</span> (e-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a18509747454f3fbb63451cc6ee80b29b">ignore_case</a>) {
<a name="l04928"></a>04928     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a> = (<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* )<a class="code" href="../../d8/db0/defines_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>(e-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a>);
<a name="l04929"></a>04929     <a class="code" href="../../d6/d87/regint_8h.html#a17ebb2a12300dcf6d79916e357fae45a">CHECK_NULL_RETURN_MEMERR</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a>);
<a name="l04930"></a>04930     <a class="code" href="../../d6/d87/regint_8h.html#ad9f94f6a1ee2c69b34d8034684b31518">xmemcpy</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a>, e-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#ab77ee2f1fbe3f3701af923a330d1214d">s</a>, e-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a>);
<a name="l04931"></a>04931     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0656dcfc893bc5f00677f6e3f87a0007">exact_end</a> = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a> + e-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a>;
<a name="l04932"></a>04932     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a9bcb518fa967f1b1758161d2d207cc8c">optimize</a> = <a class="code" href="../../d6/d87/regint_8h.html#aa375546e0a2ad1b63e3e47fd340ef9a9">ONIG_OPTIMIZE_EXACT_IC</a>;
<a name="l04933"></a>04933   }
<a name="l04934"></a>04934   <span class="keywordflow">else</span> {
<a name="l04935"></a>04935     <span class="keywordtype">int</span> allow_reverse;
<a name="l04936"></a>04936 
<a name="l04937"></a>04937     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a> = <a class="code" href="../../d0/d86/regcomp_8c.html#a158d6b9ddc5338ecbae4f030d19d13b8">str_dup</a>(e-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#ab77ee2f1fbe3f3701af923a330d1214d">s</a>, e-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#ab77ee2f1fbe3f3701af923a330d1214d">s</a> + e-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a>);
<a name="l04938"></a>04938     <a class="code" href="../../d6/d87/regint_8h.html#a17ebb2a12300dcf6d79916e357fae45a">CHECK_NULL_RETURN_MEMERR</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a>);
<a name="l04939"></a>04939     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0656dcfc893bc5f00677f6e3f87a0007">exact_end</a> = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a> + e-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a>;
<a name="l04940"></a>04940 
<a name="l04941"></a>04941     allow_reverse =
<a name="l04942"></a>04942         <a class="code" href="../../d8/db3/oniguruma_8h.html#a9d1b8403e2e5484ec67c21c8c74d0738">ONIGENC_IS_ALLOWED_REVERSE_MATCH</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>, reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a>, reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0656dcfc893bc5f00677f6e3f87a0007">exact_end</a>);
<a name="l04943"></a>04943 
<a name="l04944"></a>04944     <span class="keywordflow">if</span> (e-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> &gt;= 3 || (e-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> &gt;= 2 &amp;&amp; allow_reverse)) {
<a name="l04945"></a>04945       r = <a class="code" href="../../d0/d86/regcomp_8c.html#ac6be9edb60b5c3eb8bc0135683390264">set_bm_skip</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a>, reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0656dcfc893bc5f00677f6e3f87a0007">exact_end</a>, reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>,
<a name="l04946"></a>04946                       reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#aa54d02532294cb067ed2659e07ee742c">map</a>, &amp;(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a291a532e6b6af4e6bda9cee6c46833b7">int_map</a>));
<a name="l04947"></a>04947       <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l04948"></a>04948 
<a name="l04949"></a>04949       reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a9bcb518fa967f1b1758161d2d207cc8c">optimize</a> = (allow_reverse != 0
<a name="l04950"></a>04950                        ? <a class="code" href="../../d6/d87/regint_8h.html#a3ad92cdf8fab6c0787321227ef3effa7">ONIG_OPTIMIZE_EXACT_BM</a> : <a class="code" href="../../d6/d87/regint_8h.html#a642b7bef8be159dba938c46e0213c49d">ONIG_OPTIMIZE_EXACT_BM_NOT_REV</a>);
<a name="l04951"></a>04951     }
<a name="l04952"></a>04952     <span class="keywordflow">else</span> {
<a name="l04953"></a>04953       reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a9bcb518fa967f1b1758161d2d207cc8c">optimize</a> = <a class="code" href="../../d6/d87/regint_8h.html#a26225dfd53138e7d198345b4cf96cadb">ONIG_OPTIMIZE_EXACT</a>;
<a name="l04954"></a>04954     }
<a name="l04955"></a>04955   }
<a name="l04956"></a>04956 
<a name="l04957"></a>04957   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0331de7898419639ff9ea9ad8e7f4e25">dmin</a> = e-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a95319a8e4d24521aec38ce39d764633d">mmd</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a>;
<a name="l04958"></a>04958   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af8bc4709a6d2cf88e70c7b36456b1335">dmax</a> = e-&gt;<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a95319a8e4d24521aec38ce39d764633d">mmd</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a>;
<a name="l04959"></a>04959 
<a name="l04960"></a>04960   <span class="keywordflow">if</span> (reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0331de7898419639ff9ea9ad8e7f4e25">dmin</a> != <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a>) {
<a name="l04961"></a>04961     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a33bd3aaf0e6a21dd1958442fcbdf55f4">threshold_len</a> = (int)(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0331de7898419639ff9ea9ad8e7f4e25">dmin</a> + (reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0656dcfc893bc5f00677f6e3f87a0007">exact_end</a> - reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a>));
<a name="l04962"></a>04962   }
<a name="l04963"></a>04963 
<a name="l04964"></a>04964   <span class="keywordflow">return</span> 0;
<a name="l04965"></a>04965 }
<a name="l04966"></a>04966 
<a name="l04967"></a>04967 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04968"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a5eb864ddfd3f9b2258d1db8373550a27">04968</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a5eb864ddfd3f9b2258d1db8373550a27">set_optimize_map_info</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <a class="code" href="../../d3/dd6/struct_opt_map_info.html">OptMapInfo</a>* m)
<a name="l04969"></a>04969 {
<a name="l04970"></a>04970   <span class="keywordtype">int</span> i;
<a name="l04971"></a>04971 
<a name="l04972"></a>04972   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d8/db3/oniguruma_8h.html#aa5e520778f7bf10deda0dff9570b36de">ONIG_CHAR_TABLE_SIZE</a>; i++)
<a name="l04973"></a>04973     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#aa54d02532294cb067ed2659e07ee742c">map</a>[i] = m-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a5338e964ee9f34dcc6d5280c8d80f2f7">map</a>[i];
<a name="l04974"></a>04974 
<a name="l04975"></a>04975   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a9bcb518fa967f1b1758161d2d207cc8c">optimize</a>   = <a class="code" href="../../d6/d87/regint_8h.html#a25b2b8320888b7829abbba60845b259a">ONIG_OPTIMIZE_MAP</a>;
<a name="l04976"></a>04976   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0331de7898419639ff9ea9ad8e7f4e25">dmin</a>       = m-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#aed8cda0ff7790a099ce70a7b5aa6488a">mmd</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a>;
<a name="l04977"></a>04977   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af8bc4709a6d2cf88e70c7b36456b1335">dmax</a>       = m-&gt;<a class="code" href="../../d3/dd6/struct_opt_map_info.html#aed8cda0ff7790a099ce70a7b5aa6488a">mmd</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a>;
<a name="l04978"></a>04978 
<a name="l04979"></a>04979   <a class="code" href="../../d7/dc0/parse_8y.html#a2ac1143ac343c79cbfa448e30d74fa1c">if</a> (reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0331de7898419639ff9ea9ad8e7f4e25">dmin</a> != <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a>) {
<a name="l04980"></a>04980     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a33bd3aaf0e6a21dd1958442fcbdf55f4">threshold_len</a> = (int)(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0331de7898419639ff9ea9ad8e7f4e25">dmin</a> + 1);
<a name="l04981"></a>04981   }
<a name="l04982"></a>04982 }
<a name="l04983"></a>04983 
<a name="l04984"></a>04984 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l04985"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a60aba7c747e8fe9f7b78c98fd7dab75a">04985</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a60aba7c747e8fe9f7b78c98fd7dab75a">set_sub_anchor</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <a class="code" href="../../d3/dd5/struct_opt_anc_info.html">OptAncInfo</a>* anc)
<a name="l04986"></a>04986 {
<a name="l04987"></a>04987   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a68613311a90715f8c1f697bf91f0d09f">sub_anchor</a> |= anc-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#ab9a69bdf299121ad75108a3e1bf8f6fd">left_anchor</a>  &amp; <a class="code" href="../../d6/d87/regint_8h.html#a0d426ab760f616696759ce14c060b622">ANCHOR_BEGIN_LINE</a>;
<a name="l04988"></a>04988   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a68613311a90715f8c1f697bf91f0d09f">sub_anchor</a> |= anc-&gt;<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#a2b9a54a503c8fbcd8b46f42007f2147d">right_anchor</a> &amp; <a class="code" href="../../d6/d87/regint_8h.html#a4dd9db8ffc551d1a759f1fac90baff78">ANCHOR_END_LINE</a>;
<a name="l04989"></a>04989 }
<a name="l04990"></a>04990 
<a name="l04991"></a>04991 <span class="preprocessor">#ifdef ONIG_DEBUG</span>
<a name="l04992"></a>04992 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> print_optimize_info(<a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a>* f, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg);
<a name="l04993"></a>04993 <span class="preprocessor">#endif</span>
<a name="l04994"></a>04994 <span class="preprocessor"></span>
<a name="l04995"></a>04995 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l04996"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a7dd6d18481ff29928fcb6a6faeddc48b">04996</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a7dd6d18481ff29928fcb6a6faeddc48b">set_optimize_info_from_tree</a>(<a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <a class="code" href="../../d6/dbe/struct_scan_env.html">ScanEnv</a>* scan_env)
<a name="l04997"></a>04997 {
<a name="l04998"></a>04998 
<a name="l04999"></a>04999   <span class="keywordtype">int</span> r;
<a name="l05000"></a>05000   <a class="code" href="../../d9/dcf/struct_node_opt_info.html">NodeOptInfo</a> opt;
<a name="l05001"></a>05001   <a class="code" href="../../d6/d2e/struct_opt_env.html">OptEnv</a> env;
<a name="l05002"></a>05002 
<a name="l05003"></a>05003   env.<a class="code" href="../../d6/d2e/struct_opt_env.html#a067f3623c059974e474f6b28cf1eecab">enc</a>            = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>;
<a name="l05004"></a>05004   env.<a class="code" href="../../d6/d2e/struct_opt_env.html#ada2c187eb78050758c55eda24da7cb2e">options</a>        = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a>;
<a name="l05005"></a>05005   env.<a class="code" href="../../d6/d2e/struct_opt_env.html#ad9a5ace21d10189ac9de1b997b2379cf">case_fold_flag</a> = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a4c22ffab8b6aec7bfa1fc8ccda3a1a27">case_fold_flag</a>;
<a name="l05006"></a>05006   env.<a class="code" href="../../d6/d2e/struct_opt_env.html#a2dc30c2c1668dca6cfc5aee3fc9d78ea">scan_env</a>   = scan_env;
<a name="l05007"></a>05007   <a class="code" href="../../d0/d86/regcomp_8c.html#a6657b0c274b61a7c0654e51e52eef6c5">clear_mml</a>(&amp;env.<a class="code" href="../../d6/d2e/struct_opt_env.html#a283a4ef13786d1740f6e602a979c9fc4">mmd</a>);
<a name="l05008"></a>05008 
<a name="l05009"></a>05009   r = <a class="code" href="../../d0/d86/regcomp_8c.html#a64bf2ec6c871b03f56252ce16f83753b">optimize_node_left</a>(node, &amp;opt, &amp;env);
<a name="l05010"></a>05010   <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l05011"></a>05011 
<a name="l05012"></a>05012   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0485640e8e0bc66a76d373303c138993">anchor</a> = opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">anc</a>.<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#ab9a69bdf299121ad75108a3e1bf8f6fd">left_anchor</a> &amp; (<a class="code" href="../../d6/d87/regint_8h.html#a5730b2ca5b8a8bbe5262c77ee26b7879">ANCHOR_BEGIN_BUF</a> |
<a name="l05013"></a>05013         <a class="code" href="../../d6/d87/regint_8h.html#a317bea7c5108d3c78717a5df263fbe09">ANCHOR_BEGIN_POSITION</a> | <a class="code" href="../../d6/d87/regint_8h.html#ad255197c4f708b99046907082857659d">ANCHOR_ANYCHAR_STAR</a> | <a class="code" href="../../d6/d87/regint_8h.html#a770880666efda5a87ba8ce6e618c7bef">ANCHOR_ANYCHAR_STAR_ML</a>);
<a name="l05014"></a>05014 
<a name="l05015"></a>05015   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0485640e8e0bc66a76d373303c138993">anchor</a> |= opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">anc</a>.<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#a2b9a54a503c8fbcd8b46f42007f2147d">right_anchor</a> &amp; (<a class="code" href="../../d6/d87/regint_8h.html#afae1199ac99483eb29f0824cea7b3329">ANCHOR_END_BUF</a> | <a class="code" href="../../d6/d87/regint_8h.html#a9336254890d4656b7e36574b462ca093">ANCHOR_SEMI_END_BUF</a>);
<a name="l05016"></a>05016 
<a name="l05017"></a>05017   <span class="keywordflow">if</span> (reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0485640e8e0bc66a76d373303c138993">anchor</a> &amp; (<a class="code" href="../../d6/d87/regint_8h.html#afae1199ac99483eb29f0824cea7b3329">ANCHOR_END_BUF</a> | <a class="code" href="../../d6/d87/regint_8h.html#a9336254890d4656b7e36574b462ca093">ANCHOR_SEMI_END_BUF</a>)) {
<a name="l05018"></a>05018     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#afdf2d126718b71f66402ba17a12e9af4">anchor_dmin</a> = opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a812885cbb18551e29a4540688f4c157b">min</a>;
<a name="l05019"></a>05019     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a9bd6cd65b049ea96dca9ef10a561d50b">anchor_dmax</a> = opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a>;
<a name="l05020"></a>05020   }
<a name="l05021"></a>05021 
<a name="l05022"></a>05022   <span class="keywordflow">if</span> (opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> &gt; 0 || opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a9b4848025c0b6e49574bf20cf7a74db0">exm</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a16a35d08301b3e563a25a15a19b663b8">len</a> &gt; 0) {
<a name="l05023"></a>05023     <a class="code" href="../../d0/d86/regcomp_8c.html#a3482bb5c83438601e2bce401a49b72d9">select_opt_exact_info</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>, &amp;opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>, &amp;opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a9b4848025c0b6e49574bf20cf7a74db0">exm</a>);
<a name="l05024"></a>05024     <span class="keywordflow">if</span> (opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>.<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a57c79c254c912dd039f0db900b7be0ec">value</a> &gt; 0 &amp;&amp;
<a name="l05025"></a>05025         <a class="code" href="../../d0/d86/regcomp_8c.html#a3bb9e5c82dc98336dfb7494c79817e52">comp_opt_exact_or_map_info</a>(&amp;opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>, &amp;opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>) &gt; 0) {
<a name="l05026"></a>05026       <span class="keywordflow">goto</span> set_map;
<a name="l05027"></a>05027     }
<a name="l05028"></a>05028     <span class="keywordflow">else</span> {
<a name="l05029"></a>05029       r = <a class="code" href="../../d0/d86/regcomp_8c.html#af2049f0c2de3fa16ef25a176369654f2">set_optimize_exact_info</a>(reg, &amp;opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>);
<a name="l05030"></a>05030       <a class="code" href="../../d0/d86/regcomp_8c.html#a60aba7c747e8fe9f7b78c98fd7dab75a">set_sub_anchor</a>(reg, &amp;opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#ae5fe2af5c1e8abf1896740a397004280">exb</a>.<a class="code" href="../../d8/dc8/struct_opt_exact_info.html#a09a227bb2282ed54b850492250cf8ce4">anc</a>);
<a name="l05031"></a>05031     }
<a name="l05032"></a>05032   }
<a name="l05033"></a>05033   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>.<a class="code" href="../../d3/dd6/struct_opt_map_info.html#a57c79c254c912dd039f0db900b7be0ec">value</a> &gt; 0) {
<a name="l05034"></a>05034   set_map:
<a name="l05035"></a>05035     <a class="code" href="../../d0/d86/regcomp_8c.html#a5eb864ddfd3f9b2258d1db8373550a27">set_optimize_map_info</a>(reg, &amp;opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>);
<a name="l05036"></a>05036     <a class="code" href="../../d0/d86/regcomp_8c.html#a60aba7c747e8fe9f7b78c98fd7dab75a">set_sub_anchor</a>(reg, &amp;opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a67a87f3633a77eb2c37b8d67bb45e3c4">map</a>.<a class="code" href="../../d3/dd6/struct_opt_map_info.html#ad93a89419f970f3d9f5b196d3fdcb578">anc</a>);
<a name="l05037"></a>05037   }
<a name="l05038"></a>05038   <span class="keywordflow">else</span> {
<a name="l05039"></a>05039     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a68613311a90715f8c1f697bf91f0d09f">sub_anchor</a> |= opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">anc</a>.<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#ab9a69bdf299121ad75108a3e1bf8f6fd">left_anchor</a> &amp; <a class="code" href="../../d6/d87/regint_8h.html#a0d426ab760f616696759ce14c060b622">ANCHOR_BEGIN_LINE</a>;
<a name="l05040"></a>05040     <span class="keywordflow">if</span> (opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a616f0313584477ae124073bba01bbf0a">len</a>.<a class="code" href="../../d9/d1f/struct_min_max_len.html#a943f3d42675b96621b7634f2929d631b">max</a> == 0)
<a name="l05041"></a>05041       reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a68613311a90715f8c1f697bf91f0d09f">sub_anchor</a> |= opt.<a class="code" href="../../d9/dcf/struct_node_opt_info.html#a6408c139d9d5c0094fe890b473786fd8">anc</a>.<a class="code" href="../../d3/dd5/struct_opt_anc_info.html#a2b9a54a503c8fbcd8b46f42007f2147d">right_anchor</a> &amp; <a class="code" href="../../d6/d87/regint_8h.html#a4dd9db8ffc551d1a759f1fac90baff78">ANCHOR_END_LINE</a>;
<a name="l05042"></a>05042   }
<a name="l05043"></a>05043 
<a name="l05044"></a>05044 <span class="preprocessor">#if defined(ONIG_DEBUG_COMPILE) || defined(ONIG_DEBUG_MATCH)</span>
<a name="l05045"></a>05045 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (!onig_is_prelude()) print_optimize_info(stderr, reg);
<a name="l05046"></a>05046 <span class="preprocessor">#endif</span>
<a name="l05047"></a>05047 <span class="preprocessor"></span>  <span class="keywordflow">return</span> r;
<a name="l05048"></a>05048 }
<a name="l05049"></a>05049 
<a name="l05050"></a>05050 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l05051"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a4186d1d76942ef9684b4a0db1f83157e">05051</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a4186d1d76942ef9684b4a0db1f83157e">clear_optimize_info</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l05052"></a>05052 {
<a name="l05053"></a>05053   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a9bcb518fa967f1b1758161d2d207cc8c">optimize</a>      = <a class="code" href="../../d6/d87/regint_8h.html#aa9c12ee4114a1c2d70dbae958b0210a9">ONIG_OPTIMIZE_NONE</a>;
<a name="l05054"></a>05054   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0485640e8e0bc66a76d373303c138993">anchor</a>        = 0;
<a name="l05055"></a>05055   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#afdf2d126718b71f66402ba17a12e9af4">anchor_dmin</a>   = 0;
<a name="l05056"></a>05056   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a9bd6cd65b049ea96dca9ef10a561d50b">anchor_dmax</a>   = 0;
<a name="l05057"></a>05057   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a68613311a90715f8c1f697bf91f0d09f">sub_anchor</a>    = 0;
<a name="l05058"></a>05058   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0656dcfc893bc5f00677f6e3f87a0007">exact_end</a>     = (<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* )<a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l05059"></a>05059   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a33bd3aaf0e6a21dd1958442fcbdf55f4">threshold_len</a> = 0;
<a name="l05060"></a>05060   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a>)) {
<a name="l05061"></a>05061     <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a>);
<a name="l05062"></a>05062     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a> = (<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* )<a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l05063"></a>05063   }
<a name="l05064"></a>05064 }
<a name="l05065"></a>05065 
<a name="l05066"></a>05066 <span class="preprocessor">#ifdef ONIG_DEBUG</span>
<a name="l05067"></a>05067 <span class="preprocessor"></span>
<a name="l05068"></a>05068 <span class="keyword">static</span> <span class="keywordtype">void</span> print_enc_string(<a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a>* fp, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc,
<a name="l05069"></a>05069                              <span class="keyword">const</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *s, <span class="keyword">const</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *end)
<a name="l05070"></a>05070 {
<a name="l05071"></a>05071   fprintf(fp, <span class="stringliteral">&quot;\nPATTERN: /&quot;</span>);
<a name="l05072"></a>05072 
<a name="l05073"></a>05073   <span class="keywordflow">if</span> (<a class="code" href="../../d8/db3/oniguruma_8h.html#a9d0d6012e6b7de2cf851d274bb9b9c9c">ONIGENC_MBC_MINLEN</a>(enc) &gt; 1) {
<a name="l05074"></a>05074     <span class="keyword">const</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *p;
<a name="l05075"></a>05075     <a class="code" href="../../d8/db3/oniguruma_8h.html#a7c8a84bc12127007886efbfcf53b6fb5">OnigCodePoint</a> code;
<a name="l05076"></a>05076 
<a name="l05077"></a>05077     p = s;
<a name="l05078"></a>05078     <span class="keywordflow">while</span> (p &lt; end) {
<a name="l05079"></a>05079       code = <a class="code" href="../../d8/db3/oniguruma_8h.html#a375d2932370b8067cb9c73f17051ae89">ONIGENC_MBC_TO_CODE</a>(enc, p, end);
<a name="l05080"></a>05080       <span class="keywordflow">if</span> (code &gt;= 0x80) {
<a name="l05081"></a>05081         fprintf(fp, <span class="stringliteral">&quot; 0x%04x &quot;</span>, (<span class="keywordtype">int</span> )code);
<a name="l05082"></a>05082       }
<a name="l05083"></a>05083       <span class="keywordflow">else</span> {
<a name="l05084"></a>05084         fputc((<span class="keywordtype">int</span> )code, fp);
<a name="l05085"></a>05085       }
<a name="l05086"></a>05086 
<a name="l05087"></a>05087       p += <a class="code" href="../../d3/d09/ripper_8y.html#ae9f8530a4c9ec89ae8d62ce5b4410aad">enclen</a>(enc, p, end);
<a name="l05088"></a>05088     }
<a name="l05089"></a>05089   }
<a name="l05090"></a>05090   <span class="keywordflow">else</span> {
<a name="l05091"></a>05091     <span class="keywordflow">while</span> (s &lt; end) {
<a name="l05092"></a>05092       fputc((<span class="keywordtype">int</span> )*s, fp);
<a name="l05093"></a>05093       s++;
<a name="l05094"></a>05094     }
<a name="l05095"></a>05095   }
<a name="l05096"></a>05096 
<a name="l05097"></a>05097   fprintf(fp, <span class="stringliteral">&quot;/ (%s)\n&quot;</span>, enc-&gt;<a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html#a297b454a05f56650dbba59d0109b3f7f">name</a>);
<a name="l05098"></a>05098 }
<a name="l05099"></a>05099 
<a name="l05100"></a>05100 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l05101"></a>05101 print_distance_range(<a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a>* f, <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> a, <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> b)
<a name="l05102"></a>05102 {
<a name="l05103"></a>05103   <span class="keywordflow">if</span> (a == <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a>)
<a name="l05104"></a>05104     fputs(<span class="stringliteral">&quot;inf&quot;</span>, f);
<a name="l05105"></a>05105   <span class="keywordflow">else</span>
<a name="l05106"></a>05106     fprintf(f, <span class="stringliteral">&quot;(%&quot;</span><a class="code" href="../../de/de6/ruby_2ruby_8h.html#a2b7b0557dc6cd786df02dafbb51f5292">PRIuSIZE</a><span class="stringliteral">&quot;)&quot;</span>, a);
<a name="l05107"></a>05107 
<a name="l05108"></a>05108   fputs(<span class="stringliteral">&quot;-&quot;</span>, f);
<a name="l05109"></a>05109 
<a name="l05110"></a>05110   <span class="keywordflow">if</span> (b == <a class="code" href="../../d8/db3/oniguruma_8h.html#a0f2bb52c9b32ce8ef54580e55860b569">ONIG_INFINITE_DISTANCE</a>)
<a name="l05111"></a>05111     fputs(<span class="stringliteral">&quot;inf&quot;</span>, f);
<a name="l05112"></a>05112   <span class="keywordflow">else</span>
<a name="l05113"></a>05113     fprintf(f, <span class="stringliteral">&quot;(%&quot;</span><a class="code" href="../../de/de6/ruby_2ruby_8h.html#a2b7b0557dc6cd786df02dafbb51f5292">PRIuSIZE</a><span class="stringliteral">&quot;)&quot;</span>, b);
<a name="l05114"></a>05114 }
<a name="l05115"></a>05115 
<a name="l05116"></a>05116 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l05117"></a>05117 print_anchor(<a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a>* f, <span class="keywordtype">int</span> anchor)
<a name="l05118"></a>05118 {
<a name="l05119"></a>05119   <span class="keywordtype">int</span> q = 0;
<a name="l05120"></a>05120 
<a name="l05121"></a>05121   fprintf(f, <span class="stringliteral">&quot;[&quot;</span>);
<a name="l05122"></a>05122 
<a name="l05123"></a>05123   <span class="keywordflow">if</span> (anchor &amp; <a class="code" href="../../d6/d87/regint_8h.html#a5730b2ca5b8a8bbe5262c77ee26b7879">ANCHOR_BEGIN_BUF</a>) {
<a name="l05124"></a>05124     fprintf(f, <span class="stringliteral">&quot;begin-buf&quot;</span>);
<a name="l05125"></a>05125     q = 1;
<a name="l05126"></a>05126   }
<a name="l05127"></a>05127   <span class="keywordflow">if</span> (anchor &amp; <a class="code" href="../../d6/d87/regint_8h.html#a0d426ab760f616696759ce14c060b622">ANCHOR_BEGIN_LINE</a>) {
<a name="l05128"></a>05128     <span class="keywordflow">if</span> (q) fprintf(f, <span class="stringliteral">&quot;, &quot;</span>);
<a name="l05129"></a>05129     q = 1;
<a name="l05130"></a>05130     fprintf(f, <span class="stringliteral">&quot;begin-line&quot;</span>);
<a name="l05131"></a>05131   }
<a name="l05132"></a>05132   <span class="keywordflow">if</span> (anchor &amp; <a class="code" href="../../d6/d87/regint_8h.html#a317bea7c5108d3c78717a5df263fbe09">ANCHOR_BEGIN_POSITION</a>) {
<a name="l05133"></a>05133     <span class="keywordflow">if</span> (q) fprintf(f, <span class="stringliteral">&quot;, &quot;</span>);
<a name="l05134"></a>05134     q = 1;
<a name="l05135"></a>05135     fprintf(f, <span class="stringliteral">&quot;begin-pos&quot;</span>);
<a name="l05136"></a>05136   }
<a name="l05137"></a>05137   <span class="keywordflow">if</span> (anchor &amp; <a class="code" href="../../d6/d87/regint_8h.html#afae1199ac99483eb29f0824cea7b3329">ANCHOR_END_BUF</a>) {
<a name="l05138"></a>05138     <span class="keywordflow">if</span> (q) fprintf(f, <span class="stringliteral">&quot;, &quot;</span>);
<a name="l05139"></a>05139     q = 1;
<a name="l05140"></a>05140     fprintf(f, <span class="stringliteral">&quot;end-buf&quot;</span>);
<a name="l05141"></a>05141   }
<a name="l05142"></a>05142   <span class="keywordflow">if</span> (anchor &amp; <a class="code" href="../../d6/d87/regint_8h.html#a9336254890d4656b7e36574b462ca093">ANCHOR_SEMI_END_BUF</a>) {
<a name="l05143"></a>05143     <span class="keywordflow">if</span> (q) fprintf(f, <span class="stringliteral">&quot;, &quot;</span>);
<a name="l05144"></a>05144     q = 1;
<a name="l05145"></a>05145     fprintf(f, <span class="stringliteral">&quot;semi-end-buf&quot;</span>);
<a name="l05146"></a>05146   }
<a name="l05147"></a>05147   <span class="keywordflow">if</span> (anchor &amp; <a class="code" href="../../d6/d87/regint_8h.html#a4dd9db8ffc551d1a759f1fac90baff78">ANCHOR_END_LINE</a>) {
<a name="l05148"></a>05148     <span class="keywordflow">if</span> (q) fprintf(f, <span class="stringliteral">&quot;, &quot;</span>);
<a name="l05149"></a>05149     q = 1;
<a name="l05150"></a>05150     fprintf(f, <span class="stringliteral">&quot;end-line&quot;</span>);
<a name="l05151"></a>05151   }
<a name="l05152"></a>05152   <span class="keywordflow">if</span> (anchor &amp; <a class="code" href="../../d6/d87/regint_8h.html#ad255197c4f708b99046907082857659d">ANCHOR_ANYCHAR_STAR</a>) {
<a name="l05153"></a>05153     <span class="keywordflow">if</span> (q) fprintf(f, <span class="stringliteral">&quot;, &quot;</span>);
<a name="l05154"></a>05154     q = 1;
<a name="l05155"></a>05155     fprintf(f, <span class="stringliteral">&quot;anychar-star&quot;</span>);
<a name="l05156"></a>05156   }
<a name="l05157"></a>05157   <span class="keywordflow">if</span> (anchor &amp; <a class="code" href="../../d6/d87/regint_8h.html#a770880666efda5a87ba8ce6e618c7bef">ANCHOR_ANYCHAR_STAR_ML</a>) {
<a name="l05158"></a>05158     <span class="keywordflow">if</span> (q) fprintf(f, <span class="stringliteral">&quot;, &quot;</span>);
<a name="l05159"></a>05159     fprintf(f, <span class="stringliteral">&quot;anychar-star-pl&quot;</span>);
<a name="l05160"></a>05160   }
<a name="l05161"></a>05161 
<a name="l05162"></a>05162   fprintf(f, <span class="stringliteral">&quot;]&quot;</span>);
<a name="l05163"></a>05163 }
<a name="l05164"></a>05164 
<a name="l05165"></a>05165 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l05166"></a>05166 print_optimize_info(<a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a>* f, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l05167"></a>05167 {
<a name="l05168"></a>05168   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* on[] = { <span class="stringliteral">&quot;NONE&quot;</span>, <span class="stringliteral">&quot;EXACT&quot;</span>, <span class="stringliteral">&quot;EXACT_BM&quot;</span>, <span class="stringliteral">&quot;EXACT_BM_NOT_REV&quot;</span>,
<a name="l05169"></a>05169                               <span class="stringliteral">&quot;EXACT_IC&quot;</span>, <span class="stringliteral">&quot;MAP&quot;</span> };
<a name="l05170"></a>05170 
<a name="l05171"></a>05171   fprintf(f, <span class="stringliteral">&quot;optimize: %s\n&quot;</span>, on[reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a9bcb518fa967f1b1758161d2d207cc8c">optimize</a>]);
<a name="l05172"></a>05172   fprintf(f, <span class="stringliteral">&quot;  anchor: &quot;</span>); print_anchor(f, reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0485640e8e0bc66a76d373303c138993">anchor</a>);
<a name="l05173"></a>05173   <span class="keywordflow">if</span> ((reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0485640e8e0bc66a76d373303c138993">anchor</a> &amp; <a class="code" href="../../d1/dfc/regparse_8h.html#a48f473a10f888f7ad31dbc333fe21ed0">ANCHOR_END_BUF_MASK</a>) != 0)
<a name="l05174"></a>05174     print_distance_range(f, reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#afdf2d126718b71f66402ba17a12e9af4">anchor_dmin</a>, reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a9bd6cd65b049ea96dca9ef10a561d50b">anchor_dmax</a>);
<a name="l05175"></a>05175   fprintf(f, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l05176"></a>05176 
<a name="l05177"></a>05177   <span class="keywordflow">if</span> (reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a9bcb518fa967f1b1758161d2d207cc8c">optimize</a>) {
<a name="l05178"></a>05178     fprintf(f, <span class="stringliteral">&quot;  sub anchor: &quot;</span>); print_anchor(f, reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a68613311a90715f8c1f697bf91f0d09f">sub_anchor</a>);
<a name="l05179"></a>05179     fprintf(f, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l05180"></a>05180   }
<a name="l05181"></a>05181   fprintf(f, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l05182"></a>05182 
<a name="l05183"></a>05183   <span class="keywordflow">if</span> (reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a>) {
<a name="l05184"></a>05184     <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *p;
<a name="l05185"></a>05185     fprintf(f, <span class="stringliteral">&quot;exact: [&quot;</span>);
<a name="l05186"></a>05186     <span class="keywordflow">for</span> (p = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a>; p &lt; reg-&gt;exact_end; p++) {
<a name="l05187"></a>05187       fputc(*p, f);
<a name="l05188"></a>05188     }
<a name="l05189"></a>05189     fprintf(f, <span class="stringliteral">&quot;]: length: %ld\n&quot;</span>, (reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0656dcfc893bc5f00677f6e3f87a0007">exact_end</a> - reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a>));
<a name="l05190"></a>05190   }
<a name="l05191"></a>05191   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a9bcb518fa967f1b1758161d2d207cc8c">optimize</a> &amp; <a class="code" href="../../d6/d87/regint_8h.html#a25b2b8320888b7829abbba60845b259a">ONIG_OPTIMIZE_MAP</a>) {
<a name="l05192"></a>05192     <span class="keywordtype">int</span> c, i, n = 0;
<a name="l05193"></a>05193 
<a name="l05194"></a>05194     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d8/db3/oniguruma_8h.html#aa5e520778f7bf10deda0dff9570b36de">ONIG_CHAR_TABLE_SIZE</a>; i++)
<a name="l05195"></a>05195       <span class="keywordflow">if</span> (reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#aa54d02532294cb067ed2659e07ee742c">map</a>[i]) n++;
<a name="l05196"></a>05196 
<a name="l05197"></a>05197     fprintf(f, <span class="stringliteral">&quot;map: n=%d\n&quot;</span>, n);
<a name="l05198"></a>05198     <span class="keywordflow">if</span> (n &gt; 0) {
<a name="l05199"></a>05199       c = 0;
<a name="l05200"></a>05200       fputc(<span class="charliteral">&apos;[&apos;</span>, f);
<a name="l05201"></a>05201       <span class="keywordflow">for</span> (i = 0; i &lt; ONIG_CHAR_TABLE_SIZE; i++) {
<a name="l05202"></a>05202         <span class="keywordflow">if</span> (reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#aa54d02532294cb067ed2659e07ee742c">map</a>[i] != 0) {
<a name="l05203"></a>05203           <span class="keywordflow">if</span> (c &gt; 0)  fputs(<span class="stringliteral">&quot;, &quot;</span>, f);
<a name="l05204"></a>05204           c++;
<a name="l05205"></a>05205           <span class="keywordflow">if</span> (<a class="code" href="../../d8/db3/oniguruma_8h.html#a9b7b4b30cc33c93886aef6db226f8538">ONIGENC_MBC_MAXLEN</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>) == 1 &amp;&amp;
<a name="l05206"></a>05206               <a class="code" href="../../d8/db3/oniguruma_8h.html#a1638e1fd4d88064a651eb2a8c534ba6f">ONIGENC_IS_CODE_PRINT</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>, (<a class="code" href="../../d8/db3/oniguruma_8h.html#a7c8a84bc12127007886efbfcf53b6fb5">OnigCodePoint</a> )i))
<a name="l05207"></a>05207             fputc(i, f);
<a name="l05208"></a>05208           <span class="keywordflow">else</span>
<a name="l05209"></a>05209             fprintf(f, <span class="stringliteral">&quot;%d&quot;</span>, i);
<a name="l05210"></a>05210         }
<a name="l05211"></a>05211       }
<a name="l05212"></a>05212       fprintf(f, <span class="stringliteral">&quot;]\n&quot;</span>);
<a name="l05213"></a>05213     }
<a name="l05214"></a>05214   }
<a name="l05215"></a>05215 }
<a name="l05216"></a>05216 <span class="preprocessor">#endif </span><span class="comment">/* ONIG_DEBUG */</span>
<a name="l05217"></a>05217 
<a name="l05218"></a>05218 
<a name="l05219"></a>05219 <span class="keyword">extern</span> <span class="keywordtype">void</span>
<a name="l05220"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a69ec040502b7f39cc7f0dcb15ec60073">05220</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a69ec040502b7f39cc7f0dcb15ec60073">onig_free_body</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l05221"></a>05221 {
<a name="l05222"></a>05222   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(reg)) {
<a name="l05223"></a>05223     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af28499b9afdcbaf41103796558f2a4f9">p</a>))                <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af28499b9afdcbaf41103796558f2a4f9">p</a>);
<a name="l05224"></a>05224     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a>))            <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a>);
<a name="l05225"></a>05225     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a291a532e6b6af4e6bda9cee6c46833b7">int_map</a>))          <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a291a532e6b6af4e6bda9cee6c46833b7">int_map</a>);
<a name="l05226"></a>05226     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a7156fabcbe461dd1f281251b73fd7e8c">int_map_backward</a>)) <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a7156fabcbe461dd1f281251b73fd7e8c">int_map_backward</a>);
<a name="l05227"></a>05227     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a640c016fa90e50ea710d2b5e55760590">repeat_range</a>))     <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a640c016fa90e50ea710d2b5e55760590">repeat_range</a>);
<a name="l05228"></a>05228     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a4d0e363509f4b7bf72063442a166f822">chain</a>))            <a class="code" href="../../d0/d86/regcomp_8c.html#ac84095b31018b2fe291a31408179ae07">onig_free</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a4d0e363509f4b7bf72063442a166f822">chain</a>);
<a name="l05229"></a>05229 
<a name="l05230"></a>05230 <span class="preprocessor">#ifdef USE_NAMED_GROUP</span>
<a name="l05231"></a>05231 <span class="preprocessor"></span>    <a class="code" href="../../d6/dda/regparse_8c.html#acb18d5fa84a45870b5a9739deff10659">onig_names_free</a>(reg);
<a name="l05232"></a>05232 <span class="preprocessor">#endif</span>
<a name="l05233"></a>05233 <span class="preprocessor"></span>  }
<a name="l05234"></a>05234 }
<a name="l05235"></a>05235 
<a name="l05236"></a>05236 <span class="keyword">extern</span> <span class="keywordtype">void</span>
<a name="l05237"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ac84095b31018b2fe291a31408179ae07">05237</a> <a class="code" href="../../d0/d86/regcomp_8c.html#ac84095b31018b2fe291a31408179ae07">onig_free</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l05238"></a>05238 {
<a name="l05239"></a>05239   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(reg)) {
<a name="l05240"></a>05240     <a class="code" href="../../d0/d86/regcomp_8c.html#a69ec040502b7f39cc7f0dcb15ec60073">onig_free_body</a>(reg);
<a name="l05241"></a>05241     <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(reg);
<a name="l05242"></a>05242   }
<a name="l05243"></a>05243 }
<a name="l05244"></a>05244 
<a name="l05245"></a>05245 <span class="keywordtype">size_t</span>
<a name="l05246"></a><a class="code" href="../../d0/d86/regcomp_8c.html#aa7cd0a6158a91b332b585e3ce32035fe">05246</a> <a class="code" href="../../d0/d86/regcomp_8c.html#aa7cd0a6158a91b332b585e3ce32035fe">onig_memsize</a>(<span class="keyword">const</span> <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a> *reg)
<a name="l05247"></a>05247 {
<a name="l05248"></a>05248     <span class="keywordtype">size_t</span> size = <span class="keyword">sizeof</span>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>);
<a name="l05249"></a>05249     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af28499b9afdcbaf41103796558f2a4f9">p</a>))                size += reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ad2771f4bfea07e843369c8bec5cd50a0">alloc</a>;
<a name="l05250"></a>05250     <a class="code" href="../../d7/dc0/parse_8y.html#a2ac1143ac343c79cbfa448e30d74fa1c">if</a> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a>))            size += reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a0656dcfc893bc5f00677f6e3f87a0007">exact_end</a> - reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af35df9ace683f51262e4943b854df36d">exact</a>;
<a name="l05251"></a>05251     <a class="code" href="../../d7/dc0/parse_8y.html#a2ac1143ac343c79cbfa448e30d74fa1c">if</a> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a291a532e6b6af4e6bda9cee6c46833b7">int_map</a>))          size += <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * ONIG_CHAR_TABLE_SIZE;
<a name="l05252"></a>05252     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a7156fabcbe461dd1f281251b73fd7e8c">int_map_backward</a>)) size += <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * ONIG_CHAR_TABLE_SIZE;
<a name="l05253"></a>05253     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a640c016fa90e50ea710d2b5e55760590">repeat_range</a>))     size += reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a62072755ec72bb1a94c9379dc2b2f78d">repeat_range_alloc</a> * <span class="keyword">sizeof</span>(<a class="code" href="../../de/d9c/struct_onig_repeat_range.html">OnigRepeatRange</a>);
<a name="l05254"></a>05254     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a4d0e363509f4b7bf72063442a166f822">chain</a>))            size += <a class="code" href="../../d0/d86/regcomp_8c.html#aa7cd0a6158a91b332b585e3ce32035fe">onig_memsize</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a4d0e363509f4b7bf72063442a166f822">chain</a>);
<a name="l05255"></a>05255 
<a name="l05256"></a>05256     <span class="keywordflow">return</span> size;
<a name="l05257"></a>05257 }
<a name="l05258"></a>05258 
<a name="l05259"></a><a class="code" href="../../d0/d86/regcomp_8c.html#addf8c2a57283e6d0dacca124b631ac92">05259</a> <span class="preprocessor">#define REGEX_TRANSFER(to,from) do {\</span>
<a name="l05260"></a>05260 <span class="preprocessor">  (to)-&gt;state = ONIG_STATE_MODIFY;\</span>
<a name="l05261"></a>05261 <span class="preprocessor">  onig_free_body(to);\</span>
<a name="l05262"></a>05262 <span class="preprocessor">  xmemcpy(to, from, sizeof(regex_t));\</span>
<a name="l05263"></a>05263 <span class="preprocessor">  xfree(from);\</span>
<a name="l05264"></a>05264 <span class="preprocessor">} while (0)</span>
<a name="l05265"></a>05265 <span class="preprocessor"></span>
<a name="l05266"></a>05266 <span class="keyword">extern</span> <span class="keywordtype">void</span>
<a name="l05267"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a9684a5e16b771c14e371ce4e2600a127">05267</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a9684a5e16b771c14e371ce4e2600a127">onig_transfer</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* to, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* from)
<a name="l05268"></a>05268 {
<a name="l05269"></a>05269   <a class="code" href="../../d6/d87/regint_8h.html#a89044129ef788a94169add8be849e66b">THREAD_ATOMIC_START</a>;
<a name="l05270"></a>05270   <a class="code" href="../../d0/d86/regcomp_8c.html#addf8c2a57283e6d0dacca124b631ac92">REGEX_TRANSFER</a>(to, from);
<a name="l05271"></a>05271   <a class="code" href="../../d6/d87/regint_8h.html#a88a1ea7a04c3da104c4ef1ff6444b3ae">THREAD_ATOMIC_END</a>;
<a name="l05272"></a>05272 }
<a name="l05273"></a>05273 
<a name="l05274"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a6bb9e07088117459a60faa118d7235a7">05274</a> <span class="preprocessor">#define REGEX_CHAIN_HEAD(reg) do {\</span>
<a name="l05275"></a>05275 <span class="preprocessor">  while (IS_NOT_NULL((reg)-&gt;chain)) {\</span>
<a name="l05276"></a>05276 <span class="preprocessor">    (reg) = (reg)-&gt;chain;\</span>
<a name="l05277"></a>05277 <span class="preprocessor">  }\</span>
<a name="l05278"></a>05278 <span class="preprocessor">} while (0)</span>
<a name="l05279"></a>05279 <span class="preprocessor"></span>
<a name="l05280"></a>05280 <span class="keyword">extern</span> <span class="keywordtype">void</span>
<a name="l05281"></a><a class="code" href="../../d0/d86/regcomp_8c.html#ab0716f6853df79d80c34c3273ce1fd00">05281</a> <a class="code" href="../../d0/d86/regcomp_8c.html#ab0716f6853df79d80c34c3273ce1fd00">onig_chain_link_add</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* to, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* <a class="code" href="../../d1/d6f/date__strftime_8c.html#aa62ba8463316e20fcef4b9db83bab2fd">add</a>)
<a name="l05282"></a>05282 {
<a name="l05283"></a>05283   <a class="code" href="../../d6/d87/regint_8h.html#a89044129ef788a94169add8be849e66b">THREAD_ATOMIC_START</a>;
<a name="l05284"></a>05284   <a class="code" href="../../d0/d86/regcomp_8c.html#a6bb9e07088117459a60faa118d7235a7">REGEX_CHAIN_HEAD</a>(to);
<a name="l05285"></a>05285   to-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a4d0e363509f4b7bf72063442a166f822">chain</a> = add;
<a name="l05286"></a>05286   <a class="code" href="../../d6/d87/regint_8h.html#a88a1ea7a04c3da104c4ef1ff6444b3ae">THREAD_ATOMIC_END</a>;
<a name="l05287"></a>05287 }
<a name="l05288"></a>05288 
<a name="l05289"></a>05289 <span class="keyword">extern</span> <span class="keywordtype">void</span>
<a name="l05290"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a75ed4b1466d696a9ccad1c7f205d82f1">05290</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a75ed4b1466d696a9ccad1c7f205d82f1">onig_chain_reduce</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l05291"></a>05291 {
<a name="l05292"></a>05292   <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a> *head, *prev;
<a name="l05293"></a>05293 
<a name="l05294"></a>05294   prev = reg;
<a name="l05295"></a>05295   head = prev-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a4d0e363509f4b7bf72063442a166f822">chain</a>;
<a name="l05296"></a>05296   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(head)) {
<a name="l05297"></a>05297     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#aedebfd9ab0d56d063296f4cdc94a30f3">state</a> = <a class="code" href="../../d8/db3/oniguruma_8h.html#ac4014e252e5febb907a642669eea72a8">ONIG_STATE_MODIFY</a>;
<a name="l05298"></a>05298     <span class="keywordflow">while</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(head-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a4d0e363509f4b7bf72063442a166f822">chain</a>)) {
<a name="l05299"></a>05299       prev = head;
<a name="l05300"></a>05300       head = head-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a4d0e363509f4b7bf72063442a166f822">chain</a>;
<a name="l05301"></a>05301     }
<a name="l05302"></a>05302     prev-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a4d0e363509f4b7bf72063442a166f822">chain</a> = (<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* )<a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l05303"></a>05303     <a class="code" href="../../d0/d86/regcomp_8c.html#addf8c2a57283e6d0dacca124b631ac92">REGEX_TRANSFER</a>(reg, head);
<a name="l05304"></a>05304   }
<a name="l05305"></a>05305 }
<a name="l05306"></a>05306 
<a name="l05307"></a>05307 <span class="preprocessor">#ifdef ONIG_DEBUG</span>
<a name="l05308"></a>05308 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> print_compiled_byte_code_list <a class="code" href="../../d8/db3/oniguruma_8h.html#a44cc3f867a0e5ec2e99c45565cb05e08">P_</a>((<a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a>* f, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg));
<a name="l05309"></a>05309 <span class="preprocessor">#endif</span>
<a name="l05310"></a>05310 <span class="preprocessor"></span><span class="preprocessor">#ifdef ONIG_DEBUG_PARSE_TREE</span>
<a name="l05311"></a>05311 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span> print_tree <a class="code" href="../../d8/db3/oniguruma_8h.html#a44cc3f867a0e5ec2e99c45565cb05e08">P_</a>((<a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a>* f, <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node));
<a name="l05312"></a>05312 <span class="preprocessor">#endif</span>
<a name="l05313"></a>05313 <span class="preprocessor"></span>
<a name="l05314"></a>05314 <span class="keyword">extern</span> <span class="keywordtype">int</span>
<a name="l05315"></a><a class="code" href="../../d0/d86/regcomp_8c.html#aa98aadf1b06fc184a285c2f8d9ac2950">05315</a> <a class="code" href="../../d0/d86/regcomp_8c.html#aa98aadf1b06fc184a285c2f8d9ac2950">onig_compile</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keyword">const</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* pattern, <span class="keyword">const</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* pattern_end,
<a name="l05316"></a>05316               <a class="code" href="../../da/df3/struct_onig_error_info.html">OnigErrorInfo</a>* einfo, <span class="keyword">const</span> <span class="keywordtype">char</span> *sourcefile, <span class="keywordtype">int</span> sourceline)
<a name="l05317"></a>05317 {
<a name="l05318"></a>05318 <span class="preprocessor">#define COMPILE_INIT_SIZE  20</span>
<a name="l05319"></a>05319 <span class="preprocessor"></span>
<a name="l05320"></a>05320   <span class="keywordtype">int</span> r;
<a name="l05321"></a>05321   <a class="code" href="../../d8/db3/oniguruma_8h.html#aea2e926fe611f36269c4df294e43ae5f">OnigDistance</a> init_size;
<a name="l05322"></a>05322   <a class="code" href="../../d0/d6e/struct___node.html">Node</a>*  root;
<a name="l05323"></a>05323   <a class="code" href="../../d6/dbe/struct_scan_env.html">ScanEnv</a>  scan_env = {0};
<a name="l05324"></a>05324 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l05325"></a>05325 <span class="preprocessor"></span>  <a class="code" href="../../da/dd0/struct_unset_addr_list.html">UnsetAddrList</a>  uslist;
<a name="l05326"></a>05326 <span class="preprocessor">#endif</span>
<a name="l05327"></a>05327 <span class="preprocessor"></span>
<a name="l05328"></a>05328   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(einfo)) einfo-&gt;<a class="code" href="../../da/df3/struct_onig_error_info.html#a42237b3a7db5e8c4622f476c2892e6be">par</a> = (<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* )<a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l05329"></a>05329 
<a name="l05330"></a>05330   scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#ac098ebd6891beee70cc019bec3ce4cfd">sourcefile</a> = sourcefile;
<a name="l05331"></a>05331   scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a5ae929d1df22fc2dfd24700262934b38">sourceline</a> = sourceline;
<a name="l05332"></a>05332   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#aedebfd9ab0d56d063296f4cdc94a30f3">state</a> = <a class="code" href="../../d8/db3/oniguruma_8h.html#aa75442688d4dcb933dbe4282dca874f2">ONIG_STATE_COMPILING</a>;
<a name="l05333"></a>05333 
<a name="l05334"></a>05334 <span class="preprocessor">#ifdef ONIG_DEBUG</span>
<a name="l05335"></a>05335 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (!onig_is_prelude()) print_enc_string(stderr, reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>, pattern, pattern_end);
<a name="l05336"></a>05336 <span class="preprocessor">#endif</span>
<a name="l05337"></a>05337 <span class="preprocessor"></span>
<a name="l05338"></a>05338   <span class="keywordflow">if</span> (reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ad2771f4bfea07e843369c8bec5cd50a0">alloc</a> == 0) {
<a name="l05339"></a>05339     init_size = (pattern_end - pattern) * 2;
<a name="l05340"></a>05340     <span class="keywordflow">if</span> (init_size &lt;= 0) init_size = <a class="code" href="../../d0/d86/regcomp_8c.html#ab962c26daa2af70cacaf5f8c7c581d89">COMPILE_INIT_SIZE</a>;
<a name="l05341"></a>05341     r = <a class="code" href="../../d6/d87/regint_8h.html#a791a20675ed654805f305bd867813a89">BBUF_INIT</a>(reg, init_size);
<a name="l05342"></a>05342     <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">goto</span> end;
<a name="l05343"></a>05343   }
<a name="l05344"></a>05344   <span class="keywordflow">else</span>
<a name="l05345"></a>05345     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a4cf446c0eb86f2fc3322f9fb27c5dc0f">used</a> = 0;
<a name="l05346"></a>05346 
<a name="l05347"></a>05347   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#aaeb8694dde3a66fd839603fede774ca5">num_mem</a>            = 0;
<a name="l05348"></a>05348   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a007d05ab38dc2cfac189a4596b8c84b4">num_repeat</a>         = 0;
<a name="l05349"></a>05349   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a503ad43eef2152c5242f7571e000bd21">num_null_check</a>     = 0;
<a name="l05350"></a>05350   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a62072755ec72bb1a94c9379dc2b2f78d">repeat_range_alloc</a> = 0;
<a name="l05351"></a>05351   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a640c016fa90e50ea710d2b5e55760590">repeat_range</a>       = (<a class="code" href="../../de/d9c/struct_onig_repeat_range.html">OnigRepeatRange</a>* )<a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l05352"></a>05352 <span class="preprocessor">#ifdef USE_COMBINATION_EXPLOSION_CHECK</span>
<a name="l05353"></a>05353 <span class="preprocessor"></span>  reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a627abcc41418b0bdee0827c88e26d12b">num_comb_exp_check</a> = 0;
<a name="l05354"></a>05354 <span class="preprocessor">#endif</span>
<a name="l05355"></a>05355 <span class="preprocessor"></span>
<a name="l05356"></a>05356   r = <a class="code" href="../../d6/dda/regparse_8c.html#a65633994c3490b701c540cdf9c54e0ed">onig_parse_make_tree</a>(&amp;root, pattern, pattern_end, reg, &amp;scan_env);
<a name="l05357"></a>05357   <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">goto</span> <a class="code" href="../../d5/df2/win32_8c.html#a6ce68847c12434f60d1b2654a3dc3409">err</a>;
<a name="l05358"></a>05358 
<a name="l05359"></a>05359 <span class="preprocessor">#ifdef ONIG_DEBUG_PARSE_TREE</span>
<a name="l05360"></a>05360 <span class="preprocessor"></span><span class="preprocessor"># if 0</span>
<a name="l05361"></a>05361 <span class="preprocessor"></span>  fprintf(stderr, <span class="stringliteral">&quot;ORIGINAL PARSE TREE:\n&quot;</span>);
<a name="l05362"></a>05362   <span class="keywordflow">if</span> (!onig_is_prelude()) {
<a name="l05363"></a>05363     print_tree(stderr, root);
<a name="l05364"></a>05364   }
<a name="l05365"></a>05365 <span class="preprocessor"># endif</span>
<a name="l05366"></a>05366 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l05367"></a>05367 <span class="preprocessor"></span>
<a name="l05368"></a>05368 <span class="preprocessor">#ifdef USE_NAMED_GROUP</span>
<a name="l05369"></a>05369 <span class="preprocessor"></span>  <span class="comment">/* mixed use named group and no-named group */</span>
<a name="l05370"></a>05370   <span class="keywordflow">if</span> (scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a6631d9427686a047869c75049f0d6c02">num_named</a> &gt; 0 &amp;&amp;
<a name="l05371"></a>05371       <a class="code" href="../../d1/dfc/regparse_8h.html#a18bfc9ee154d6dd516347bd71b4810f6">IS_SYNTAX_BV</a>(scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#ae5c4502ad7b7a4a418eda464919d2bda">syntax</a>, <a class="code" href="../../d8/db3/oniguruma_8h.html#aabffac0a9cf8aa6bda2d83997bbccd94">ONIG_SYN_CAPTURE_ONLY_NAMED_GROUP</a>) &amp;&amp;
<a name="l05372"></a>05372       !<a class="code" href="../../d8/db3/oniguruma_8h.html#a2ff7c691b88c0b43377bbe3f409b036a">ONIG_IS_OPTION_ON</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a>, <a class="code" href="../../d8/db3/oniguruma_8h.html#a89a38e785fb1aa007945f4e5fabb6b3e">ONIG_OPTION_CAPTURE_GROUP</a>)) {
<a name="l05373"></a>05373     <span class="keywordflow">if</span> (scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a6631d9427686a047869c75049f0d6c02">num_named</a> != scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a5f71c0a538e047bc63962df55ff304b0">num_mem</a>)
<a name="l05374"></a>05374       r = disable_noname_group_capture(&amp;root, reg, &amp;scan_env);
<a name="l05375"></a>05375     <span class="keywordflow">else</span>
<a name="l05376"></a>05376       r = numbered_ref_check(root);
<a name="l05377"></a>05377 
<a name="l05378"></a>05378     <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">goto</span> <a class="code" href="../../d5/df2/win32_8c.html#a6ce68847c12434f60d1b2654a3dc3409">err</a>;
<a name="l05379"></a>05379   }
<a name="l05380"></a>05380 <span class="preprocessor">#endif</span>
<a name="l05381"></a>05381 <span class="preprocessor"></span>
<a name="l05382"></a>05382 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l05383"></a>05383 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a142c4ecdf5da898c594bc1a4e44c3d56">num_call</a> &gt; 0) {
<a name="l05384"></a>05384     r = unset_addr_list_init(&amp;uslist, scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a142c4ecdf5da898c594bc1a4e44c3d56">num_call</a>);
<a name="l05385"></a>05385     <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">goto</span> <a class="code" href="../../d5/df2/win32_8c.html#a6ce68847c12434f60d1b2654a3dc3409">err</a>;
<a name="l05386"></a>05386     scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a62165c123178de4db47aae2ba8e938ac">unset_addr_list</a> = &amp;uslist;
<a name="l05387"></a>05387     r = setup_subexp_call(root, &amp;scan_env);
<a name="l05388"></a>05388     <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">goto</span> err_unset;
<a name="l05389"></a>05389     r = subexp_recursive_check_trav(root, &amp;scan_env);
<a name="l05390"></a>05390     <span class="keywordflow">if</span> (r  &lt; 0) <span class="keywordflow">goto</span> err_unset;
<a name="l05391"></a>05391     r = subexp_inf_recursive_check_trav(root, &amp;scan_env);
<a name="l05392"></a>05392     <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">goto</span> err_unset;
<a name="l05393"></a>05393 
<a name="l05394"></a>05394     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a96aa44f3baa323e5103d65893872b61d">num_call</a> = scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a142c4ecdf5da898c594bc1a4e44c3d56">num_call</a>;
<a name="l05395"></a>05395   }
<a name="l05396"></a>05396   <span class="keywordflow">else</span>
<a name="l05397"></a>05397     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a96aa44f3baa323e5103d65893872b61d">num_call</a> = 0;
<a name="l05398"></a>05398 <span class="preprocessor">#endif</span>
<a name="l05399"></a>05399 <span class="preprocessor"></span>
<a name="l05400"></a>05400   r = <a class="code" href="../../d0/d86/regcomp_8c.html#a59640e9a6551bf5e14242534adc9ddbc">setup_tree</a>(root, reg, 0, &amp;scan_env);
<a name="l05401"></a>05401   <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">goto</span> err_unset;
<a name="l05402"></a>05402 
<a name="l05403"></a>05403 <span class="preprocessor">#ifdef ONIG_DEBUG_PARSE_TREE</span>
<a name="l05404"></a>05404 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (!onig_is_prelude()) print_tree(stderr, root);
<a name="l05405"></a>05405 <span class="preprocessor">#endif</span>
<a name="l05406"></a>05406 <span class="preprocessor"></span>
<a name="l05407"></a>05407   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a211db992acd70c43e1373076fa3d1b22">capture_history</a>  = scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#aa096c240d283344fe4dd0626ac52e9ba">capture_history</a>;
<a name="l05408"></a>05408   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a2a513978bf98ec87c87c0d597f8d5ba4">bt_mem_start</a>     = scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a5ae5ce2ec7e6fe61e234fa4fd05ee1e4">bt_mem_start</a>;
<a name="l05409"></a>05409   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a2a513978bf98ec87c87c0d597f8d5ba4">bt_mem_start</a>    |= reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a211db992acd70c43e1373076fa3d1b22">capture_history</a>;
<a name="l05410"></a>05410   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#ac3d96860a681baf7b5a7d0c4d22d6c6d">IS_FIND_CONDITION</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#ae696111fa040a69294344d08baf062b4">options</a>))
<a name="l05411"></a>05411     <a class="code" href="../../d6/d87/regint_8h.html#a2826e934a8a0054a9ae83b75dc6f09e2">BIT_STATUS_ON_ALL</a>(reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a7d19e58612f0ca3cad71119d5627d21a">bt_mem_end</a>);
<a name="l05412"></a>05412   <span class="keywordflow">else</span> {
<a name="l05413"></a>05413     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a7d19e58612f0ca3cad71119d5627d21a">bt_mem_end</a>  = scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a11a89b745f9dac826110ee1671ca0edd">bt_mem_end</a>;
<a name="l05414"></a>05414     reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a7d19e58612f0ca3cad71119d5627d21a">bt_mem_end</a> |= reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a211db992acd70c43e1373076fa3d1b22">capture_history</a>;
<a name="l05415"></a>05415   }
<a name="l05416"></a>05416 
<a name="l05417"></a>05417 <span class="preprocessor">#ifdef USE_COMBINATION_EXPLOSION_CHECK</span>
<a name="l05418"></a>05418 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a88f3a0da2aa91b57436970ef7aa062f6">backrefed_mem</a> == 0
<a name="l05419"></a>05419 #ifdef <a class="code" href="../../d6/d87/regint_8h.html#a21559a8f38dcce02013fb72b84b66480">USE_SUBEXP_CALL</a>
<a name="l05420"></a>05420       || scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a142c4ecdf5da898c594bc1a4e44c3d56">num_call</a> == 0
<a name="l05421"></a>05421 #endif
<a name="l05422"></a>05422       ) {
<a name="l05423"></a>05423     setup_comb_exp_check(root, 0, &amp;scan_env);
<a name="l05424"></a>05424 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l05425"></a>05425 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (scan_env.has_recursion != 0) {
<a name="l05426"></a>05426       scan_env.num_comb_exp_check = 0;
<a name="l05427"></a>05427     }
<a name="l05428"></a>05428     <span class="keywordflow">else</span>
<a name="l05429"></a>05429 <span class="preprocessor">#endif</span>
<a name="l05430"></a>05430 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (scan_env.comb_exp_max_regnum &gt; 0) {
<a name="l05431"></a>05431       <span class="keywordtype">int</span> i;
<a name="l05432"></a>05432       <span class="keywordflow">for</span> (i = 1; i &lt;= scan_env.comb_exp_max_regnum; i++) {
<a name="l05433"></a>05433         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#af199b44779566d1c0d04e5eedff8ce2b">BIT_STATUS_AT</a>(scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a88f3a0da2aa91b57436970ef7aa062f6">backrefed_mem</a>, i) != 0) {
<a name="l05434"></a>05434           scan_env.num_comb_exp_check = 0;
<a name="l05435"></a>05435           <span class="keywordflow">break</span>;
<a name="l05436"></a>05436         }
<a name="l05437"></a>05437       }
<a name="l05438"></a>05438     }
<a name="l05439"></a>05439   }
<a name="l05440"></a>05440 
<a name="l05441"></a>05441   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a627abcc41418b0bdee0827c88e26d12b">num_comb_exp_check</a> = scan_env.num_comb_exp_check;
<a name="l05442"></a>05442 <span class="preprocessor">#endif</span>
<a name="l05443"></a>05443 <span class="preprocessor"></span>
<a name="l05444"></a>05444   <a class="code" href="../../d0/d86/regcomp_8c.html#a4186d1d76942ef9684b4a0db1f83157e">clear_optimize_info</a>(reg);
<a name="l05445"></a>05445 <span class="preprocessor">#ifndef ONIG_DONT_OPTIMIZE</span>
<a name="l05446"></a>05446 <span class="preprocessor"></span>  r = <a class="code" href="../../d0/d86/regcomp_8c.html#a7dd6d18481ff29928fcb6a6faeddc48b">set_optimize_info_from_tree</a>(root, reg, &amp;scan_env);
<a name="l05447"></a>05447   <span class="keywordflow">if</span> (r != 0) <span class="keywordflow">goto</span> err_unset;
<a name="l05448"></a>05448 <span class="preprocessor">#endif</span>
<a name="l05449"></a>05449 <span class="preprocessor"></span>
<a name="l05450"></a>05450   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a30ed89b85be2facc439996abf09ebb46">mem_nodes_dynamic</a>)) {
<a name="l05451"></a>05451     <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a30ed89b85be2facc439996abf09ebb46">mem_nodes_dynamic</a>);
<a name="l05452"></a>05452     scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a30ed89b85be2facc439996abf09ebb46">mem_nodes_dynamic</a> = (<a class="code" href="../../d0/d6e/struct___node.html">Node</a>** )<a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l05453"></a>05453   }
<a name="l05454"></a>05454 
<a name="l05455"></a>05455   r = <a class="code" href="../../d0/d86/regcomp_8c.html#a1da8b87fd625a66c1d0e54073f5057ff">compile_tree</a>(root, reg);
<a name="l05456"></a>05456   <span class="keywordflow">if</span> (r == 0) {
<a name="l05457"></a>05457     r = <a class="code" href="../../d0/d86/regcomp_8c.html#ae846b05fc7da5763a07c025a1fcdc2d7">add_opcode</a>(reg, <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a010acee11f1e0ca0026e20c2f36bfdb7">OP_END</a>);
<a name="l05458"></a>05458 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l05459"></a>05459 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a142c4ecdf5da898c594bc1a4e44c3d56">num_call</a> &gt; 0) {
<a name="l05460"></a>05460       r = unset_addr_list_fix(&amp;uslist, reg);
<a name="l05461"></a>05461       unset_addr_list_end(&amp;uslist);
<a name="l05462"></a>05462       <span class="keywordflow">if</span> (r) <span class="keywordflow">goto</span> <a class="code" href="../../d5/df2/win32_8c.html#a6ce68847c12434f60d1b2654a3dc3409">err</a>;
<a name="l05463"></a>05463     }
<a name="l05464"></a>05464 <span class="preprocessor">#endif</span>
<a name="l05465"></a>05465 <span class="preprocessor"></span>
<a name="l05466"></a>05466     <span class="keywordflow">if</span> ((reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a007d05ab38dc2cfac189a4596b8c84b4">num_repeat</a> != 0) || (reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a7d19e58612f0ca3cad71119d5627d21a">bt_mem_end</a> != 0))
<a name="l05467"></a>05467       reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a871126c729a3ebbb7192a7873a32be29">stack_pop_level</a> = <a class="code" href="../../d6/d87/regint_8h.html#a35e8d96575eb3c858187ab1afa110e50">STACK_POP_LEVEL_ALL</a>;
<a name="l05468"></a>05468     <span class="keywordflow">else</span> {
<a name="l05469"></a>05469       <span class="keywordflow">if</span> (reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a2a513978bf98ec87c87c0d597f8d5ba4">bt_mem_start</a> != 0)
<a name="l05470"></a>05470         reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a871126c729a3ebbb7192a7873a32be29">stack_pop_level</a> = <a class="code" href="../../d6/d87/regint_8h.html#a68fd5b5a66382cc62f35ae23a35675fa">STACK_POP_LEVEL_MEM_START</a>;
<a name="l05471"></a>05471       <span class="keywordflow">else</span>
<a name="l05472"></a>05472         reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a871126c729a3ebbb7192a7873a32be29">stack_pop_level</a> = <a class="code" href="../../d6/d87/regint_8h.html#a77ae5fda0fc4c1a5a62e7842ec957507">STACK_POP_LEVEL_FREE</a>;
<a name="l05473"></a>05473     }
<a name="l05474"></a>05474   }
<a name="l05475"></a>05475 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l05476"></a>05476 <span class="preprocessor"></span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a142c4ecdf5da898c594bc1a4e44c3d56">num_call</a> &gt; 0) {
<a name="l05477"></a>05477     unset_addr_list_end(&amp;uslist);
<a name="l05478"></a>05478   }
<a name="l05479"></a>05479 <span class="preprocessor">#endif</span>
<a name="l05480"></a>05480 <span class="preprocessor"></span>  <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(root);
<a name="l05481"></a>05481 
<a name="l05482"></a>05482 <span class="preprocessor">#ifdef ONIG_DEBUG_COMPILE</span>
<a name="l05483"></a>05483 <span class="preprocessor"></span><span class="preprocessor">#ifdef USE_NAMED_GROUP</span>
<a name="l05484"></a>05484 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (!onig_is_prelude()) onig_print_names(stderr, reg);
<a name="l05485"></a>05485 <span class="preprocessor">#endif</span>
<a name="l05486"></a>05486 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (!onig_is_prelude()) print_compiled_byte_code_list(stderr, reg);
<a name="l05487"></a>05487 <span class="preprocessor">#endif</span>
<a name="l05488"></a>05488 <span class="preprocessor"></span>
<a name="l05489"></a>05489  end:
<a name="l05490"></a>05490   reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#aedebfd9ab0d56d063296f4cdc94a30f3">state</a> = <a class="code" href="../../d8/db3/oniguruma_8h.html#a9df9b0eb6acda14c9380f02f213d419c">ONIG_STATE_NORMAL</a>;
<a name="l05491"></a>05491   <span class="keywordflow">return</span> r;
<a name="l05492"></a>05492 
<a name="l05493"></a>05493  err_unset:
<a name="l05494"></a>05494 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l05495"></a>05495 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a142c4ecdf5da898c594bc1a4e44c3d56">num_call</a> &gt; 0) {
<a name="l05496"></a>05496     unset_addr_list_end(&amp;uslist);
<a name="l05497"></a>05497   }
<a name="l05498"></a>05498 <span class="preprocessor">#endif</span>
<a name="l05499"></a>05499 <span class="preprocessor"></span> <a class="code" href="../../d5/df2/win32_8c.html#a6ce68847c12434f60d1b2654a3dc3409">err</a>:
<a name="l05500"></a>05500   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a0b7bcb0b7b0237b6e29edf1a46a37c7f">error</a>)) {
<a name="l05501"></a>05501     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(einfo)) {
<a name="l05502"></a>05502       einfo-&gt;<a class="code" href="../../da/df3/struct_onig_error_info.html#a86015f170997aa3e176a0c5396c991d5">enc</a>     = scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a97f766db4ac9dabc9d173bf99fbcc11b">enc</a>;
<a name="l05503"></a>05503       einfo-&gt;<a class="code" href="../../da/df3/struct_onig_error_info.html#a42237b3a7db5e8c4622f476c2892e6be">par</a>     = scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a0b7bcb0b7b0237b6e29edf1a46a37c7f">error</a>;
<a name="l05504"></a>05504       einfo-&gt;<a class="code" href="../../da/df3/struct_onig_error_info.html#a853bef09d9bd18b1f150c2ba86c2acc7">par_end</a> = scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a690ca18c42c8090f932ffa64f38ad1a9">error_end</a>;
<a name="l05505"></a>05505     }
<a name="l05506"></a>05506   }
<a name="l05507"></a>05507 
<a name="l05508"></a>05508   <a class="code" href="../../d6/dda/regparse_8c.html#aa98ee34de192fd4997906389f70f4808">onig_node_free</a>(root);
<a name="l05509"></a>05509   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a30ed89b85be2facc439996abf09ebb46">mem_nodes_dynamic</a>))
<a name="l05510"></a>05510       <a class="code" href="../../d8/db0/defines_8h.html#a2c3897f7c46ca54a2e0dd7b24a40c7cb">xfree</a>(scan_env.<a class="code" href="../../d6/dbe/struct_scan_env.html#a30ed89b85be2facc439996abf09ebb46">mem_nodes_dynamic</a>);
<a name="l05511"></a>05511   <span class="keywordflow">return</span> r;
<a name="l05512"></a>05512 }
<a name="l05513"></a>05513 
<a name="l05514"></a>05514 <span class="preprocessor">#ifdef USE_RECOMPILE_API</span>
<a name="l05515"></a>05515 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keywordtype">int</span>
<a name="l05516"></a>05516 onig_recompile(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keyword">const</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* pattern, <span class="keyword">const</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* pattern_end,
<a name="l05517"></a>05517             <a class="code" href="../../d8/db3/oniguruma_8h.html#ad870c1a94502ad33c083978b17911e72">OnigOptionType</a> option, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc, <a class="code" href="../../d3/d3f/struct_onig_syntax_type.html">OnigSyntaxType</a>* syntax,
<a name="l05518"></a>05518             <a class="code" href="../../da/df3/struct_onig_error_info.html">OnigErrorInfo</a>* einfo)
<a name="l05519"></a>05519 {
<a name="l05520"></a>05520   <span class="keywordtype">int</span> r;
<a name="l05521"></a>05521   <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a> *new_reg;
<a name="l05522"></a>05522 
<a name="l05523"></a>05523   r = <a class="code" href="../../d0/d86/regcomp_8c.html#a39f71595a97243c15c779db842cdde3f">onig_new</a>(&amp;new_reg, pattern, pattern_end, option, enc, syntax, einfo);
<a name="l05524"></a>05524   <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l05525"></a>05525   <span class="keywordflow">if</span> (<a class="code" href="../../d8/db3/oniguruma_8h.html#a3ff8a493a950463788aea53dc6f95959">ONIG_STATE</a>(reg) == <a class="code" href="../../d8/db3/oniguruma_8h.html#a9df9b0eb6acda14c9380f02f213d419c">ONIG_STATE_NORMAL</a>) {
<a name="l05526"></a>05526     <a class="code" href="../../d0/d86/regcomp_8c.html#a9684a5e16b771c14e371ce4e2600a127">onig_transfer</a>(reg, new_reg);
<a name="l05527"></a>05527   }
<a name="l05528"></a>05528   <span class="keywordflow">else</span> {
<a name="l05529"></a>05529     <a class="code" href="../../d0/d86/regcomp_8c.html#ab0716f6853df79d80c34c3273ce1fd00">onig_chain_link_add</a>(reg, new_reg);
<a name="l05530"></a>05530   }
<a name="l05531"></a>05531   <span class="keywordflow">return</span> 0;
<a name="l05532"></a>05532 }
<a name="l05533"></a>05533 <span class="preprocessor">#endif</span>
<a name="l05534"></a>05534 <span class="preprocessor"></span>
<a name="l05535"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a9a45b6561144f2d36bb4136f9831ba77">05535</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d86/regcomp_8c.html#a9a45b6561144f2d36bb4136f9831ba77">onig_inited</a> = 0;
<a name="l05536"></a>05536 
<a name="l05537"></a>05537 <span class="keyword">extern</span> <span class="keywordtype">int</span>
<a name="l05538"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a2114107d9185a5c1706c5ecf99faf388">05538</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a2114107d9185a5c1706c5ecf99faf388">onig_reg_init</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <a class="code" href="../../d8/db3/oniguruma_8h.html#ad870c1a94502ad33c083978b17911e72">OnigOptionType</a> option,
<a name="l05539"></a>05539               <a class="code" href="../../d8/db3/oniguruma_8h.html#a33aa7ed7612104fa36da121c8ecb4d4e">OnigCaseFoldType</a> case_fold_flag,
<a name="l05540"></a>05540               <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc, <span class="keyword">const</span> <a class="code" href="../../d3/d3f/struct_onig_syntax_type.html">OnigSyntaxType</a>* syntax)
<a name="l05541"></a>05541 {
<a name="l05542"></a>05542   <span class="keywordflow">if</span> (! onig_inited)
<a name="l05543"></a>05543     <a class="code" href="../../d0/d86/regcomp_8c.html#aa5258b0fafb566fd4aa12fc1f577b2e8">onig_init</a>();
<a name="l05544"></a>05544 
<a name="l05545"></a>05545   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(reg))
<a name="l05546"></a>05546     <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a3daa9a1d4126a6eb5ed85fa401e9bc25">ONIGERR_INVALID_ARGUMENT</a>;
<a name="l05547"></a>05547 
<a name="l05548"></a>05548   <span class="keywordflow">if</span> (<a class="code" href="../../d8/db3/oniguruma_8h.html#a704ec03b7ca018f3409a7d2741320bb6">ONIGENC_IS_UNDEF</a>(enc))
<a name="l05549"></a>05549     <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a136c47d561bb8935411fed6e1af6a12d">ONIGERR_DEFAULT_ENCODING_IS_NOT_SETTED</a>;
<a name="l05550"></a>05550 
<a name="l05551"></a>05551   <span class="keywordflow">if</span> ((option &amp; (<a class="code" href="../../d8/db3/oniguruma_8h.html#a11bf0bcd0621c5ceb91d60d7c17103c7">ONIG_OPTION_DONT_CAPTURE_GROUP</a>|<a class="code" href="../../d8/db3/oniguruma_8h.html#a89a38e785fb1aa007945f4e5fabb6b3e">ONIG_OPTION_CAPTURE_GROUP</a>))
<a name="l05552"></a>05552       == (<a class="code" href="../../d8/db3/oniguruma_8h.html#a11bf0bcd0621c5ceb91d60d7c17103c7">ONIG_OPTION_DONT_CAPTURE_GROUP</a>|<a class="code" href="../../d8/db3/oniguruma_8h.html#a89a38e785fb1aa007945f4e5fabb6b3e">ONIG_OPTION_CAPTURE_GROUP</a>)) {
<a name="l05553"></a>05553     <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#aa92c8ec9db7baabc5d3135acae1fb4c3">ONIGERR_INVALID_COMBINATION_OF_OPTIONS</a>;
<a name="l05554"></a>05554   }
<a name="l05555"></a>05555 
<a name="l05556"></a>05556   (reg)-&gt;state = <a class="code" href="../../d8/db3/oniguruma_8h.html#ac4014e252e5febb907a642669eea72a8">ONIG_STATE_MODIFY</a>;
<a name="l05557"></a>05557 
<a name="l05558"></a>05558   <span class="keywordflow">if</span> ((option &amp; <a class="code" href="../../d8/db3/oniguruma_8h.html#a8643f304d15afdfd3c82c68c85be10b6">ONIG_OPTION_NEGATE_SINGLELINE</a>) != 0) {
<a name="l05559"></a>05559     option |= syntax-&gt;<a class="code" href="../../d3/d3f/struct_onig_syntax_type.html#a2dfe5e99d748e4af8dc32a5cc6ca07ac">options</a>;
<a name="l05560"></a>05560     option &amp;= ~<a class="code" href="../../d8/db3/oniguruma_8h.html#af2bf97acd558ad6e9dd18dfbfbeda7a4">ONIG_OPTION_SINGLELINE</a>;
<a name="l05561"></a>05561   }
<a name="l05562"></a>05562   <span class="keywordflow">else</span>
<a name="l05563"></a>05563     option |= syntax-&gt;<a class="code" href="../../d3/d3f/struct_onig_syntax_type.html#a2dfe5e99d748e4af8dc32a5cc6ca07ac">options</a>;
<a name="l05564"></a>05564 
<a name="l05565"></a>05565   (reg)-&gt;enc              = enc;
<a name="l05566"></a>05566   (reg)-&gt;<a class="code" href="../../d6/da0/nkf-utf8_2nkf_8c.html#ad2d8a938168dc85041b2bac532a7cf75">options</a>          = option;
<a name="l05567"></a>05567   (reg)-&gt;syntax           = syntax;
<a name="l05568"></a>05568   (reg)-&gt;optimize         = 0;
<a name="l05569"></a>05569   (reg)-&gt;exact            = (<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* )<a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l05570"></a>05570   (reg)-&gt;int_map          = (<span class="keywordtype">int</span>* )<a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l05571"></a>05571   (reg)-&gt;int_map_backward = (<span class="keywordtype">int</span>* )<a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l05572"></a>05572   (reg)-&gt;chain            = (<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* )<a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l05573"></a>05573 
<a name="l05574"></a>05574   (reg)-&gt;p                = (<a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* )<a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l05575"></a>05575   (reg)-&gt;<a class="code" href="../../d4/d71/st_8c.html#a385b96996caa48e6349681cf8036322f">alloc</a>            = 0;
<a name="l05576"></a>05576   (reg)-&gt;used             = 0;
<a name="l05577"></a>05577   (reg)-&gt;name_table       = (<span class="keywordtype">void</span>* )<a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l05578"></a>05578 
<a name="l05579"></a>05579   (reg)-&gt;case_fold_flag   = case_fold_flag;
<a name="l05580"></a>05580   <span class="keywordflow">return</span> 0;
<a name="l05581"></a>05581 }
<a name="l05582"></a>05582 
<a name="l05583"></a>05583 <span class="keyword">extern</span> <span class="keywordtype">int</span>
<a name="l05584"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a47cccc676be7e5a7883f1acd7123587c">05584</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a47cccc676be7e5a7883f1acd7123587c">onig_new_without_alloc</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg, <span class="keyword">const</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* pattern,
<a name="l05585"></a>05585           <span class="keyword">const</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* pattern_end, <a class="code" href="../../d8/db3/oniguruma_8h.html#ad870c1a94502ad33c083978b17911e72">OnigOptionType</a> option, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc,
<a name="l05586"></a>05586           <a class="code" href="../../d3/d3f/struct_onig_syntax_type.html">OnigSyntaxType</a>* syntax, <a class="code" href="../../da/df3/struct_onig_error_info.html">OnigErrorInfo</a>* einfo)
<a name="l05587"></a>05587 {
<a name="l05588"></a>05588   <span class="keywordtype">int</span> r;
<a name="l05589"></a>05589 
<a name="l05590"></a>05590   r = <a class="code" href="../../d0/d86/regcomp_8c.html#a2114107d9185a5c1706c5ecf99faf388">onig_reg_init</a>(reg, option, <a class="code" href="../../d8/db3/oniguruma_8h.html#a727110ab55c8dc0a94ce69fac5b8ff6d">ONIGENC_CASE_FOLD_DEFAULT</a>, enc, syntax);
<a name="l05591"></a>05591   <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l05592"></a>05592 
<a name="l05593"></a>05593   r = <a class="code" href="../../d0/d86/regcomp_8c.html#aa98aadf1b06fc184a285c2f8d9ac2950">onig_compile</a>(reg, pattern, pattern_end, einfo, <a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);
<a name="l05594"></a>05594   <span class="keywordflow">return</span> r;
<a name="l05595"></a>05595 }
<a name="l05596"></a>05596 
<a name="l05597"></a>05597 <span class="keyword">extern</span> <span class="keywordtype">int</span>
<a name="l05598"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a39f71595a97243c15c779db842cdde3f">05598</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a39f71595a97243c15c779db842cdde3f">onig_new</a>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>** reg, <span class="keyword">const</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* pattern, <span class="keyword">const</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* pattern_end,
<a name="l05599"></a>05599           <a class="code" href="../../d8/db3/oniguruma_8h.html#ad870c1a94502ad33c083978b17911e72">OnigOptionType</a> option, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc, <span class="keyword">const</span> <a class="code" href="../../d3/d3f/struct_onig_syntax_type.html">OnigSyntaxType</a>* syntax,
<a name="l05600"></a>05600           <a class="code" href="../../da/df3/struct_onig_error_info.html">OnigErrorInfo</a>* einfo)
<a name="l05601"></a>05601 {
<a name="l05602"></a>05602   <span class="keywordtype">int</span> r;
<a name="l05603"></a>05603 
<a name="l05604"></a>05604   *reg = (<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* )<a class="code" href="../../d8/db0/defines_8h.html#a6af5faec3f9662b20ffc9903f923dec0">xmalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>));
<a name="l05605"></a>05605   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(*reg)) <span class="keywordflow">return</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a843ef92c5edce533877d3d65ef94a142">ONIGERR_MEMORY</a>;
<a name="l05606"></a>05606 
<a name="l05607"></a>05607   r = <a class="code" href="../../d0/d86/regcomp_8c.html#a2114107d9185a5c1706c5ecf99faf388">onig_reg_init</a>(*reg, option, <a class="code" href="../../d8/db3/oniguruma_8h.html#a727110ab55c8dc0a94ce69fac5b8ff6d">ONIGENC_CASE_FOLD_DEFAULT</a>, enc, syntax);
<a name="l05608"></a>05608   <span class="keywordflow">if</span> (r) <span class="keywordflow">goto</span> <a class="code" href="../../d5/df2/win32_8c.html#a6ce68847c12434f60d1b2654a3dc3409">err</a>;
<a name="l05609"></a>05609 
<a name="l05610"></a>05610   r = <a class="code" href="../../d0/d86/regcomp_8c.html#aa98aadf1b06fc184a285c2f8d9ac2950">onig_compile</a>(*reg, pattern, pattern_end, einfo, <a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);
<a name="l05611"></a>05611   <span class="keywordflow">if</span> (r) {
<a name="l05612"></a>05612   <a class="code" href="../../d5/df2/win32_8c.html#a6ce68847c12434f60d1b2654a3dc3409">err</a>:
<a name="l05613"></a>05613     <a class="code" href="../../d0/d86/regcomp_8c.html#ac84095b31018b2fe291a31408179ae07">onig_free</a>(*reg);
<a name="l05614"></a>05614     *reg = <a class="code" href="../../d3/d09/ripper_8y.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l05615"></a>05615   }
<a name="l05616"></a>05616   <span class="keywordflow">return</span> r;
<a name="l05617"></a>05617 }
<a name="l05618"></a>05618 
<a name="l05619"></a>05619 
<a name="l05620"></a>05620 <span class="keyword">extern</span> <span class="keywordtype">int</span>
<a name="l05621"></a><a class="code" href="../../d0/d86/regcomp_8c.html#aa5258b0fafb566fd4aa12fc1f577b2e8">05621</a> <a class="code" href="../../d0/d86/regcomp_8c.html#aa5258b0fafb566fd4aa12fc1f577b2e8">onig_init</a>(<span class="keywordtype">void</span>)
<a name="l05622"></a>05622 {
<a name="l05623"></a>05623   <span class="keywordflow">if</span> (onig_inited != 0)
<a name="l05624"></a>05624     <span class="keywordflow">return</span> 0;
<a name="l05625"></a>05625 
<a name="l05626"></a>05626   <a class="code" href="../../d6/d87/regint_8h.html#a9f4a5a1028f52baa1a6245542393f081">THREAD_SYSTEM_INIT</a>;
<a name="l05627"></a>05627   <a class="code" href="../../d6/d87/regint_8h.html#a89044129ef788a94169add8be849e66b">THREAD_ATOMIC_START</a>;
<a name="l05628"></a>05628 
<a name="l05629"></a>05629   onig_inited = 1;
<a name="l05630"></a>05630 
<a name="l05631"></a>05631   <a class="code" href="../../d6/d8e/regenc_8c.html#ae2bed38c5037f1f1b713b70d7a16c8bd">onigenc_init</a>();
<a name="l05632"></a>05632   <span class="comment">/* onigenc_set_default_caseconv_table((UChar* )0); */</span>
<a name="l05633"></a>05633 
<a name="l05634"></a>05634 <span class="preprocessor">#ifdef ONIG_DEBUG_STATISTICS</span>
<a name="l05635"></a>05635 <span class="preprocessor"></span>  onig_statistics_init();
<a name="l05636"></a>05636 <span class="preprocessor">#endif</span>
<a name="l05637"></a>05637 <span class="preprocessor"></span>
<a name="l05638"></a>05638   <a class="code" href="../../d6/d87/regint_8h.html#a88a1ea7a04c3da104c4ef1ff6444b3ae">THREAD_ATOMIC_END</a>;
<a name="l05639"></a>05639   <span class="keywordflow">return</span> 0;
<a name="l05640"></a>05640 }
<a name="l05641"></a>05641 
<a name="l05642"></a>05642 
<a name="l05643"></a>05643 <span class="keyword">extern</span> <span class="keywordtype">int</span>
<a name="l05644"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a4adb6303843a92af6f905d719a8a9d38">05644</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a4adb6303843a92af6f905d719a8a9d38">onig_end</a>(<span class="keywordtype">void</span>)
<a name="l05645"></a>05645 {
<a name="l05646"></a>05646   <a class="code" href="../../d6/d87/regint_8h.html#a89044129ef788a94169add8be849e66b">THREAD_ATOMIC_START</a>;
<a name="l05647"></a>05647 
<a name="l05648"></a>05648 <span class="preprocessor">#ifdef ONIG_DEBUG_STATISTICS</span>
<a name="l05649"></a>05649 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (!onig_is_prelude()) onig_print_statistics(stderr);
<a name="l05650"></a>05650 <span class="preprocessor">#endif</span>
<a name="l05651"></a>05651 <span class="preprocessor"></span>
<a name="l05652"></a>05652 <span class="preprocessor">#ifdef USE_SHARED_CCLASS_TABLE</span>
<a name="l05653"></a>05653 <span class="preprocessor"></span>  <a class="code" href="../../d6/dda/regparse_8c.html#a6ae87922922adc49dfb3a0de952c5a95">onig_free_shared_cclass_table</a>();
<a name="l05654"></a>05654 <span class="preprocessor">#endif</span>
<a name="l05655"></a>05655 <span class="preprocessor"></span>
<a name="l05656"></a>05656 <span class="preprocessor">#ifdef USE_PARSE_TREE_NODE_RECYCLE</span>
<a name="l05657"></a>05657 <span class="preprocessor"></span>  <a class="code" href="../../d6/dda/regparse_8c.html#a45a1441ea27d1a056a374542fb962495">onig_free_node_list</a>();
<a name="l05658"></a>05658 <span class="preprocessor">#endif</span>
<a name="l05659"></a>05659 <span class="preprocessor"></span>
<a name="l05660"></a>05660   onig_inited = 0;
<a name="l05661"></a>05661 
<a name="l05662"></a>05662   <a class="code" href="../../d6/d87/regint_8h.html#a88a1ea7a04c3da104c4ef1ff6444b3ae">THREAD_ATOMIC_END</a>;
<a name="l05663"></a>05663   <a class="code" href="../../d6/d87/regint_8h.html#adcf4ba5cb211480c4a8535eda5bbc67b">THREAD_SYSTEM_END</a>;
<a name="l05664"></a>05664   <span class="keywordflow">return</span> 0;
<a name="l05665"></a>05665 }
<a name="l05666"></a>05666 
<a name="l05667"></a>05667 <span class="keyword">extern</span> <span class="keywordtype">int</span>
<a name="l05668"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a09d6fdbd4dbcc76c5cd57109596ccc4d">05668</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a09d6fdbd4dbcc76c5cd57109596ccc4d">onig_is_in_code_range</a>(<span class="keyword">const</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* p, <a class="code" href="../../d8/db3/oniguruma_8h.html#a7c8a84bc12127007886efbfcf53b6fb5">OnigCodePoint</a> code)
<a name="l05669"></a>05669 {
<a name="l05670"></a>05670   <a class="code" href="../../d8/db3/oniguruma_8h.html#a7c8a84bc12127007886efbfcf53b6fb5">OnigCodePoint</a> n, *data;
<a name="l05671"></a>05671   <a class="code" href="../../d8/db3/oniguruma_8h.html#a7c8a84bc12127007886efbfcf53b6fb5">OnigCodePoint</a> low, high, x;
<a name="l05672"></a>05672 
<a name="l05673"></a>05673   <a class="code" href="../../d6/d87/regint_8h.html#a90db6270cec0f45da03f16ce0590eecf">GET_CODE_POINT</a>(n, p);
<a name="l05674"></a>05674   data = (<a class="code" href="../../d8/db3/oniguruma_8h.html#a7c8a84bc12127007886efbfcf53b6fb5">OnigCodePoint</a>* )p;
<a name="l05675"></a>05675   data++;
<a name="l05676"></a>05676 
<a name="l05677"></a>05677   <span class="keywordflow">for</span> (low = 0, high = n; low &lt; high; ) {
<a name="l05678"></a>05678     x = (low + high) &gt;&gt; 1;
<a name="l05679"></a>05679     <span class="keywordflow">if</span> (code &gt; data[x * 2 + 1])
<a name="l05680"></a>05680       low = x + 1;
<a name="l05681"></a>05681     <span class="keywordflow">else</span>
<a name="l05682"></a>05682       high = x;
<a name="l05683"></a>05683   }
<a name="l05684"></a>05684 
<a name="l05685"></a>05685   <span class="keywordflow">return</span> ((low &lt; n &amp;&amp; code &gt;= data[low * 2]) ? 1 : 0);
<a name="l05686"></a>05686 }
<a name="l05687"></a>05687 
<a name="l05688"></a>05688 <span class="keyword">extern</span> <span class="keywordtype">int</span>
<a name="l05689"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a83c23dd82edc54d7e24f797b8245a3de">05689</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a83c23dd82edc54d7e24f797b8245a3de">onig_is_code_in_cc_len</a>(<span class="keywordtype">int</span> elen, <a class="code" href="../../d8/db3/oniguruma_8h.html#a7c8a84bc12127007886efbfcf53b6fb5">OnigCodePoint</a> code, <a class="code" href="../../d8/d79/struct_c_class_node.html">CClassNode</a>* cc)
<a name="l05690"></a>05690 {
<a name="l05691"></a>05691   <span class="keywordtype">int</span> found;
<a name="l05692"></a>05692 
<a name="l05693"></a>05693   <span class="keywordflow">if</span> (elen &gt; 1 || (code &gt;= SINGLE_BYTE_SIZE)) {
<a name="l05694"></a>05694     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(cc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a599db43b8eea536a4e4d08400fa445cb">mbuf</a>)) {
<a name="l05695"></a>05695       found = 0;
<a name="l05696"></a>05696     }
<a name="l05697"></a>05697     <span class="keywordflow">else</span> {
<a name="l05698"></a>05698       found = (<a class="code" href="../../d0/d86/regcomp_8c.html#a09d6fdbd4dbcc76c5cd57109596ccc4d">onig_is_in_code_range</a>(cc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a599db43b8eea536a4e4d08400fa445cb">mbuf</a>-&gt;<a class="code" href="../../d0/deb/struct___b_buf.html#a3d79f476af8e7a57dd240e68f11867a1">p</a>, code) != 0 ? 1 : 0);
<a name="l05699"></a>05699     }
<a name="l05700"></a>05700   }
<a name="l05701"></a>05701   <span class="keywordflow">else</span> {
<a name="l05702"></a>05702     found = (<a class="code" href="../../d6/d87/regint_8h.html#a43930f0cbfa176d3f727f1fc92027dac">BITSET_AT</a>(cc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a082458e56c928f78db90f08e242a9f3d">bs</a>, code) == 0 ? 0 : 1);
<a name="l05703"></a>05703   }
<a name="l05704"></a>05704 
<a name="l05705"></a>05705   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#aa719ec00173511740495f30fc0878c9e">IS_NCCLASS_NOT</a>(cc))
<a name="l05706"></a>05706     <span class="keywordflow">return</span> !found;
<a name="l05707"></a>05707   <span class="keywordflow">else</span>
<a name="l05708"></a>05708     <span class="keywordflow">return</span> found;
<a name="l05709"></a>05709 }
<a name="l05710"></a>05710 
<a name="l05711"></a>05711 <span class="keyword">extern</span> <span class="keywordtype">int</span>
<a name="l05712"></a><a class="code" href="../../d0/d86/regcomp_8c.html#a7cf5f4a5bd94180443ca81ffa1e449b5">05712</a> <a class="code" href="../../d0/d86/regcomp_8c.html#a7cf5f4a5bd94180443ca81ffa1e449b5">onig_is_code_in_cc</a>(<a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc, <a class="code" href="../../d8/db3/oniguruma_8h.html#a7c8a84bc12127007886efbfcf53b6fb5">OnigCodePoint</a> code, <a class="code" href="../../d8/d79/struct_c_class_node.html">CClassNode</a>* cc)
<a name="l05713"></a>05713 {
<a name="l05714"></a>05714   <span class="keywordtype">int</span> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l05715"></a>05715 
<a name="l05716"></a>05716   <span class="keywordflow">if</span> (<a class="code" href="../../d8/db3/oniguruma_8h.html#a9d0d6012e6b7de2cf851d274bb9b9c9c">ONIGENC_MBC_MINLEN</a>(enc) &gt; 1) {
<a name="l05717"></a>05717     len = 2;
<a name="l05718"></a>05718   }
<a name="l05719"></a>05719   <span class="keywordflow">else</span> {
<a name="l05720"></a>05720     len = <a class="code" href="../../d8/db3/oniguruma_8h.html#ae9dd2f20953b82ba4589e04fabcadba7">ONIGENC_CODE_TO_MBCLEN</a>(enc, code);
<a name="l05721"></a>05721   }
<a name="l05722"></a>05722   <span class="keywordflow">return</span> <a class="code" href="../../d0/d86/regcomp_8c.html#a83c23dd82edc54d7e24f797b8245a3de">onig_is_code_in_cc_len</a>(len, code, cc);
<a name="l05723"></a>05723 }
<a name="l05724"></a>05724 
<a name="l05725"></a>05725 
<a name="l05726"></a>05726 <span class="preprocessor">#ifdef ONIG_DEBUG</span>
<a name="l05727"></a>05727 <span class="preprocessor"></span>
<a name="l05728"></a>05728 <span class="comment">/* arguments type */</span>
<a name="l05729"></a>05729 <span class="preprocessor">#define ARG_SPECIAL     -1</span>
<a name="l05730"></a>05730 <span class="preprocessor"></span><span class="preprocessor">#define ARG_NON          0</span>
<a name="l05731"></a>05731 <span class="preprocessor"></span><span class="preprocessor">#define ARG_RELADDR      1</span>
<a name="l05732"></a>05732 <span class="preprocessor"></span><span class="preprocessor">#define ARG_ABSADDR      2</span>
<a name="l05733"></a>05733 <span class="preprocessor"></span><span class="preprocessor">#define ARG_LENGTH       3</span>
<a name="l05734"></a>05734 <span class="preprocessor"></span><span class="preprocessor">#define ARG_MEMNUM       4</span>
<a name="l05735"></a>05735 <span class="preprocessor"></span><span class="preprocessor">#define ARG_OPTION       5</span>
<a name="l05736"></a>05736 <span class="preprocessor"></span><span class="preprocessor">#define ARG_STATE_CHECK  6</span>
<a name="l05737"></a>05737 <span class="preprocessor"></span>
<a name="l05738"></a>05738 OnigOpInfoType OnigOpInfo[] = {
<a name="l05739"></a>05739   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a86764fa0fcd50e4d4d56ca7388b957d7">OP_FINISH</a>,            <span class="stringliteral">&quot;finish&quot;</span>,          ARG_NON },
<a name="l05740"></a>05740   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a010acee11f1e0ca0026e20c2f36bfdb7">OP_END</a>,               <span class="stringliteral">&quot;end&quot;</span>,             ARG_NON },
<a name="l05741"></a>05741   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a802685c8960564369443ab09fa0ed994">OP_EXACT1</a>,            <span class="stringliteral">&quot;exact1&quot;</span>,          ARG_SPECIAL },
<a name="l05742"></a>05742   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a612d1fabc2c5cbd58fb1e0bbe51ff0ad">OP_EXACT2</a>,            <span class="stringliteral">&quot;exact2&quot;</span>,          ARG_SPECIAL },
<a name="l05743"></a>05743   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ab9f9811100c299335394d2d6cc392ae3">OP_EXACT3</a>,            <span class="stringliteral">&quot;exact3&quot;</span>,          ARG_SPECIAL },
<a name="l05744"></a>05744   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a6030307a6de89986500bdffabe2f3161">OP_EXACT4</a>,            <span class="stringliteral">&quot;exact4&quot;</span>,          ARG_SPECIAL },
<a name="l05745"></a>05745   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a60487277aab383bdfa623eb1747d7c1d">OP_EXACT5</a>,            <span class="stringliteral">&quot;exact5&quot;</span>,          ARG_SPECIAL },
<a name="l05746"></a>05746   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a6543fb856be4fe416ec56b3b8b07dcc8">OP_EXACTN</a>,            <span class="stringliteral">&quot;exactn&quot;</span>,          ARG_SPECIAL },
<a name="l05747"></a>05747   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aba9f67a2b24665f739b19df7c9a50107">OP_EXACTMB2N1</a>,        <span class="stringliteral">&quot;exactmb2-n1&quot;</span>,     ARG_SPECIAL },
<a name="l05748"></a>05748   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ac25b152495efa0a51038928a05e2b459">OP_EXACTMB2N2</a>,        <span class="stringliteral">&quot;exactmb2-n2&quot;</span>,     ARG_SPECIAL },
<a name="l05749"></a>05749   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aeeac4db9268157fe5cebbdd6f81b0f1d">OP_EXACTMB2N3</a>,        <span class="stringliteral">&quot;exactmb2-n3&quot;</span>,     ARG_SPECIAL },
<a name="l05750"></a>05750   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a45c3ff711c94546da76e9413d7cb0f31">OP_EXACTMB2N</a>,         <span class="stringliteral">&quot;exactmb2-n&quot;</span>,      ARG_SPECIAL },
<a name="l05751"></a>05751   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a00de7e9b227f6e16bacbbca42d8441a2">OP_EXACTMB3N</a>,         <span class="stringliteral">&quot;exactmb3n&quot;</span>  ,     ARG_SPECIAL },
<a name="l05752"></a>05752   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a412ae4e1f2a0f31c2e59cad6d94f4906">OP_EXACTMBN</a>,          <span class="stringliteral">&quot;exactmbn&quot;</span>,        ARG_SPECIAL },
<a name="l05753"></a>05753   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ac1bb2eb7cff7020cfe303801e9ca45e1">OP_EXACT1_IC</a>,         <span class="stringliteral">&quot;exact1-ic&quot;</span>,       ARG_SPECIAL },
<a name="l05754"></a>05754   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af99b2fc071b095c9c5813abdbc4ee7e6">OP_EXACTN_IC</a>,         <span class="stringliteral">&quot;exactn-ic&quot;</span>,       ARG_SPECIAL },
<a name="l05755"></a>05755   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a843e6fcc2c81d592d84267ec452b0c32">OP_CCLASS</a>,            <span class="stringliteral">&quot;cclass&quot;</span>,          ARG_SPECIAL },
<a name="l05756"></a>05756   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aa55987e4798bb3b4a9a84fc791a092a1">OP_CCLASS_MB</a>,         <span class="stringliteral">&quot;cclass-mb&quot;</span>,       ARG_SPECIAL },
<a name="l05757"></a>05757   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af700cb11f22421db229d4eb59eb6ccf7">OP_CCLASS_MIX</a>,        <span class="stringliteral">&quot;cclass-mix&quot;</span>,      ARG_SPECIAL },
<a name="l05758"></a>05758   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af3302d2798a28920fca92621f0ad0a33">OP_CCLASS_NOT</a>,        <span class="stringliteral">&quot;cclass-not&quot;</span>,      ARG_SPECIAL },
<a name="l05759"></a>05759   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7abceea1b39968ed193131ef266a0f7313">OP_CCLASS_MB_NOT</a>,     <span class="stringliteral">&quot;cclass-mb-not&quot;</span>,   ARG_SPECIAL },
<a name="l05760"></a>05760   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aa16a4fa0dab93e1b9feb3aa775722757">OP_CCLASS_MIX_NOT</a>,    <span class="stringliteral">&quot;cclass-mix-not&quot;</span>,  ARG_SPECIAL },
<a name="l05761"></a>05761   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8cdeebcd10a14c5eaf2276127b9f8063">OP_CCLASS_NODE</a>,       <span class="stringliteral">&quot;cclass-node&quot;</span>,     ARG_SPECIAL },
<a name="l05762"></a>05762   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a5b08468e605792b6b89d7be760b6d8ed">OP_ANYCHAR</a>,           <span class="stringliteral">&quot;anychar&quot;</span>,         ARG_NON },
<a name="l05763"></a>05763   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a2443080bedde163464aa357ca6477615">OP_ANYCHAR_ML</a>,        <span class="stringliteral">&quot;anychar-ml&quot;</span>,      ARG_NON },
<a name="l05764"></a>05764   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a6d5f8220471f142a4b341f2ef4b8919c">OP_ANYCHAR_STAR</a>,      <span class="stringliteral">&quot;anychar*&quot;</span>,        ARG_NON },
<a name="l05765"></a>05765   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a62797c81bffe2c3d9c4919d67de05bb9">OP_ANYCHAR_ML_STAR</a>,   <span class="stringliteral">&quot;anychar-ml*&quot;</span>,     ARG_NON },
<a name="l05766"></a>05766   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a38ecf0bc81634703d7efb9cd25696bed">OP_ANYCHAR_STAR_PEEK_NEXT</a>, <span class="stringliteral">&quot;anychar*-peek-next&quot;</span>, ARG_SPECIAL },
<a name="l05767"></a>05767   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7acc0675ef0928d65dd4c91b226c494d4a">OP_ANYCHAR_ML_STAR_PEEK_NEXT</a>, <span class="stringliteral">&quot;anychar-ml*-peek-next&quot;</span>, ARG_SPECIAL },
<a name="l05768"></a>05768   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8506a6037e9060782cc55cec94419a09">OP_WORD</a>,                <span class="stringliteral">&quot;word&quot;</span>,            ARG_NON },
<a name="l05769"></a>05769   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aad741b267054ede86f875bee9a2fac55">OP_NOT_WORD</a>,            <span class="stringliteral">&quot;not-word&quot;</span>,        ARG_NON },
<a name="l05770"></a>05770   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a54cec6cd7483b7562f8897301d5bf2d1">OP_WORD_BOUND</a>,          <span class="stringliteral">&quot;word-bound&quot;</span>,      ARG_NON },
<a name="l05771"></a>05771   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7adb558375d652ef360d63b17c2b0c352a">OP_NOT_WORD_BOUND</a>,      <span class="stringliteral">&quot;not-word-bound&quot;</span>,  ARG_NON },
<a name="l05772"></a>05772   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a2fec22cbf9b011b09c6f3348e6cc57aa">OP_WORD_BEGIN</a>,          <span class="stringliteral">&quot;word-begin&quot;</span>,      ARG_NON },
<a name="l05773"></a>05773   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a2f171697d7a44612cf41e4e92ade53af">OP_WORD_END</a>,            <span class="stringliteral">&quot;word-end&quot;</span>,        ARG_NON },
<a name="l05774"></a>05774   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ac25b75d19f6d5cd630a33af760282c9f">OP_BEGIN_BUF</a>,           <span class="stringliteral">&quot;begin-buf&quot;</span>,       ARG_NON },
<a name="l05775"></a>05775   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a7f3e45fe326369661137f1c6917452e5">OP_END_BUF</a>,             <span class="stringliteral">&quot;end-buf&quot;</span>,         ARG_NON },
<a name="l05776"></a>05776   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a5027423d234f4c5c0c274f73e1e3fadf">OP_BEGIN_LINE</a>,          <span class="stringliteral">&quot;begin-line&quot;</span>,      ARG_NON },
<a name="l05777"></a>05777   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a713c68f995a911ebed7e76959dd399cb">OP_END_LINE</a>,            <span class="stringliteral">&quot;end-line&quot;</span>,        ARG_NON },
<a name="l05778"></a>05778   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aa6767417108895a812655ac876c8e864">OP_SEMI_END_BUF</a>,        <span class="stringliteral">&quot;semi-end-buf&quot;</span>,    ARG_NON },
<a name="l05779"></a>05779   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a73e05280eb706c29a5ffbe231409e493">OP_BEGIN_POSITION</a>,      <span class="stringliteral">&quot;begin-position&quot;</span>,  ARG_NON },
<a name="l05780"></a>05780   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8b63034533b3aeca8955843b184c4a54">OP_BACKREF1</a>,            <span class="stringliteral">&quot;backref1&quot;</span>,             ARG_NON },
<a name="l05781"></a>05781   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ae06b335a0847c8a56fcd748996faae69">OP_BACKREF2</a>,            <span class="stringliteral">&quot;backref2&quot;</span>,             ARG_NON },
<a name="l05782"></a>05782   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a39bc017579125d7a8a55c6f15ab8407f">OP_BACKREFN</a>,            <span class="stringliteral">&quot;backrefn&quot;</span>,             ARG_MEMNUM  },
<a name="l05783"></a>05783   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a92cac10d5dd6563484d83d78ffd7a9fe">OP_BACKREFN_IC</a>,         <span class="stringliteral">&quot;backrefn-ic&quot;</span>,          ARG_SPECIAL },
<a name="l05784"></a>05784   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af1ec37c9660cb03e31c26c7f54e18481">OP_BACKREF_MULTI</a>,       <span class="stringliteral">&quot;backref_multi&quot;</span>,        ARG_SPECIAL },
<a name="l05785"></a>05785   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ab618b20a94bacf16ee983d035b87bdf4">OP_BACKREF_MULTI_IC</a>,    <span class="stringliteral">&quot;backref_multi-ic&quot;</span>,     ARG_SPECIAL },
<a name="l05786"></a>05786   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af5a6fae90bfd486b620f19fe1afd5cd2">OP_BACKREF_WITH_LEVEL</a>,    <span class="stringliteral">&quot;backref_at_level&quot;</span>,     ARG_SPECIAL },
<a name="l05787"></a>05787   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ad44ea2499dde46a2fcae29c05eff5865">OP_MEMORY_START_PUSH</a>,   <span class="stringliteral">&quot;mem-start-push&quot;</span>,       ARG_MEMNUM  },
<a name="l05788"></a>05788   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a478f412b2ab4f5af5a8fd5b5bcbd8099">OP_MEMORY_START</a>,        <span class="stringliteral">&quot;mem-start&quot;</span>,            ARG_MEMNUM  },
<a name="l05789"></a>05789   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a9506e738bc1e09a6683b903e3b74e042">OP_MEMORY_END_PUSH</a>,     <span class="stringliteral">&quot;mem-end-push&quot;</span>,         ARG_MEMNUM  },
<a name="l05790"></a>05790   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a7389f0c8828e3af17d7f37ce1091e428">OP_MEMORY_END_PUSH_REC</a>, <span class="stringliteral">&quot;mem-end-push-rec&quot;</span>,     ARG_MEMNUM  },
<a name="l05791"></a>05791   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a614869c999fdc8cbbb3795e881bd82b4">OP_MEMORY_END</a>,          <span class="stringliteral">&quot;mem-end&quot;</span>,              ARG_MEMNUM  },
<a name="l05792"></a>05792   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a1bd6d9ded3fe265889fbde6fafdc4029">OP_MEMORY_END_REC</a>,      <span class="stringliteral">&quot;mem-end-rec&quot;</span>,          ARG_MEMNUM  },
<a name="l05793"></a>05793   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a5d513f1b6600c48c5a04c81a74a25fe6">OP_SET_OPTION_PUSH</a>,     <span class="stringliteral">&quot;set-option-push&quot;</span>,      ARG_OPTION  },
<a name="l05794"></a>05794   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a48fb4a33f7cdc4c6d194377fea0e9ff0">OP_SET_OPTION</a>,          <span class="stringliteral">&quot;set-option&quot;</span>,           ARG_OPTION  },
<a name="l05795"></a>05795   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7adad4289276b97b650558ce66d141d648">OP_FAIL</a>,                <span class="stringliteral">&quot;fail&quot;</span>,                 ARG_NON },
<a name="l05796"></a>05796   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a702651101fc28a886970546cf992ce3b">OP_JUMP</a>,                <span class="stringliteral">&quot;jump&quot;</span>,                 ARG_RELADDR },
<a name="l05797"></a>05797   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8dac71c3d6bbd96671b3a21efcc5b49f">OP_PUSH</a>,                <span class="stringliteral">&quot;push&quot;</span>,                 ARG_RELADDR },
<a name="l05798"></a>05798   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7afb3c2d934da3bfb01e4fd56338324e21">OP_POP</a>,                 <span class="stringliteral">&quot;pop&quot;</span>,                  ARG_NON },
<a name="l05799"></a>05799   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a6c17e281c04ad4d3282805c194e8ff99">OP_PUSH_OR_JUMP_EXACT1</a>, <span class="stringliteral">&quot;push-or-jump-e1&quot;</span>,      ARG_SPECIAL },
<a name="l05800"></a>05800   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aa8bc2955f8564742ed69b36ef9474dd4">OP_PUSH_IF_PEEK_NEXT</a>,   <span class="stringliteral">&quot;push-if-peek-next&quot;</span>,    ARG_SPECIAL },
<a name="l05801"></a>05801   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a6066e50e385eb0ebb5edf501c66a77ce">OP_REPEAT</a>,              <span class="stringliteral">&quot;repeat&quot;</span>,               ARG_SPECIAL },
<a name="l05802"></a>05802   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ab1500068559c4c4ad727756c7447e30f">OP_REPEAT_NG</a>,           <span class="stringliteral">&quot;repeat-ng&quot;</span>,            ARG_SPECIAL },
<a name="l05803"></a>05803   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a21c8b4297ab29937dec4bc0833c3ac6b">OP_REPEAT_INC</a>,          <span class="stringliteral">&quot;repeat-inc&quot;</span>,           ARG_MEMNUM  },
<a name="l05804"></a>05804   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a19ad72a6cf7049c69736ac9b7ff8ec7e">OP_REPEAT_INC_NG</a>,       <span class="stringliteral">&quot;repeat-inc-ng&quot;</span>,        ARG_MEMNUM  },
<a name="l05805"></a>05805   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ab896f48834f7a980822f09a432e0447e">OP_REPEAT_INC_SG</a>,       <span class="stringliteral">&quot;repeat-inc-sg&quot;</span>,        ARG_MEMNUM  },
<a name="l05806"></a>05806   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7adc2416f57694795b0ec4e6ec6ada8970">OP_REPEAT_INC_NG_SG</a>,    <span class="stringliteral">&quot;repeat-inc-ng-sg&quot;</span>,     ARG_MEMNUM  },
<a name="l05807"></a>05807   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a4b54f33edb33e9ad4056409ad7976858">OP_NULL_CHECK_START</a>,    <span class="stringliteral">&quot;null-check-start&quot;</span>,     ARG_MEMNUM  },
<a name="l05808"></a>05808   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af0aec5c428361aa193258519f51ca784">OP_NULL_CHECK_END</a>,      <span class="stringliteral">&quot;null-check-end&quot;</span>,       ARG_MEMNUM  },
<a name="l05809"></a>05809   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af5666f4ae82f3138be3170451f0a4d02">OP_NULL_CHECK_END_MEMST</a>,<span class="stringliteral">&quot;null-check-end-memst&quot;</span>, ARG_MEMNUM  },
<a name="l05810"></a>05810   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a7bc64a642c299c19d8fc50ba5ad5ed10">OP_NULL_CHECK_END_MEMST_PUSH</a>,<span class="stringliteral">&quot;null-check-end-memst-push&quot;</span>, ARG_MEMNUM  },
<a name="l05811"></a>05811   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a7610e76242dce7c27e1ae5f896018f8a">OP_PUSH_POS</a>,             <span class="stringliteral">&quot;push-pos&quot;</span>,             ARG_NON },
<a name="l05812"></a>05812   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a2a4012299c05e09918aa9c94825d17c5">OP_POP_POS</a>,              <span class="stringliteral">&quot;pop-pos&quot;</span>,              ARG_NON },
<a name="l05813"></a>05813   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a0d4a8a75d3fb3cfa8a2989e475b0aa4b">OP_PUSH_POS_NOT</a>,         <span class="stringliteral">&quot;push-pos-not&quot;</span>,         ARG_RELADDR },
<a name="l05814"></a>05814   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7abd08dd3919e43ea497e79f43deb03d3e">OP_FAIL_POS</a>,             <span class="stringliteral">&quot;fail-pos&quot;</span>,             ARG_NON },
<a name="l05815"></a>05815   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a3d0f03207719e90631a99584f156fd69">OP_PUSH_STOP_BT</a>,         <span class="stringliteral">&quot;push-stop-bt&quot;</span>,         ARG_NON },
<a name="l05816"></a>05816   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a3425a34f545c48e5063f609951f6a5d2">OP_POP_STOP_BT</a>,          <span class="stringliteral">&quot;pop-stop-bt&quot;</span>,          ARG_NON },
<a name="l05817"></a>05817   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a077f66491531fb39f88e9061b5c21f50">OP_LOOK_BEHIND</a>,          <span class="stringliteral">&quot;look-behind&quot;</span>,          ARG_SPECIAL },
<a name="l05818"></a>05818   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a3a1e1f361ad65db2b5f4b953c86d1dcd">OP_PUSH_LOOK_BEHIND_NOT</a>, <span class="stringliteral">&quot;push-look-behind-not&quot;</span>, ARG_SPECIAL },
<a name="l05819"></a>05819   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7adfd6110eed51c3cd1dd5b5aba4e74017">OP_FAIL_LOOK_BEHIND_NOT</a>, <span class="stringliteral">&quot;fail-look-behind-not&quot;</span>, ARG_NON },
<a name="l05820"></a>05820   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a098bbeea13096667b102f7fd90cbe38f">OP_CALL</a>,                 <span class="stringliteral">&quot;call&quot;</span>,                 ARG_ABSADDR },
<a name="l05821"></a>05821   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ad436c18b194473f5ec64c28b774e41b3">OP_RETURN</a>,               <span class="stringliteral">&quot;return&quot;</span>,               ARG_NON },
<a name="l05822"></a>05822   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a9b76e8922477cbbb9e53f8ce3c255536">OP_STATE_CHECK_PUSH</a>,         <span class="stringliteral">&quot;state-check-push&quot;</span>,         ARG_SPECIAL },
<a name="l05823"></a>05823   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a0b5db3c7450ac9950ff859e8f58bb24c">OP_STATE_CHECK_PUSH_OR_JUMP</a>, <span class="stringliteral">&quot;state-check-push-or-jump&quot;</span>, ARG_SPECIAL },
<a name="l05824"></a>05824   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a1b9a9a69ed5dd1a468b8cb4343ba2d42">OP_STATE_CHECK</a>,              <span class="stringliteral">&quot;state-check&quot;</span>,              ARG_STATE_CHECK },
<a name="l05825"></a>05825   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a146ae0f0e9a7a21afb4edb4f6971a66a">OP_STATE_CHECK_ANYCHAR_STAR</a>, <span class="stringliteral">&quot;state-check-anychar*&quot;</span>,     ARG_STATE_CHECK },
<a name="l05826"></a>05826   { <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aa70df437aa2f9fcdf377768a26199386">OP_STATE_CHECK_ANYCHAR_ML_STAR</a>,
<a name="l05827"></a>05827     <span class="stringliteral">&quot;state-check-anychar-ml*&quot;</span>, ARG_STATE_CHECK },
<a name="l05828"></a>05828   { -1, <span class="stringliteral">&quot;&quot;</span>, ARG_NON }
<a name="l05829"></a>05829 };
<a name="l05830"></a>05830 
<a name="l05831"></a>05831 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>*
<a name="l05832"></a>05832 op2name(<span class="keywordtype">int</span> opcode)
<a name="l05833"></a>05833 {
<a name="l05834"></a>05834   <span class="keywordtype">int</span> i;
<a name="l05835"></a>05835 
<a name="l05836"></a>05836   <span class="keywordflow">for</span> (i = 0; OnigOpInfo[i].opcode &gt;= 0; i++) {
<a name="l05837"></a>05837     <span class="keywordflow">if</span> (opcode == OnigOpInfo[i].opcode)
<a name="l05838"></a>05838       <span class="keywordflow">return</span> OnigOpInfo[i].name;
<a name="l05839"></a>05839   }
<a name="l05840"></a>05840   <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l05841"></a>05841 }
<a name="l05842"></a>05842 
<a name="l05843"></a>05843 <span class="keyword">static</span> <span class="keywordtype">int</span>
<a name="l05844"></a>05844 op2arg_type(<span class="keywordtype">int</span> opcode)
<a name="l05845"></a>05845 {
<a name="l05846"></a>05846   <span class="keywordtype">int</span> i;
<a name="l05847"></a>05847 
<a name="l05848"></a>05848   <span class="keywordflow">for</span> (i = 0; OnigOpInfo[i].opcode &gt;= 0; i++) {
<a name="l05849"></a>05849     <span class="keywordflow">if</span> (opcode == OnigOpInfo[i].opcode)
<a name="l05850"></a>05850       <span class="keywordflow">return</span> OnigOpInfo[i].arg_type;
<a name="l05851"></a>05851   }
<a name="l05852"></a>05852   <span class="keywordflow">return</span> ARG_SPECIAL;
<a name="l05853"></a>05853 }
<a name="l05854"></a>05854 
<a name="l05855"></a>05855 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l05856"></a>05856 Indent(<a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a>* f, <span class="keywordtype">int</span> indent)
<a name="l05857"></a>05857 {
<a name="l05858"></a>05858   <span class="keywordtype">int</span> i;
<a name="l05859"></a>05859   <span class="keywordflow">for</span> (i = 0; i &lt; indent; i++) <a class="code" href="../../dc/db1/win32_8h.html#ae8d3d3b59f9fb234203fc5d1210716eb">putc</a>(<span class="charliteral">&apos; &apos;</span>, f);
<a name="l05860"></a>05860 }
<a name="l05861"></a>05861 
<a name="l05862"></a>05862 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l05863"></a>05863 p_string(<a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a>* f, <span class="keywordtype">int</span> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>, <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* s)
<a name="l05864"></a>05864 {
<a name="l05865"></a>05865   fputs(<span class="stringliteral">&quot;:&quot;</span>, f);
<a name="l05866"></a>05866   <span class="keywordflow">while</span> (len-- &gt; 0) { fputc(*s++, f); }
<a name="l05867"></a>05867 }
<a name="l05868"></a>05868 
<a name="l05869"></a>05869 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l05870"></a>05870 p_len_string(<a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a>* f, <a class="code" href="../../d6/d87/regint_8h.html#a2d7f6198122e9252799bc8ba7dc60727">LengthType</a> len, <span class="keywordtype">int</span> mb_len, <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* s)
<a name="l05871"></a>05871 {
<a name="l05872"></a>05872   <span class="keywordtype">int</span> x = len * mb_len;
<a name="l05873"></a>05873 
<a name="l05874"></a>05874   fprintf(f, <span class="stringliteral">&quot;:%d:&quot;</span>, len);
<a name="l05875"></a>05875   <span class="keywordflow">while</span> (x-- &gt; 0) { fputc(*s++, f); }
<a name="l05876"></a>05876 }
<a name="l05877"></a>05877 
<a name="l05878"></a>05878 <span class="keyword">extern</span> <span class="keywordtype">void</span>
<a name="l05879"></a>05879 <a class="code" href="../../db/d4b/regexec_8c.html#a2a2ff69b2fa49e61825f222ae549b73a">onig_print_compiled_byte_code</a>(<a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a>* f, <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* <a class="code" href="../../db/d16/debug_8h.html#a1baecad7f27ccf1689612054ecf6a397">bp</a>, <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* bpend, <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>** nextp,
<a name="l05880"></a>05880                               <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">OnigEncoding</a> enc)
<a name="l05881"></a>05881 {
<a name="l05882"></a>05882   <span class="keywordtype">int</span> i, n, arg_type;
<a name="l05883"></a>05883   <a class="code" href="../../d6/d87/regint_8h.html#a9d058c40ebc713355574e3d4579bbd2a">RelAddrType</a> addr;
<a name="l05884"></a>05884   <a class="code" href="../../d6/d87/regint_8h.html#a2d7f6198122e9252799bc8ba7dc60727">LengthType</a> len;
<a name="l05885"></a>05885   <a class="code" href="../../d6/d87/regint_8h.html#a2f2763a4c4b7652ac3ad18c8c160e9f6">MemNumType</a> mem;
<a name="l05886"></a>05886   <a class="code" href="../../d6/d87/regint_8h.html#aa877bee333a03d69077236a4bb72710c">StateCheckNumType</a> scn;
<a name="l05887"></a>05887   <a class="code" href="../../d8/db3/oniguruma_8h.html#a7c8a84bc12127007886efbfcf53b6fb5">OnigCodePoint</a> code;
<a name="l05888"></a>05888   <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a> *q;
<a name="l05889"></a>05889 
<a name="l05890"></a>05890   fprintf(f, <span class="stringliteral">&quot;[%s&quot;</span>, op2name(*bp));
<a name="l05891"></a>05891   arg_type = op2arg_type(*bp);
<a name="l05892"></a>05892   <span class="keywordflow">if</span> (arg_type != ARG_SPECIAL) {
<a name="l05893"></a>05893     bp++;
<a name="l05894"></a>05894     <span class="keywordflow">switch</span> (arg_type) {
<a name="l05895"></a>05895     <span class="keywordflow">case</span> ARG_NON:
<a name="l05896"></a>05896       <span class="keywordflow">break</span>;
<a name="l05897"></a>05897     <span class="keywordflow">case</span> ARG_RELADDR:
<a name="l05898"></a>05898       <a class="code" href="../../d6/d87/regint_8h.html#af809d3378e4a9001b798b7e638e718e6">GET_RELADDR_INC</a>(addr, bp);
<a name="l05899"></a>05899       fprintf(f, <span class="stringliteral">&quot;:(%d)&quot;</span>, addr);
<a name="l05900"></a>05900       <span class="keywordflow">break</span>;
<a name="l05901"></a>05901     <span class="keywordflow">case</span> ARG_ABSADDR:
<a name="l05902"></a>05902       <a class="code" href="../../d6/d87/regint_8h.html#adb0b826cd00fdbce95866feac6157e6e">GET_ABSADDR_INC</a>(addr, bp);
<a name="l05903"></a>05903       fprintf(f, <span class="stringliteral">&quot;:(%d)&quot;</span>, addr);
<a name="l05904"></a>05904       <span class="keywordflow">break</span>;
<a name="l05905"></a>05905     <span class="keywordflow">case</span> ARG_LENGTH:
<a name="l05906"></a>05906       <a class="code" href="../../d6/d87/regint_8h.html#a83efa6dcf98ede2bf597d42decb66693">GET_LENGTH_INC</a>(len, bp);
<a name="l05907"></a>05907       fprintf(f, <span class="stringliteral">&quot;:%d&quot;</span>, len);
<a name="l05908"></a>05908       <span class="keywordflow">break</span>;
<a name="l05909"></a>05909     <span class="keywordflow">case</span> ARG_MEMNUM:
<a name="l05910"></a>05910       mem = *((<a class="code" href="../../d6/d87/regint_8h.html#a2f2763a4c4b7652ac3ad18c8c160e9f6">MemNumType</a>* )bp);
<a name="l05911"></a>05911       bp += <a class="code" href="../../d6/d87/regint_8h.html#aba2581191b5b6472db1fd2728b585d78">SIZE_MEMNUM</a>;
<a name="l05912"></a>05912       fprintf(f, <span class="stringliteral">&quot;:%d&quot;</span>, mem);
<a name="l05913"></a>05913       <span class="keywordflow">break</span>;
<a name="l05914"></a>05914     <span class="keywordflow">case</span> ARG_OPTION:
<a name="l05915"></a>05915       {
<a name="l05916"></a>05916         <a class="code" href="../../d8/db3/oniguruma_8h.html#ad870c1a94502ad33c083978b17911e72">OnigOptionType</a> option = *((<a class="code" href="../../d8/db3/oniguruma_8h.html#ad870c1a94502ad33c083978b17911e72">OnigOptionType</a>* )bp);
<a name="l05917"></a>05917         bp += <a class="code" href="../../d6/d87/regint_8h.html#aeb0ed981d9ecc9562dfe16cd556327cf">SIZE_OPTION</a>;
<a name="l05918"></a>05918         fprintf(f, <span class="stringliteral">&quot;:%d&quot;</span>, option);
<a name="l05919"></a>05919       }
<a name="l05920"></a>05920       <span class="keywordflow">break</span>;
<a name="l05921"></a>05921 
<a name="l05922"></a>05922     <span class="keywordflow">case</span> ARG_STATE_CHECK:
<a name="l05923"></a>05923       scn = *((<a class="code" href="../../d6/d87/regint_8h.html#aa877bee333a03d69077236a4bb72710c">StateCheckNumType</a>* )bp);
<a name="l05924"></a>05924       bp += <a class="code" href="../../d6/d87/regint_8h.html#acafabf47814e803b8df00989bf1cdc66">SIZE_STATE_CHECK_NUM</a>;
<a name="l05925"></a>05925       fprintf(f, <span class="stringliteral">&quot;:%d&quot;</span>, scn);
<a name="l05926"></a>05926       <span class="keywordflow">break</span>;
<a name="l05927"></a>05927     }
<a name="l05928"></a>05928   }
<a name="l05929"></a>05929   <span class="keywordflow">else</span> {
<a name="l05930"></a>05930     <span class="keywordflow">switch</span> (*bp++) {
<a name="l05931"></a>05931     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a802685c8960564369443ab09fa0ed994">OP_EXACT1</a>:
<a name="l05932"></a>05932     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a38ecf0bc81634703d7efb9cd25696bed">OP_ANYCHAR_STAR_PEEK_NEXT</a>:
<a name="l05933"></a>05933     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7acc0675ef0928d65dd4c91b226c494d4a">OP_ANYCHAR_ML_STAR_PEEK_NEXT</a>:
<a name="l05934"></a>05934       p_string(f, 1, bp++); <span class="keywordflow">break</span>;
<a name="l05935"></a>05935     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a612d1fabc2c5cbd58fb1e0bbe51ff0ad">OP_EXACT2</a>:
<a name="l05936"></a>05936       p_string(f, 2, bp); bp += 2; <span class="keywordflow">break</span>;
<a name="l05937"></a>05937     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ab9f9811100c299335394d2d6cc392ae3">OP_EXACT3</a>:
<a name="l05938"></a>05938       p_string(f, 3, bp); bp += 3; <span class="keywordflow">break</span>;
<a name="l05939"></a>05939     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a6030307a6de89986500bdffabe2f3161">OP_EXACT4</a>:
<a name="l05940"></a>05940       p_string(f, 4, bp); bp += 4; <span class="keywordflow">break</span>;
<a name="l05941"></a>05941     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a60487277aab383bdfa623eb1747d7c1d">OP_EXACT5</a>:
<a name="l05942"></a>05942       p_string(f, 5, bp); bp += 5; <span class="keywordflow">break</span>;
<a name="l05943"></a>05943     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a6543fb856be4fe416ec56b3b8b07dcc8">OP_EXACTN</a>:
<a name="l05944"></a>05944       <a class="code" href="../../d6/d87/regint_8h.html#a83efa6dcf98ede2bf597d42decb66693">GET_LENGTH_INC</a>(len, bp);
<a name="l05945"></a>05945       p_len_string(f, len, 1, bp);
<a name="l05946"></a>05946       bp += len;
<a name="l05947"></a>05947       <span class="keywordflow">break</span>;
<a name="l05948"></a>05948 
<a name="l05949"></a>05949     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aba9f67a2b24665f739b19df7c9a50107">OP_EXACTMB2N1</a>:
<a name="l05950"></a>05950       p_string(f, 2, bp); bp += 2; <span class="keywordflow">break</span>;
<a name="l05951"></a>05951     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ac25b152495efa0a51038928a05e2b459">OP_EXACTMB2N2</a>:
<a name="l05952"></a>05952       p_string(f, 4, bp); bp += 4; <span class="keywordflow">break</span>;
<a name="l05953"></a>05953     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aeeac4db9268157fe5cebbdd6f81b0f1d">OP_EXACTMB2N3</a>:
<a name="l05954"></a>05954       p_string(f, 6, bp); bp += 6; <span class="keywordflow">break</span>;
<a name="l05955"></a>05955     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a45c3ff711c94546da76e9413d7cb0f31">OP_EXACTMB2N</a>:
<a name="l05956"></a>05956       <a class="code" href="../../d6/d87/regint_8h.html#a83efa6dcf98ede2bf597d42decb66693">GET_LENGTH_INC</a>(len, bp);
<a name="l05957"></a>05957       p_len_string(f, len, 2, bp);
<a name="l05958"></a>05958       bp += len * 2;
<a name="l05959"></a>05959       <span class="keywordflow">break</span>;
<a name="l05960"></a>05960     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a00de7e9b227f6e16bacbbca42d8441a2">OP_EXACTMB3N</a>:
<a name="l05961"></a>05961       <a class="code" href="../../d6/d87/regint_8h.html#a83efa6dcf98ede2bf597d42decb66693">GET_LENGTH_INC</a>(len, bp);
<a name="l05962"></a>05962       p_len_string(f, len, 3, bp);
<a name="l05963"></a>05963       bp += len * 3;
<a name="l05964"></a>05964       <span class="keywordflow">break</span>;
<a name="l05965"></a>05965     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a412ae4e1f2a0f31c2e59cad6d94f4906">OP_EXACTMBN</a>:
<a name="l05966"></a>05966       {
<a name="l05967"></a>05967         <span class="keywordtype">int</span> mb_len;
<a name="l05968"></a>05968 
<a name="l05969"></a>05969         <a class="code" href="../../d6/d87/regint_8h.html#a83efa6dcf98ede2bf597d42decb66693">GET_LENGTH_INC</a>(mb_len, bp);
<a name="l05970"></a>05970         <a class="code" href="../../d6/d87/regint_8h.html#a83efa6dcf98ede2bf597d42decb66693">GET_LENGTH_INC</a>(len, bp);
<a name="l05971"></a>05971         fprintf(f, <span class="stringliteral">&quot;:%d:%d:&quot;</span>, mb_len, len);
<a name="l05972"></a>05972         n = len * mb_len;
<a name="l05973"></a>05973         <span class="keywordflow">while</span> (n-- &gt; 0) { fputc(*bp++, f); }
<a name="l05974"></a>05974       }
<a name="l05975"></a>05975       <span class="keywordflow">break</span>;
<a name="l05976"></a>05976 
<a name="l05977"></a>05977     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ac1bb2eb7cff7020cfe303801e9ca45e1">OP_EXACT1_IC</a>:
<a name="l05978"></a>05978       len = <a class="code" href="../../d3/d09/ripper_8y.html#ae9f8530a4c9ec89ae8d62ce5b4410aad">enclen</a>(enc, bp, bpend);
<a name="l05979"></a>05979       p_string(f, len, bp);
<a name="l05980"></a>05980       bp += len;
<a name="l05981"></a>05981       <span class="keywordflow">break</span>;
<a name="l05982"></a>05982     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af99b2fc071b095c9c5813abdbc4ee7e6">OP_EXACTN_IC</a>:
<a name="l05983"></a>05983       <a class="code" href="../../d6/d87/regint_8h.html#a83efa6dcf98ede2bf597d42decb66693">GET_LENGTH_INC</a>(len, bp);
<a name="l05984"></a>05984       p_len_string(f, len, 1, bp);
<a name="l05985"></a>05985       bp += len;
<a name="l05986"></a>05986       <span class="keywordflow">break</span>;
<a name="l05987"></a>05987 
<a name="l05988"></a>05988     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a843e6fcc2c81d592d84267ec452b0c32">OP_CCLASS</a>:
<a name="l05989"></a>05989       n = bitset_on_num((<a class="code" href="../../d6/d87/regint_8h.html#adb2b463784f4cfa2f5504eb0ed9ee70a">BitSetRef</a> )bp);
<a name="l05990"></a>05990       bp += <a class="code" href="../../d6/d87/regint_8h.html#a4b9583bd490990ab54e76251ca3f46ee">SIZE_BITSET</a>;
<a name="l05991"></a>05991       fprintf(f, <span class="stringliteral">&quot;:%d&quot;</span>, n);
<a name="l05992"></a>05992       <span class="keywordflow">break</span>;
<a name="l05993"></a>05993 
<a name="l05994"></a>05994     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af3302d2798a28920fca92621f0ad0a33">OP_CCLASS_NOT</a>:
<a name="l05995"></a>05995       n = bitset_on_num((<a class="code" href="../../d6/d87/regint_8h.html#adb2b463784f4cfa2f5504eb0ed9ee70a">BitSetRef</a> )bp);
<a name="l05996"></a>05996       bp += <a class="code" href="../../d6/d87/regint_8h.html#a4b9583bd490990ab54e76251ca3f46ee">SIZE_BITSET</a>;
<a name="l05997"></a>05997       fprintf(f, <span class="stringliteral">&quot;:%d&quot;</span>, n);
<a name="l05998"></a>05998       <span class="keywordflow">break</span>;
<a name="l05999"></a>05999 
<a name="l06000"></a>06000     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aa55987e4798bb3b4a9a84fc791a092a1">OP_CCLASS_MB</a>:
<a name="l06001"></a>06001     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7abceea1b39968ed193131ef266a0f7313">OP_CCLASS_MB_NOT</a>:
<a name="l06002"></a>06002       <a class="code" href="../../d6/d87/regint_8h.html#a83efa6dcf98ede2bf597d42decb66693">GET_LENGTH_INC</a>(len, bp);
<a name="l06003"></a>06003       q = bp;
<a name="l06004"></a>06004 <span class="preprocessor">#ifndef PLATFORM_UNALIGNED_WORD_ACCESS</span>
<a name="l06005"></a>06005 <span class="preprocessor"></span>      <a class="code" href="../../d6/d87/regint_8h.html#aa27e2336335dc8038889cc050ff02a87">ALIGNMENT_RIGHT</a>(q);
<a name="l06006"></a>06006 <span class="preprocessor">#endif</span>
<a name="l06007"></a>06007 <span class="preprocessor"></span>      <a class="code" href="../../d6/d87/regint_8h.html#a90db6270cec0f45da03f16ce0590eecf">GET_CODE_POINT</a>(code, q);
<a name="l06008"></a>06008       bp += len;
<a name="l06009"></a>06009       fprintf(f, <span class="stringliteral">&quot;:%d:%d&quot;</span>, (<span class="keywordtype">int</span> )code, len);
<a name="l06010"></a>06010       <span class="keywordflow">break</span>;
<a name="l06011"></a>06011 
<a name="l06012"></a>06012     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af700cb11f22421db229d4eb59eb6ccf7">OP_CCLASS_MIX</a>:
<a name="l06013"></a>06013     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aa16a4fa0dab93e1b9feb3aa775722757">OP_CCLASS_MIX_NOT</a>:
<a name="l06014"></a>06014       n = bitset_on_num((<a class="code" href="../../d6/d87/regint_8h.html#adb2b463784f4cfa2f5504eb0ed9ee70a">BitSetRef</a> )bp);
<a name="l06015"></a>06015       bp += <a class="code" href="../../d6/d87/regint_8h.html#a4b9583bd490990ab54e76251ca3f46ee">SIZE_BITSET</a>;
<a name="l06016"></a>06016       <a class="code" href="../../d6/d87/regint_8h.html#a83efa6dcf98ede2bf597d42decb66693">GET_LENGTH_INC</a>(len, bp);
<a name="l06017"></a>06017       q = bp;
<a name="l06018"></a>06018 <span class="preprocessor">#ifndef PLATFORM_UNALIGNED_WORD_ACCESS</span>
<a name="l06019"></a>06019 <span class="preprocessor"></span>      <a class="code" href="../../d6/d87/regint_8h.html#aa27e2336335dc8038889cc050ff02a87">ALIGNMENT_RIGHT</a>(q);
<a name="l06020"></a>06020 <span class="preprocessor">#endif</span>
<a name="l06021"></a>06021 <span class="preprocessor"></span>      <a class="code" href="../../d6/d87/regint_8h.html#a90db6270cec0f45da03f16ce0590eecf">GET_CODE_POINT</a>(code, q);
<a name="l06022"></a>06022       bp += len;
<a name="l06023"></a>06023       fprintf(f, <span class="stringliteral">&quot;:%d:%d:%d&quot;</span>, n, (<span class="keywordtype">int</span> )code, len);
<a name="l06024"></a>06024       <span class="keywordflow">break</span>;
<a name="l06025"></a>06025 
<a name="l06026"></a>06026     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a8cdeebcd10a14c5eaf2276127b9f8063">OP_CCLASS_NODE</a>:
<a name="l06027"></a>06027       {
<a name="l06028"></a>06028         <a class="code" href="../../d8/d79/struct_c_class_node.html">CClassNode</a> *cc;
<a name="l06029"></a>06029 
<a name="l06030"></a>06030         <a class="code" href="../../d6/d87/regint_8h.html#ad5be382817998573108640e66f7f66e6">GET_POINTER_INC</a>(cc, bp);
<a name="l06031"></a>06031         n = bitset_on_num(cc-&gt;<a class="code" href="../../d8/d79/struct_c_class_node.html#a082458e56c928f78db90f08e242a9f3d">bs</a>);
<a name="l06032"></a>06032         fprintf(f, <span class="stringliteral">&quot;:%&quot;</span>PRIuPTR<span class="stringliteral">&quot;:%d&quot;</span>, (<a class="code" href="../../dc/db1/win32_8h.html#a728e973c799f206f0151c8a3bd1e5699">uintptr_t</a>)cc, n);
<a name="l06033"></a>06033       }
<a name="l06034"></a>06034       <span class="keywordflow">break</span>;
<a name="l06035"></a>06035 
<a name="l06036"></a>06036     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a92cac10d5dd6563484d83d78ffd7a9fe">OP_BACKREFN_IC</a>:
<a name="l06037"></a>06037       mem = *((<a class="code" href="../../d6/d87/regint_8h.html#a2f2763a4c4b7652ac3ad18c8c160e9f6">MemNumType</a>* )bp);
<a name="l06038"></a>06038       bp += <a class="code" href="../../d6/d87/regint_8h.html#aba2581191b5b6472db1fd2728b585d78">SIZE_MEMNUM</a>;
<a name="l06039"></a>06039       fprintf(f, <span class="stringliteral">&quot;:%d&quot;</span>, mem);
<a name="l06040"></a>06040       <span class="keywordflow">break</span>;
<a name="l06041"></a>06041 
<a name="l06042"></a>06042     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ab618b20a94bacf16ee983d035b87bdf4">OP_BACKREF_MULTI_IC</a>:
<a name="l06043"></a>06043     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af1ec37c9660cb03e31c26c7f54e18481">OP_BACKREF_MULTI</a>:
<a name="l06044"></a>06044       fputs(<span class="stringliteral">&quot; &quot;</span>, f);
<a name="l06045"></a>06045       <a class="code" href="../../d6/d87/regint_8h.html#a83efa6dcf98ede2bf597d42decb66693">GET_LENGTH_INC</a>(len, bp);
<a name="l06046"></a>06046       <span class="keywordflow">for</span> (i = 0; i &lt; len; i++) {
<a name="l06047"></a>06047         <a class="code" href="../../d6/d87/regint_8h.html#a3546a03488efa40ff016fdf397a655da">GET_MEMNUM_INC</a>(mem, bp);
<a name="l06048"></a>06048         <span class="keywordflow">if</span> (i &gt; 0) fputs(<span class="stringliteral">&quot;, &quot;</span>, f);
<a name="l06049"></a>06049         fprintf(f, <span class="stringliteral">&quot;%d&quot;</span>, mem);
<a name="l06050"></a>06050       }
<a name="l06051"></a>06051       <span class="keywordflow">break</span>;
<a name="l06052"></a>06052 
<a name="l06053"></a>06053     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7af5a6fae90bfd486b620f19fe1afd5cd2">OP_BACKREF_WITH_LEVEL</a>:
<a name="l06054"></a>06054       {
<a name="l06055"></a>06055         <a class="code" href="../../d8/db3/oniguruma_8h.html#ad870c1a94502ad33c083978b17911e72">OnigOptionType</a> option;
<a name="l06056"></a>06056         <a class="code" href="../../d6/d87/regint_8h.html#a2d7f6198122e9252799bc8ba7dc60727">LengthType</a> level;
<a name="l06057"></a>06057 
<a name="l06058"></a>06058         <a class="code" href="../../d6/d87/regint_8h.html#a27ad0ecd04ef678d4247bc5936176706">GET_OPTION_INC</a>(option, bp);
<a name="l06059"></a>06059         fprintf(f, <span class="stringliteral">&quot;:%d&quot;</span>, option);
<a name="l06060"></a>06060         <a class="code" href="../../d6/d87/regint_8h.html#a83efa6dcf98ede2bf597d42decb66693">GET_LENGTH_INC</a>(level, bp);
<a name="l06061"></a>06061         fprintf(f, <span class="stringliteral">&quot;:%d&quot;</span>, level);
<a name="l06062"></a>06062 
<a name="l06063"></a>06063         fputs(<span class="stringliteral">&quot; &quot;</span>, f);
<a name="l06064"></a>06064         <a class="code" href="../../d6/d87/regint_8h.html#a83efa6dcf98ede2bf597d42decb66693">GET_LENGTH_INC</a>(len, bp);
<a name="l06065"></a>06065         <span class="keywordflow">for</span> (i = 0; i &lt; len; i++) {
<a name="l06066"></a>06066           <a class="code" href="../../d6/d87/regint_8h.html#a3546a03488efa40ff016fdf397a655da">GET_MEMNUM_INC</a>(mem, bp);
<a name="l06067"></a>06067           <span class="keywordflow">if</span> (i &gt; 0) fputs(<span class="stringliteral">&quot;, &quot;</span>, f);
<a name="l06068"></a>06068           fprintf(f, <span class="stringliteral">&quot;%d&quot;</span>, mem);
<a name="l06069"></a>06069         }
<a name="l06070"></a>06070       }
<a name="l06071"></a>06071       <span class="keywordflow">break</span>;
<a name="l06072"></a>06072 
<a name="l06073"></a>06073     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a6066e50e385eb0ebb5edf501c66a77ce">OP_REPEAT</a>:
<a name="l06074"></a>06074     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7ab1500068559c4c4ad727756c7447e30f">OP_REPEAT_NG</a>:
<a name="l06075"></a>06075       {
<a name="l06076"></a>06076         mem = *((<a class="code" href="../../d6/d87/regint_8h.html#a2f2763a4c4b7652ac3ad18c8c160e9f6">MemNumType</a>* )bp);
<a name="l06077"></a>06077         bp += <a class="code" href="../../d6/d87/regint_8h.html#aba2581191b5b6472db1fd2728b585d78">SIZE_MEMNUM</a>;
<a name="l06078"></a>06078         addr = *((<a class="code" href="../../d6/d87/regint_8h.html#a9d058c40ebc713355574e3d4579bbd2a">RelAddrType</a>* )bp);
<a name="l06079"></a>06079         bp += <a class="code" href="../../d6/d87/regint_8h.html#a452ae7b392734f127e7400d0dce6b5aa">SIZE_RELADDR</a>;
<a name="l06080"></a>06080         fprintf(f, <span class="stringliteral">&quot;:%d:%d&quot;</span>, mem, addr);
<a name="l06081"></a>06081       }
<a name="l06082"></a>06082       <span class="keywordflow">break</span>;
<a name="l06083"></a>06083 
<a name="l06084"></a>06084     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a6c17e281c04ad4d3282805c194e8ff99">OP_PUSH_OR_JUMP_EXACT1</a>:
<a name="l06085"></a>06085     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7aa8bc2955f8564742ed69b36ef9474dd4">OP_PUSH_IF_PEEK_NEXT</a>:
<a name="l06086"></a>06086       addr = *((<a class="code" href="../../d6/d87/regint_8h.html#a9d058c40ebc713355574e3d4579bbd2a">RelAddrType</a>* )bp);
<a name="l06087"></a>06087       bp += <a class="code" href="../../d6/d87/regint_8h.html#a452ae7b392734f127e7400d0dce6b5aa">SIZE_RELADDR</a>;
<a name="l06088"></a>06088       fprintf(f, <span class="stringliteral">&quot;:(%d)&quot;</span>, addr);
<a name="l06089"></a>06089       p_string(f, 1, bp);
<a name="l06090"></a>06090       bp += 1;
<a name="l06091"></a>06091       <span class="keywordflow">break</span>;
<a name="l06092"></a>06092 
<a name="l06093"></a>06093     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a077f66491531fb39f88e9061b5c21f50">OP_LOOK_BEHIND</a>:
<a name="l06094"></a>06094       <a class="code" href="../../d6/d87/regint_8h.html#a83efa6dcf98ede2bf597d42decb66693">GET_LENGTH_INC</a>(len, bp);
<a name="l06095"></a>06095       fprintf(f, <span class="stringliteral">&quot;:%d&quot;</span>, len);
<a name="l06096"></a>06096       <span class="keywordflow">break</span>;
<a name="l06097"></a>06097 
<a name="l06098"></a>06098     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a3a1e1f361ad65db2b5f4b953c86d1dcd">OP_PUSH_LOOK_BEHIND_NOT</a>:
<a name="l06099"></a>06099       <a class="code" href="../../d6/d87/regint_8h.html#af809d3378e4a9001b798b7e638e718e6">GET_RELADDR_INC</a>(addr, bp);
<a name="l06100"></a>06100       <a class="code" href="../../d6/d87/regint_8h.html#a83efa6dcf98ede2bf597d42decb66693">GET_LENGTH_INC</a>(len, bp);
<a name="l06101"></a>06101       fprintf(f, <span class="stringliteral">&quot;:%d:(%d)&quot;</span>, len, addr);
<a name="l06102"></a>06102       <span class="keywordflow">break</span>;
<a name="l06103"></a>06103 
<a name="l06104"></a>06104     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a9b76e8922477cbbb9e53f8ce3c255536">OP_STATE_CHECK_PUSH</a>:
<a name="l06105"></a>06105     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#abeb7dfb0e9e2b3114e240a405d046ea7a0b5db3c7450ac9950ff859e8f58bb24c">OP_STATE_CHECK_PUSH_OR_JUMP</a>:
<a name="l06106"></a>06106       scn = *((<a class="code" href="../../d6/d87/regint_8h.html#aa877bee333a03d69077236a4bb72710c">StateCheckNumType</a>* )bp);
<a name="l06107"></a>06107       bp += <a class="code" href="../../d6/d87/regint_8h.html#acafabf47814e803b8df00989bf1cdc66">SIZE_STATE_CHECK_NUM</a>;
<a name="l06108"></a>06108       addr = *((<a class="code" href="../../d6/d87/regint_8h.html#a9d058c40ebc713355574e3d4579bbd2a">RelAddrType</a>* )bp);
<a name="l06109"></a>06109       bp += <a class="code" href="../../d6/d87/regint_8h.html#a452ae7b392734f127e7400d0dce6b5aa">SIZE_RELADDR</a>;
<a name="l06110"></a>06110       fprintf(f, <span class="stringliteral">&quot;:%d:(%d)&quot;</span>, scn, addr);
<a name="l06111"></a>06111       <span class="keywordflow">break</span>;
<a name="l06112"></a>06112 
<a name="l06113"></a>06113     <span class="keywordflow">default</span>:
<a name="l06114"></a>06114       fprintf(stderr, <span class="stringliteral">&quot;onig_print_compiled_byte_code: undefined code %d\n&quot;</span>,
<a name="l06115"></a>06115               *--bp);
<a name="l06116"></a>06116     }
<a name="l06117"></a>06117   }
<a name="l06118"></a>06118   fputs(<span class="stringliteral">&quot;]&quot;</span>, f);
<a name="l06119"></a>06119   <span class="keywordflow">if</span> (nextp) *nextp = bp;
<a name="l06120"></a>06120 }
<a name="l06121"></a>06121 
<a name="l06122"></a>06122 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l06123"></a>06123 print_compiled_byte_code_list(<a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a>* f, <a class="code" href="../../db/d0e/structre__pattern__buffer.html">regex_t</a>* reg)
<a name="l06124"></a>06124 {
<a name="l06125"></a>06125   <span class="keywordtype">int</span> ncode;
<a name="l06126"></a>06126   <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* bp = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af28499b9afdcbaf41103796558f2a4f9">p</a>;
<a name="l06127"></a>06127   <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* end = reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af28499b9afdcbaf41103796558f2a4f9">p</a> + reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a4cf446c0eb86f2fc3322f9fb27c5dc0f">used</a>;
<a name="l06128"></a>06128 
<a name="l06129"></a>06129   fprintf(f, <span class="stringliteral">&quot;code length: %d\n&quot;</span>, reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a4cf446c0eb86f2fc3322f9fb27c5dc0f">used</a>);
<a name="l06130"></a>06130 
<a name="l06131"></a>06131   ncode = -1;
<a name="l06132"></a>06132   <span class="keywordflow">while</span> (bp &lt; end) {
<a name="l06133"></a>06133     ncode++;
<a name="l06134"></a>06134     <span class="keywordflow">if</span> (bp &gt; reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af28499b9afdcbaf41103796558f2a4f9">p</a>) {
<a name="l06135"></a>06135       <span class="keywordflow">if</span> (ncode % 5 == 0)
<a name="l06136"></a>06136         fprintf(f, <span class="stringliteral">&quot;\n%ld:&quot;</span>, bp-reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af28499b9afdcbaf41103796558f2a4f9">p</a>);
<a name="l06137"></a>06137       <span class="keywordflow">else</span>
<a name="l06138"></a>06138         fprintf(f, <span class="stringliteral">&quot; %ld:&quot;</span>, bp-reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#af28499b9afdcbaf41103796558f2a4f9">p</a>);
<a name="l06139"></a>06139     }
<a name="l06140"></a>06140     <a class="code" href="../../db/d4b/regexec_8c.html#a2a2ff69b2fa49e61825f222ae549b73a">onig_print_compiled_byte_code</a>(f, bp, end, &amp;bp, reg-&gt;<a class="code" href="../../db/d0e/structre__pattern__buffer.html#a1857fd68f4ca091d03855fa49b449080">enc</a>);
<a name="l06141"></a>06141   }
<a name="l06142"></a>06142 
<a name="l06143"></a>06143   fprintf(f, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l06144"></a>06144 }
<a name="l06145"></a>06145 
<a name="l06146"></a>06146 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l06147"></a>06147 print_indent_tree(<a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a>* f, <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node, <span class="keywordtype">int</span> indent)
<a name="l06148"></a>06148 {
<a name="l06149"></a>06149   <span class="keywordtype">int</span> i, type, container_p = 0;
<a name="l06150"></a>06150   <span class="keywordtype">int</span> <a class="code" href="../../d1/d6f/date__strftime_8c.html#aa62ba8463316e20fcef4b9db83bab2fd">add</a> = 3;
<a name="l06151"></a>06151   <a class="code" href="../../d8/db3/oniguruma_8h.html#a5d08c75474105d0e4acc21cd56769904">UChar</a>* p;
<a name="l06152"></a>06152 
<a name="l06153"></a>06153   Indent(f, indent);
<a name="l06154"></a>06154   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#a91a9c9242dc3810582965d1882d1894d">IS_NULL</a>(node)) {
<a name="l06155"></a>06155     fprintf(f, <span class="stringliteral">&quot;ERROR: null node!!!\n&quot;</span>);
<a name="l06156"></a>06156     exit (0);
<a name="l06157"></a>06157   }
<a name="l06158"></a>06158 
<a name="l06159"></a>06159   type = <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node);
<a name="l06160"></a>06160   <span class="keywordflow">switch</span> (type) {
<a name="l06161"></a>06161   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>:
<a name="l06162"></a>06162   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a>:
<a name="l06163"></a>06163     <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node) == <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a>)
<a name="l06164"></a>06164       fprintf(f, <span class="stringliteral">&quot;&lt;list:%&quot;</span>PRIxPTR<span class="stringliteral">&quot;&gt;\n&quot;</span>, (<a class="code" href="../../dc/db1/win32_8h.html#a0fbe4a4f8dd857ee04923a901f27465f">intptr_t</a>)node);
<a name="l06165"></a>06165     <span class="keywordflow">else</span>
<a name="l06166"></a>06166       fprintf(f, <span class="stringliteral">&quot;&lt;alt:%&quot;</span>PRIxPTR<span class="stringliteral">&quot;&gt;\n&quot;</span>, (<a class="code" href="../../dc/db1/win32_8h.html#a0fbe4a4f8dd857ee04923a901f27465f">intptr_t</a>)node);
<a name="l06167"></a>06167 
<a name="l06168"></a>06168     print_indent_tree(f, <a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), indent + add);
<a name="l06169"></a>06169     <span class="keywordflow">while</span> (<a class="code" href="../../d6/d87/regint_8h.html#a4bc25fbd4749a2c130d1ae7f15ba140c">IS_NOT_NULL</a>(node = <a class="code" href="../../d1/dfc/regparse_8h.html#ac3a01065a5b7f17aad984671c730739e">NCDR</a>(node))) {
<a name="l06170"></a>06170       <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node) != type) {
<a name="l06171"></a>06171         fprintf(f, <span class="stringliteral">&quot;ERROR: list/alt right is not a cons. %d\n&quot;</span>, <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node));
<a name="l06172"></a>06172         exit(0);
<a name="l06173"></a>06173       }
<a name="l06174"></a>06174       print_indent_tree(f, <a class="code" href="../../d1/dfc/regparse_8h.html#ace12d76fd705497f81e4e2cd95cd247e">NCAR</a>(node), indent + add);
<a name="l06175"></a>06175     }
<a name="l06176"></a>06176     <span class="keywordflow">break</span>;
<a name="l06177"></a>06177 
<a name="l06178"></a>06178   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ad5d1aafda0801d24b9425f6c01515ed9">NT_STR</a>:
<a name="l06179"></a>06179     fprintf(f, <span class="stringliteral">&quot;&lt;string%s:%&quot;</span>PRIxPTR<span class="stringliteral">&quot;&gt;&quot;</span>,
<a name="l06180"></a>06180             (<a class="code" href="../../d1/dfc/regparse_8h.html#ae9f2e7348c7dca167e63f949aba51715">NSTRING_IS_RAW</a>(node) ? <span class="stringliteral">&quot;-raw&quot;</span> : <span class="stringliteral">&quot;&quot;</span>), (<a class="code" href="../../dc/db1/win32_8h.html#a0fbe4a4f8dd857ee04923a901f27465f">intptr_t</a>)node);
<a name="l06181"></a>06181     <span class="keywordflow">for</span> (p = <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(node)-&gt;s; p &lt; <a class="code" href="../../d1/dfc/regparse_8h.html#a24a4b2af18dda01ae000ec64129eb50e">NSTR</a>(node)-&gt;end; p++) {
<a name="l06182"></a>06182       <span class="keywordflow">if</span> (*p &gt;= 0x20 &amp;&amp; *p &lt; 0x7f)
<a name="l06183"></a>06183         fputc(*p, f);
<a name="l06184"></a>06184       <span class="keywordflow">else</span> {
<a name="l06185"></a>06185         fprintf(f, <span class="stringliteral">&quot; 0x%02x&quot;</span>, *p);
<a name="l06186"></a>06186       }
<a name="l06187"></a>06187     }
<a name="l06188"></a>06188     <span class="keywordflow">break</span>;
<a name="l06189"></a>06189 
<a name="l06190"></a>06190   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a98cbe6da0636f892e4de517d350a2938">NT_CCLASS</a>:
<a name="l06191"></a>06191     fprintf(f, <span class="stringliteral">&quot;&lt;cclass:%&quot;</span>PRIxPTR<span class="stringliteral">&quot;&gt;&quot;</span>, (<a class="code" href="../../dc/db1/win32_8h.html#a0fbe4a4f8dd857ee04923a901f27465f">intptr_t</a>)node);
<a name="l06192"></a>06192     <span class="keywordflow">if</span> (<a class="code" href="../../d6/d87/regint_8h.html#aa719ec00173511740495f30fc0878c9e">IS_NCCLASS_NOT</a>(<a class="code" href="../../d1/dfc/regparse_8h.html#a816a6d8f921892c2efef73eb7727d589">NCCLASS</a>(node))) fputs(<span class="stringliteral">&quot; not&quot;</span>, f);
<a name="l06193"></a>06193     <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a816a6d8f921892c2efef73eb7727d589">NCCLASS</a>(node)-&gt;mbuf) {
<a name="l06194"></a>06194       <a class="code" href="../../d0/deb/struct___b_buf.html">BBuf</a>* bbuf = <a class="code" href="../../d1/dfc/regparse_8h.html#a816a6d8f921892c2efef73eb7727d589">NCCLASS</a>(node)-&gt;mbuf;
<a name="l06195"></a>06195       <span class="keywordflow">for</span> (i = 0; i &lt; (int)bbuf-&gt;<a class="code" href="../../d0/deb/struct___b_buf.html#acf9f185ff639d57c7e4aaa6e6415888c">used</a>; i++) {
<a name="l06196"></a>06196         <span class="keywordflow">if</span> (i &gt; 0) fprintf(f, <span class="stringliteral">&quot;,&quot;</span>);
<a name="l06197"></a>06197         fprintf(f, <span class="stringliteral">&quot;%0x&quot;</span>, bbuf-&gt;<a class="code" href="../../d0/deb/struct___b_buf.html#a3d79f476af8e7a57dd240e68f11867a1">p</a>[i]);
<a name="l06198"></a>06198       }
<a name="l06199"></a>06199     }
<a name="l06200"></a>06200     <span class="keywordflow">break</span>;
<a name="l06201"></a>06201 
<a name="l06202"></a>06202   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a542a2658d0f164eea8bc384ab01549d4">NT_CTYPE</a>:
<a name="l06203"></a>06203     fprintf(f, <span class="stringliteral">&quot;&lt;ctype:%&quot;</span>PRIxPTR<span class="stringliteral">&quot;&gt; &quot;</span>, (<a class="code" href="../../dc/db1/win32_8h.html#a0fbe4a4f8dd857ee04923a901f27465f">intptr_t</a>)node);
<a name="l06204"></a>06204     <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a55cfe9cd258d0bdf14d6e48115f7e70b">NCTYPE</a>(node)-&gt;ctype) {
<a name="l06205"></a>06205     <span class="keywordflow">case</span> <a class="code" href="../../d8/db3/oniguruma_8h.html#a612fd1e82d5c1d87c6b73c15cee0ae98">ONIGENC_CTYPE_WORD</a>:
<a name="l06206"></a>06206       <span class="keywordflow">if</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a55cfe9cd258d0bdf14d6e48115f7e70b">NCTYPE</a>(node)-&gt;not != 0)
<a name="l06207"></a>06207         fputs(<span class="stringliteral">&quot;not word&quot;</span>,       f);
<a name="l06208"></a>06208       <span class="keywordflow">else</span>
<a name="l06209"></a>06209         fputs(<span class="stringliteral">&quot;word&quot;</span>,           f);
<a name="l06210"></a>06210       <span class="keywordflow">break</span>;
<a name="l06211"></a>06211 
<a name="l06212"></a>06212     <span class="keywordflow">default</span>:
<a name="l06213"></a>06213       fprintf(f, <span class="stringliteral">&quot;ERROR: undefined ctype.\n&quot;</span>);
<a name="l06214"></a>06214       exit(0);
<a name="l06215"></a>06215     }
<a name="l06216"></a>06216     <span class="keywordflow">break</span>;
<a name="l06217"></a>06217 
<a name="l06218"></a>06218   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a21a7fcbf4a9c872540490d92b9c29813">NT_CANY</a>:
<a name="l06219"></a>06219     fprintf(f, <span class="stringliteral">&quot;&lt;anychar:%&quot;</span>PRIxPTR<span class="stringliteral">&quot;&gt;&quot;</span>, (<a class="code" href="../../dc/db1/win32_8h.html#a0fbe4a4f8dd857ee04923a901f27465f">intptr_t</a>)node);
<a name="l06220"></a>06220     <span class="keywordflow">break</span>;
<a name="l06221"></a>06221 
<a name="l06222"></a>06222   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a4169804cb78eccf494a7f72ae737be32">NT_ANCHOR</a>:
<a name="l06223"></a>06223     fprintf(f, <span class="stringliteral">&quot;&lt;anchor:%&quot;</span>PRIxPTR<span class="stringliteral">&quot;&gt; &quot;</span>, (<a class="code" href="../../dc/db1/win32_8h.html#a0fbe4a4f8dd857ee04923a901f27465f">intptr_t</a>)node);
<a name="l06224"></a>06224     <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node)-&gt;type) {
<a name="l06225"></a>06225     <span class="keywordflow">case</span> ANCHOR_BEGIN_BUF:      fputs(<span class="stringliteral">&quot;begin buf&quot;</span>,      f); <span class="keywordflow">break</span>;
<a name="l06226"></a>06226     <span class="keywordflow">case</span> ANCHOR_END_BUF:        fputs(<span class="stringliteral">&quot;end buf&quot;</span>,        f); <span class="keywordflow">break</span>;
<a name="l06227"></a>06227     <span class="keywordflow">case</span> ANCHOR_BEGIN_LINE:     fputs(<span class="stringliteral">&quot;begin line&quot;</span>,     f); <span class="keywordflow">break</span>;
<a name="l06228"></a>06228     <span class="keywordflow">case</span> ANCHOR_END_LINE:       fputs(<span class="stringliteral">&quot;end line&quot;</span>,       f); <span class="keywordflow">break</span>;
<a name="l06229"></a>06229     <span class="keywordflow">case</span> ANCHOR_SEMI_END_BUF:   fputs(<span class="stringliteral">&quot;semi end buf&quot;</span>,   f); <span class="keywordflow">break</span>;
<a name="l06230"></a>06230     <span class="keywordflow">case</span> ANCHOR_BEGIN_POSITION: fputs(<span class="stringliteral">&quot;begin position&quot;</span>, f); <span class="keywordflow">break</span>;
<a name="l06231"></a>06231 
<a name="l06232"></a>06232     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a5963eb85b5d3cfaecc1425010a2e4357">ANCHOR_WORD_BOUND</a>:      fputs(<span class="stringliteral">&quot;word bound&quot;</span>,     f); <span class="keywordflow">break</span>;
<a name="l06233"></a>06233     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#ab1e3503037b2e8094b2f66a32fc40683">ANCHOR_NOT_WORD_BOUND</a>:  fputs(<span class="stringliteral">&quot;not word bound&quot;</span>, f); <span class="keywordflow">break</span>;
<a name="l06234"></a>06234 <span class="preprocessor">#ifdef USE_WORD_BEGIN_END</span>
<a name="l06235"></a>06235 <span class="preprocessor"></span>    <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a6f3c15a0c4744c9125d79f1f157c4c05">ANCHOR_WORD_BEGIN</a>:      fputs(<span class="stringliteral">&quot;word begin&quot;</span>, f);     <span class="keywordflow">break</span>;
<a name="l06236"></a>06236     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#afa94e4bc6eced6f5f03a444e5e3d2d84">ANCHOR_WORD_END</a>:        fputs(<span class="stringliteral">&quot;word end&quot;</span>, f);       <span class="keywordflow">break</span>;
<a name="l06237"></a>06237 <span class="preprocessor">#endif</span>
<a name="l06238"></a>06238 <span class="preprocessor"></span>    <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#aa0f9fc98186b637ecce6d72e12ee1eed">ANCHOR_PREC_READ</a>:       fputs(<span class="stringliteral">&quot;prec read&quot;</span>,      f); container_p = <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>; <span class="keywordflow">break</span>;
<a name="l06239"></a>06239     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a1c64ac74f61b2ffbf3b60f391ae65cbf">ANCHOR_PREC_READ_NOT</a>:   fputs(<span class="stringliteral">&quot;prec read not&quot;</span>,  f); container_p = <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>; <span class="keywordflow">break</span>;
<a name="l06240"></a>06240     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a460ceecc3150bd7cd2437d41fbeb9ea8">ANCHOR_LOOK_BEHIND</a>:     fputs(<span class="stringliteral">&quot;look_behind&quot;</span>,    f); container_p = <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>; <span class="keywordflow">break</span>;
<a name="l06241"></a>06241     <span class="keywordflow">case</span> <a class="code" href="../../d6/d87/regint_8h.html#a8812f9a061dd987fe8426262589b52c4">ANCHOR_LOOK_BEHIND_NOT</a>: fputs(<span class="stringliteral">&quot;look_behind_not&quot;</span>,f); container_p = <a class="code" href="../../d1/d5c/nkf_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>; <span class="keywordflow">break</span>;
<a name="l06242"></a>06242 
<a name="l06243"></a>06243     <span class="keywordflow">default</span>:
<a name="l06244"></a>06244       fprintf(f, <span class="stringliteral">&quot;ERROR: undefined anchor type.\n&quot;</span>);
<a name="l06245"></a>06245       <span class="keywordflow">break</span>;
<a name="l06246"></a>06246     }
<a name="l06247"></a>06247     <span class="keywordflow">break</span>;
<a name="l06248"></a>06248 
<a name="l06249"></a>06249   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#ac1d2a54cfe6dfa9104b4bfb8d06b8aeb">NT_BREF</a>:
<a name="l06250"></a>06250     {
<a name="l06251"></a>06251       <span class="keywordtype">int</span>* p;
<a name="l06252"></a>06252       <a class="code" href="../../db/dbf/struct_b_ref_node.html">BRefNode</a>* br = <a class="code" href="../../d1/dfc/regparse_8h.html#a38215823f6ab7e63e919eae3bfa79bfa">NBREF</a>(node);
<a name="l06253"></a>06253       p = <a class="code" href="../../d1/dfc/regparse_8h.html#af7acd0d16d2a338ffba1881e85a610b1">BACKREFS_P</a>(br);
<a name="l06254"></a>06254       fprintf(f, <span class="stringliteral">&quot;&lt;backref:%&quot;</span>PRIxPTR<span class="stringliteral">&quot;&gt;&quot;</span>, (<a class="code" href="../../dc/db1/win32_8h.html#a0fbe4a4f8dd857ee04923a901f27465f">intptr_t</a>)node);
<a name="l06255"></a>06255       <span class="keywordflow">for</span> (i = 0; i &lt; br-&gt;<a class="code" href="../../db/dbf/struct_b_ref_node.html#ae790ac554909ac2940d464ac98019912">back_num</a>; i++) {
<a name="l06256"></a>06256         <span class="keywordflow">if</span> (i &gt; 0) fputs(<span class="stringliteral">&quot;, &quot;</span>, f);
<a name="l06257"></a>06257         fprintf(f, <span class="stringliteral">&quot;%d&quot;</span>, p[i]);
<a name="l06258"></a>06258       }
<a name="l06259"></a>06259     }
<a name="l06260"></a>06260     <span class="keywordflow">break</span>;
<a name="l06261"></a>06261 
<a name="l06262"></a>06262 <span class="preprocessor">#ifdef USE_SUBEXP_CALL</span>
<a name="l06263"></a>06263 <span class="preprocessor"></span>  <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a35167bbf195155481ee5cbcae152d0f9">NT_CALL</a>:
<a name="l06264"></a>06264     {
<a name="l06265"></a>06265       <a class="code" href="../../d2/dac/struct_call_node.html">CallNode</a>* cn = <a class="code" href="../../d1/dfc/regparse_8h.html#aedcbc83fb8b3a89a32a3cd51d700710a">NCALL</a>(node);
<a name="l06266"></a>06266       fprintf(f, <span class="stringliteral">&quot;&lt;call:%&quot;</span>PRIxPTR<span class="stringliteral">&quot;&gt;&quot;</span>, (<a class="code" href="../../dc/db1/win32_8h.html#a0fbe4a4f8dd857ee04923a901f27465f">intptr_t</a>)node);
<a name="l06267"></a>06267       p_string(f, cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#ae2927bfc2351f28c2cef4c67c1826653">name_end</a> - cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#a6e8afb4d83386549c360a4b2f0830314">name</a>, cn-&gt;<a class="code" href="../../d2/dac/struct_call_node.html#a6e8afb4d83386549c360a4b2f0830314">name</a>);
<a name="l06268"></a>06268     }
<a name="l06269"></a>06269     <span class="keywordflow">break</span>;
<a name="l06270"></a>06270 <span class="preprocessor">#endif</span>
<a name="l06271"></a>06271 <span class="preprocessor"></span>
<a name="l06272"></a>06272   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a>:
<a name="l06273"></a>06273     fprintf(f, <span class="stringliteral">&quot;&lt;quantifier:%&quot;</span>PRIxPTR<span class="stringliteral">&quot;&gt;{%d,%d}%s\n&quot;</span>, (<a class="code" href="../../dc/db1/win32_8h.html#a0fbe4a4f8dd857ee04923a901f27465f">intptr_t</a>)node,
<a name="l06274"></a>06274             <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node)-&gt;lower, <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node)-&gt;upper,
<a name="l06275"></a>06275             (<a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node)-&gt;greedy ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;?&quot;</span>));
<a name="l06276"></a>06276     print_indent_tree(f, <a class="code" href="../../d1/dfc/regparse_8h.html#addc653094848075876587782124e9504">NQTFR</a>(node)-&gt;target, indent + add);
<a name="l06277"></a>06277     <span class="keywordflow">break</span>;
<a name="l06278"></a>06278 
<a name="l06279"></a>06279   <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>:
<a name="l06280"></a>06280     fprintf(f, <span class="stringliteral">&quot;&lt;enclose:%&quot;</span>PRIxPTR<span class="stringliteral">&quot;&gt; &quot;</span>, (<a class="code" href="../../dc/db1/win32_8h.html#a0fbe4a4f8dd857ee04923a901f27465f">intptr_t</a>)node);
<a name="l06281"></a>06281     <span class="keywordflow">switch</span> (<a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)-&gt;type) {
<a name="l06282"></a>06282     <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a1f27f4cccd30502c03174673fe25af41">ENCLOSE_OPTION</a>:
<a name="l06283"></a>06283       fprintf(f, <span class="stringliteral">&quot;option:%d\n&quot;</span>, <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)-&gt;option);
<a name="l06284"></a>06284       print_indent_tree(f, <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)-&gt;target, indent + add);
<a name="l06285"></a>06285       <span class="keywordflow">break</span>;
<a name="l06286"></a>06286     <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a32e44d8ddaca8fd4931a8c13677972ad">ENCLOSE_MEMORY</a>:
<a name="l06287"></a>06287       fprintf(f, <span class="stringliteral">&quot;memory:%d&quot;</span>, <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)-&gt;regnum);
<a name="l06288"></a>06288       <span class="keywordflow">break</span>;
<a name="l06289"></a>06289     <span class="keywordflow">case</span> <a class="code" href="../../d1/dfc/regparse_8h.html#a8a9f973f8fdb597a604757521ae63fe2">ENCLOSE_STOP_BACKTRACK</a>:
<a name="l06290"></a>06290       fprintf(f, <span class="stringliteral">&quot;stop-bt&quot;</span>);
<a name="l06291"></a>06291       <span class="keywordflow">break</span>;
<a name="l06292"></a>06292 
<a name="l06293"></a>06293     <span class="keywordflow">default</span>:
<a name="l06294"></a>06294       <span class="keywordflow">break</span>;
<a name="l06295"></a>06295     }
<a name="l06296"></a>06296     fprintf(f, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l06297"></a>06297     print_indent_tree(f, <a class="code" href="../../d1/dfc/regparse_8h.html#a2fea29a34640f28158788eef43a9bfd2">NENCLOSE</a>(node)-&gt;target, indent + add);
<a name="l06298"></a>06298     <span class="keywordflow">break</span>;
<a name="l06299"></a>06299 
<a name="l06300"></a>06300   <span class="keywordflow">default</span>:
<a name="l06301"></a>06301     fprintf(f, <span class="stringliteral">&quot;print_indent_tree: undefined node type %d\n&quot;</span>, <a class="code" href="../../d1/dfc/regparse_8h.html#ad500a736993c4ddc933ff93b42eeb1e5">NTYPE</a>(node));
<a name="l06302"></a>06302     <span class="keywordflow">break</span>;
<a name="l06303"></a>06303   }
<a name="l06304"></a>06304 
<a name="l06305"></a>06305   <span class="keywordflow">if</span> (type != <a class="code" href="../../d1/dfc/regparse_8h.html#aba3b5392b65c7a886251ccb7bdf93cf0">NT_LIST</a> &amp;&amp; type != <a class="code" href="../../d1/dfc/regparse_8h.html#ae71a11e8c4757331e146c7c055c28294">NT_ALT</a> &amp;&amp; type != <a class="code" href="../../d1/dfc/regparse_8h.html#a307b2dd57583d60d4d89eae6478b69ab">NT_QTFR</a> &amp;&amp;
<a name="l06306"></a>06306       type != <a class="code" href="../../d1/dfc/regparse_8h.html#a28d3349039b07e17b82e258cd8f73897">NT_ENCLOSE</a>)
<a name="l06307"></a>06307     fprintf(f, <span class="stringliteral">&quot;\n&quot;</span>);
<a name="l06308"></a>06308 
<a name="l06309"></a>06309   <span class="keywordflow">if</span> (container_p) print_indent_tree(f, <a class="code" href="../../d1/dfc/regparse_8h.html#aff69a39d6dfe87d4eb079758e46cb226">NANCHOR</a>(node)-&gt;target, indent + add);
<a name="l06310"></a>06310 
<a name="l06311"></a>06311   fflush(f);
<a name="l06312"></a>06312 }
<a name="l06313"></a>06313 <span class="preprocessor">#endif </span><span class="comment">/* ONIG_DEBUG */</span>
<a name="l06314"></a>06314 
<a name="l06315"></a>06315 <span class="preprocessor">#ifdef ONIG_DEBUG_PARSE_TREE</span>
<a name="l06316"></a>06316 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l06317"></a>06317 print_tree(<a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a>* f, <a class="code" href="../../d0/d6e/struct___node.html">Node</a>* node)
<a name="l06318"></a>06318 {
<a name="l06319"></a>06319   print_indent_tree(f, node, 0);
<a name="l06320"></a>06320 }
<a name="l06321"></a>06321 <span class="preprocessor">#endif</span>
<a name="l06322"></a>06322 <span class="preprocessor"></span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Mar 2013 for Ruby by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
