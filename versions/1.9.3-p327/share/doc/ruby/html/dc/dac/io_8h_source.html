<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ruby: include/ruby/io.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="../../files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>include/ruby/io.h</h1><a href="../../dc/dac/io_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/**********************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"></span>
<a name="l00003"></a>00003 <span class="comment">  rubyio.h -</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment">  $Author: kosaki $</span>
<a name="l00006"></a>00006 <span class="comment">  created at: Fri Nov 12 16:47:09 JST 1993</span>
<a name="l00007"></a>00007 <span class="comment"></span>
<a name="l00008"></a>00008 <span class="comment">  Copyright (C) 1993-2007 Yukihiro Matsumoto</span>
<a name="l00009"></a>00009 <span class="comment"></span>
<a name="l00010"></a>00010 <span class="comment">**********************************************************************/</span>
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 <span class="preprocessor">#ifndef RUBY_IO_H</span>
<a name="l00013"></a><a class="code" href="../../dc/dac/io_8h.html#a1d1a7b51ffe30199a7f555bce881cd16">00013</a> <span class="preprocessor"></span><span class="preprocessor">#define RUBY_IO_H 1</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span>
<a name="l00015"></a>00015 <span class="preprocessor">#if defined(__cplusplus)</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l00017"></a>00017 <span class="preprocessor">#if 0</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span>} <span class="comment">/* satisfy cc-mode */</span>
<a name="l00019"></a>00019 <span class="preprocessor">#endif</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;errno.h&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="../../d5/de3/encoding_8h.html">ruby/encoding.h</a>&quot;</span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="preprocessor">#if defined(HAVE_STDIO_EXT_H)</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span><span class="preprocessor">#include &lt;stdio_ext.h&gt;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#endif</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;ruby/config.h&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#if defined(HAVE_POLL)</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;poll.h&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#  define RB_WAITFD_IN  POLLIN</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor">#  define RB_WAITFD_PRI POLLPRI</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor">#  define RB_WAITFD_OUT POLLOUT</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00037"></a><a class="code" href="../../dc/dac/io_8h.html#a8e8bb5fe44d8006f2b4efcb8211736bb">00037</a> <span class="preprocessor"></span><span class="preprocessor">#  define RB_WAITFD_IN  0x001</span>
<a name="l00038"></a><a class="code" href="../../dc/dac/io_8h.html#a6284f1969d45f86324b88488afbd40f7">00038</a> <span class="preprocessor"></span><span class="preprocessor">#  define RB_WAITFD_PRI 0x002</span>
<a name="l00039"></a><a class="code" href="../../dc/dac/io_8h.html#a399021080de1229d3202874624f9d853">00039</a> <span class="preprocessor"></span><span class="preprocessor">#  define RB_WAITFD_OUT 0x004</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span>
<a name="l00042"></a>00042 <span class="preprocessor">#if defined __GNUC__ &amp;&amp; __GNUC__ &gt;= 4</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC visibility push(default)</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00046"></a><a class="code" href="../../d7/d6b/structrb__io__buffer__t.html">00046</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00047"></a><a class="code" href="../../d7/d6b/structrb__io__buffer__t.html#a817f0d08e7fcb168e49fd7165a440ce1">00047</a>     <span class="keywordtype">char</span> *ptr;                  <span class="comment">/* off + len &lt;= capa */</span>
<a name="l00048"></a><a class="code" href="../../d7/d6b/structrb__io__buffer__t.html#ac28eb294504ec4b94ac09d6bcefe5127">00048</a>     <span class="keywordtype">int</span> off;
<a name="l00049"></a><a class="code" href="../../d7/d6b/structrb__io__buffer__t.html#a4d7a7af58ce1b4a5fb0c6c76f8186a05">00049</a>     <span class="keywordtype">int</span> <a class="code" href="../../d3/d15/name2ctype_8h.html#aed1cc4dca5d94cb452f79691f54f7423">len</a>;
<a name="l00050"></a><a class="code" href="../../d7/d6b/structrb__io__buffer__t.html#ac4a756c05d23c62903b5000a338adb53">00050</a>     <span class="keywordtype">int</span> capa;
<a name="l00051"></a>00051 } <a class="code" href="../../d7/d6b/structrb__io__buffer__t.html">rb_io_buffer_t</a>;
<a name="l00052"></a>00052 
<a name="l00053"></a><a class="code" href="../../dd/d7e/structrb__io__t.html">00053</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../dd/d7e/structrb__io__t.html">rb_io_t</a> {
<a name="l00054"></a><a class="code" href="../../dd/d7e/structrb__io__t.html#a0d48f8e91d24ff4f382564b30c1b41c2">00054</a>     <span class="keywordtype">int</span> <a class="code" href="../../dd/d7e/structrb__io__t.html#a0d48f8e91d24ff4f382564b30c1b41c2">fd</a>;                     <span class="comment">/* file descriptor */</span>
<a name="l00055"></a><a class="code" href="../../dd/d7e/structrb__io__t.html#a91479ddab1e86af11cdac57099dee7f5">00055</a>     <a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a> *<a class="code" href="../../dd/d7e/structrb__io__t.html#a91479ddab1e86af11cdac57099dee7f5">stdio_file</a>;           <span class="comment">/* stdio ptr for read/write if available */</span>
<a name="l00056"></a><a class="code" href="../../dd/d7e/structrb__io__t.html#aab130221afcebe4a7029434091ed6104">00056</a>     <span class="keywordtype">int</span> <a class="code" href="../../dd/d7e/structrb__io__t.html#aab130221afcebe4a7029434091ed6104">mode</a>;                   <span class="comment">/* mode flags: FMODE_XXXs */</span>
<a name="l00057"></a><a class="code" href="../../dd/d7e/structrb__io__t.html#a6080b18e6883f70d36a1c1554761ccfe">00057</a>     rb_pid_t <a class="code" href="../../dd/d7e/structrb__io__t.html#a6080b18e6883f70d36a1c1554761ccfe">pid</a>;               <span class="comment">/* child&apos;s pid (for pipes) */</span>
<a name="l00058"></a><a class="code" href="../../dd/d7e/structrb__io__t.html#a397be62fbdfe88a3763377f262241ca7">00058</a>     <span class="keywordtype">int</span> <a class="code" href="../../dd/d7e/structrb__io__t.html#a397be62fbdfe88a3763377f262241ca7">lineno</a>;                 <span class="comment">/* number of lines read */</span>
<a name="l00059"></a><a class="code" href="../../dd/d7e/structrb__io__t.html#aaaa2c729a8c1c1550505ea250338353e">00059</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dd/d7e/structrb__io__t.html#aaaa2c729a8c1c1550505ea250338353e">pathv</a>;                <span class="comment">/* pathname for file */</span>
<a name="l00060"></a>00060     void (*<a class="code" href="../../dd/d7e/structrb__io__t.html#a5a2f6f866626d12df82f61cf98401f8c">finalize</a>)(<span class="keyword">struct </span><a class="code" href="../../dd/d7e/structrb__io__t.html">rb_io_t</a>*,int); <span class="comment">/* finalize proc */</span>
<a name="l00061"></a>00061 
<a name="l00062"></a><a class="code" href="../../dd/d7e/structrb__io__t.html#a6d8c44388c98b9b92c47c2e9752a8dfe">00062</a>     <a class="code" href="../../d7/d6b/structrb__io__buffer__t.html">rb_io_buffer_t</a> <a class="code" href="../../dd/d7e/structrb__io__t.html#a6d8c44388c98b9b92c47c2e9752a8dfe">wbuf</a>, <a class="code" href="../../dd/d7e/structrb__io__t.html#afeb1762330048aede7e7383dee981304">rbuf</a>;
<a name="l00063"></a>00063 
<a name="l00064"></a><a class="code" href="../../dd/d7e/structrb__io__t.html#ad4507dbb812bff2064ead59f235039c2">00064</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dd/d7e/structrb__io__t.html#ad4507dbb812bff2064ead59f235039c2">tied_io_for_writing</a>;
<a name="l00065"></a>00065 
<a name="l00066"></a>00066     <span class="comment">/*</span>
<a name="l00067"></a>00067 <span class="comment">     * enc  enc2 read action                      write action</span>
<a name="l00068"></a>00068 <span class="comment">     * NULL NULL force_encoding(default_external) write the byte sequence of str</span>
<a name="l00069"></a>00069 <span class="comment">     * e1   NULL force_encoding(e1)               convert str.encoding to e1</span>
<a name="l00070"></a>00070 <span class="comment">     * e1   e2   convert from e2 to e1            convert str.encoding to e2</span>
<a name="l00071"></a>00071 <span class="comment">     */</span>
<a name="l00072"></a><a class="code" href="../../d7/d5d/structrb__io__t_1_1rb__io__enc__t.html">00072</a>     <span class="keyword">struct </span><a class="code" href="../../d7/d5d/structrb__io__t_1_1rb__io__enc__t.html">rb_io_enc_t</a> {
<a name="l00073"></a><a class="code" href="../../d7/d5d/structrb__io__t_1_1rb__io__enc__t.html#aab664f9aeefa4154aecac58de7587a6f">00073</a>         <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *<a class="code" href="../../d7/d5d/structrb__io__t_1_1rb__io__enc__t.html#aab664f9aeefa4154aecac58de7587a6f">enc</a>;
<a name="l00074"></a><a class="code" href="../../d7/d5d/structrb__io__t_1_1rb__io__enc__t.html#ace618f4461dc1e9fa0e5549e5c59c0fb">00074</a>         <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> *<a class="code" href="../../d7/d5d/structrb__io__t_1_1rb__io__enc__t.html#ace618f4461dc1e9fa0e5549e5c59c0fb">enc2</a>;
<a name="l00075"></a><a class="code" href="../../d7/d5d/structrb__io__t_1_1rb__io__enc__t.html#a6720fd379d1a21b53e4249089dfe505d">00075</a>         <span class="keywordtype">int</span> <a class="code" href="../../d7/d5d/structrb__io__t_1_1rb__io__enc__t.html#a6720fd379d1a21b53e4249089dfe505d">ecflags</a>;
<a name="l00076"></a><a class="code" href="../../d7/d5d/structrb__io__t_1_1rb__io__enc__t.html#acf2d77fd93f6b9d9ec76ad1313d2a8a9">00076</a>         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d7/d5d/structrb__io__t_1_1rb__io__enc__t.html#acf2d77fd93f6b9d9ec76ad1313d2a8a9">ecopts</a>;
<a name="l00077"></a>00077     } <a class="code" href="../../dd/d7e/structrb__io__t.html#adf64bf1f8a1cb22baf17da43266932cf">encs</a>;
<a name="l00078"></a>00078 
<a name="l00079"></a><a class="code" href="../../dd/d7e/structrb__io__t.html#a86265dc445995fd9696605aa78fe99be">00079</a>     <a class="code" href="../../d3/d06/structrb__econv__t.html">rb_econv_t</a> *<a class="code" href="../../dd/d7e/structrb__io__t.html#a86265dc445995fd9696605aa78fe99be">readconv</a>;
<a name="l00080"></a><a class="code" href="../../dd/d7e/structrb__io__t.html#aba43192a9eee3e82d3ea2793eb3dbdd9">00080</a>     <a class="code" href="../../d7/d6b/structrb__io__buffer__t.html">rb_io_buffer_t</a> <a class="code" href="../../dd/d7e/structrb__io__t.html#aba43192a9eee3e82d3ea2793eb3dbdd9">cbuf</a>;
<a name="l00081"></a>00081 
<a name="l00082"></a><a class="code" href="../../dd/d7e/structrb__io__t.html#a6078f27f1649b08a35ff32e642df4827">00082</a>     <a class="code" href="../../d3/d06/structrb__econv__t.html">rb_econv_t</a> *<a class="code" href="../../dd/d7e/structrb__io__t.html#a6078f27f1649b08a35ff32e642df4827">writeconv</a>;
<a name="l00083"></a><a class="code" href="../../dd/d7e/structrb__io__t.html#a8b6143bfe35f445d8564a71b547101ee">00083</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dd/d7e/structrb__io__t.html#a8b6143bfe35f445d8564a71b547101ee">writeconv_asciicompat</a>;
<a name="l00084"></a><a class="code" href="../../dd/d7e/structrb__io__t.html#aaccc1b6d4b005eda87fa017026fd2701">00084</a>     <span class="keywordtype">int</span> <a class="code" href="../../dd/d7e/structrb__io__t.html#aaccc1b6d4b005eda87fa017026fd2701">writeconv_pre_ecflags</a>;
<a name="l00085"></a><a class="code" href="../../dd/d7e/structrb__io__t.html#ac82d528d2dee6d4f0f880fa9526fa9a6">00085</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dd/d7e/structrb__io__t.html#ac82d528d2dee6d4f0f880fa9526fa9a6">writeconv_pre_ecopts</a>;
<a name="l00086"></a><a class="code" href="../../dd/d7e/structrb__io__t.html#a98a76b1e470573eb34ed020196db9ba0">00086</a>     <span class="keywordtype">int</span> <a class="code" href="../../dd/d7e/structrb__io__t.html#a98a76b1e470573eb34ed020196db9ba0">writeconv_initialized</a>;
<a name="l00087"></a>00087 
<a name="l00088"></a><a class="code" href="../../dd/d7e/structrb__io__t.html#ab6eade210f169f0a929e1381cbef947d">00088</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dd/d7e/structrb__io__t.html#ab6eade210f169f0a929e1381cbef947d">write_lock</a>;
<a name="l00089"></a>00089 } <a class="code" href="../../dd/d7e/structrb__io__t.html">rb_io_t</a>;
<a name="l00090"></a>00090 
<a name="l00091"></a><a class="code" href="../../dc/dac/io_8h.html#a30194a6df16efb90a381dedf416445d6">00091</a> <span class="preprocessor">#define HAVE_RB_IO_T 1</span>
<a name="l00092"></a>00092 <span class="preprocessor"></span>
<a name="l00093"></a><a class="code" href="../../dc/dac/io_8h.html#a00c37fcd07f39f8f5b374b94f91c7203">00093</a> <span class="preprocessor">#define FMODE_READABLE              0x00000001</span>
<a name="l00094"></a><a class="code" href="../../dc/dac/io_8h.html#a6c4c198b6b4a8bbc3659802101b6c3e8">00094</a> <span class="preprocessor"></span><span class="preprocessor">#define FMODE_WRITABLE              0x00000002</span>
<a name="l00095"></a><a class="code" href="../../dc/dac/io_8h.html#a289245342d513a229938e5f8700648b5">00095</a> <span class="preprocessor"></span><span class="preprocessor">#define FMODE_READWRITE             (FMODE_READABLE|FMODE_WRITABLE)</span>
<a name="l00096"></a><a class="code" href="../../dc/dac/io_8h.html#a7bd9a8d38431a018c8de1edd5829e14f">00096</a> <span class="preprocessor"></span><span class="preprocessor">#define FMODE_BINMODE               0x00000004</span>
<a name="l00097"></a><a class="code" href="../../dc/dac/io_8h.html#a95a89e4b35429fb51d7c3e52ec405d90">00097</a> <span class="preprocessor"></span><span class="preprocessor">#define FMODE_SYNC                  0x00000008</span>
<a name="l00098"></a><a class="code" href="../../dc/dac/io_8h.html#a40065fb3d48c5c13642ef3880efaaa03">00098</a> <span class="preprocessor"></span><span class="preprocessor">#define FMODE_TTY                   0x00000010</span>
<a name="l00099"></a><a class="code" href="../../dc/dac/io_8h.html#a7bba3fe65c0f4b33d346273792dddade">00099</a> <span class="preprocessor"></span><span class="preprocessor">#define FMODE_DUPLEX                0x00000020</span>
<a name="l00100"></a><a class="code" href="../../dc/dac/io_8h.html#a7a29604a28e82f69d9325405514be4a7">00100</a> <span class="preprocessor"></span><span class="preprocessor">#define FMODE_APPEND                0x00000040</span>
<a name="l00101"></a><a class="code" href="../../dc/dac/io_8h.html#a46de7b70411362002c8b92fb6a75382b">00101</a> <span class="preprocessor"></span><span class="preprocessor">#define FMODE_CREATE                0x00000080</span>
<a name="l00102"></a>00102 <span class="preprocessor"></span><span class="comment">/* #define FMODE_NOREVLOOKUP        0x00000100 */</span>
<a name="l00103"></a><a class="code" href="../../dc/dac/io_8h.html#ac4bc328ba5e87fac5381cf7b4afa7153">00103</a> <span class="preprocessor">#define FMODE_WSPLIT                0x00000200</span>
<a name="l00104"></a><a class="code" href="../../dc/dac/io_8h.html#a549273c107e35c00c202299a498bd758">00104</a> <span class="preprocessor"></span><span class="preprocessor">#define FMODE_WSPLIT_INITIALIZED    0x00000400</span>
<a name="l00105"></a><a class="code" href="../../dc/dac/io_8h.html#aced46a99b499f14f97bfe994746238cf">00105</a> <span class="preprocessor"></span><span class="preprocessor">#define FMODE_TRUNC                 0x00000800</span>
<a name="l00106"></a><a class="code" href="../../dc/dac/io_8h.html#aaf5edfb63656cca0368d0de8324015c1">00106</a> <span class="preprocessor"></span><span class="preprocessor">#define FMODE_TEXTMODE              0x00001000</span>
<a name="l00107"></a>00107 <span class="preprocessor"></span><span class="comment">/* #define FMODE_PREP               0x00010000 */</span>
<a name="l00108"></a><a class="code" href="../../dc/dac/io_8h.html#a1887ab1ec5253a5f363e78092a55348c">00108</a> <span class="preprocessor">#define FMODE_SETENC_BY_BOM         0x00100000</span>
<a name="l00109"></a>00109 <span class="preprocessor"></span>
<a name="l00110"></a><a class="code" href="../../dc/dac/io_8h.html#aa00f0dca97539a5dd0c4e67ad5be93a3">00110</a> <span class="preprocessor">#define GetOpenFile(obj,fp) rb_io_check_closed((fp) = RFILE(rb_io_taint_check(obj))-&gt;fptr)</span>
<a name="l00111"></a>00111 <span class="preprocessor"></span>
<a name="l00112"></a><a class="code" href="../../dc/dac/io_8h.html#a50a11c1afcd3899ebe8706ef1890850f">00112</a> <span class="preprocessor">#define RB_IO_BUFFER_INIT(buf) do {\</span>
<a name="l00113"></a>00113 <span class="preprocessor">    (buf).ptr = NULL;\</span>
<a name="l00114"></a>00114 <span class="preprocessor">    (buf).off = 0;\</span>
<a name="l00115"></a>00115 <span class="preprocessor">    (buf).len = 0;\</span>
<a name="l00116"></a>00116 <span class="preprocessor">    (buf).capa = 0;\</span>
<a name="l00117"></a>00117 <span class="preprocessor">} while (0)</span>
<a name="l00118"></a>00118 <span class="preprocessor"></span>
<a name="l00119"></a><a class="code" href="../../dc/dac/io_8h.html#a806072dc06b95702f12c2d59e815cfde">00119</a> <span class="preprocessor">#define MakeOpenFile(obj, fp) do {\</span>
<a name="l00120"></a>00120 <span class="preprocessor">    if (RFILE(obj)-&gt;fptr) {\</span>
<a name="l00121"></a>00121 <span class="preprocessor">        rb_io_close(obj);\</span>
<a name="l00122"></a>00122 <span class="preprocessor">        rb_io_fptr_finalize(RFILE(obj)-&gt;fptr);\</span>
<a name="l00123"></a>00123 <span class="preprocessor">        RFILE(obj)-&gt;fptr = 0;\</span>
<a name="l00124"></a>00124 <span class="preprocessor">    }\</span>
<a name="l00125"></a>00125 <span class="preprocessor">    (fp) = 0;\</span>
<a name="l00126"></a>00126 <span class="preprocessor">    RB_IO_FPTR_NEW(fp);\</span>
<a name="l00127"></a>00127 <span class="preprocessor">    RFILE(obj)-&gt;fptr = (fp);\</span>
<a name="l00128"></a>00128 <span class="preprocessor">} while (0)</span>
<a name="l00129"></a>00129 <span class="preprocessor"></span>
<a name="l00130"></a><a class="code" href="../../dc/dac/io_8h.html#afdc7cc0df5a379ef40a172fc9c408d83">00130</a> <span class="preprocessor">#define RB_IO_FPTR_NEW(fp) do {\</span>
<a name="l00131"></a>00131 <span class="preprocessor">    (fp) = ALLOC(rb_io_t);\</span>
<a name="l00132"></a>00132 <span class="preprocessor">    (fp)-&gt;fd = -1;\</span>
<a name="l00133"></a>00133 <span class="preprocessor">    (fp)-&gt;stdio_file = NULL;\</span>
<a name="l00134"></a>00134 <span class="preprocessor">    (fp)-&gt;mode = 0;\</span>
<a name="l00135"></a>00135 <span class="preprocessor">    (fp)-&gt;pid = 0;\</span>
<a name="l00136"></a>00136 <span class="preprocessor">    (fp)-&gt;lineno = 0;\</span>
<a name="l00137"></a>00137 <span class="preprocessor">    (fp)-&gt;pathv = Qnil;\</span>
<a name="l00138"></a>00138 <span class="preprocessor">    (fp)-&gt;finalize = 0;\</span>
<a name="l00139"></a>00139 <span class="preprocessor">    RB_IO_BUFFER_INIT((fp)-&gt;wbuf);\</span>
<a name="l00140"></a>00140 <span class="preprocessor">    RB_IO_BUFFER_INIT((fp)-&gt;rbuf);\</span>
<a name="l00141"></a>00141 <span class="preprocessor">    RB_IO_BUFFER_INIT((fp)-&gt;cbuf);\</span>
<a name="l00142"></a>00142 <span class="preprocessor">    (fp)-&gt;readconv = NULL;\</span>
<a name="l00143"></a>00143 <span class="preprocessor">    (fp)-&gt;writeconv = NULL;\</span>
<a name="l00144"></a>00144 <span class="preprocessor">    (fp)-&gt;writeconv_asciicompat = Qnil;\</span>
<a name="l00145"></a>00145 <span class="preprocessor">    (fp)-&gt;writeconv_pre_ecflags = 0;\</span>
<a name="l00146"></a>00146 <span class="preprocessor">    (fp)-&gt;writeconv_pre_ecopts = Qnil;\</span>
<a name="l00147"></a>00147 <span class="preprocessor">    (fp)-&gt;writeconv_initialized = 0;\</span>
<a name="l00148"></a>00148 <span class="preprocessor">    (fp)-&gt;tied_io_for_writing = 0;\</span>
<a name="l00149"></a>00149 <span class="preprocessor">    (fp)-&gt;encs.enc = NULL;\</span>
<a name="l00150"></a>00150 <span class="preprocessor">    (fp)-&gt;encs.enc2 = NULL;\</span>
<a name="l00151"></a>00151 <span class="preprocessor">    (fp)-&gt;encs.ecflags = 0;\</span>
<a name="l00152"></a>00152 <span class="preprocessor">    (fp)-&gt;encs.ecopts = Qnil;\</span>
<a name="l00153"></a>00153 <span class="preprocessor">    (fp)-&gt;write_lock = 0;\</span>
<a name="l00154"></a>00154 <span class="preprocessor">} while (0)</span>
<a name="l00155"></a>00155 <span class="preprocessor"></span>
<a name="l00156"></a>00156 <a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a> *<a class="code" href="../../dc/dac/io_8h.html#a5a0d6757d5f6624ea43d72323e1cb76f">rb_io_stdio_file</a>(<a class="code" href="../../dd/d7e/structrb__io__t.html">rb_io_t</a> *fptr);
<a name="l00157"></a>00157 
<a name="l00158"></a>00158 <a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a> *<a class="code" href="../../dc/dac/io_8h.html#a07c2492c65dc6094210adc71cb362c72">rb_fdopen</a>(<span class="keywordtype">int</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>*);
<a name="l00159"></a>00159 <span class="keywordtype">int</span> <a class="code" href="../../dc/dac/io_8h.html#a0c32c67101e6698b9b314041ac5025f4">rb_io_modestr_fmode</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *modestr);
<a name="l00160"></a>00160 <span class="keywordtype">int</span> <a class="code" href="../../dc/dac/io_8h.html#a18815b569044e1ffbe48c093ed7efd1f">rb_io_modestr_oflags</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *modestr);
<a name="l00161"></a>00161 <span class="keywordtype">int</span> <a class="code" href="../../dc/dac/io_8h.html#a5c81f2aab2c1cf43fe65b926f8a5bd73">rb_io_oflags_fmode</a>(<span class="keywordtype">int</span> oflags);
<a name="l00162"></a>00162 <span class="keywordtype">void</span> <a class="code" href="../../dc/dac/io_8h.html#a728977df67c656197402bb30a14af953">rb_io_check_writable</a>(<a class="code" href="../../dd/d7e/structrb__io__t.html">rb_io_t</a>*);
<a name="l00163"></a>00163 <span class="keywordtype">void</span> <a class="code" href="../../dc/dac/io_8h.html#a8557569435da7f8a669908723fcd5e94">rb_io_check_readable</a>(<a class="code" href="../../dd/d7e/structrb__io__t.html">rb_io_t</a>*);
<a name="l00164"></a>00164 <span class="keywordtype">void</span> <a class="code" href="../../dc/dac/io_8h.html#acbd19ff86a565ed9e9f15e4f49736f3d">rb_io_check_char_readable</a>(<a class="code" href="../../dd/d7e/structrb__io__t.html">rb_io_t</a> *fptr);
<a name="l00165"></a>00165 <span class="keywordtype">void</span> <a class="code" href="../../dc/dac/io_8h.html#a38b3a618992ee85d5510dc70db4e2b36">rb_io_check_byte_readable</a>(<a class="code" href="../../dd/d7e/structrb__io__t.html">rb_io_t</a> *fptr);
<a name="l00166"></a>00166 <span class="keywordtype">int</span> <a class="code" href="../../dc/dac/io_8h.html#a6fc4023c7b0bced3b799f7300913de28">rb_io_fptr_finalize</a>(<a class="code" href="../../dd/d7e/structrb__io__t.html">rb_io_t</a>*);
<a name="l00167"></a>00167 <span class="keywordtype">void</span> <a class="code" href="../../dc/dac/io_8h.html#aeb14fb21179cb04f2a87dec384f8236b">rb_io_synchronized</a>(<a class="code" href="../../dd/d7e/structrb__io__t.html">rb_io_t</a>*);
<a name="l00168"></a>00168 <span class="keywordtype">void</span> <a class="code" href="../../dc/dac/io_8h.html#af5b8dfbd6b4a542196867145faaa35f5">rb_io_check_initialized</a>(<a class="code" href="../../dd/d7e/structrb__io__t.html">rb_io_t</a>*);
<a name="l00169"></a>00169 <span class="keywordtype">void</span> <a class="code" href="../../dc/dac/io_8h.html#a6b4f0c0735ecb278abd3f63059b5fc48">rb_io_check_closed</a>(<a class="code" href="../../dd/d7e/structrb__io__t.html">rb_io_t</a>*);
<a name="l00170"></a>00170 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../db/d2e/intern_8h.html#abc8a40f163cccdca6e3b9c0db7ed24b3">rb_io_get_io</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> io);
<a name="l00171"></a>00171 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dc/dac/io_8h.html#ad2562db4d858dc312c9a189e8470b96a">rb_io_get_write_io</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> io);
<a name="l00172"></a>00172 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dc/dac/io_8h.html#ae2ca9d075a7f1188906d9e23ed053bf5">rb_io_set_write_io</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> io, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> w);
<a name="l00173"></a>00173 <span class="keywordtype">int</span> <a class="code" href="../../dc/dac/io_8h.html#aef370f8ba67623893a3b559bf27b30e3">rb_io_wait_readable</a>(<span class="keywordtype">int</span>);
<a name="l00174"></a>00174 <span class="keywordtype">int</span> <a class="code" href="../../dc/dac/io_8h.html#af28a170d3ffb07353653f832d95c6ba6">rb_io_wait_writable</a>(<span class="keywordtype">int</span>);
<a name="l00175"></a>00175 <span class="keywordtype">int</span> <a class="code" href="../../dc/dac/io_8h.html#a5d928dd718bfee4b74deb87c1e82efd6">rb_wait_for_single_fd</a>(<span class="keywordtype">int</span> fd, <span class="keywordtype">int</span> events, <span class="keyword">struct</span> <a class="code" href="../../d1/d1b/structtimeval.html">timeval</a> *tv);
<a name="l00176"></a>00176 <span class="keywordtype">void</span> <a class="code" href="../../dc/dac/io_8h.html#ad3cd1cfd937d36dfeb7d0f2f4aeb08ab">rb_io_set_nonblock</a>(<a class="code" href="../../dd/d7e/structrb__io__t.html">rb_io_t</a> *fptr);
<a name="l00177"></a>00177 <span class="keywordtype">int</span> <a class="code" href="../../dc/dac/io_8h.html#a51c36b8e9d3a677016832864186cc72d">rb_io_extract_encoding_option</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> opt, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> **enc_p, <a class="code" href="../../d1/d7b/struct_onig_encoding_type_s_t.html">rb_encoding</a> **enc2_p, <span class="keywordtype">int</span> *fmode_p);
<a name="l00178"></a>00178 ssize_t <a class="code" href="../../dc/dac/io_8h.html#ac498ae6e389ece41fbcddd87a974677f">rb_io_bufwrite</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> io, <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="../../d6/da0/nkf-utf8_2nkf_8c.html#ac37f17a60c8b5533aac4840c681f62b8">buf</a>, <span class="keywordtype">size_t</span> <a class="code" href="../../d5/db5/encoding_8c.html#a439227feff9d7f55384e8780cfc2eb82">size</a>);
<a name="l00179"></a>00179 
<a name="l00180"></a>00180 <span class="comment">/* compatibility for ruby 1.8 and older */</span>
<a name="l00181"></a><a class="code" href="../../dc/dac/io_8h.html#a4e14e8a6e7270c83c3df42307ba89cbc">00181</a> <span class="preprocessor">#define rb_io_mode_flags(modestr) rb_io_modestr_fmode(modestr)</span>
<a name="l00182"></a><a class="code" href="../../dc/dac/io_8h.html#a47475442f66e56c7e18315aec5d23325">00182</a> <span class="preprocessor"></span><span class="preprocessor">#define rb_io_modenum_flags(oflags) rb_io_oflags_fmode(oflags)</span>
<a name="l00183"></a>00183 <span class="preprocessor"></span>
<a name="l00184"></a>00184 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dc/dac/io_8h.html#a68e7deaa22cac98e654c80bd7fe187f4">rb_io_taint_check</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>);
<a name="l00185"></a>00185 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a7a711d5127a34da8c3ed48f401579289">NORETURN</a>(<span class="keywordtype">void</span> <a class="code" href="../../df/d0a/io_8c.html#af29c366cc0b8091e08b0c2f5b32ca59f">rb_eof_error</a>(<span class="keywordtype">void</span>));
<a name="l00186"></a>00186 
<a name="l00187"></a>00187 <span class="keywordtype">void</span> <a class="code" href="../../dc/dac/io_8h.html#ac54adfb185a404954c702527ee9063af">rb_io_read_check</a>(<a class="code" href="../../dd/d7e/structrb__io__t.html">rb_io_t</a>*);
<a name="l00188"></a>00188 <span class="keywordtype">int</span> <a class="code" href="../../dc/dac/io_8h.html#a88e47151779c6afecd2b4a13956d80c9">rb_io_read_pending</a>(<a class="code" href="../../dd/d7e/structrb__io__t.html">rb_io_t</a>*);
<a name="l00189"></a>00189 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#af7790a2853e7a515c5750cba0726ce6e">DEPRECATED</a>(<span class="keywordtype">void</span> <a class="code" href="../../df/d0a/io_8c.html#ad3eba03cd96f7d2b91cd9142ff437ace">rb_read_check</a>(<a class="code" href="../../db/ddf/struct____s_f_i_l_e.html">FILE</a>*));
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 <span class="preprocessor">#if defined __GNUC__ &amp;&amp; __GNUC__ &gt;= 4</span>
<a name="l00192"></a>00192 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC visibility pop</span>
<a name="l00193"></a>00193 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00194"></a>00194 <span class="preprocessor"></span>
<a name="l00195"></a>00195 <span class="preprocessor">#if defined(__cplusplus)</span>
<a name="l00196"></a>00196 <span class="preprocessor"></span><span class="preprocessor">#if 0</span>
<a name="l00197"></a>00197 <span class="preprocessor"></span>{ <span class="comment">/* satisfy cc-mode */</span>
<a name="l00198"></a>00198 <span class="preprocessor">#endif</span>
<a name="l00199"></a>00199 <span class="preprocessor"></span>}  <span class="comment">/* extern &quot;C&quot; { */</span>
<a name="l00200"></a>00200 <span class="preprocessor">#endif</span>
<a name="l00201"></a>00201 <span class="preprocessor"></span>
<a name="l00202"></a>00202 <span class="preprocessor">#endif </span><span class="comment">/* RUBY_IO_H */</span>
<a name="l00203"></a>00203 
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Mar 2013 for Ruby by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
