<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Ruby: vm_core.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="../../index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="../../files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="../../globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>vm_core.h</h1><a href="../../d8/d32/vm__core_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/**********************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"></span>
<a name="l00003"></a>00003 <span class="comment">  vm_core.h -</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment">  $Author: naruse $</span>
<a name="l00006"></a>00006 <span class="comment">  created at: 04/01/01 19:41:38 JST</span>
<a name="l00007"></a>00007 <span class="comment"></span>
<a name="l00008"></a>00008 <span class="comment">  Copyright (C) 2004-2007 Koichi Sasada</span>
<a name="l00009"></a>00009 <span class="comment"></span>
<a name="l00010"></a>00010 <span class="comment">**********************************************************************/</span>
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 <span class="preprocessor">#ifndef RUBY_VM_CORE_H</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span><span class="preprocessor">#define RUBY_VM_CORE_H</span>
<a name="l00014"></a>00014 <span class="preprocessor"></span>
<a name="l00015"></a><a class="code" href="../../d8/d32/vm__core_8h.html#ab88fa18a65fcc8d337f546b2bedb3dcc">00015</a> <span class="preprocessor">#define RUBY_VM_THREAD_MODEL 2</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &quot;<a class="code" href="../../de/de6/ruby_2ruby_8h.html">ruby/ruby.h</a>&quot;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/d24/st_8h.html">ruby/st.h</a>&quot;</span>
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d77/node_8h.html">node.h</a>&quot;</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &quot;<a class="code" href="../../db/d16/debug_8h.html">debug.h</a>&quot;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="../../dc/d92/vm__opts_8h.html">vm_opts.h</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="../../df/db9/id_8h.html">id.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="../../db/d0a/method_8h.html">method.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="../../dd/d02/atomic_8h.html">atomic.h</a>&quot;</span>
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 <span class="preprocessor">#if   defined(_WIN32)</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="../../d7/de8/thread__win32_8h.html">thread_win32.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#elif defined(HAVE_PTHREAD_H)</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="../../d2/d82/thread__pthread_8h.html">thread_pthread.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#else</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor">#error &quot;unsupported thread type&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span>
<a name="l00035"></a>00035 <span class="preprocessor">#ifndef ENABLE_VM_OBJSPACE</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="preprocessor">#ifdef _WIN32</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span><span class="comment">/*</span>
<a name="l00038"></a>00038 <span class="comment"> * TODO: object space independent st_table.</span>
<a name="l00039"></a>00039 <span class="comment"> * socklist needs st_table in rb_w32_sysinit(), before object space</span>
<a name="l00040"></a>00040 <span class="comment"> * initialization.</span>
<a name="l00041"></a>00041 <span class="comment"> * It is too early now to change st_hash_type, since it breaks binary</span>
<a name="l00042"></a>00042 <span class="comment"> * compatibility.</span>
<a name="l00043"></a>00043 <span class="comment"> */</span>
<a name="l00044"></a>00044 <span class="preprocessor">#define ENABLE_VM_OBJSPACE 0</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00046"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a3a96731889b14590bd47ddd564a7e815">00046</a> <span class="preprocessor"></span><span class="preprocessor">#define ENABLE_VM_OBJSPACE 1</span>
<a name="l00047"></a>00047 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &lt;setjmp.h&gt;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &lt;signal.h&gt;</span>
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 <span class="preprocessor">#ifndef NSIG</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span><span class="preprocessor"># define NSIG (_SIGMAX + 1)      </span><span class="comment">/* For QNX */</span>
<a name="l00055"></a>00055 <span class="preprocessor">#endif</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>
<a name="l00057"></a><a class="code" href="../../d8/d32/vm__core_8h.html#ae435941bb169c44f47dbc7f93a93f3db">00057</a> <span class="preprocessor">#define RUBY_NSIG NSIG</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span>
<a name="l00059"></a>00059 <span class="preprocessor">#ifdef HAVE_STDARG_PROTOTYPES</span>
<a name="l00060"></a>00060 <span class="preprocessor"></span><span class="preprocessor">#include &lt;stdarg.h&gt;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#define va_init_list(a,b) va_start((a),(b))</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span><span class="preprocessor">#include &lt;varargs.h&gt;</span>
<a name="l00064"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a3a0a28ba6e22644006c9bafb793f8a2c">00064</a> <span class="preprocessor">#define va_init_list(a,b) va_start((a))</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span>
<a name="l00067"></a>00067 <span class="preprocessor">#if defined(SIGSEGV) &amp;&amp; defined(HAVE_SIGALTSTACK) &amp;&amp; defined(SA_SIGINFO) &amp;&amp; !defined(__NetBSD__)</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span><span class="preprocessor">#define USE_SIGALTSTACK</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00070"></a>00070 <span class="preprocessor"></span>
<a name="l00071"></a>00071 <span class="comment">/*****************/</span>
<a name="l00072"></a>00072 <span class="comment">/* configuration */</span>
<a name="l00073"></a>00073 <span class="comment">/*****************/</span>
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 <span class="comment">/* gcc ver. check */</span>
<a name="l00076"></a>00076 <span class="preprocessor">#if defined(__GNUC__) &amp;&amp; __GNUC__ &gt;= 2</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00078"></a>00078 <span class="preprocessor">#if OPT_TOKEN_THREADED_CODE</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span><span class="preprocessor">#if OPT_DIRECT_THREADED_CODE</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span><span class="preprocessor">#undef OPT_DIRECT_THREADED_CODE</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00082"></a>00082 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span>
<a name="l00084"></a>00084 <span class="preprocessor">#else </span><span class="comment">/* defined(__GNUC__) &amp;&amp; __GNUC__ &gt;= 2 */</span>
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <span class="comment">/* disable threaded code options */</span>
<a name="l00087"></a>00087 <span class="preprocessor">#if OPT_DIRECT_THREADED_CODE</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span><span class="preprocessor">#undef OPT_DIRECT_THREADED_CODE</span>
<a name="l00089"></a>00089 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00090"></a>00090 <span class="preprocessor"></span><span class="preprocessor">#if OPT_TOKEN_THREADED_CODE</span>
<a name="l00091"></a>00091 <span class="preprocessor"></span><span class="preprocessor">#undef OPT_TOKEN_THREADED_CODE</span>
<a name="l00092"></a>00092 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00093"></a>00093 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00094"></a>00094 <span class="preprocessor"></span>
<a name="l00095"></a>00095 <span class="comment">/* call threaded code */</span>
<a name="l00096"></a>00096 <span class="preprocessor">#if    OPT_CALL_THREADED_CODE</span>
<a name="l00097"></a>00097 <span class="preprocessor"></span><span class="preprocessor">#if    OPT_DIRECT_THREADED_CODE</span>
<a name="l00098"></a>00098 <span class="preprocessor"></span><span class="preprocessor">#undef OPT_DIRECT_THREADED_CODE</span>
<a name="l00099"></a>00099 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* OPT_DIRECT_THREADED_CODE */</span>
<a name="l00100"></a>00100 <span class="preprocessor">#if    OPT_STACK_CACHING</span>
<a name="l00101"></a>00101 <span class="preprocessor"></span><span class="preprocessor">#undef OPT_STACK_CACHING</span>
<a name="l00102"></a>00102 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* OPT_STACK_CACHING */</span>
<a name="l00103"></a>00103 <span class="preprocessor">#endif </span><span class="comment">/* OPT_CALL_THREADED_CODE */</span>
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 <span class="comment">/* likely */</span>
<a name="l00106"></a>00106 <span class="preprocessor">#if __GNUC__ &gt;= 3</span>
<a name="l00107"></a>00107 <span class="preprocessor"></span><span class="preprocessor">#define LIKELY(x)   (__builtin_expect((x), 1))</span>
<a name="l00108"></a>00108 <span class="preprocessor"></span><span class="preprocessor">#define UNLIKELY(x) (__builtin_expect((x), 0))</span>
<a name="l00109"></a>00109 <span class="preprocessor"></span><span class="preprocessor">#else </span><span class="comment">/* __GNUC__ &gt;= 3 */</span>
<a name="l00110"></a><a class="code" href="../../d8/d32/vm__core_8h.html#affde14445f49f65ff4f5b592e44ee71a">00110</a> <span class="preprocessor">#define LIKELY(x)   (x)</span>
<a name="l00111"></a><a class="code" href="../../d8/d32/vm__core_8h.html#ab10d0a221f4d7a706701b806c8135fd7">00111</a> <span class="preprocessor"></span><span class="preprocessor">#define UNLIKELY(x) (x)</span>
<a name="l00112"></a>00112 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* __GNUC__ &gt;= 3 */</span>
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 <span class="preprocessor">#if __GNUC__ &gt;= 3</span>
<a name="l00115"></a>00115 <span class="preprocessor"></span><span class="preprocessor">#define UNINITIALIZED_VAR(x) x = x</span>
<a name="l00116"></a>00116 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00117"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a4fe18c662a7b518d966f50f6f412a9aa">00117</a> <span class="preprocessor"></span><span class="preprocessor">#define UNINITIALIZED_VAR(x) x</span>
<a name="l00118"></a>00118 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00119"></a>00119 <span class="preprocessor"></span>
<a name="l00120"></a><a class="code" href="../../d8/d32/vm__core_8h.html#afa3629f5cb977b24532d09e1aa055e4a">00120</a> <span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="../../d8/d32/vm__core_8h.html#afa3629f5cb977b24532d09e1aa055e4a">rb_num_t</a>;
<a name="l00121"></a>00121 
<a name="l00122"></a>00122 <span class="comment">/* iseq data type */</span>
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 <span class="keyword">struct </span><a class="code" href="../../d6/dca/structiseq__compile__data__ensure__node__stack.html">iseq_compile_data_ensure_node_stack</a>;
<a name="l00125"></a>00125 
<a name="l00126"></a><a class="code" href="../../d8/d32/vm__core_8h.html#ad55ee26c082bff2ff4bc7d9f67b20a63">00126</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../db/dc1/structrb__compile__option__struct.html">rb_compile_option_struct</a> <a class="code" href="../../db/dc1/structrb__compile__option__struct.html">rb_compile_option_t</a>;
<a name="l00127"></a>00127 
<a name="l00128"></a><a class="code" href="../../d7/d2a/structiseq__inline__cache__entry.html">00128</a> <span class="keyword">struct </span><a class="code" href="../../d7/d2a/structiseq__inline__cache__entry.html">iseq_inline_cache_entry</a> {
<a name="l00129"></a><a class="code" href="../../d7/d2a/structiseq__inline__cache__entry.html#a13673073384a1eecfc927d735ae7232c">00129</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d7/d2a/structiseq__inline__cache__entry.html#a13673073384a1eecfc927d735ae7232c">ic_vmstat</a>;
<a name="l00130"></a><a class="code" href="../../d7/d2a/structiseq__inline__cache__entry.html#aabe1d3bd12d1fda8d6faae2e0366f5d6">00130</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d7/d2a/structiseq__inline__cache__entry.html#aabe1d3bd12d1fda8d6faae2e0366f5d6">ic_class</a>;
<a name="l00131"></a>00131     <span class="keyword">union </span>{
<a name="l00132"></a><a class="code" href="../../d7/d2a/structiseq__inline__cache__entry.html#ac924de4512ff4b60c877be4776228b0c">00132</a>         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d7/d2a/structiseq__inline__cache__entry.html#ac924de4512ff4b60c877be4776228b0c">value</a>;
<a name="l00133"></a><a class="code" href="../../d7/d2a/structiseq__inline__cache__entry.html#afe485ee1e6c1127a5512d3ec8c43d6a6">00133</a>         <a class="code" href="../../d7/db7/structrb__method__entry__struct.html">rb_method_entry_t</a> *<a class="code" href="../../d7/d2a/structiseq__inline__cache__entry.html#afe485ee1e6c1127a5512d3ec8c43d6a6">method</a>;
<a name="l00134"></a><a class="code" href="../../d7/d2a/structiseq__inline__cache__entry.html#a992c129b7222697c6df2ce65e4544cb9">00134</a>         <span class="keywordtype">long</span> <a class="code" href="../../d7/d2a/structiseq__inline__cache__entry.html#a992c129b7222697c6df2ce65e4544cb9">index</a>;
<a name="l00135"></a>00135     } <a class="code" href="../../d7/d2a/structiseq__inline__cache__entry.html#a6a0b3d01303bc9c72508d875abf11ad6">ic_value</a>;
<a name="l00136"></a>00136 };
<a name="l00137"></a>00137 
<a name="l00138"></a>00138 <span class="preprocessor">#if 1</span>
<a name="l00139"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a526d547f1928bb95f24fa2fb99c0c7df">00139</a> <span class="preprocessor"></span><span class="preprocessor">#define GetCoreDataFromValue(obj, type, ptr) do { \</span>
<a name="l00140"></a>00140 <span class="preprocessor">    (ptr) = (type*)DATA_PTR(obj); \</span>
<a name="l00141"></a>00141 <span class="preprocessor">} while (0)</span>
<a name="l00142"></a>00142 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00143"></a>00143 <span class="preprocessor"></span><span class="preprocessor">#define GetCoreDataFromValue(obj, type, ptr) Data_Get_Struct((obj), type, (ptr))</span>
<a name="l00144"></a>00144 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00145"></a>00145 <span class="preprocessor"></span>
<a name="l00146"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a5e6a3515e0ad9b9d6a4c0ab577dc50b6">00146</a> <span class="preprocessor">#define GetISeqPtr(obj, ptr) \</span>
<a name="l00147"></a>00147 <span class="preprocessor">  GetCoreDataFromValue((obj), rb_iseq_t, (ptr))</span>
<a name="l00148"></a>00148 <span class="preprocessor"></span>
<a name="l00149"></a>00149 <span class="keyword">struct </span><a class="code" href="../../d6/de3/structrb__iseq__struct.html">rb_iseq_struct</a>;
<a name="l00150"></a>00150 
<a name="l00151"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html">00151</a> <span class="keyword">struct </span><a class="code" href="../../d6/de3/structrb__iseq__struct.html">rb_iseq_struct</a> {
<a name="l00152"></a>00152     <span class="comment">/***************/</span>
<a name="l00153"></a>00153     <span class="comment">/* static data */</span>
<a name="l00154"></a>00154     <span class="comment">/***************/</span>
<a name="l00155"></a>00155 
<a name="l00156"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98a">00156</a>     <span class="keyword">enum</span> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98a">iseq_type</a> {
<a name="l00157"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aac86ea1b83dd57ebc9144c230ce7a8f53">00157</a>         <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aac86ea1b83dd57ebc9144c230ce7a8f53">ISEQ_TYPE_TOP</a>,
<a name="l00158"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aa99e08d433afbe13d6664e9802938b597">00158</a>         <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aa99e08d433afbe13d6664e9802938b597">ISEQ_TYPE_METHOD</a>,
<a name="l00159"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aa3c48236fe0b8d8b30959fdbaa2e977c9">00159</a>         <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aa3c48236fe0b8d8b30959fdbaa2e977c9">ISEQ_TYPE_BLOCK</a>,
<a name="l00160"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aae2a119dae774fd20c7e424b4ec9e217a">00160</a>         <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aae2a119dae774fd20c7e424b4ec9e217a">ISEQ_TYPE_CLASS</a>,
<a name="l00161"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aa72c8f464a7946f7abaf3012c7f681032">00161</a>         <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aa72c8f464a7946f7abaf3012c7f681032">ISEQ_TYPE_RESCUE</a>,
<a name="l00162"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aab749291dc33d9de16f43d12b5af0ce0e">00162</a>         <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aab749291dc33d9de16f43d12b5af0ce0e">ISEQ_TYPE_ENSURE</a>,
<a name="l00163"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aa79b34fd0a61af0ee65c55507e8a7bab1">00163</a>         <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aa79b34fd0a61af0ee65c55507e8a7bab1">ISEQ_TYPE_EVAL</a>,
<a name="l00164"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aab9872f2dcc2f55be52d7a59b1dcac83e">00164</a>         <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aab9872f2dcc2f55be52d7a59b1dcac83e">ISEQ_TYPE_MAIN</a>,
<a name="l00165"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aaaeaadcc1250374e0f588b2aebdab66f9">00165</a>         <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a488ae5668eef9d3bdd5834b507a5a98aaaeaadcc1250374e0f588b2aebdab66f9">ISEQ_TYPE_DEFINED_GUARD</a>
<a name="l00166"></a>00166     } <a class="code" href="../../d6/de3/structrb__iseq__struct.html#af8bc7dbae6f61d836b5bb9fb50b6cfb8">type</a>;              <span class="comment">/* instruction sequence type */</span>
<a name="l00167"></a>00167 
<a name="l00168"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a35596da255ce28a5d1da94c2cc508c7d">00168</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a35596da255ce28a5d1da94c2cc508c7d">name</a>;          <span class="comment">/* String: iseq name */</span>
<a name="l00169"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a06859fa5de56f2ede3cb692f1d9215e2">00169</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a06859fa5de56f2ede3cb692f1d9215e2">filename</a>;      <span class="comment">/* file information where this sequence from */</span>
<a name="l00170"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a17a1f78d074c52567cb0b5c3d6aa43bb">00170</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a17a1f78d074c52567cb0b5c3d6aa43bb">filepath</a>;      <span class="comment">/* real file path or nil */</span>
<a name="l00171"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a8699ab44e2c44e7f8df87e26a9c7bee8">00171</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *<a class="code" href="../../d6/de3/structrb__iseq__struct.html#a8699ab44e2c44e7f8df87e26a9c7bee8">iseq</a>;         <span class="comment">/* iseq (insn number and operands) */</span>
<a name="l00172"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#aa70f3e195a4350acbbc130f8a95c9958">00172</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *<a class="code" href="../../d6/de3/structrb__iseq__struct.html#aa70f3e195a4350acbbc130f8a95c9958">iseq_encoded</a>; <span class="comment">/* encoded iseq */</span>
<a name="l00173"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a6fd527787fc64d5e9d11478af447a85f">00173</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a6fd527787fc64d5e9d11478af447a85f">iseq_size</a>;
<a name="l00174"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a6da853dddaa2899bf03c6d343f025ea9">00174</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a6da853dddaa2899bf03c6d343f025ea9">mark_ary</a>;     <span class="comment">/* Array: includes operands which should be GC marked */</span>
<a name="l00175"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a8c526b5fdc454245f388c19f051cdaf8">00175</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a8c526b5fdc454245f388c19f051cdaf8">coverage</a>;     <span class="comment">/* coverage array */</span>
<a name="l00176"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a9000b0748482a5d58f449b11924db4ac">00176</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a9000b0748482a5d58f449b11924db4ac">line_no</a>;
<a name="l00177"></a>00177 
<a name="l00178"></a>00178     <span class="comment">/* insn info, must be freed */</span>
<a name="l00179"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a7d6b0dd003b6703454061024b11481ad">00179</a>     <span class="keyword">struct </span><a class="code" href="../../db/ded/structiseq__insn__info__entry.html">iseq_insn_info_entry</a> *<a class="code" href="../../d6/de3/structrb__iseq__struct.html#a7d6b0dd003b6703454061024b11481ad">insn_info_table</a>;
<a name="l00180"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a4f2f75b5dd56c2069139710fc684bb67">00180</a>     <span class="keywordtype">size_t</span> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a4f2f75b5dd56c2069139710fc684bb67">insn_info_size</a>;
<a name="l00181"></a>00181 
<a name="l00182"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a667787a2e393a8e2a203bf1c2442276d">00182</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> *<a class="code" href="../../d6/de3/structrb__iseq__struct.html#a667787a2e393a8e2a203bf1c2442276d">local_table</a>;            <span class="comment">/* must free */</span>
<a name="l00183"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a22ff1695f19e63e6540bc574949c55b0">00183</a>     <span class="keywordtype">int</span> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a22ff1695f19e63e6540bc574949c55b0">local_table_size</a>;
<a name="l00184"></a>00184 
<a name="l00185"></a>00185     <span class="comment">/* method, class frame: sizeof(vars) + 1, block frame: sizeof(vars) */</span>
<a name="l00186"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#afbae994355f91f3ea547570debb757c0">00186</a>     <span class="keywordtype">int</span> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#afbae994355f91f3ea547570debb757c0">local_size</a>;
<a name="l00187"></a>00187 
<a name="l00188"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#aac26bdad140f107cbf301deb3b935e2c">00188</a>     <span class="keyword">struct </span><a class="code" href="../../d7/d2a/structiseq__inline__cache__entry.html">iseq_inline_cache_entry</a> *<a class="code" href="../../d6/de3/structrb__iseq__struct.html#aac26bdad140f107cbf301deb3b935e2c">ic_entries</a>;
<a name="l00189"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a72aee3eed9e9842166e381972a35e9fb">00189</a>     <span class="keywordtype">int</span> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a72aee3eed9e9842166e381972a35e9fb">ic_size</a>;
<a name="l00190"></a>00190 
<a name="l00214"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a5fd0acd110681eeb0f95c3b283451a0a">00214</a>     <span class="keywordtype">int</span> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a5fd0acd110681eeb0f95c3b283451a0a" title="argument information">argc</a>;
<a name="l00215"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#ae7f7a6daa388dc65f83c27600cb39b00">00215</a>     <span class="keywordtype">int</span> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#ae7f7a6daa388dc65f83c27600cb39b00">arg_simple</a>;
<a name="l00216"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a21bd6b9b1c875df9484cc16f8dd9c73e">00216</a>     <span class="keywordtype">int</span> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a21bd6b9b1c875df9484cc16f8dd9c73e">arg_rest</a>;
<a name="l00217"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a18ca49729d098ee7f25c9d3c3f0d9547">00217</a>     <span class="keywordtype">int</span> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a18ca49729d098ee7f25c9d3c3f0d9547">arg_block</a>;
<a name="l00218"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#ad71990c5fa4c678e369e18bddbaf1639">00218</a>     <span class="keywordtype">int</span> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#ad71990c5fa4c678e369e18bddbaf1639">arg_opts</a>;
<a name="l00219"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a4915a4238c8e8e7106337e5e1c609576">00219</a>     <span class="keywordtype">int</span> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a4915a4238c8e8e7106337e5e1c609576">arg_post_len</a>;
<a name="l00220"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a6250a263c2402b28f97ae50ef9b4e458">00220</a>     <span class="keywordtype">int</span> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a6250a263c2402b28f97ae50ef9b4e458">arg_post_start</a>;
<a name="l00221"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#abd2b67e0dffb2262ab272a67bbe747d6">00221</a>     <span class="keywordtype">int</span> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#abd2b67e0dffb2262ab272a67bbe747d6">arg_size</a>;
<a name="l00222"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a5fa1e846aadb503610b7b2ce0ad643d9">00222</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *<a class="code" href="../../d6/de3/structrb__iseq__struct.html#a5fa1e846aadb503610b7b2ce0ad643d9">arg_opt_table</a>;
<a name="l00223"></a>00223 
<a name="l00224"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a00494b6f5b1aa350819cad777e19eee8">00224</a>     <span class="keywordtype">size_t</span> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a00494b6f5b1aa350819cad777e19eee8">stack_max</a>; <span class="comment">/* for stack overflow check */</span>
<a name="l00225"></a>00225 
<a name="l00226"></a>00226     <span class="comment">/* catch table */</span>
<a name="l00227"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#aaf3c6629a41865ab662884b7481fb394">00227</a>     <span class="keyword">struct </span><a class="code" href="../../dc/d07/structiseq__catch__table__entry.html">iseq_catch_table_entry</a> *<a class="code" href="../../d6/de3/structrb__iseq__struct.html#aaf3c6629a41865ab662884b7481fb394">catch_table</a>;
<a name="l00228"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#ae1d2b9b5e2ae668e100d814f2da38ac0">00228</a>     <span class="keywordtype">int</span> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#ae1d2b9b5e2ae668e100d814f2da38ac0">catch_table_size</a>;
<a name="l00229"></a>00229 
<a name="l00230"></a>00230     <span class="comment">/* for child iseq */</span>
<a name="l00231"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#afce02da209c0bf9a09ef4ea0af68e623">00231</a>     <span class="keyword">struct </span><a class="code" href="../../d6/de3/structrb__iseq__struct.html">rb_iseq_struct</a> *<a class="code" href="../../d6/de3/structrb__iseq__struct.html#afce02da209c0bf9a09ef4ea0af68e623">parent_iseq</a>;
<a name="l00232"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a0f5705507c4c80bc69c3f031dd0daae9">00232</a>     <span class="keyword">struct </span><a class="code" href="../../d6/de3/structrb__iseq__struct.html">rb_iseq_struct</a> *<a class="code" href="../../d6/de3/structrb__iseq__struct.html#a0f5705507c4c80bc69c3f031dd0daae9">local_iseq</a>;
<a name="l00233"></a>00233 
<a name="l00234"></a>00234     <span class="comment">/****************/</span>
<a name="l00235"></a>00235     <span class="comment">/* dynamic data */</span>
<a name="l00236"></a>00236     <span class="comment">/****************/</span>
<a name="l00237"></a>00237 
<a name="l00238"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a46d5fb5c3de970a9540ab85d4b060957">00238</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>;
<a name="l00239"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#ac77458b0570877936a4b323dd8d3e577">00239</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#ac77458b0570877936a4b323dd8d3e577">orig</a>;                 <span class="comment">/* non-NULL if its data have origin */</span>
<a name="l00240"></a>00240 
<a name="l00241"></a>00241     <span class="comment">/* block inlining */</span>
<a name="l00242"></a>00242     <span class="comment">/*</span>
<a name="l00243"></a>00243 <span class="comment">     * NODE *node;</span>
<a name="l00244"></a>00244 <span class="comment">     * void *special_block_builder;</span>
<a name="l00245"></a>00245 <span class="comment">     * void *cached_special_block_builder;</span>
<a name="l00246"></a>00246 <span class="comment">     * VALUE cached_special_block;</span>
<a name="l00247"></a>00247 <span class="comment">     */</span>
<a name="l00248"></a>00248 
<a name="l00249"></a>00249     <span class="comment">/* klass/module nest information stack (cref) */</span>
<a name="l00250"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#af5912a2968d016b3812390998cbba648">00250</a>     NODE *<a class="code" href="../../d6/de3/structrb__iseq__struct.html#af5912a2968d016b3812390998cbba648">cref_stack</a>;
<a name="l00251"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a8817d34a572e6fd1c75da386036f7d7d">00251</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a8817d34a572e6fd1c75da386036f7d7d">klass</a>;
<a name="l00252"></a>00252 
<a name="l00253"></a>00253     <span class="comment">/* misc */</span>
<a name="l00254"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a0f4b700a7d7866d0c5bcabf6d2a1be0b">00254</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <a class="code" href="../../d6/de3/structrb__iseq__struct.html#a0f4b700a7d7866d0c5bcabf6d2a1be0b">defined_method_id</a>;       <span class="comment">/* for define_method */</span>
<a name="l00255"></a>00255 
<a name="l00256"></a>00256     <span class="comment">/* used at compile time */</span>
<a name="l00257"></a><a class="code" href="../../d6/de3/structrb__iseq__struct.html#a947d34698fb5a71f4938532fff27a0f7">00257</a>     <span class="keyword">struct </span><a class="code" href="../../d4/dd8/structiseq__compile__data.html">iseq_compile_data</a> *<a class="code" href="../../d6/de3/structrb__iseq__struct.html#a947d34698fb5a71f4938532fff27a0f7">compile_data</a>;
<a name="l00258"></a>00258 };
<a name="l00259"></a>00259 
<a name="l00260"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a58590982dd240cfd7473cc798636c05a">00260</a> <span class="keyword">enum</span> <a class="code" href="../../d8/d32/vm__core_8h.html#a58590982dd240cfd7473cc798636c05a">ruby_special_exceptions</a> {
<a name="l00261"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a58590982dd240cfd7473cc798636c05aa55467d61f1f171b1caabeeb90462ab33">00261</a>     <a class="code" href="../../d8/d32/vm__core_8h.html#a58590982dd240cfd7473cc798636c05aa55467d61f1f171b1caabeeb90462ab33">ruby_error_reenter</a>,
<a name="l00262"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a58590982dd240cfd7473cc798636c05aa4b0c20b2f080573a811e5ad4486ab74a">00262</a>     <a class="code" href="../../d8/d32/vm__core_8h.html#a58590982dd240cfd7473cc798636c05aa4b0c20b2f080573a811e5ad4486ab74a">ruby_error_nomemory</a>,
<a name="l00263"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a58590982dd240cfd7473cc798636c05aa61db46829f3394b1101379b23a7ba0a6">00263</a>     <a class="code" href="../../d8/d32/vm__core_8h.html#a58590982dd240cfd7473cc798636c05aa61db46829f3394b1101379b23a7ba0a6">ruby_error_sysstack</a>,
<a name="l00264"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a58590982dd240cfd7473cc798636c05aad3e1c23772c07f2dc0823055f25bdc1b">00264</a>     <a class="code" href="../../d8/d32/vm__core_8h.html#a58590982dd240cfd7473cc798636c05aad3e1c23772c07f2dc0823055f25bdc1b">ruby_error_closed_stream</a>,
<a name="l00265"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a58590982dd240cfd7473cc798636c05aa6d18d1c50b79b691e7b8f979b3ff4f0e">00265</a>     <a class="code" href="../../d8/d32/vm__core_8h.html#a58590982dd240cfd7473cc798636c05aa6d18d1c50b79b691e7b8f979b3ff4f0e">ruby_special_error_count</a>
<a name="l00266"></a>00266 };
<a name="l00267"></a>00267 
<a name="l00268"></a><a class="code" href="../../d8/d32/vm__core_8h.html#aef4aade323a1eeb6c2a9e5ecad80b042">00268</a> <span class="preprocessor">#define GetVMPtr(obj, ptr) \</span>
<a name="l00269"></a>00269 <span class="preprocessor">  GetCoreDataFromValue((obj), rb_vm_t, (ptr))</span>
<a name="l00270"></a>00270 <span class="preprocessor"></span>
<a name="l00271"></a>00271 <span class="preprocessor">#if defined(ENABLE_VM_OBJSPACE) &amp;&amp; ENABLE_VM_OBJSPACE</span>
<a name="l00272"></a>00272 <span class="preprocessor"></span><span class="keyword">struct </span><a class="code" href="../../d7/dc0/structrb__objspace.html">rb_objspace</a>;
<a name="l00273"></a>00273 <span class="keywordtype">void</span> <a class="code" href="../../d8/d32/vm__core_8h.html#aea0806876fcecf60de5af807dd054ab0">rb_objspace_free</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/dc0/structrb__objspace.html">rb_objspace</a> *);
<a name="l00274"></a>00274 <span class="preprocessor">#endif</span>
<a name="l00275"></a>00275 <span class="preprocessor"></span>
<a name="l00276"></a><a class="code" href="../../db/d74/structrb__vm__struct.html">00276</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../db/d74/structrb__vm__struct.html">rb_vm_struct</a> {
<a name="l00277"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a60a372cceaf16011b6c3d3b6861df36b">00277</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>;
<a name="l00278"></a>00278 
<a name="l00279"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a0e73c33ec1f57037ccdf288b3242bef5">00279</a>     <a class="code" href="../../d3/d61/structrb__global__vm__lock__struct.html">rb_global_vm_lock_t</a> <a class="code" href="../../db/d74/structrb__vm__struct.html#a0e73c33ec1f57037ccdf288b3242bef5">gvl</a>;
<a name="l00280"></a>00280 
<a name="l00281"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a55af19560794b67c09c608a8464e47c9">00281</a>     <span class="keyword">struct </span><a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_struct</a> *<a class="code" href="../../db/d74/structrb__vm__struct.html#a55af19560794b67c09c608a8464e47c9">main_thread</a>;
<a name="l00282"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a469ec56bec5fad54fa6336d5fde24a03">00282</a>     <span class="keyword">struct </span><a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_struct</a> *<a class="code" href="../../db/d74/structrb__vm__struct.html#a469ec56bec5fad54fa6336d5fde24a03">running_thread</a>;
<a name="l00283"></a>00283 
<a name="l00284"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a09bd6675a9fe3f1b19e36284e91a0e31">00284</a>     <a class="code" href="../../d0/ddd/structst__table.html">st_table</a> *<a class="code" href="../../db/d74/structrb__vm__struct.html#a09bd6675a9fe3f1b19e36284e91a0e31">living_threads</a>;
<a name="l00285"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a81c2ebf1074cb61040daa9389f5bed80">00285</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../db/d74/structrb__vm__struct.html#a81c2ebf1074cb61040daa9389f5bed80">thgroup_default</a>;
<a name="l00286"></a>00286 
<a name="l00287"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a422acd387e3cd145ece43a799031999b">00287</a>     <span class="keywordtype">int</span> <a class="code" href="../../db/d74/structrb__vm__struct.html#a422acd387e3cd145ece43a799031999b">running</a>;
<a name="l00288"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#aeb537f867d1d0c9d09699ea4c1249dfe">00288</a>     <span class="keywordtype">int</span> <a class="code" href="../../db/d74/structrb__vm__struct.html#aeb537f867d1d0c9d09699ea4c1249dfe">inhibit_thread_creation</a>;
<a name="l00289"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a1038a7dea8b630eeb4ee58295576fc97">00289</a>     <span class="keywordtype">int</span> <a class="code" href="../../db/d74/structrb__vm__struct.html#a1038a7dea8b630eeb4ee58295576fc97">thread_abort_on_exception</a>;
<a name="l00290"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a0a5b4123285aad4a64db9a7bd9a0c229">00290</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="../../db/d74/structrb__vm__struct.html#a0a5b4123285aad4a64db9a7bd9a0c229">trace_flag</a>;
<a name="l00291"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a749d1248a707da96582537f890c10287">00291</a>     <span class="keyword">volatile</span> <span class="keywordtype">int</span> <a class="code" href="../../db/d74/structrb__vm__struct.html#a749d1248a707da96582537f890c10287">sleeper</a>;
<a name="l00292"></a>00292 
<a name="l00293"></a>00293     <span class="comment">/* object management */</span>
<a name="l00294"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#af4e77414ac91c895a15ae89dad71f143">00294</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../db/d74/structrb__vm__struct.html#af4e77414ac91c895a15ae89dad71f143">mark_object_ary</a>;
<a name="l00295"></a>00295 
<a name="l00296"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a0878bef1918bcb59dbd39fe53ba3a9a1">00296</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../db/d74/structrb__vm__struct.html#a0878bef1918bcb59dbd39fe53ba3a9a1">special_exceptions</a>[<a class="code" href="../../d8/d32/vm__core_8h.html#a58590982dd240cfd7473cc798636c05aa6d18d1c50b79b691e7b8f979b3ff4f0e">ruby_special_error_count</a>];
<a name="l00297"></a>00297 
<a name="l00298"></a>00298     <span class="comment">/* load */</span>
<a name="l00299"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a75e7f2d63af5fc368e6a1de951190f22">00299</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../db/d74/structrb__vm__struct.html#a75e7f2d63af5fc368e6a1de951190f22">top_self</a>;
<a name="l00300"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a3f2af823747e05c39f7ebd9113e18d3a">00300</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../db/d74/structrb__vm__struct.html#a3f2af823747e05c39f7ebd9113e18d3a">load_path</a>;
<a name="l00301"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#adc9a2f20cba11e9a872bbe603b7db593">00301</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../db/d74/structrb__vm__struct.html#adc9a2f20cba11e9a872bbe603b7db593">loaded_features</a>;
<a name="l00302"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a545233706d1cdd425f64edda8fc67dc7">00302</a>     <span class="keyword">struct </span><a class="code" href="../../d0/ddd/structst__table.html">st_table</a> *<a class="code" href="../../db/d74/structrb__vm__struct.html#a545233706d1cdd425f64edda8fc67dc7">loading_table</a>;
<a name="l00303"></a>00303 
<a name="l00304"></a>00304     <span class="comment">/* signal */</span>
<a name="l00305"></a>00305     <span class="keyword">struct </span>{
<a name="l00306"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#ab84e4878eb81247cddd6b409f5a694a4">00306</a>         <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../db/d74/structrb__vm__struct.html#ab84e4878eb81247cddd6b409f5a694a4">cmd</a>;
<a name="l00307"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#ae73f506cf531b746c62fb8ab6708932a">00307</a>         <span class="keywordtype">int</span> <a class="code" href="../../db/d74/structrb__vm__struct.html#ae73f506cf531b746c62fb8ab6708932a">safe</a>;
<a name="l00308"></a>00308     } <a class="code" href="../../db/d74/structrb__vm__struct.html#a0f0e732caa8418f018fa0f257c783051">trap_list</a>[<a class="code" href="../../d8/d32/vm__core_8h.html#ae435941bb169c44f47dbc7f93a93f3db">RUBY_NSIG</a>];
<a name="l00309"></a>00309 
<a name="l00310"></a>00310     <span class="comment">/* hook */</span>
<a name="l00311"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a97f5b4a0de8b22b5b2215e311bd51eac">00311</a>     <a class="code" href="../../d8/d86/structrb__event__hook__struct.html">rb_event_hook_t</a> *<a class="code" href="../../db/d74/structrb__vm__struct.html#a97f5b4a0de8b22b5b2215e311bd51eac">event_hooks</a>;
<a name="l00312"></a>00312 
<a name="l00313"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a3ee23d493b793fc91dd61376593e8f17">00313</a>     <span class="keywordtype">int</span> <a class="code" href="../../db/d74/structrb__vm__struct.html#a3ee23d493b793fc91dd61376593e8f17">src_encoding_index</a>;
<a name="l00314"></a>00314 
<a name="l00315"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a4cc71b049515a53a03926b2bfba329e6">00315</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../db/d74/structrb__vm__struct.html#a4cc71b049515a53a03926b2bfba329e6">verbose</a>, <a class="code" href="../../db/d74/structrb__vm__struct.html#aa4d70f7ac782e2587683d28c1a99d6ea">debug</a>, <a class="code" href="../../db/d74/structrb__vm__struct.html#a0fabbe8c44aac34d9538388955e2b461">progname</a>;
<a name="l00316"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a21b034468dbe39d33b06fff964a45e9e">00316</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../db/d74/structrb__vm__struct.html#a21b034468dbe39d33b06fff964a45e9e">coverages</a>;
<a name="l00317"></a>00317 
<a name="l00318"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a45b938a144547155b16e1cba45614c61">00318</a>     <span class="keyword">struct </span><a class="code" href="../../d4/dd6/structunlinked__method__entry__list__entry.html">unlinked_method_entry_list_entry</a> *<a class="code" href="../../db/d74/structrb__vm__struct.html#a45b938a144547155b16e1cba45614c61">unlinked_method_entry_list</a>;
<a name="l00319"></a>00319 
<a name="l00320"></a>00320 <span class="preprocessor">#if defined(ENABLE_VM_OBJSPACE) &amp;&amp; ENABLE_VM_OBJSPACE</span>
<a name="l00321"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a9eedda91413032dce6a7053a8f0a449d">00321</a> <span class="preprocessor"></span>    <span class="keyword">struct </span><a class="code" href="../../d7/dc0/structrb__objspace.html">rb_objspace</a> *<a class="code" href="../../db/d74/structrb__vm__struct.html#a9eedda91413032dce6a7053a8f0a449d">objspace</a>;
<a name="l00322"></a>00322 <span class="preprocessor">#endif</span>
<a name="l00323"></a>00323 <span class="preprocessor"></span>
<a name="l00324"></a>00324     <span class="comment">/*</span>
<a name="l00325"></a>00325 <span class="comment">     * @shyouhei notes that this is not for storing normal Ruby</span>
<a name="l00326"></a>00326 <span class="comment">     * objects so do *NOT* mark this when you GC.</span>
<a name="l00327"></a>00327 <span class="comment">     */</span>
<a name="l00328"></a><a class="code" href="../../db/d74/structrb__vm__struct.html#a328959223626113a5ceeb5638b5d9f8d">00328</a>     <span class="keyword">struct </span><a class="code" href="../../dd/d8b/struct_r_array.html">RArray</a> <a class="code" href="../../db/d74/structrb__vm__struct.html#a328959223626113a5ceeb5638b5d9f8d">at_exit</a>;
<a name="l00329"></a>00329 } <a class="code" href="../../db/d74/structrb__vm__struct.html">rb_vm_t</a>;
<a name="l00330"></a>00330 
<a name="l00331"></a><a class="code" href="../../dd/d84/structrb__control__frame__t.html">00331</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00332"></a><a class="code" href="../../dd/d84/structrb__control__frame__t.html#a28b0b301811a891225ba9a58c412482d">00332</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *pc;                  <span class="comment">/* cfp[0] */</span>
<a name="l00333"></a><a class="code" href="../../dd/d84/structrb__control__frame__t.html#a29b331b150e5cae1e206cd87f892bad8">00333</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *sp;                  <span class="comment">/* cfp[1] */</span>
<a name="l00334"></a><a class="code" href="../../dd/d84/structrb__control__frame__t.html#a8e19fd7af779b623f1e9477f271358e6">00334</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *<a class="code" href="../../db/d16/debug_8h.html#a1baecad7f27ccf1689612054ecf6a397">bp</a>;                  <span class="comment">/* cfp[2] */</span>
<a name="l00335"></a><a class="code" href="../../dd/d84/structrb__control__frame__t.html#a4b25ca925a9f60481173632b9c09d4e0">00335</a>     <a class="code" href="../../d6/de3/structrb__iseq__struct.html">rb_iseq_t</a> *iseq;            <span class="comment">/* cfp[3] */</span>
<a name="l00336"></a><a class="code" href="../../dd/d84/structrb__control__frame__t.html#a88144f455e4e42ff4379ab971f22cffc">00336</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> flag;                 <span class="comment">/* cfp[4] */</span>
<a name="l00337"></a><a class="code" href="../../dd/d84/structrb__control__frame__t.html#a4c11a50358317e1207affd6d7b4ad576">00337</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>;                 <span class="comment">/* cfp[5] / block[0] */</span>
<a name="l00338"></a><a class="code" href="../../dd/d84/structrb__control__frame__t.html#af3314cb37c8a27353101bf6f35574946">00338</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *lfp;                 <span class="comment">/* cfp[6] / block[1] */</span>
<a name="l00339"></a><a class="code" href="../../dd/d84/structrb__control__frame__t.html#ac1cafd093e114d3ec99ebeca0ffeb048">00339</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *dfp;                 <span class="comment">/* cfp[7] / block[2] */</span>
<a name="l00340"></a><a class="code" href="../../dd/d84/structrb__control__frame__t.html#a2b5202626f8eab242cb282e928a19420">00340</a>     <a class="code" href="../../d6/de3/structrb__iseq__struct.html">rb_iseq_t</a> *block_iseq;      <span class="comment">/* cfp[8] / block[3] */</span>
<a name="l00341"></a><a class="code" href="../../dd/d84/structrb__control__frame__t.html#aad61bbd9da30e861bfb5fb9669d974cb">00341</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> proc;                 <span class="comment">/* cfp[9] / block[4] */</span>
<a name="l00342"></a><a class="code" href="../../dd/d84/structrb__control__frame__t.html#aa0ec76f80ebaf0668b688c4e4e5e3e3f">00342</a>     <span class="keyword">const</span> <a class="code" href="../../d7/db7/structrb__method__entry__struct.html">rb_method_entry_t</a> *me;<span class="comment">/* cfp[10] */</span>
<a name="l00343"></a>00343 } <a class="code" href="../../dd/d84/structrb__control__frame__t.html">rb_control_frame_t</a>;
<a name="l00344"></a>00344 
<a name="l00345"></a><a class="code" href="../../da/dc0/structrb__block__struct.html">00345</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../da/dc0/structrb__block__struct.html">rb_block_struct</a> {
<a name="l00346"></a><a class="code" href="../../da/dc0/structrb__block__struct.html#ad54e1ec45ab21ef384fe9e4346570397">00346</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>;                 <span class="comment">/* share with method frame if it&apos;s only block */</span>
<a name="l00347"></a><a class="code" href="../../da/dc0/structrb__block__struct.html#a834e1c9b35a06714deeb62097636564f">00347</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *<a class="code" href="../../da/dc0/structrb__block__struct.html#a834e1c9b35a06714deeb62097636564f">lfp</a>;                 <span class="comment">/* share with method frame if it&apos;s only block */</span>
<a name="l00348"></a><a class="code" href="../../da/dc0/structrb__block__struct.html#ac3696ee534a836d6ccc55cdeb2181ac5">00348</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *<a class="code" href="../../da/dc0/structrb__block__struct.html#ac3696ee534a836d6ccc55cdeb2181ac5">dfp</a>;                 <span class="comment">/* share with method frame if it&apos;s only block */</span>
<a name="l00349"></a><a class="code" href="../../da/dc0/structrb__block__struct.html#a8e2b3b9218b4a184f198872404e81605">00349</a>     <a class="code" href="../../d6/de3/structrb__iseq__struct.html">rb_iseq_t</a> *<a class="code" href="../../da/dc0/structrb__block__struct.html#a8e2b3b9218b4a184f198872404e81605">iseq</a>;
<a name="l00350"></a><a class="code" href="../../da/dc0/structrb__block__struct.html#a305ea0fcc6d1233de416bd8e7edab218">00350</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../da/dc0/structrb__block__struct.html#a305ea0fcc6d1233de416bd8e7edab218">proc</a>;
<a name="l00351"></a>00351 } <a class="code" href="../../da/dc0/structrb__block__struct.html">rb_block_t</a>;
<a name="l00352"></a>00352 
<a name="l00353"></a>00353 <span class="keyword">extern</span> <span class="keyword">const</span> <a class="code" href="../../d7/de2/structrb__data__type__struct.html">rb_data_type_t</a> <a class="code" href="../../de/de9/vm_8c.html#a0310d690f45eb1cba3a726e36c65385b">ruby_threadptr_data_type</a>;
<a name="l00354"></a>00354 
<a name="l00355"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a36e942386b2b43383c44e769bffe5808">00355</a> <span class="preprocessor">#define GetThreadPtr(obj, ptr) \</span>
<a name="l00356"></a>00356 <span class="preprocessor">    TypedData_Get_Struct((obj), rb_thread_t, &amp;ruby_threadptr_data_type, (ptr))</span>
<a name="l00357"></a>00357 <span class="preprocessor"></span>
<a name="l00358"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a027718c64d1aa742ccdb9c1a68afaa75">00358</a> <span class="keyword">enum</span> <a class="code" href="../../d8/d32/vm__core_8h.html#a027718c64d1aa742ccdb9c1a68afaa75">rb_thread_status</a> {
<a name="l00359"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a027718c64d1aa742ccdb9c1a68afaa75adb2a6e20fd2cf6951b767dcb0656ef9b">00359</a>     <a class="code" href="../../d8/d32/vm__core_8h.html#a027718c64d1aa742ccdb9c1a68afaa75adb2a6e20fd2cf6951b767dcb0656ef9b">THREAD_TO_KILL</a>,
<a name="l00360"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a027718c64d1aa742ccdb9c1a68afaa75a7b74b43e0bf953520175df870c5aef3c">00360</a>     <a class="code" href="../../d8/d32/vm__core_8h.html#a027718c64d1aa742ccdb9c1a68afaa75a7b74b43e0bf953520175df870c5aef3c">THREAD_RUNNABLE</a>,
<a name="l00361"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a027718c64d1aa742ccdb9c1a68afaa75a79c21bf187ea128d8abffc95f0d86980">00361</a>     <a class="code" href="../../d8/d32/vm__core_8h.html#a027718c64d1aa742ccdb9c1a68afaa75a79c21bf187ea128d8abffc95f0d86980">THREAD_STOPPED</a>,
<a name="l00362"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a027718c64d1aa742ccdb9c1a68afaa75aa6b22e3304bd5ba1d1dad7da9178aa3f">00362</a>     <a class="code" href="../../d8/d32/vm__core_8h.html#a027718c64d1aa742ccdb9c1a68afaa75aa6b22e3304bd5ba1d1dad7da9178aa3f">THREAD_STOPPED_FOREVER</a>,
<a name="l00363"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a027718c64d1aa742ccdb9c1a68afaa75a2a3c55289e7e45cff110e0e499aba03e">00363</a>     <a class="code" href="../../d8/d32/vm__core_8h.html#a027718c64d1aa742ccdb9c1a68afaa75a2a3c55289e7e45cff110e0e499aba03e">THREAD_KILLED</a>
<a name="l00364"></a>00364 };
<a name="l00365"></a>00365 
<a name="l00366"></a><a class="code" href="../../d8/d32/vm__core_8h.html#aaacd8bc40d781eb8daece677943a8132">00366</a> <span class="keyword">typedef</span> RUBY_JMP_BUF <a class="code" href="../../d8/d32/vm__core_8h.html#aaacd8bc40d781eb8daece677943a8132">rb_jmpbuf_t</a>;
<a name="l00367"></a>00367 
<a name="l00368"></a><a class="code" href="../../d5/d80/structrb__vm__tag.html">00368</a> <span class="keyword">struct </span><a class="code" href="../../d5/d80/structrb__vm__tag.html">rb_vm_tag</a> {
<a name="l00369"></a><a class="code" href="../../d5/d80/structrb__vm__tag.html#a559b5a4a559af4709b7ab08ff30f6641">00369</a>     <a class="code" href="../../d8/d32/vm__core_8h.html#aaacd8bc40d781eb8daece677943a8132">rb_jmpbuf_t</a> <a class="code" href="../../d5/d80/structrb__vm__tag.html#a559b5a4a559af4709b7ab08ff30f6641">buf</a>;
<a name="l00370"></a><a class="code" href="../../d5/d80/structrb__vm__tag.html#afe5fda089953de832f983fc9d519cb0a">00370</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d5/d80/structrb__vm__tag.html#afe5fda089953de832f983fc9d519cb0a">tag</a>;
<a name="l00371"></a><a class="code" href="../../d5/d80/structrb__vm__tag.html#a013887e887e9c7a2a9b0a64b76fc8141">00371</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d5/d80/structrb__vm__tag.html#a013887e887e9c7a2a9b0a64b76fc8141">retval</a>;
<a name="l00372"></a><a class="code" href="../../d5/d80/structrb__vm__tag.html#a1ac426fc78564f7c3d11ee1b6c661eb1">00372</a>     <span class="keyword">struct </span><a class="code" href="../../d5/d80/structrb__vm__tag.html">rb_vm_tag</a> *<a class="code" href="../../d5/d80/structrb__vm__tag.html#a1ac426fc78564f7c3d11ee1b6c661eb1">prev</a>;
<a name="l00373"></a>00373 };
<a name="l00374"></a>00374 
<a name="l00375"></a><a class="code" href="../../d5/d29/structrb__vm__protect__tag.html">00375</a> <span class="keyword">struct </span><a class="code" href="../../d5/d29/structrb__vm__protect__tag.html">rb_vm_protect_tag</a> {
<a name="l00376"></a><a class="code" href="../../d5/d29/structrb__vm__protect__tag.html#a27662c6d6520000a54a146dbbfab162c">00376</a>     <span class="keyword">struct </span><a class="code" href="../../d5/d29/structrb__vm__protect__tag.html">rb_vm_protect_tag</a> *<a class="code" href="../../d5/d29/structrb__vm__protect__tag.html#a27662c6d6520000a54a146dbbfab162c">prev</a>;
<a name="l00377"></a>00377 };
<a name="l00378"></a>00378 
<a name="l00379"></a><a class="code" href="../../de/d45/structrb__unblock__callback.html">00379</a> <span class="keyword">struct </span><a class="code" href="../../de/d45/structrb__unblock__callback.html">rb_unblock_callback</a> {
<a name="l00380"></a><a class="code" href="../../de/d45/structrb__unblock__callback.html#af641aca3c5c45670cdad373846a79dd2">00380</a>     <a class="code" href="../../db/d2e/intern_8h.html#a9054f0c75a418c4dc919eb47616f3d71">rb_unblock_function_t</a> *<a class="code" href="../../de/d45/structrb__unblock__callback.html#af641aca3c5c45670cdad373846a79dd2">func</a>;
<a name="l00381"></a><a class="code" href="../../de/d45/structrb__unblock__callback.html#a11d7995ba5947f27f071cfda0f48c593">00381</a>     <span class="keywordtype">void</span> *<a class="code" href="../../de/d45/structrb__unblock__callback.html#a11d7995ba5947f27f071cfda0f48c593">arg</a>;
<a name="l00382"></a>00382 };
<a name="l00383"></a>00383 
<a name="l00384"></a>00384 <span class="keyword">struct </span><a class="code" href="../../da/de0/structrb__mutex__struct.html">rb_mutex_struct</a>;
<a name="l00385"></a>00385 
<a name="l00386"></a>00386 <span class="preprocessor">#ifdef SIGSTKSZ</span>
<a name="l00387"></a>00387 <span class="preprocessor"></span><span class="preprocessor">#define ALT_STACK_SIZE (SIGSTKSZ*2)</span>
<a name="l00388"></a>00388 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00389"></a><a class="code" href="../../d8/d32/vm__core_8h.html#aca50bfb7be201e098951bf4ec357f5c2">00389</a> <span class="preprocessor"></span><span class="preprocessor">#define ALT_STACK_SIZE (4*1024)</span>
<a name="l00390"></a>00390 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00391"></a>00391 <span class="preprocessor"></span>
<a name="l00392"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html">00392</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_struct</a> {
<a name="l00393"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a6e712e6c5295a4173188139f1d6b7462">00393</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>;
<a name="l00394"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a3e7d0b05e2d73f324e70c735ba50739e">00394</a>     <a class="code" href="../../db/d74/structrb__vm__struct.html">rb_vm_t</a> *<a class="code" href="../../d2/d66/structrb__thread__struct.html#a3e7d0b05e2d73f324e70c735ba50739e">vm</a>;
<a name="l00395"></a>00395 
<a name="l00396"></a>00396     <span class="comment">/* execution information */</span>
<a name="l00397"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a3fd7aab45a1c539bc9ca022acfc1ad51">00397</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *<a class="code" href="../../d2/d66/structrb__thread__struct.html#a3fd7aab45a1c539bc9ca022acfc1ad51">stack</a>;               <span class="comment">/* must free, must mark */</span>
<a name="l00398"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a1587dec1a575fb9f8d6a689ef4fdb6b5">00398</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="../../d2/d66/structrb__thread__struct.html#a1587dec1a575fb9f8d6a689ef4fdb6b5">stack_size</a>;
<a name="l00399"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a2ed7f694d58d876aa6f0fae6986bc921">00399</a>     <a class="code" href="../../dd/d84/structrb__control__frame__t.html">rb_control_frame_t</a> *<a class="code" href="../../d2/d66/structrb__thread__struct.html#a2ed7f694d58d876aa6f0fae6986bc921">cfp</a>;
<a name="l00400"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#adc5048ddde96e3ea2e6b22c3e58ce696">00400</a>     <span class="keywordtype">int</span> <a class="code" href="../../d2/d66/structrb__thread__struct.html#adc5048ddde96e3ea2e6b22c3e58ce696">safe_level</a>;
<a name="l00401"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a0783e8b1c2dcd0b9b7a82d68e975eff3">00401</a>     <span class="keywordtype">int</span> <a class="code" href="../../d2/d66/structrb__thread__struct.html#a0783e8b1c2dcd0b9b7a82d68e975eff3">raised_flag</a>;
<a name="l00402"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a02e6343202cb5994463c33da7ed38c4f">00402</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#a02e6343202cb5994463c33da7ed38c4f">last_status</a>; <span class="comment">/* $? */</span>
<a name="l00403"></a>00403 
<a name="l00404"></a>00404     <span class="comment">/* passing state */</span>
<a name="l00405"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a25bbafcd0a1e0f6f79b42cc29baf3eb8">00405</a>     <span class="keywordtype">int</span> <a class="code" href="../../d5/d1d/gb18030_8c.html#adc6e5733fc3c22f0a7b2914188c49c90">state</a>;
<a name="l00406"></a>00406 
<a name="l00407"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a8ddade0070cf5af8034e1549e30839fb">00407</a>     <span class="keywordtype">int</span> <a class="code" href="../../d2/d66/structrb__thread__struct.html#a8ddade0070cf5af8034e1549e30839fb">waiting_fd</a>;
<a name="l00408"></a>00408 
<a name="l00409"></a>00409     <span class="comment">/* for rb_iterate */</span>
<a name="l00410"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#ae680ba33fe514b2b0031d77ad1527e1a">00410</a>     <span class="keyword">const</span> <a class="code" href="../../da/dc0/structrb__block__struct.html">rb_block_t</a> *<a class="code" href="../../d2/d66/structrb__thread__struct.html#ae680ba33fe514b2b0031d77ad1527e1a">passed_block</a>;
<a name="l00411"></a>00411 
<a name="l00412"></a>00412     <span class="comment">/* for bmethod */</span>
<a name="l00413"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a42b995c9fe5e654442129c060c1a8219">00413</a>     <span class="keyword">const</span> <a class="code" href="../../d7/db7/structrb__method__entry__struct.html">rb_method_entry_t</a> *<a class="code" href="../../d2/d66/structrb__thread__struct.html#a42b995c9fe5e654442129c060c1a8219">passed_me</a>;
<a name="l00414"></a>00414 
<a name="l00415"></a>00415     <span class="comment">/* for load(true) */</span>
<a name="l00416"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#ac0ba34f711c43f831fe95e9a9434353f">00416</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#ac0ba34f711c43f831fe95e9a9434353f">top_self</a>;
<a name="l00417"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a63addaa5b39a83e287f7b8747398ab57">00417</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#a63addaa5b39a83e287f7b8747398ab57">top_wrapper</a>;
<a name="l00418"></a>00418 
<a name="l00419"></a>00419     <span class="comment">/* eval env */</span>
<a name="l00420"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#aad6cc8c9d9f511c12cca5af8c8aa6e77">00420</a>     <a class="code" href="../../da/dc0/structrb__block__struct.html">rb_block_t</a> *<a class="code" href="../../d2/d66/structrb__thread__struct.html#aad6cc8c9d9f511c12cca5af8c8aa6e77">base_block</a>;
<a name="l00421"></a>00421 
<a name="l00422"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a8b610ee0748d9068c7b13f82ff700cc6">00422</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *<a class="code" href="../../d2/d66/structrb__thread__struct.html#a8b610ee0748d9068c7b13f82ff700cc6">local_lfp</a>;
<a name="l00423"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a4a62159d10487cfda82e358280f10625">00423</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#a4a62159d10487cfda82e358280f10625">local_svar</a>;
<a name="l00424"></a>00424 
<a name="l00425"></a>00425     <span class="comment">/* thread control */</span>
<a name="l00426"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#acbd5b841dcb2158ed2111abd6b876251">00426</a>     <a class="code" href="../../d2/d82/thread__pthread_8h.html#a605b74cf6a0a0164ef1d6a633f5e70c9">rb_thread_id_t</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#acbd5b841dcb2158ed2111abd6b876251">thread_id</a>;
<a name="l00427"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a647ed2a802789fff9e511bea4ada1239">00427</a>     <span class="keyword">enum</span> <a class="code" href="../../d8/d32/vm__core_8h.html#a027718c64d1aa742ccdb9c1a68afaa75">rb_thread_status</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#a647ed2a802789fff9e511bea4ada1239">status</a>;
<a name="l00428"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#aec8d3fa76bacce31680b55dd03eac0e9">00428</a>     <span class="keywordtype">int</span> <a class="code" href="../../d2/d66/structrb__thread__struct.html#aec8d3fa76bacce31680b55dd03eac0e9">priority</a>;
<a name="l00429"></a>00429 
<a name="l00430"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a1ee6880a07f5e4bf524af64d1ccf3ad0">00430</a>     <a class="code" href="../../d9/dae/structnative__thread__data__struct.html">native_thread_data_t</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#a1ee6880a07f5e4bf524af64d1ccf3ad0">native_thread_data</a>;
<a name="l00431"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#aaf8cb1dd54464d5c8e277a66f2c1a063">00431</a>     <span class="keywordtype">void</span> *<a class="code" href="../../d2/d66/structrb__thread__struct.html#aaf8cb1dd54464d5c8e277a66f2c1a063">blocking_region_buffer</a>;
<a name="l00432"></a>00432 
<a name="l00433"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a3fa7c7d516fe265dbbd215eed5da5a20">00433</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../da/d53/structthgroup.html">thgroup</a>;
<a name="l00434"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a1b297be9273cc68bd7ec30eb99aada0f">00434</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#a1b297be9273cc68bd7ec30eb99aada0f">value</a>;
<a name="l00435"></a>00435 
<a name="l00436"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a173e2da61fa57c7044fd7874a8c7a924">00436</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#a173e2da61fa57c7044fd7874a8c7a924">errinfo</a>;
<a name="l00437"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a29db283fbadbbc6cbc16533803820cb2">00437</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#a29db283fbadbbc6cbc16533803820cb2">thrown_errinfo</a>;
<a name="l00438"></a>00438 
<a name="l00439"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#ad0533270d757d45edf045b509cb9397d">00439</a>     <a class="code" href="../../dd/d02/atomic_8h.html#a872a86eed7f070b0ea35b7494fbd9b73">rb_atomic_t</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#ad0533270d757d45edf045b509cb9397d">interrupt_flag</a>;
<a name="l00440"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a88b241c682c89f42b48fd478f208f5b2">00440</a>     <a class="code" href="../../d2/d82/thread__pthread_8h.html#aad27e6c1e30cf79f10930122e8ae405e">rb_thread_lock_t</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#a88b241c682c89f42b48fd478f208f5b2">interrupt_lock</a>;
<a name="l00441"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a1e8ee4d75d7d514449cf70ce7beca57e">00441</a>     <span class="keyword">struct </span><a class="code" href="../../de/d45/structrb__unblock__callback.html">rb_unblock_callback</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#a1e8ee4d75d7d514449cf70ce7beca57e">unblock</a>;
<a name="l00442"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#ab0435aec1daf59ef6caceee7004a7cfb">00442</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#ab0435aec1daf59ef6caceee7004a7cfb">locking_mutex</a>;
<a name="l00443"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#adb11d95769dc97f821331399fd45a586">00443</a>     <span class="keyword">struct </span><a class="code" href="../../da/de0/structrb__mutex__struct.html">rb_mutex_struct</a> *<a class="code" href="../../d2/d66/structrb__thread__struct.html#adb11d95769dc97f821331399fd45a586">keeping_mutexes</a>;
<a name="l00444"></a>00444 
<a name="l00445"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a5125f0aae753728da5c0a02d84fd7f23">00445</a>     <span class="keyword">struct </span><a class="code" href="../../d5/d80/structrb__vm__tag.html">rb_vm_tag</a> *<a class="code" href="../../d2/d66/structrb__thread__struct.html#a5125f0aae753728da5c0a02d84fd7f23">tag</a>;
<a name="l00446"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#abad8fbdd52a64077a09b01ba9e813226">00446</a>     <span class="keyword">struct </span><a class="code" href="../../d5/d29/structrb__vm__protect__tag.html">rb_vm_protect_tag</a> *<a class="code" href="../../d2/d66/structrb__thread__struct.html#abad8fbdd52a64077a09b01ba9e813226">protect_tag</a>;
<a name="l00447"></a>00447 
<a name="l00448"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#aa6e324c4b5cb18a52b2631f190c7436e">00448</a>     <span class="keywordtype">int</span> <a class="code" href="../../d2/d66/structrb__thread__struct.html#aa6e324c4b5cb18a52b2631f190c7436e">parse_in_eval</a>;
<a name="l00449"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a67feb33455eaa2e31e3d890f9099020b">00449</a>     <span class="keywordtype">int</span> <a class="code" href="../../d2/d66/structrb__thread__struct.html#a67feb33455eaa2e31e3d890f9099020b">mild_compile_error</a>;
<a name="l00450"></a>00450 
<a name="l00451"></a>00451     <span class="comment">/* storage */</span>
<a name="l00452"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#af1ef1ecd85eec7b4809f81151ade5248">00452</a>     <a class="code" href="../../d0/ddd/structst__table.html">st_table</a> *<a class="code" href="../../d2/d66/structrb__thread__struct.html#af1ef1ecd85eec7b4809f81151ade5248">local_storage</a>;
<a name="l00453"></a>00453 
<a name="l00454"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#abfbf76fe971ae99f197a7d85c35ea57d">00454</a>     <span class="keyword">struct </span><a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_struct</a> *<a class="code" href="../../d2/d66/structrb__thread__struct.html#abfbf76fe971ae99f197a7d85c35ea57d">join_list_next</a>;
<a name="l00455"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a8ce752cafdc09f5f16453fa35b1c97c9">00455</a>     <span class="keyword">struct </span><a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_struct</a> *<a class="code" href="../../d2/d66/structrb__thread__struct.html#a8ce752cafdc09f5f16453fa35b1c97c9">join_list_head</a>;
<a name="l00456"></a>00456 
<a name="l00457"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#aefaadd717ae62c44343b7bc767db6c5b">00457</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#aefaadd717ae62c44343b7bc767db6c5b">first_proc</a>;
<a name="l00458"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#ac0efa5cb7f18b285cc3415f47930c4e6">00458</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#ac0efa5cb7f18b285cc3415f47930c4e6">first_args</a>;
<a name="l00459"></a>00459     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> (*<a class="code" href="../../d2/d66/structrb__thread__struct.html#a2cd95d2b3edc012fc00a62c841aa4be5">first_func</a>)(<a class="code" href="../../d8/db0/defines_8h.html#af4fd7cbafda9af704310f78516042dfb">ANYARGS</a>);
<a name="l00460"></a>00460 
<a name="l00461"></a>00461     <span class="comment">/* for GC */</span>
<a name="l00462"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a004e79191ba26ebbdc62ea9f77039f1b">00462</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *<a class="code" href="../../d2/d66/structrb__thread__struct.html#a004e79191ba26ebbdc62ea9f77039f1b">machine_stack_start</a>;
<a name="l00463"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a510cac166812798b8548fe541020667f">00463</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *<a class="code" href="../../d2/d66/structrb__thread__struct.html#a510cac166812798b8548fe541020667f">machine_stack_end</a>;
<a name="l00464"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#add10746c443276bf6df2cc0c6a29c8d7">00464</a>     <span class="keywordtype">size_t</span> <a class="code" href="../../d2/d66/structrb__thread__struct.html#add10746c443276bf6df2cc0c6a29c8d7">machine_stack_maxsize</a>;
<a name="l00465"></a>00465 <span class="preprocessor">#ifdef __ia64</span>
<a name="l00466"></a>00466 <span class="preprocessor"></span>    <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *machine_register_stack_start;
<a name="l00467"></a>00467     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *machine_register_stack_end;
<a name="l00468"></a>00468     <span class="keywordtype">size_t</span> machine_register_stack_maxsize;
<a name="l00469"></a>00469 <span class="preprocessor">#endif</span>
<a name="l00470"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a7863ca61434f5835cbe70aa14b0273c1">00470</a> <span class="preprocessor"></span>    jmp_buf <a class="code" href="../../d2/d66/structrb__thread__struct.html#a7863ca61434f5835cbe70aa14b0273c1">machine_regs</a>;
<a name="l00471"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#ae17b699504a6c4780843eac4971b2e98">00471</a>     <span class="keywordtype">int</span> <a class="code" href="../../d2/d66/structrb__thread__struct.html#ae17b699504a6c4780843eac4971b2e98">mark_stack_len</a>;
<a name="l00472"></a>00472 
<a name="l00473"></a>00473     <span class="comment">/* statistics data for profiler */</span>
<a name="l00474"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a3c9e667590cfe18b655cbe812e04d643">00474</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#a3c9e667590cfe18b655cbe812e04d643">stat_insn_usage</a>;
<a name="l00475"></a>00475 
<a name="l00476"></a>00476     <span class="comment">/* tracer */</span>
<a name="l00477"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#aa368906b4d6c4d26dc7f649b7c8fb6ab">00477</a>     <a class="code" href="../../d8/d86/structrb__event__hook__struct.html">rb_event_hook_t</a> *<a class="code" href="../../d2/d66/structrb__thread__struct.html#aa368906b4d6c4d26dc7f649b7c8fb6ab">event_hooks</a>;
<a name="l00478"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#aa74672d71f91ef8641aafdfea9635b22">00478</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3bf52bb38e89dad9c1b70212ef0a8731">rb_event_flag_t</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#aa74672d71f91ef8641aafdfea9635b22">event_flags</a>;
<a name="l00479"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#aee867b7152ad68c9869e8f29ace86f4c">00479</a>     <span class="keywordtype">int</span> <a class="code" href="../../d2/d66/structrb__thread__struct.html#aee867b7152ad68c9869e8f29ace86f4c">tracing</a>;
<a name="l00480"></a>00480 
<a name="l00481"></a>00481     <span class="comment">/* fiber */</span>
<a name="l00482"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#ad4f0d497c78f3ab7f172d67c6b202b18">00482</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#ad4f0d497c78f3ab7f172d67c6b202b18">fiber</a>;
<a name="l00483"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#aabd5971200cda279bd826c2bd00f870f">00483</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#aabd5971200cda279bd826c2bd00f870f">root_fiber</a>;
<a name="l00484"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a093205381d61933df048492029c5bb99">00484</a>     <a class="code" href="../../d8/d32/vm__core_8h.html#aaacd8bc40d781eb8daece677943a8132">rb_jmpbuf_t</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html#a093205381d61933df048492029c5bb99">root_jmpbuf</a>;
<a name="l00485"></a>00485 
<a name="l00486"></a>00486     <span class="comment">/* misc */</span>
<a name="l00487"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#ac5ac8cec4845e93b6b9f87c9e1b95b15">00487</a>     <span class="keywordtype">int</span> <a class="code" href="../../d2/d66/structrb__thread__struct.html#ac5ac8cec4845e93b6b9f87c9e1b95b15">method_missing_reason</a>;
<a name="l00488"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#a3688f0942a79e35b29bbbd289aad4976">00488</a>     <span class="keywordtype">int</span> <a class="code" href="../../d2/d66/structrb__thread__struct.html#a3688f0942a79e35b29bbbd289aad4976">abort_on_exception</a>;
<a name="l00489"></a>00489 <span class="preprocessor">#ifdef USE_SIGALTSTACK</span>
<a name="l00490"></a>00490 <span class="preprocessor"></span>    <span class="keywordtype">void</span> *altstack;
<a name="l00491"></a>00491 <span class="preprocessor">#endif</span>
<a name="l00492"></a><a class="code" href="../../d2/d66/structrb__thread__struct.html#ada7923750df23f56b0d7164d715af3fb">00492</a> <span class="preprocessor"></span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="../../d2/d66/structrb__thread__struct.html#ada7923750df23f56b0d7164d715af3fb">running_time_us</a>;
<a name="l00493"></a>00493 } <a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a>;
<a name="l00494"></a>00494 
<a name="l00495"></a>00495 <span class="comment">/* iseq.c */</span>
<a name="l00496"></a>00496 <span class="preprocessor">#if defined __GNUC__ &amp;&amp; __GNUC__ &gt;= 4</span>
<a name="l00497"></a>00497 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC visibility push(default)</span>
<a name="l00498"></a>00498 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00499"></a>00499 <span class="preprocessor"></span><a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dd/d74/iseq_8c.html#a356d85dc4610b2e4f8fdd2c9cede6780">rb_iseq_new</a>(NODE*, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <span class="keyword">enum</span> iseq_type);
<a name="l00500"></a>00500 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dd/d74/iseq_8c.html#a6639afc46ed99f4364e13f15df70f1b6">rb_iseq_new_top</a>(NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a0d7af8a92c4b0a07f71585584ef9634f">node</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d6/da0/nkf-utf8_2nkf_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> filename, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> filepath, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> parent);
<a name="l00501"></a>00501 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dd/d74/iseq_8c.html#a488f0fbd4a34d568994990e7655f099a">rb_iseq_new_main</a>(NODE *<a class="code" href="../../d7/dc0/parse_8y.html#a0d7af8a92c4b0a07f71585584ef9634f">node</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> filename, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> filepath);
<a name="l00502"></a>00502 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dd/d74/iseq_8c.html#a017d23e8e494c871ba52d909aea9beaf">rb_iseq_new_with_bopt</a>(NODE*, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <span class="keyword">enum</span> iseq_type, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>);
<a name="l00503"></a>00503 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dd/d74/iseq_8c.html#a03bb99f3d96ed9d858fb7c2e29dbe42f">rb_iseq_new_with_opt</a>(NODE*, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <span class="keyword">enum</span> iseq_type, <span class="keyword">const</span> <a class="code" href="../../db/dc1/structrb__compile__option__struct.html">rb_compile_option_t</a>*);
<a name="l00504"></a>00504 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dd/d74/iseq_8c.html#a78d08932a21dea169b4a326007d649ae">rb_iseq_compile</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> src, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> file, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> line);
<a name="l00505"></a>00505 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dd/d74/iseq_8c.html#ac32c9e7385f4a79acb1cd279a0c569b2">rb_iseq_compile_with_option</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> src, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> file, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> filepath, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> line, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> opt);
<a name="l00506"></a>00506 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dd/d74/iseq_8c.html#aba975c0ae1fb541cd17607c2c285f3eb">rb_iseq_disasm</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>);
<a name="l00507"></a>00507 <span class="keywordtype">int</span> <a class="code" href="../../dd/d74/iseq_8c.html#a8af8d884c25dccb7380ce2c0e5ce1e1c" title="Disassemble a instruction Iseq -&amp;gt; Iseq inspect object.">rb_iseq_disasm_insn</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> str, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *iseqval, <span class="keywordtype">size_t</span> pos, <a class="code" href="../../d6/de3/structrb__iseq__struct.html">rb_iseq_t</a> *iseq, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> child);
<a name="l00508"></a>00508 <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dd/d74/iseq_8c.html#a818834c71f4a58f5bd7f0aa142d1b069">ruby_node_name</a>(<span class="keywordtype">int</span> <a class="code" href="../../d7/dc0/parse_8y.html#a0d7af8a92c4b0a07f71585584ef9634f">node</a>);
<a name="l00509"></a>00509 <span class="keywordtype">int</span> <a class="code" href="../../dd/d74/iseq_8c.html#a2bf706296b2f128f187282d9594fb8ee">rb_iseq_first_lineno</a>(<a class="code" href="../../d6/de3/structrb__iseq__struct.html">rb_iseq_t</a> *iseq);
<a name="l00510"></a>00510 
<a name="l00511"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a1db097e44ece29cd2d24dab65df698e6">00511</a> <a class="code" href="../../d8/db0/defines_8h.html#ae0c8c0314e21908ebdd9fe1098a3ce23">RUBY_EXTERN</a> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../dd/d74/iseq_8c.html#a33f0eb5b1ef504a842daef683bd62273">rb_cISeq</a>;
<a name="l00512"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a923d28e0c2b286ecf146858049b5dc99">00512</a> <a class="code" href="../../d8/db0/defines_8h.html#ae0c8c0314e21908ebdd9fe1098a3ce23">RUBY_EXTERN</a> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../de/de9/vm_8c.html#a600dc9ffdba414e21dacfe809c4a9ec8">rb_cRubyVM</a>;
<a name="l00513"></a><a class="code" href="../../d8/d32/vm__core_8h.html#ae025f5aeaaef18a3a0677fb13c5b5368">00513</a> <a class="code" href="../../d8/db0/defines_8h.html#ae0c8c0314e21908ebdd9fe1098a3ce23">RUBY_EXTERN</a> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../de/de9/vm_8c.html#ad55204994fe946dcd317061047845c3a">rb_cEnv</a>;
<a name="l00514"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a268a47639328a6f82517a4b64c77bef5">00514</a> <a class="code" href="../../d8/db0/defines_8h.html#ae0c8c0314e21908ebdd9fe1098a3ce23">RUBY_EXTERN</a> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../de/de9/vm_8c.html#a15744aab342112335b9189c8911ba625">rb_mRubyVMFrozenCore</a>;
<a name="l00515"></a>00515 <span class="preprocessor">#if defined __GNUC__ &amp;&amp; __GNUC__ &gt;= 4</span>
<a name="l00516"></a>00516 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC visibility pop</span>
<a name="l00517"></a>00517 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00518"></a>00518 <span class="preprocessor"></span>
<a name="l00519"></a>00519 <span class="comment">/* each thread has this size stack : 128KB */</span>
<a name="l00520"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a018f55ffc774044f51407f692f07c0d3">00520</a> <span class="preprocessor">#define RUBY_VM_THREAD_STACK_SIZE (128 * 1024)</span>
<a name="l00521"></a>00521 <span class="preprocessor"></span>
<a name="l00522"></a><a class="code" href="../../d8/d32/vm__core_8h.html#ad9cb04a311c21bdbbd936d8f8b7237db">00522</a> <span class="preprocessor">#define GetProcPtr(obj, ptr) \</span>
<a name="l00523"></a>00523 <span class="preprocessor">  GetCoreDataFromValue((obj), rb_proc_t, (ptr))</span>
<a name="l00524"></a>00524 <span class="preprocessor"></span>
<a name="l00525"></a><a class="code" href="../../d5/d77/structrb__proc__t.html">00525</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00526"></a><a class="code" href="../../d5/d77/structrb__proc__t.html#acf80b0e350012548c28cba1ea64a7a6e">00526</a>     <a class="code" href="../../da/dc0/structrb__block__struct.html">rb_block_t</a> block;
<a name="l00527"></a>00527 
<a name="l00528"></a><a class="code" href="../../d5/d77/structrb__proc__t.html#acdb9a8c85422bf299615f7942ffbc916">00528</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> envval;               <span class="comment">/* for GC mark */</span>
<a name="l00529"></a><a class="code" href="../../d5/d77/structrb__proc__t.html#a6541c1e61b0734aef20b7c2af3b4de5e">00529</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> blockprocval;
<a name="l00530"></a><a class="code" href="../../d5/d77/structrb__proc__t.html#aceef0bead8eaa17dd1217f6078e9cd75">00530</a>     <span class="keywordtype">int</span> <a class="code" href="../../d2/d66/structrb__thread__struct.html#adc5048ddde96e3ea2e6b22c3e58ce696">safe_level</a>;
<a name="l00531"></a><a class="code" href="../../d5/d77/structrb__proc__t.html#ab758491302d7ae34dba60f7c39b97c95">00531</a>     <span class="keywordtype">int</span> is_from_method;
<a name="l00532"></a><a class="code" href="../../d5/d77/structrb__proc__t.html#a7ec13535f2806b214e34a7db8460056b">00532</a>     <span class="keywordtype">int</span> is_lambda;
<a name="l00533"></a>00533 } <a class="code" href="../../d5/d77/structrb__proc__t.html">rb_proc_t</a>;
<a name="l00534"></a>00534 
<a name="l00535"></a><a class="code" href="../../d8/d32/vm__core_8h.html#aaa39b3177aba775195d515b937ef78ff">00535</a> <span class="preprocessor">#define GetEnvPtr(obj, ptr) \</span>
<a name="l00536"></a>00536 <span class="preprocessor">  GetCoreDataFromValue((obj), rb_env_t, (ptr))</span>
<a name="l00537"></a>00537 <span class="preprocessor"></span>
<a name="l00538"></a><a class="code" href="../../d0/d73/structrb__env__t.html">00538</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00539"></a><a class="code" href="../../d0/d73/structrb__env__t.html#a1c42d4847422b6ffd0fb340fdd0cfa8b">00539</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *<a class="code" href="../../d5/df2/win32_8c.html#af973ca20f6594ad664c03daa83867128">env</a>;
<a name="l00540"></a><a class="code" href="../../d0/d73/structrb__env__t.html#a2a6f73bb292a79e0beed588fa6fabe6a">00540</a>     <span class="keywordtype">int</span> <a class="code" href="../../d1/d04/hash_8c.html#ab7344b68c235482bdda88c9fc133abbe">env_size</a>;
<a name="l00541"></a><a class="code" href="../../d0/d73/structrb__env__t.html#a5babbdd0740bbdc371ae7d2f225e8b64">00541</a>     <span class="keywordtype">int</span> local_size;
<a name="l00542"></a><a class="code" href="../../d0/d73/structrb__env__t.html#aa0a172915cc02522f2c6a2fe88a18bad">00542</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> prev_envval;          <span class="comment">/* for GC mark */</span>
<a name="l00543"></a><a class="code" href="../../d0/d73/structrb__env__t.html#a5799d3841d32ff495d213f2c423c87df">00543</a>     <a class="code" href="../../da/dc0/structrb__block__struct.html">rb_block_t</a> block;
<a name="l00544"></a>00544 } <a class="code" href="../../d0/d73/structrb__env__t.html">rb_env_t</a>;
<a name="l00545"></a>00545 
<a name="l00546"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a491d77ec5480e1530e447dbb42481f5b">00546</a> <span class="preprocessor">#define GetBindingPtr(obj, ptr) \</span>
<a name="l00547"></a>00547 <span class="preprocessor">  GetCoreDataFromValue((obj), rb_binding_t, (ptr))</span>
<a name="l00548"></a>00548 <span class="preprocessor"></span>
<a name="l00549"></a><a class="code" href="../../d3/d76/structrb__binding__t.html">00549</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00550"></a><a class="code" href="../../d3/d76/structrb__binding__t.html#a65f58a22eb376363f727c34b7fde7400">00550</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d5/df2/win32_8c.html#af973ca20f6594ad664c03daa83867128">env</a>;
<a name="l00551"></a><a class="code" href="../../d3/d76/structrb__binding__t.html#a5a10eb6f5295cb4561fd868122acdd56">00551</a>     <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> filename;
<a name="l00552"></a><a class="code" href="../../d3/d76/structrb__binding__t.html#a22c208816904df3cefa5ebfa8fe3fd58">00552</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> line_no;
<a name="l00553"></a>00553 } <a class="code" href="../../d3/d76/structrb__binding__t.html">rb_binding_t</a>;
<a name="l00554"></a>00554 
<a name="l00555"></a>00555 <span class="comment">/* used by compile time and send insn */</span>
<a name="l00556"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a56aad9fa74696d2a86028361323a75a6">00556</a> <span class="preprocessor">#define VM_CALL_ARGS_SPLAT_BIT     (0x01 &lt;&lt; 1)</span>
<a name="l00557"></a><a class="code" href="../../d8/d32/vm__core_8h.html#aee4df54d62a5eb107fdd8757de767ee6">00557</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_CALL_ARGS_BLOCKARG_BIT  (0x01 &lt;&lt; 2)</span>
<a name="l00558"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a607d3c76b00f3a7c33fa4b9ba3635e8b">00558</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_CALL_FCALL_BIT          (0x01 &lt;&lt; 3)</span>
<a name="l00559"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a969a5cf4465983b4c59e7b3dd01ac817">00559</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_CALL_VCALL_BIT          (0x01 &lt;&lt; 4)</span>
<a name="l00560"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a953e325401d5eecc6c827cf5f0e66497">00560</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_CALL_TAILCALL_BIT       (0x01 &lt;&lt; 5)</span>
<a name="l00561"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a65ac0a719b35c8055895f4a94f9740f3">00561</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_CALL_TAILRECURSION_BIT  (0x01 &lt;&lt; 6)</span>
<a name="l00562"></a><a class="code" href="../../d8/d32/vm__core_8h.html#ad79997a71425d29caa9e81e3cd89085d">00562</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_CALL_SUPER_BIT          (0x01 &lt;&lt; 7)</span>
<a name="l00563"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a81a5f59a5c7fa91271c6e98261cc112f">00563</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_CALL_OPT_SEND_BIT       (0x01 &lt;&lt; 8)</span>
<a name="l00564"></a>00564 <span class="preprocessor"></span>
<a name="l00565"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a3aec522068d95925054562a7c650b99b">00565</a> <span class="keyword">enum</span> <a class="code" href="../../d8/d32/vm__core_8h.html#a3aec522068d95925054562a7c650b99b">vm_special_object_type</a> {
<a name="l00566"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a3aec522068d95925054562a7c650b99ba932f2eddae25cf0eab7b034b17ad1935">00566</a>     <a class="code" href="../../d8/d32/vm__core_8h.html#a3aec522068d95925054562a7c650b99ba932f2eddae25cf0eab7b034b17ad1935">VM_SPECIAL_OBJECT_VMCORE</a> = 1,
<a name="l00567"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a3aec522068d95925054562a7c650b99ba758770af26f120743dcecdf2579234fb">00567</a>     <a class="code" href="../../d8/d32/vm__core_8h.html#a3aec522068d95925054562a7c650b99ba758770af26f120743dcecdf2579234fb">VM_SPECIAL_OBJECT_CBASE</a>,
<a name="l00568"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a3aec522068d95925054562a7c650b99bae7870b1ddaa6ed7a92c75cd05b39e807">00568</a>     <a class="code" href="../../d8/d32/vm__core_8h.html#a3aec522068d95925054562a7c650b99bae7870b1ddaa6ed7a92c75cd05b39e807">VM_SPECIAL_OBJECT_CONST_BASE</a>
<a name="l00569"></a>00569 };
<a name="l00570"></a>00570 
<a name="l00571"></a><a class="code" href="../../d8/d32/vm__core_8h.html#abc8be29d36c6252fce6bc61621f81b71">00571</a> <span class="preprocessor">#define VM_FRAME_MAGIC_METHOD 0x11</span>
<a name="l00572"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a83eeedff3dde6d2d1ffce5d84c2ba2f1">00572</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_FRAME_MAGIC_BLOCK  0x21</span>
<a name="l00573"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a2524f590c07fceb689b2b7d53114ff5f">00573</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_FRAME_MAGIC_CLASS  0x31</span>
<a name="l00574"></a><a class="code" href="../../d8/d32/vm__core_8h.html#ac9390ef02c17a0bc7e3bd359264562c7">00574</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_FRAME_MAGIC_TOP    0x41</span>
<a name="l00575"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a885c6468caef6c3de80b0ad6c50ae38d">00575</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_FRAME_MAGIC_FINISH 0x51</span>
<a name="l00576"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a26308f33317bb5b96ff89924822e8eab">00576</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_FRAME_MAGIC_CFUNC  0x61</span>
<a name="l00577"></a><a class="code" href="../../d8/d32/vm__core_8h.html#ac1f5b7efa57bccbeb4ff5e7ae6ff18c2">00577</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_FRAME_MAGIC_PROC   0x71</span>
<a name="l00578"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a795522d157a66fe8f0cdd335b28099c9">00578</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_FRAME_MAGIC_IFUNC  0x81</span>
<a name="l00579"></a><a class="code" href="../../d8/d32/vm__core_8h.html#ac7b8d797cce488d08572c273f49f28fe">00579</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_FRAME_MAGIC_EVAL   0x91</span>
<a name="l00580"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a57840803108748406429fb1cb3b10530">00580</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_FRAME_MAGIC_LAMBDA 0xa1</span>
<a name="l00581"></a><a class="code" href="../../d8/d32/vm__core_8h.html#ab94d47b52ad90b194958bc90a343d1aa">00581</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_FRAME_MAGIC_MASK_BITS   8</span>
<a name="l00582"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a168e69c0e9160c31bb11193cf7964f40">00582</a> <span class="preprocessor"></span><span class="preprocessor">#define VM_FRAME_MAGIC_MASK   (~(~0&lt;&lt;VM_FRAME_MAGIC_MASK_BITS))</span>
<a name="l00583"></a>00583 <span class="preprocessor"></span>
<a name="l00584"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a423bad734fe427f4d5deeb4fe71fff65">00584</a> <span class="preprocessor">#define VM_FRAME_TYPE(cfp) ((cfp)-&gt;flag &amp; VM_FRAME_MAGIC_MASK)</span>
<a name="l00585"></a>00585 <span class="preprocessor"></span>
<a name="l00586"></a>00586 <span class="comment">/* other frame flag */</span>
<a name="l00587"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a15218fe6d89c7897abd5a8ad8c9bc52f">00587</a> <span class="preprocessor">#define VM_FRAME_FLAG_PASSED 0x0100</span>
<a name="l00588"></a>00588 <span class="preprocessor"></span>
<a name="l00589"></a><a class="code" href="../../d8/d32/vm__core_8h.html#ae154762699bf1f722bdf05c22026d678">00589</a> <span class="preprocessor">#define RUBYVM_CFUNC_FRAME_P(cfp) \</span>
<a name="l00590"></a>00590 <span class="preprocessor">  (VM_FRAME_TYPE(cfp) == VM_FRAME_MAGIC_CFUNC)</span>
<a name="l00591"></a>00591 <span class="preprocessor"></span>
<a name="l00592"></a>00592 <span class="comment">/* inline cache */</span>
<a name="l00593"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a20f9ae095a9f2cad65ddff8e985ced53">00593</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="../../d7/d2a/structiseq__inline__cache__entry.html">iseq_inline_cache_entry</a> *<a class="code" href="../../d7/d2a/structiseq__inline__cache__entry.html">IC</a>;
<a name="l00594"></a>00594 
<a name="l00595"></a>00595 <span class="keywordtype">void</span> <a class="code" href="../../de/de9/vm_8c.html#a6fc04023a326c5129423edebf52894fd">rb_vm_change_state</a>(<span class="keywordtype">void</span>);
<a name="l00596"></a>00596 
<a name="l00597"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a5f3a5f9cbc153438cf195d5bdeb0981d">00597</a> <span class="keyword">typedef</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d8/d32/vm__core_8h.html#a5f3a5f9cbc153438cf195d5bdeb0981d">CDHASH</a>;
<a name="l00598"></a>00598 
<a name="l00599"></a>00599 <span class="preprocessor">#ifndef FUNC_FASTCALL</span>
<a name="l00600"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a8acc64c1a1caa911f62c931479f935fc">00600</a> <span class="preprocessor"></span><span class="preprocessor">#define FUNC_FASTCALL(x) x</span>
<a name="l00601"></a>00601 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00602"></a>00602 <span class="preprocessor"></span>
<a name="l00603"></a>00603 <span class="keyword">typedef</span> <a class="code" href="../../dd/d84/structrb__control__frame__t.html">rb_control_frame_t</a> *
<a name="l00604"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a52fa6faac5918e5d5271f640aa8d0b26">00604</a>   (<a class="code" href="../../d8/d32/vm__core_8h.html#a8acc64c1a1caa911f62c931479f935fc">FUNC_FASTCALL</a>(*<a class="code" href="../../d8/d32/vm__core_8h.html#a52fa6faac5918e5d5271f640aa8d0b26">rb_insn_func_t</a>))(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *, <a class="code" href="../../dd/d84/structrb__control__frame__t.html">rb_control_frame_t</a> *);
<a name="l00605"></a>00605 
<a name="l00606"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a4bc9fa804787db9db7ea5d698da9db9e">00606</a> <span class="preprocessor">#define GC_GUARDED_PTR(p)     ((VALUE)((VALUE)(p) | 0x01))</span>
<a name="l00607"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a373f1cafd944ff9e99986582d0fd695b">00607</a> <span class="preprocessor"></span><span class="preprocessor">#define GC_GUARDED_PTR_REF(p) ((void *)(((VALUE)(p)) &amp; ~0x03))</span>
<a name="l00608"></a><a class="code" href="../../d8/d32/vm__core_8h.html#ad40b24a19ca6b7354b41e1398b58a091">00608</a> <span class="preprocessor"></span><span class="preprocessor">#define GC_GUARDED_PTR_P(p)   (((VALUE)(p)) &amp; 0x01)</span>
<a name="l00609"></a>00609 <span class="preprocessor"></span>
<a name="l00610"></a><a class="code" href="../../d8/d32/vm__core_8h.html#af087c881c3c493e3a4e326852e8ed2a9">00610</a> <span class="preprocessor">#define RUBY_VM_PREVIOUS_CONTROL_FRAME(cfp) ((cfp)+1)</span>
<a name="l00611"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a456e0e30a5829a029128bcb785ff6933">00611</a> <span class="preprocessor"></span><span class="preprocessor">#define RUBY_VM_NEXT_CONTROL_FRAME(cfp) ((cfp)-1)</span>
<a name="l00612"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a0a82c3322af87ad5e0eb5854d7f98d3b">00612</a> <span class="preprocessor"></span><span class="preprocessor">#define RUBY_VM_END_CONTROL_FRAME(th) \</span>
<a name="l00613"></a>00613 <span class="preprocessor">  ((rb_control_frame_t *)((th)-&gt;stack + (th)-&gt;stack_size))</span>
<a name="l00614"></a><a class="code" href="../../d8/d32/vm__core_8h.html#aa9e5e350ea2fe026133e2e648c6951e9">00614</a> <span class="preprocessor"></span><span class="preprocessor">#define RUBY_VM_VALID_CONTROL_FRAME_P(cfp, ecfp) \</span>
<a name="l00615"></a>00615 <span class="preprocessor">  ((void *)(ecfp) &gt; (void *)(cfp))</span>
<a name="l00616"></a><a class="code" href="../../d8/d32/vm__core_8h.html#ac3cef3df2cc03d3090ad49220cb453d5">00616</a> <span class="preprocessor"></span><span class="preprocessor">#define RUBY_VM_CONTROL_FRAME_STACK_OVERFLOW_P(th, cfp) \</span>
<a name="l00617"></a>00617 <span class="preprocessor">  (!RUBY_VM_VALID_CONTROL_FRAME_P((cfp), RUBY_VM_END_CONTROL_FRAME(th)))</span>
<a name="l00618"></a>00618 <span class="preprocessor"></span>
<a name="l00619"></a><a class="code" href="../../d8/d32/vm__core_8h.html#aa933aeb7a703c7cc2d136492acbbef22">00619</a> <span class="preprocessor">#define RUBY_VM_IFUNC_P(ptr)        (BUILTIN_TYPE(ptr) == T_NODE)</span>
<a name="l00620"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a79d03ad9b9cf8b7a8ca2b849e495a74f">00620</a> <span class="preprocessor"></span><span class="preprocessor">#define RUBY_VM_NORMAL_ISEQ_P(ptr) \</span>
<a name="l00621"></a>00621 <span class="preprocessor">  ((ptr) &amp;&amp; !RUBY_VM_IFUNC_P(ptr))</span>
<a name="l00622"></a>00622 <span class="preprocessor"></span>
<a name="l00623"></a><a class="code" href="../../d8/d32/vm__core_8h.html#acfa2a173f2b08fdbe1045d2c990200d3">00623</a> <span class="preprocessor">#define RUBY_VM_GET_BLOCK_PTR_IN_CFP(cfp) ((rb_block_t *)(&amp;(cfp)-&gt;self))</span>
<a name="l00624"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a2cc1c838fecda2400fa9f2fb5fad3618">00624</a> <span class="preprocessor"></span><span class="preprocessor">#define RUBY_VM_GET_CFP_FROM_BLOCK_PTR(b) \</span>
<a name="l00625"></a>00625 <span class="preprocessor">  ((rb_control_frame_t *)((VALUE *)(b) - 5))</span>
<a name="l00626"></a>00626 <span class="preprocessor"></span>
<a name="l00627"></a>00627 <span class="comment">/* VM related object allocate functions */</span>
<a name="l00628"></a>00628 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../de/de9/vm_8c.html#a914b7151a013f7fc163b7024cb00ac87">rb_thread_alloc</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> klass);
<a name="l00629"></a>00629 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d3/dda/proc_8c.html#afdfd5397f25a751a5bf34dbfeb0968ba">rb_proc_alloc</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> klass);
<a name="l00630"></a>00630 
<a name="l00631"></a>00631 <span class="comment">/* for debug */</span>
<a name="l00632"></a>00632 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="../../d8/d32/vm__core_8h.html#aa68a3152178b05ba670cf15f88201c60">rb_vmdebug_stack_dump_raw</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *, <a class="code" href="../../dd/d84/structrb__control__frame__t.html">rb_control_frame_t</a> *);
<a name="l00633"></a><a class="code" href="../../d8/d32/vm__core_8h.html#ac33c371d81972685538097cb4f49181f">00633</a> <span class="preprocessor">#define SDR() rb_vmdebug_stack_dump_raw(GET_THREAD(), GET_THREAD()-&gt;cfp)</span>
<a name="l00634"></a><a class="code" href="../../d8/d32/vm__core_8h.html#ab913ccb5c8b4c3065335169b15925411">00634</a> <span class="preprocessor"></span><span class="preprocessor">#define SDR2(cfp) rb_vmdebug_stack_dump_raw(GET_THREAD(), (cfp))</span>
<a name="l00635"></a>00635 <span class="preprocessor"></span><span class="keywordtype">void</span> <a class="code" href="../../d8/d32/vm__core_8h.html#af1b67bbf4b72295a772178d0bd939dd0">rb_vm_bugreport</a>(<span class="keywordtype">void</span>);
<a name="l00636"></a>00636 
<a name="l00637"></a>00637 <span class="comment">/* functions about thread/vm execution */</span>
<a name="l00638"></a>00638 <span class="preprocessor">#if defined __GNUC__ &amp;&amp; __GNUC__ &gt;= 4</span>
<a name="l00639"></a>00639 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC visibility push(default)</span>
<a name="l00640"></a>00640 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00641"></a>00641 <span class="preprocessor"></span><a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../de/de9/vm_8c.html#a6e6ce66eb03fe0ce260cc4556b62e129">rb_iseq_eval</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> iseqval);
<a name="l00642"></a>00642 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../de/de9/vm_8c.html#a1561358bc5896c1fd390837e6faeb45f">rb_iseq_eval_main</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> iseqval);
<a name="l00643"></a>00643 <span class="keywordtype">void</span> <a class="code" href="../../d8/d36/signal_8c.html#aa327af6a7f7e71295123fa51c29b85b5">rb_enable_interrupt</a>(<span class="keywordtype">void</span>);
<a name="l00644"></a>00644 <span class="keywordtype">void</span> <a class="code" href="../../d8/d36/signal_8c.html#a45f4182f58112de024cfdd530eb1363c">rb_disable_interrupt</a>(<span class="keywordtype">void</span>);
<a name="l00645"></a>00645 <span class="preprocessor">#if defined __GNUC__ &amp;&amp; __GNUC__ &gt;= 4</span>
<a name="l00646"></a>00646 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC visibility pop</span>
<a name="l00647"></a>00647 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00648"></a>00648 <span class="preprocessor"></span><span class="keywordtype">int</span> <a class="code" href="../../de/de9/vm_8c.html#a7417e683ea286195e2514eca8cfbf601">rb_thread_method_id_and_class</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *th, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> *idp, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *klassp);
<a name="l00649"></a>00649 
<a name="l00650"></a>00650 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../de/de9/vm_8c.html#a87fd97e34aa2d7399db658edb02ea083">rb_vm_invoke_proc</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *th, <a class="code" href="../../d5/d77/structrb__proc__t.html">rb_proc_t</a> *proc, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>,
<a name="l00651"></a>00651                         <span class="keywordtype">int</span> <a class="code" href="../../df/d77/ruby_8c.html#ad1447518f4372828b8435ae82e48499e">argc</a>, <span class="keyword">const</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *<a class="code" href="../../df/d77/ruby_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>, <span class="keyword">const</span> <a class="code" href="../../da/dc0/structrb__block__struct.html">rb_block_t</a> *blockptr);
<a name="l00652"></a>00652 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../de/de9/vm_8c.html#a7e8d71dee905abc403d671561b12f4e8">rb_vm_make_proc</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *th, <span class="keyword">const</span> <a class="code" href="../../da/dc0/structrb__block__struct.html">rb_block_t</a> *block, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> klass);
<a name="l00653"></a>00653 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../de/de9/vm_8c.html#a38087978d8bc36f8cd48b62b70b15000">rb_vm_make_env_object</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *th, <a class="code" href="../../dd/d84/structrb__control__frame__t.html">rb_control_frame_t</a> *cfp);
<a name="l00654"></a>00654 <span class="keywordtype">void</span> <a class="code" href="../../de/de9/vm_8c.html#a193faf68e941a3c79d23e310ed1d424c">rb_vm_rewrite_dfp_in_errinfo</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *th);
<a name="l00655"></a>00655 <span class="keywordtype">void</span> <a class="code" href="../../de/de9/vm_8c.html#aff09679bd9e7c102ed3e3c3c6c04e182">rb_vm_inc_const_missing_count</a>(<span class="keywordtype">void</span>);
<a name="l00656"></a>00656 <span class="keywordtype">void</span> <a class="code" href="../../d3/de7/thread_8c.html#a152e345de139a53b412409fe441067a0">rb_vm_gvl_destroy</a>(<a class="code" href="../../db/d74/structrb__vm__struct.html">rb_vm_t</a> *vm);
<a name="l00657"></a>00657 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d8/d32/vm__core_8h.html#a4522a567e9c2cd8808ba0252cc4dc66d">rb_vm_call</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *th, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> recv, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keywordtype">id</span>, <span class="keywordtype">int</span> <a class="code" href="../../df/d77/ruby_8c.html#ad1447518f4372828b8435ae82e48499e">argc</a>,
<a name="l00658"></a>00658                  <span class="keyword">const</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> *<a class="code" href="../../df/d77/ruby_8c.html#af2efa898e9eed6fe6715279cb1ec35b0">argv</a>, <span class="keyword">const</span> <a class="code" href="../../d7/db7/structrb__method__entry__struct.html">rb_method_entry_t</a> *me);
<a name="l00659"></a>00659 <span class="keywordtype">void</span> <a class="code" href="../../d8/d32/vm__core_8h.html#a263955ddacc8346b09f42ee199d81b4b">rb_unlink_method_entry</a>(<a class="code" href="../../d7/db7/structrb__method__entry__struct.html">rb_method_entry_t</a> *me);
<a name="l00660"></a>00660 <span class="keywordtype">void</span> <a class="code" href="../../d8/d32/vm__core_8h.html#a8eff8ae2b2df7dba69ca516542b1a708">rb_gc_mark_unlinked_live_method_entries</a>(<span class="keywordtype">void</span> *pvm);
<a name="l00661"></a>00661 
<a name="l00662"></a>00662 <span class="keywordtype">void</span> <a class="code" href="../../d3/de7/thread_8c.html#afc63c8472d896681275d164a6504ef65">rb_thread_start_timer_thread</a>(<span class="keywordtype">void</span>);
<a name="l00663"></a>00663 <span class="keywordtype">void</span> <a class="code" href="../../d3/de7/thread_8c.html#aee3187a245b600621afed826f8338f36">rb_thread_stop_timer_thread</a>(<span class="keywordtype">int</span>);
<a name="l00664"></a>00664 <span class="keywordtype">void</span> <a class="code" href="../../d3/de7/thread_8c.html#a9ea0032f29e8cf2be79a7d4ac6383d0a">rb_thread_reset_timer_thread</a>(<span class="keywordtype">void</span>);
<a name="l00665"></a>00665 <span class="keywordtype">void</span> <a class="code" href="../../d1/d1c/thread__pthread_8c.html#a9d4e96f3fcd05963b5d43fc2ecbee3bb">rb_thread_wakeup_timer_thread</a>(<span class="keywordtype">void</span>);
<a name="l00666"></a>00666 
<a name="l00667"></a>00667 <span class="keywordtype">int</span> <a class="code" href="../../d3/de7/thread_8c.html#a2293d6040c352991d160113a62fe5be3">ruby_thread_has_gvl_p</a>(<span class="keywordtype">void</span>);
<a name="l00668"></a>00668 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../db/d2e/intern_8h.html#af0aa399e9d58b72afe77901446157a04">rb_make_backtrace</a>(<span class="keywordtype">void</span>);
<a name="l00669"></a><a class="code" href="../../d8/d32/vm__core_8h.html#af17ad00cbac9b23ea267784b2547acbe">00669</a> <span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d32/vm__core_8h.html#af17ad00cbac9b23ea267784b2547acbe">rb_backtrace_iter_func</a>(<span class="keywordtype">void</span> *, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>, <span class="keywordtype">int</span>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>);
<a name="l00670"></a>00670 <span class="keywordtype">int</span> <a class="code" href="../../d8/d32/vm__core_8h.html#a53d4377e7685dd916255009372937561">rb_backtrace_each</a>(<a class="code" href="../../d8/d32/vm__core_8h.html#af17ad00cbac9b23ea267784b2547acbe">rb_backtrace_iter_func</a> *iter, <span class="keywordtype">void</span> *arg);
<a name="l00671"></a>00671 <a class="code" href="../../dd/d84/structrb__control__frame__t.html">rb_control_frame_t</a> *<a class="code" href="../../de/de9/vm_8c.html#a2709ccd7eeff81c0f749a7678223857e">rb_vm_get_ruby_level_next_cfp</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *th, <a class="code" href="../../dd/d84/structrb__control__frame__t.html">rb_control_frame_t</a> *cfp);
<a name="l00672"></a>00672 <span class="keywordtype">int</span> <a class="code" href="../../de/de9/vm_8c.html#a70289cbb34babceed6243d9471e70e5f">rb_vm_get_sourceline</a>(<span class="keyword">const</span> <a class="code" href="../../dd/d84/structrb__control__frame__t.html">rb_control_frame_t</a> *);
<a name="l00673"></a>00673 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../db/dcc/error_8c.html#ada8792acb4f315701e1bcc914988744f">rb_name_err_mesg_new</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> obj, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> mesg, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> recv, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d7/d2a/structiseq__inline__cache__entry.html#afe485ee1e6c1127a5512d3ec8c43d6a6">method</a>);
<a name="l00674"></a>00674 <span class="keywordtype">void</span> <a class="code" href="../../de/de9/vm_8c.html#af0a6e7c3e77f3c6c8e7738b79dfbde2f">rb_vm_stack_to_heap</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *th);
<a name="l00675"></a>00675 <span class="keywordtype">void</span> <a class="code" href="../../d3/de7/thread_8c.html#a20d8df830e19c1e62520540c66aaf3bb">ruby_thread_init_stack</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *th);
<a name="l00676"></a>00676 
<a name="l00677"></a>00677 <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a45c7ec6904bdff6808acd9b09fb81e0d">NOINLINE</a>(<span class="keywordtype">void</span> <a class="code" href="../../d3/de7/thread_8c.html#a51385c45d1843b2215014082b8b26f94">rb_gc_save_machine_context</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *));
<a name="l00678"></a>00678 <span class="keywordtype">void</span> <a class="code" href="../../d8/d16/gc_8c.html#a4c2152009e465bf40a157fa23dfcc92e">rb_gc_mark_machine_stack</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *th);
<a name="l00679"></a>00679 
<a name="l00680"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a7acad2ca9baf84e4d6cb6e68cd3da73f">00680</a> <span class="preprocessor">#define sysstack_error GET_VM()-&gt;special_exceptions[ruby_error_sysstack]</span>
<a name="l00681"></a>00681 <span class="preprocessor"></span>
<a name="l00682"></a>00682 <span class="comment">/* for thread */</span>
<a name="l00683"></a>00683 
<a name="l00684"></a>00684 <span class="preprocessor">#if RUBY_VM_THREAD_MODEL == 2</span>
<a name="l00685"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a3f0c76b50cc319c794b6150df15374bc">00685</a> <span class="preprocessor"></span><a class="code" href="../../d8/db0/defines_8h.html#ae0c8c0314e21908ebdd9fe1098a3ce23">RUBY_EXTERN</a> <a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *<a class="code" href="../../de/de9/vm_8c.html#a21823fe13ba76a2161c1b35286853e32">ruby_current_thread</a>;
<a name="l00686"></a>00686 <span class="keyword">extern</span> <a class="code" href="../../db/d74/structrb__vm__struct.html">rb_vm_t</a> *<a class="code" href="../../de/de9/vm_8c.html#a9be24d2deecfd3c43942e8c7cc4770a1">ruby_current_vm</a>;
<a name="l00687"></a>00687 
<a name="l00688"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a6cfcd3997994924c8cd13c3b5c099ec6">00688</a> <span class="preprocessor">#define GET_VM() ruby_current_vm</span>
<a name="l00689"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a8deb84ec6023e3229db88ac2c9da6138">00689</a> <span class="preprocessor"></span><span class="preprocessor">#define GET_THREAD() ruby_current_thread</span>
<a name="l00690"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a189286b1d291cc780c5205d00e1b47e6">00690</a> <span class="preprocessor"></span><span class="preprocessor">#define rb_thread_set_current_raw(th) (void)(ruby_current_thread = (th))</span>
<a name="l00691"></a><a class="code" href="../../d8/d32/vm__core_8h.html#addad24839d7483095151e91b3b83aed6">00691</a> <span class="preprocessor"></span><span class="preprocessor">#define rb_thread_set_current(th) do { \</span>
<a name="l00692"></a>00692 <span class="preprocessor">    if ((th)-&gt;vm-&gt;running_thread != (th)) { \</span>
<a name="l00693"></a>00693 <span class="preprocessor">        (th)-&gt;vm-&gt;running_thread-&gt;running_time_us = 0; \</span>
<a name="l00694"></a>00694 <span class="preprocessor">    } \</span>
<a name="l00695"></a>00695 <span class="preprocessor">    rb_thread_set_current_raw(th); \</span>
<a name="l00696"></a>00696 <span class="preprocessor">    (th)-&gt;vm-&gt;running_thread = (th); \</span>
<a name="l00697"></a>00697 <span class="preprocessor">} while (0)</span>
<a name="l00698"></a>00698 <span class="preprocessor"></span>
<a name="l00699"></a>00699 <span class="preprocessor">#else</span>
<a name="l00700"></a>00700 <span class="preprocessor"></span><span class="preprocessor">#error &quot;unsupported thread model&quot;</span>
<a name="l00701"></a>00701 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00702"></a>00702 <span class="preprocessor"></span>
<a name="l00703"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a478d1279e4f797cf2d315d91a0cba111">00703</a> <span class="preprocessor">#define RUBY_VM_SET_TIMER_INTERRUPT(th)         ATOMIC_OR((th)-&gt;interrupt_flag, 0x01)</span>
<a name="l00704"></a><a class="code" href="../../d8/d32/vm__core_8h.html#ab555b1a4987c4b9085e703c3d7ac6470">00704</a> <span class="preprocessor"></span><span class="preprocessor">#define RUBY_VM_SET_INTERRUPT(th)               ATOMIC_OR((th)-&gt;interrupt_flag, 0x02)</span>
<a name="l00705"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a24bcbe1a08ff7427bcefc4ba3ec16463">00705</a> <span class="preprocessor"></span><span class="preprocessor">#define RUBY_VM_SET_FINALIZER_INTERRUPT(th)     ATOMIC_OR((th)-&gt;interrupt_flag, 0x04)</span>
<a name="l00706"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a0556a5a4763f36a45f81053a30570f3d">00706</a> <span class="preprocessor"></span><span class="preprocessor">#define RUBY_VM_INTERRUPTED(th) ((th)-&gt;interrupt_flag &amp; 0x02)</span>
<a name="l00707"></a>00707 <span class="preprocessor"></span>
<a name="l00708"></a>00708 <span class="keywordtype">int</span> <a class="code" href="../../d8/d36/signal_8c.html#ae736d06fff1f8b7b00cf0d25dfff369a">rb_signal_buff_size</a>(<span class="keywordtype">void</span>);
<a name="l00709"></a>00709 <span class="keywordtype">void</span> <a class="code" href="../../d8/d36/signal_8c.html#a2f947d2a4f2b5d4f721e408c533310c9">rb_signal_exec</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *th, <span class="keywordtype">int</span> sig);
<a name="l00710"></a>00710 <span class="keywordtype">void</span> <a class="code" href="../../d3/de7/thread_8c.html#a1ef1042de9adc6b17f182fe1d0466342">rb_threadptr_check_signal</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *mth);
<a name="l00711"></a>00711 <span class="keywordtype">void</span> <a class="code" href="../../d3/de7/thread_8c.html#a7a2a75d8700562c9f8e17b40b017440d">rb_threadptr_signal_raise</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *th, <span class="keywordtype">int</span> sig);
<a name="l00712"></a>00712 <span class="keywordtype">void</span> <a class="code" href="../../d3/de7/thread_8c.html#ab74abfa9f067678a7a78d54a3904530b">rb_threadptr_signal_exit</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *th);
<a name="l00713"></a>00713 <span class="keywordtype">void</span> <a class="code" href="../../d3/de7/thread_8c.html#a13d00d5df84ea8de959318141eba5b94">rb_threadptr_execute_interrupts</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *);
<a name="l00714"></a>00714 <span class="keywordtype">void</span> <a class="code" href="../../d3/de7/thread_8c.html#ac46256e91e4796220065f97cd0842a10">rb_threadptr_interrupt</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *th);
<a name="l00715"></a>00715 <span class="keywordtype">void</span> <a class="code" href="../../d3/de7/thread_8c.html#aa411c64669553c03fd84487a7b700d1c">rb_threadptr_unlock_all_locking_mutexes</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *th);
<a name="l00716"></a>00716 
<a name="l00717"></a>00717 <span class="keywordtype">void</span> <a class="code" href="../../d3/de7/thread_8c.html#ab096d365b6ba25e9280d530c955036c2">rb_thread_lock_unlock</a>(<a class="code" href="../../d2/d82/thread__pthread_8h.html#aad27e6c1e30cf79f10930122e8ae405e">rb_thread_lock_t</a> *);
<a name="l00718"></a>00718 <span class="keywordtype">void</span> <a class="code" href="../../d3/de7/thread_8c.html#a05b1588093d3f2fa012534aed3680d36">rb_thread_lock_destroy</a>(<a class="code" href="../../d2/d82/thread__pthread_8h.html#aad27e6c1e30cf79f10930122e8ae405e">rb_thread_lock_t</a> *);
<a name="l00719"></a>00719 
<a name="l00720"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a15cefd6c7bf2f2573a042884bd0ae2ca">00720</a> <span class="preprocessor">#define RUBY_VM_CHECK_INTS_TH(th) do { \</span>
<a name="l00721"></a>00721 <span class="preprocessor">    if (UNLIKELY((th)-&gt;interrupt_flag)) { \</span>
<a name="l00722"></a>00722 <span class="preprocessor">        rb_threadptr_execute_interrupts(th); \</span>
<a name="l00723"></a>00723 <span class="preprocessor">    } \</span>
<a name="l00724"></a>00724 <span class="preprocessor">} while (0)</span>
<a name="l00725"></a>00725 <span class="preprocessor"></span>
<a name="l00726"></a><a class="code" href="../../d8/d32/vm__core_8h.html#aa94ad6b88de1b239d85ddb282a26a23e">00726</a> <span class="preprocessor">#define RUBY_VM_CHECK_INTS() \</span>
<a name="l00727"></a>00727 <span class="preprocessor">  RUBY_VM_CHECK_INTS_TH(GET_THREAD())</span>
<a name="l00728"></a>00728 <span class="preprocessor"></span>
<a name="l00729"></a>00729 <span class="comment">/* tracer */</span>
<a name="l00730"></a>00730 <span class="keywordtype">void</span>
<a name="l00731"></a>00731 <a class="code" href="../../d3/de7/thread_8c.html#ab2efc6f0ecfa5dff7a76fda4c7a3e1fd">rb_threadptr_exec_event_hooks</a>(<a class="code" href="../../d2/d66/structrb__thread__struct.html">rb_thread_t</a> *th, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3bf52bb38e89dad9c1b70212ef0a8731">rb_event_flag_t</a> flag, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <span class="keyword">self</span>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#afa5b9137f051ac26d7ccc8824f178233">ID</a> <span class="keywordtype">id</span>, <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> klass);
<a name="l00732"></a>00732 
<a name="l00733"></a><a class="code" href="../../d8/d32/vm__core_8h.html#a724eed84e4b041ec1867e198ee129192">00733</a> <span class="preprocessor">#define EXEC_EVENT_HOOK(th, flag, self, id, klass) do { \</span>
<a name="l00734"></a>00734 <span class="preprocessor">    rb_event_flag_t wait_event__ = (th)-&gt;event_flags; \</span>
<a name="l00735"></a>00735 <span class="preprocessor">    if (UNLIKELY(wait_event__)) { \</span>
<a name="l00736"></a>00736 <span class="preprocessor">        if (wait_event__ &amp; ((flag) | RUBY_EVENT_VM)) { \</span>
<a name="l00737"></a>00737 <span class="preprocessor">            rb_threadptr_exec_event_hooks((th), (flag), (self), (id), (klass)); \</span>
<a name="l00738"></a>00738 <span class="preprocessor">        } \</span>
<a name="l00739"></a>00739 <span class="preprocessor">    } \</span>
<a name="l00740"></a>00740 <span class="preprocessor">} while (0)</span>
<a name="l00741"></a>00741 <span class="preprocessor"></span>
<a name="l00742"></a>00742 <span class="preprocessor">#if defined __GNUC__ &amp;&amp; __GNUC__ &gt;= 4</span>
<a name="l00743"></a>00743 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC visibility push(default)</span>
<a name="l00744"></a>00744 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00745"></a>00745 <span class="preprocessor"></span>
<a name="l00746"></a>00746 <span class="keywordtype">int</span> <a class="code" href="../../d3/de7/thread_8c.html#a024fc07d1560d6a94da3bcc268c9bbd8">rb_thread_check_trap_pending</a>(<span class="keywordtype">void</span>);
<a name="l00747"></a>00747 
<a name="l00748"></a>00748 <span class="keyword">extern</span> <a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a> <a class="code" href="../../d3/de7/thread_8c.html#a07f418cdbb9ed1a05c44d91d2a07d2eb">rb_get_coverages</a>(<span class="keywordtype">void</span>);
<a name="l00749"></a>00749 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="../../d3/de7/thread_8c.html#acda533d07af42453c8ba4ebe64bcb434">rb_set_coverages</a>(<a class="code" href="../../de/de6/ruby_2ruby_8h.html#a3c1d4bfc6a81af60bdcb48744c35f760">VALUE</a>);
<a name="l00750"></a>00750 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="../../d3/de7/thread_8c.html#af718cfec22a7d5e6978ffa532b793005">rb_reset_coverages</a>(<span class="keywordtype">void</span>);
<a name="l00751"></a>00751 
<a name="l00752"></a>00752 <span class="preprocessor">#if defined __GNUC__ &amp;&amp; __GNUC__ &gt;= 4</span>
<a name="l00753"></a>00753 <span class="preprocessor"></span><span class="preprocessor">#pragma GCC visibility pop</span>
<a name="l00754"></a>00754 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00755"></a>00755 <span class="preprocessor"></span>
<a name="l00756"></a>00756 <span class="preprocessor">#endif </span><span class="comment">/* RUBY_VM_CORE_H */</span>
<a name="l00757"></a>00757 
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 1 Mar 2013 for Ruby by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
